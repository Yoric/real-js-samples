(window.webpackJsonp=window.webpackJsonp||[]).push([[38,40],{"+LJB":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("0Log"),a=n("/aPz"),r=n("0Lz3");function o(e,t,n,o){return{topic:n?Object(a.c)(n):"",type:i.PubsubMessageType.BitsLeaderboardEvent,mutator:function(e,t){if(!t||!n)return t;var i=e.top.map(function(e){return Object(r.b)(e,n.id)});if(t.user){if(t.user.tournament&&t.user.tournament.teamLeaderboard&&(t.user.tournament.teamLeaderboard.items.edges=i),t.user.tournament&&t.user.tournament.globalLeaderboard&&(t.user.tournament.globalLeaderboard.items.edges=i,o&&e.entry_context&&e.entry_context.entry.entry_key===o&&t.user.tournament.self&&t.user.tournament.self.globalLeaderboardItem)){var a=Object(r.b)(e.entry_context.entry,n.id);t.user.tournament.self.globalLeaderboardItem=a.node}if(t.user.cheer&&t.user.cheer.leaderboard&&(t.user.cheer.leaderboard.items.edges=i,o&&e.entry_context&&e.entry_context.entry&&e.entry_context.entry.entry_key===o&&t.user.self&&t.user.self.bitsLeaderboardItem)){var s=Object(r.b)(e.entry_context.entry,n.id);t.user.self.bitsLeaderboardItem=s.node}}return t},skip:!n,query:e,variables:{channelID:t}}}},"+U0Y":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var i="core.user-preferences.LANGUAGE_PREFERENCES_UPDATED";function a(e){return{type:i,languagePreferences:e}}},"+kC+":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatLine_SubsOnlyUpsell_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:134}};n.loc.source={body:"query ChatLine_SubsOnlyUpsell_UserSubscriptionProducts($login: String!) {\nuser(login: $login) {\nid\nsubscriptionProducts {\nid\nurl\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"+pBb":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"i",function(){return o}),n.d(t,"j",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"l",function(){return p}),n.d(t,"k",function(){return h}),n.d(t,"n",function(){return g}),n.d(t,"m",function(){return f}),n.d(t,"q",function(){return v}),n.d(t,"s",function(){return b}),n.d(t,"r",function(){return k}),n.d(t,"v",function(){return C}),n.d(t,"u",function(){return y}),n.d(t,"w",function(){return S}),n.d(t,"a",function(){return E}),n.d(t,"o",function(){return N}),n.d(t,"p",function(){return w}),n.d(t,"t",function(){return _}),n.d(t,"K",function(){return D}),n.d(t,"F",function(){return O}),n.d(t,"P",function(){return I}),n.d(t,"M",function(){return T}),n.d(t,"I",function(){return M}),n.d(t,"D",function(){return L}),n.d(t,"J",function(){return F}),n.d(t,"E",function(){return x}),n.d(t,"H",function(){return j}),n.d(t,"C",function(){return A}),n.d(t,"L",function(){return P}),n.d(t,"G",function(){return R}),n.d(t,"z",function(){return U}),n.d(t,"y",function(){return B}),n.d(t,"B",function(){return V}),n.d(t,"N",function(){return H}),n.d(t,"A",function(){return G}),n.d(t,"Q",function(){return q}),n.d(t,"x",function(){return W}),n.d(t,"O",function(){return z}),n.d(t,"S",function(){return Q}),n.d(t,"R",function(){return Y});var i=n("Tznh"),a="chat.CHAT_HIDDEN",r="chat.CHAT_SHOWN",o="chat.EMOTE_SETS_UPDATED",s="chat.FOLLOWER_MODE_DURATION_PREFERENCE_CHANGED",l="chat.AUTOMOD_ACTIONS_ENABLED",c="chat.AUTOMOD_ACTIONS_DISABLED",d="chat.EMOTE_PICKER_CLOSED",u="chat.EMOTE_PICKER_OPENED",m="chat.CLOSE_CHAT_RULES",p="chat.MODERATION_ACTIONS_ENABLED",h="chat.MODERATION_ACTIONS_DISABLED",g="chat.MOD_ICONS_ENABLED",f="chat.MOD_ICONS_DISABLED",v="chat.SHOW_CHAT_RULES",b="chat.TIMESTAMPS_ENABLED",k="chat.TIMESTAMPS_DISABLED",C="chat.VIEWER_CHAT_FILTER_ENABLED",y="chat.VIEWER_CHAT_FILTER_DISABLED",S="chat.VIEWER_CHAT_FILTER_SETTINGS_CHANGED",E="chat.ADD_COMMAND",N="chat.REMOVE_COMMAND",w="chat.RENDER_SENT_CHAT_MESSAGE",_="chat.UNHIDE_IGNORED_COMMAND";function D(){return{type:b}}function O(){return{type:k}}function I(){return{type:r}}function T(){return{type:a}}function M(){return{type:l}}function L(){return{type:c}}function F(){return{type:p}}function x(){return{type:h}}function j(){return{type:g}}function A(){return{type:f}}function P(e){return{type:C,source:e||i.c.Other}}function R(e){return{type:y,source:e||i.c.Other}}function U(e,t){return{type:S,settings:e,source:t||i.c.Other}}function B(e,t){return{type:s,channelLogin:e,duration:t}}function V(){return{type:d}}function H(){return{type:u}}function G(){return{type:m}}function q(){return{type:v}}function W(e,t,n){return{type:E,command:e.toLowerCase(),handler:t,channelLogin:n}}function z(e,t,n){return{type:N,command:e.toLowerCase(),handler:t,channelLogin:n}}function Q(e){return{type:w,customEvent:e}}function Y(e){return{type:_,userID:e}}},"/HY+":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n("ZS2+").a.wrap(function(){return n.e(244).then(n.bind(null,"q0CL"))},"ReportUserModal")},"/gva":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUserBannedStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:135}};n.loc.source={body:"query CurrentUserBannedStatus($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nself {\nbanStatus {\nisPermanent\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"/i69":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/7QA"),s=n("gcd7"),l=n("QVaV"),c=n("iyGE"),d=n("a2UF"),u=n("vSeP"),m=n("WytW"),p=n("AREq"),h=n("Av0x"),g=n("hnjF"),f=n("sUnt"),v=600,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banUser=function(e){var n=Object(m.i)("/ban "+e);if(n){var i=t.userLogin(n.banTarget),a=n.reason||void 0;if(i){var r=Object(o.d)("Unable to ban user.","BanCommandHandler");return{deferred:t.props.banUserMutation(i,void 0,a).then(function(e){var n=e.banUserFromChatRoom;return n?n.error?{notice:Object(p.a)({login:i,code:n.error.code})}:t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{userLogin} is now banned from this channel.",{userLogin:i},"BanCommandHandler")}:{notice:r}}).catch(function(){return{notice:r}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to ban.","BanCommandHandler")})}}return{deferred:Promise.resolve({notice:Object(o.d)("Usage: /ban [login] [reason]","BanCommandHandler")})}},t.unbanUser=function(e){if(e&&0!==e.length){var n=t.userLogin(e),i=Object(o.d)("Unable to unban user.","BanCommandHandler");return{deferred:t.props.unbanUserMutation(n).then(function(e){var a=e.unbanUserFromChatRoom;return a?a.error?{notice:Object(h.a)(n,a.error.code)}:t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{bannedUserLogin} is no longer banned from this channel.",{bannedUserLogin:n},"BanCommandHandler")}:{notice:i}}).catch(function(){return{notice:i}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to unban.","BanCommandHandler")})}},t.timeoutUser=function(e){var n=Object(m.m)("/timeout "+e);if(n){var i,a=t.userLogin(n.banTarget),r=n.reason||void 0,s=void 0;if(n.rawDuration&&n.durationSeconds?(i=n.durationSeconds,s=n.rawDuration===String(n.durationSeconds)?n.durationSeconds:n.rawDuration):n.rawDuration&&!n.validArguments?(s=n.rawDuration,i=v):(i=v,s=v),a){var l=Object(o.d)("Unable to timeout user.","BanCommandHandler");return{deferred:t.props.banUserMutation(a,s,r).then(function(e){var r=e.banUserFromChatRoom;if(!r)return{notice:l};if(r.error){var s=r.error.minTimeoutDurationSeconds,c=r.error.maxTimeoutDurationSeconds;return{notice:Object(p.a)({login:a,code:r.error.code,enteredDuration:n.rawDuration||void 0,isTimeout:!0,minTimeoutDuration:s||void 0,maxTimeoutDuration:c||void 0})}}return t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:a,duration:i||v},"BanCommandHandler")}}).catch(function(){return{notice:l}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to timeout.","BanCommandHandler")})}}return{deferred:Promise.resolve({notice:Object(o.d)("Usage: /timeout [login] [duration in seconds] [reason]","BanCommandHandler")})}},t.untimeoutUser=function(e){if(e){var n=t.userLogin(e),i=Object(o.d)("Unable to untimeout user.","BanCommandHandler");return{deferred:t.props.unbanUserMutation(n).then(function(e){var a=e.unbanUserFromChatRoom;return a?a.error?{notice:Object(h.a)(n,a.error.code,!0)}:t.props.suppressLocalSuccessMessage?{}:{notice:Object(o.d)("{login} is no longer timed out in this channel.",{login:n},"BanCommandHandler")}:{notice:i}}).catch(function(){return{notice:i}})}}return{deferred:Promise.resolve({notice:Object(o.d)("Please specify a user to untimeout.","BanCommandHandler")})}},t.userLogin=function(e){return Object(l.b)(e)?e:t.props.activeChattersAPI?t.props.activeChattersAPI.getActiveChatterLoginFromDisplayName(e)||e:t.props.displayNameToLogin&&t.props.displayNameToLogin(e)||e},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(f.a,{display:g.d.Hide},a.createElement(s.a,{channelLogin:this.props.channelLogin,command:"ban",handler:this.banUser}),a.createElement(s.a,{channelLogin:this.props.channelLogin,command:"unban",handler:this.unbanUser}),a.createElement(s.a,{channelLogin:this.props.channelLogin,command:"timeout",handler:this.timeoutUser}),a.createElement(s.a,{channelLogin:this.props.channelLogin,command:"untimeout",handler:this.untimeoutUser}))},t}(a.Component),k=function(e){return{channelID:e.channelID}},C=Object(r.compose)(u.a,Object(d.a)(k),Object(c.a)(k))(b);n.d(t,"a",function(){return C})},"/nm5":function(e,t,n){},"04j6":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_ChatEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:116}};n.loc.source={body:"query Core_Services_Spade_ChatEvent_User($id: ID!) {\nuser(id: $id) {\nid\nisPartner\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"08uX":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("fvjX"),s=n("x7UT"),l=n("0Log"),c=n("/aPz"),d=n("f00E"),u=n("5zXJ"),m=n("/7QA"),p=n("8SX2"),h=n("oK83"),g=n("hnjF"),f=n("Z2sP"),v=n("sUnt"),b=n("Ws8v"),k=n("X2PJ"),C=n("+80q");n("XUhy");!function(e){e.Container="notification-selector"}(i||(i={}));var y,S=function(e){var t=r.createElement(p.a,{contentID:"",login:e.data.userLogin,sourceType:h.b.mega_cheer_notification},e.data.displayName),n=Object(m.d)("{gifterButton} MegaCheered {bitsAmount} Bits and shared rewards to {giftedAmount} others in chat!",{gifterButton:t,bitsAmount:Object(m.f)(e.data.bitsAmount),giftedAmount:e.data.selectedCount},"MegaCheerNotificationCard");return r.createElement(b.a,{className:"mega-cheer-notification-card","data-test-selector":i.Container,background:k.a.Base,display:g.d.Flex,alignItems:g.b.Center,flexDirection:g.e.Column},r.createElement(v.a,{display:g.d.Flex,flexDirection:g.e.Row,alignItems:g.b.Center,overflow:g.i.Hidden},r.createElement(g.g,{className:"mega-cheer-notification__icon"},r.createElement("img",{src:e.iconURL})),r.createElement(C.a,{fontSize:k.d.Size7,color:k.c.Alt2,className:"mega-cheer-notification-card__text"},n)),r.createElement(f.a,{animationDirection:f.b.Down,size:f.c.Small,animationDuration:e.progressDuration,onAnimationEnd:e.onProgressBarEnd}))},E=n("Tvwe"),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cards:[]},t.onCardClose=function(){t.popCard()},t}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=[],n=e.pubsub.messages.megaNotificationEvent;if(n&&n!==this.props.pubsub.messages.megaNotificationEvent){var i=n.data;i.bitsAmount>=5e3?t.push(r.createElement(S,{data:i,iconURL:u.h+"/owl-2019/notifications/MegaCheer-04.png",progressDuration:10,onProgressBarEnd:this.onCardClose})):i.bitsAmount>=1e3&&t.push(r.createElement(S,{data:i,iconURL:u.h+"/owl-2019/notifications/MegaCheer-03.png",progressDuration:5,onProgressBarEnd:this.onCardClose})),t=t.map(function(e){return r.cloneElement(e,{key:Object(d.b)()})}),this.state.cards.length>=5&&this.popCard(),this.setState(function(e){return{cards:e.cards.concat(t)}})}},t}(E.a),w=Object(o.compose)(Object(s.a)([{topic:function(e){return Object(c.l)(e.channelID)},mapMessageTypesToProps:(y={},y[l.PubsubMessageType.CheerbombEvent]="megaNotificationEvent",y)}]))(N);n.d(t,"a",function(){return w})},"0EKw":function(e,t,n){"use strict";var i=n("q1tI"),a=n("SHn+"),r=n("kduP"),o=n("imSJ"),s=function(e){return i.createElement(a.a,{linkTo:{pathname:Object(r.b)(e.name),state:{content:"current_game",medium:"twitch_channel"}},label:Object(o.a)(),title:e.name,"data-a-target":"stream-game-link"})};n.d(t,"a",function(){return s})},"0FG4":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var i,a=n("RcPG"),r=n("a1OF");!function(e){e[e.Position=0]="Position",e[e.Token=1]="Token"}(i||(i={}));var o="0";function s(e,t,n){var o,s,l=n.type===i.Position?t:e,c=n.map[l];if(c){var d=(o=e,s=c.id,{images:{sources:{"1x":Object(r.d)(s,1),"2x":Object(r.d)(s,2),"4x":Object(r.d)(s,4)},themed:!1},alt:o,emoteID:s});return{type:a.a.Emote,content:d}}return null}var l={"\\:\\&gt\\;":[":>"],"\\&gt\\;\\(":[">("],"\\&lt\\;\\]":["<]"],"\\&lt\\;3":["<3"],":-?(?:7|L)":[":-7",":-L",":7",":L"],"[oO](_|\\.)[oO]":["o_o","O_O","o_O","O_o","o.o","O.O","o.O","O.o"],"\\;-?(p|P)":[";-p",";-P",";p",";P"],"\\;-?\\)":[";-)",";)"],"\\:-?(o|O)":[":-o",":-O",":o",":O"],"\\:-?(p|P)":[":-p",":-P",":p",":P"],"\\:-?(S|s)":[":-S",":-s",":s",":S"],"\\:-?[\\\\/]":[":-/",":-\\",":/",":\\"],"\\:-?[z|Z|\\|]":[":-|",":-Z",":-z",":|",":Z",":z"],"\\:-?\\(":[":-(",":("],"\\:-?\\)":[":-)",":)"],"\\:-?D":[":-D",":D"],"#-?[\\\\/]":["#-/","#-\\","#/","#\\"],"B-?\\)":["B-)","B)"],"R-?\\)":["R-)","R)"]};function c(e){for(var t={},n=0,i=e;n<i.length;n++){var a=i[n];if(a&&a.emotes)for(var r=0,s=a.emotes;r<s.length;r++){var c=s[r];if(c&&c.id&&c.token)for(var d=0,u=l[c.token]||[c.token];d<u.length;d++){var m=u[d];t[m]&&a.id===o||(t[m]={id:c.id,token:m})}}}return t}},"0Hf3":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return b});var i,a,r,o,s=n("mrSG"),l=n("/7QA"),c=n("DMoW"),d=n("2xye"),u=n("E/0f"),m=n("oK83");function p(e){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(n){return t={target_user_id:e.targetUserID,target_login:e.targetLogin,channel_id:e.channelID,channel_login:e.channelLogin,click_text:h(e.clickText),action:e.action},l.p.track(d.SpadeEventType.ChatProfileCardClick,t),[2]})})}function h(e){switch(e){case u.c.Messages:return i.Messages;case u.c.Timeouts:return i.Timeouts;case u.c.Bans:return i.Bans;case u.c.ModComments:return i.ModComments;default:return e}}function g(e){return s.__awaiter(this,void 0,void 0,function(){var t,n,i,a;return s.__generator(this,function(r){return t=e.data,n=t.channelUser,i=t.targetUser,a={target_user_id:i&&i.id||"",target_login:i&&i.login||e.targetLogin,channel_id:n&&n.id||e.channelID,channel_login:n&&n.login||e.channelLogin,profile_card_type:f(e),ui_context:m.b[e.sourceType]},l.p.track(d.SpadeEventType.ChatProfileCardOpen,a),[2]})})}function f(e){return e.data.currentUser&&e.data.channelUser&&e.data.currentUser.id===e.data.channelUser.id?r.Broadcaster:e.data.channelUser&&e.data.channelUser.self&&e.data.channelUser.self.isModerator?e.data.channelUser.modLogsRoleAccess&&e.data.channelUser.modLogsRoleAccess.accessLevel!==c.Aa.NONE?r.ModWithChatlogs:r.ModWithoutChatlogs:r.RegularViewer}function v(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,i,a,r,c;return s.__generator(this,function(s){return n=e.data,i=n.channelUser,a=n.targetUser,r=e.isPopout,c={comment_uuid:t.id,ui_context:r?o.Popout:o.Card,target_user_id:a&&a.id,target_login:a&&a.login,channel_id:i&&i.id||e.channelID,channel_login:i&&i.login||e.channelLogin,from_user_id:t.author&&t.author.id,from_user_login:t.author&&t.author.login},l.p.track(d.SpadeEventType.ClientModCommentAdd,c),[2]})})}function b(e,t){return s.__awaiter(this,void 0,void 0,function(){var n,i,a,r,c;return s.__generator(this,function(s){return n=e.data,i=n.channelUser,a=n.targetUser,r=e.isPopout,c={comment_uuid:t.id,ui_context:r?o.Popout:o.Card,target_user_id:a&&a.id,target_login:a&&a.login,channel_id:i&&i.id||e.channelID,channel_login:i&&i.login||e.channelLogin,from_user_id:t.author&&t.author.id,from_user_login:t.author&&t.author.login},l.p.track(d.SpadeEventType.ClientModCommentDelete,c),[2]})})}!function(e){e.Messages="messages",e.Timeouts="timeouts",e.Bans="bans",e.ModComments="mod_comments",e.PopOut="popout",e.Whisper="whisper"}(i||(i={})),function(e){e.Expand="expand",e.Collapse="collapse"}(a||(a={})),function(e){e.RegularViewer="regular_viewer",e.Broadcaster="broadcaster",e.ModWithChatlogs="mod_with_chatlogs",e.ModWithoutChatlogs="mod_without_chatlogs"}(r||(r={})),function(e){e.Card="chat_profile_card",e.Popout="chat_profile_card_popout"}(o||(o={}))},"0INk":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return c});var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=function(){var e=a.p.getLastPageview();return e&&e.location||r.PageviewLocation.None},s=function(e){a.p.trackItemSectionClick({carousel_content:r.PageviewContent.Video,channel_id:e.broadcasterID||"0",channel:e.channelLogin||"unknown",content:r.PageviewContent.PreviewCardGameName,item_index:e.contentIndex,medium:e.pageviewMedium,item_id:e.videoID,item_type:r.TwitchDataType.Video,item_viewcount:null,location:o()})},l=function(e){a.p.trackItemSectionClick({carousel_content:r.PageviewContent.PreviewCardGameBalloonGame,channel_id:e.broadcasterID||"0",channel:e.channelLogin||"unknown",content:r.PageviewContent.PreviewCardGameBalloonGame,item_index:e.contentIndex,medium:e.pageviewMedium,item_id:e.videoID,item_type:r.TwitchDataType.Video,item_viewcount:null,location:o()})},c=function(e){return i.__awaiter(void 0,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){try{t=e.map(function(){return r.TwitchDataType.Game}),n=e.map(function(){return null}),a.p.trackItemSectionLoad({carousel_content:r.PageviewContent.PreviewCardGameBalloonGame,rendered_item_count:e.length,rendered_item_list:e,rendered_item_types:t,rendered_items_viewcounts:n,location:o()})}catch(e){}return[2]})})}},"0Rl0":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("q1tI"),a=n("uXHW"),r=n("fPaz"),o=n("PL8s"),s=n("AFv4"),l=n("sUnt"),c=n("hnjF"),d=n("+80q"),u=n("X2PJ"),m=function(){return i.createElement(a.a,null,i.createElement(r.b,{ratio:r.c.Aspect16x9},i.createElement(o.a,null)),i.createElement(s.a,null,i.createElement(l.a,{display:c.d.Flex,margin:{bottom:1}},i.createElement(l.a,{display:c.d.InlineBlock,margin:{top:1,right:1}},i.createElement(o.a,{width:40,height:56})),i.createElement(l.a,{display:c.d.InlineBlock,margin:{top:1}},i.createElement(d.a,null,i.createElement(o.a,{width:150})),i.createElement(d.a,{fontSize:u.d.Size7},i.createElement(o.a,{width:100}))))))}},"0T/G":function(e,t){},"0WFu":function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return d});var i,a,r=n("/7QA"),o=n("3Bft"),s=n("kRBY");function l(e){return[o.a.Prime,o.a.Custom].includes(e)?null:parseInt(e,10)/1e3}function c(e){var t=e instanceof Date?e:new Date(e);return Math.round((t.getTime()-Date.now())/864e5)}function d(e){var t=r.b.get(e,a.Off);return t===a.On||!(t!==a.Staff||!Object(s.g)(r.q.store.getState()))}!function(e){e.Prime2Paid="prime_2_paid"}(i||(i={})),function(e){e.Off="off",e.On="on",e.Staff="staff"}(a||(a={}))},"0bws":function(e,t,n){"use strict";var i=n("/MKj"),a=n("mrSG"),r=n("1hWM"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.updateContext({},t),n}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.updateContext(this.props,e)},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return null},t.prototype.updateContext=function(e,t){var n={};t.theme!==e.theme&&(n.theme=t.theme),t.game!==e.game&&(n.game=t.game),t.hostingInfo!==e.hostingInfo&&(n.hostingInfo=t.hostingInfo),Object.keys(n).length>0&&r.extensionService.postContext(n)},t}(n("q1tI").Component);function s(e){return{theme:e.ui.theme}}var l=Object(i.connect)(s)(o);n.d(t,!1,function(){return s}),n.d(t,"a",function(){return l})},"16Gl":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"g",function(){return d});var i=n("kduP");function a(e,t){return Object(i.d)(e)+"/edit/"+t}function r(e,t){return Object(i.d)(e)+"/highlighter/"+t}function o(e,t){return location.protocol+"//"+location.host+r(e,t)}function s(e,t){return Object(i.d)(e)+"/schedule/"+t}function l(e,t){return Object(i.d)(e)+"/publish/"+t}function c(e,t){return Object(i.d)(e)+"/appeal/"+t}function d(e){return"/videos/"+e}},"1Ijn":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoPreviewCard__VideoMoments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"momentRequestType"},value:{kind:"EnumValue",value:"VIDEO_CHAPTER_MARKERS"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"videoMomentEdge"},directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"videoMomentEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoMomentEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"videoChapter"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"videoChapter"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoMoment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"durationMilliseconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"positionMilliseconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"momentDetails"},directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"momentDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoMoment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"gameChangeDetails"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"hearthstoneDetails"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"overwatchDetails"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"pubgDetails"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"gameChangeDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GameChangeMomentDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"40"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"53"}}],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"hearthstoneDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HearthstoneMomentDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"broadcasterHero"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"class"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"opponentHero"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"class"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gameMode"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"overwatchDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OverwatchMomentDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"heroName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"pubgDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PUBGMomentDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"maxPlayerCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minPlayerCount"},arguments:[],directives:[]}]}}],loc:{start:0,end:946}};n.loc.source={body:"query VideoPreviewCard__VideoMoments($videoId: ID!) {\nvideo(id: $videoId) {\nid\nmoments(momentRequestType: VIDEO_CHAPTER_MARKERS) {\nedges {\n...videoMomentEdge\n}\n}\n}\n}\nfragment videoMomentEdge on VideoMomentEdge {\ncursor\nnode {\n...videoChapter\n}\n}\nfragment videoChapter on VideoMoment {\nid\ndurationMilliseconds\npositionMilliseconds\ntype\ndescription\nthumbnailURL\n...momentDetails\nvideo {\nid\nlengthSeconds\n}\n}\nfragment momentDetails on VideoMoment {\ndetails {\n...gameChangeDetails\n...hearthstoneDetails\n...overwatchDetails\n...pubgDetails\n}\n}\nfragment gameChangeDetails on GameChangeMomentDetails {\ngame {\nid\ndisplayName\nboxArtURL(width: 40 height: 53)\n}\n}\nfragment hearthstoneDetails on HearthstoneMomentDetails {\nbroadcasterHero {\nid\nclass\nname\n}\nopponentHero {\nid\nclass\nname\n}\ngameMode {\ntype\nvalue\n}\n}\nfragment overwatchDetails on OverwatchMomentDetails {\nrole\nheroName\n}\nfragment pubgDetails on PUBGMomentDetails {\nmaxPlayerCount\nminPlayerCount\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"1MDS":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return h});var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("oK83"),s=n("P5MF"),l=n("nR4f"),c=n("P6kH"),d={Unknown:"unknown",Chat:"chat",Room:"room",Whisper:"whisper",Vod:"vod"},u={Close:"close",ReportDropDown:"report_drop_down",Report:"report",Follow:"follow",Unfollow:"unfollow",Subscribe:"subscribe",ClickTryPrime:"click_try_prime",GoToChannel:"go_to_channel",Open:"open",ClickChannelName:"click_channel_name",CloseClickOtherEmote:"close_click_other_emote"},m={Available:"available",CreatorBanned:"creator_banned",LimitedTimeEmote:"limited_time_emote",GlobalEmote:"global_emote",Prime:"prime",Turbo:"turbo",OtherUnlockable:"other_unlockable"};function p(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,d,u,m,p,h,f,v,b,k,C,y,S,E;return i.__generator(this,function(i){switch(i.label){case 0:t={emoteID:e.emoticonID},n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.q.apollo.client.query({query:l,variables:t})];case 2:return n=i.sent(),[3,4];case 3:return o=i.sent(),a.k.warn(o,"Failed to make query for emote info in EmoteCard reporting.",{emoteID:e.emoticonID}),[3,4];case 4:d=n&&n.data&&n.data.emote||null,n&&!d&&a.k.warn("Query for emote info in EmoteCard reporting returned no data.",{emoteID:e.emoticonID}),u=n&&n.data?Object(c.d)(n.data):c.a.Unknown,m=d&&d.subscriptionProduct&&d.subscriptionProduct.owner&&d.subscriptionProduct.owner.displayName||"",p=d&&d.subscriptionProduct&&d.subscriptionProduct.owner&&d.subscriptionProduct.owner.id||"",u===c.a.OWL2019&&(m=c.b,p=c.c),h={channelID:p},f=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,a.q.apollo.client.query({query:s,variables:h})];case 6:return f=i.sent(),[3,8];case 7:return v=i.sent(),a.k.warn(v,"Failed to make query for channel info in EmoteCard reporting.",{channelID:p}),[3,8];case 8:return b=f&&f.data&&f.data.user||null,f&&!b&&a.k.warn("Query for channel info in EmoteCard reporting returned no data.",{channelID:p}),k=!!b&&!!b.hasPrime,C=b&&b.self,y=!!C&&!!C.subscriptionBenefit,S=!!C&&!!C.canPrimeSubscribe,E={emote_location:e.emoteLocation,emoticon_id:e.emoticonID,chat_channel:e.chatChannel,chat_channel_id:e.chatChannelID,emote_channel:m,emote_channel_id:p,referrer_user_id:e.referrerUserID,action:e.action,is_subscribed:y,is_subscribed_tier:C&&C.subscriptionBenefit&&C.subscriptionBenefit.tier||"",emote_tier:d&&d.subscriptionProduct&&d.subscriptionProduct.tier||"",emote_status:g(u),has_prime:k,can_subscribe:S,msg_id:e.msgID},a.p.track(r.SpadeEventType.EmoteCardInteraction,E),[2]}})})}function h(e){switch(e){case o.a.chat:return d.Chat;case o.a.whisper:return d.Whisper;case o.a.vod:return d.Vod;case o.a.room:return d.Room;case o.a.unknown:default:return d.Unknown}}function g(e){switch(e){case c.a.Prime:return m.Prime;case c.a.Turbo:return m.Turbo;case c.a.OWL2019:case c.a.Subscription:return m.Available;case c.a.LimitedTime:return m.LimitedTimeEmote;case c.a.Unavailable:return m.CreatorBanned;case c.a.Global:return m.GlobalEmote;case c.a.Unknown:default:return m.OtherUnlockable}}},"1Rv/":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_UnbanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnbanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unbanUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:243}};n.loc.source={body:"mutation Chat_UnbanUserFromChatRoom($input: UnbanUserFromChatRoomInput!) {\nunbanUserFromChatRoom(input: $input) {\nban {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"1VX3":function(e,t,n){"use strict";var i=n("W7Hf");n.d(t,"a",function(){return i.a})},"1yLn":function(e,t,n){},"26nv":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ChannelData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rules"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:155}};n.loc.source={body:"query Chat_ChannelData($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nlogin\ndisplayName\nchatSettings {\nrules\n}\nself {\nisModerator\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"2C+f":function(e,t,n){},"2D+f":function(e,t,n){},"2Dht":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WhisperThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:347}};n.loc.source={body:"query WhisperThread($id: ID!) {\nwhisperThread(id: $id) {\nid\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nunreadMessagesCount\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n}\nsentAt\neditedAt\ndeletedAt\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"2Ev9":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var i=n("mrSG"),a=n("DMoW"),r=function(){function e(e,t,n){this.count=0,this.globalsBySet=new Map,this.channelsBySet=new Map;var i=e.filter(function(e){return!!e}),a=t?t.filter(function(e){return!!e}):[];this.count=i.length+(t?a.length:0),this.indexBadges(i,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(a,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:void 0!==(n=this.globalsBySet.get(e))&&n.get(t)||null},e.prototype.indexBadges=function(e,t,n){e.forEach(function(e){n&&e.clickAction&&e.clickAction===a.d.SUBSCRIBE&&(e=i.__assign({},e,{channelName:n}));var r=t.get(e.setID);r||(r=new Map,t.set(e.setID,r)),r.set(e.version,e)})},e}(),o=new r([],[],"")},"2EzP":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n("XIZb"),a=Object(i.a)("MessageHandler"),r=(a.InnerProvider,a.withChatServiceProvider),o=a.withContext,s=r,l=o(function(e){return{messageHandlerAPI:e.serviceAPI,setMessageHandlerAPI:e.setServiceAPI}})},"2bi+":function(e,t,n){"use strict";n("DLhE");var i=n("fvjX"),a=n("/7QA"),r=n("mrSG"),o=n("V3Pk"),s=n("ZuiC"),l=function(e){return r.__assign({searchHits:[],videos:{}},e)};var c=n("sf7/"),d=n("DpwM"),u=n("g807"),m=n("RNNG"),p=n("Sfdh"),h=function(e){return r.__assign({comments:Object(u.c)(),currentVideoTime:0,cursor:{future:d.g,past:d.g},errorMessage:"",hasDismissedChatReplayError:!1,hasLoadedCurrentUserBlockedList:!1,hasLoadedData:!1,isPostCooldownActive:!1,isReplayFilterOn:!1,isScrollingSynced:!0,replyCursorMap:{},hideTimestamps:!1},e)},g=150;var f={apiToken:"",deviceId:""};var v={users:{}},b=function(e){return r.__assign({users:{}},e)};function k(e,t){var n=t.reduce(function(e,t){return e[t.id]=t,e},{});return r.__assign({},e,n)}var C=Object(i.combineReducers)({comments:function(e,t){var n;switch(void 0===e&&(e=h()),t.type){case s.l:var i=r.__assign({},t.comments[0],{highlight:!0,source:d.f});return r.__assign({},e,{comments:Object(u.d)(e.comments,[i]),isPostCooldownActive:!0});case s.m:return r.__assign({},e,{errorMessage:t.createError});case s.o:return r.__assign({},e,{errorMessage:t.errorMessage});case s.d:var a=t.comments[0].parentId,l=e.cursor,f=e.replyCursorMap,v=t.comments.slice();if(""===a)l=t.cursor;else if(f=r.__assign({},e.replyCursorMap,((n={})[a]=t.cursor.future,n)),t.cursor.future===d.g){var b=Object(u.b)(e.comments,a);if(b){var k=r.__assign({},b,{moreReplies:!1});v.push(k)}}var C=Object(u.d)(e.comments,v);return e.isScrollingSynced&&(C=Object(m.e)(C,g)),r.__assign({},e,{comments:C,cursor:l,hasLoadedData:!0,replyCursorMap:f});case s.e:return r.__assign({},e,{comments:Object(u.d)(Object(u.c)(),t.comments),hasLoadedData:!0,cursor:t.cursor,replyCursorMap:{}});case s.f:return r.__assign({},e,{hasLoadedData:!0});case o.c:return r.__assign({},e,{comments:Object(u.d)(Object(u.c)(),t.comments),cursor:t.cursor,hasLoadedData:!0,errorMessage:""});case o.b:return r.__assign({},h(),{hasLoadedData:!0,errorMessage:t.error});case c.b:return r.__assign({},e,{currentVideoTime:Math.floor(t.updatedTime)});case c.a:case s.c:return r.__assign({},h());case s.n:return r.__assign({},e,{comments:Object(m.d)(e.comments,t.comment)});case s.k:var y=e.errorMessage;return y===Object(p.a)().messageCreatedTooQuickError&&(y=""),r.__assign({},e,{isPostCooldownActive:!1,errorMessage:y});case s.h:return r.__assign({},e,{isScrollingSynced:!1});case s.i:return r.__assign({},e,{comments:Object(m.e)(e.comments,g),isScrollingSynced:!0});case o.a:return r.__assign({},e,{comments:Object(m.a)(e.comments,function(e){return e.commenter!==t.user})});case s.p:return r.__assign({},e,{comments:Object(u.d)(e.comments,t.comments)});case s.g:return r.__assign({},e,{isReplayFilterOn:t.isReplayFilterOn});case s.a:return r.__assign({},e,{hasDismissedChatReplayError:!0});case s.j:return r.__assign({},e,{hideTimestamps:t.hideTimestamps});case s.b:return r.__assign({},e,{isReplayFilterOn:t.isReplayFilterOn,hideTimestamps:t.hideTimestamps});default:return e}},config:function(e){return void 0===e&&(e=f),e},users:function(e,t){switch(void 0===e&&(e=v),t.type){case s.d:case s.e:case o.c:case s.l:return{users:k(e.users,t.users)};case s.c:return r.__assign({},b());default:return e}},moderation:function(e,t){switch(void 0===e&&(e=l()),t.type){case o.c:return r.__assign({},e,{videos:(n=e.videos,i=t.videos,a=i.reduce(function(e,t){return e[t.id]=t,e},{}),r.__assign({},n,a))});case o.d:return t.hits&&t.hits.results.length>0?r.__assign({},e,{searchHits:t.hits.results}):r.__assign({},e,{searchHits:[]});case s.c:return r.__assign({},l());default:return e}var n,i,a}});a.q.store.registerReducer("vodChat",C);n("WK0g"),n("ahza");var y=n("nxZp"),S=(function(){}(),n("pU2t"),n("l41m")),E=n("HjbF"),N=n("kVrx"),w=n("ZUUl"),_=n("82xK"),D=n("zClW"),O=(n("3Ps+"),n("GCGb")),I=n("Zkco"),T=n("KD05"),M=n("fCiU"),L=n("XXm5"),F=n("znm4"),x=(n("pwkZ"),n("4OCo")),j=n("GEnX");n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return y.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"A",function(){return S.d}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"o",function(){return s.y}),n.d(t,"q",function(){return c.d}),n.d(t,"u",function(){return E.c}),n.d(t,"v",function(){return E.d}),n.d(t,"n",function(){return E.a}),n.d(t,"m",function(){return N.a}),n.d(t,"x",function(){return N.b}),n.d(t,"z",function(){return N.c}),n.d(t,"B",function(){return w.a}),n.d(t,"C",function(){return w.b}),n.d(t,"k",function(){return _.a}),n.d(t,"p",function(){return D.a}),n.d(t,"r",function(){return D.b}),n.d(t,"y",function(){return D.c}),n.d(t,"H",function(){return D.i}),n.d(t,"D",function(){return D.d}),n.d(t,"E",function(){return D.e}),n.d(t,"F",function(){return D.f}),n.d(t,"G",function(){return D.g}),n.d(t,!1,function(){}),n.d(t,"b",function(){return d.b}),n.d(t,"d",function(){return d.d}),n.d(t,"a",function(){return d.a}),n.d(t,"c",function(){return d.c}),n.d(t,!1,function(){}),n.d(t,"w",function(){return d.h}),n.d(t,"e",function(){return O.b}),n.d(t,!1,function(){}),n.d(t,"h",function(){return I.a}),n.d(t,"t",function(){return T.b}),n.d(t,"s",function(){return M.b}),n.d(t,"f",function(){return L.a}),n.d(t,"g",function(){return L.b}),n.d(t,"l",function(){return F.a}),n.d(t,!1,function(){}),n.d(t,"j",function(){return x.a}),n.d(t,"i",function(){return j.a})},"2e6W":function(e,t,n){},"34IA":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCardModLogsMessagesBySender"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"senderID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modLogs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messagesBySender"},arguments:[{kind:"Argument",name:{kind:"Name",value:"senderID"},value:{kind:"Variable",name:{kind:"Name",value:"senderID"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}},{kind:"Argument",name:{kind:"Name",value:"order"},value:{kind:"EnumValue",value:"DESC"}},{kind:"Argument",name:{kind:"Name",value:"includeMessageCount"},value:{kind:"BooleanValue",value:!1}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"modLogsMessage"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"targetedModAction"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:561}};i.loc.source={body:'#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/targeted-mod-action-fragment.gql"\n#import "twilight/features/chat/components/viewer-card/viewer-card-mod-logs/fragments/mod-logs-message-fragment.gql"\nquery ViewerCardModLogsMessagesBySender($senderID: ID! $channelLogin: String! $cursor: Cursor) {\nchannel: user(login: $channelLogin) {\nid\nmodLogs {\nmessagesBySender(senderID: $senderID first: 50 order: DESC includeMessageCount: false after: $cursor) {\nedges {\nnode {\n...modLogsMessage\n...targetedModAction\n}\ncursor\n}\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("jCkG").definitions)),i.definitions=i.definitions.concat(r(n("MfJU").definitions)),e.exports=i},"35qb":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPriceInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PriceInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTaxInclusive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]}]}}],loc:{start:0,end:118}};n.loc.source={body:"fragment subscriptionProductPriceInfo on PriceInfo {\ncurrency\nexponent\ntotal\ndescription\nprice\nisTaxInclusive\nid\ntax\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3Bft":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={Prime:"prime",Tier1:"1000",Tier2:"2000",Tier3:"3000",Custom:"Custom"}},"3GF+":function(e,t,n){"use strict";var i=n("q1tI"),a=n("hnjF");n("jPLR");function r(e){e.stopPropagation()}var o=function(e){return i.createElement(a.g,{fullWidth:e.fullWidth,display:a.d.InlineBlock,className:e.className},i.createElement("div",{className:"viewer-card-drag-cancel",onMouseDown:r},e.children))};n.d(t,"a",function(){return o})},"3HtZ":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Mods"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mods"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query Mods($login: String!) {\nuser(login: $login) {\nid\nmods(first: 100) {\nedges {\nnode {\nid\nlogin\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3Ps+":function(e,t){},"3YIm":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendWhisper"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendWhisperInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendWhisper"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receive"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:352}};n.loc.source={body:"mutation SendWhisper($input: SendWhisperInput!) {\nsendWhisper(input: $input) {\nmessage {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n__typename\n}\nsentAt\neditedAt\ndeletedAt\nthread {\nid\nparticipants {\nid\nself {\nwhisperPermissions {\nreceive\n}\n}\n}\n}\n__typename\n}\nerror {\ncode\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3ag2":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsLeaderboardEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsLeaderboardItemEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsLeaderboardEdgeNode"},directives:[]}]}}]}}],loc:{start:0,end:177}};i.loc.source={body:'#import "twilight/features/bits/models/bits-leaderboard-node-fragment.gql"\nfragment bitsLeaderboardEdge on BitsLeaderboardItemEdge {\ncursor\nnode {\n...bitsLeaderboardEdgeNode\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("xTLu").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},"3sMn":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("1rIY"),s=(i=Object(o.a)("ChatConfigContext",{hideOnboardingPrompts:!1,hideChatInputButtons:!1,isSettingsOpen:!1,updateChatConfigState:function(e){return null}})).InnerProvider,l=i.withContext,c=function(e){function t(t){var n=e.call(this,t)||this;return n.updateChatConfigState=function(e){null===n.updateFrame&&(n.setState(function(t){return a.__assign({},t,e)}),n.updateFrame=setTimeout(function(){n.updateFrame=null},0))},n.updateFrame=null,n.state={hideOnboardingPrompts:!1,hideChatInputButtons:!1,isSettingsOpen:!1,updateChatConfigState:n.updateChatConfigState},n}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(s,{value:this.state},this.props.children)},t}(r.Component),d=c;n.d(t,!1,function(){return s}),n.d(t,"b",function(){return l}),n.d(t,!1,function(){return c}),n.d(t,"a",function(){return d})},"3tQW":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("yR8l"),d=n("geRD"),u=n("kRBY"),m=n("1rIY"),p=n("F6GT"),h=n("GSWs"),g=n("4+lN"),f="useHighContrastColors",v=(i=Object(m.a)("HighContrastSettingContext",{setValue:function(){return null},value:!0})).InnerProvider,b=i.withContext,k=function(e){function t(t){var n=e.call(this,t)||this;n.setValue=function(e){if(n.setState({localOverride:e}),l.n.set(f,e),n.props.isLoggedIn){var t=a.__assign({},Object(d.a)({isReadableChatColorsEnabled:e}),{optimisticResponse:{setReadableChatColorsEnabled:{__typename:"SetReadableChatColorsEnabledPayload",isReadableChatColorsEnabled:e}},update:function(t){var n;try{n=t.readQuery({query:g})}catch(e){return}n&&n.currentUser&&n.currentUser.chatUISettings&&(n.currentUser.chatUISettings.isReadableChatColorsEnabled=e,t.writeQuery({query:g,data:n}))}});n.props.setReadableChatColors(t)}},n.state={};var i=Object(p.b)().useHighContrastColors;return void 0!==i&&(Object(p.a)("useHighContrastColors"),l.n.set(f,i)),n}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(v,{value:{setValue:this.setValue,value:this.value}},this.props.children)},t.prototype.componentDidUpdate=function(e){this.hasData(this.props)&&!this.hasData(e)&&(this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled?l.n.set(f,this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled):this.setValue(this.value))},t.prototype.hasData=function(e){return e.data&&!e.data.error&&!e.data.loading&&e.data.currentUser&&e.data.currentUser.chatUISettings},Object.defineProperty(t.prototype,"value",{get:function(){return void 0!==this.state.localOverride?this.state.localOverride:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled?this.props.data.currentUser.chatUISettings.isReadableChatColorsEnabled:l.n.get(f,!0)},enumerable:!0,configurable:!0}),t}(r.Component);var C=Object(s.compose)(Object(o.connect)(function(e){return{isLoggedIn:Object(u.f)(e)}}),Object(c.a)(g,{skip:function(e){return!e.isLoggedIn}}),Object(c.a)(h,{name:"setReadableChatColors"}))(k);n.d(t,!1,function(){return v}),n.d(t,"b",function(){return b}),n.d(t,!1,function(){return k}),n.d(t,"a",function(){return C})},"4+Ji":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c});var i=n("/7QA"),a="owl_season2_freetrial_end_date",r="twilight.multiview_owl_ftue_done",o="owl_channel_logins",s=new Date(Date.now()-31536e6).toString();function l(e){return i.b.get(o,[]).includes(e)}function c(){var e=i.b.get(a,s);return new Date(e)}},"4+lN":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SyncedSettingsReadableChatColors"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatUISettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isReadableChatColorsEnabled"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:108}};n.loc.source={body:"query SyncedSettingsReadableChatColors {\ncurrentUser {\nid\nchatUISettings {\nisReadableChatColorsEnabled\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"41XU":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"query ChannelBanner($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nlogin\nbannerImageURL\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"4G6/":function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return v});var i=60,a=60*i,r=24*a,o=7*r,s=4*o+2*r,l=3,c=/([a-zA-Z])([0-9])/gi,d=/([0-9])([a-zA-Z])/gi,u=/^mo(nths?)?/,m=/^w(eeks?)?/,p=/^d(ays?)?/,h=/^h(ours?)?/,g=/^m(inutes?)?/;function f(e){if(!e)return"0s";var t=e,n="";if(t>s){var l=Math.floor(t/s);t-=l*s,n+=l+"mo"}if(t>o){var c=Math.floor(t/o);t-=c*o,n+=c+"w"}if(t>r){var d=Math.floor(t/r);t-=d*r,n+=d+"d"}if(t>a){var u=Math.floor(t/a);t-=u*a,n+=u+"h"}if(t>i){var m=Math.floor(t/i);t-=m*i,n+=m+"m"}return t>0&&(n+=t+"s"),n}function v(e){var t=0,n=e.replace(c,"$1 $2").replace(d,"$1 $2").split(/\W+/);if(n.length%2!=0)return null;for(var f=0;f<n.length;f+=2){var v=n[f],b=parseInt(v,10);if(Number.isNaN(b)||v.length>l)return null;var k=n[f+1];if(k.match(u))t+=b*s;else if(k.match(m))t+=b*o;else if(k.match(p))t+=b*r;else if(k.match(h))t+=b*a;else{if(!k.match(g))return null;t+=b*i}}return t}},"4HoE":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ModUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ModUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:125}};n.loc.source={body:"mutation ModUser($input: ModUserInput!){\nmodUser(input: $input) {\nchannel {\nid\nlogin\n}\ntarget {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"4IKE":function(e,t,n){},"4L7N":function(e,t,n){"use strict";var i=n("/MKj"),a=n("kRBY"),r=n("mrSG"),o=n("q1tI"),s=n("VwyG"),l=n("X7Ac"),c=n("yR8l"),d=n("MLDe"),u=n("v8tf"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.data.clip,n="";if(t&&t.videoQualities){var i=t.videoQualities[0];n=i.sourceURL}var a=this.props,r=a.broadcasterId,c=a.broadcasterLogin,u=a.forceShow;return o.createElement(s.a,{ownerLogin:this.props.broadcasterLogin,permittedRoles:{editor:!0,staff:!0}},function(i){var a=i.permitted;return n&&(a||u)?o.createElement(l.a,{type:l.b.Download,text:e.props.slug,url:n,onShareClick:t?Object(d.b)(t.id,t.game&&t.game.name,r,c,e.props.pageType):void 0}):null})},t}(o.Component),p=Object(c.a)(u)(m);var h=Object(i.connect)(function(e){var t=Object(a.e)(e);return{userLogin:t?t.login:""}})(p);n.d(t,"a",function(){return h})},"4OCo":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("mmRu"),s=n("cpJf"),l=n("Sfdh"),c=n("Tqc9"),d=n("sUnt"),u=n("hnjF"),m=n("Kae6"),p=(n("sbEw"),function(e){function t(t){var n=e.call(this,t)||this;return n.submitReply=function(){if(""!==n.state.newReplyText){if(n.props.isCreationCoolDownActive)return n.setState({showCoolDownState:!0}),void(n.props.onError&&n.props.onError(Object(l.a)().messageCreatedTooQuickError));n.props.onReplySubmit(n.state.newReplyText),n.setState({newReplyText:""})}},n.onChange=function(e){e.preventDefault(),n.setState({newReplyText:e.currentTarget.value})},n.onEmoticonClick=function(e){n.setState({newReplyText:n.state.newReplyText+" "+e})},n.onKeyDown=function(e){e.key===c.b&&(e.preventDefault(),n.submitReply()),n.props.onReplyFormClose&&e.key===c.c&&(e.preventDefault(),n.props.onReplyFormClose())},n.setTextareaRef=function(e){return n.textArea=e},n.state={newReplyText:t.replyToUserDisplayName?"@"+t.replyToUserDisplayName+" ":"",showCoolDownState:!1},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.isCreationCoolDownActive||this.setState({showCoolDownState:!1}),e.replyToUserDisplayName&&e.replyToUserDisplayName!==this.props.replyToUserDisplayName&&this.setState({newReplyText:"@"+e.replyToUserDisplayName+" "})},t.prototype.render=function(){return a.createElement(d.a,{className:this.props.classNames,position:u.j.Relative},a.createElement(m.a,{error:this.state.showCoolDownState,maxLength:512,noResize:!0,onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:Object(r.d)("Reply","ReplyForm"),refDelegate:this.setTextareaRef,value:this.state.newReplyText}),a.createElement(o.a,{attachRight:!0,attachTop:!0,channelOwnerID:this.props.videoOwnerID,emotePickerSource:s.a.VodChat,inputRef:this.textArea,onClickEmote:this.onEmoticonClick,position:u.j.Absolute}))},t}(a.Component))},"4hz/":function(e,t,n){"use strict";var i=n("q1tI"),a=n("PL8s"),r=n("hnjF"),o=n("+80q"),s=n("sUnt"),l=n("AFv4"),c=n("X2PJ"),d=n("uXHW"),u=n("Ws8v"),m=function(){return i.createElement(u.a,{margin:{y:1},background:c.a.Base,elevation:1},i.createElement(d.a,{row:!0},i.createElement(s.a,{flexShrink:0,position:r.j.Relative},i.createElement(s.a,{padding:1,position:r.j.Absolute},i.createElement(a.a,{height:57,width:47})),i.createElement(a.a,{height:180,width:320})),i.createElement(l.a,null,i.createElement(s.a,{margin:{x:2}},i.createElement(r.g,{margin:{bottom:1}},i.createElement(o.a,{type:o.e.H4},i.createElement(a.a,{lineCount:1}))),i.createElement(o.a,{color:c.c.Alt2},i.createElement(a.a,{lineCount:1})),i.createElement(o.a,{color:c.c.Alt2},i.createElement(a.a,{lineCount:1})),i.createElement(s.a,{display:r.d.Flex,margin:{top:2}},i.createElement(s.a,{margin:{right:1}},i.createElement(a.a,{height:28,width:73})),i.createElement(s.a,{margin:{right:1}},i.createElement(a.a,{height:28,width:83})),i.createElement(a.a,{height:28,width:28}))))))};n.d(t,"a",function(){return p});var p=function(){for(var e=[],t=0;t<10;t++)e.push(i.createElement(m,{key:t}));return i.createElement(i.Fragment,null,e)}},"4qQ0":function(e,t,n){"use strict";var i,a;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),function(e){e.BitsViolation="bits_violation",e.ChatBanEvasion="chat_ban_evasion",e.Cheating="cheating",e.Gore="gore",e.Harassment="harassment",e.Harm="harm",e.HatefulConduct="hateful_conduct",e.Impersonation="impersonation",e.Miscategorized="miscategorized",e.OffensiveUsername="offensive_username",e.Other="other",e.Porn="porn",e.Prohibited="prohibited",e.SelfHarm="selfharm",e.SexualContent="sexual_content",e.SexualViolence="sexual_violence",e.Spam="spam",e.TosBanEvasion="tos_ban_evasion",e.Underaged="underaged"}(i||(i={})),function(e){e[e.Unsubmitted=0]="Unsubmitted",e[e.Success=1]="Success",e[e.FormError=2]="FormError",e[e.MutationError=3]="MutationError",e[e.UserError=4]="UserError"}(a||(a={}))},"4w0E":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_BanUserFromChatRoom"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BanUserFromChatRoomInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banUserFromChatRoom"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ban"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minTimeoutDurationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maxTimeoutDurationSeconds"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:289}};n.loc.source={body:"mutation Chat_BanUserFromChatRoom($input: BanUserFromChatRoomInput!) {\nbanUserFromChatRoom(input: $input) {\nban {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\nerror {\ncode\nminTimeoutDurationSeconds\nmaxTimeoutDurationSeconds\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"4zGI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DenyRejectedCheerMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DenyRejectedCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"denyRejectedCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:115}};n.loc.source={body:"mutation Chat_DenyRejectedCheerMessage($input: DenyRejectedCheerInput!) {\ndenyRejectedCheer(input: $input) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"52dQ":function(e,t,n){},"5Ijs":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("oJmH"),o=n("/7QA"),s=n("q1tI"),l=n("eJ65"),c=n("EuPq"),d=n("KYAw"),u=n("+80q"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=Object(d.a)(this.props.collection.id);return s.createElement("div",null,s.createElement(u.a,null,Object(o.d)("Collection Link","VideoShareBox")),s.createElement(c.a,{onClick:function(){e.props.onClick(t)},value:t}))},t}(s.Component),p=n("BQs+"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e){var n={location:t.props.tracking.location,platform:p.a.Link,shareURL:e};Object(p.b)(t.props.collection,n,o.q.apollo.client)},t}return a.__extends(t,e),t.prototype.render=function(){return s.createElement(m,a.__assign({},this.props,{onClick:this.onClickHandler}))},t}(s.Component),g=n("EdhP"),f=n("2xye"),v=n("Addw");function b(e){switch(e.type){case i.Collection:return e.currentVideo||null;case i.Video:return e;default:return e}}!function(e){e[e.Collection=0]="Collection",e[e.Video=1]="Video"}(i||(i={}));var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.content,n=this.getEmbedPlayerContentURL(t);return s.createElement("div",null,s.createElement(u.a,null,Object(o.d)("Embed Video","VideoShareBox")),s.createElement(c.a,{onClick:function(){e.props.onClick(n)},value:this.getEmbedPlayerCode(t)}))},t.prototype.getEmbedPlayerCode=function(e){var t=function(e,t){var n={autoplay:!1};switch(e.type){case i.Collection:e.currentVideo?(n.video=e.currentVideo.id,n.t=t?Object(v.a)(t):void 0):n.collection=e.id;break;case i.Video:n.video=e.id,n.t=t?Object(v.a)(t):void 0}return n}(e,null!==this.props.selectedVideoStartTime?this.props.selectedVideoStartTime:void 0),n=e.owner.displayName,a=e.title,r=Object(o.d)("Watch {title} from {displayName} on www.twitch.tv",{displayName:n,title:a},"VideoShareBox");return Object(g.b)(t,{textLink:{url:this.getEmbedPlayerContentURL(e),text:r},allowScrolling:!1,allowFullscreen:!0})},t.prototype.getEmbedPlayerContentURL=function(e){switch(e.type){case i.Collection:return e.currentVideo?Object(d.b)(e.currentVideo.id,{tt_medium:f.PageviewMedium.VideoEmbed,tt_content:f.PageviewContent.TextLink,t:this.props.selectedVideoStartTime}):Object(d.a)(e.id,{tt_medium:f.PageviewMedium.VideoEmbed,tt_content:f.PageviewContent.TextLink});case i.Video:return Object(d.b)(e.id,{tt_medium:f.PageviewMedium.VideoEmbed,tt_content:f.PageviewContent.TextLink,t:this.props.selectedVideoStartTime});default:return e}},t}(s.Component),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e){var n=t.props.content;switch(n.type){case i.Collection:n.currentVideo?t.trackVideoShare(e,n.currentVideo):t.trackCollectionShare(e,n);break;case i.Video:t.trackVideoShare(e,n);break;default:return n}},t}return a.__extends(t,e),t.prototype.render=function(){return s.createElement(k,a.__assign({},this.props,{onClick:this.onClickHandler}))},t.prototype.trackCollectionShare=function(e,t){var n={location:this.props.tracking.location,platform:p.a.Embed,shareURL:e};Object(p.b)(t,n,o.q.apollo.client)},t.prototype.trackVideoShare=function(e,t){var n={location:this.props.tracking.location,platform:p.a.Embed,shareURL:e};Object(p.c)(t,n,o.q.apollo.client)},t}(s.Component),y=n("X7Ac"),S=n("hnjF"),E=n("sUnt"),N=[{type:y.b.Twitter,selector:"twitter-button"},{type:y.b.Facebook,selector:"fb-button"},{type:y.b.VKontakte,selector:"vk-button"},{type:y.b.Reddit,selector:"reddit-button"},{type:y.b.Copy,selector:"copy-link-button"}],w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.content,n=this.getContentURL(t),i=this.getSocialShareContextTitle(t),a=N.map(function(t){return s.createElement(y.a,{"data-test-selector":t.selector,key:t.type,onShareClick:function(t){e.props.onClick(n,t)},text:i,type:t.type,url:n})});return s.createElement(E.a,{display:S.d.Flex,justifyContent:S.h.Between},a)},t.prototype.getSocialShareContextTitle=function(e){return Object(o.d)("Check out {title} from {displayName} on www.twitch.tv",{displayName:e.owner.displayName,title:e.title},"VideoShareBox")},t.prototype.getContentURL=function(e){switch(e.type){case i.Collection:return e.currentVideo?Object(d.b)(e.currentVideo.id,{collection:e.id,t:this.props.selectedVideoStartTime}):Object(d.a)(e.id);case i.Video:return Object(d.b)(e.id,{t:this.props.selectedVideoStartTime});default:return e}},t}(s.Component),_=function(e){switch(e){case y.b.Twitter:return p.a.Twitter;case y.b.Reddit:return p.a.Reddit;case y.b.VKontakte:return p.a.VKontakte;case y.b.Facebook:return p.a.Facebook;case y.b.Copy:return p.a.Copy;case y.b.CopyInput:return p.a.Link;case y.b.Download:return p.a.Download;default:return e}},D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e,n){var a=t.props.content;switch(a.type){case i.Collection:a.currentVideo?t.trackVideoShare(e,a.currentVideo,n,a.id):t.trackCollectionShare(e,a,n);break;case i.Video:t.trackVideoShare(e,a,n);break;default:return a}},t}return a.__extends(t,e),t.prototype.render=function(){return s.createElement(w,a.__assign({},this.props,{onClick:this.onClickHandler}))},t.prototype.trackCollectionShare=function(e,t,n){var i={location:this.props.tracking.location,platform:_(n),shareURL:e};Object(p.b)(t,i,o.q.apollo.client)},t.prototype.trackVideoShare=function(e,t,n,i){var a={collectionID:i,location:this.props.tracking.location,platform:_(n),shareURL:e};Object(p.c)(t,a,o.q.apollo.client)},t}(s.Component),O=n("hyVY"),I=n("kqSx"),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onShareTimestampClick=function(e){void 0!==t.props.currentVideoTime&&t.props.onVideoStartTimeChange(e.currentTarget.checked?t.props.currentVideoTime:void 0)},t}return a.__extends(t,e),t.prototype.render=function(){var e=this,t={};this.props.collectionID&&(t.collection=this.props.collectionID),this.props.selectedVideoStartTime&&(t.t=this.props.selectedVideoStartTime);var n=Object(d.b)(this.props.video.id,t);return s.createElement("div",null,s.createElement(u.a,null,Object(o.d)("Video Link","VideoShareBox")),s.createElement(c.a,{onClick:function(){e.props.onInputClick(n)},value:n}),this.renderCurrentVideoOffsetLinkOption())},t.prototype.renderCurrentVideoOffsetLinkOption=function(){if(void 0===this.props.currentVideoTime)return null;var e=this.props.selectedVideoStartTime||this.props.currentVideoTime,t=Object(O.b)(e);return s.createElement(E.a,{padding:{top:.5}},s.createElement(I.a,{id:"video-share-timestamp-toggle",label:Object(o.d)("Skip to {deeplinkTimestamp}",{deeplinkTimestamp:t},"VideoShareBox"),"data-a-target":"video-share-timestamp-toggle","data-a-value":void 0!==this.props.selectedVideoStartTime,checked:!!this.props.selectedVideoStartTime,onChange:this.onShareTimestampClick}))},t}(s.Component),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(e,n){var i={collectionID:n,location:t.props.tracking.location,platform:p.a.Link,shareURL:e};Object(p.c)(t.props.video,i,o.q.apollo.client)},t}return a.__extends(t,e),t.prototype.render=function(){return s.createElement(T,a.__assign({},this.props,{onInputClick:this.onClickHandler}))},t}(s.Component),L=n("ygYM"),F=n("dEDE"),x=n("7uM4"),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.toggleTimer=function(e){t.props.getCurrentVideoTime&&!e&&(t.updateCurrentTime(),t.getTimeTimer=setInterval(t.updateCurrentTime,1e3))},t.updateCurrentTime=function(){if(t.props.getCurrentVideoTime){var e=t.props.getCurrentVideoTime();t.setState({currentTime:e})}},t.onVideoStartTimeChangeHandler=function(e){t.setState({selectedVideoStartTime:e})},t}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.currentVideoTime===this.state.currentTime||e.getCurrentVideoTime||this.setState({currentTime:e.currentVideoTime})},t.prototype.componentWillUnmount=function(){this.getTimeTimer&&clearTimeout(this.getTimeTimer)},t.prototype.render=function(){var e=null;return this.props.content&&(e=this.shareBalloonContent(this.props.content)),s.createElement(l.a,{onToggle:this.toggleTimer},s.createElement(F.a,{disabled:!this.props.content,icon:x.b.Share,type:this.props.buttonType},Object(o.d)("Share","VideoShareBox")),s.createElement(L.a,{direction:this.props.balloonDirection,size:L.c.Small},e))},t.prototype.shareBalloonContent=function(e){return s.createElement(E.a,{padding:1},s.createElement(D,{content:e,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking}),this.renderCollectionShareInput(e),this.renderVideoShareInput(e),this.renderEmbedPlayerInput(e))},t.prototype.renderCollectionShareInput=function(e){return e.type!==i.Collection?null:s.createElement(E.a,{padding:{top:1}},s.createElement(h,{collection:e,tracking:this.props.tracking}))},t.prototype.renderVideoShareInput=function(e){var t,n;if(e.type===i.Collection){if(!e.currentVideo)return null;n=e.id,t=e.currentVideo}else t=e;return s.createElement(E.a,{padding:{top:1}},s.createElement(M,{collectionID:n,currentVideoTime:this.state.currentTime,onVideoStartTimeChange:this.onVideoStartTimeChangeHandler,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking,video:t}))},t.prototype.renderEmbedPlayerInput=function(e){return s.createElement(E.a,{padding:{top:1}},s.createElement(C,{content:e,selectedVideoStartTime:this.state.selectedVideoStartTime,tracking:this.props.tracking}))},t}(s.Component),A=n("gFHd");function P(e){return e.owner&&e.title?{type:i.Video,id:e.id,owner:{id:e.owner.id,displayName:e.owner.displayName},title:e.title}:null}var R=Object(r.compose)(Object(r.graphql)(A,{options:function(e){var t=e.content;return t?{variables:{collectionID:t.collectionID||"",hasCollection:!!t.collectionID,hasVideo:!!t.videoID,videoID:t.videoID||""}}:{variables:{collectionID:"",hasCollection:!1,hasVideo:!1,videoID:""}}},props:function(e){var t=a.__assign({},e,{content:void 0}),n=e.data;return n.loading?t:n.error?(o.k.error(n.error,"VideoShareBoxContainer"),t):(n.collection?t.content=function(e,t){var n;if(t){var a=P(t);if(!a)return null;n=a}return e.owner&&e.title?{type:i.Collection,id:e.id,owner:{id:e.owner.id,displayName:e.owner.displayName},title:e.title,currentVideo:n}:null}(n.collection,n.video)||void 0:n.video&&(t.content=P(n.video)||void 0),t)}}))(j);n.d(t,"a",function(){return R}),n.d(t,!1,function(){return i}),n.d(t,!1,function(){return b})},"5NSO":function(e,t,n){},"5Siz":function(e,t,n){"use strict";var i;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),function(e){e.PopoutChat="popout_chat",e.Chat="chat",e.LiveDashButton="live_dashboard_button",e.LiveDashHotkey="live_dashboard_hotkey",e.LiveDashChat="live_dashboard_chat"}(i||(i={}));var a=140},"5goO":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("SHn+"),s=n("vCsY"),l=function(e){return a.createElement(o.a,i.__assign({linkTo:"/team/"+e.name,title:e.displayName,label:Object(r.d)("Team:","TeamLinkLabel")},Object(s.a)(e)))};n.d(t,"a",function(){return l})},"5in9":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_ChannelInfoBar"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primaryTeam"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"profileViewCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:133}};n.loc.source={body:"query ChannelRoot_ChannelInfoBar($login: String!) {\nuser(login: $login) {\nid\nprimaryTeam {\nid\ndisplayName\nname\n}\nprofileViewCount\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"5xw2":function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var i=n("mrSG"),a=n("/7QA"),r=n("HSqT"),o=n("+U0Y"),s="languageDirectoryFilters";function l(e,t){var n=this;return function(r){return i.__awaiter(n,void 0,void 0,function(){var n,l;return i.__generator(this,function(i){return n=new Set(d()),t?n.add(e):n.delete(e),l=Array.from(n),a.n.set(s,l),r(Object(o.b)(l)),[2]})})}}function c(){var e=this;return function(t){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){return a.n.set(s,[]),t(Object(o.b)([])),[2]})})}}function d(){return a.n.get(s,[]).filter(function(e){return r.a.has(e)})}},"5zf8":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l});var i,a,r=n("/7QA");function o(e,t){switch(e){case i.Second:return Object(r.d)("{secondCount, plural, one {# second} other {# seconds}}",{secondCount:t},"formatDuration");case i.Minute:return Object(r.d)("{minuteCount, plural, one {# minute} other {# minutes}}",{minuteCount:t},"formatDuration");case i.Hour:return Object(r.d)("{hourCount, plural, one {# hour} other {# hours}}",{hourCount:t},"formatDuration");case i.Day:return Object(r.d)("{dayCount, plural, one {# day} other {# days}}",{dayCount:t},"formatDuration");case i.Week:return Object(r.d)("{weekCount, plural, one {# week} other {# weeks}}",{weekCount:t},"formatDuration");case i.Month:return Object(r.d)("{monthCount, plural, one {# month} other {# months}}",{monthCount:t},"formatDuration");default:return""}}function s(e,t){switch(e){case i.Second:return Object(r.d)("{secondCount}s",{secondCount:t},"formatDuration");case i.Minute:return Object(r.d)("{minuteCount}m",{minuteCount:t},"formatDuration");case i.Hour:return Object(r.d)("{hourCount}h",{hourCount:t},"formatDuration");case i.Day:return Object(r.d)("{dayCount}d",{dayCount:t},"formatDuration");case i.Week:return Object(r.d)("{weekCount}w",{weekCount:t},"formatDuration");case i.Month:return Object(r.d)("{monthCount}mo",{monthCount:t},"formatDuration");default:return""}}function l(e,t){var n;switch(void 0===t&&(t=a.Humanized),t===a.ClockAuto&&(t=e>=3600?a.ClockHMS:a.ClockMS),t){case a.ClockHM:case a.ClockHMS:n=i.Hour;break;case a.ClockMS:n=i.Minute}var l=2;t===a.ClockHMS&&(l=3);var d=function(e,t){void 0===t&&(t=i.Month);var n={};return n.seconds=e,e<60||t===i.Second?n:(n.minutes=Math.floor(e/60),n.seconds=e%60,n.minutes<60||t===i.Minute?n:(n.hours=Math.floor(n.minutes/60),n.minutes=n.minutes%60,n.hours<24||t===i.Hour?n:(n.days=Math.floor(n.hours/24),n.hours=n.hours%24,n.days<7||t===i.Day?n:n.days<=26||t===i.Week?(n.weeks=Math.floor(n.days/7),n.days=n.days%7,n):(n.months=Math.round((n.days+3)/30),n))))}(e,n),u=Object.keys(d);if(u.forEach(function(e,n){t!==a.Humanized&&t!==a.HumanizedShort||d[e]||delete d[e],n<u.length-l&&delete d[e]}),t===a.Humanized)return function(e){return e.months?o(i.Month,e.months):e.weeks&&e.days?o(i.Week,e.weeks)+" "+o(i.Day,e.days):e.weeks?o(i.Week,e.weeks):e.days&&e.hours?o(i.Day,e.days)+" "+o(i.Hour,e.hours):e.days?o(i.Day,e.days):e.hours&&e.minutes?o(i.Hour,e.hours)+" "+o(i.Minute,e.minutes):e.hours?o(i.Hour,e.hours):e.minutes&&e.seconds?o(i.Minute,e.minutes)+" "+o(i.Second,e.seconds):e.minutes?o(i.Minute,e.minutes):o(i.Second,e.seconds||0)}(d);if(t===a.HumanizedShort)return function(e){return e.months?s(i.Month,e.months):e.weeks&&e.days?""+s(i.Week,e.weeks)+s(i.Day,e.days):e.weeks?s(i.Week,e.weeks):e.days&&e.hours?""+s(i.Day,e.days)+s(i.Hour,e.hours):e.days?s(i.Day,e.days):e.hours&&e.minutes?""+s(i.Hour,e.hours)+s(i.Minute,e.minutes):e.hours?s(i.Hour,e.hours):e.minutes&&e.seconds?""+s(i.Minute,e.minutes)+s(i.Second,e.seconds):e.minutes?s(i.Minute,e.minutes):s(i.Second,e.seconds||0)}(d);var m=":",p=!1;switch(r.q.intl.getLanguageCode()){case"cy":case"da":case"fi":case"id":case"nb":case"si":m=".";break;case"af":case"fr":case"lt":p=!0}var h=d.seconds||0,g=d.minutes||0,f=d.hours||0;switch(t){case a.ClockHM:case a.ClockHMS:var v=(p?c(f,2):f)+m+c(g,2);return t===a.ClockHMS&&(v+=m+c(h,2)),v;case a.ClockMS:return(p?c(g,2):g)+m+c(h,2)}}function c(e,t){var n=e.toString();return n.length<t?"0".repeat(t-n.length)+n:n}!function(e){e[e.Second=0]="Second",e[e.Minute=1]="Minute",e[e.Hour=2]="Hour",e[e.Day=3]="Day",e[e.Week=4]="Week",e[e.Month=5]="Month"}(i||(i={})),function(e){e[e.Humanized=0]="Humanized",e[e.HumanizedShort=1]="HumanizedShort",e[e.ClockAuto=2]="ClockAuto",e[e.ClockHM=3]="ClockHM",e[e.ClockMS=4]="ClockMS",e[e.ClockHMS=5]="ClockHMS"}(a||(a={}))},"60o1":function(e,t,n){"use strict";function i(e,t){var n=e,i=!1;return n?n.split("").map(function(e){return e.charCodeAt(0)>127}).reduce(function(e,t){return e||t})&&(i=!0):n=t,{userDisplayName:n,isIntl:i}}n.d(t,"a",function(){return i})},"68Fl":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("wUQP"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return Object(r.a)(this.props.name)?this.props.children:null},t}(a.Component);n.d(t,"a",function(){return o})},"6MRn":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsPinnedCheerV2_LeaderboardEntry"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"profileImageWidth"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"Variable",name:{kind:"Name",value:"profileImageWidth"}}}],directives:[]}]}}]}}],loc:{start:0,end:168}};n.loc.source={body:"query BitsPinnedCheerV2_LeaderboardEntry($userID: ID! $profileImageWidth: Int!) {\nuser(id: $userID) {\nid\ndisplayName\nlogin\nprofileImageURL(width:$profileImageWidth)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"6ZXE":function(e,t,n){},"6j5V":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("RcPG");function a(e){return{type:i.a.Text,content:e}}},"6wGa":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("esZd"),c=n("xQnr"),d=n("geRD"),u=n("DMoW"),m=n("kRBY"),p=n("TApp"),h=n("yR8l"),g=n("gO1k");var f=n("2EzP");var v=n("vLL+"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banUser=function(){return t.props.banUser()},t.timeoutUser=function(){return t.props.timeoutUser()},t.unbanUser=function(){return t.props.unbanUser()},t.deleteMessage=function(){return i.__awaiter(t,void 0,void 0,function(){var e,t,n,a,r;return i.__generator(this,function(i){switch(i.label){case 0:if(this.props.confirmModerationAction&&!this.props.confirmModerationAction())return[3,4];if(e=Object(s.d)("Unable to delete message.","ModerationIcons"),!this.props.channelID)return this.surfaceError(e),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),t={channelID:this.props.channelID,messageID:this.props.messageID},[4,this.props.deleteChatMessageMutation(Object(d.a)(t))];case 2:return(n=i.sent().data.deleteChatMessage)&&n.responseCode!==u.L.SUCCESS&&(a=n.message&&n.message.sender&&n.message.sender.displayName||this.props.senderLogin,r=function(e,t){switch(e){case u.L.FORBIDDEN:return Object(s.d)("You don't have permission to delete messages.","DeleteChatMessageErrorCode");case u.L.TARGET_IS_BROADCASTER:return Object(s.d)("You cannot delete the broadcaster's messages.","DeleteChatMessageErrorCode");case u.L.TARGET_IS_MODERATOR:return Object(s.d)("You cannot delete messages from moderator {senderDisplayName}",{senderDisplayName:t},"DeleteChatMessageErrorCode");case u.L.SUCCESS_STAFF:return Object(s.d)("You deleted a message from staff {senderDisplayName}. Please email support@twitch.tv if a staff member is being abusive.",{senderDisplayName:t},"DeleteChatMessageErrorCode");default:throw new Error("Unrecognized operation result")}}(n.responseCode,a),this.surfaceError(r)),[3,4];case 3:return i.sent(),this.surfaceError(e),[3,4];case 4:return[2]}})})},t.surfaceError=function(e){t.props.surfaceError&&t.props.surfaceError(e)},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.sessionUser&&this.props.sessionUser.id===this.props.targetUserID?null:a.createElement(v.a,{isMessageDeleted:this.props.isMessageDeleted,isMessageBanned:this.props.isMessageBanned,canDelete:!!this.props.messageID,onBanUser:this.banUser,onTimeoutUser:this.timeoutUser,onUnbanUser:this.unbanUser,onDelete:this.deleteMessage,senderLogin:this.props.senderLogin,renderNewVersion:this.props.renderNewVersion})},t}(a.Component);var k=Object(o.compose)(f.a,Object(l.a)(function(e){return i.__assign({},e,{targetID:e.targetUserID,surfaceError:function(t){e.messageHandlerAPI&&e.messageHandlerAPI.handleMessage(Object(p.a)(t))}})}),c.a,function(){var e=this;return Object(h.a)(g,{props:function(t){return{deleteChatMessageMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:if(!t.mutate)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.mutate(n)];case 2:return[2,{data:e.sent().data}];case 3:throw e.sent(),new Error("Unable to delete message");case 4:return[3,6];case 5:throw new Error("Delete chat message mutation is not ready");case 6:return[2]}})})}}}})}(),Object(r.connect)(function(e){return{sessionUser:Object(m.e)(e)}}))(b);n.d(t,!1,function(){return b}),n.d(t,"a",function(){return k})},"7JxC":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("q1tI"),a=n("sUnt"),r=n("PL8s"),o=n("uOxs"),s=function(){for(var e=[],t=0;t<9;t++){var n=i.createElement(a.a,{padding:{bottom:2},key:t},i.createElement(r.a,{height:320,width:320}));e.push(n)}return i.createElement(o.a,{center:!0,noGrow:!0,childWidth:o.b.Large,gutterSize:o.c.Small,placeholderItems:9},e)}},"7NxT":function(e,t,n){"use strict";n("DLhE")},"7SjK":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("TSYQ"),o=n("/7QA"),s=n("GnwI"),l=n("hnjF"),c=n("X2PJ"),d=n("7uM4"),u=n("Ws8v"),m=n("b7S+"),p=(n("GOKC"),a.createElement(u.a,{alignItems:l.b.Center,background:c.a.Overlay,borderRadius:c.b.Small,className:"emote-button__lock",color:c.c.Overlay,"data-test-selector":"emote-button-lock",display:l.d.InlineFlex,justifyContent:l.h.Center,position:l.j.Absolute,zIndex:l.n.Above},a.createElement(d.a,{asset:d.b.Lock,height:10,width:10}))),h=function(e){var t=r("emote-button__link",{"emote-button__link--locked":!e.onClick}),n=e.emote,i=n.displayName,c=n.srcSet;if(!c)return null;var d=a.createElement("img",{className:"emote-picker__image",srcSet:c,alt:i});if(e.isCriticalImage){for(var u=c.split(" ")[0],h={},g=0,f=c.split(",");g<f.length;g++){var v=f[g].trim().split(" "),b=v[1],k=v[0];h[b]=k}d=a.createElement(s.CriticalImage,{className:"emote-picker__emote-image",src:u,srcSet:h,alt:i||""})}return a.createElement("div",{className:"emote-button"},a.createElement(m.a,{label:i||Object(o.d)("Emote","EmoteButton"),direction:m.c.Bottom},a.createElement(l.g,{display:l.d.Flex,alignItems:l.b.Center,justifyContent:l.h.Center},a.createElement("button",{"data-test-selector":"emote-button-clickable",className:t,"aria-label":i,name:i,onClick:e.onClick?e.onClick.bind(null,e.emote):void 0,"data-a-target":i},a.createElement("figure",null,e.locked?p:null,d)))))},g=n("sUnt"),f=(n("VrOd"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickEmote=function(e){t.props.onClickEmote&&t.props.onClickEmote(e,t.props.context)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.emotes.map(function(t,n){return a.createElement(g.a,{key:"emote-button-padder-"+t.id+"--"+n,padding:{left:e.props.spaced?.5:0}},a.createElement(h,{key:"emote-button-"+t.id+"--"+n,emote:t,isCriticalImage:0===n,locked:e.props.locked||t.isLocked,onClick:e.props.locked?void 0:e.handleClickEmote}))});return a.createElement(g.a,{display:l.d.Flex,flexWrap:l.f.Wrap,justifyContent:l.h.Center},t)},t}(a.PureComponent));n.d(t,"a",function(){return f})},"7TkE":function(e,t,n){e.exports=n.p+"assets/gift-open-ba127d9c110a18648ca1.png"},"80G/":function(e,t,n){},"82xK":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("q1tI"),a=n("/7QA"),r=n("dEDE"),o=function(e){return i.createElement(r.a,{type:r.d.Text,onClick:e.onClick},Object(a.d)("Show more replies...","chomments.moderation.showMoreRepliesAction"))}},"86FS":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("H1ft"),o=n("yR8l"),s=function(e){return e.map(function(e){return l(e.node)})},l=function(e){return{gameID:e.details&&!!e.details.game&&e.details.game&&e.details.game.id||"Unknown",duration:e.durationMilliseconds/1e3,label:e.description||"",offset:e.positionMilliseconds/1e3,thumbnailUrl:c(e),videoID:e.video&&e.video.id||""}},c=function(e){return e.details&&d(e.details)&&e.details.game&&e.details.game.boxArtURL?e.details.game.boxArtURL:e.thumbnailURL?e.thumbnailURL:"https://static-cdn.jtvnw.net/ttv-static/404_boxart-285x380.jpg"},d=function(e){return!!e.game},u=n("cr+I"),m=n("/7QA"),p=n("GFmA"),h=n("0INk"),g=n("N0BP"),f=n("yWUM"),v=n("kduP"),b=n("vRsq"),k=n("2xye"),C=n("GnwI"),y=n("efpB"),S=n("4HIT"),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickHandler=function(){t.props.onClick&&t.props.onClick(t.props.tracking.content_index)},t.gameChangesWithLinks=function(){return t.props.videoGameChanges.map(function(e){var n={t:Object(f.a)(e.offset)};return t.props.collectionID&&(n.collection=t.props.collectionID),i.__assign({},e,{linkTo:{pathname:"/videos/"+t.props.video.id,search:u.stringify(n),state:{content:k.PageviewContent.PreviewCardGameBalloonGame,medium:t.props.tracking.medium}}})})},t.trackVideoGameBalloonClick=function(){t.props.video.owner&&t.props.video.owner.id&&t.props.video.owner.login&&Object(h.b)({videoID:t.props.video.id,broadcasterID:t.props.video.owner.id,channelLogin:t.props.video.owner.login,contentIndex:t.props.tracking.content_index,pageviewMedium:t.props.tracking.medium})},t.trackVideoGameBalloonItemClick=function(e){t.props.video.owner&&t.props.video.owner.id&&t.props.video.owner.login&&Object(h.c)({videoID:t.props.video.id,broadcasterID:t.props.video.owner.id,channelLogin:t.props.video.owner.login,contentIndex:e,pageviewMedium:t.props.tracking.medium})},t}return i.__extends(t,e),t.prototype.render=function(){var e={context:this.props.context,onClick:this.onClickHandler,title:this.props.video.title,linkTo:{pathname:Object(b.j)(void 0,this.props.video.id),state:this.getLinkState(),search:this.generateSearchString()},thumbnailImageProps:{src:this.props.video.previewThumbnailURL,alt:this.props.video.title||""},channelDisplayName:this.props.video.owner&&this.props.video.owner.displayName||"",channelLogin:this.props.video.owner&&this.props.video.owner.login||"",channelLinkTo:{pathname:"/"+(this.props.video.owner?this.props.video.owner.login:""),state:this.getLinkState()},channelImageProps:{src:this.props.video.owner&&this.props.video.owner.profileImageURL||"",alt:this.props.video.owner&&this.props.video.owner.displayName||""},gameTitle:this.props.video.game&&this.props.video.game.name||"",gameTitleLinkTo:{pathname:Object(v.b)(this.props.video.game&&this.props.video.game.name||""),state:this.getLinkState()},gameBoxArtImageProps:{src:this.props.video.game&&this.props.video.game.boxArtURL||m.a.defaultBoxArtURL,alt:this.props.video.game?this.props.video.game.displayName:""},videoGameChanges:this.gameChangesWithLinks(),multipleVideoGameMarkersType:this.props.multipleVideoGameMarkersType,datePublished:this.props.video.publishedAt,viewCount:this.props.video.viewCount||0,durationInSeconds:!this.props.hideDuration&&this.props.video.lengthSeconds?this.props.video.lengthSeconds:void 0,animatedImageProps:this.props.video.animatedPreviewURL?{src:this.props.video.animatedPreviewURL,alt:""}:void 0,watchedProgressPercent:this.getVideoPreviousWatchPercentage()||0,listPosition:this.props.listPosition,topBar:this.props.topBar,restriction:this.getRestrictionProps(),trackImageLatency:this.props.trackImageLatency,onVideoGameBalloonClick:this.trackVideoGameBalloonClick,onVideoGameBalloonItemClick:this.trackVideoGameBalloonItemClick,trackingContext:this.getLinkState(),tagListProps:!0!==this.props.hideTags&&this.props.video.contentTags?{tags:this.props.video.contentTags,linkTo:S.a.PopularTag}:void 0};return a.createElement(p.a,i.__assign({},e,Object(g.a)(this.props)))},t.prototype.generateSearchString=function(){var e={};this.props.collectionID&&(e.collection=this.props.collectionID),this.props.videoBrowseOptions&&(this.props.videoBrowseOptions.filter&&(e.filter=this.props.videoBrowseOptions.filter),this.props.videoBrowseOptions.sort&&(e.sort=this.props.videoBrowseOptions.sort),this.props.videoBrowseOptions.range&&(e.range=this.props.videoBrowseOptions.range));var t=u.stringify(e);return t?"?"+t:""},t.prototype.getVideoPreviousWatchPercentage=function(){return this.props.video&&this.props.video.self&&this.props.video.self.viewingHistory&&null!==this.props.video.self.viewingHistory.position?0===this.props.video.lengthSeconds||0===this.props.video.self.viewingHistory.position?null:this.props.video.self.viewingHistory.position/(this.props.video.lengthSeconds||1/0)*100:null},t.prototype.getRestrictionProps=function(){var e=this.props.video.restriction&&this.props.video.restriction.productName?"/products/"+this.props.video.restriction.productName:"";return{productName:this.props.video.restriction&&this.props.video.restriction.productName,title:this.props.video.restriction&&this.props.video.restriction.productTitle,canViewRestricted:this.props.video.self&&!this.props.video.self.isRestricted||!1,upsellLinkTo:{pathname:e,state:this.getLinkState()}}},t.prototype.getLinkState=function(){var e=Object(y.a)();return i.__assign({content:this.props.tracking.content,content_index:this.props.tracking.content_index,medium:this.props.tracking.medium},e&&{medium:e.medium,search_session_id:e.search_session_id})},t}(a.Component),N=Object(C.withLatencyTracking)("VideoPreviewCard",{autoReportInteractive:!0})(E),w=n("1Ijn");n.d(t,"a",function(){return D});var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.convertMomentEdgesToChanges=function(){var e=s(t.props.data&&t.props.data.video&&t.props.data.video.moments&&t.props.data.video.moments.edges||[]);return e.length>1?e:[]},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(N,i.__assign({videoGameChanges:this.convertMomentEdgesToChanges()},this.props))},t}(a.Component),D=Object(o.a)(w,{options:function(e){return{variables:{videoId:e.video.id}}},skip:function(e){return!(e.multipleVideoGameMarkersType&&e.multipleVideoGameMarkersType!==r.a.None&&e.video.id)}})(_)},"8BsE":function(e,t,n){},"8EUQ":function(e,t,n){"use strict";var i={};n.d(i,"SUB_CHECKOUT__PRODUCT_KEY",function(){return o}),n.d(i,"SUB_CHECKOUT__RECIPIENT_KEY",function(){return s}),n.d(i,"SUB_CHECKOUT__MYSTERY_GIFT_COUNT",function(){return l}),n.d(i,"SUB_CHECKOUT__GIFTING_ANONYMOUSLY",function(){return c}),n.d(i,"SUB_CHECKOUT__IS_ONE_TIME_PURCHASE",function(){return d}),n.d(i,"clearSubscriptionCheckoutKeys",function(){return m}),n.d(i,"showLoginModalWithCheckoutDispatch",function(){return p});var a=n("/7QA"),r=n("y5D0"),o="SUB_CHECKOUT__PRODUCT",s="SUB_CHECKOUT__RECIPIENT",l="SUB_CHECKOUT__MYSTERY_GIFT_COUNT",c="SUB_CHECKOUT__GIFTING_ANONYMOUSLY",d="SUB_CHECKOUT__IS_ONE_TIME_PURCHASE",u=[o,s,l,c,d];function m(){u.forEach(function(e){return a.o.remove(e)})}function p(e){return function(){return Object(r.e)(e,{onClose:m})}}n.d(t,"a",function(){return i})},"8SX2":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("8Ad5"),o=n("fezU"),s=n("+80q"),l=n("X2PJ"),c=(n("rVcM"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==r.a.Space&&e.keyCode!==r.a.Enter||t.props.onUsernameClick(t.props.login,t.props.sourceType,t.props.contentID,e.currentTarget.getBoundingClientRect().bottom)},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement("span",{className:"chatter-name",onClick:this.openViewerCard,onKeyDown:this.openViewerCard,role:"button",tabIndex:0},a.createElement(s.a,{bold:!0,color:l.c.Base,type:s.e.Span},this.props.children))},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(a.Component));var d=Object(o.b)(function(e){return{onUsernameClick:e.onShowViewerCard}})(c);n.d(t,!1,function(){return c}),n.d(t,"a",function(){return d})},"8gBY":function(e,t,n){},"8in3":function(e,t,n){"use strict";var i=n("fezU"),a=n("mrSG"),r=n("TSYQ"),o=n("q1tI"),s=n("ZS2+"),l=n("uy8m"),c=n("4rCz"),d=n("1MDS"),u=n("0Hf3"),m=n("o8Ti"),p=n("3GF+"),h=n("oK83"),g=n("7d/q"),f=n("Ws8v"),v=n("sUnt"),b=n("hnjF"),k=n("7uM4"),C=n("b7S+"),y=n("X2PJ"),S=n("XQbB"),E=(n("2D+f"),function(e){function t(t){var i=e.call(this,t)||this;return i.ViewerCard=s.a.wrap(function(){return n.e(213).then(n.bind(null,"q3Qz"))},"ViewerCard",{placeholder:o.createElement(f.a,{background:y.a.Base,fullHeight:!0,fullWidth:!0,padding:2},o.createElement(S.a,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.ExtensionMessageCard=s.a.wrap(function(){return n.e(212).then(n.bind(null,"n3tJ"))},"ExtensionMessageCard",{placeholder:o.createElement(f.a,{background:y.a.Base,fullHeight:!0,fullWidth:!0,padding:2},o.createElement(S.a,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.EmoteCard=s.a.wrap(function(){return n.e(211).then(n.bind(null,"unmP"))},"EmoteCard",{placeholder:o.createElement(f.a,{fullHeight:!0,fullWidth:!0,padding:2},o.createElement(S.a,{fillContent:!0})),onRendered:function(){return i.setState({viewerCardComponentLoaded:!0})}}),i.onDragStart=function(e){i.cardContainerRef&&i.layerRef&&e.button===l.a.Left&&(window.addEventListener("mousemove",i.onDrag),window.addEventListener("mouseup",i.onDragEnd),window.addEventListener("selectstart",i.cancelSelection),i.setState({dragging:!0}),i.initCardX=i.cardContainerRef.offsetLeft,i.initCardY=i.cardContainerRef.offsetTop,i.initMouseX=e.clientX,i.initMouseY=e.clientY)},i.onDrag=function(e){i.nextTop=i.initCardY+e.clientY-i.initMouseY,i.nextLeft=i.initCardX+e.clientX-i.initMouseX,i.rafHandle||(i.rafHandle=requestAnimationFrame(function(){i.rafHandle=0,i.cardContainerRef&&(i.cardContainerRef.style.top=i.nextTop+"px",i.cardContainerRef.style.left=i.nextLeft+"px")}))},i.openPopout=function(){if(i.props.viewerCardOptions){var e=i.props.viewerCardOptions.targetID,t=window.open("/popout/"+i.props.channelLogin+"/viewercard/"+e+"?popout=","_blank","right=50,top=50,width=340,height=520,resizable=no,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");Object(u.c)({targetLogin:e,targetUserID:null,channelID:i.props.channelID,channelLogin:i.props.channelLogin,clickText:u.b.PopOut}),t&&(t.focus(),i.props.hideViewerCard())}},i.onDragEnd=function(){i.removeDragListeners(),i.setState({dragging:!1})},i.removeDragListeners=function(){window.removeEventListener("mousemove",i.onDrag),window.removeEventListener("mouseup",i.onDragEnd),window.removeEventListener("selectstart",i.cancelSelection)},i.cancelSelection=function(e){e.preventDefault()},i.hideEmoteCard=function(){i.props.viewerCardOptions&&i.props.viewerCardOptions.viewerCardType===h.c.Emote&&Object(d.c)({emoteLocation:Object(d.b)(i.props.viewerCardOptions.emoteSourceType),emoticonID:i.props.viewerCardOptions.emoteID,chatChannel:i.props.channelLogin,chatChannelID:i.props.channelID?i.props.channelID:"",referrerUserID:i.props.viewerCardOptions.targetID,action:d.a.Close,msgID:i.props.viewerCardOptions.sourceID}),i.props.hideViewerCard()},i.state={dragging:!1,viewerCardComponentLoaded:!1,modLogsEnabled:!1},i}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){this.props.hideViewerCard(),this.rafHandle&&cancelAnimationFrame(this.rafHandle),this.removeDragListeners()},t.prototype.componentWillReceiveProps=function(e){this.setState({modLogsEnabled:Object(m.a)(e.channelID)}),this.props.viewerCardOptions&&e.viewerCardOptions&&(e.viewerCardOptions.targetID===this.props.viewerCardOptions.targetID&&e.viewerCardOptions.initialTopOffset===this.props.viewerCardOptions.initialTopOffset||this.cardContainerRef&&(this.cardContainerRef.style.left="0px"))},t.prototype.render=function(){var e=this,t={"viewer-card-layer":!0,"viewer-card-layer--dragging":this.state.dragging},n={"viewer-card-layer__draggable":!0,"viewer-card-layer__draggable--dragging":this.state.dragging},i=null,a={};if(this.props.viewerCardOptions){if(this.layerRef){var s=this.layerRef.getBoundingClientRect(),l=Math.min(this.props.viewerCardOptions.initialTopOffset-s.top,s.height-240);a={top:Math.max(l,0)+"px"}}switch(this.props.viewerCardOptions.viewerCardType){case h.c.Extension:i=o.createElement(this.ExtensionMessageCard,{channelID:this.props.channelID,extensionID:this.props.viewerCardOptions.targetID,extensionVersion:this.props.viewerCardOptions.extensionVersion,hideMessageCard:this.props.hideViewerCard});break;case h.c.Viewer:i=o.createElement(this.ViewerCard,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,targetLogin:this.props.viewerCardOptions.targetID,sourceType:this.props.viewerCardOptions.sourceType,sourceID:this.props.viewerCardOptions.sourceID,confirmModerationAction:this.props.confirmModerationAction,hideViewerCard:this.props.hideViewerCard});break;case h.c.Emote:i=o.createElement(this.EmoteCard,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,referrerID:this.props.viewerCardOptions.targetID,sourceType:this.props.viewerCardOptions.emoteSourceType,sourceID:this.props.viewerCardOptions.sourceID,emoteID:this.props.viewerCardOptions.emoteID,emoteCode:this.props.viewerCardOptions.emoteCode,hideViewerCard:this.hideEmoteCard});break;default:i=null}}var d=null;if(i){var u=Object(c.d)("Hide","ViewerCard"),m=o.createElement(g.a,{icon:k.b.Close,onClick:this.props.hideViewerCard,ariaLabel:u,overlay:this.state.viewerCardComponentLoaded,"data-test-selector":"close-viewer-card"}),f=this.state.modLogsEnabled&&(this.props.isModerator||this.props.isOwner),S=Object(c.d)("Popout","ViewerCard"),E=f?o.createElement(C.a,{label:Object(c.d)("Open in popout","ViewerCard"),"data-test-selector":"popout-viewer-card"},o.createElement(g.a,{icon:k.b.Popout,onClick:this.openPopout,ariaLabel:S,overlay:this.state.viewerCardComponentLoaded})):null;d=o.createElement(y.e,{background:y.a.Base,className:r(n),position:b.j.Absolute},o.createElement("div",{onMouseDown:this.onDragStart,ref:function(t){e.cardContainerRef=t},style:a,"data-a-target":"viewer-card-positioner"},i,o.createElement(v.a,{position:b.j.Absolute,attachRight:!0,attachTop:!0,margin:{top:.5,right:.5},"data-a-target":"viewer-card-close-button"},o.createElement(p.a,null,E,m)))),this.props.viewerCardOptions.viewerCardType===h.c.Emote&&(m=o.createElement(g.a,{icon:k.b.Close,onClick:this.hideEmoteCard,ariaLabel:u,overlay:this.state.viewerCardComponentLoaded,type:g.c.Secondary,"data-test-selector":"close-viewer-card"}),d=o.createElement(y.e,{className:r(n),position:b.j.Absolute,borderRadius:y.b.Large},o.createElement("div",{onMouseDown:this.onDragStart,ref:function(t){e.cardContainerRef=t},style:a,"data-a-target":"viewer-card-positioner"},i,o.createElement(v.a,{position:b.j.Absolute,attachRight:!0,attachTop:!0,margin:{top:.5,right:.5},"data-a-target":"viewer-card-close-button"},o.createElement(p.a,null,m)))))}return o.createElement(b.g,{className:r(t),fullHeight:!0,fullWidth:!0,position:b.j.Relative,zIndex:b.n.Above},o.createElement("div",{onMouseUp:this.onDragEnd,ref:function(t){e.layerRef=t}},d))},t}(o.Component));var N=Object(i.b)(function(e){return{viewerCardOptions:e.viewerCardOptions,hideViewerCard:e.hideViewerCard}})(E);n.d(t,"a",function(){return N})},"8jSG":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"blockedUsers"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:56}};n.loc.source={body:"fragment blockedUsers on User {\nid\nblockedUsers {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"8qOS":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("/7QA"),s=n("yR8l"),l=n("geRD"),c=n("2Ygb"),d=n("4G6/"),u=n("AREq"),m=n("Av0x"),p=n("4w0E"),h=n("1Rv/"),g=n("HzXE"),f=600;function v(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.banUser=function(t,n){var i=t?Object(o.d)("Unable to timeout user.","ViewerCardModActions"):Object(o.d)("Unable to ban user.","ViewerCardModActions");if(e.props.confirmModerationAction&&!e.props.confirmModerationAction())return e.surfaceError(i),Promise.reject(i);var a=e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login;if(!a)return e.surfaceError(i),Promise.reject(i);var r=null;"number"==typeof t?r=Object(d.a)(t):"string"==typeof t&&(r=t);var s=e.props.channelID;return e.props.banUserMutation(Object(l.a)({channelID:s,bannedUserLogin:a,expiresIn:r,reason:n})).then(function(n){var i=n&&n.data&&n.data.banUserFromChatRoom&&n.data.banUserFromChatRoom.error;if(e.updateUserBanStatusQuery(n.data),i&&e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login){var a=i.minTimeoutDurationSeconds,r=i.maxTimeoutDurationSeconds;e.surfaceError(Object(u.a)({login:e.props.userBanStatusData.targetUser.login,code:i.code,isTimeout:!!t,minTimeoutDuration:a||void 0,maxTimeoutDuration:r||void 0}))}return n.data}).catch(function(t){throw e.surfaceError(i),t})},e.unbanUser=function(t){var n=t?Object(o.d)("Unable to untimeout user.","ViewerCardModActions"):Object(o.d)("Unable to unban user.","ViewerCardModActions");if(e.props.confirmModerationAction&&!e.props.confirmModerationAction())return e.surfaceError(n),Promise.reject(n);var i=e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login;if(!i)return e.surfaceError(n),Promise.reject(n);var a=e.props.channelID;return e.props.unbanUserMutation(Object(l.a)({channelID:a,bannedUserLogin:i})).then(function(t){var n=t&&t.data&&t.data.unbanUserFromChatRoom&&t.data.unbanUserFromChatRoom.error;return e.updateUserBanStatusQuery(null),n&&e.props.userBanStatusData&&e.props.userBanStatusData.targetUser&&e.props.userBanStatusData.targetUser.login&&e.surfaceError(Object(m.a)(e.props.userBanStatusData.targetUser.login,n.code)),t.data}).catch(function(t){throw e.surfaceError(n),t})},e.updateUserBanStatusQuery=function(t){var n=e.props,i=n.channelID,a=n.targetID;Object(l.g)(g,{channelID:i,targetUserID:a},function(e){var n=e&&e.targetUser||null;return t&&t.banUserFromChatRoom?{targetUser:n,chatRoomBanStatus:t.banUserFromChatRoom.ban}:{targetUser:n,chatRoomBanStatus:null}})},e.surfaceError=function(t){e.props.surfaceError&&e.props.surfaceError(t)},e}return i.__extends(n,t),n.prototype.render=function(){var t=this,n={userBanStatus:this.props.userBanStatusData,banUser:function(e,n){return t.banUser(e,n)},timeoutUser:function(e,n){return t.banUser(e||f,n)},unbanUser:function(){return t.unbanUser()},untimeoutUser:function(){return t.unbanUser(!0)}};return a.createElement(e,i.__assign({},this.props,n))},n}(a.Component)).displayName=Object(c.a)(t.name,e),t}function b(e){return Object(r.compose)(Object(s.a)(p,{name:"banUserMutation"}),Object(s.a)(h,{name:"unbanUserMutation"}),Object(s.a)(g,{name:"userBanStatusData",options:function(e){return{variables:{channelID:e.channelID,targetUserID:e.targetID}}}}),v)(e)}},"8s1E":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("/MKj"),o=n("fvjX"),s=n("1/iK"),l=n("aCAx"),c=n("y5D0"),d=n("kRBY"),u=n("/HY+"),m=n("q1tI"),p=n("wIs1"),h=n("/7QA"),g=n("u5aL"),f=n("DMoW"),v=n("4qQ0"),b=n("hnjF"),k=n("ygYM"),C=n("sUnt"),y=n("4wKg"),S=n("7uM4"),E=n("7d/q"),N=n("k0nM");!function(e){e.MoreButton="report-button-more-button",e.ReportButton="report-button-report-button"}(i||(i={}));var w=function(e){function t(t){var n=e.call(this,t)||this;return n.handleReportChannelClick=function(){n.props.isLoggedIn?n.props.showReportUserModal({onClose:n.handleReportModalClose,reportContext:a.__assign({contentType:f.Pa.USER_REPORT,targetUserID:n.props.channelID},n.props.reportContext),title:Object(h.d)("Report {channelLogin}",{channelLogin:n.props.channelLogin},"ReportUserModal")}):n.props.login()},n.hideMenu=function(){n.setState({showMenu:!1})},n.toggleMenu=function(){n.setState(function(e){return{showMenu:!e.showMenu}})},n.handleReportModalClose=function(e){(e===v.b.MutationError||e===v.b.Success)&&n.props.history.push("/")},n.state={showMenu:!1},n}return a.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.props.isShown!==e.isShown&&!1===this.props.isShown&&this.hideMenu()},t.prototype.render=function(){return m.createElement(g.a,{onClickOut:this.hideMenu},m.createElement(C.a,{className:"report-button",position:b.j.Relative},m.createElement(E.a,{ariaLabel:Object(h.d)("More options","ReportButton"),icon:S.b.More,"data-a-target":i.MoreButton,onClick:this.toggleMenu}),m.createElement(N.a,{direction:this.props.direction||k.b.TopRight,show:this.state.showMenu},m.createElement(y.a,{title:Object(h.d)("Report {channelLogin}",{channelLogin:this.props.channelLogin},"ReportButton"),onClick:this.handleReportChannelClick,"data-a-target":i.ReportButton}))))},t}(m.Component),_=Object(p.a)(w);var D=Object(r.connect)(function(e){return{isLoggedIn:Object(d.f)(e)}},function(e){return Object(o.bindActionCreators)({login:function(){return Object(c.e)(s.a.ReportChannel)},showReportUserModal:function(e){var t=a.__rest(e,[]);return Object(l.d)(u.a,t)}},e)})(_);n.d(t,"a",function(){return D}),n.d(t,!1,function(){return i}),n.d(t,!1,function(){return w}),n.d(t,!1,function(){return _})},"8uuy":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:117}};n.loc.source={body:"query VideoChatVideoTrackingContext($videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"94Uw":function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.ProfileImage="profile_image",e.ProfileBanner="profile_banner",e.ChannelOfflineImage="channel_offline_image"}(i||(i={}))},"986b":function(e,t,n){},"9KaG":function(e,t,n){},"9P+5":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_UserData"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:95}};n.loc.source={body:"query Chat_UserData {\nuser {\nid\ndisplayName\nlogin\nroles {\nisGlobalMod\nisSiteAdmin\nisStaff\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"9RDd":function(e,t,n){},"9Rmp":function(e,t,n){},"9sGC":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("uIkQ"),s=n("cys1"),l=n("oK83"),c=n("QVaV"),d=(n("HWU2"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleUsernameClick=function(e){t.props.onUsernameClick&&t.props.onUsernameClick(e)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.sender,t=[a.createElement("span",{key:"username-display",className:"message-author__display-name","data-test-selector":"message-username",style:{color:e.chatColor||void 0}},e.displayName)];e.displayName&&!Object(c.b)(e.displayName)&&t.push(a.createElement("span",{key:"username-login",style:{color:e.chatColor||void 0},className:"message-author__intl-login","data-test-selector":"message-username-canonical"}," ("+e.login+")"));var n=this.props.onUsernameClick?"message-author__username--clickable":"message-author__username";return a.createElement("span",{onClick:this.handleUsernameClick,className:n},t)},t}(a.Component)),u=n("fvjX"),m=n("8qOS"),p=n("vLL+"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.banUser=function(){return t.props.banUser()},t.timeoutUser=function(){return t.props.timeoutUser()},t.unbanUser=function(){return t.props.unbanUser()},t.deleteMessage=function(){},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.message.sender&&this.props.message.sender.login?a.createElement(p.a,{canDelete:!1,isMessageDeleted:!!this.props.message.deletedAt,onBanUser:this.banUser,onDelete:this.deleteMessage,onTimeoutUser:this.timeoutUser,onUnbanUser:this.unbanUser,renderNewVersion:!1,senderLogin:this.props.message.sender.login,isMessageBanned:this.props.userBanStatus&&!!this.props.userBanStatus.chatRoomBanStatus||!1}):null},t}(a.Component),g=Object(u.compose)(m.a)(h),f=n("fxMP"),v=n("sUnt"),b=n("Jsra");n("QfRJ");n.d(t,"b",function(){return k}),n.d(t,"a",function(){return C});var k="message-timestamp",C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={shouldShowDeletedBody:!1},t.showDeleted=function(e){e&&e.preventDefault(),t.setState({shouldShowDeletedBody:!0})},t}return i.__extends(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.showModerationIcons!==this.props.showModerationIcons||(e.showTimestamps!==this.props.showTimestamps||(t.shouldShowDeletedBody!==this.state.shouldShowDeletedBody||(e.hasModPermissions!==this.props.hasModPermissions||e.message.deletedAt!==this.props.message.deletedAt)))},t.prototype.render=function(){if(!this.props.message.sender||!this.props.message.id)return a.createElement(v.a,{padding:{x:2,y:.5}},Object(r.d)("unable to properly render message","Message"));var e=this.props.message.sender.displayBadges,t={},n=": ";return this.props.message.content.text.startsWith(f.a)&&(t={color:this.props.message.sender.chatColor||void 0},n=" "),a.createElement(v.a,{padding:this.props.padding||{x:2,y:.5}},a.createElement("div",{id:this.props.message.id,className:"message",style:t},this.renderTimestamp(),this.renderModerationIcons(),a.createElement(o.b,{badgeSets:this.props.badgeSets,badgesToRender:e}),a.createElement(d,{messageID:this.props.message.id,sender:this.props.message.sender,onUsernameClick:this.props.onUsernameClick}),a.createElement("span",{key:"separator"},n),this.renderMessageBody()))},t.prototype.renderMessageBody=function(){if(!this.props.message.deletedAt||this.state.shouldShowDeletedBody){var e={forceClipsNetworkRequest:!0,messageAuthorID:this.props.message.sender.id,messageSourceID:this.props.message.id,emoteSourceType:l.a.room};return Object(s.f)(Object(f.e)(this.props.message,this.props.bitsConfig,this.props.currentUserLogin),e)}var t=Object(r.d)("message deleted","Message"),n=this.props.hasModPermissions?a.createElement(b.a,{onClick:this.showDeleted,"data-test-selector":"show-deleted"},"<"+t+">"):"<"+t+">";return a.createElement("span",{key:"deleted",className:"message--deleted","data-test-selector":"deleted-message"},n)},t.prototype.renderTimestamp=function(){return this.props.showTimestamps?a.createElement("span",{key:"timestamp",className:"message__timestamp","data-test-selector":k},Object(s.a)(new Date(this.props.message.sentAt))):null},t.prototype.renderModerationIcons=function(){return this.props.showModerationIcons&&this.props.hasModPermissions&&this.props.channelID&&this.props.message.sender&&this.props.message.sender.id?a.createElement(g,{message:this.props.message,channelID:this.props.channelID,targetID:this.props.message.sender.id,surfaceError:this.props.surfaceError}):null},t}(a.Component)},"9yes":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_AllowRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AllowRejectedChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:141}};n.loc.source={body:"mutation Chat_AllowRejectedChatMessage($input: AllowRejectedChatMessageInput!) {\nallowRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},AKV8:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var i,a=n("mrSG"),r=n("yR8l"),o=n("4HoE");function s(e){var t=this;return Object(r.a)(o,{props:function(n){return{modUserMutation:function(i){return a.__awaiter(t,void 0,void 0,function(){var t;return a.__generator(this,function(a){if(t=e(n.ownProps).channelID,n.mutate&&t)return[2,n.mutate({variables:{input:{channelID:t,targetLogin:i}}}).then(function(e){return e.data})];throw new Error("modUser mutation is not ready")})})}}}})}!function(e){e.ChannelNotFound="CHANNEL_NOT_FOUND",e.Forbidden="FORBIDDEN",e.UserAlreadyModded="TARGET_ALREADY_MOD",e.UserBanned="TARGET_IS_CHAT_BANNED",e.UserNotFound="TARGET_NOT_FOUND"}(i||(i={}))},AREq:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("/7QA"),a=n("DMoW"),r=n("4G6/");function o(e){var t=e.login,n=e.code,o=e.enteredDuration,s=e.minTimeoutDuration,l=e.maxTimeoutDuration,c=e.isTimeout;if(void 0===c&&(c=!1),c)switch(n){case a.e.FORBIDDEN:return Object(i.d)("You don't have permissions to timeout {login}.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_ADMIN:return Object(i.d)("You cannot timeout admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:t},"BanUserErrorCode");case a.e.TARGET_ALREADY_BANNED:return Object(i.d)("{login} is already banned in this channel.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_ANONYMOUS:return Object(i.d)("You cannot timeout anonymous users.","BanUserErrorCode");case a.e.TARGET_IS_BROADCASTER:return Object(i.d)("You cannot timeout the broadcaster.","BanUserErrorCode");case a.e.TARGET_IS_GLOBAL_MOD:return Object(i.d)("You cannot timeout global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_MOD:return Object(i.d)("You cannot timeout moderator {login} unless you are the owner of this channel.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_SELF:return Object(i.d)("You cannot timeout yourself.","BanUserErrorCode");case a.e.TARGET_IS_STAFF:return Object(i.d)("You cannot timeout staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:t},"BanUserErrorCode");case a.e.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to timeout doesn't exist.","BanUserErrorCode");case a.e.DURATION_INVALID:var d=Object(i.d)("Invalid timeout duration: {userInput}. Usage: /timeout [user] [duration] [reason]",{userInput:o||""},"BanUserErrorCode"),u=Object(i.d)("Timeout duration must be between {minTimeoutDuration} and {maxTimeoutDuration} seconds.",{minTimeoutDuration:s||0,maxTimeoutDuration:l||0},"BanUserErrorCode"),m=Object(i.d)("Invalid timeout duration. Usage: /timeout [user] [duration] [reason]","BanUserErrorCode");if(o){if(void 0!==s&&void 0!==l){var p=Object(r.b)(o);if(!p||Number.isNaN(p))return d;if(p<s||p>l)return u}return d}return m;default:throw new Error("Unrecognized operation result.")}else switch(n){case a.e.FORBIDDEN:return Object(i.d)("You don't have permissions to ban {login}.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_ADMIN:return Object(i.d)("You cannot ban admin {login}. Please email support@twitch.tv if an admin is being abusive.",{login:t},"BanUserErrorCode");case a.e.TARGET_ALREADY_BANNED:return Object(i.d)("{login} is currently banned in this channel.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_ANONYMOUS:return Object(i.d)("You cannot ban anonymous users.","BanUserErrorCode");case a.e.TARGET_IS_BROADCASTER:return Object(i.d)("You cannot ban the broadcaster.","BanUserErrorCode");case a.e.TARGET_IS_GLOBAL_MOD:return Object(i.d)("You cannot ban global moderator {login}. Please email support@twitch.tv if a global moderator is being abusive.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_MOD:return Object(i.d)("You cannot ban moderator {login} unless you are the owner of this channel.",{login:t},"BanUserErrorCode");case a.e.TARGET_IS_SELF:return Object(i.d)("You cannot ban yourself.","BanUserErrorCode");case a.e.TARGET_IS_STAFF:return Object(i.d)("You cannot ban staff {login}. Please email support@twitch.tv if a staff member is being abusive.",{login:t},"BanUserErrorCode");case a.e.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to ban doesn't exist.","BanUserErrorCode");default:throw new Error("Unrecognized operation result.")}}},"Aa/l":function(e,t,n){},AcdH:function(e,t,n){},Av0x:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("/7QA"),a=n("DMoW");function r(e,t,n){if(void 0===n&&(n=!1),n)switch(t){case a.nb.FORBIDDEN:return Object(i.d)("You don't have permissions to untimeout {login}.",{login:e},"UnbanUserErrorCode");case a.nb.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to untimeout doesn't exist.","UnbanUserErrorCode");case a.nb.TARGET_NOT_BANNED:return Object(i.d)("{login} is not currently timed out from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}else switch(t){case a.nb.FORBIDDEN:return Object(i.d)("You don't have permissions to unban {login}.",{login:e},"UnbanUserErrorCode");case a.nb.TARGET_NOT_FOUND:return Object(i.d)("The user you are trying to unban doesn't exist.","UnbanUserErrorCode");case a.nb.TARGET_NOT_BANNED:return Object(i.d)("{login} is not currently banned from this channel.",{login:e},"UnbanUserErrorCode");default:throw new Error("Unrecognized operation result")}}},B3R5:function(e,t,n){},BJwa:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("9C/b"),s=n("fvjX"),l=n("/7QA"),c=n("ZS2+"),d=n("yR8l"),u=n("eDVu"),m=n("0Log"),p=n("/0dD"),h=n("6j5V"),g=n("/aPz"),f=n("DMoW"),v=n("uIkQ"),b=n("5zXJ"),k=n("ZVTe"),C=n("cys1"),y=n("X2PJ"),S=n("+80q"),E=n("sUnt"),N=n("Ws8v"),w=n("hnjF"),_=n("dEDE"),D=function(e){return r.createElement(N.a,{padding:{top:1,bottom:.5},margin:{x:2},borderTop:!0,display:w.d.Block,flexDirection:w.e.Column},r.createElement(E.a,{padding:{bottom:.5}},r.createElement(S.a,{color:y.c.Alt2},Object(l.d)("<x:strong>Anonymous Cheering</x:strong> only supports the anonymous Cheermote. Your Cheer will be modified to appear as shown below.",{"x:strong":function(e){return r.createElement(S.a,{type:S.e.Span,color:y.c.Link,bold:!0},e)}},"InvalidAnonymousCheerPrompt")),r.createElement(E.a,{margin:{y:1}},r.createElement(v.b,{badgeSets:e.badgeSets,badgesToRender:{"anonymous-cheerer":"1"}}),r.createElement(k.a,{userData:{isIntl:!1,userDisplayName:b.c,userID:b.e,userLogin:b.d,userType:"global_mod"}}),":",Object(C.f)(e.messageParts))),r.createElement(E.a,{display:w.d.Flex,flexDirection:w.e.Row},r.createElement(_.a,{onClick:e.onCheerAnyway},Object(l.d)("Continue","InvalidAnonymousCheerPrompt")),r.createElement(E.a,{padding:{left:.5}},r.createElement(_.a,{onClick:e.onEditCheer,type:_.d.Hollow},Object(l.d)("Edit","InvalidAnonymousCheerPrompt")))))},O=n("4rCz"),I=n("7uM4"),T=(n("e7rh"),function(e){return r.createElement(N.a,{padding:{top:1,bottom:.5},margin:{x:2},borderTop:!0,display:w.d.Block,flexDirection:w.e.Column},r.createElement(E.a,{padding:{bottom:.5}},r.createElement(v.b,{badgeSets:e.badgeSets,badgesToRender:{twitchbot:"1"}}),r.createElement(k.a,{userData:{color:"#6441A5",isIntl:!1,userDisplayName:"AutoMod",userID:"automod",userLogin:"automod",userType:"global_mod"}}),r.createElement(S.a,{type:S.e.Span,color:y.c.Alt2},Object(O.d)(": Your text may be removed by moderation. Bits will still be sent to the streamer. Review the highlighted text or continue below.","BitsAutoModOffenderPrompt"))),r.createElement(E.a,{display:w.d.Flex,flexDirection:w.e.Row},r.createElement(E.a,{padding:{right:.5}},r.createElement(_.a,{onClick:e.onEditCheer},r.createElement(E.a,{padding:{x:2}},Object(O.d)("Edit","BitsAutoModOffender")))),r.createElement(_.a,{onClick:e.onCheerAnyway,type:_.d.Hollow},Object(O.d)("Cheer Anyway","BitsAutoModOffender")),r.createElement(E.a,{className:"bits-auto-mod-offender-prompt__notification-icon",display:w.d.Flex,flexDirection:w.e.Column,justifyContent:w.h.End,alignSelf:w.c.End,margin:{left:"auto",right:.5}},r.createElement(I.a,{asset:I.b.NotificationWarning}))))}),M=n("qnat"),L=n("H31v"),F=n("zLNX"),x=n("r2XO"),j=n("GHzV"),A=(n("9Rmp"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickConfirm=function(){t.markRoomSeen(),t.props.onCloseChatRules()},t}return i.__extends(t,e),t.prototype.render=function(){return r.createElement(E.a,{className:"chat-rules",position:w.j.Relative},r.createElement(N.a,{border:!0,background:y.a.Base,margin:{bottom:1}},r.createElement(E.a,{padding:1},r.createElement(E.a,{margin:{bottom:1}},r.createElement(S.a,{type:S.e.H6},Object(l.d)("Chat Rules:","ChatRules"))),r.createElement(E.a,null,r.createElement("ul",null,this.props.chatRules.map(function(e,t){return r.createElement("li",{key:t},e)}))),r.createElement(E.a,{margin:{top:1},display:w.d.Flex,justifyContent:w.h.Center},r.createElement(_.a,{size:_.b.Small,onClick:this.onClickConfirm},Object(l.d)("Ok, got it!","ChatRules"))))))},t.prototype.markRoomSeen=function(){var e=l.n.get("chat_rules_shown",{});e[this.props.channelLogin]=!0,l.n.set("chat_rules_shown",e)},t}(r.Component)),P=n("piIJ"),R=n("PY8X"),U=n("8in3"),B=n("Y3y8"),V=(n("7NxT"),n("fxMP")),H=n("7d/q"),G=n("j+2s");n("kPCN");n.d(t,"a",function(){return q}),n.d(t,"b",function(){return X});var q="chat-room-header-label",W="chat_rules_shown",z=l.k.withCategory("chat-room"),Q=c.a.wrap(function(){return n.e(209).then(n.bind(null,"A39y"))},"ChatViewers"),Y=c.a.wrap(function(){return n.e(208).then(n.bind(null,"Y9qK"))},"NewChatterRitual",{failSilently:!0,placeholder:null}),K=function(e){function t(t){var n=e.call(this,t)||this;n.hasAcceptedModerationConfirmation=!1,n.closeViewersList=function(){n.setState({showViewersList:!1})},n.showViewersList=function(){n.props.closeRoomPicker&&n.props.closeRoomPicker(),n.setState({showViewersList:!0})},n.confirmModerationAction=function(){return!(n.props.isEmbedded&&!n.hasAcceptedModerationConfirmation)||(n.hasAcceptedModerationConfirmation=window.confirm(Object(l.d)("Do you want to enable the ability to timeout and ban on embedded version of Twitch Chat? This setting will persist until you refresh the page.","ChatRoom")),n.hasAcceptedModerationConfirmation)},n.onChatInputFocus=function(){var e=l.n.get(W,{});n.props.chatRules&&n.props.chatRules.length>0&&!e[n.props.channelLogin]&&n.onShowChatRules()},n.onShowChatRules=function(){n.props.authToken&&n.props.onShowChatRules()},n.setChatListElement=function(e){n.setState({chatListElement:e})},n.shouldHideChatInput=function(){return n.state.showViewersList},n.openRaidUpsellFromHost=function(e){return n.closeRaidUpsell(function(){n.setState({raidUpsellTarget:e})})},n.closeRaidUpsell=function(e){return n.setState({raidUpsellTarget:null},function(){e&&e()})},n.onSendCheerError=function(e,t){switch(t.code){case f.Xa.AUTO_MOD_MESSAGE:n.setState({moderatedReason:P.b.AUTOMOD,forceSendCheer:!1,moderatedMessageParts:Object(V.g)(t.messageContent.fragments,!1)});break;case f.Xa.INVALID_ANONYMOUS_MESSAGE:n.setState({moderatedReason:P.b.ANONYMOUS_CHEERING,forceSendCheer:!1,anonymousCheerMessageParts:Object(V.g)(t.messageContent.fragments,!1,n.props.currentUserLogin,n.props.bitsConfig),moderatedMessageParts:[Object(h.a)(e)]});break;default:n.setState({bitsSendErrorCode:t.code,bitsSendHasError:!0})}},n.clearBitsSendError=function(){n.setState({bitsSendErrorCode:f.Xa.UNKNOWN,bitsSendHasError:!1})},n.clearCheerErrorPrompts=function(){n.setState({forceSendCheer:!1,moderatedReason:null,moderatedMessageParts:null,anonymousCheerMessageParts:null})},n.onBitsAutoModCheerAnyway=function(){n.setState({moderatedReason:null,forceSendCheer:!0})},n.onInvalidAnonymousCheerPromptCheerAnyway=function(){n.setState({moderatedReason:null,forceSendCheer:!0})};var i=new v.c([],[],n.props.channelLogin);return n.state={showViewersList:!1,raidUpsellTarget:null,badgeSets:i,forceSendCheer:!1,bitsSendErrorCode:f.Xa.UNKNOWN,bitsSendHasError:!1,moderatedMessageParts:null,anonymousCheerMessageParts:null},n}return i.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.props.channelLogin!==e.channelLogin&&this.props.onCloseChatRules()},t.prototype.componentWillUnmount=function(){this.props.onCloseChatRules()},t.prototype.render=function(){if(this.props.isBackground)return null;if(this.props.isHidden&&!this.props.isPopout)return r.createElement(N.a,{alignItems:w.b.Center,borderLeft:!0,display:w.d.Flex,flexDirection:w.e.Column,fullHeight:!0,fullWidth:!0,justifyContent:w.h.Center,color:y.c.Base,position:w.j.Relative},r.createElement(E.a,{margin:{bottom:1}},r.createElement(S.a,{fontSize:y.d.Size5},Object(l.d)("Chat is hidden.","ChatRoom"))),r.createElement(_.a,{onClick:this.props.onChatUnhide,"data-a-target":"show-chat-button","data-test-selector":"show-chat-button"},Object(l.d)("Show Chat","ChatRoom")));var e=this.props.bitsConfig&&this.props.firstPageLoaded&&this.props.channelID&&r.createElement(M.a,{bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,userID:this.props.userID}),t=this.state.showViewersList&&r.createElement(N.a,{attachBottom:!0,attachLeft:!0,attachRight:!0,attachTop:!0,background:y.a.Alt2,position:w.j.Absolute,zIndex:w.n.Default},r.createElement(E.a,{padding:{y:1}},r.createElement(E.a,{position:w.j.Absolute,attachLeft:!0,margin:{left:1}},r.createElement(H.a,{icon:I.b.Close,ariaLabel:Object(l.d)("Close","ChatRoom"),onClick:this.closeViewersList,"data-test-selector":"close-viewer-list"}))),r.createElement(Q,{channelLogin:this.props.channelLogin,closeViewersList:this.closeViewersList,isCurrentUserBanned:this.props.currentUserBannedStatusData&&this.props.currentUserBannedStatusData.channel&&this.props.currentUserBannedStatusData.channel.self&&this.props.currentUserBannedStatusData.channel.self.banStatus&&this.props.currentUserBannedStatusData.channel.self.banStatus.isPermanent||!1,"data-test-selector":"chat-viewers"})),n=!!this.props.authToken&&!this.props.isEmbedded,i=null;this.props.isChatRulesOpen&&this.props.chatRules&&this.props.chatRules.length&&(i=r.createElement(E.a,{padding:{x:2}},r.createElement(A,{chatRules:this.props.chatRules,channelLogin:this.props.channelLogin,onCloseChatRules:this.props.onCloseChatRules})));var o=a({"chat-room":!0,"chat-room__base-background":!!this.props.useBaseBackground});return r.createElement(w.g,{"data-test-selector":"chat-room-component-layout","data-a-target":this.props.theme===p.a.Dark?"chat-theme-dark":"chat-theme-light",flexShrink:1,flexGrow:1,display:w.d.Flex,flexDirection:w.e.Column,fullWidth:!0},r.createElement("section",{"data-test-selector":"chat-room-section",className:o,role:"complementary","aria-labelledby":q},r.createElement(N.a,{display:w.d.Flex,flexDirection:w.e.Column,flexWrap:w.f.NoWrap,position:w.j.Relative,flexGrow:1,fullHeight:!0,color:y.c.Base,className:"chat-room__content"},this.props.chatRoomHeader,e,r.createElement(x.a,{badgeSets:this.state.badgeSets,channelID:this.props.channelID,channelLogin:this.props.channelLogin,containerRef:this.setChatListElement,confirmModerationAction:this.confirmModerationAction,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isEmbedded:this.props.isEmbedded,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isStaff,onPushMessage:this.props.onPushMessage,theme:this.props.theme,userID:this.props.userID}),r.createElement(E.a,{className:"chat-room__notifications",position:w.j.Absolute,zIndex:w.n.Default,fullWidth:!0},this.props.children),i,t,this.state.raidUpsellTarget&&r.createElement(j.a,null,r.createElement(R.a,{send:this.props.onSendMessage,targetChannelLogin:this.state.raidUpsellTarget,sourceChannelLogin:this.props.channelLogin,closeRaidUpsell:this.closeRaidUpsell})),this.props.firstPageLoaded&&this.props.channelID&&r.createElement(Y,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,onPushMessage:this.props.onPushMessage,onSendMessage:this.props.onSendMessage}),this.state.moderatedReason===P.b.AUTOMOD&&r.createElement(T,{badgeSets:this.state.badgeSets,onEditCheer:this.clearCheerErrorPrompts,onCheerAnyway:this.onBitsAutoModCheerAnyway}),this.state.moderatedReason===P.b.ANONYMOUS_CHEERING&&r.createElement(D,{messageParts:this.state.anonymousCheerMessageParts||[],badgeSets:this.state.badgeSets,onEditCheer:this.clearCheerErrorPrompts,onCheerAnyway:this.onInvalidAnonymousCheerPromptCheerAnyway}),r.createElement(F.a,{authToken:this.props.authToken,bitsConfig:n?this.props.bitsConfig:void 0,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,emotes:this.props.emotes,emoteMap:this.props.emoteMap,firstPageLoaded:this.props.firstPageLoaded,hidden:this.shouldHideChatInput(),isCurrentUserModerator:this.props.isCurrentUserModerator,isEmbedded:this.props.isEmbedded,isHostMode:this.props.isHostMode,isPopout:this.props.isPopout,isStaff:this.props.isStaff,onChatCommand:this.props.onSendMessage,onShowChatRules:this.props.authToken&&this.props.chatRules&&this.props.chatRules.length?this.onShowChatRules:void 0,userBadges:this.props.userBadges,showViewersList:this.showViewersList,onSendMessage:this.props.onSendMessage,onPushMessage:this.props.onPushMessage,onInputFocus:this.onChatInputFocus,containerElement:this.state.chatListElement,openRaidUpsellFromHost:this.openRaidUpsellFromHost,onSendCheerError:this.onSendCheerError,onSendCheerSuccess:this.clearCheerErrorPrompts,isTextInputDisabled:!!this.state.moderatedReason,forceSendCheer:this.state.forceSendCheer,moderatedReason:this.state.moderatedReason,moderatedMessageParts:this.state.moderatedMessageParts,bitsSendErrorCode:this.state.bitsSendErrorCode,bitsSendHasError:this.state.bitsSendHasError,clearBitsSendError:this.clearBitsSendError}),r.createElement(E.a,{className:"chat-room__viewer-card",fullHeight:!0,fullWidth:!0,position:w.j.Absolute,"data-a-target":"chat-user-card"},r.createElement(U.a,{isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,confirmModerationAction:this.confirmModerationAction,onSendMessage:this.props.onSendMessage,channelID:this.props.channelID,channelLogin:this.props.channelLogin,isModerator:!!this.props.isCurrentUserModerator&&this.props.isCurrentUserModerator,isOwner:this.props.isOwnChannel})))))},t.prototype.componentWillReceiveProps=function(e){if(e.data&&e.data.badges&&e.data.user&&e.data.user.broadcastBadges&&this.setState({badgeSets:new v.c(e.data.badges,e.data.user.broadcastBadges,e.channelLogin)}),e.data&&e.data.user&&e.data.user.self&&e.data.user.self.displayBadges){var t={};e.data.user.self.displayBadges.forEach(function(e){e&&(t[e.setID]=e.version)}),l.q.tmi.client.updateChannelBadges(e.channelLogin,t,e.userBadgeDynamicData||{})}},t}(r.Component),X=Object(s.compose)(Object(d.a)(G,{skip:function(e){return!e.firstPageLoaded},options:function(e){return{name:"data",variables:{channelLogin:e.channelLogin}}}}),Object(B.a)(),Object(u.a)(function(e){return{query:G,variables:{channelLogin:e.channelLogin},topic:Object(g.H)(e.userID),type:m.PubsubMessageType.UserBitsBadgeUpdate,skip:!e.firstPageLoaded||!e.userID,mutator:function(t,n){if(z.debug("Received bits-user-update-v1 pubsub update",{data:n,event:t}),!n.badges||t.message_type===L.b.Balance||null===t.data.newest_version||t.data.channel_id!==e.channelID)return n;var i=n.badges.find(function(e){return!!e&&e.setID===t.data.set_id&&e.version===t.data.newest_version});return i&&n.user&&n.user.self&&n.user.self.displayBadges&&(n.user.self.displayBadges=n.user.self.displayBadges.map(function(e){return e&&e.setID===i.setID&&e.version!==i.version?i:e}),(!n.user.self.selectedBadge||i.setID===L.a.Bits&&n.user.self.selectedBadge.setID===L.a.Bits)&&(n.user.self.selectedBadge=i),n.user.self.selectedBadge&&(i.setID!==L.a.Leaderboard||n.user.self.selectedBadge.setID!==L.a.Bits&&n.user.self.selectedBadge.setID!==L.a.Leaderboard)||(n.user.self.selectedBadge=i)),n}}}),o.a)(K)},BKFw:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var i="BROADCAST_TYPE_ALL",a="broadcaster_id",r="BROADCAST_LENGTH_ANY"},BOil:function(e,t,n){},"BQs+":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return u});var i,a=n("mrSG"),r=n("/7QA"),o=n("2xye"),s=n("I6K6"),l=n("bTcf"),c=n("L7EG");function d(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var i,l,u,m;return a.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n.query({query:c,variables:{videoID:e.id}})];case 1:return i=a.sent().data,l=function(e,t){return{id:e.id,owner:t.owner,broadcastType:t.broadcastType,game:t.game}}(e,i.video),u={channel:l.owner?l.owner.login:null,channel_id:Number(e.owner.id),game:l.game?l.game.name:null,partner:!!l.owner&&l.owner.roles.isPartner,location:t.location,share_context:t.collectionID?o.ShareItemContext.Collection:null,share_platform:t.platform,shared_item_id:t.collectionID?t.collectionID:l.id,shared_item_type:t.collectionID?o.ShareItemType.Collection:Object(s.a)(l.broadcastType),shared_item_url:t.shareURL,source_item_id:l.id,source_item_type:Object(s.a)(l.broadcastType)},r.q.tracking.track(o.SpadeEventType.ShareItem,u),[3,3];case 2:return m=a.sent(),r.k.error(m.toString(),d.name),[3,3];case 3:return[2]}})})}function u(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var i,s,c;return a.__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n.query({query:l,variables:{creatorID:e.owner.id}})];case 1:return i=a.sent().data,s={channel:i.user?i.user.login:null,channel_id:Number(e.owner.id),game:null,partner:!!i.user&&i.user.roles.isPartner,location:t.location,share_context:null,share_platform:t.platform,shared_item_id:e.id,shared_item_type:o.ShareItemType.Collection,shared_item_url:t.shareURL,source_item_id:e.id,source_item_type:o.SourceItemType.Collection},r.q.tracking.track(o.SpadeEventType.ShareItem,s),[3,3];case 2:return c=a.sent(),r.k.error(c.toString(),u.name),[3,3];case 3:return[2]}})})}!function(e){e.Copy="link",e.Embed="option_embed",e.Facebook="fb",e.Link="option_link",e.Reddit="reddit",e.Twitter="twitter",e.Unknown="",e.VKontakte="vk",e.Download="download"}(i||(i={}))},"BR/5":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SyncedSettingsSetDeletedMessageDisplaySetting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetDeletedMessageDisplaySettingInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setDeletedMessageDisplaySetting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletedMessageDisplaySetting"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:185}};n.loc.source={body:"mutation SyncedSettingsSetDeletedMessageDisplaySetting($input: SetDeletedMessageDisplaySettingInput!) {\nsetDeletedMessageDisplaySetting(input: $input) {\ndeletedMessageDisplaySetting\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},BRlh:function(e,t,n){},BZOq:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i=n("H/lO"),a=n("BKFw");function r(e){return e.map(function(e){return{title:e.title||"",thumbnail:e.thumbnail||"",thumbnailAltText:e.thumbnailAltText||"",linkTo:e.linkTo||"",login:e.login||"",name:e.name||"",createdAt:e.createdAt||0,length:e.length||0,id:e.id||""}})}function o(e){var t={},n=[];return"broadcastType"in e&&e.broadcastType!==a.c&&void 0!==e.broadcastType&&n.push(e.broadcastType),"broadcasterId"in e&&n.push(a.a+":"+e.broadcasterId),t.facetFilters=n.join(","),"broadcastLength"in e&&e.broadcastLength!==a.b&&void 0!==e.broadcastLength&&(t.numericFilters=[e.broadcastLength]),{typeID:i.a.Videos,params:t}}},BbLt:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"campaignProperties"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domains"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"medProfileImageUrl"},name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"85"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"113"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"lastBroadcast"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"85"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"113"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disableNotifications"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chanlets"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelChanlet"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"hostingChannel"},directives:[]}]}}],loc:{start:0,end:700}};i.loc.source={body:'#import "twilight/features/channel/queries/hosting-channel.gql"\n#import "twilight/features/channel/queries/channel-chanlet.gql"\nfragment channel on User {\nid\nbroadcastSettings {\nid\nlanguage\ngame {\nid\nname\n}\ntitle\n}\ncampaignProperties {\ndomains\n}\ndisplayName\nlogin\nprofileImageURL(width: 50)\nmedProfileImageUrl: profileImageURL(width:70)\nroles {\nisPartner\n}\nstream {\nid\ngame {\nid\nname\nboxArtURL(width: 85 height: 113)\n}\ntitle\ntype\nviewersCount\n}\nlastBroadcast {\nid\ngame {\nid\nname\nboxArtURL(width: 85 height: 113)\n}\ntitle\n}\nself {\nfollower {\ndisableNotifications\nnode {\nid\n}\n}\nsubscriptionBenefit {\nid\n}\n}\nchannel {\nid\nchanlets @include(if: $includeChanlets) {\n...channelChanlet\n}\n}\n...hostingChannel\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("GvwK").definitions)),i.definitions=i.definitions.concat(r(n("ZGqV").definitions)),e.exports=i},BhFH:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),a=n("yR8l"),r=n("8jSG"),o=n("cMjZ"),s=n("kSkr");function l(){var e=this;return Object(a.a)(s,{props:function(t){return{blockUserMutation:function(n,a,s,l){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n,sourceContext:s,reason:a}},optimisticResponse:{blockUser:{__typename:"BlockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(o.a)(l),fragment:r});t&&(t.blockedUsers.push({id:n,__typename:"User"}),e.writeFragment({id:Object(o.a)(l),fragment:r,data:t}))}})]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("blockUserMutation is not ready");case 3:return[2]}})})}}}})}},CA5B:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VIPs"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"vips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:107}};n.loc.source={body:"query VIPs($login: String!) {\nuser(login: $login) {\nid\nvips(first: 100) {\nedges {\nnode {\nid\nlogin\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"CFw/":function(e,t,n){e.exports=n.p+"assets/notification_upsell_arrow-c9d4ff7c87444b45d813.png"},CJLt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChat_TrackingContext_VideoAndCurrentUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:197}};n.loc.source={body:"query VideoChat_TrackingContext_VideoAndCurrentUser($videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\nowner {\nid\nlogin\nroles {\nisPartner\n}\n}\n}\ncurrentUser {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},CK1f:function(e,t,n){},CYfc:function(e,t,n){"use strict";var i=n("vhpE");n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},CbHG:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatFilterContextProvider_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:69}};n.loc.source={body:"query ChatFilterContextProvider_User {\ncurrentUser {\nid\ncreatedAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"CpU+":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),a=n("yR8l"),r=n("JiJH");function o(){var e=this;return Object(a.a)(r,{props:function(t){return{unVIPUserMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate&&t.ownProps.channelID?[4,t.mutate({variables:{input:{channelID:t.ownProps.channelID,revokeeLogin:n}}})]:[2];case 1:return[2,e.sent().data]}})})}}}})}},D91L:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/MKj"),s=n("/7QA"),l=n("gcd7"),c=n("BhFH"),d=n("iS14"),u=n("DMoW"),m=n("TvOw"),p=n("kRBY"),h=n("NNSq"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getInvalidUserMessage=function(){return Object(s.d)("No user matching that login.","IgnoreCommandHandler")},t.blockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot ignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(h.a)(e).then(function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.blockUserMutation(e,m.a.Other,u.l.CHAT,t.props.user)}catch(e){return{notice:Object(s.d)("Unable to ignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully ignored","IgnoreCommandHandler")}})}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to ignore","IgnoreCommandHandler")})}},t.unblockUser=function(e){return e?e===t.props.currentUserLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot unignore yourself.","IgnoreCommandHandler")})}:{deferred:Object(h.a)(e).then(function(e){if(!e)return{notice:t.getInvalidUserMessage()};try{t.props.unblockUserMutation(e,t.props.user)}catch(e){return{notice:Object(s.d)("Unable to unignore user","IgnoreCommandHandler")}}return{notice:Object(s.d)("User successfully unignored","IgnoreCommandHandler")}})}:{deferred:Promise.resolve({notice:Object(s.d)("Please specify a user to unignore","IgnoreCommandHandler")})}},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement("span",{style:{display:"none"}},a.createElement(l.a,{command:"ignore",handler:this.blockUser,channelLogin:this.props.channelLogin}),a.createElement(l.a,{command:"unignore",handler:this.unblockUser,channelLogin:this.props.channelLogin}))},t}(a.Component);var f=Object(r.compose)(Object(o.connect)(function(e){return{user:Object(p.e)(e)}}),Object(d.a)(),Object(c.a)())(g);n.d(t,"a",function(){return f})},"DB+C":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_EmotePicker_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"campaignProperties"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domains"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:393}};n.loc.source={body:"query EmotePicker_EmotePicker_UserSubscriptionProducts($channelOwnerID: ID!) {\nuser(id: $channelOwnerID) {\nid\nlogin\ncampaignProperties {\ndomains\n}\ndisplayName\nprofileImageURL(width: 28)\nsubscriptionProducts {\nid\nname\ntier\nurl\nemotes {\nid\nsetID\ntoken\n}\nprice\nemoteSetID\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\nplatform\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DJtx:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Clips_ModalDelete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:143}};n.loc.source={body:"query Clips_ModalDelete($slug: ID!) {\nclip(slug: $slug) {\nid\nbroadcaster {\nid\n}\ncurator {\nid\nlogin\n}\nthumbnailURL\ncreatedAt\nviewCount\ntitle\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DLhE:function(e,t,n){"use strict";var i=n("mrSG"),a=n("G1cX"),r=n("/7QA"),o=n("f00E"),s=n("+pBb"),l=n("F6GT"),c=n("2xye"),d=n("VJH5");function u(e,t){r.p.track(c.SpadeEventType.ChatFilterSettingsChanged,{chat_filter_is_active:e.viewerChatFilterEnabled,from_menu:t,toggle_aggressive_language:e.viewerChatFilterSettings[d.a.Aggressive],toggle_explicit_language:e.viewerChatFilterSettings[d.a.Sexual],toggle_identity_language:e.viewerChatFilterSettings[d.a.Identity],toggle_profane_language:e.viewerChatFilterSettings[d.a.Profanity]})}function m(e){return e.chat.renderSent}function p(e,t){var n=[];if(e.chat&&e.chat.commandHandlers){var i=e.chat.commandHandlers[t]||{};for(var a in i)i[a]&&n.push(a)}return n}function h(e){return-1===Object.values(e).indexOf(!0)}function g(e){Object(l.c)("viewerChatFilterEnabled",e.viewerChatFilterEnabled),Object(l.c)("viewerChatFilterSettings",e.viewerChatFilterSettings)}n.d(t,"b",function(){return m}),n.d(t,"a",function(){return p}),r.q.store.registerReducer("chat",function(e,t){var n,r,c;switch(void 0===e&&(c=Object(l.b)(),e=i.__assign({},c,{commandHandlers:{},emoteSets:[],emotePickerSessionID:null,isChatRulesOpen:!1,isHidden:!1,renderSent:null,unhideIgnoredUsers:[]})),t.type){case s.d:return i.__assign({},e,{isHidden:!0});case s.e:return i.__assign({},e,{isHidden:!1});case s.f:return i.__assign({},e,{isChatRulesOpen:!1});case s.i:return i.__assign({},e,{emoteSets:t.emoteSets});case s.g:return i.__assign({},e,{emotePickerSessionID:null});case s.h:return i.__assign({},e,{emotePickerSessionID:Object(o.b)()});case s.j:return i.__assign({},e,{lastUsedFollowerDurations:i.__assign({},e.lastUsedFollowerDurations,(n={},n[t.channelLogin]=t.duration,n))});case s.q:return i.__assign({},e,{isChatRulesOpen:!0});case s.b:return i.__assign({},e,{showAutoModActions:!1});case s.c:return i.__assign({},e,{showAutoModActions:!0});case s.k:return i.__assign({},e,{showModerationActions:!1});case s.l:return i.__assign({},e,{showModerationActions:!0});case s.m:return i.__assign({},e,{showModIcons:!1});case s.n:return i.__assign({},e,{showModIcons:!0});case s.r:return i.__assign({},e,{showTimestamps:!1});case s.s:return i.__assign({},e,{showTimestamps:!0});case s.u:var m=i.__assign({},e,{viewerChatFilterEnabled:!1});return g(m),u(m,t.source),m;case s.v:return g(m=h(e.viewerChatFilterSettings)?i.__assign({},e,{viewerChatFilterEnabled:!0,viewerChatFilterSettings:(r={},r[d.a.Aggressive]=!0,r[d.a.Identity]=!0,r[d.a.Profanity]=!0,r[d.a.Sexual]=!0,r)}):i.__assign({},e,{viewerChatFilterEnabled:!0})),u(m,t.source),m;case s.w:return g(m=i.__assign({},e,{viewerChatFilterEnabled:!h(t.settings),viewerChatFilterSettings:i.__assign({},e.viewerChatFilterSettings,t.settings)})),u(m,t.source),m;case s.a:return a(e,function(e){return e.commandHandlers},function(e){var n,i=e[t.channelLogin];if(i){var a=i[t.command];a?a.push(t.handler):i[t.command]=[t.handler]}else e[t.channelLogin]=((n={})[t.command]=[t.handler],n);return e});case s.o:return a(e,function(e){return e.commandHandlers},function(e){var n=e[t.channelLogin];if(!n)return e;var i=n[t.command];if(!i)return e;var a=i.indexOf(t.handler);return i.splice(a,1),0===i.length&&delete n[t.command],0===Object.keys(n).length&&delete e[t.channelLogin],e});case s.p:return i.__assign({},e,{renderSent:t.customEvent});case s.t:return i.__assign({},e,{unhideIgnoredUsers:e.unhideIgnoredUsers.concat([t.userID])});default:return e}})},DOLr:function(e,t,n){"use strict";n.r(t);var i=n("oJmH"),a=n("/MKj"),r=n("fvjX"),o=n("1/iK"),s=n("y5D0"),l=n("kRBY"),c=n("SnaI"),d=n("2bi+"),u=n("mrSG"),m=n("q1tI"),p=n("/7QA"),h=n("ZS2+"),g=n("4VQm"),f=n("oB8h"),v=n("daa2"),b=n("DMoW"),k=n("2xye"),C=n("TSYQ"),y=n("MJbm"),S=n("eJ65"),E=n("yR8l"),N=n("wUQP"),w=n("Qnm5"),_=n("D7An"),D=n("gOYK"),O=n("d2C5"),I=n("jSzL"),T=n("Ahlu"),M=n("aCAx"),L=n("7CzK"),F=n("94Uw"),x=n("hnjF"),j=n("7uM4"),A=n("Ws8v"),P=n("X2PJ"),R=n("sUnt"),U=n("+80q"),B=(n("/nm5"),n("41XU")),V=h.a.wrap(function(){return n.e(130).then(n.bind(null,"7lJP"))},"UserImageUploader"),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openModal=function(){var e=t.props.data&&t.props.data.user;e&&e.id&&e.login&&t.props.showModal(V,{userID:e.id,login:e.login,displayName:e.displayName||e.login,imageType:F.a.ProfileBanner,showCloser:!0,successCallback:t.imageUploaded})},t.imageUploaded=function(){t.props.data&&t.props.data.refetch()},t}return u.__extends(t,e),t.prototype.render=function(){var e,t,n="channel-banner__image-default",i="channel-banner__header-type",a={"channel-banner--open":!this.props.collapsed,"channel-banner--side-nav":this.props.isSideNavBanner},r={"channel-banner__image--side-nav":this.props.isSideNavBanner},o={"channel-banner__edit-overlay-button--side-nav":this.props.isSideNavBanner},s=this.props.data;s&&!s.loading&&this.props.firstPageLoaded&&s.user&&s.user.bannerImageURL?(n="channel-banner__image-loaded",t={backgroundImage:"url("+s.user.bannerImageURL+")"}):(r["channel-banner__image--default"]=!0,t={backgroundImage:"url("+L+")"}),this.props.isSideNavBanner&&(i="channel-banner__side-nav-type");var l=null;if(this.props.canEdit){var c=this.props.isSideNavBanner?m.createElement(R.a,{display:x.d.Flex,padding:{x:3},justifyContent:x.h.Between,fullWidth:!0},m.createElement(j.a,{asset:j.b.Edit}),m.createElement(U.a,null,Object(p.d)("Edit","ChannelBanner"))):m.createElement(R.a,null,m.createElement(R.a,null,m.createElement(j.a,{asset:j.b.Edit})),Object(p.d)("Update Profile Banner","ChannelBanner"));l=m.createElement(A.a,{className:C("channel-banner__edit-overlay",o),background:P.a.Overlay,position:x.j.Absolute,attachTop:!0,attachLeft:!0,fullWidth:!0},m.createElement("button",{className:"channel-banner__edit-overlay-button","data-test-selector":"channel-banner__edit-overlay-interactable",onClick:this.openModal},m.createElement(R.a,{display:x.d.Flex,alignItems:x.b.Center,flexDirection:x.e.Column,justifyContent:x.h.Center},c)))}return e=m.createElement("div",{className:C("channel-banner__image",r),"data-test-selector":n,style:t},l),m.createElement("div",{className:C("channel-banner",a),"data-test-selector":i,onTransitionEnd:this.props.onTransitionEnd},m.createElement(x.g,{fullWidth:!0,fullHeight:!0},e))},t.prototype.componentWillUnmount=function(){this.props.closeModal()},t}(m.Component),G=Object(E.a)(B,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin||!e.firstPageLoaded}})(H);var q,W=Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}},function(e){return Object(r.bindActionCreators)({closeModal:M.c,showModal:M.d},e)})(G),z=n("i4un"),Q=n("dIU+"),Y=n("GnwI"),K=n("Ba7Q"),X=n("Hz5m"),$=n("i4Ys"),J=n("rWGy"),Z=n("b7S+"),ee=n("7d/q"),te=n("Jsra"),ne=n("PL8s"),ie=n("ygYM"),ae=n("dEDE"),re=n("HH5h"),oe=(n("BOil"),n("HXcb")),se=h.a.wrap(function(){return n.e(131).then(n.bind(null,"g9Rq"))},"EditProfileOverlay"),le=h.a.wrap(function(){return Promise.resolve().then(n.bind(null,"QjI3"))},"SubscribeButton");!function(e){e.SocialButtonsDefault="channel-header__social-buttons-default",e.SocialButtonsVariantB="channel-header__social-buttons-variant-b"}(q||(q={}));var ce,de="channel-header__edit-profile-overlay",ue="channel-header__verified-badge",me="yes",pe="browser-notifications-upsell-seen";!function(e){e[e.Channel=1]="Channel",e[e.Clips=2]="Clips",e[e.Events=3]="Events",e[e.Success=4]="Success",e[e.Followers=5]="Followers",e[e.Following=6]="Following",e[e.Videos=7]="Videos"}(ce||(ce={}));var he=function(e){function t(t){var n=e.call(this,t)||this;return n.isLivenessSwitcharooExperiment=Object(z.e)(),n.loggedOutChannelPageAssignment=Object(z.c)(),n.avatarRoundification=Object(N.c)("watch_avatar_roundification"),n.verifiedBadgeElement=m.createElement(Z.a,{label:Object(p.d)("Verified User","ChannelHeader"),direction:Z.c.Right},m.createElement(R.a,{className:"channel-header__verified","data-target":ue,display:x.d.Flex,alignItems:x.b.Center,margin:{left:1}},m.createElement(j.a,{asset:j.b.Verified}))),n.renderAvatarEditButton=function(){return n.props.channel&&n.props.channel.id&&n.props.channel.login&&n.isChannelEditor()?m.createElement(A.a,{className:de,background:P.a.Overlay,borderRadius:n.avatarRoundification?P.b.Rounded:void 0,position:x.j.Absolute,attachTop:!0,attachLeft:!0,fullHeight:!0,fullWidth:!0,display:x.d.InlineFlex,alignItems:x.b.Center,justifyContent:x.h.Center},m.createElement(se,{userID:n.props.channel.id,login:n.props.channel.login,displayName:n.props.channel.displayName||n.props.channel.login})):null},n.toggleChannelBanner=function(){n.setState(function(e){var t=!e.bannerSlideIn;return t?{bannerHidden:!e.bannerHidden,bannerSlideIn:t}:{bannerSlideIn:t}})},n.completedBannerAnimation=function(){n.setState(function(e){return e.bannerSlideIn?e:{bannerHidden:!0}})},n.onUpdateDebounce=function(){if(n.resizeAnimationFrame&&(clearTimeout(n.resizeAnimationFrame),n.resizeAnimationFrame=null),n.channelHeader){var e=n.channelHeader.querySelector('[data-target="channel-header-left"]');n.updateWidth(n.getWidth(e).width),n.resizeAnimationFrame=setTimeout(n.handleWindowResize,0)}},n.handleWindowResize=function(){n.resizeAnimationFrame=null,n.getChannelHeaderSize()},n.maybeShowBrowserNotificationsUpsell=function(){return u.__awaiter(n,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:return!p.n.get(pe,!1)&&Object(O.a)()&&Object(I.c)()&&p.q.experiments.getAndTrackAssignment(_.b.BrowserNotificationsUpsell)===me?[4,D.a.hasPushSubscription()]:[3,3];case 1:return e.sent()?[3,3]:(p.n.set(pe,!0),this.props.showBrowserNotificationsUpsellModal(),[4,D.a.userSubscribe(T.a.Channel)]);case 2:e.sent(),this.props.closeBrowserNotificationsUpsellModal(),e.label=3;case 3:return[2]}})})},n.saveChannelHeaderRef=function(e){return n.channelHeader=e},n.toggleLiveNotificationsBtnShown=function(e){n.setState({showLiveNotificationsButton:e})},n.state={bannerHidden:!0,bannerSlideIn:!1},n}return u.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onUpdateDebounce),!this.props.data||this.props.data.loading||this.props.data.error||this.getChannelHeaderSize(),this.reportInteractive()},t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.channelLogin!==t.channelLogin&&this.setState({showLiveNotificationsButton:void 0}),e.data&&!e.data.loading&&void 0===this.state.showLiveNotificationsButton&&this.setState({showLiveNotificationsButton:this.getFollowingState(e)})},t.prototype.componentDidUpdate=function(){this.channelHeader&&this.updateWidth(this.getWidth(this.channelHeader.querySelector('[data-target="channel-header-left"]')).width),this.onUpdateDebounce(),this.reportInteractive()},t.prototype.componentWillUnmount=function(){this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame),window.removeEventListener("resize",this.onUpdateDebounce)},t.prototype.updateWidth=function(e){var t=e!==this.width||this.width!==this.prevWidth;void 0!==this.width&&(this.prevWidth=this.width),this.width!==e&&(this.width=e),t&&(this.resizeAnimationFrame&&(clearTimeout(this.resizeAnimationFrame),this.resizeAnimationFrame=null),this.onUpdateDebounce())},t.prototype.render=function(){var e,t,n=0,i=0,a=0,r=p.a.defaultAvatarURL;this.props.data&&this.props.data.user&&!this.props.data.loading&&!this.props.data.error&&(n=this.props.data.user.videos&&this.props.data.user.videos.totalCount||0,i=this.props.data.user.followers&&this.props.data.user.followers.totalCount||0,a=this.props.data.user.follows&&this.props.data.user.follows.totalCount||0),this.props.channel&&(r=this.props.channel.medProfileImageUrl||p.a.defaultAvatarURL,e=this.props.channel.displayName,t=this.props.channel.roles&&this.props.channel.roles.isPartner);var o,s=this.renderLivenessIndicator(),l=this.createChannelLinks(n,i,a,!(!this.props.data||!this.props.data.loading)),c={"channel-header__user":!0,"channel-header__user--selected":this.isActiveTab(ce.Channel)},d=m.createElement(R.a,{display:x.d.Flex,flexWrap:x.f.NoWrap,alignItems:x.b.Center,flexShrink:0},m.createElement(R.a,{className:"channel-header__user-avatar channel-header__user-avatar--active",margin:{right:1},display:x.d.Flex,flexShrink:0,alignItems:x.b.Stretch},m.createElement(R.a,{position:x.j.Relative},m.createElement(re.a,{size:36,src:r,alt:e||""}),this.renderAvatarEditButton())),e?m.createElement(U.a,{type:U.e.H5},e):m.createElement(R.a,{alignItems:x.b.Center},m.createElement(ne.a,{lineCount:1,width:120})),t&&this.verifiedBadgeElement,s);o=this.isActiveTab(ce.Channel)?m.createElement("div",{className:"channel-header__banner-toggle",onClick:this.toggleChannelBanner,"data-target":"channel-header__channel-link","data-a-target":"user-channel-header-item"},d):this.props.channelLogin?m.createElement(te.a,{to:"/"+this.props.channelLogin||"#","data-target":"channel-header__channel-link","data-a-target":"user-channel-header-item",hoverUnderlineNone:!0},d):d;var u=this.state.bannerHidden?x.d.HideAccessible:x.d.Block,h=null,g=this.renderSocialButtons();return this.isActiveTab(ce.Channel)&&(h=m.createElement(R.a,{display:u},m.createElement(W,{channelLogin:this.props.channelLogin,canEdit:this.isChannelEditor(),collapsed:!this.state.bannerSlideIn,onTransitionEnd:this.completedBannerAnimation}))),m.createElement(R.a,{className:"channel-header",flexShrink:0},h,m.createElement(R.a,{display:x.d.Flex,justifyContent:x.h.Between,flexWrap:x.f.NoWrap,fullHeight:!0,refDelegate:this.saveChannelHeaderRef,margin:{x:3}},m.createElement(R.a,{display:x.d.Flex,alignItems:x.b.Stretch,flexShrink:0,flexWrap:x.f.NoWrap,"data-target":"channel-header-left"},m.createElement(x.g,{className:C(c),padding:{y:.5,right:2},display:x.d.Flex,flexWrap:x.f.NoWrap,alignItems:x.b.Center,flexShrink:0},o),this.renderTabs(l),m.createElement(R.a,{className:"channel-header__item channel-header__item--no-underline",padding:{x:1},flexShrink:0,alignSelf:x.c.Center,"data-target":"channel-header-button"},m.createElement(S.a,{alwaysMountBalloonContent:!0},m.createElement(ee.a,{icon:j.b.NavMore,ariaLabel:Object(p.d)("More","ChannelHeader")}),m.createElement(ie.a,{direction:ie.b.Bottom,noTail:!0},m.createElement(R.a,{padding:{y:1}},this.renderDropdown(l)))))),g),m.createElement(y.a,{onResize:this.onUpdateDebounce}))},t.prototype.generateUserLink=function(e){void 0===e&&(e="");var t=this.props.channelLogin;return t?"/"+t+"/"+e:"#"},t.prototype.renderTabs=function(e){var t=this;return e.map(function(e){var n=e.count?m.createElement(R.a,{className:"channel-header__item-count",display:x.d.Flex,margin:{left:.5}},m.createElement(U.a,{type:U.e.Span,fontSize:P.d.Size5},e.count)):null,i=e.label.toLowerCase()+"-channel-header-item",a={pathname:t.generateUserLink(e.pathSuffix),state:u.__assign({},p.q.history.location.state)};return m.createElement(x.g,{key:"channel-header__item--"+e.label,alignItems:x.b.Center,flexShrink:0},m.createElement(te.a,{className:"channel-header__item channel-header__item--hide "+(e.isSelected?"channel-header__item--selected":""),to:a,"data-target":"channel-header-item","data-a-target":i,"data-test-selector":i,hoverUnderlineNone:!0},m.createElement(R.a,{padding:{x:2,y:.5},display:x.d.Flex},m.createElement(U.a,{type:U.e.Span,fontSize:P.d.Size5},e.label),n)))})},t.prototype.renderDropdown=function(e){var t=this;return e.map(function(e){var n=e.count?m.createElement(R.a,{className:"channel-header__item-count",display:x.d.Flex,margin:{left:.5}},m.createElement(U.a,{type:U.e.Span},e.count)):null,i=t.generateUserLink(e.pathSuffix),a={pathname:i,state:u.__assign({},p.q.history.location.state)};return m.createElement(R.a,{key:"channel-header__dropdown-item--"+e.label,"data-target":"channel-header-dropdown-item"},m.createElement($.a,{linkTo:a,disabled:"#"===i},m.createElement(R.a,{className:"channel-header__dropdown-hover-target",padding:{y:.5,x:1},display:x.d.Flex},m.createElement(U.a,{type:U.e.Span},e.label),n)))})},t.prototype.renderLivenessIndicator=function(){var e=Object(p.d)("Live Now","ChannelHeader"),t=this.isLivenessSwitcharooExperiment?m.createElement(w.a,null):m.createElement(J.a,{status:J.c.Live,pulse:!0});return this.isLivenessSwitcharooExperiment&&this.props.live&&this.isActiveTab(ce.Channel)||!this.isLivenessSwitcharooExperiment&&this.props.live&&!this.isActiveTab(ce.Channel)?m.createElement(R.a,{margin:{left:1},"data-target":"channel-header__live-indicator"},m.createElement(Z.a,{label:e,direction:Z.c.Right},t)):null},t.prototype.createChannelLinks=function(e,t,n,i){var a="control"===this.loggedOutChannelPageAssignment&&!this.props.isLoggedIn||!this.loggedOutChannelPageAssignment||this.props.isLoggedIn,r=[{label:Object(p.d)("Videos","ChannelHeader"),count:i?void 0:Object(p.f)(e),pathSuffix:"videos",isSelected:this.isActiveTab(ce.Videos)},{label:Object(p.d)("Clips","ChannelHeader"),pathSuffix:"clips",isSelected:this.isActiveTab(ce.Clips)}];return a?r.concat([{label:Object(p.d)("Events","ChannelHeader"),pathSuffix:"events",isSelected:this.isActiveTab(ce.Events)},{label:Object(p.d)("Followers","ChannelHeader"),count:i?void 0:Object(p.f)(t),pathSuffix:"followers",isSelected:this.isActiveTab(ce.Followers)},{label:Object(p.d)("Following","ChannelHeader"),count:i?void 0:Object(p.f)(n),pathSuffix:"following",isSelected:this.isActiveTab(ce.Following)}]):r},t.prototype.isActiveTab=function(e){return ce[this.getCurrentPage(this.props.page)]===ce[e]},t.prototype.isChannelEditor=function(){return!(!this.props.currentUser||!this.props.channel||!this.props.currentUser.roles||this.props.currentUser.id!==this.props.channel.id&&!this.props.currentUser.roles.isStaff&&!this.props.currentUser.roles.isSiteAdmin)},t.prototype.getChannelHeaderSize=function(){if(this.channelHeader){var e=this.channelHeader.querySelector('[data-target="channel-header-left"]'),t=this.channelHeader.querySelector('[data-target="channel-header-right"]'),n=this.channelHeader.querySelectorAll('[data-target="channel-header-item"]'),i=this.channelHeader.querySelectorAll('[data-target="channel-header-dropdown-item"]');if(n.length){for(var a=0;a<n.length;a++){var r=n[a];r.classList.contains("channel-header__item--hide")&&(r.classList.remove("channel-header__item--hide"),i[a].classList.add("channel-header__item--hide"))}var o=this.getWidth(this.channelHeader).width,s=this.getWidth(e).width+this.getWidth(t).width+20-o,l=[];if(s>0){var c=function(e){var t=n[e];if(!t.classList.contains("channel-header__item--hide")){var a=d.getWidth(t);if(l.push(function(){t.classList.add("channel-header__item--hide"),i[e].classList.remove("channel-header__item--hide")}),(s-=a.width)<=0)return"break"}},d=this;for(a=n.length-1;a>=0;a--){if("break"===c(a))break}}l.forEach(function(e){return e()});var u=this.channelHeader.querySelector('[data-target="channel-header-button"]');if(u){var m=!this.channelHeader.querySelectorAll('[data-target="channel-header-item"].channel-header__item--hide').length;u.classList.toggle("channel-header__item--hide",m)}}}},t.prototype.getWidth=function(e){return e?{width:e.clientWidth}:{width:0}},t.prototype.reportInteractive=function(){this.props.contextLoading||this.props.latencyTracking.reportInteractive()},t.prototype.renderSocialButtons=function(){var e=this.getFollowingState(this.props),t=this.props.channel&&this.props.channel.displayName||void 0,n=null,i=q.SocialButtonsDefault;if(Object(z.g)()){var a=C("channel-header__follow-btn",{"channel-header__follow-btn--following":!!this.state.showLiveNotificationsButton}),r=C("channel-header__notification-toggle-container",{"channel-header__notification-toggle-container--visible":!!this.state.showLiveNotificationsButton});i=q.SocialButtonsVariantB,n=m.createElement(m.Fragment,null,m.createElement(R.a,{className:"channel-header__follow-btn-container",display:x.d.Flex,overflow:x.i.Hidden,alignItems:x.b.Center,padding:{x:1},fullHeight:!0},m.createElement(R.a,{display:x.d.Flex,justifyContent:x.h.Center,flexDirection:x.e.Column,margin:{right:1}},m.createElement(R.a,{display:x.d.InlineFlex,justifyContent:x.h.Center},m.createElement("div",{className:a},m.createElement(Q.a,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,onFollow:this.maybeShowBrowserNotificationsUpsell,followUIType:Q.b.IconAndText,unfollowUIType:Q.b.IconOnly,onToggleAnimationComplete:this.toggleLiveNotificationsBtnShown,channelName:t,hideDropdownWhenFollowing:!0,fullWidthButton:!0,hollowIcons:!0,animatedButton:!0,useContextualModals:!0,showTooltips:!0})))),m.createElement("div",{className:r},m.createElement(K.a,{channelLogin:this.props.channelLogin,toggleType:K.b.Button,tabIndex:this.state.showLiveNotificationsButton?0:-1,followData:this.getFollowData(),showTooltips:!0}))),m.createElement(R.a,null,m.createElement(le,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,subscribedButtonType:ae.d.Default,unsubscribedButtonType:e?ae.d.Default:ae.d.Hollow,forceIcon:!0,subLocation:"channel_page"})))}else(this.props.hostedChannel||Object(z.i)())&&(i=q.SocialButtonsDefault,n=m.createElement(m.Fragment,null,m.createElement(R.a,{display:x.d.Flex,alignItems:x.b.Stretch,margin:{left:1}},m.createElement(Q.a,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,onFollow:this.maybeShowBrowserNotificationsUpsell,followUIType:Q.b.IconAndText,unfollowUIType:Q.b.IconOnly,channelName:t,useContextualModals:!0})),m.createElement(R.a,{margin:{left:1}},m.createElement(le,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin,subLocation:"channel_page"}))));return m.createElement(R.a,{display:x.d.Flex,flexWrap:x.f.NoWrap,flexShrink:0,alignItems:x.b.Center,className:"channel-header__right","data-test-selector":i,"data-target":"channel-header-right"},this.props.firstPageLoaded&&n)},t.prototype.getFollowingState=function(e){return!!(e.channel&&e.channel.self&&e.channel.self.follower)&&null!==e.channel.self.follower.disableNotifications},t.prototype.getFollowData=function(){if(this.props.channel)return this.props.channel},t.prototype.getCurrentPage=function(e){switch(e){case X.c.About:return ce.Channel;case X.c.Collections:case X.c.Videos:return ce.Videos;case X.c.Clips:return ce.Clips;case X.c.Events:return ce.Events;case X.c.Followers:return ce.Followers;case X.c.Following:return ce.Following;case X.c.EsportsLoot:case X.c.EsportsProgress:case X.c.EsportsPass:default:return ce.Channel}},t}(m.Component),ge=Object(i.compose)(Object(E.a)(oe,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(Y.withLatencyTracking)("ChannelHeader"))(he),fe=n("CFw/"),ve=n.n(fe),be=n("HSpZ"),ke=(n("9RDd"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement("div",{onClick:this.props.closeModal},m.createElement(be.a,{type:be.f.FadeIn,duration:be.c.Long,timing:be.e.EaseInOut,enabled:!0},m.createElement(A.a,{className:"browser-push-notifications-upsell",alignItems:x.b.Center,justifyContent:x.h.Center,position:x.j.Fixed,display:x.d.Flex,background:P.a.Overlay,fullHeight:!0,fullWidth:!0,attachTop:!0,attachLeft:!0},m.createElement(R.a,{className:"browser-push-notifications-upsell__container",display:x.d.Flex,textAlign:x.k.Center,padding:{x:1},position:x.j.Relative},m.createElement(be.a,{type:be.f.SlideInBottom,duration:be.c.Long,timing:be.e.EaseInOut,enabled:!0},m.createElement(U.a,{type:U.e.H3,fontSize:P.d.Size3,lineHeight:U.b.Body},Object(p.d)("Don't miss out when your favorite streamers go live!","BrowserNotificationsUpsellModal")),m.createElement(R.a,{margin:{top:1}},m.createElement(U.a,{type:U.e.H4,fontSize:P.d.Size4,color:P.c.OverlayAlt,lineHeight:U.b.Body},Object(p.d)("Turn on Browser Notifications to get updates even when your browser window is minimized","BrowserNotificationsUpsellModal")))),m.createElement(R.a,{className:"browser-push-notifications-upsell__arrow",position:x.j.Absolute,attachTop:!0,attachLeft:!0},m.createElement(be.a,{type:be.f.SlideInBottom,delay:be.b.Short,duration:be.c.Long,timing:be.e.EaseInOut,enabled:!0},m.createElement("img",{src:ve.a})))))))},t}(m.Component));var Ce=Object(a.connect)(null,function(e){return Object(r.bindActionCreators)({closeModal:M.c},e)})(ke);var ye=Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:Object(l.f)(e)}},function(e){return Object(r.bindActionCreators)({showBrowserNotificationsUpsellModal:function(){return Object(M.d)(Ce,{})},closeBrowserNotificationsUpsellModal:M.c},e)})(ge),Se=n("tiJ6"),Ee=n("Q34B"),Ne=n("0bws"),we=0,_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackLongtask=function(e){if(t.shouldTrackLongtask()){var n=e.attribution.find(function(e){return"script"===e.name});p.p.track(k.SpadeEventType.UserLongtask,{container_id:n&&n.containerId,container_name:n&&n.containerName,container_src:n&&n.containerSrc,container_type:n&&n.containerType,longtask_duration:e.duration,longtask_name:e.name})}},t}return u.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;if(++we>1){var t="Multiple LongtaskTrackers mounted (one maximum allowed).";p.k.error(new Error(t),t)}else window.PerformanceObserver&&window.PerformanceLongTaskTiming&&(this.performanceObserver=new window.PerformanceObserver(function(t){t.getEntries().forEach(e.trackLongtask)}),this.performanceObserver.observe({entryTypes:["longtask"]}))},t.prototype.componentWillUnmount=function(){we--,this.performanceObserver&&this.performanceObserver.disconnect()},t.prototype.render=function(){return null},t.prototype.shouldTrackLongtask=function(){return p.b.get("longtask_tracking_sample_rate",1)>Math.random()},t}(m.Component),De=n("VKOn"),Oe=n("4+Ji"),Ie=n("8ssJ"),Te=n("VAW9"),Me=n("cnlr"),Le=n("znm4"),Fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPlayerSeekRequest=function(e){t.props.onPlayerSeekRequestHandler(e-t.getSourceVideoClipStartOffset())},t}return u.__extends(t,e),t.prototype.render=function(){var e=this.props.clip,t={},n=null;e&&(t={messageWindow:{offset:e.videoOffsetSeconds,duration:e.durationSeconds}},e.video&&e.video.id&&(n=e.video.id));var i=this.getSourceVideoClipStartOffset();return m.createElement(Le.a,u.__assign({onPlayerSeekRequest:this.onPlayerSeekRequest,onShowLogin:this.props.onShowLogin,videoID:n,startInReplayMode:!0,isClipChatDisabled:!n},t,{highlightTimestamp:i}))},t.prototype.getSourceVideoClipStartOffset=function(){var e=this.props.clip;return e&&e.videoOffsetSeconds?e.videoOffsetSeconds:ir},t}(m.Component),xe=n("eFQ3"),je=n("L3+h"),Ae=n("kxrW"),Pe=n("wIs1"),Re=n("ZLqn"),Ue=n("ybym"),Be=n("eAAt"),Ve=n("0EKw"),He=n("5goO"),Ge=n("T7Bf");n("uYye");var qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLoginClick=function(){t.props.login()},t}return u.__extends(t,e),t.prototype.render=function(){var e=this.renderCampaignMessage();return e?m.createElement(U.a,{"data-test-selector":"drops-campaign-details"},e):null},t.prototype.renderCampaignMessage=function(){var e=this,t=function(e){if(e&&e.user&&e.user.id){var t=e.user.id,n=e.user.stream;if(!n||"live"!==n.type||!n.game||!n.game.activeDropCampaigns)return null;var i=!!n.isStreamDropsEnabled,a=!!n.game.self&&!!n.game.self.isDropsLinked,r="",o=n.game.activeDropCampaigns;return o.some(function(e){return r=e.connectionURL,!!e.applicableChannels&&0===e.applicableChannels.length})?{isGlobal:!0,campaignURL:r,isChannelLinked:i,isUserLinked:a}:o.some(function(e){return!!e.applicableChannels&&e.applicableChannels.some(function(e){return e.id===t})})?{isGlobal:!1,campaignURL:r,isChannelLinked:i,isUserLinked:a}:null}}(this.props.dropsData);return t?t.isChannelLinked?this.props.isLoggedIn?t.isUserLinked?Object(p.d)("<x:green>Drops enabled!</x:green> Watch for a chance to earn loot.",{"x:green":function(e){return m.createElement(U.a,{type:U.e.Span,bold:!0,className:"drops-campaign-details__drops-success"},e)}},"DropsCampaignDetails"):Object(p.d)("Enable in-game Drops with <x:link>Account Link.</x:link>",{"x:link":function(e){return m.createElement(te.a,{to:t.campaignURL,targetBlank:!0},e)}},"DropsCampaignDetails"):Object(p.d)("Enable in-game Drops with <x:link>Twitch Account.</x:link>",{"x:link":function(t){return m.createElement(te.a,{onClick:e.handleLoginClick},t)}},"DropsCampaignDetails"):Object(p.d)("Broadcaster has not enabled in-game Drops. <x:link>Learn More</x:link>",{"x:link":function(e){return m.createElement(te.a,{to:"https://help.twitch.tv/customer/en/portal/articles/2754380-how-to-earn-drops",targetBlank:!0},e)}},"DropsCampaignDetails"):null},t}(m.Component),We=Object(r.compose)(Object(E.a)(Ge,{name:"dropsData",options:function(e){return{variables:{login:e.channelLogin,isLoggedIn:e.isLoggedIn}}}}),Object(Y.withLatencyTracking)("DropsCampaignDetails",{autoReportInteractive:!0}))(qe);var ze,Qe=Object(a.connect)(function(e){return{isLoggedIn:Object(l.f)(e)}},function(e){return Object(r.bindActionCreators)({login:function(){return Object(s.e)(o.a.DropsLoginButton)}},e)})(We),Ye=n("8s1E"),Ke=n("vlTn"),Xe=n("djOf");(ze||(ze={})).EditButton="channel-info-bar-edit-button";var $e,Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){if(!(this.props.isLoggedIn&&this.props.firstPageLoaded&&this.props.channelLogin&&this.props.data&&this.props.data.currentUser))return null;var e=this.props.data.currentUser;return e.login===this.props.channelLogin||e.roles&&(e.roles.isStaff||e.roles.isSiteAdmin||e.roles.isGlobalMod)?m.createElement(R.a,{margin:{left:1}},m.createElement(ae.a,{type:ae.d.Text,icon:j.b.Edit,onClick:this.props.onClick,"data-test-selector":ze.EditButton},Object(p.d)("Edit","ChannelInfoBar"))):null},t}(m.Component),Ze=Object(E.a)(Xe,{skip:function(e){return!e.firstPageLoaded||!e.isLoggedIn}})(Je),et=n("U1zV"),tt=n("L/cU"),nt=(n("rhXE"),n("5in9")),it=h.a.wrap(function(){return Promise.resolve().then(n.bind(null,"QjI3"))},"SubscribeButton"),at=h.a.wrap(function(){return n.e(132).then(n.bind(null,"Cjzi"))},"RealtimeStreamTagList",{placeholder:m.createElement(Ke.a,null)});!function(e){e.TeamName="channel-info-bar-team-name",e.TitleText="channel-info-bar-title-text",e.ChannelInfoBarWrapper="channel-info-bar-wrapper"}($e||($e={}));var rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getGame=function(){var e=t.props.channel;if(e)return e.stream&&e.stream.id?e.stream.game||void 0:e.lastBroadcast&&e.lastBroadcast.game&&e.lastBroadcast.game.id?e.lastBroadcast.game:void 0},t.getTitle=function(){var e=t.props.channel;return e&&e.stream&&e.stream.title?e.stream.title:e&&e.lastBroadcast&&e.lastBroadcast.title?e.lastBroadcast.title:""},t.renderGame=function(){var e=t.getGame();return e&&e.name?m.createElement(Ve.a,{name:e.name}):null},t.renderGameBoxArt=function(){var e=t.getGame(),n=e&&e.name?e.name:"",i=e&&e.boxArtURL?e.boxArtURL:"";return e&&n&&i?m.createElement(R.a,{display:x.d.Flex,margin:{top:.5}},m.createElement(Be.a,{name:n,boxArtURL:i,size:tt.b.Size6})):null},t.renderTeam=function(){var e=t.props.userData&&t.props.userData.user;return e&&e.primaryTeam?m.createElement(He.a,{"data-test-selector":$e.TeamName,name:e.primaryTeam.name,displayName:e.primaryTeam.displayName}):null},t.handleEditButtonClicked=function(){t.props.showEditBroadcastModal({channelLogin:t.props.channelLogin,location:k.PageviewLocation.Channel})},t.maybeShowBrowserNotificationsUpsell=function(){return u.__awaiter(t,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:return!p.n.get(pe,!1)&&Object(O.a)()&&Object(I.c)()&&p.q.experiments.getAndTrackAssignment(_.b.BrowserNotificationsUpsell)===me?[4,D.a.hasPushSubscription()]:[3,3];case 1:return e.sent()?[3,3]:(p.n.set(pe,!0),this.props.showBrowserNotificationsUpsellModal(),[4,D.a.userSubscribe(T.a.Channel)]);case 2:e.sent(),this.props.closeBrowserNotificationsUpsellModal(),e.label=3;case 3:return[2]}})})},t}return u.__extends(t,e),t.prototype.componentDidUpdate=function(){this.maybeReportInteractive()},t.prototype.componentDidMount=function(){this.maybeReportInteractive()},t.prototype.render=function(){if(this.props.channelIsHosting)return null;var e=this.getTitle(),t=this.props.userData&&this.props.userData.user,n=t&&t.profileViewCount?t.profileViewCount:0,i=Object(z.h)(),a=null;i&&this.props.firstPageLoaded&&(a=m.createElement(R.a,{display:x.d.Flex,flexWrap:x.f.NoWrap,justifyContent:x.h.Between},m.createElement(R.a,null,m.createElement(Q.a,{channelLogin:this.props.channelLogin,onFollow:this.maybeShowBrowserNotificationsUpsell,followUIType:Q.b.IconAndText,unfollowUIType:Q.b.IconOnly,balloonDirection:ie.b.TopRight,useContextualModals:!0})),m.createElement(R.a,{className:"channel-info-bar__sub-button-wrapper"},m.createElement(it,{channelLogin:this.props.channelLogin,balloonDirection:ie.b.TopRight,subLocation:"channel_page","data-test-selector":"channel-info-bar__subscribe-button"}))));var r=this.getGame(),o=this.renderGame(),s=this.renderTeam();return m.createElement(A.a,{className:"channel-info-bar","data-test-selector":$e.ChannelInfoBarWrapper,display:x.d.Flex,flexWrap:x.f.Wrap,flexDirection:i?x.e.Column:void 0,justifyContent:x.h.Between,padding:1,border:!0,borderRadius:{bottomLeft:P.b.Large,bottomRight:P.b.Large},borderBottom:!0,breakpointLarge:{padding:{x:1,top:1,bottom:0}}},m.createElement(R.a,{className:"channel-info-bar__content-container",display:x.d.Flex,justifyContent:x.h.Between,margin:{bottom:1},fullWidth:!0},m.createElement(R.a,{fullWidth:!0},m.createElement(R.a,{display:x.d.Flex},this.renderGameBoxArt(),m.createElement(R.a,{className:"channel-info-bar__content-right",fullWidth:!0},m.createElement(R.a,{display:x.d.Flex,justifyContent:x.h.Between},m.createElement(R.a,{margin:{bottom:.5,right:2},ellipsis:!0},m.createElement(U.a,{type:U.e.Span,fontSize:P.d.Size4,"data-a-target":"stream-title","data-test-selector":$e.TitleText,title:e},e)),m.createElement(R.a,null,a)),m.createElement(R.a,{display:x.d.Flex,flexWrap:x.f.Wrap},o,o&&s&&m.createElement(R.a,{margin:{right:1}},m.createElement(U.a,{bold:!0,color:P.c.Alt2,fontSize:P.d.Size5},"")),s),m.createElement(R.a,{margin:{top:.5},display:x.d.Flex,alignItems:x.b.Start,justifyContent:x.h.Between,flexWrap:x.f.Wrap},m.createElement(R.a,{display:x.d.Flex,flexWrap:x.f.Wrap,padding:{top:.5}},this.props.firstPageLoaded?m.createElement(at,{channelLogin:this.props.channelLogin,gameID:r&&r.id}):m.createElement(Ke.a,null)),m.createElement(R.a,{display:x.d.Flex},m.createElement(A.a,{display:x.d.Flex,color:P.c.Alt2,fontSize:P.d.Size5},m.createElement(A.a,{className:"channel-info-bar__viewers-wrapper",color:P.c.Live,display:x.d.InlineFlex},m.createElement(Ue.a,{login:this.props.channelLogin})),m.createElement(A.a,{display:x.d.InlineFlex,alignItems:x.b.Center},m.createElement(et.a,{value:Object(p.d)("{count, number}",{count:n},"ChannelInfoBar"),label:Object(p.d)("Total Views","ChannelInfoBar"),icon:j.b.GlyphViews,"data-a-target":"total-views-count"}))),m.createElement(R.a,{display:x.d.Flex},this.props.firstPageLoaded&&m.createElement(Ze,{channelLogin:this.props.channelLogin,isLoggedIn:this.props.isLoggedIn,firstPageLoaded:this.props.firstPageLoaded,onClick:this.handleEditButtonClicked}),m.createElement(R.a,{margin:{x:1}},this.renderChannelShareButton()),this.props.channel&&this.props.channel.id&&m.createElement(Ye.a,{channelID:this.props.channel.id,channelLogin:this.props.channelLogin})))),this.props.firstPageLoaded&&m.createElement(Qe,{channelLogin:this.props.channelLogin}))))))},t.prototype.renderChannelShareButton=function(){return this.props.channel&&this.props.channel.login?m.createElement(Re.a,{login:this.props.channel.login,displayName:this.props.channel.displayName||this.props.channel.login,title:this.getTitle()}):null},t.prototype.maybeReportInteractive=function(){this.props.contextLoading||this.props.latencyTracking.reportInteractive()},t}(m.Component);var ot=Object(i.compose)(Pe.a,Object(Se.b)(function(e){return{channel:e.channel,contextError:e.error,contextLoading:e.loading}}),Object(E.a)(nt,{name:"userData",skip:function(e){return!e.firstPageLoaded},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(Y.withLatencyTracking)("ChannelInfoBar"))(rt),st=h.a.wrap(function(){return Promise.all([n.e(32),n.e(34),n.e(0),n.e(129)]).then(n.bind(null,"bDGO"))},"EditBroadcastModal");var lt=Object(a.connect)(function(e){return{isLoggedIn:Object(l.f)(e),firstPageLoaded:e.session.firstPageLoaded}},function(e){return Object(r.bindActionCreators)({login:function(){return Object(s.e)(o.a.ReportChannel)},showEditBroadcastModal:function(e){var t=u.__rest(e,[]);return Object(M.d)(st,t)},showBrowserNotificationsUpsellModal:function(){return Object(M.d)(Ce,{})},closeBrowserNotificationsUpsellModal:M.c},e)})(ot),ct=n("WOQ1"),dt=n("LA8z"),ut=n("NvVO"),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(dt.a,null)},t}(m.PureComponent),pt=Object(Y.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:ut.a.ChannelIndex,location:k.PageviewLocation.Channel})(mt),ht=n("CxVm"),gt=n("4p7I"),ft=n("9C/b"),vt=n("mLw1"),bt=n("yoKv"),kt=n("vRsq"),Ct=n("9MrB"),yt=n("YXxK"),St=n("7JxC"),Et=n("Q94S"),Nt=(n("WrC7"),h.a.wrap(function(){return Promise.all([n.e(0),n.e(134)]).then(n.bind(null,"/s/o"))},"CampaignsTabs",{placeholder:m.createElement(St.a,null)})),wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id?m.createElement(Nt,{channelID:this.props.channel.id,channelLogin:this.props.channel.login||this.props.channelLogin}):null},t.prototype.componentDidMount=function(){this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:yt.b.ChannelPage})},t.prototype.componentDidUpdate=function(e){(this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName?this.props.channel.displayName:this.props.channelLogin;p.q.setPageTitle(e)},t}(m.Component);var _t=Object(r.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Ct.b)(function(e){return u.__assign({},e)}),Object(Y.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:ut.a.ChannelIndex,location:k.PageviewLocation.Channel,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(wt);var Dt=Object(i.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(_t),Ot=n("4rCz"),It=n("4hz/"),Tt=function(){return m.createElement(m.Fragment,null,m.createElement(R.a,{display:x.d.Flex,justifyContent:x.h.Start},m.createElement(R.a,null,m.createElement(ne.a,{height:32,width:96})),m.createElement(R.a,null,m.createElement(ne.a,{height:32,width:84,overlay:!0}))),m.createElement(It.a,null))},Mt=h.a.wrap(function(){return n.e(135).then(n.bind(null,"r93r"))},"ChannelEventsContent",{placeholder:m.createElement(Tt,null)}),Lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEventToggle=function(e){t.props.history.push(u.__assign({},t.props.location,{search:e}))},t}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(Mt,{channelLogin:this.props.channelLogin,searchQuery:this.props.location.search,onEventToggle:this.onEventToggle})},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(1),this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:yt.b.ChannelEventsPage})},t.prototype.componentDidUpdate=function(){this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;Ot.r.setPageTitle(Object(p.d)("{channelName}'s Events",{channelName:e},"ChannelRootEventsPage"))},t}(m.Component);var Ft=Object(i.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Ct.b)(function(e){return u.__assign({},e)}),Object(Y.withPageTracking)("EventCollectionsPage",{destination:ut.a.ChannelEvents,location:k.PageviewLocation.ChannelEvents,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Lt);var xt=Object(i.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(Ft),jt=n("bdHe"),At=h.a.wrap(function(){return Promise.resolve().then(n.bind(null,"EJeP"))},"ChannelFollowersContent",{placeholder:m.createElement(jt.a,null)}),Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(At,{channelLogin:this.props.channelLogin})},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(1),this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:yt.b.ChannelFollowersPage})},t.prototype.componentDidUpdate=function(e){(this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;Ot.r.setPageTitle(Object(p.d)("{channelName}'s Followers",{channelName:e},"ChannelRootFollowersPage"))},t}(m.Component);var Rt=Object(i.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Ct.b)(function(e){return u.__assign({},e)}),Object(Y.withPageTracking)("ChannelFollowersPage",{destination:ut.a.ChannelFollowers,location:k.PageviewLocation.Followers,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Pt);var Ut=Object(i.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(Rt),Bt=h.a.wrap(function(){return n.e(136).then(n.bind(null,"bpxw"))},"ChannelFollowingContent",{placeholder:m.createElement(jt.a,null)}),Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(Bt,{channelLogin:this.props.channelLogin})},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(1),this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:yt.b.ChannelFollowingPage})},t.prototype.componentDidUpdate=function(e){this.props.channelLogin!==e.channelLogin&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;Ot.r.setPageTitle(Object(p.d)("{channelName}'s Follows",{channelName:e},"ChannelRootFollowingPage"))},t}(m.Component);var Ht=Object(i.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Ct.b)(function(e){return u.__assign({},e)}),Object(Y.withPageTracking)("ChannelFollowingPage",{destination:ut.a.ChannelFollows,location:k.PageviewLocation.Follows,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Vt);var Gt=Object(i.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(Ht),qt=(n("4IKE"),h.a.wrap(function(){return Promise.all([n.e(0),n.e(137)]).then(n.bind(null,"EuHz"))},"ChannelPanels",{placeholder:m.createElement(St.a,null)})),Wt="panel-container",zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(R.a,{display:x.d.Flex,flexDirection:x.e.ColumnReverse,breakpointMedium:{flexDirection:x.e.Row},flexWrap:x.f.NoWrap,margin:{x:"auto"},padding:{bottom:3},flexShrink:1},m.createElement(R.a,{className:"channel-page__panel-container","data-test-selector":Wt,flexGrow:1,flexShrink:1},this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id&&m.createElement(qt,{channelID:this.props.channel.id,channelLogin:this.props.channelLogin})))},t.prototype.componentDidMount=function(){this.setPageTitle(),this.props.updateChatTrackingContext({viewerContext:yt.b.ChannelPage})},t.prototype.componentDidUpdate=function(e){(!e.channel&&this.props.channel||this.props.channel&&e.channel&&this.props.channel.displayName!==e.channel.displayName||this.props.channelLogin!==e.channelLogin)&&this.setPageTitle()},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName?this.props.channel.displayName:this.props.channelLogin;p.q.setPageTitle(e)},t}(m.Component);var Qt=Object(r.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Ct.b)(function(e){return u.__assign({},e)}),Object(Y.withPageTracking)("ChannelPage",{autoReportInteractive:!0,destination:ut.a.ChannelIndex,location:k.PageviewLocation.Channel,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(zt);var Yt,Kt=Object(i.compose)(ft.a,Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(Qt),Xt=n("H1ft"),$t=n("QzU5"),Jt=n("ttMT"),Zt=n("XKWF"),en=n("VwyG"),tn=function(e){return m.createElement(en.a,{ownerLogin:e.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!0}},function(t){return t.permitted?m.createElement(ae.a,{type:ae.d.Default,linkTo:"/"+e.channelLogin+"/manager/collections"},Object(p.d)("Manage your collections","collection-page")):null})},nn=n("kyTI"),an=n("QdeI"),rn=n("cERj"),on=n("cr+I"),sn=n("+GjP");function ln(e){return"sort-interactable-"+e.searchValue}function cn(e){var t=on.parse(e)[kt.d];if("string"!=typeof t)return null;switch(t.toUpperCase()){case kt.f.Newest.toUpperCase():return kt.f.Newest;case kt.f.Popular.toUpperCase():return kt.f.Popular;default:return null}}!function(e){e.ButtonText="button-text",e.SortText="sort-text"}(Yt||(Yt={}));var dn,un=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSort=function(e){return m.createElement($.a,{"data-test-selector":ln(e),onClick:function(){t.handleSortClick(e)},key:e.label,selected:!!e.selected},m.createElement(R.a,{padding:{x:1,y:.5},"data-test-selector":Yt.SortText},e.label))},t.handleSortClick=function(e){t.props.history.push(t.generateLocationWithSort(t.props.location,e.searchValue))},t}return u.__extends(t,e),t.prototype.componentWillMount=function(){this.checkSortValue(this.props.location)},t.prototype.render=function(){var e=this.getSorts(),t=e.find(function(e){return!!e.selected});return m.createElement("div",null,m.createElement(R.a,{padding:{bottom:.5}},m.createElement(U.a,{bold:!0},Object(p.d)("Sorted by","VideoSort"))),m.createElement(S.a,{hideBalloonOnInsideClick:!0},m.createElement(ae.a,{type:ae.d.Hollow,dropdown:!0,"data-test-selector":Yt.ButtonText},t?t.label:e[0].label),m.createElement(ie.a,{noTail:!0},e.map(this.renderSort))))},t.prototype.getSorts=function(){var e=[{label:Object(p.d)("Date","VideoSort"),searchValue:kt.f.Newest},{label:Object(p.d)("Popular","VideoSort"),searchValue:kt.f.Popular}],t=cn(this.props.location.search),n=e.find(function(e){return null!==t&&e.searchValue===t});return n&&(n.selected=!0),e},t.prototype.checkSortValue=function(e){cn(e.search)||this.props.history.replace(this.generateLocationWithSort(e,kt.f.Newest))},t.prototype.generateLocationWithSort=function(e,t){var n;return Object(sn.d)(e,((n={})[kt.d]=t,n))},t}(m.Component),mn=Object(ft.a)(un),pn=h.a.wrap(function(){return n.e(142).then(n.bind(null,"gcyA"))},"ChannelVideosOverviewContent",{placeholder:m.createElement(an.a,null)}),hn=h.a.wrap(function(){return n.e(141).then(n.bind(null,"6mes"))},"ChannelClipsContent",{placeholder:m.createElement(an.a,null)}),gn=h.a.wrap(function(){return n.e(140).then(n.bind(null,"WfYB"))},"ChannelCollectionsContent",{placeholder:m.createElement(an.a,null)}),fn=h.a.wrap(function(){return n.e(139).then(n.bind(null,"TCEa"))},"FilterableVideoTower",{placeholder:m.createElement(an.a,null)});!function(e){e.Content="content",e.Sort="sort"}(dn||(dn={}));var vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){var e=Object(kt.w)(this.props.location.search),t=this.getComponentsForFilter(e);return m.createElement("div",null,e&&this.renderVideoOptions(t.sort),m.createElement("div",{"data-test-selector":dn.Content},t.content))},t.prototype.componentDidMount=function(){var e=this.props.critical?1:0;this.props.latencyTracking.reportInteractive(e)},t.prototype.renderVideoOptions=function(e){return m.createElement(R.a,{"data-test-selector":dn.Sort,display:x.d.Flex,flexDirection:x.e.Row,padding:{bottom:1}},m.createElement(R.a,{padding:{right:1}},m.createElement(rn.a,{channelLogin:this.props.channelLogin})),e)},t.prototype.getComponentsForFilter=function(e){var t=this.props.channelLogin,n=Object(kt.p)(this.props),i=Object(kt.x)(this.props.location.search)||kt.f.Newest,a=Object(kt.v)(this.props.location.search),r=a||void 0;if(!e)return{content:m.createElement(pn,{channelLogin:t,collectionID:n})};switch(e){case kt.e.Highlights:case kt.e.PastPremieres:case kt.e.PastBroadcasts:case kt.e.Uploads:return{content:this.getFilterableVideoTower(e,r),sort:m.createElement(mn,null)};case kt.e.Clips:return{content:m.createElement(hn,{channelName:t,videoBrowseOptions:{filter:e,sort:i,range:r}}),sort:m.createElement(Jt.a,{key:r,hideLanguageFilter:!0,channelLogin:t})};case kt.e.Collections:return{content:m.createElement(gn,{channelLogin:t,videoBrowseOptions:{filter:e,sort:i,range:r}}),sort:m.createElement(R.a,{alignItems:x.b.End,display:x.d.Flex,fullWidth:!0,justifyContent:x.h.End},m.createElement(R.a,{flexGrow:0},m.createElement(tn,{channelLogin:t})))};case kt.e.All:return{content:this.getFilterableVideoTower(e),sort:m.createElement(mn,null)};case kt.e.Featured:return{content:this.getFilterableVideoTower(e),sort:m.createElement(R.a,{flexGrow:1,flexShrink:1,display:x.d.Flex,justifyContent:x.h.End,alignItems:x.b.End},m.createElement(nn.a,{channelLogin:this.props.channelLogin,trackingContext:{medium:k.PageviewMedium.ChannelVods,content:k.PageviewContent.CustomizeButton}}))};default:return e}},t.prototype.getFilterableVideoTower=function(e,t){var n=void 0;switch(e){case kt.e.Highlights:n=$t.a.Highlight;break;case kt.e.PastBroadcasts:n=$t.a.Archive;break;case kt.e.PastPremieres:n=$t.a.PastPremiere;break;case kt.e.Uploads:n=$t.a.Upload;break;case kt.e.Featured:case kt.e.All:break;default:return e}var i=Object(kt.x)(this.props.location.search)||kt.f.Newest;return m.createElement(fn,{channelLogin:this.props.channelLogin,filter:n,sort:Object(Zt.c)(i),videoBrowseOptions:{filter:e,sort:i,range:t},multipleVideoGameMarkersType:Object(Xt.b)()})},t}(m.Component);var bn=Object(i.compose)(ft.a,Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Y.withLatencyTracking)("ChannelVideosContent"))(vn),kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.componentDidMount=function(){this.setPageTitle(),this.setClipsFilter()},t.prototype.componentDidUpdate=function(){this.setPageTitle(),this.setClipsFilter()},t.prototype.render=function(){return Object(kt.w)(p.q.history.location.search)?m.createElement(bn,{critical:!0}):null},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;p.q.setPageTitle(Object(p.d)("{channelName}'s Clips",{channelName:e},"ChannelVideosClipsPage"))},t.prototype.setClipsFilter=function(){Object(kt.w)(p.q.history.location.search)||p.q.history.replace({search:"?filter="+kt.e.Clips,state:u.__assign({},p.q.history.location.state)})},t}(m.Component);var Cn=Object(i.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Y.withPageTracking)("ClipsChannelPage",{destination:ut.a.ChannelClips,autoReportInteractive:!0,location:k.PageviewLocation.ChannelClips,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(kn),yn=n("sQmm"),Sn=function(){return m.createElement(m.Fragment,null,m.createElement(R.a,{display:x.d.Flex,flexDirection:x.e.Row,alignItems:x.b.End,justifyContent:x.h.End,padding:.5},m.createElement(R.a,{margin:{right:1}},m.createElement(ne.a,{height:25,width:80})),m.createElement(R.a,null,m.createElement(ne.a,{height:25,width:80}))),m.createElement(A.a,{border:!0,padding:2,display:x.d.Flex,alignItems:x.b.Center,justifyContent:x.h.Center,margin:{top:1,bottom:1}},m.createElement(R.a,null,m.createElement(ne.a,{height:25,width:80}))),m.createElement(yn.a,null))},En=n("UNiU"),Nn=h.a.wrap(function(){return Promise.all([n.e(0),n.e(138)]).then(n.bind(null,"k7UE"))},"ChannelVideosEditPageComponent",{placeholder:m.createElement(Sn,null)}),wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){var e=this;return Object(En.a)()?m.createElement(en.a,{ownerLogin:this.props.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},function(t){var n=t.loading,i=t.permitted,a=t.error;return n?m.createElement(Sn,null):!i||a?e.redirectToVideosBrowse():m.createElement(Nn,{channelLogin:e.props.channelLogin})}):this.redirectToVideosBrowse()},t.prototype.redirectToVideosBrowse=function(){return m.createElement(vt.a,{to:Object(kt.l)(this.props.channelLogin)})},t}(m.Component);var _n=Object(i.compose)(Object(Se.b)(function(e){return{channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Y.withPageTracking)("ChannelVideosEditPage",{destination:ut.a.VideosEditPage,autoReportInteractive:!0,location:k.PageviewLocation.ChannelVideosEdit,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(wn),Dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.componentDidMount=function(){this.setPageTitle()},t.prototype.componentDidUpdate=function(){this.setPageTitle()},t.prototype.render=function(){return m.createElement(bn,{critical:!0})},t.prototype.setPageTitle=function(){var e=this.props.channel&&this.props.channel.displayName||this.props.channelLogin;p.q.setPageTitle(Object(p.d)("{channelName}'s Videos",{channelName:e},"ChannelRootVideosPage"))},t}(m.Component);var On=Object(i.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Y.withPageTracking)("ChannelVideosPage",{destination:ut.a.VideosPage,autoReportInteractive:!0,location:k.PageviewLocation.ChannelVideos,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}))(Dn),In=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(m.Fragment,null,this.props.firstPageLoaded&&this.props.channel&&this.props.channel.id&&m.createElement(bn,null))},t}(m.Component);var Tn=Object(i.compose)(Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,error:e.error,loading:e.loading,pageviewProps:Object(Et.d)(e.channel,e.video,e.collection,e.clip)}}),Object(Y.withPageTracking)("VideoWatchPage",{autoReportInteractive:!0,destination:ut.a.VideoWatchPage,location:k.PageviewLocation.VideoWatchPage,pageviewProperties:function(e){return e.pageviewProps},skipPageviewTracking:function(e){return e.loading||!!e.error}}),Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(In),Mn=n("zQgx"),Ln=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderPanelArea=function(){return t.props.channel&&t.props.channel.id?Object(Mn.k)(t.props.channel)?m.createElement(Dt,null):m.createElement(Kt,null):null},t.renderVideosArea=function(){return m.createElement(Tn,null)},t.renderEventsPage=function(){return t.props.channel&&t.props.channel.id?m.createElement(xt,{key:t.props.location.search}):null},t.renderFollowersPage=function(){return t.props.channel&&t.props.channel.id?m.createElement(Ut,null):null},t.renderFollowingPage=function(){return t.props.channel&&t.props.channel.id?m.createElement(Gt,null):null},t.renderVideosPage=function(){return t.props.channel&&t.props.channel.id?m.createElement(On,null):null},t.renderVideosEditPage=function(){return t.props.channel&&t.props.channel.id?m.createElement(_n,null):null},t.renderClipsPage=function(){return t.props.channel&&t.props.channel.id?m.createElement(Cn,null):null},t.redirectLegacyChannelCollections=function(){var e=Object(kt.l)(t.props.match.params.channelLogin,{filter:kt.e.Collections});return m.createElement(vt.a,{to:e})},t.redirectLegacyVideoFilters=function(e){var n,i=t.props.match.params.channelLogin,a=Object(kt.t)(e),r=Object(kt.x)(e.location.search)||void 0,o=u.__assign({},e.location.state);return n=a?Object(kt.l)(i,{filter:Object(kt.y)(a)||void 0,sort:r}):Object(kt.l)(i),m.createElement(vt.a,{to:{pathname:n,state:o}})},t}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(bt.a,null,m.createElement(gt.a,{path:"/collections/:collectionID",render:this.renderVideosArea}),m.createElement(gt.a,{path:"/videos/:videoID",render:this.renderVideosArea}),m.createElement(gt.a,{path:"/videos/v:videoID",render:this.renderVideosArea}),m.createElement(gt.a,{path:"/:channelLogin",exact:!0,render:this.renderPanelArea}),m.createElement(gt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/about",render:this.renderPanelArea}),m.createElement(gt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/events",exact:!0,render:this.renderEventsPage}),m.createElement(gt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/followers",render:this.renderFollowersPage}),m.createElement(gt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/following",render:this.renderFollowingPage}),m.createElement(gt.a,{path:"/:channelLogin/p/:entityID",render:this.renderPanelArea}),m.createElement(gt.a,{path:"/:channelLogin/rooms/:roomName",render:this.renderPanelArea}),m.createElement(gt.a,{path:"/:channelLogin/videos/edit",exact:!0,render:this.renderVideosEditPage}),m.createElement(gt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/videos",exact:!0,render:this.renderVideosPage}),m.createElement(gt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?/videos/:filter(all|archive|upload|highlight|past_premiere)",render:this.redirectLegacyVideoFilters}),m.createElement(gt.a,{path:"/:channelLogin/clips",render:this.renderClipsPage}),m.createElement(gt.a,{path:"/:channelLogin/collections",render:this.redirectLegacyChannelCollections}),m.createElement(gt.a,{path:"/:channelLogin/:contentType(video|clip|collection)?/:contentID?",render:this.renderVideosArea}))},t}(m.Component);var Fn,xn=Object(r.compose)(ft.a,Object(Se.b)(function(e){return{channel:e.channel}}))(Ln),jn=n("KOTp"),An=n("kduP");!function(e){e.Title="title",e.Date="date"}(Fn||(Fn={}));var Pn,Rn=/\S/,Un=function(e){var t=e.clip,n="";return t.title&&""!==t.title&&Rn.test(t.title)&&t.title&&(n=t.title),m.createElement(A.a,null,m.createElement(R.a,{display:x.d.Flex},m.createElement(U.a,{ellipsis:!0,bold:!0,title:n,fontSize:P.d.Size5,type:U.e.Span,"data-test-selector":Fn.Title},n),m.createElement(U.a,{bold:!0,fontSize:P.d.Size5,type:U.e.Span,color:P.c.Alt2,"data-test-selector":Fn.Date}," ",Object(p.c)(new Date(t.createdAt),"medium"))))},Bn=n("uXHW"),Vn=n("AFv4");!function(e){e.InfoPlaceholder="info-placeholder",e.SubText="sub-text",e.SubTextGame="sub-text-game",e.SubTextCurator="sub-text-curator",e.SubTextViews="sub-text-views"}(Pn||(Pn={}));var Hn,Gn=Object(Y.withLatencyTracking)("ClipInfo",{autoReportInteractive:!0})(function(e){var t,n=e.clip,i=n&&n.broadcaster&&m.createElement(te.a,{to:"/"+n.broadcaster.login},n.broadcaster.login);t=n&&n.game&&i?Object(p.d)("{broadcaster} playing {game}",{broadcaster:i,game:m.createElement(te.a,{to:""+Object(An.b)(n.game.name)},n.game.name)},"ClipInfo"):i;var a,r=n&&n.game?m.createElement("span",{"data-test-selector":Pn.SubTextGame},t):null,o=n&&n.curator?m.createElement("span",{"data-test-selector":Pn.SubTextCurator},n&&n.game&&!!n.curator&&m.createElement("span",null,""),n&&n.curator&&Object(p.d)("Clipped by {curator}",{curator:m.createElement(te.a,{to:"/"+n.curator.login},n.curator.login)},"ClipInfo")):null,s=m.createElement("span",{"data-test-selector":Pn.SubTextViews},n&&n.curator&&m.createElement("span",null,""),n&&Object(p.d)("{viewCount, plural, one {# view} other {# views}}",{viewCount:n.viewCount||0},"ClipInfo"));return a=null===n?m.createElement(R.a,{"data-test-selector":Pn.InfoPlaceholder,display:x.d.Flex,flexDirection:x.e.Column},m.createElement(ne.a,{lineCount:1,width:320}),m.createElement(ne.a,{lineCount:1,width:240})):m.createElement("div",null,m.createElement(Un,{clip:n}),m.createElement(A.a,{"data-test-selector":Pn.SubText,color:P.c.Alt2},r,o,s)),m.createElement(Bn.a,{row:!0},m.createElement(Vn.a,{overflow:x.i.Hidden},a))}),qn=n("jsEL"),Wn=n("/HY+"),zn=n("yWUM"),Qn=n("4qQ0"),Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement("li",null,m.createElement($.a,u.__assign({"data-test-selector":this.props.testSelector},this.props.interactableProps),m.createElement(R.a,{padding:{x:1,y:.5}},this.props.children)))},t=u.__decorate([Object(Y.withLatencyTracking)("InteractableOption",{autoReportInteractive:!0})],t)}(m.Component),Kn=n("16Gl");!function(e){e.BanUserButton="ban-user",e.ClipOptionsButton="clip-options-button",e.ClipOptionsContainer="clip-options-container",e.DeleteAllButton="delete-all",e.DeleteButton="delete",e.ReportButton="report",e.TimeOutButton="timeout-user",e.WatchFullVideoButton="watch-full-video-button"}(Hn||(Hn={}));var Xn=function(e){function t(t){var n=e.call(this,t)||this;return n.renderWatchFullVideoOption=function(){var e=n.props.clip;if(n.props.currentUser){var t=n.props.currentUser,i=t.isEditor,a=t.isBroadcaster;if(e&&"control"!==n.vodDamianAssignment&&(i||a)){var r=Object(Ot.d)("Watch Full Video","ClipOptions"),o={linkTo:"",disabled:!1};if(e.video){var s=location.protocol+"//"+location.host+Object(Kn.g)(e.video.id);o.linkTo=Object(sn.e)(s,{t:Object(zn.a)(e.videoOffsetSeconds)})}else o.disabled=!0,r=Object(Ot.d)("Full video Unavailable","ClipOptions");return m.createElement(Yn,{key:"watch-full-option",interactableProps:o,testSelector:Hn.WatchFullVideoButton},r)}}},n.handleReportModalClose=function(e){(e===Qn.b.MutationError||e===Qn.b.Success)&&n.props.history.push("/")},n.getBroadcasterID=function(){var e=n.props.clip;return e&&e.broadcaster&&e.broadcaster.id?e.broadcaster.id:""},n.getCuratorID=function(){var e=n.props.clip;return e&&e.curator&&e.curator.id?e.curator.id:""},n.vodDamianAssignment=Ot.r.experiments.getAndTrackAssignment(_.b.VODDamian,{channel:t.channelLogin}),n}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(S.a,null,m.createElement(ee.a,{"data-test-selector":Hn.ClipOptionsButton,type:ee.c.Hollow,icon:j.b.More,ariaLabel:Object(Ot.d)("Clip Options","ClipOptions"),disabled:!this.props.clip}),this.props.clip?m.createElement(ie.a,{direction:ie.b.TopRight},m.createElement(A.a,{padding:{y:1},color:P.c.Link},m.createElement("ul",{"data-test-selector":Hn.ClipOptionsContainer},this.renderWatchFullVideoOption(),this.renderReportOption(this.props.clip),this.renderDeleteOption(this.props.clip),this.renderDeleteAllOption(this.props.clip),this.renderBanUserOption(this.props.clip),this.renderTimeOutUserOption(this.props.clip)))):m.createElement(ie.a,null))},t.prototype.renderDeleteOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isCurator||this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={onClick:function(){t.props.onDeleteClipClick({slug:e.slug,onClose:t.props.onCloseModal})},type:$.b.Alert};return m.createElement(Yn,{key:"delete-option",interactableProps:n,testSelector:Hn.DeleteButton},Object(Ot.d)("Delete","ClipOptions"))}},t.prototype.renderDeleteAllOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={type:$.b.Alert,onClick:function(){t.props.onDeleteAllClipsClick({slug:e.slug,onClose:t.props.onCloseModal})}};return m.createElement(Yn,{key:"delete-all-option",interactableProps:n,testSelector:Hn.DeleteAllButton},Object(Ot.d)("Delete All Clips from Video","ClipOptions"))}},t.prototype.renderReportOption=function(e){var t=this,n=this.getBroadcasterID(),i=this.getCuratorID(),a={onClick:function(){t.props.currentUser?t.props.onReportClick({onClose:t.handleReportModalClose,reportContext:{contentType:b.Pa.CLIP_REPORT,contentID:e.slug,targetUserID:n,additionalTrackingID:i},title:Object(Ot.d)("Report this Clip","ClipsOptions")}):t.props.onShowLogin()}};return m.createElement(Yn,{key:"report-option",interactableProps:a,testSelector:Hn.ReportButton},Object(Ot.d)("Report","ClipOptions"))},t.prototype.renderBanUserOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={login:"",displayName:""};e.curator&&e.curator.login&&e.curator.displayName&&(n={login:e.curator.login,displayName:e.curator.displayName});var i=this.getBroadcasterID(),a={onClick:function(){t.props.onBanClick({broadcasterID:i,targetUser:n,onClose:t.props.onCloseModal})},type:$.b.Alert};return m.createElement(Yn,{key:"ban-option",interactableProps:a,testSelector:Hn.BanUserButton},Object(Ot.d)("Ban User","ClipOptions"))}},t.prototype.renderTimeOutUserOption=function(e){var t=this;if(this.props.currentUser&&(this.props.currentUser.isBroadcaster||this.props.currentUser.isStaffOrSiteAdmin)){var n={login:"",displayName:""};e.curator&&e.curator.login&&e.curator.displayName&&(n={login:e.curator.login,displayName:e.curator.displayName});var i=this.getBroadcasterID(),a={onClick:function(){t.props.onTimeOutClick({broadcasterID:i,targetUser:n,onClose:t.props.onCloseModal})},type:$.b.Alert};return m.createElement(Yn,{key:"timeout-option",interactableProps:a,testSelector:Hn.TimeOutButton},Object(Ot.d)("Timeout User (24 hr)","ClipOptions"))}},t}(m.Component),$n=Object(Y.withLatencyTracking)("ClipsOptions",{autoReportInteractive:!0})(Xn);var Jn,Zn=Object(a.connect)(null,function(e){return Object(r.bindActionCreators)({onShowLogin:function(){return Object(s.e)(o.a.ClipsOptions)},onDeleteClipClick:function(e){return Object(M.d)(qn.d,{slug:e.slug,onClose:e.onClose})},onDeleteAllClipsClick:function(e){return Object(M.d)(qn.e,{slug:e.slug,onClose:e.onClose})},onReportClick:function(e){var t=u.__rest(e,[]);return Object(M.d)(Wn.a,t)},onBanClick:function(e){return Object(M.d)(qn.b,{targetUser:e.targetUser,broadcasterID:e.broadcasterID,isTemporary:!1,onClose:e.onClose})},onTimeOutClick:function(e){return Object(M.d)(qn.b,{targetUser:e.targetUser,broadcasterID:e.broadcasterID,isTemporary:!0,onClose:e.onClose})},onCloseModal:M.c},e)})(Object(ft.a)($n)),ei=n("EuPq"),ti=n("vVeY"),ni=n("CYfc"),ii=n("MLDe");(Jn||(Jn={})).ClipLink="clip-link";var ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){var e=null;return this.props.clip&&(e=this.shareBalloonContent(this.props.clip)),m.createElement(S.a,null,m.createElement(ae.a,{disabled:!this.props.clip,icon:j.b.Share,type:this.props.buttonType},Object(p.d)("Share","ClipShareBox")),m.createElement(ie.a,{direction:this.props.balloonDirection,size:ie.c.Small},e))},t.prototype.shareBalloonContent=function(e){var t=e.game?{id:e.game.id,boxArtURL:e.game.boxArtURL,name:e.game.name,__typename:"Game"}:null,n=e.curator?{id:e.curator.id,displayName:e.curator.displayName,login:e.curator.login,__typename:"User"}:null,i=e.broadcaster?{id:e.broadcaster.id,displayName:e.broadcaster.displayName,login:e.broadcaster.login,profileImageURL:null,__typename:"User"}:null,a={id:e.id,slug:e.slug,url:e.url,embedURL:"",title:e.title,viewCount:e.viewCount,language:e.language,curator:n,game:t,broadcaster:i,thumbnailURL:"",createdAt:e.createdAt,durationSeconds:e.durationSeconds,champBadge:null,__typename:"Clip"};return m.createElement(R.a,{padding:1},m.createElement(ni.a,{clip:a,pageType:k.PageviewLocation.ClipsWatchPage,asBalloon:!0}),this.renderClipShareInput(e))},t.prototype.renderClipShareInput=function(e){var t=e.broadcaster&&e.broadcaster.login?e.broadcaster.login:"";return m.createElement(R.a,{"data-test-selector":Jn.ClipLink,padding:{top:1}},m.createElement(U.a,null,Object(p.d)("Clip Link","ClipShareBox")),m.createElement(ei.a,{onClick:Object(ii.c)(e.id,e.game&&e.game.name,e.broadcaster?e.broadcaster.id:"",t,k.PageviewLocation.ClipsWatchPage,Object(ti.a)(e.slug,t)),value:Object(ti.a)(e.slug,t)}))},t}(m.Component),ri=h.a.wrap(function(){return Promise.resolve().then(n.bind(null,"QjI3"))},"SubscribeButton"),oi=function(e){return Object(z.h)()&&e.firstPageLoaded?m.createElement(R.a,{display:x.d.Flex,flexWrap:x.f.NoWrap,justifyContent:x.h.Between},m.createElement(R.a,null,m.createElement(Q.a,{channelLogin:e.login,followUIType:Q.b.IconAndText,unfollowUIType:Q.b.IconOnly,balloonDirection:ie.b.TopRight})),m.createElement(R.a,{margin:{left:1}},m.createElement(ri,{channelLogin:e.login,balloonDirection:ie.b.TopRight,subLocation:"channel_page","data-test-selector":"social-buttons-group__subscribe-button"}))):null};oi.displayName="SocialButtonsGroup";var si,li=Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}})(oi),ci=n("u5aL"),di=n("geRD"),ui=n("K29g"),mi=n("4wKg"),pi=n("k0nM"),hi=n("hCFK"),gi=n("XQbB"),fi=n("QZCf"),vi=(n("K+oU"),n("QA0N"));!function(e){e.control="control",e.variant1="variant1",e.variant2="variant2"}(si||(si={}));var bi,ki=function(e,t){var n={content:vi.a.ClipLight,location:vi.d.VideoWatchPage,section_content_id:e,source_vod_id:t};p.p.track(k.SpadeEventType.ItemSectionLoad,n)},Ci=function(e,t,n){var i={content:vi.a.ClipLightSaveAsHighlight,item_index:n===si.variant2?0:1,location:vi.d.VideoWatchPage,section_content_id:e,source_vod_id:t};p.p.track(k.SpadeEventType.ItemSectionClick,i)},yi=function(e,t,n){var i={content:vi.a.ClipLightViewInHighlighter,item_index:n===si.variant1?0:1,location:vi.d.VideoWatchPage,section_content_id:e,source_vod_id:t};p.p.track(k.SpadeEventType.ItemSectionClick,i)},Si=function(){return Object(Ot.d)("Save as Highlight","ChannelClipLightButton")},Ei=function(){return Object(Ot.d)("View in Highlighter","ChannelClipLightButton")},Ni=function(){return Object(Ot.d)("Processing","ChannelClipLightButton")},wi=function(){return Object(Ot.d)("Error","ChannelClipLightButton")},_i=function(){return Object(Ot.d)("Saved","ChannelClipLightButton")},Di={PrimaryButton:"split-light-primary-button",DropdownButton:"split-light-dropdown-button",DropdownContainer:"split-light-dropdown-container",LoadingSpinnerTransition:"split-light-loading-spinner-transition"},Oi=2e3,Ii=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isDropDownOpen:!1,isErrored:!1,isLoading:!1,isSuccessful:!1},n.componentDidMount=function(){var e=n.props.clip;e&&e.video&&ki(e.id,e.video.id)},n.renderPrimaryAction=function(e){var t="variant1"===n.vodDamianAssignment?n.openHighlighterTab:n.openVideoManager,i=ae.d.Default;return n.state.isErrored?i=ae.d.Alert:n.state.isSuccessful&&(i=ae.d.Success),m.createElement(A.a,{flexGrow:1},m.createElement(ae.a,{"data-test-selector":Di.PrimaryButton,type:i,fullWidth:!0,disabled:e,onClick:t},m.createElement(R.a,{display:x.d.Flex,alignItems:x.b.Center,justifyContent:x.h.Start},m.createElement(R.a,{display:n.state.isLoading?x.d.Block:x.d.HideAccessible,margin:{right:.5}},m.createElement(hi.a,{"data-test-selector":Di.LoadingSpinnerTransition,show:n.state.isLoading,type:[hi.c.Fade,hi.c.SlideOverLeft],duration:hi.b.Medium},m.createElement(gi.a,{size:gi.b.Small}))),n.getButtonText())))},n.getButtonText=function(){return n.state.isLoading?Ni():n.state.isErrored?wi():n.state.isSuccessful?_i():"variant1"===n.vodDamianAssignment?Ei():Si()},n.renderDropDown=function(e){var t=n.state.isDropDownOpen,i=!n.state.isLoading&&!n.state.isErrored&&!n.state.isSuccessful,a="variant1"===n.vodDamianAssignment?m.createElement(mi.a,{title:Si(),onClick:n.openVideoManager}):m.createElement(mi.a,{title:Ei(),onClick:n.openHighlighterTab});return m.createElement(A.a,{borderLeft:!0,display:i?x.d.Block:x.d.Hide,position:x.j.Relative,"data-test-selector":Di.DropdownContainer},m.createElement(ci.a,{onClickOut:n.closeDropdown},m.createElement(ae.a,{"data-test-selector":Di.DropdownButton,type:ae.d.Default,disabled:e,icon:j.b.GlyphArrDown,onClick:n.toggleDropDown}),m.createElement(pi.a,{show:t,direction:ie.b.TopRight,elevation:1},a)))},n.openHighlighterTab=function(){var e,t=n.props.clip;if(t&&t.broadcaster&&t.broadcaster.login&&t.video&&null!==t.videoOffsetSeconds){var i=Object(sn.e)(Object(Kn.a)(t.broadcaster.login,t.video.id),((e={})[ui.a.TrackingID]=t.id,e[ui.a.Start]=t.videoOffsetSeconds.toString(),e[ui.a.End]=(t.videoOffsetSeconds+t.durationSeconds).toString(),e[ui.a.Title]=t.title||"Clip: "+t.video.title,e[ui.a.GameName]=t.game&&t.game.displayName||"",e[ui.a.GameID]=t.game&&t.game.id||"",e));yi(t.id,t.video.id,n.vodDamianAssignment||""),window.open(i,"_blank"),n.closeDropdown()}else n.setState({isLoading:!1,isErrored:!0},n.closeDropdown)},n.openVideoManager=function(){return u.__awaiter(n,void 0,void 0,function(){var e,t,n,i,a=this;return u.__generator(this,function(r){switch(r.label){case 0:if(!((e=this.props.clip)&&e.broadcaster&&e.broadcaster.id&&e.video))return[2,null];t={metadata:{creatorID:e.broadcaster.id,description:"",language:e.language||"",tags:[],title:e.title||"",game:e.game&&e.game.id?e.game.id:null,highlightRanges:[{endMs:1e3*((e.videoOffsetSeconds||0)+e.durationSeconds),startMs:1e3*(e.videoOffsetSeconds||0),vodID:e.video.id}]}},Ci(e.id,e.video.id,this.vodDamianAssignment||""),this.setState({isLoading:!0,isSuccessful:!1,isErrored:!1},this.closeDropdown),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.props.createHighlight(Object(di.a)(t))];case 2:if(n=r.sent().data,this.setState({isLoading:!1,isSuccessful:!0}),!(n&&n.createMultiVideoHighlight&&n.createMultiVideoHighlight.highlight&&n.createMultiVideoHighlight.highlight.id))throw new Error("No ID provided after highlight mutation");return[3,5];case 3:return i=r.sent(),p.k.error(i,"Failed to publish a highlight from SplitLightDropdown.",{mutationInput:t}),this.setState({isLoading:!1,isErrored:!0}),[3,5];case 4:return setTimeout(function(){a.setState({isSuccessful:!1,isErrored:!1})},Oi),[7];case 5:return[2]}})})},n.toggleDropDown=function(){n.setState(function(e){return{isDropDownOpen:!e.isDropDownOpen}})},n.closeDropdown=function(){n.setState({isDropDownOpen:!1})},n.vodDamianAssignment=p.q.experiments.getAndTrackAssignment(_.b.VODDamian,{channel:t.channelLogin}),n}return u.__extends(t,e),t.prototype.render=function(){var e=!(!this.props.clip.video||!this.props.clip.video.id),t=this.props.clip.video&&this.props.clip.video.broadcastType===b.q.ARCHIVE,n=this.state.isLoading||!t||!e,i=null;e?t||(i=Object(Ot.d)("You can only highlight past broadcasts","ChannelClipLightButton")):i=Object(Ot.d)("Full video not available","ChannelClipLightButton");var a=m.createElement(A.a,{display:x.d.Flex},m.createElement(A.a,{background:n?P.a.Alt2:P.a.Accent,borderRadius:P.b.Medium,color:P.c.Base,display:x.d.InlineFlex,alignItems:x.b.Center,position:x.j.Relative,flexGrow:0,flexShrink:0},this.renderPrimaryAction(n),this.renderDropDown(n)));return null!==i?m.createElement(Z.a,{label:i},a):a},t}(m.Component),Ti=Object(r.compose)(Object(E.a)(fi,{name:"createHighlight"}))(Ii),Mi=n("j426"),Li=function(e){function t(t){var n=e.call(this,t)||this;return n.renderPrimaryAction=function(){var e=n.props,t=e.clip,i=e.channelLogin,a=e.data,r=t&&t.video,o=!a||a.loading;if(!t||!r||null===n.vodDamianAssignment||o)return null;var s=n.getUserRoles(),l=null!==s&&(s.isBroadcaster||s.isEditor);return"control"!==n.vodDamianAssignment&&l?m.createElement(Ti,{clip:t,channelLogin:i}):m.createElement(jn.a,{tt_medium:k.PageviewMedium.ClipsWatchPage,tt_content:k.PageviewContent.FullVODButton,video:{id:r.id,offsetSeconds:t.videoOffsetSeconds}})},n.getUserRoles=function(){var e=n.props.data;return!e||e.loading||e.error||!e.currentUser?null:{isEditor:e.currentUser.self&&e.currentUser.self.isEditor||!1,isStaffOrSiteAdmin:e.currentUser.roles&&(e.currentUser.roles.isStaff||e.currentUser.roles.isSiteAdmin)||!1,isCurator:e.currentUser.id===n.getCuratorID(),isBroadcaster:e.currentUser.id===n.getBroadcasterID()}},n.getBroadcasterID=function(){var e=n.props.clip;return e&&e.broadcaster&&e.broadcaster.id?e.broadcaster.id:""},n.getCuratorID=function(){var e=n.props.clip;return e&&e.curator&&e.curator.id?e.curator.id:""},n.vodDamianAssignment=p.q.experiments.getAndTrackAssignment(_.b.VODDamian,{channel:t.channelLogin}),n}return u.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.channelLogin,n=e.clip,i=this.props.data&&null!==this.props.data.currentUser?this.getUserRoles():null;return m.createElement(A.a,{background:P.a.Base,elevation:1},m.createElement(A.a,{alignItems:x.b.Center,breakpointMedium:{flexDirection:x.e.Row},display:x.d.Flex,flexWrap:x.f.NoWrap,flexDirection:x.e.Column,justifyContent:x.h.Start},m.createElement(A.a,{flexGrow:1,fullWidth:!0,fullHeight:!0,overflow:x.i.Hidden,padding:{x:2,y:1}},m.createElement(Gn,{clip:n})),m.createElement(A.a,{alignItems:x.b.Center,className:"video-info-bar__action-container",display:x.d.Flex,flexDirection:x.e.Row,flexShrink:0,fullHeight:!0,padding:1},m.createElement(R.a,{display:x.d.Flex,flexGrow:0},this.renderPrimaryAction(),n&&m.createElement(R.a,{display:x.d.Flex,padding:{x:1}},m.createElement(li,{login:n&&n.broadcaster&&n.broadcaster.login}),m.createElement(ai,{clip:n,balloonDirection:ie.b.TopRight,buttonType:ae.d.Hollow})),m.createElement(Zn,{channelLogin:t,clip:n,currentUser:i})))))},t}(m.Component),Fi=Object(i.compose)(Object(E.a)(Mi,{skip:function(e){return null===e.clip}}),Object(Y.withLatencyTracking)("ClipDescription",{autoReportInteractive:!0}))(Li),xi=n("f/23"),ji=(n("a2Ot"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(R.a,{"data-test-selector":"private-video-banner-layout"},this.renderHeader())},t.prototype.renderHeader=function(){var e=this;return m.createElement(be.a,{type:be.f.SlideInBottom,delay:be.b.Medium,duration:be.c.Medium,enabled:!0},m.createElement(A.a,{className:"private-video-banner__header",display:x.d.Flex,background:P.a.AccentAlt2,color:P.c.Overlay,alignItems:x.b.Center,padding:{x:1,y:.5},fontSize:P.d.Size6,"data-test-selector":"private-video-banner-header"},m.createElement(R.a,{display:x.d.Flex,alignItems:x.b.Center,justifyContent:x.h.Center},m.createElement(j.a,{asset:j.b.Lock,width:20,height:20})),m.createElement(U.a,null,Object(p.d)("This video is private. To Premiere or edit your video, visit your <x:link>video manager</x:link>",{"x:link":function(t){return m.createElement(te.a,{"data-test-selector":"private-video-banner-header-link",to:{pathname:"/"+e.props.ownerLogin+"/manager",state:{medium:k.PageviewMedium.VideoWatchPage,content:k.PageviewContent.Video}}},m.createElement(U.a,{type:U.e.Span,color:P.c.OverlayAlt},t))}},"PrivateVideoBanner"))))},t}(m.Component)),Ai=n("cZKs"),Pi=n("GFmA"),Ri=n("HGFl"),Ui=n("0LAi"),Bi=n("RXle"),Vi=n("4HIT"),Hi=n("KOCe");n("grjI");!function(e){e.TITLE="thud-modal.title",e.VOD_CARD="thud-modal.vod-card"}(bi||(bi={}));var Gi=2592e6;function qi(e){return!!e&&Date.now()-Gi<Object(Ri.e)(e).getTime()}var Wi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){var e=this.getOptions(),t=this.props.channel.displayName||this.props.channel.login||"",n=this.props.channel.lastBroadcast&&this.props.channel.lastBroadcast.game;if(!e||!t||!n)return this.props.closeModal(),null;var i={medium:k.PageviewMedium.OfflineChannel,content:k.PageviewContent.RecommendedLive},a=m.createElement(te.a,{linkTo:{pathname:Object(An.b)(n.name),state:i}},n.name);return m.createElement(A.a,{className:"thud-modal",background:P.a.Base,borderRadius:P.b.Large,display:x.d.Flex,flexDirection:x.e.Column},m.createElement(R.a,{"data-test-selector":bi.TITLE,display:x.d.Flex,flexDirection:x.e.Column,flexGrow:1,padding:3},m.createElement(R.a,{display:x.d.Flex,justifyContent:x.h.Center,flexDirection:x.e.Column,flexGrow:2},m.createElement(R.a,{margin:{bottom:1},className:"thud-modal__logo"},m.createElement(Hi.a,{width:30,height:30,padding:1})),m.createElement(R.a,null,m.createElement(U.a,{type:U.e.H2,bold:!0},Object(p.d)("{channelName} isnt streaming right now.",{channelName:t},"ThudModal")),m.createElement(R.a,{margin:{top:.5}},m.createElement(U.a,{fontSize:P.d.Size5},e.one.text))))),m.createElement(A.a,{display:x.d.Flex,flexDirection:x.e.Row,flexShrink:0,background:P.a.Alt2,padding:{x:3,top:3,bottom:2}},m.createElement(R.a,{display:x.d.Flex},e.one.card),m.createElement(R.a,{padding:{left:4,bottom:5},display:x.d.Flex,flexDirection:x.e.Column,justifyContent:x.h.Center,alignItems:x.b.Start},m.createElement(R.a,{padding:{bottom:.5}},m.createElement(U.a,{color:P.c.Alt2,fontSize:P.d.Size6},e.one.cta)),m.createElement(R.a,{padding:{bottom:2}},m.createElement(U.a,{bold:!0,fontSize:P.d.Size4},e.one.game)),m.createElement(ae.a,{linkTo:e.one.linkTo},Object(p.d)("Watch Video","ThudModal")))),m.createElement(R.a,{padding:{x:3,y:2},display:x.d.Flex,flexDirection:x.e.Row},m.createElement(Be.a,{name:n.name,boxArtURL:n.boxArtURL||"",size:tt.b.Size8}),m.createElement(R.a,{fullHeight:!0,display:x.d.Flex,flexDirection:x.e.Column,justifyContent:x.h.Center,padding:{left:1}},m.createElement(U.a,null,Object(p.d)("{channelName} has been streaming {gameName}",{channelName:t,gameName:a},"ThudModal")),m.createElement(R.a,{padding:{top:1}},0!==this.props.thudData.tags.length&&m.createElement(Ui.a,{tags:this.props.thudData.tags,linkTo:Vi.a.PopularTag}),0!==this.props.thudData.categoryTags.length&&m.createElement(Ui.a,{tags:this.props.thudData.categoryTags,linkTo:Vi.a.DirectoryTag})))),m.createElement(Ai.a,{onClose:this.props.onClose,closeOnBackdropClick:!0,closeOnPageNavigation:!0}))},t.prototype.getOptions=function(){var e=this.renderVod();return e?{one:e}:null},t.prototype.renderVod=function(){var e={medium:k.PageviewMedium.OfflineChannel,content:k.PageviewContent.RecommendedVOD,content_index:0},t=null,n=this.props.thudData.offlineHighlight,i=this.props.thudData.offlinePremiere,a=this.props.thudData.offlineArchive;if(n&&qi(n.publishedAt)?t=n:i&&qi(i.publishedAt)?t=i:a&&qi(a.publishedAt)?t=a:n?t=n:i?t=i:a&&(t=a),!t)return null;var r="",o="",s={pathname:"/videos/"+t.id,state:e},l=t&&t.game&&t.game.displayName||"",c=m.createElement(Bi.VideoPreviewCard,{hideGameArt:!0,video:t,context:Pi.b.SingleGameList,tracking:e,hideTags:!0,"data-test-selector":bi.VOD_CARD});switch(t){case n:r=Object(p.d)("Recent Highlight","ThudModal"),o=Object(p.d)("Watch their latest highlight or explore related content.","ThudModal");break;case i:r=Object(p.d)("Recent Premiere","ThudModal"),o=Object(p.d)("Watch their latest premiere or explore related content.","ThudModal");break;case a:r=Object(p.d)("Recent Broadcast","ThudModal"),o=Object(p.d)("Watch their latest broadcast or explore related content.","ThudModal")}return c&&r&&o?{card:c,cta:r,text:o,game:l,linkTo:s}:null},t}(m.Component);var zi=Object(a.connect)(null,function(e){return Object(r.bindActionCreators)({closeModal:M.c},e)})(Wi),Qi=n("lh1U");function Yi(e){return"WATCH__THUD_DISMISSED__"+e}var Ki=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={channelLogin:"",wasEverHosting:!1,wasEverLive:!1},t.onThudModalClosed=function(){p.o.set(Yi(t.props.channelLogin),!0)},t}return u.__extends(t,e),t.getDerivedStateFromProps=function(e,t){var n={};return e.channelLogin!==t.channelLogin&&(n.wasEverHosting=!!e.hostedChannel,n.wasEverLive=e.live,n.channelLogin=e.channelLogin),e.live&&(n.wasEverLive=!0),e.hostedChannel&&(n.wasEverHosting=!0),Object.keys(n).length>0?n:null},t.prototype.render=function(){if(this.showThud()&&this.props.data&&this.props.channel){var e=u.__assign({},function(e){var t=[],n=[];e.user&&(e.user.stream&&e.user.stream.tags&&(n=e.user.stream.tags),e.user.broadcastSettings&&e.user.broadcastSettings.game&&e.user.broadcastSettings.game.categoryTags&&(t=e.user.broadcastSettings.game.categoryTags||[]));return{tags:n,categoryTags:t}}(this.props.data),function(e){var t=null,n=null,i=null;e.user&&e.user.offlineHighlight&&e.user.offlineHighlight.edges&&e.user.offlineHighlight.edges.length&&(t=e.user.offlineHighlight.edges[0]?e.user.offlineHighlight.edges[0].node:null);e.user&&e.user.offlinePremiere&&e.user.offlinePremiere.edges&&e.user.offlinePremiere.edges.length&&(n=e.user.offlinePremiere.edges[0]?e.user.offlinePremiere.edges[0].node:null);e.user&&e.user.offlineArchive&&e.user.offlineArchive.edges&&e.user.offlineArchive.edges.length&&(i=e.user.offlineArchive.edges[0]?e.user.offlineArchive.edges[0].node:null);return{offlineHighlight:t,offlinePremiere:n,offlineArchive:i}}(this.props.data));this.props.showThudModal({channel:this.props.channel,thudData:e,onClose:this.onThudModalClosed})}return null},t.prototype.showThud=function(){var e=p.o.get(Yi(this.props.channelLogin),!1),t=this.props.channel&&this.props.channel.id;return Object(z.f)()&&!Object(z.d)(this.props.channelLogin)&&!e&&this.props.data&&!this.props.data.loading&&!this.state.wasEverHosting&&!this.state.wasEverLive&&!this.props.contextLoading&&this.props.currentUserId!==t&&this.props.page===X.c.About&&this.props.contentType===Ee.a.LIVE&&this.props.playerOffline},t}(m.PureComponent);var Xi=Object(r.compose)(Object(a.connect)(function(e){var t=Object(l.e)(e);return{currentUserId:t&&t.id}},function(e){return Object(r.bindActionCreators)({showThudModal:function(e){var t=u.__rest(e,[]);return Object(M.d)(zi,t)}},e)}),Object(Se.b)(function(e){return{channel:e.channel,channelLogin:e.channelLogin,contentType:e.contentType,hostedChannel:e.hostedChannel,live:e.live,page:e.page,contextLoading:e.loading}}),Object(E.a)(Qi,{options:function(e){return{variables:{currentChannelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}}))(Ki),$i=n("yVY3"),Ji=n("5Ijs"),Zi=n("MXoD");function ea(e){return"curator"in e}function ta(){return Object(Ot.d)("Highlight","VideoOptions")}var na=n("OTul"),ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props.trackingContext;p.p.trackItemSectionLoad({carousel_content:e.carouselContent,location:e.location,section_type:e.sectionType,item_type:e.itemType})},t.prototype.render=function(){var e=this.props,t=e.trackingContext,n=e.channelLogin,i=e.videoID;return m.createElement(ae.a,{type:ae.d.Hollow,icon:j.b.Highlighter,linkTo:Object(Zi.a)(t,Object(na.g)(n,i)),targetBlank:!0},ta())},t}(m.Component),aa="variant1";function ra(){return p.q.experiments.getAndTrackAssignment(_.b.VODHighGround)===aa}var oa=n("6x+I"),sa={skipHtml:!0,softBreak:"br",allowedTypes:["Emph","Strong","Paragraph","Heading","Item","List","Text","Link","Softbreak","Hardbreak"]};var la,ca=n("CGUg");!function(e){e.MoreInfoBox="more-info-box",e.ToggleExpandButton="toggle-expand-button",e.DescriptionContainer="description-container"}(la||(la={}));var da,ua=function(e){try{return!Object(sn.b)(new URL(e))}catch(e){return!0}},ma=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isExpanded:!1},t.renderDescription=function(){if(t.props.description&&t.state.isExpanded){var e,n=((e=t.props.description)?e.split(/ {2}\n|\n(?!\d+\.)(?!\*|- )|^\n/gm):[]).map(function(e,n){if(0===e.length)return m.createElement("br",{key:"desc-line"+n});var i={Link:t.renderMarkdownProtectedLink};return m.createElement(R.a,{padding:{x:2},key:"desc-line"+n},m.createElement(oa,u.__assign({source:e,renderers:i},sa)))});return m.createElement(ca.a,{"data-test-selector":la.DescriptionContainer},n)}},t.toggleExpand=function(){t.setState(function(e){return{isExpanded:!e.isExpanded}})},t}return u.__extends(t,e),t.prototype.render=function(){return this.props.description?m.createElement(A.a,{background:P.a.Base,"data-test-selector":la.MoreInfoBox},this.renderDescription(),m.createElement(A.a,{display:x.d.Flex,padding:{x:2,bottom:1}},m.createElement(te.a,{"data-test-selector":la.ToggleExpandButton,type:te.b.Default,onClick:this.toggleExpand},this.state.isExpanded?Object(Ot.d)("Show Less","ChannelRootMoreInfoBox"):Object(Ot.d)("Show More","ChannelRootMoreInfoBox")))):null},t.prototype.renderMarkdownProtectedLink=function(e){return m.createElement(te.a,{linkTo:e.href,rel:ua(e.href)?"nofollow noreferrer noopener":void 0},e.children)},t}(m.Component),pa=Object(r.compose)(Object(Y.withLatencyTracking)("MoreInfoBox",{autoReportInteractive:!0}))(ma),ha=n("SHn+"),ga=n("imSJ");!function(e){e[e.ClipCurator=0]="ClipCurator",e[e.ClipCuratorDot=1]="ClipCuratorDot",e[e.ClipCuratorName=2]="ClipCuratorName"}(da||(da={}));var fa,va=function(e){var t=e.login,n=e.includesSeparator,i=Object(p.d)("Clipped by {curator}",{curator:m.createElement(te.a,{to:{pathname:"/"+t,state:{medium:k.PageviewMedium.ClipsWatchPage,content:k.PageviewContent.ClipCuratorName}}},t)},"ChannelVideoClipCurator"),a=null;if(n){a=m.createElement(R.a,{"data-test-selector":da.ClipCuratorDot,margin:{right:1}},m.createElement(U.a,{fontSize:P.d.Size5,type:U.e.Span},""))}return m.createElement(R.a,{display:x.d.Flex},a,m.createElement(U.a,{fontSize:P.d.Size5,type:U.e.Span,"data-test-selector":da.ClipCurator},i))},ba=n("fPaz");!function(e){e[e.GameImagePlaceholder=0]="GameImagePlaceholder"}(fa||(fa={}));var ka,Ca=function(e){var t=e.boxArtURL,n=e.name;return n?m.createElement(te.a,{to:Object(An.b)(n),"data-a-target":"video-info-game-boxart-link"},m.createElement(tt.a,{src:t||p.a.defaultBoxArtURL,alt:n,aspect:ba.c.BoxArt,size:tt.b.Size4})):m.createElement(ne.a,{"data-test-selector":fa.GameImagePlaceholder,height:55,width:40})};(ka||(ka={})).Title="title";var ya,Sa=/\S/,Ea=function(e){var t=e.title,n=e.dateString,i=t&&""!==t&&Sa.test(t),a=i&&t?t:"",r="";return n&&(r=Object(p.i)(new Date(n))),r&&(a=i?a+"  "+r:r),m.createElement(A.a,{margin:{bottom:.5}},m.createElement(U.a,{ellipsis:!0,title:a,fontSize:P.d.Size4,"data-test-selector":ka.Title},a))},Na=n("wp5a");n("GEha");!function(e){e[e.InfoPlaceholder=0]="InfoPlaceholder"}(ya||(ya={}));var wa=Object(Y.withLatencyTracking)("VideoInfo",{autoReportInteractive:!0})(function(e){var t=e.video;if(null===t)return m.createElement(Bn.a,{row:!0},m.createElement(R.a,{className:"video-info__container"},m.createElement(R.a,{"data-test-selector":ya.InfoPlaceholder,display:x.d.Flex,flexDirection:x.e.Column},m.createElement(ne.a,{lineCount:1,width:320}),m.createElement(ne.a,{lineCount:1,width:240}))));var n=null,i=null;if(t.game&&(n=m.createElement(R.a,{flexShrink:0,margin:{right:1}},m.createElement(Ca,{boxArtURL:t.game.boxArtURL,name:t.game.name})),i=m.createElement(ha.a,{linkTo:{pathname:Object(An.b)(t.game.name),state:{content:k.PageviewContent.Game,medium:k.PageviewMedium.VideoWatchPage}},label:Object(ga.a)(),title:t.game.name,"data-a-target":"video-info-game-link"})),!ea(t)){var a=null;return t.scope===b.ub.PRIVATE&&(a=m.createElement(A.a,{fontSize:P.d.Size4},m.createElement(Na.a,{label:Object(p.d)("Private","ChannelVideoInfo")}))),m.createElement(Bn.a,{row:!0},n,m.createElement(R.a,{className:"video-info__container"},a,m.createElement(Ea,{dateString:t.publishedAt,title:t.title}),m.createElement(R.a,{display:x.d.InlineFlex},i)))}if(ea(t)){var r=t.curator?t.curator.login:"",o=null;if(r){var s=!(!t||!t.game);o=m.createElement(va,{login:r,includesSeparator:s})}return m.createElement(Bn.a,{row:!0},n,m.createElement(R.a,{className:"video-info__container"},m.createElement(Ea,{dateString:t.createdAt,title:t.title}),m.createElement(R.a,{display:x.d.InlineFlex},i,o)))}return null}),_a=n("b6Yk");function Da(e,t){var n=this;return function(){return u.__awaiter(n,void 0,void 0,function(){var n,i;return u.__generator(this,function(a){switch(a.label){case 0:return n="kraken/videos/"+e,[4,_a.a.delete(n)];case 1:if(200!==(i=a.sent()).status){if(i&&i.error)throw new Error(JSON.stringify(i.error));if(i&&i.requestError)throw i.requestError;throw new Error("Could not delete video. Request returned "+i.status)}return Ot.r.history.push(Object(An.d)(t)),[2]}})})}}var Oa=n("hyVY"),Ia=(n("1yLn"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={requestInProgress:!1,errorMessage:""},t.onClickCancel=function(){return t.props.onClose()},t.onClickDelete=function(){t.setState({errorMessage:"",requestInProgress:!0},function(){return u.__awaiter(t,void 0,void 0,function(){var e;return u.__generator(this,function(t){switch(t.label){case 0:if(!this.props.video.owner||!this.props.video.owner.login)return this.setState({errorMessage:Object(Ot.d)("This video is temporarily unable to be deleted.","VideoDeleteModal"),requestInProgress:!1}),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.props.onDeleteRequest(this.props.video.id,this.props.video.owner.login)];case 2:return t.sent(),this.props.onClose(),[3,4];case 3:return(e=t.sent())&&e.status&&401===e.status?(this.setState({errorMessage:Object(Ot.d)("You are not authorized to delete this video.","VideoDeleteModal"),requestInProgress:!1}),[2]):(this.setState({errorMessage:Object(Ot.d)("Unexpected error, please try again.","VideoDeleteModal"),requestInProgress:!1}),Ot.l.withCategory("video delete modal").error(e,"Attempted to delete video."),[3,4]);case 4:return[2]}})})})},t}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(A.a,{background:P.a.Base,"data-test-selector":"qa-video-delete-modal",className:"video-delete-modal",padding:3},m.createElement(R.a,null,m.createElement(R.a,{margin:{bottom:1}},m.createElement(U.a,{type:U.e.H4},Object(Ot.d)("Delete Video","VideoDeleteModal"))),this.renderErrorMessage(),m.createElement(U.a,{type:U.e.P,color:P.c.Alt2},Object(Ot.d)("Are you sure you want to delete this video?","VideoDeleteModal"),m.createElement("br",null),Object(Ot.d)("This action cannot be undone.","VideoDeleteModal"))),m.createElement(A.a,{padding:{y:2},margin:{y:2},borderTop:!0,borderBottom:!0},m.createElement(Bn.a,{row:!0},m.createElement("img",{alt:this.props.video.title||Object(Ot.d)("Video Thumbnail","VideoDeleteModal"),src:this.props.video.previewThumbnailURL,className:"video-delete-modal__thumb"}),m.createElement(Vn.a,{overflow:x.i.Hidden},m.createElement(R.a,{margin:{left:1}},m.createElement(R.a,{ellipsis:!0},this.props.video.title),m.createElement(A.a,{ellipsis:!0,color:P.c.Alt2},Object(Ot.d)("{created, date, medium}",{created:new Date(this.props.video.publishedAt)},"VideoDeleteModal")," "," ",Object(Oa.b)(this.props.video.lengthSeconds)),m.createElement(A.a,{ellipsis:!0,color:P.c.Alt2},Object(Ot.d)("{viewCount, plural, one {# View} other {# Views}}",{viewCount:this.props.video.viewCount},"VideoDeleteModal")))))),m.createElement(R.a,{display:x.d.Flex,justifyContent:x.h.Center},m.createElement(R.a,{display:x.d.InlineBlock,margin:{x:1}},m.createElement(ae.a,{type:ae.d.Text,onClick:this.onClickCancel,"data-test-selector":"qa-video-delete-modal-cancel-button"},Object(Ot.d)("Cancel","VideoDeleteModal"))),m.createElement(R.a,{display:x.d.InlineBlock,margin:{x:1}},m.createElement(ae.a,{type:ae.d.Alert,onClick:this.onClickDelete,disabled:this.state.requestInProgress,"data-test-selector":"qa-video-delete-modal-delete-button"},Object(Ot.d)("Delete","VideoDeleteModal")))),m.createElement(Ai.a,{closeOnBackdropClick:!0}))},t.prototype.renderErrorMessage=function(){return this.state.errorMessage?m.createElement(A.a,{className:"video-delete-modal__error-container",fullWidth:!0,"data-test-selector":"qa-video-delete-modal-error-container",margin:{bottom:1},padding:1},m.createElement(U.a,{color:P.c.Error},this.state.errorMessage)):null},t}(m.Component));var Ta,Ma=Object(a.connect)(null,function(e){return Object(r.bindActionCreators)({onClose:M.c,onDeleteRequest:Da},e)})(Ia),La=n("DfWg");!function(e){e.VideoOptionsButtonSelector="video-options-button",e.VideoOptionsContainerSelector="video-options-container",e.ReportButtonSelector="video-report-button",e.HighlightButtonSelector="video-highlight-button",e.EditButtonSelector="video-edit-button",e.DeleteButtonSelector="video-delete-button"}(Ta||(Ta={}));var Fa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportModalClose=function(e){(e===Qn.b.MutationError||e===Qn.b.Success)&&t.props.history.push("/")},t}return u.__extends(t,e),t.prototype.render=function(){return m.createElement(S.a,null,m.createElement(ee.a,{"data-test-selector":Ta.VideoOptionsButtonSelector,type:ee.c.Hollow,icon:j.b.More,ariaLabel:Object(Ot.d)("Video Options","VideoOptions"),disabled:!this.props.video}),this.props.video?m.createElement(ie.a,{direction:ie.b.TopRight},m.createElement(A.a,{padding:{y:1},color:P.c.Link},m.createElement("ul",{"data-test-selector":Ta.VideoOptionsContainerSelector},this.renderReportOption(this.props.video,this.props.currentUser),this.renderHighlightOption(this.props.video,this.props.currentUser),this.renderEditOption(this.props.video,this.props.currentUser),this.renderDeleteOption(this.props.video,this.props.currentUser)))):m.createElement(ie.a,null))},t.prototype.renderDeleteOption=function(e,t){var n=this;if(this.isVODOwner(e,t)||this.isEditor()){var i={type:$.b.Alert,onClick:function(){n.props.onShowDeleteVideoModal({video:e})}};return m.createElement(Yn,{key:"delete-option",interactableProps:i,testSelector:Ta.DeleteButtonSelector},Object(Ot.d)("Delete","VideoOptions"))}},t.prototype.renderReportOption=function(e,t){var n=this;if(!this.isVODOwner(e,t)){var i={onClick:function(){if(t){var i=void 0;i=e.owner&&e.owner.displayName?Object(Ot.d)("Report {ownerDisplayName}",{ownerDisplayName:e.owner.displayName},"ReportVideoModal"):Object(Ot.d)("Report this video","ReportVideoModal"),n.props.onShowReportUserModal({onClose:n.handleReportModalClose,reportContext:{contentType:b.Pa.VOD_REPORT,contentID:e.id,targetUserID:e.owner&&e.owner.id?e.owner.id:"",extra:n.getVideoReportExtraField()},title:i})}else n.props.onShowLogin()}};return m.createElement(Yn,{key:"report-option",interactableProps:i,testSelector:Ta.ReportButtonSelector},Object(Ot.d)("Report","VideoOptions"))}},t.prototype.renderHighlightOption=function(e,t){if(e.owner&&e.owner.login&&(this.isVODOwner(e,t)||this.isEditor())){var n={medium:k.PageviewMedium.ChannelVideos,content:k.PageviewContent.ChannelInfoBarOverflowBalloon};return e.broadcastType===b.q.ARCHIVE&&!ra()&&m.createElement(Yn,{key:"highlight-option",interactableProps:{linkTo:Object(Zi.a)(n,Object(na.g)(e.owner.login,e.id))},testSelector:Ta.HighlightButtonSelector},ta())}},t.prototype.renderEditOption=function(e,t){if(e.owner&&e.owner.login&&(this.isVODOwner(e,t)||this.isEditor()))return ra()&&m.createElement(Yn,{key:"edit-option",interactableProps:{linkTo:Object(Kn.c)(e.owner.login,e.id)},testSelector:Ta.EditButtonSelector},Object(Ot.d)("Edit","VideoOptions"))},t.prototype.isVODOwner=function(e,t){return t&&e.owner&&t.id===e.owner.id},t.prototype.isEditor=function(){return!(!this.props.data||this.props.data.loading||this.props.data.error||!this.props.data.user||!this.props.data.user.self)&&this.props.data.user.self.isEditor},t.prototype.getVideoReportExtraField=function(){var e=Object(kt.o)(this.props),t=0;this.props.getCurrentVideoTime?t=this.props.getCurrentVideoTime():this.props.lastVideoOffset&&(t=this.props.lastVideoOffset);var n={timestamp:Object(Oa.b)(t,{zeroPadAll:!0})};return e&&(n.collection=e),JSON.stringify(n)},t}(m.Component),xa=Object(i.compose)(Object(E.a)(La,{options:function(e){return{variables:{contentOwnerID:e.video.owner.id}}},skip:function(e){return null===e.currentUser||null===e.video||null===e.video.owner}}),Object(Y.withLatencyTracking)("VideoOptions",{autoReportInteractive:!0}))(Fa);var ja,Aa=Object(a.connect)(null,function(e){return Object(r.bindActionCreators)({onShowLogin:function(){return Object(s.e)(o.a.VODOptions)},onShowDeleteVideoModal:function(e){var t=u.__rest(e,[]);return Object(M.d)(Ma,t)},onShowReportUserModal:function(e){var t=u.__rest(e,[]);return Object(M.d)(Wn.a,t)}},e)})(Object(ft.a)(xa));n("GXBl");!function(e){e[e.VideoDescription=0]="VideoDescription",e[e.TotalViews=1]="TotalViews"}(ja||(ja={}));var Pa,Ra=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.render=function(){var e=null,t=null;if(this.props.video){var n=this.props.video,i=n.description,a=n.viewCount;i&&(e=m.createElement(A.a,{"data-test-selector":ja.VideoDescription},m.createElement(pa,{description:i}))),t=m.createElement(A.a,{alignItems:x.b.Center,"data-test-selector":ja.TotalViews,display:x.d.Flex,color:P.c.Alt2,flexGrow:1,fontSize:P.d.Size5},m.createElement(et.a,{value:Object(p.f)(a||0),label:Object(p.d)("Total Views","VideoDescription"),icon:j.b.GlyphViews}))}return m.createElement(A.a,{background:P.a.Base,elevation:1},m.createElement(A.a,{alignItems:x.b.Center,breakpointMedium:{flexDirection:x.e.Row},display:x.d.Flex,flexWrap:x.f.NoWrap,flexDirection:x.e.Column,justifyContent:x.h.Start},m.createElement(A.a,{className:"video-description__info-container",flexGrow:1,fullWidth:!0,fullHeight:!0,padding:{x:1,y:1}},m.createElement(wa,{video:this.props.video})),m.createElement(A.a,{alignItems:x.b.Center,display:x.d.Flex,flexDirection:x.e.Row,flexShrink:0,fullHeight:!0,padding:1},m.createElement(R.a,{display:x.d.Flex,flexGrow:0},t,m.createElement(R.a,{display:x.d.Flex,padding:{x:1}},m.createElement(R.a,{margin:{right:1}},m.createElement(li,{login:this.props.video&&this.props.video.owner&&this.props.video.owner.login})),this.renderTrackedHighlightButton(),m.createElement(Ji.a,{balloonDirection:ie.b.TopRight,buttonType:ae.d.Hollow,content:{collectionID:this.props.collectionID||void 0,videoID:this.props.video?this.props.video.id:void 0},getCurrentVideoTime:this.props.getLastVideoOffset,tracking:{location:k.PageviewLocation.VideoWatchPage}})),m.createElement(Aa,{currentUser:this.props.currentUser,video:this.props.video,getCurrentVideoTime:this.props.getLastVideoOffset})))),e)},t.prototype.renderTrackedHighlightButton=function(){var e=this;return this.props.video&&this.props.video.owner&&this.props.video.owner.login&&this.props.video.broadcastType===b.q.ARCHIVE&&ra()&&m.createElement(R.a,{margin:{right:1}},m.createElement(en.a,{ownerLogin:this.props.video.owner.login,permittedRoles:{owner:!0,editor:!0,staff:!1}},function(t){return t.permitted&&e.props.video&&e.props.video.owner&&e.props.video.owner.login&&m.createElement(ia,{channelLogin:e.props.video.owner.login,videoID:e.props.video.id,trackingContext:{carouselContent:k.PageviewContent.Video,location:k.PageviewLocation.VideoWatchPage,medium:k.PageviewMedium.ChannelVideos,content:k.PageviewContent.ChannelInfoBar,sectionType:$i.b.ChannelInfoBar,itemType:$i.a.HighlightButton}})}))},t}(m.Component),Ua=Object(Y.withLatencyTracking)("VideoDescription",{autoReportInteractive:!0})(Ra),Ba=n("x7UT"),Va=n("0Log"),Ha=n("/aPz"),Ga=n("J6gT"),qa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkIfVodcast=function(e){switch(e){case f.a.WatchParty:case f.a.Premiere:case f.a.Rerun:return!0;default:return!1}},t.getVODPath=function(e){return"videos/"+encodeURIComponent(e)},t}return u.__extends(t,e),t.prototype.componentDidUpdate=function(){this.props.data.user&&this.props.latencyTracking.reportInteractive()},t.prototype.componentDidMount=function(){this.props.data.user&&this.props.latencyTracking.reportInteractive()},t.prototype.componentWillUnmount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(void 0===this.props.data||void 0===this.props.data.user)return null;var e=this.props.data.user;if(!e||!e.stream||null===e.stream.type)return null;if(!this.checkIfVodcast(e.stream.type))return null;var t=null,n=null,i="",a="";this.props.pubsub&&this.props.pubsub.messages&&this.props.pubsub.messages.vodcast&&(i=this.props.pubsub.messages.vodcast.vod.vod_id,a=this.props.pubsub.messages.vodcast.vod.title);var r=e.displayName||"";return e.stream.type===f.a.Rerun?(t=m.createElement(j.a,{asset:j.b.VideoRerun,height:16,width:16}),n=i&&a?Object(p.d)("Rerun of video from {channelName}: {videoLink}",{channelName:r,videoLink:m.createElement(te.a,{to:{pathname:this.getVODPath(i),state:{location:k.PageviewLocation.Channel,medium:k.PageviewMedium.Channel}}},m.createElement(U.a,{type:U.e.Span,color:P.c.OverlayAlt},a))},"ChannelVodcastTopbar"):Object(p.d)("Rerun of video from {channelName}",{channelName:r},"ChannelVodcastTopbar")):e.stream.type===f.a.Premiere&&(t=m.createElement(j.a,{asset:j.b.VideoPremiere,type:j.c.Live,height:16,width:16}),n=Object(p.d)("Premiere of video from {channelName}",{channelName:r},"ChannelVodcastTopbar")),m.createElement(A.a,{background:P.a.AccentAlt2,color:P.c.Overlay,padding:1,alignItems:x.b.Center,display:x.d.Flex,flexWrap:x.f.NoWrap,overflow:x.i.Hidden},t,m.createElement(R.a,{display:x.d.Inline,padding:{left:.5},ellipsis:!0},m.createElement(U.a,{fontSize:P.d.Size5,ellipsis:!0,"data-test-selector":"channel-vodcast-topbar",title:a},n)))},t=u.__decorate([Object(E.a)(Ga,{options:function(e){return{pollInterval:12e4,fetchPolicy:"network",variables:{channelLogin:e.channelLogin}}}}),Object(Ba.a)([{skip:function(e){return e.data.loading||!e.data.user||!e.data.user.id},topic:function(e){return e.data.user&&e.data.user.id?Object(Ha.L)(e.data.user.id):""},mapMessageTypesToProps:(Pa={},Pa[Va.PubsubMessageType.Vodcast]="vodcast",Pa)}]),Object(Y.withLatencyTracking)("ChannelVodcastTopbar")],t)}(m.Component),Wa=(n("H4/V"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isRendered:!1,isClosed:!1},t.onClickClose=function(){t.setState({isClosed:!0})},t}return u.__extends(t,e),t.prototype.componentDidMount=function(){this.checkForCompanion(this.props)},t.prototype.componentWillReceiveProps=function(e){this.checkForCompanion(e)},t.prototype.renderIframe=function(){return this.state.bufferedCompanion?m.createElement("iframe",{className:"companion-ad-div",srcDoc:this.state.bufferedCompanion.content,height:this.state.bufferedCompanion.height,width:this.state.bufferedCompanion.width,sandbox:"allow-forms allow-same-origin allow-scripts allow-popups",allowTransparency:!0,scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0}):null},t.prototype.render=function(){return m.createElement(R.a,{flexGrow:0,flexShrink:0,alignItems:x.b.Center,className:"companion-ad",display:this.state.isClosed||!this.state.isRendered?x.d.Hide:x.d.Flex,flexWrap:x.f.Wrap,fullWidth:!0,justifyContent:x.h.Center,padding:{top:2,bottom:1},"data-test-selector":"companion-ad"},this.renderIframe(),m.createElement(R.a,{padding:{top:1,left:2},fullWidth:!0},m.createElement("button",{onClick:this.onClickClose,className:"companion-ad__close","data-test-selector":"companion-ad-close"},m.createElement(R.a,{display:x.d.Flex,flexDirection:x.e.Row,alignItems:x.b.Center},m.createElement(R.a,{margin:{right:.5},display:x.d.Flex},m.createElement(j.a,{asset:j.b.Close})),m.createElement(U.a,{transform:U.d.Uppercase},Object(p.d)("Close Ad","CompanionAd"))))))},t.prototype.checkForCompanion=function(e){var t=e.bufferedCompanion,n=e.onCompanionAdConsumed;if(t&&n){var i=!t.isEmpty,a=!!t.isEmpty;this.setState({isRendered:i,isClosed:a,bufferedCompanion:t}),n()}},t}(m.Component)),za=n("2aBk"),Qa=(n("BRlh"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u.__extends(t,e),t.prototype.componentDidMount=function(){za.b&&za.b.destroyPlayer()},t.prototype.render=function(){var e=C("channel-page__video-player",{"channel-page__video-player--theatre-mode":this.props.theatreModeEnabled||!1});return m.createElement(R.a,{className:e,display:x.d.Flex,alignItems:x.b.Center,justifyContent:x.h.Center,flexWrap:x.f.NoWrap,fullHeight:this.props.theatreModeEnabled,fullWidth:this.props.rightColumnExpanded,position:this.props.theatreModeEnabled?x.j.Fixed:x.j.Relative},m.createElement(ba.b,{ratio:ba.c.Aspect16x9},m.createElement(R.a,{className:"require-login-video-player__player",display:x.d.Flex,flexDirection:x.e.Column,alignItems:x.b.Center,justifyContent:x.h.Center,fullHeight:!0,fullWidth:!0},this.renderLiveIndicator())),m.createElement(R.a,{className:"require-login-video-player__content",textAlign:x.k.Center,position:x.j.Absolute},m.createElement(Bn.a,{background:P.a.Base,borderRadius:P.b.Large,elevation:3,border:!0},m.createElement(R.a,{padding:2},this.props.title&&m.createElement(m.Fragment,null,m.createElement(R.a,{margin:{top:2}},m.createElement(U.a,{fontSize:P.d.Size4,bold:!0,lines:2,ellipsis:!0},this.props.title))),m.createElement(R.a,{margin:{top:2}},m.createElement(U.a,{fontSize:P.d.Size5},Object(p.d)("You need a Twitch Account to watch this stream.","NflRequireLoginPlayer"))),m.createElement(R.a,{margin:{top:2}},m.createElement(ae.a,{onClick:this.props.signup},m.createElement(R.a,{padding:{x:2}},Object(p.d)("Create a Free Account","NflRequireLoginPlayer")))),m.createElement(R.a,{margin:{top:1}},m.createElement(ae.a,{type:ae.d.Text,onClick:this.props.login},m.createElement(R.a,{padding:{x:2}},Object(p.d)("Log In","NflRequireLoginPlayer"))))))))},t.prototype.renderLiveIndicator=function(){if(void 0===this.props.live)return null;var e=null;this.props.live&&(e=m.createElement(R.a,{margin:{right:.5}},m.createElement(J.a,{status:J.c.Live,size:J.b.Medium,pulse:!0})));var t=this.props.live?Object(p.d)("LIVE","NflRequireLoginPlayer"):Object(p.d)("OFFLINE","NflRequireLoginPlayer");return m.createElement(m.Fragment,null,e,m.createElement(U.a,{color:P.c.Overlay,fontSize:P.d.Size5},t))},t}(m.PureComponent));var Ya=Object(a.connect)(function(e){return{rightColumnExpanded:e.ui.rightColumnExpanded,theatreModeEnabled:e.ui.theatreModeEnabled}},function(e){return Object(r.bindActionCreators)({login:function(){return Object(s.e)(o.a.NflRequireLoginPlayer)},signup:function(){return Object(s.g)(o.a.NflRequireLoginPlayer)}},e)})(Qa),Ka=null;var Xa,$a=n("O25N"),Ja=n("bRMw"),Za=h.a.wrap(function(){return n.e(146).then(n.bind(null,"nKq/"))},"ChannelCollaborationBanner"),er=h.a.wrap(function(){return n.e(145).then(n.bind(null,"5k+0"))},"MultiviewBanner"),tr=h.a.wrap(function(){return n.e(144).then(n.bind(null,"/G4D"))},"MultiviewInfoBalloon"),nr=h.a.wrap(function(){return n.e(143).then(n.bind(null,"xjUR"))},"NonLiveVideoBanner");!function(e){e.CollaborationBanner="channel_root_collaboration_banner",e.MultiviewBanner="channel_page_multiview_banner",e.MultiviewInfoBalloon="channel_root_multiview_info_balloon",e.NonLiveVideoBanner="channel_root_non_live_video_banner"}(Xa||(Xa={}));var ir=0,ar=1,rr=function(e){function t(t){var n=e.call(this,t)||this;return n.currentWatchingActivity={userID:null,isWatching:!1},n.playSessionId=null,n.isLivenessSwitcharooExperiment=Object(z.e)(),n.lastVideoOffset=Mn.a,n.loggedOutChannelPageAssignment=Object(z.c)(),n.renderHeader=function(){return m.createElement(ye,{contextLoading:n.props.loading,currentUser:n.props.currentUser,channel:n.props.channel,channelLogin:n.props.channelLogin,page:n.props.page,live:n.props.live,hostedChannel:n.props.hostedChannel})},n.renderSideNav=function(){return m.createElement(Me.a,{channelLogin:n.props.channelLogin})},n.renderRightColumn=function(){var e=n.props.contentType===Ee.a.LIVE;return n.renderChat(e,n.props.video)},n.renderVideoPlayer=function(){if(n.props.contentType===Ee.a.LIVE&&n.props.page!==X.c.About||n.props.contentType===Ee.a.VIDEO&&n.props.page!==X.c.Videos||n.props.contentType===Ee.a.CLIP&&n.props.page!==X.c.Clips||n.props.contentType===Ee.a.COLLECTION&&n.props.page!==X.c.Videos)return null;var e=n.props.channelLogin,t=n.props.channel,i=n.props.collectionID,a=n.props.clipSlug,r=n.props.videoID,o=!r&&!i&&!a,s=n.props.video,l=Object(De.b)(t),c=Object(Ja.b)(e)&&o&&n.props.firstPageLoaded&&!n.channelIsHosting()&&l.length>0,d=Object(Mn.d)(t)===f.a.Live,h=!!(t&&t.self&&t.self.subscriptionBenefit),g=h&&!n.state.multiviewFTUEDone;if(o&&function(e){return Ka||(Ka={},p.b.get("nfl_channels",[]).forEach(function(e){Ka&&(Ka[e]=!0)})),Ka.hasOwnProperty(e.toLowerCase())}(e)&&!n.props.isLoggedIn){var v=void 0;if(t&&t.login===n.props.channelLogin&&(v=t.broadcastSettings&&t.broadcastSettings.game?t.broadcastSettings.game.id:null),void 0===v)return m.createElement(ct.a,null);if(function(e){return!!e&&e===p.b.get("nfl_game_id","")}(v))return m.createElement(Ya,{channelLogin:e,live:n.props.live,title:Object(Mn.f)(n.props.channel)})}var k={};o?(k.channelLogin=n.props.videoPlayerSource,k.hostChannel=n.channelIsHosting()?n.props.match.params.channelLogin:void 0,k.showChannelInfoOnHover=!1,c&&(k.multiviewOptions={buttonText:Object(p.d)("Enter Command Center","ChannelRootPlayerUI"),parentChannelLogin:n.props.match.params.channelLogin,isFTUE:g},k.onEnterMultiview=n.onEnterMultiview)):(n.state.requestedVideoOffset!==Mn.a&&(k.nextVideoOffset=n.state.requestedVideoOffset),i&&(k.collectionID=i),r&&(k.vodID=r),a&&(k.clipSlug=a,k.playerTypeOverride=xe.a.ClipsWatchPage));var C=!n.props.live&&!n.channelIsHosting()&&!s||!!a,y=null;o&&n.props.firstPageLoaded&&!n.channelIsHosting()&&t&&t.id&&(y=m.createElement(Za,{channelID:t.id,channelLogin:e,channelDisplayName:t.displayName,triggerPlayerReposition:n.triggerPlayerReposition,"data-test-selector":Xa.CollaborationBanner}));var S=null;c&&t&&t.id&&d&&(S=m.createElement(er,{channelID:t.id,channelLogin:e,chanlets:l,triggerPlayerReposition:n.triggerPlayerReposition,hasInsiderPass:h,"data-test-selector":Xa.MultiviewBanner}));var E=null;c&&g&&(E=m.createElement(tr,{channelLogin:e,"data-test-selector":Xa.MultiviewInfoBalloon}));var N=null;s&&s.scope===b.ub.PRIVATE&&s.owner&&s.owner.login&&(N=m.createElement(ji,{ownerLogin:e}));var w=o&&!n.channelIsHosting()&&(Object(Mn.c)(t)||n.props.firstPageLoaded)&&m.createElement(qa,{channelLogin:e}),_=null;return n.props.loading||!n.props.firstPageLoaded||!n.isLivenessSwitcharooExperiment||Object(xi.b)(e)||o||(_=m.createElement(nr,{"data-test-selector":Xa.NonLiveVideoBanner})),m.createElement(m.Fragment,null,m.createElement(R.a,{className:"channel-root__player-container",padding:{bottom:2}},y,S,N,w,m.createElement(je.a,{triggerPlayerReposition:n.triggerPlayerReposition},m.createElement(ct.a,null,m.createElement(Ie.a,{repositionPlayerRef:n.setRepositionPlayer,playerProps:u.__assign({onCompanionAdBuffered:n.onCompanionAdBuffered,onStreamStatusChange:n.onStreamStatusChange,onNavigationRequest:n.onPlayerNavigationEvent,attachToWindow:!0,onSeek:n.onVideoTimeChange,onVideoTimeChange:n.onVideoTimeChange,onPlaying:n.onVideoPlaying},k),miniPlayerTitle:n.getMiniPlayerTitle(),miniPlayerContentRoute:n.props.contentCanonicalUrl,disablePersistenceOnUnmount:C,disablePersistenceOnScroll:C}))),E,_,n.renderDescription()))},n.onVideoPlaying=function(e){var t=e.getSessionInfo().playSessionId;n.playSessionId!==t&&($a.b.addStep(n.getReferralStep()),$a.b.addStep($a.a.Channel,{playSessionId:t}),n.playSessionId=t)},n.getReferralStep=function(){return n.channelIsHosting()?$a.a.Hosting:n.props.videoID?$a.a.Vod:n.props.clipSlug?$a.a.Clip:$a.a.Live},n.onCompanionAdBuffered=function(e){n.setState({bufferedCompanion:e})},n.onCompanionAdConsumed=function(){n.setState({bufferedCompanion:void 0})},n.onStreamStatusChange=function(e){e===Ae.a.Offline&&n.setState({playerOffline:!0})},n.onChatHostingChange=function(e){p.p.track(k.SpadeEventType.HostModeDebug,{log_type:"chat_msg",channel:n.props.channelLogin,data_target_channel_login:e})},n.onPlayerNavigationEvent=function(e){var t=n.props.video,i=t?t.id:"",a=n.props.collection&&n.props.collection.id||void 0;Object(xe.c)(e,n.props.history,{currentCollectionID:a,currentVideoID:i})},n.triggerPlayerReposition=function(){n.repositionPlayer&&n.repositionPlayer()},n.onVideoTimeChange=function(e){var t=Math.floor(e);if(t!==n.lastVideoOffset)if(n.lastVideoOffset=t,n.props.clip){var i=t+n.getSourceVideoClipStartOffset()-ar;n.props.onVideoTimeChange(i)}else n.props.onVideoTimeChange(t);else n.state.requestedVideoOffset===t&&n.setState({requestedVideoOffset:Mn.a})},n.onPlayerSeekRequest=function(e){n.setState({requestedVideoOffset:e})},n.getMiniPlayerTitle=function(){if(n.props.contentType===Ee.a.VIDEO||n.props.contentType===Ee.a.COLLECTION)return n.props.video&&n.props.video.title||Object(p.d)("Watching video","ChannelRoot");if(n.props.contentType===Ee.a.CLIP)return n.props.clip&&n.props.clip.title||Object(p.d)("Watching clip","ChannelRoot");var e;if(n.props.hostedChannel)return e=n.props.hostedChannel.displayName||n.props.hostedChannel.login,Object(p.d)("Hosting {channel}",{channel:e},"ChannelRoot");var t=n.props.channel;return e=t&&t.displayName||n.props.channelLogin,Object(p.d)("Watching {channelName}",{channelName:e},"ChannelRoot")},n.setRepositionPlayer=function(e){n.repositionPlayer=e},n.getLastVideoOffset=function(){return n.lastVideoOffset},n.onEnterMultiview=function(){n.props.history.push("/"+n.props.match.params.channelLogin+"/commandcenter"),n.endMultiviewFTUE()},n.endMultiviewFTUE=function(){n.state.multiviewFTUEDone||(p.q.storage.set(Oe.a,!0),n.setState({multiviewFTUEDone:!0}))},n.state={requestedVideoOffset:Object(Mn.g)(t),multiviewFTUEDone:p.q.storage.get(Oe.a,!1),playerOffline:t.playerOffline},n}return u.__extends(t,e),t.prototype.componentDidMount=function(){this.onRender(),this.updateWatchingActivity(this.props)},t.prototype.componentWillReceiveProps=function(e){var t=this.props.channelLogin,n=e.channel&&e.channel.login;Object(Mn.g)(this.props)!==Object(Mn.g)(e)&&this.setState({requestedVideoOffset:Object(Mn.g)(e)}),t===n&&this.props.videoID===e.videoID&&this.props.collectionID===e.collectionID&&this.props.clipSlug===e.clipSlug&&this.props.page===e.page&&Object(Et.f)(this.props)===Object(Et.f)(e)||this.props.scrollToTop(),this.updateWatchingActivity(e)},t.prototype.componentDidUpdate=function(){this.onRender()},t.prototype.componentWillUnmount=function(){clearTimeout(this.refetchTimer),this.props.clearData(),Object(v.a)()},t.prototype.render=function(){var e=this.props.channelLogin,t=this.props.channel,n=t&&t.stream&&t.stream.game?t.stream.game.name:void 0;return(this.props.loading||this.props.error||!(!this.props.match.params.contentType&&this.props.match.params.contentID||this.props.contentType===Ee.a.LIVE&&(!t||t&&!t.id)||this.props.contentType===Ee.a.CLIP&&Object(Mn.e)(e,this.props.clip)||this.props.contentType===Ee.a.VIDEO&&Object(Mn.l)(e,this.props.video)))&&(this.props.loading||!this.props.error||this.props.contentType!==Ee.a.VIDEO&&this.props.contentType!==Ee.a.CLIP)?m.createElement(ht.a,{theatreModeEnabled:this.props.theatreModeEnabled,persistentPlayerIsPersisting:this.props.persistentPlayerIsPersisting,renderHeader:this.renderHeader(),renderVideoPlayer:this.renderVideoPlayer(),renderSideNav:this.renderSideNav(),renderRightColumn:this.renderRightColumn()},m.createElement(Ne.a,{game:n,hostingInfo:this.getHostingContext()}),m.createElement(Xi,{playerOffline:this.state.playerOffline}),m.createElement(_e,null),m.createElement(xn,null)):m.createElement(pt,null)},t.prototype.renderDescription=function(){var e=this.props,t=e.contentType;switch(t){case Ee.a.LIVE:return m.createElement(lt,{channelLogin:e.channelLogin,channelIsHosting:!!e.hostedChannel});case Ee.a.COLLECTION:case Ee.a.VIDEO:return m.createElement(Ua,{collectionID:e.collection&&e.collection.id,currentUser:e.currentUser,video:e.video,getLastVideoOffset:this.getLastVideoOffset});case Ee.a.CLIP:return m.createElement(Fi,{clip:e.clip,channelLogin:e.channelLogin});case Ee.a.NONE:return null;default:return t}},t.prototype.renderChat=function(e,t){var n=null,i=this.props.channelLogin,a=this.props.collectionID,r=this.props.hostedChannel,o=!this.props.loading&&a&&this.props.collection&&0===this.props.collection.items.totalCount,s="control"===this.loggedOutChannelPageAssignment&&!this.props.isLoggedIn||!this.loggedOutChannelPageAssignment||this.props.isLoggedIn;return e?n=m.createElement(m.Fragment,null,s&&m.createElement(Wa,{bufferedCompanion:this.state.bufferedCompanion,onCompanionAdConsumed:this.onCompanionAdConsumed}),m.createElement(Te.a,{channelLogin:i,hostedChannelDisplayName:r&&r.displayName?r.displayName:void 0,routedRoomName:this.props.match.params.roomName,onHostingChange:this.onChatHostingChange})):this.props.clip?n=m.createElement(R.a,{flexGrow:1,fullHeight:!0},m.createElement(Fe,{clip:this.props.clip,onPlayerSeekRequestHandler:this.onPlayerSeekRequest,onShowLogin:this.props.videoChatLogin})):o||(n=m.createElement(R.a,{flexGrow:1,fullHeight:!0},m.createElement(d.l,u.__assign({onPlayerSeekRequest:this.onPlayerSeekRequest,onShowLogin:this.props.videoChatLogin,videoID:Object(Et.e)(this.props)||t&&t.id||""},Object(Mn.i)(this.props))))),n},t.prototype.updateWatchingActivity=function(e){if(e.match.params.channelLogin&&!e.loading&&!e.error&&e.channel&&e.firstPageLoaded&&e.initialUserAvailabilityIsSet){var t=e.channel.id,n=!!Object(Mn.d)(e.channel)||Object(Mn.b)(e.channel);this.currentWatchingActivity.userID===t&&this.currentWatchingActivity.isWatching===n||(this.currentWatchingActivity={userID:t,isWatching:n},n?Object(v.f)({type:b.b.WATCHING,userID:t,gameID:null}):Object(v.a)())}},t.prototype.channelIsHosting=function(){return!!this.props.hostedChannel},t.prototype.getHostingContext=function(){if(this.props.hostedChannel&&this.props.channel&&this.props.channel.id)return{hostingChannelId:this.props.channel.id,hostedChannelId:this.props.hostedChannel.id}},t.prototype.onRender=function(){this.props.loading||(this.props.latencyTracking.reportInteractive(),this.props.clipSlug?Object(Mn.j)(null,this.props.clip):this.props.videoID&&Object(Mn.j)(this.props.video,null))},t.prototype.getSourceVideoClipStartOffset=function(){return this.props.clip&&this.props.clip.videoOffsetSeconds?this.props.clip.videoOffsetSeconds:ir},t}(m.PureComponent);var or=Object(i.compose)(Object(Se.b)(function(e){return{contentType:e.contentType,channelLogin:e.channelLogin,videoID:e.videoID,collectionID:e.collectionID,clipSlug:e.clipSlug,loading:e.loading,error:e.error,channel:e.channel,video:e.video,collection:e.collection,clip:e.clip,contentCanonicalUrl:e.contentCanonicalUrl,live:e.live,videoPlayerSource:e.videoPlayerSource,currentUser:e.currentUser,page:e.page,hostedChannel:e.hostedChannel,clearData:e.clearData}}),Object(g.c)(function(e){return{scrollToTop:e.scrollToTop}}),Object(Y.withLatencyTracking)("ChannelRoot"))(rr);var sr=Object(i.compose)(c.a,Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isLoggedIn:Object(l.f)(e),initialUserAvailabilityIsSet:!!e.session.initialUserAvailabilityIsSet,theatreModeEnabled:e.ui.theatreModeEnabled,persistentPlayerIsPersisting:e.ui.persistentPlayerIsPersisting,sessionUser:Object(l.e)(e)}},function(e){return Object(r.bindActionCreators)({onVideoTimeChange:d.q,videoChatLogin:function(){return Object(s.e)(o.a.VODComment)}},e)}))(or);n.d(t,"ChannelRoot",function(){return sr})},DOvc:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage__ChannelViewersCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:113}};n.loc.source={body:"query ChannelPage__ChannelViewersCount($login: String!) {\nuser(login: $login) {\nid\nstream {\nid\nviewersCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DfWg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoOptions_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"query VideoOptions_User($contentOwnerID: ID!) {\nuser(id: $contentOwnerID) {\nid\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},DnOo:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/7QA"),s=n("SDEh"),l=n("8EUQ"),c=n("GnwI"),d=n("br9A"),u=n("dEDE"),m=n("vCsY"),p=n("7uM4"),h="subscribe-button__subscribe-tier-button",g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.openCheckout(),t.props.handleSubAction({action:d.a.ClickCheckout,checkoutButtonTier:t.props.tierPrice})},t.openCheckout=function(){t.props.isMobileCheckout||o.o.set(l.a.SUB_CHECKOUT__PRODUCT_KEY,t.props.productName)},t}return i.__extends(t,e),t.prototype.render=function(){if(this.props.isSubbedToTier){var e=Object(o.d)("Subscribed","SubTierButton");return a.createElement(u.a,{ariaLabel:e,"data-test-selector":h,disabled:!0,icon:p.b.Star},e)}var t;return t=this.props.isEsportChannel?Object(o.d)("Get the 2019 All-Access Pass Now","SubTierButton"):this.props.customSubscribeNowMessage?this.props.customSubscribeNowMessage:Object(o.d)("Subscribe","SubTierButton"),a.createElement(u.a,i.__assign({ariaLabel:t+" "+this.props.tierPrice,"data-test-selector":h,linkTo:this.props.isMobileCheckout?this.props.url:void 0,onClick:this.handleClick,purchase:this.props.tierPrice},Object(m.a)(this.props),{fullWidth:this.props.fullWidth,targetBlank:!!Object(s.b)()||void 0}),t)},t}(a.Component),f=Object(r.compose)(Object(c.withLatencyTracking)("SubTierButton",{autoReportInteractive:!0}))(g);n.d(t,!1,function(){return h}),n.d(t,"a",function(){return f})},DpwM:function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return d});var i="video",a="published",r="unpublished",o="pending_review",s="pending_review_spam",l="current",c="",d=function(e){return""!==e.parentId}},"E/0f":function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("DMoW"),s=n("0Hf3"),l=n("/7QA"),c=n("hnjF"),d=n("sUnt"),u=n("7uM4"),m=n("+80q"),p=n("X2PJ"),h=function(){return r.createElement(d.a,{flexGrow:1,padding:{x:1,y:2}},r.createElement(d.a,{alignItems:c.b.Center,display:c.d.Flex,justifyContent:c.h.Center,textAlign:c.k.Center,flexDirection:c.e.Column},r.createElement(d.a,null,r.createElement(u.a,{asset:u.b.DeadGlitch,width:36,height:36})),r.createElement(d.a,{padding:{x:3,y:0},margin:{x:3,y:0}},r.createElement(m.a,{color:p.c.Alt2,fontSize:p.d.Size5},Object(l.d)("There was an unexpected error while loading. Please try again later.","ViewerCardModLogsFeature")))))},g=n("Ws8v"),f=n("XQbB"),v=n("5zf8"),b=n("wp5a"),k=n("b7S+"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getLabel=function(){if(!t.props.banStatus)return"";if(t.props.banStatus.isPermanent)return Object(l.d)("Banned","ViewerCardModLogsFeature");if(t.props.banStatus.expiresAt){var e=new Date(t.props.banStatus.createdAt).valueOf(),n=new Date(t.props.banStatus.expiresAt).valueOf(),i=Object(v.b)((n-e)/1e3,v.a.Humanized);return Object(l.d)("Timeout {duration}",{duration:i},"ViewerCardModLogsFeature")}return Object(l.d)("Unknown","ViewerCardModLogsFeature")},t}return a.__extends(t,e),t.prototype.render=function(){if(!this.props.banStatus)return null;var e=r.createElement(m.a,{bold:!0,type:m.e.Span},this.props.channelName);return r.createElement(g.a,{fullWidth:!0,background:p.a.Alt,borderTop:!0,padding:{y:.5,x:1},alignItems:c.b.Baseline},r.createElement(m.a,{fontSize:p.d.Size4,type:m.e.Span},r.createElement(b.a,{type:b.b.Alert,label:this.getLabel()})),r.createElement(m.a,{type:m.e.Span},Object(l.d)(" in {channelName}",{channelName:e},"ViewerCardModLogsFeature")),r.createElement(m.a,{color:p.c.Alt2,type:m.e.Span},this.modActionLabel))},Object.defineProperty(t.prototype,"modActionLabel",{get:function(){if(!this.props.banStatus||!this.props.banStatus.moderator)return"";var e=r.createElement(m.a,{bold:!0,type:m.e.Span},this.props.banStatus.moderator.displayName),t=new Date(this.props.banStatus.createdAt),n=t&&(Date.now()-t.getTime())/36e5,i=Object(l.d)(" {timestamp, date, short} at {timestamp, time, short} ",{timestamp:t},"ViewerCardModLogsFeature"),a=i;if(n&&n<12){var o=Object(l.h)(t,{style:"best fit"});a=r.createElement(k.a,{label:i},o)}return Object(l.d)(" {spacer} by {modDisplay} {spacer} {timeElement}",{spacer:"",modDisplay:e,timeElement:a},"ViewerCardModLogsFeature")},enumerable:!0,configurable:!0}),t}(r.Component),y=n("TSYQ"),S=n("fvjX"),E=n("GnwI"),N=n("i4Ys"),w=n("PL8s"),_=(n("fGoN"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){e.preventDefault(),t.props.onClick(t.props.value)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=y("viewer-card-mod-drawer-tab",{"viewer-card-mod-drawer-tab--active":this.props.isActive});return r.createElement(d.a,{"data-test-selector":"viewer-card-mod-drawer-tab",className:e,display:c.d.Flex,flexGrow:2,flexShrink:1},r.createElement(c.g,{flexGrow:1,flexDirection:c.e.Column,textAlign:c.k.Left},r.createElement(N.a,{blurAfterClick:!0,replace:!0,type:N.b.Alpha,"data-action":this.props.value,onClick:this.onClick,linkTo:"not-a-location"},r.createElement(d.a,{className:"viewer-card-mod-drawer-tab__title",padding:.5},this.props.loading?r.createElement(w.a,null):r.createElement(m.a,{bold:!0,color:p.c.Link,fontSize:p.d.Size5},this.props.count),r.createElement(m.a,{fontSize:this.props.fontSize},this.props.label)))))},t}(r.Component)),D=Object(S.compose)(Object(E.withLatencyTracking)("ViewerCardModDrawerTab"))(_),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=p.d.Size6,t=Object(l.d)("Messages","ViewerCardModLogsFeature"),n=Object(l.d)("Timeouts","ViewerCardModLogsFeature"),i=Object(l.d)("Bans","ViewerCardModLogsFeature"),a=Object(l.d)("Mod Comments","ViewerCardModLogsFeature");[t,n,i,a].every(function(t){return!("string"==typeof t&&t.length>=24)||(e=p.d.Size7,!1)});var o=this.props.data&&this.props.data.loading;return r.createElement(g.a,{fullWidth:!0,display:c.d.Flex,padding:{top:.5},className:"viewer-card-mod-drawer-tabs"},r.createElement(D,{count:this.getMessageCountString(),label:t,fontSize:e,isActive:this.props.currentPage===Ce.Messages,onClick:this.props.changeTab,value:Ce.Messages,loading:o}),r.createElement(D,{count:this.getTimeoutCount(),label:n,fontSize:e,isActive:this.props.currentPage===Ce.Timeouts,onClick:this.props.changeTab,value:Ce.Timeouts,loading:o}),r.createElement(D,{count:this.getChannelBanCount(),label:i,fontSize:e,isActive:this.props.currentPage===Ce.Bans,onClick:this.props.changeTab,value:Ce.Bans,loading:o}),r.createElement(D,{count:this.getCommentsCountString(),label:a,fontSize:e,isActive:this.props.currentPage===Ce.ModComments,onClick:this.props.changeTab,value:Ce.ModComments,loading:o}))},t.prototype.getTimeoutCount=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.timeouts&&e.timeouts.actionCount||0,n=e&&e.timeouts&&e.timeouts.pageInfo&&e.timeouts.pageInfo.hasNextPage;return t>=99&&n?"99+":""+t},t.prototype.getChannelBanCount=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.bans&&e.bans.actionCount||0,n=e&&e.bans&&e.bans.pageInfo&&e.bans.pageInfo.hasNextPage;return t>=99&&n?"99+":""+t},t.prototype.getCommentsCountString=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.comments&&e.comments.edges||[],n=e&&e.comments&&e.comments.pageInfo&&e.comments.pageInfo.hasNextPage;return t.length>=99&&n?"99+":""+t.length},t.prototype.getMessageCountString=function(){var e=this.props.data&&this.props.data.channelUser&&this.props.data.channelUser.modLogs,t=e&&e.messages&&e.messages.messageCount||0;return t>=999?"999+":""+t},t}(r.Component),I=n("r538"),T=n("/MKj"),M=n("XDQu"),L=n("3tQW"),F=n("kY/a"),x=n("8/mp"),j=n("HAa/"),A=n("a1OF"),P=n("uG/k"),R=n("3aAs"),U=n("dEDE"),B=2,V=500,H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={error:!1,commentText:"",sendingComment:!1},t.onInputChange=function(e){t.setState({commentText:e.currentTarget.value})},t.handleKeyPress=function(e){if("Enter"===e.key)return t.onSend()},t.onSend=function(){var e=t.state.commentText;if(!(t.state.sendingComment||t.state.commentText.length<B||t.state.commentText.length>V))return t.setState({sendingComment:!0}),t.props.onCreateComment(e).then(function(){t.setState({commentText:"",error:!1,sendingComment:!1})}).catch(function(){t.setState({error:!0,sendingComment:!1})})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=V-this.state.commentText.length,t=!!this.state.commentText&&e<=20;return r.createElement(g.a,{padding:{x:1,bottom:1,top:.5},className:"viewer-card-mod-logs-comment-input"},this.state.error&&r.createElement(m.a,{color:p.c.Error},Object(l.d)("Sorry, something went wrong. Please try again later.","ViewerCardModLogsFeature")),t&&r.createElement(g.a,{display:c.d.Flex,borderTop:!0},e<0?r.createElement(u.a,{asset:u.b.NotificationError,width:20,type:u.c.Alert}):r.createElement(u.a,{asset:u.b.Warning,width:20,type:u.c.Warn}),r.createElement(d.a,{padding:.5},r.createElement(m.a,{"data-test-selector":"viewer-card-mod-logs-comment-input-chars-remaining",color:e>=0?p.c.Alt2:p.c.Error},Object(l.d)("{charsRemaining} characters remaining",{charsRemaining:e},"ViewerCardModLogsFeature")))),r.createElement(d.a,{display:c.d.Flex,alignItems:c.b.Start},r.createElement(d.a,{flexGrow:1,padding:{right:.5},position:c.j.Relative},r.createElement(R.a,{"data-test-selector":"viewer-card-mod-logs-comment-text-input",error:this.state.error,icon:u.b.Whisper,type:R.c.Text,value:this.state.commentText,placeholder:Object(l.d)("Add a comment","ViewerCardModLogsFeature"),onChange:this.onInputChange,onKeyDown:this.handleKeyPress})),r.createElement(U.a,{"data-test-selector":"viewer-card-mod-logs-comment-input-button",onClick:this.onSend,disabled:e<0||this.state.sendingComment},Object(l.d)("Add","ViewerCardModLogsFeature"))))},t}(r.Component),G=Object(S.compose)(Object(E.withLatencyTracking)("ViewerCardModLogsCommentInput"))(H),q=n("oe5X"),W=n("cys1"),z=n("EE1E"),Q=n("Jsra"),Y=n("7d/q"),K=(n("6ZXE"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onDeleteComment=function(){if(t.props.comment)return t.props.onDeleteComment(t.props.comment.id)},t.onMouseEnter=function(){t.props.showDelete&&t.setState({hover:!0})},t.onMouseOut=function(){t.props.showDelete&&t.setState({hover:!1})},t}return a.__extends(t,e),t.prototype.render=function(){if(!this.props.comment||!this.props.comment.details||!this.props.comment.details.text)return null;var e,t=new Date(this.props.comment.timestamp),n=(Date.now()-t.getTime())/36e5,i=Object(l.j)(t,{year:"numeric",month:"numeric",day:"numeric"}),a=Object(l.h)(t,{style:"best fit"});e=n&&n<24?r.createElement(k.a,{label:i,"data-test-selector":"viewer-card-mod-comment-timestamp-tooltip"},a):r.createElement(r.Fragment,null,i);var o=this.renderCommentParts(this.props.comment.details.text),s=this.props.comment&&this.props.comment.author&&this.props.comment.author.chatColor;s&&this.props.useHighContrastColors&&(s="#"+Object(z.a)(s,this.props.theme));var h=y("viewer-card-mod-logs-comment-line",{"viewer-card-mod-logs-comment-line-deleteable":this.props.showDelete});return r.createElement(c.g,{"data-test-selector":"viewer-card-mod-comment",position:c.j.Relative,display:c.d.Flex,alignItems:c.b.Start,padding:{x:1,y:.5},className:h},r.createElement("div",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseOut},r.createElement(u.a,{asset:u.b.NavMessages,type:u.c.Alt2}),r.createElement(g.a,{padding:{left:1}},r.createElement(m.a,{color:p.c.Base,wordBreak:m.f.BreakWord,"data-test-selector":"viewer-card-mod-comment-text"},o),r.createElement(g.a,{color:p.c.Alt2,display:c.d.Flex,alignItems:c.b.Center},r.createElement(Q.a,{blurAfterClick:!0,hoverUnderlineNone:!0,targetBlank:!0,type:Q.b.Inherit,"data-test-selector":"viewer-card-mod-comment-author",to:"/"+(this.props.comment&&this.props.comment.author&&this.props.comment.author.login)},r.createElement(m.a,{fontSize:p.d.Size7},r.createElement("span",{style:s?{color:s}:void 0},this.props.comment&&this.props.comment.author&&this.props.comment.author.displayName))),r.createElement(d.a,{padding:{x:.5}},""),r.createElement(g.a,{"data-test-selector":"viewer-card-mod-comment-timestamp",fontSize:p.d.Size7},e))),this.state.hover&&r.createElement(g.a,{position:c.j.Absolute,padding:{x:1,bottom:.5},className:"viewer-card-mod-logs-comment-line-delete"},r.createElement(Y.a,{blurAfterClick:!0,"data-test-selector":"viewer-card-mod-comment-delete",icon:u.b.Trash,size:Y.b.Small,type:Y.c.Alert,onClick:this.onDeleteComment}))))},t.prototype.renderCommentParts=function(e){return Object(W.f)(Object(q.a)(e))},t}(r.Component));!function(e){e.NoComments="no-comments",e.Loading="loading",e.Error="error",e.CommentList="comment-list"}(i||(i={}));var X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={comments:[],cursor:null,hasMoreLeft:!0,loading:!1},t.initialLoad=null,t.saveScrollRef=function(e){return t.scroll=e},t.loadMore=function(){return a.__awaiter(t,void 0,void 0,function(){var e=this;return a.__generator(this,function(t){return!this.state.loading&&this.state.hasMoreLeft?[2,new Promise(function(t){e.setState({loading:!0},t)}).then(function(){return e.props.loadMore({channelID:e.props.channelID,targetID:e.props.targetID,cursor:e.state.cursor})}).then(function(t){return new Promise(function(n){e.setState({cursor:t.cursor,comments:e.state.comments.concat(t.comments),loading:!1,hasMoreLeft:!(!t.cursor||t.cursor===e.state.cursor)},n)})}).catch(function(){return new Promise(function(t){e.setState({error:!0},t)})}).then(function(){return Promise.resolve()})]:[2,Promise.resolve()]})})},t.onCreateComment=function(e){return t.props.onCreateComment(e).then(function(e){e&&t.setState(a.__assign({},t.state,{comments:[e].concat(t.state.comments)}))})},t.onDeleteComment=function(e){return t.props.onDeleteComment(e).then(function(){t.setState(a.__assign({},t.state,{comments:t.state.comments.filter(function(t){return t.id!==e})}))})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.initialLoad?(this.props.latencyTracking.reportInteractive(),this.scrollToBottom()):this.initialLoad=this.loadMore()},t.prototype.getSnapshotBeforeUpdate=function(){return this.scroll&&this.scroll.scrollContent&&this.scroll.scrollContent.scrollHeight&&(this.prevScrollHeight=this.scroll.scrollContent.scrollHeight),null},t.prototype.componentDidUpdate=function(e,t){if(this.initialLoad){if(this.state.comments&&t.comments&&this.state.comments.length>t.comments.length){var n=this.state.comments[0]&&this.state.comments[0],i=t.comments[0]&&t.comments[0];if(n&&i&&n.id===i.id){if(this.scroll&&this.scroll.scrollContent&&this.prevScrollHeight&&this.prevScrollHeight!==this.scroll.scrollContent.scrollHeight){var a=this.scroll.scrollContent.scrollHeight-this.prevScrollHeight;this.scroll.scrollContent.scrollTop=a}}else this.scrollToBottom()}}else this.initialLoad=this.loadMore()},t.prototype.render=function(){var e=this;if(this.state.error)return r.createElement(d.a,{fullHeight:!0,fullWidth:!0,"data-test-selector":i.Error},r.createElement(h,null));if(!this.initialLoad||this.state.loading&&0===this.state.comments.length)return r.createElement(d.a,{padding:{x:1,y:2}},r.createElement(f.a,{delay:0,fillContent:!0,size:f.b.Large,"data-test-selector":i.Loading}));var t=this.props.currentUser&&this.props.currentUser.id,n=this.state.comments.map(function(n){var i=n.channel&&n.channel.id;return r.createElement(K,{key:n.id,comment:n,theme:e.props.theme,showDelete:!!t&&!!i&&i===t,useHighContrastColors:e.props.useHighContrastColors,onDeleteComment:e.onDeleteComment})}).reverse(),a=!!this.state.hasMoreLeft&&!this.state.loading;return r.createElement(d.a,{display:c.d.Flex,flexDirection:c.e.Column,flexGrow:1,flexShrink:1,className:"mod-logs-entry-list"},r.createElement(c.g,{flexGrow:1,flexShrink:1},n.length?r.createElement(x.b,{suppressScrollX:!0,scrollRef:this.saveScrollRef},r.createElement(d.a,null,r.createElement(x.a,{loadMore:this.loadMore,enabled:a,orientation:j.b.Down,contentLength:n.length,pixelThreshold:200}),r.createElement(d.a,{key:"comments-list-start",padding:.5}),n,r.createElement(d.a,{key:"comments-list-end",padding:.5}))):this.renderEmptyState()),r.createElement(G,{onCreateComment:this.onCreateComment}))},t.prototype.renderEmptyState=function(){return r.createElement(d.a,{flexGrow:1,"data-test-selector":i.NoComments,padding:{x:1,y:2}},r.createElement(d.a,{alignItems:c.b.Center,display:c.d.Flex,justifyContent:c.h.Center,textAlign:c.k.Center,flexDirection:c.e.Column},r.createElement(d.a,null,r.createElement(P.a,{src:Object(A.d)(ye.id,2),alt:ye.alt})),r.createElement(d.a,{padding:{x:4,y:0},margin:{x:4,y:0}},r.createElement(m.a,{color:p.c.Alt2,fontSize:p.d.Size5},Object(l.d)("There are no mod comments for this user.","ViewerCardModLogsFeature")))))},t.prototype.scrollToBottom=function(){this.scroll&&this.scroll.scrollToBottom()},t}(r.Component),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadMore=function(e){return Object(I.e)(Object(I.c)(l.q.apollo.client.link,{query:F,variables:e})).then(function(e){var t=e.data&&e.data.channelUser&&e.data.channelUser.modLogs&&e.data.channelUser.modLogs.comments,n=null,i=t&&t.edges&&t.edges.map(function(e){return n=e.cursor,e.node})||[];return{cursor:n,comments:i}})},t}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(X,a.__assign({},this.props,{loadMore:this.loadMore}))},t}(r.Component);var J,Z=Object(S.compose)(Object(T.connect)(function(e){return{theme:Object(M.a)(e)}}),Object(L.b)(function(e){return{useHighContrastColors:e.value}}),Object(E.withLatencyTracking)("ViewerCardModLogsCommentsList"))($),ee=n("yR8l"),te=n("uIkQ"),ne=n("w4P5"),ie=n("XmgI"),ae=function(e){var t=new Date(e.dateString);return"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime())?null:r.createElement(d.a,{display:c.d.Flex,alignItems:c.b.Center},r.createElement(g.a,{margin:{right:1,left:1},flexGrow:1,borderBottom:!0}),r.createElement(m.a,{color:p.c.Alt2},Object(l.c)(t)),r.createElement(g.a,{margin:{right:1,left:1},flexGrow:1,borderBottom:!0}))},re=function(e){return e.entryDetails&&e.entryDetails.reason?r.createElement(d.a,{className:"targeted-mod-action__reason",padding:{x:1,y:0}},r.createElement(m.a,{italic:!0,type:m.e.Span},e.entryDetails.reason)):null},oe=n("9sGC"),se=(n("k7qK"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e,t=this.props.entry,n=new Date(t.timestamp).valueOf(),i=this.renderTimestamp(n),a=t.user&&t.user.login||"unknown",s=t.target&&t.target.login||"unknown",c=t.details&&t.details.durationSeconds||"unknown";switch(t.action){case o.Ba.BAN_USER:e=Object(l.d)("{modLogin} banned {target}.",{modLogin:r.createElement(m.a,{bold:!0,type:m.e.Span},a),target:s},"ViewerCardModLogsFeature");break;case o.Ba.TIMEOUT_USER:e=Object(l.d)("{modLogin} timed out {target} for {duration} seconds.",{modLogin:r.createElement(m.a,{bold:!0,type:m.e.Span},a),target:s,duration:c},"ViewerCardModLogsFeature");break;case o.Ba.UNBAN_USER:e=Object(l.d)("{modLogin} unbanned {target}.",{modLogin:r.createElement(m.a,{bold:!0,type:m.e.Span},a),target:s},"ViewerCardModLogsFeature");break;case o.Ba.UNTIMEOUT_USER:e=Object(l.d)("{modLogin} removed timeout on {target}.",{modLogin:r.createElement(m.a,{bold:!0,type:m.e.Span},a),target:s},"ViewerCardModLogsFeature");break;default:return null}return r.createElement(d.a,{className:"targeted-mod-action",padding:{x:1,y:.5}},i,r.createElement(m.a,{type:m.e.Span},e),r.createElement(re,{entryDetails:t.details}))},t.prototype.renderTimestamp=function(e){return r.createElement("span",{key:"timestamp",className:"message__timestamp","data-test-selector":oe.b},Object(W.a)(new Date(e),!0))},t}(r.Component)),le=n("1VX3"),ce=(n("lXDb"),["scroll","wheel","mousewheel","DOMMouseScroll","keyup","mousedown"]),de=10,ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={disableInfiniteTrigger:!0,isAutoScrolling:!0},t.saveScrollRef=function(e){return t.scroll=e},t.handleScrollEvent=function(e){if(t.scroll&&t.scroll.scrollContent&&(e.which>0||"mousedown"===e.type||"mousewheel"===e.type||"wheel"===e.type)){var n=t.scroll.scrollContent.scrollHeight-t.scroll.scrollContent.scrollTop-t.scroll.scrollContent.offsetHeight;n<=de&&!t.state.isAutoScrolling?t.setState({isAutoScrolling:!0}):n>de&&t.state.isAutoScrolling&&t.setState({isAutoScrolling:!1})}},t.handleClickMoreMessages=function(){t.setState({isAutoScrolling:!0},t.scrollToBottom)},t.loadMore=function(){return t.isLoadingMore=!0,t.props.loadMore()},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({disableInfiniteTrigger:!1}),this.scroll&&this.scroll.scrollContent&&(this.scrollToBottom(),ce.forEach(function(t){e.scroll.scrollContent&&e.scroll.scrollContent.addEventListener(t,e.handleScrollEvent)}))},t.prototype.componentWillUnmount=function(){var e=this;ce.forEach(function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.removeEventListener(t,e.handleScrollEvent)})},t.prototype.componentWillReceiveProps=function(e){if(e.isBulkLoad&&this.isLoadingMore&&this.scroll&&this.scroll.scrollContent&&(this.prevScrollTop=this.scroll.scrollContent.scrollTop),e.isBulkLoad&&!this.isLoadingMore&&this.scroll&&this.scroll.scrollContent){var t=this.props.messages[this.props.messages.length-1]&&this.props.messages[this.props.messages.length-1].id;if(t&&document.getElementById(t)){var n=document.getElementById(t).offsetTop;this.prevScrollTop=this.scroll.scrollContent.scrollTop-n}else this.prevScrollTop=this.scroll.scrollContent.scrollTop}},t.prototype.componentDidUpdate=function(e){if(e.messages!==this.props.messages&&(this.state.isAutoScrolling&&this.scrollToBottom(),this.props.isBulkLoad&&e.messages&&this.props.messages))if(this.isLoadingMore){var t=e.messages[0]&&e.messages[0].id,n=this.props.messages[0]&&this.props.messages[0].id;if(t&&n&&t!==n){var i=document.getElementById(t);if(i&&this.scroll&&this.scroll.scrollContent){var a=i.offsetTop;this.scroll.scrollContent.scrollTop=this.prevScrollTop+a}}}else{var r=e.messages[e.messages.length-1]&&e.messages[e.messages.length-1].id,o=this.props.messages[this.props.messages.length-1]&&this.props.messages[this.props.messages.length-1].id;if(r&&o&&r!==o){var s=document.getElementById(r);if(s&&this.scroll&&this.scroll.scrollContent){a=s.offsetTop;this.scroll.scrollContent.scrollTop=this.prevScrollTop+a}}}},t.prototype.render=function(){var e=this.renderLines();return r.createElement(d.a,{className:"message-list mod-logs-entry-list",display:c.d.Flex,flexDirection:c.e.Column,flexWrap:c.f.NoWrap,overflow:c.i.Hidden,flexGrow:1},r.createElement(x.b,{className:"message-list__lines",scrollRef:this.saveScrollRef},r.createElement(d.a,{flexGrow:1,fullHeight:!0,overflow:c.i.Hidden},r.createElement(x.a,{"data-test-selector":"backward-infinite-scroll",enabled:!this.state.disableInfiniteTrigger,loadMore:this.loadMore,pixelThreshold:400,orientation:j.b.Down,contentLength:e.length,forceLoadMoreContent:this.props.hasMoreLeft,requestCap:2}),r.createElement(d.a,{key:"message-list-start",padding:.5}),e,r.createElement(d.a,{key:"message-list-end",padding:.5}))),r.createElement(d.a,{position:c.j.Relative,margin:{x:2}},this.moreMessages()))},t.prototype.moreMessages=function(){return this.state.isAutoScrolling?null:r.createElement(g.a,{alignItems:c.b.Center,attachBottom:!0,display:c.d.Flex,fullWidth:!0,background:p.a.Overlay,justifyContent:c.h.Center,position:c.j.Absolute,borderRadius:p.b.Medium,margin:{bottom:1}},r.createElement(U.a,{onClick:this.handleClickMoreMessages,overlay:!0,type:U.d.Text,fullWidth:!0},Object(l.d)("More messages below.","ViewerCardModLogsFeature")))},t.prototype.scrollToBottom=function(){this.scroll.scrollToBottom()},t.prototype.renderLines=function(){var e=this;return this.props.messages.slice().reduce(function(t,n,i){var a=i>0&&e.props.messages[i-1],o="Message"===n.__typename&&new Date(n.sentAt).toLocaleDateString()||"ModLogsTargetedModActionsEntry"===n.__typename&&new Date(n.timestamp).toLocaleDateString(),s=a&&"Message"===a.__typename&&new Date(a.sentAt).toLocaleDateString()||a&&"ModLogsTargetedModActionsEntry"===a.__typename&&new Date(a.timestamp).toLocaleDateString();return 0===i&&o&&t.push(r.createElement(ae,{key:i+"-"+o,dateString:o})),s&&o&&s!==o&&t.push(r.createElement(ae,{key:i+"-"+o,dateString:o})),"Message"===n.__typename?t.push(r.createElement(le.a,{channelID:null,key:n.id,badgeSets:e.props.badgeSets,bitsConfig:e.props.bitsConfig,hasModPermissions:!1,message:n,showTimestamps:!0,showModerationIcons:!1,onUsernameClick:null,padding:{x:1,y:.5}})):"ModLogsTargetedModActionsEntry"===n.__typename&&t.push(r.createElement(se,{key:n.id,entry:n})),t},[])},t}(r.Component);!function(e){e.NoMessages="no-messages",e.Loading="loading",e.Error="error",e.MessageList="message-list"}(J||(J={}));var me,pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cursor:null,messages:[],loading:!1,hasMoreLeft:!0,error:!1},t.initialLoad=null,t.loadMore=function(){return!t.state.loading&&t.state.hasMoreLeft?new Promise(function(e){t.setState({loading:!0},e)}).then(function(){return t.props.loadMore({senderID:t.props.senderID,channelLogin:t.props.channelLogin,cursor:t.state.cursor})}).then(function(e){return new Promise(function(n){t.setState({messages:e.messages.concat(t.state.messages),cursor:e.cursor,error:e.error,loading:!1,hasMoreLeft:!(!e.cursor||e.cursor===t.state.cursor)},n)})}).catch(function(){return new Promise(function(e){t.setState({error:!0},e)})}).then(function(){return Promise.resolve()}):Promise.resolve()},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.initialLoad||(this.initialLoad=this.loadMore())},t.prototype.componentDidUpdate=function(e){this.initialLoad||(this.initialLoad=this.loadMore())},t.prototype.render=function(){return this.state.error?r.createElement(d.a,{fullHeight:!0,fullWidth:!0,"data-test-selector":J.Error},r.createElement(h,null)):!this.initialLoad||this.state.loading&&0===this.state.messages.length?r.createElement(d.a,{padding:{x:1,y:2}},r.createElement(f.a,{delay:0,fillContent:!0,size:f.b.Large,"data-test-selector":J.Loading})):0===this.state.messages.length?r.createElement(d.a,{display:c.d.Flex,flexDirection:c.e.Column,flexGrow:1,flexShrink:1,padding:{x:1,y:2},"data-test-selector":J.NoMessages},r.createElement(d.a,{display:c.d.Flex,alignItems:c.b.Center,justifyContent:c.h.Center,textAlign:c.k.Center,flexDirection:c.e.Column},r.createElement(d.a,null,r.createElement(P.a,{src:Object(A.d)(ye.id,2),alt:ye.alt})),r.createElement(d.a,{padding:{x:4,y:0},margin:{x:4,y:0}},r.createElement(m.a,{color:p.c.Alt2,fontSize:p.d.Size5},Object(l.d)("This user hasn't chatted in the channel.","ViewerCardModLogsFeature"))))):r.createElement(g.a,{background:p.a.Base,className:"mod-logs-entry-list",fullWidth:!0,"data-test-selector":J.MessageList,display:c.d.Flex,flexDirection:c.e.Column,flexGrow:1,flexShrink:1},r.createElement(ue,{badgeSets:this.props.badgeSets,bitsConfig:ie.a,isBulkLoad:!0,hasMoreLeft:this.state.hasMoreLeft,messages:this.state.messages,loadMore:this.loadMore}))},t}(r.Component),he=n("34IA"),ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadMore=function(e){return Object(I.e)(Object(I.c)(l.q.apollo.client.link,{query:he,variables:e})).then(function(e){var t=e.data&&e.data.channel&&e.data.channel.modLogs&&e.data.channel.modLogs.messagesBySender,n=null,i=[];return t&&t.edges&&t.edges.forEach(function(e){if(!e||!e.node)return null;"ModLogsMessage"===e.node.__typename?i.unshift(a.__assign({},e.node,{__typename:"Message"})):"ModLogsTargetedModActionsEntry"===e.node.__typename&&i.unshift(e.node),n=e.cursor||n}),{cursor:n,messages:i}})},t}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(pe,a.__assign({},this.props,{loadMore:this.loadMore}))},t}(r.Component),fe=Object(S.compose)(Object(ee.a)(ne,{options:function(e){return{variables:a.__assign({},e)}},props:function(e){var t=new te.c([]);if(e.data){var n=e.data,i=n.badges,a=n.channel;i&&a&&a.broadcastBadges&&a.login&&(t=new te.c(i,a.broadcastBadges,a.login))}return{badgeSets:t}}}))(ge);!function(e){e.DateSeparator="viewer-card-mod-logs-date-separator",e.EmptyState="viewer-card-mod-logs-mod-actions-empty-state",e.OutOfSyncState="viewer-card-mod-logs-mod-actions-out-of-sync-state",e.RefetchButtonIcon="viewer-card-mod-logs-mod-actions-out-of-sync-state"}(me||(me={}));var ve="64138",be="SeemsGood",ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1},t.sprinkleDateSeparators=function(e){return e&&e.edges&&e.edges.reduce(function(e,t,n,i){if(!t.node)return e;var a=new Date(t.node.timestamp).toLocaleDateString(),o=i[n+1],s="";return o&&o.node&&(s=new Date(o.node.timestamp).toLocaleDateString()),e.push(r.createElement(se,{key:t.node.action+"."+t.node.timestamp,entry:t.node})),s&&a!==s&&e.push(r.createElement(ae,{key:""+a,"data-test-selector":me.DateSeparator,dateString:a})),n===i.length-1&&e.push(r.createElement(ae,{key:""+a,"data-test-selector":me.DateSeparator,dateString:a})),e},[])},t.iconClick=function(){return a.__awaiter(t,void 0,void 0,function(){var e=this;return a.__generator(this,function(t){switch(t.label){case 0:return this.setState({loading:!0}),[4,this.props.refetch().then(function(){e.setState({loading:!1})},function(){e.setState({loading:!1})})];case 1:return t.sent(),[2]}})})},t.saveScrollRef=function(e){return t.scroll=e},t.scrollToBottom=function(){t.scroll&&t.scroll.scrollToBottom()},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.scrollToBottom()},t.prototype.componentDidUpdate=function(){this.scrollToBottom()},t.prototype.render=function(){if(this.state.loading)return r.createElement(f.a,{delay:0,fillContent:!0,size:f.b.Large});var e=this.props.modActions,t=this.sprinkleDateSeparators(e);return r.createElement(d.a,{className:"mod-logs-entry-list",flexGrow:1,flexShrink:1,display:c.d.Flex,flexDirection:c.e.Column},t&&t.length>0?r.createElement(x.b,{suppressScrollX:!0,scrollRef:this.saveScrollRef},r.createElement(d.a,null,r.createElement(d.a,{key:"targeted-mod-actions-list-start",padding:.5}),t.reverse(),r.createElement(d.a,{key:"targeted-mod-actions-list-end",padding:.5}))):this.renderEmptyState())},t.prototype.renderEmptyState=function(){var e,t,n;switch(this.props.page){case Ce.Bans:e=Object(l.d)("This user has not been banned in the channel.","ViewerCardModLogsFeature"),t=Object(l.d)("Bans are currently out of sync. See the current status below or refresh.","ViewerCardModLogsBans"),n=Boolean(this.props.banStatus&&this.props.banStatus.isPermanent);break;case Ce.Timeouts:e=Object(l.d)("This user has not been timed out in the channel.","ViewerCardModLogsFeature"),t=Object(l.d)("Timeouts are currently out of sync. See the current status below or refresh.","ViewerCardModLogsTimeouts"),n=Boolean(this.props.banStatus&&this.props.banStatus.expiresAt);break;default:e="",t="",n=!1}var i=n?t:e,a=r.createElement(d.a,{padding:{x:1,y:0},margin:{x:1,y:0}},r.createElement(m.a,{color:p.c.Alt2,fontSize:p.d.Size5},i)),o=r.createElement(d.a,{padding:{top:1}},r.createElement(U.a,{type:U.d.Hollow,blurAfterClick:!0,icon:u.b.Refresh,onClick:this.iconClick,ariaLabel:Object(l.d)("Refresh Chat Logs","ViewerCardModLogs"),"data-test-selector":me.RefetchButtonIcon})),s=r.createElement(d.a,null,r.createElement(P.a,{src:Object(A.d)(ve,2),alt:be})),h=a;return n&&(s=a,h=o),r.createElement(d.a,{padding:{x:n?1:3,y:3},"data-test-selector":n?me.OutOfSyncState:me.EmptyState},r.createElement(d.a,{alignItems:c.b.Center,display:c.d.Flex,justifyContent:c.h.Center,textAlign:c.k.Center,flexDirection:c.e.Column},s,h))},t}(r.Component);n("NWfm"),n("OxSk");n.d(t,"a",function(){return ye}),n.d(t,"c",function(){return Ce}),n.d(t,"b",function(){return Se});var Ce,ye={id:"114836",alt:"Jebaited"};!function(e){e[e.Messages=0]="Messages",e[e.Timeouts=1]="Timeouts",e[e.Bans=2]="Bans",e[e.ModComments=3]="ModComments"}(Ce||(Ce={}));var Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentPage:null},t.refetchTargetedModActions=function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.props&&this.props.data?[4,this.props.data.refetch()]:[3,2];case 1:return[2,e.sent()];case 2:return[2]}})})},t.onTabClick=function(e){var n=s.a.Expand,i=e;e===t.state.currentPage&&(i=t.props.isPopoutCard?i:null,n=t.props.isPopoutCard?null:s.a.Collapse),t.props.data&&t.props.data.targetUser&&t.props.permissionsData.channel&&Object(s.c)({targetUserID:t.props.data.targetUser.id,targetLogin:t.props.data.targetUser.login,channelID:t.props.permissionsData.channel.id,channelLogin:t.props.permissionsData.channel.login,clickText:e,action:n}),t.onTabChange(i)},t.onTabChange=function(e){t.setState({currentPage:e})},t.onCreateComment=function(e){return t.props.createModComment({variables:{input:{channelID:t.props.channelID,targetID:t.props.targetID,text:e}}}).then(function(e){var n=e&&e.data.createModeratorComment&&e.data.createModeratorComment.comment;return n&&Object(s.e)(t.props,n),Promise.resolve(n)}).catch(function(){return Promise.reject()})},t.onDeleteComment=function(e){return t.props.deleteModComment({variables:{input:{ID:e}}}).then(function(e){var n=e.data.deleteModeratorComment&&e.data.deleteModeratorComment.comment;return n?(Object(s.f)(t.props,n),Promise.resolve()):Promise.reject()}).catch(function(){return Promise.reject()})},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.isPopoutCard&&this.onTabChange(Ce.Messages)},t.prototype.render=function(){var e=this.props.permissionsData.channel&&this.props.permissionsData.channel.modLogsRoleAccess&&this.props.permissionsData.channel.modLogsRoleAccess.accessLevel===o.Aa.WRITE,t=this.props.permissionsData.channel&&this.props.permissionsData.currentUser&&this.props.permissionsData.channel.id===this.props.permissionsData.currentUser.id;return e||t?r.createElement(d.a,{className:"viewer-card-mod-logs","data-test-selector":"viewer-card-mod-drawer",display:c.d.Flex,flexDirection:c.e.Column,flexGrow:1,flexShrink:1},r.createElement(g.a,{borderTop:!0,margin:{x:1},flexGrow:0},r.createElement(O,{data:this.props.data,currentPage:this.state.currentPage,changeTab:this.onTabClick,"data-test-selector":"viewer-card-mod-drawer-tab-bar"})),this.renderPage(),r.createElement(g.a,{flexGrow:0},r.createElement(C,{banStatus:this.props.banStatusData.chatRoomBanStatus,channelName:this.props.channelLogin}))):null},t.prototype.renderPage=function(){var e=this.props.data&&this.props.data.targetUser&&this.props.data.targetUser.id;if(!e)return null;if(this.props.data.error)return r.createElement(d.a,{fullHeight:!0,fullWidth:!0},r.createElement(h,null));if(this.props.data.loading)return r.createElement(f.a,{delay:0,fillContent:!0,size:f.b.Large});var t=this.props.data.channelUser&&this.props.data.channelUser.modLogs;if(!t)return null;var n=null;switch(this.state.currentPage){case Ce.Messages:n=r.createElement(fe,{key:e,channelLogin:this.props.channelLogin,senderID:e});break;case Ce.ModComments:n=r.createElement(Z,{channelID:this.props.channelID,targetID:e,currentUser:this.props.permissionsData.currentUser,onCreateComment:this.onCreateComment,onDeleteComment:this.onDeleteComment});break;case Ce.Bans:n=r.createElement(ke,{modActions:t.bans,page:Ce.Bans,banStatus:this.props.banStatusData.chatRoomBanStatus,refetch:this.refetchTargetedModActions});break;case Ce.Timeouts:n=r.createElement(ke,{modActions:t.timeouts,page:Ce.Timeouts,banStatus:this.props.banStatusData.chatRoomBanStatus,refetch:this.refetchTargetedModActions});break;default:return null}return r.createElement(g.a,{className:this.props.isPopoutCard?"viewer-card-mod-logs-page viewer-card-mod-logs-page--popout":"viewer-card-mod-logs-page","data-test-selector":"viewer-card-mod-drawer-page",background:p.a.Base,display:c.d.Flex,flexDirection:c.e.Column,flexGrow:1,flexShrink:1},n)},t}(r.Component)},E78O:function(e,t,n){},ECxT:function(e,t,n){},EE1E:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("EN5X"),a=n("G7cy"),r=n("m7BI"),o=n("E8D/"),s=n("DtRd"),l=n("R4sh"),c=n("/0dD"),d=n("76Lv"),u=4.5,m=[250,249,250],p=[15,14,17],h=.1,g=50,f="7A7A7A",v=36,b={};function k(e,t){var n=s(e),k=C(a(n));if(void 0===t&&(t=Object(d.c)()),k in b[t])return b[t][k];if(t===c.a.Dark&&n.every(function(e){return e<v}))return f;var y=t===c.a.Light?m:p,S=Object(l.a)(n,y);if(S>u)return k;for(var E=[n[0],n[1],n[2]],N=g;N>=0&&S<u;N--){var w=r(E);t===c.a.Light?w[0]-=w[0]*h:w[0]+=w[0]*h,E=o(i(w)),S=Object(l.a)(E,y)}var _=C(a(E));return b[t][k]=_,_}function C(e){return"#"===e[0]?e.substr(1):e}b[c.a.Dark]={},b[c.a.Light]={}},EJeP:function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),a=n("q1tI"),r=n("fvjX"),o=n("yR8l"),s=n("geRD"),l=n("rdDs"),c=n("J71B"),d=n("GnwI"),u=n("ghdf"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.data;if(!e.loading){var t=0;!e.error&&e.user&&e.user.followers&&e.user.followers.edges&&(t=e.user.followers.edges.length),this.props.latencyTracking.reportInteractive(t)}},t.prototype.render=function(){var e=this.props.data;return a.createElement(l.a,{loading:e.loading,channelLogin:this.props.channelLogin,hasNextPage:!!(e.user&&e.user.followers&&e.user.followers.edges&&e.user.followers.pageInfo&&e.user.followers.pageInfo.hasNextPage),error:e.error,loadMore:this.props.loadMore,followEdge:e.user&&e.user.followers&&e.user.followers.edges,requestContext:c.a.ChannelFollowers,userExist:!(!e.user||!e.user.id)})},t}(a.Component),p=Object(r.compose)(Object(d.withLatencyTracking)("ChannelFollowersContent"),Object(o.a)(u,{options:function(e){return{variables:{limit:15,login:e.channelLogin,order:l.b.DESC}}},props:function(e){return i.__assign({},e,{loadMore:function(){var t=e.data.user&&e.data.user.followers&&e.data.user.followers.edges,n=null;if(t){var a=t.filter(function(e){return!!e});a.length>0&&(n=a[a.length-1].cursor)}return e.data.fetchMore({query:u,variables:{cursor:n,limit:7,login:e.ownProps.channelLogin,order:l.b.DESC},updateQuery:function(e,t){var n=t.fetchMoreResult,a=n.user&&n.user.followers||e.user&&e.user.followers,r=(e.user&&e.user.followers&&e.user.followers.edges||[]).filter(function(e){return e&&e.node&&e.node.id}),o=(n.user&&n.user.followers&&n.user.followers.edges||[]).filter(function(e){return e&&e.node&&e.node.id});return{user:i.__assign({},n.user,{followers:i.__assign({},a,{edges:Object(s.c)(r,o)})})}}})}})}}))(m);n.d(t,"REQUEST_LIMIT",function(){return 15}),n.d(t,"ChannelFollowersContentComponent",function(){return m}),n.d(t,"ChannelFollowersContent",function(){return p})},EOIh:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatInput"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isEmbedded"}}}]}]}]}},{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hashtags"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:339}};n.loc.source={body:"query ChatInput($channelLogin: String! $isEmbedded: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nisPartner @include(if: $isEmbedded)\n}\nchannel: user(login: $channelLogin) {\nid\nself {\nbanStatus {\nisPermanent\n}\n}\ncheer {\nid\nhashtags {\nedges {\ncursor\nnode {\nid\ndescription\nimageURL\n}\n}\n}\nsettings {\nemoteMinimumBits\ncheerMinimumBits\nevent\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},EZlB:function(e,t,n){},EdhP:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c});var i=n("mrSG"),a=n("cr+I"),r=n("/7QA"),o=n("vRsq"),s={height:378,width:620,allowScrolling:!0,allowFullscreen:!0};function l(e,t){return c(function(e){e.video&&(e.video=Object(o.q)(e.video));var t=a.stringify(e);return r.q.config.playerBaseURL+"/?"+t}(e),t)}function c(e,t){void 0===t&&(t=s);var n,a,r=i.__assign({},s,t),o='<iframe src="'+e+'" frameborder="0" '+(r.allowFullscreen?'allowfullscreen="true" ':"")+(r.allowScrolling?"":'scrolling="no" ')+'height="'+r.height+'" width="'+r.width+'"></iframe>';return r.textLink&&(o+=(n=r.textLink.url,a=r.textLink.text,'<a href="'+n+'" style="padding:2px 0px 4px; display:block; width:345px; font-weight:normal; font-size:10px; text-decoration:underline;">'+a+"</a>")),o}},Epr8:function(e,t,n){},EuPq:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("3aAs"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickHandler=function(e){t.props.onClick&&t.props.onClick(),e.currentTarget.select()},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(r.a,{readOnly:!0,type:r.c.Text,value:this.props.value,onClick:this.handleClickHandler})},t}(a.Component);n.d(t,"a",function(){return o})},F6GT:function(e,t,n){"use strict";var i=n("mrSG"),a=n("/7QA"),r="control",o=n("VJH5");n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return u});var s="chatSettings";function l(){var e,t=a.n.get(s,{});return i.__assign({lastUsedFollowerDurations:{},showAutoModActions:!0,showMessageFlags:!0,showModerationActions:!0,showModIcons:!1,showTimestamps:!1,viewerChatFilterSettings:(e={},e[o.a.Aggressive]=!0,e[o.a.Identity]=!0,e[o.a.Profanity]=!0,e[o.a.Sexual]=!0,e),zachModeStatus:r},t)}function c(e,t){var n=l();n[e]=t,a.n.set(s,n)}function d(e){var t=l();delete t[e],a.n.set(s,t)}function u(e,t){var n=l();n.lastUsedFollowerDurations[e]=t,a.n.set(s,n)}},FAYk:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmodUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmodUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmodUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"mutation UnmodUser($input: UnmodUserInput!){\nunmodUser(input: $input) {\nchannel {\nid\nlogin\n}\ntarget {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},FQLb:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SyncedSettingsDeletedMessageDisplaySetting"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatUISettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletedMessageDisplaySetting"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:119}};n.loc.source={body:"query SyncedSettingsDeletedMessageDisplaySetting {\ncurrentUser {\nid\nchatUISettings {\ndeletedMessageDisplaySetting\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},FS60:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ChatInput_SendCheer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"validationError"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageContent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:377}};n.loc.source={body:"mutation ChatInput_SendCheer($input: SendCheerInput!) {\nsendCheer(input: $input) {\nid\ncurrentUser {\nid\nbitsBalance\n}\nvalidationError {\ncode\nmessage\nmessageContent {\ntext\nfragments {\ntext\ncontent {\n... on AutoMod {\ntopics {\ntype\nweight\n}\n}\n... on CheermoteToken {\nbitsAmount\nprefix\ntier\n}\n... on Emote {\nemoteID: id\nsetID\ntoken\n}\n... on User {\nid\nlogin\ndisplayName\n}\n}\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Ff8q:function(e,t,n){"use strict";function i(e){var t={};return e.forEach(function(e){t[e.from]={startIndex:e.from,id:e.emoteID}}),t}function a(e){return e.startsWith("@")?e.slice(1):e}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},Fj9y:function(e,t,n){},GCGb:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return h});var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("cZKs"),s=n("Ws8v"),l=n("X2PJ"),c=n("sUnt"),d=n("hnjF"),u=n("dEDE"),m=(n("gPTj"),"confirm-button"),p="deny-button",h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(s.a,{className:"twp-modal",background:l.a.Base,color:l.c.Alt,padding:3},a.createElement("h3",null,this.props.title),a.createElement(c.a,{className:"twp-modal__message",margin:{bottom:2}},this.props.children),a.createElement(c.a,{display:d.d.Flex,justifyContent:d.h.End},a.createElement(c.a,{margin:{right:1}},a.createElement(u.a,{onClick:this.props.onDenyClick,type:u.d.Hollow,"data-test-selector":p},Object(r.d)("Cancel","ConfirmationModal"))),a.createElement(u.a,{onClick:this.props.onConfirmClick,type:u.d.Alert,disabled:this.props.isConfirmDisabled,"data-test-selector":m},Object(r.d)("Ok","ConfirmationModal"))),a.createElement(o.a,{closeOnBackdropClick:!0}))},t}(a.Component)},GEha:function(e,t,n){},GEnX:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("XXm5"),s=n("sUnt"),l=n("hnjF"),c=n("7uM4"),d=n("+80q"),u=n("7d/q"),m=n("Ws8v"),p=n("X2PJ"),h=n("fCiU"),g=(n("sPFP"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onReplyClickHandler=function(){t.props.replyCommentContext?t.props.onReplyClick(Object(h.b)(t.props.replyCommentContext.author)):t.props.onReplyClick()},t}return i.__extends(t,e),t.prototype.render=function(){var e=Object(r.d)("Reply","DashboardModerationReplyButton");return this.props.context===o.c?a.createElement("button",{className:"video-chat-reply-button",onClick:this.onReplyClickHandler,"data-test-selector":"parent-reply-button"},a.createElement(s.a,{display:l.d.Flex},a.createElement(s.a,{className:"video-chat-reply-button__icon",display:l.d.Flex,padding:{right:.5}},a.createElement(c.a,{width:13,height:13,asset:c.b.Conversations,type:c.c.Inherit})),a.createElement(d.a,{align:l.l.Middle,type:d.e.Span},e))):this.props.context===o.a?a.createElement(u.a,{ariaLabel:e,type:u.c.Hollow,icon:c.b.Conversations,onClick:this.onReplyClickHandler,"data-test-selector":"moderation-reply-button","data-a-selector":"qa-vod-chat-reply-button"}):a.createElement(m.a,{color:p.c.Link,display:l.d.Inline,margin:{left:1}},a.createElement("button",{onClick:this.onReplyClickHandler,"data-test-selector":"reply-reply-button"},a.createElement(d.a,{type:d.e.Span},e)))},t}(a.Component))},GFmA:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("5zf8"),s=n("hnjF"),l=n("fPaz"),c=n("Ws8v"),d=n("uG/k"),u=n("i4Ys"),m=n("sUnt"),p=n("X2PJ"),h=n("7uM4"),g=n("+80q"),f=(n("Fj9y"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBalloonItemClick=function(){t.props.onBalloonItemClick&&t.props.onBalloonItemClick(t.props.index)},t}return i.__extends(t,e),t.prototype.render=function(){var e={src:this.props.gameChange.thumbnailUrl,alt:this.props.gameChange.label};return a.createElement(m.a,{className:"preview-card-game-balloon-row",display:s.d.Flex,flexWrap:s.f.NoWrap},a.createElement(u.a,{linkTo:this.props.gameChange.linkTo,onClick:this.onBalloonItemClick},a.createElement(m.a,{display:s.d.Flex,flexDirection:s.e.Row,padding:.5},a.createElement(c.a,{className:"preview-card-game-balloon-row__image-wrapper",flexGrow:0,flexShrink:0,borderRadius:p.b.Small,overflow:s.i.Hidden,position:s.j.Relative},a.createElement(l.b,{align:l.a.Center,ratio:l.c.BoxArt},a.createElement(d.a,i.__assign({},e))),a.createElement(c.a,{className:"preview-card-game-balloon-row__image-play-overlay",alignItems:s.b.Center,background:p.a.Overlay,color:p.c.Overlay,display:s.d.Flex,justifyContent:s.h.Center,position:s.j.Absolute,attachTop:!0,attachBottom:!0,attachLeft:!0,attachRight:!0},a.createElement(h.a,{asset:h.b.Play,type:h.c.Inherit}))),a.createElement(m.a,{display:s.d.Flex,flexDirection:s.e.Column,flexGrow:1,flexShrink:1,padding:{left:1,top:1}},a.createElement(m.a,{className:"preview-card-game-balloon-row__info-label"},a.createElement(g.a,null,this.props.gameChange.label)),a.createElement(m.a,{className:"preview-card-game-balloon-row__info-duration"},a.createElement(g.a,null,Object(o.b)(this.props.gameChange.duration)))))))},t}(a.Component)),v=n("0INk"),b=n("8/mp"),k=n("eJ65"),C=n("ygYM"),y=n("dEDE"),S=n("wp5a"),E=(n("vDRX"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBalloonToggle=function(e){t.props.onBalloonClick&&!e&&t.props.onBalloonClick()},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.videoGameChanges.length>0){var e=this.props.videoGameChanges.map(function(e){return e.gameID});Object(v.a)(e)}},t.prototype.render=function(){return a.createElement(m.a,{className:"preview-card-game-balloon",display:s.d.InlineBlock,position:s.j.Relative,margin:{top:.5}},a.createElement(k.a,{key:"game-balloon",display:s.d.Inline,onToggle:this.onBalloonToggle,hideBalloonOnInsideClick:!0},a.createElement(y.a,{type:y.d.Hollow,icon:h.b.ViewerList},a.createElement(m.a,{display:s.d.Flex,flexDirection:s.e.Row},a.createElement(g.a,null,Object(r.d)("Chapters","PreviewCardGameBalloon")),a.createElement(m.a,{margin:{left:1}},a.createElement(S.a,{label:this.props.videoGameChanges.length.toString()})))),a.createElement(C.a,{direction:C.b.TopLeft,size:C.c.Medium},a.createElement(m.a,{overflow:s.i.Hidden,display:s.d.Flex,flexDirection:s.e.Column,flexWrap:s.f.NoWrap},a.createElement(m.a,{padding:.5,flexShrink:0,flexGrow:0},a.createElement(g.a,{color:p.c.Alt2},Object(r.d)("Chapter Select","PreviewCardGameBalloon"))),a.createElement(m.a,{className:"preview-card-game-balloon__content",display:s.d.Flex,flexDirection:s.e.Column,flexGrow:1,flexShrink:1,flexWrap:s.f.NoWrap},a.createElement(b.b,null,a.createElement(m.a,{display:s.d.Flex,flexDirection:s.e.Column,flexWrap:s.f.NoWrap,fullHeight:!0},this.renderAdditionalGameList(this.props.videoGameChanges))))))))},t.prototype.renderAdditionalGameList=function(e){var t=this;return e.map(function(e,n){return a.createElement(f,{index:n,gameChange:e,key:e.offset,onBalloonItemClick:t.props.onBalloonItemClick})})},t}(a.Component)),N=n("kduP"),w=n("2xye"),_=n("Jsra"),D=function(e){return a.createElement(m.a,null,a.createElement(g.a,{color:p.c.Alt,ellipsis:!0},e.videoGameChanges.map(function(t,n,i){return a.createElement(s.g,{key:n},a.createElement(_.a,{to:{pathname:Object(N.b)(t.label),state:{content:w.PageviewContent.TextLink,medium:e.trackingContext&&e.trackingContext.medium}},type:_.b.Inherit},t.label,O(n,i.length-1)?null:", "))})))},O=function(e,t){return e===t},I=n("N0BP"),T=(n("XA5B"),function(e){var t=a.createElement(c.a,{className:"preview-card-iconic-image__wrapper",borderRadius:p.b.Small,overflow:s.i.Hidden},a.createElement(l.b,{ratio:e.aspect||l.c.BoxArt,align:l.a.Center},e.image));return e.linkTo&&(t=a.createElement(_.a,i.__assign({},Object(I.a)(e),{to:e.linkTo,onClick:e.onClick}),t)),t});T.displayName="PreviewCardIconicImage";var M=n("nNLF"),L=n("jh7r"),F=n("TSYQ"),x=n("GnwI"),j=(n("B3R5"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={didAnimatedPreviewLoad:!1,didAnimatedPreviewFailToLoad:!1,isHovered:!1},t.onImageError=function(){t.props.latencyTracking.reportInteractive()},t.onImageLoad=function(){t.props.latencyTracking.reportInteractive()},t.onAnimatedImageLoad=function(e){void 0!==t.props.animatedImageProps&&e.currentTarget.src===t.props.animatedImageProps.src&&t.setState({didAnimatedPreviewLoad:!0})},t.onAnimatedImageLoadError=function(e){void 0!==t.props.animatedImageProps&&e.currentTarget.src===t.props.animatedImageProps.src&&t.setState({didAnimatedPreviewFailToLoad:!0})},t.handleFocus=function(){t.setState({isHovered:!0})},t.handleBlur=function(){t.setState({isHovered:!1})},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.trackImageLatency||this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e={};return this.props.animatedImageProps&&(e={onMouseEnter:this.handleFocus,onMouseLeave:this.handleBlur,onFocus:this.handleFocus,onBlur:this.handleBlur}),a.createElement("div",i.__assign({},e,{onClick:this.props.onClick}),a.createElement(c.a,{background:p.a.Alt2,borderRadius:p.b.Medium,overflow:s.i.Hidden},a.createElement(l.b,{ratio:this.props.aspectRatio},this.renderImage())))},t.prototype.renderImage=function(){var e,t=!(!this.props.animatedImageProps||!this.state.isHovered||this.state.didAnimatedPreviewFailToLoad),n=F("preview-card-thumbnail__image",((e={})["preview-card-thumbnail__image--animated"]=this.state.isHovered&&this.state.didAnimatedPreviewLoad,e));return t&&void 0!==this.props.animatedImageProps?a.createElement("div",{className:n},a.createElement(d.a,i.__assign({},this.props.animatedImageProps,{title:this.props.title,onLoad:this.onAnimatedImageLoad,onError:this.onAnimatedImageLoadError,"data-test-selector":"preview-card-thumbnail__image-selector"}))):a.createElement("div",{className:n},a.createElement(d.a,i.__assign({},this.props.staticImageProps,{title:this.props.title,onLoad:this.onImageLoad,onError:this.onImageError,"data-test-selector":"preview-card-thumbnail__image-selector"})))},t}(a.Component)),A=Object(x.withLatencyTracking)("PreviewCardThumbnail")(j),P=(n("80G/"),function(e){var t=null;return e.subtitles&&e.subtitles.length>0&&(t=e.subtitles.map(function(e,t){return a.createElement(m.a,{key:t,"data-test-selector":"preview-card-titles__subtitle"},a.createElement(g.a,{color:p.c.Alt,ellipsis:!0},"string"==typeof e?e:a.createElement(_.a,{"data-a-target":e.automationSelector,to:e.linkTo,onClick:e.onClick,type:_.b.Inherit},e.text)))})),a.createElement("div",null,a.createElement(_.a,i.__assign({},Object(I.a)(e),{to:e.linkTo,onClick:e.onClick,type:_.b.Inherit,"data-test-selector":"preview-card-titles__primary-link"}),a.createElement(g.a,{type:g.e.H3,fontSize:p.d.Size5,lines:1,bold:!0,ellipsis:!0},e.title)),a.createElement(m.a,{className:"preview-card-titles__subtitle-wrapper"},t))}),R=n("H1ft");function U(e){return"en"!==(r.q.intl.getLanguageCode()||"en").slice(0,2)?e:e.charAt(0).toUpperCase().concat(e.slice(1))}var B,V=n("ZbA5"),H=n("oB8h"),G=n("QVaV"),q=n("hyVY"),W=n("MXoD"),z=n("imSJ"),Q=n("5ezV"),Y=n("0LAi"),K=n("/MKj"),X=n("fvjX"),$=n("1/iK"),J=n("aCAx"),Z=n("y5D0"),ee=n("DMoW"),te=n("kRBY"),ne=n("d0xR"),ie=n("b7S+");function ae(e){return!!e&&e.type in ee.Ra}function re(e){return!!e&&void 0!==e.canViewRestricted}!function(e){e.LockSelector="video-lock",e.UpsellSelector="upsell"}(B||(B={}));var oe,se,le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subscribeToChannel=function(){ae(t.props.restriction)&&t.props.channelLogin&&t.props.showSubscriptionModal({channelLogin:t.props.channelLogin})},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.restriction,n=e.isAuthorized;if(!t||ae(t)&&!this.props.channelLogin||re(t)&&(!t.productName||!t.title))return null;var i=re(t)&&t.canViewRestricted||ae(t)&&n,o=i?Object(r.d)("unlocked","VideoPreviewCardRestriction"):Object(r.d)("locked","VideoPreviewCardRestriction"),l=i?h.b.Unlock:h.b.Lock;return a.createElement(m.a,null,!i&&this.renderRestriction(t),a.createElement(c.a,{display:s.d.InlineFlex,position:s.j.Absolute,attachTop:this.props.attachTop,attachBottom:!this.props.attachTop,attachRight:!0,margin:{x:1,y:1},padding:{x:.5,y:.5},zIndex:s.n.Default,fontSize:p.d.Size6,background:p.a.Overlay,borderRadius:p.b.Medium,color:p.c.Overlay},a.createElement(ie.a,{direction:this.props.attachTop?ie.c.Bottom:ie.c.Top,align:ie.b.Right,label:o},a.createElement(h.a,{asset:l,height:20,width:20}))))},t.prototype.renderRestriction=function(e){return a.createElement(c.a,{background:p.a.Overlay,className:"video-preview-card-restriction",color:p.c.Overlay,display:s.d.Flex,position:s.j.Absolute,attachTop:!0,attachLeft:!0,zIndex:s.n.Default,padding:{x:5},textAlign:s.k.Center,fullWidth:!0,fullHeight:!0,alignItems:s.b.Center,alignContent:s.a.Center,flexDirection:s.e.Column,flexWrap:s.f.Wrap,justifyContent:s.h.Center,"data-test-selector":B.LockSelector},a.createElement(s.g,{margin:{bottom:1}},a.createElement(g.a,{color:p.c.Overlay,fontSize:p.d.Size5,"data-test-selector":B.UpsellSelector},this.getUpsellMessage(e))),a.createElement(m.a,null,this.renderCTAButton(e)))},t.prototype.getUpsellMessage=function(e){return re(e)?Object(r.d)("View with {title}",{title:e.title||""},"VideoPreviewCardRestriction"):""},t.prototype.renderCTAButton=function(e){var t=Object(r.e)("Get Access","VideoPreviewCardRestriction");return re(e)?(t=Object(r.d)("Get It Now","VideoPreviewCardRestriction"),a.createElement(y.a,{type:y.d.Hollow,ariaLabel:t,targetBlank:!0,disabled:!e.upsellLinkTo,linkTo:e.upsellLinkTo,overlay:!0},t)):a.createElement(y.a,{type:y.d.Hollow,ariaLabel:t,targetBlank:!0,onClick:this.subscribeToChannel,overlay:!0},t)},t}(a.PureComponent),ce=Object(K.connect)(function(e){var t=Object(te.e)(e);return{currentUserLogin:t&&t.login,isLoggedIn:Object(te.f)(e)}},function(e){return Object(X.bindActionCreators)({login:function(){return Object(Z.e)($.a.FollowButton)},showSubscriptionModal:function(e){var t=i.__rest(e,[]);return Object(J.d)(ne.SubscribeModal,t)}},e)})(le),de=n("HH5h");n("5NSO");function ue(e){return void 0!==e.streamType}function me(e){return void 0!==e.watchedProgressPercent}function pe(e){return void 0!==e.clipCreatedByChannelLogin}!function(e){e.Avatar="preview-card-avatar",e.BoxArt="preview-card-box-art"}(oe||(oe={})),function(e){e[e.SingleGameList=1]="SingleGameList",e[e.SingleChannelList=2]="SingleChannelList",e[e.MixedGameAndChannelList=3]="MixedGameAndChannelList"}(se||(se={}));var he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getTrackingContext=function(e){var n=t.props.trackingContext;return{content:n&&n.content?n.content:e,medium:n&&n.medium}},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement("div",i.__assign({className:"preview-card"},Object(I.a)(this.props)),a.createElement(c.a,{position:s.j.Relative},this.renderLiveRestrictionOverlay(),this.renderVODRestrictionOverlay(),a.createElement(_.a,{to:Object(W.a)(this.getTrackingContext(w.PageviewContent.VideoThumbnail),this.props.linkTo),onClick:this.props.onThumbnailClick||this.props.onClick,"data-a-target":"preview-card-image-link"},this.props.thumbnailImageProps&&a.createElement(A,{staticImageProps:this.props.thumbnailImageProps,animatedImageProps:me(this.props)&&this.props.animatedImageProps||void 0,title:me(this.props)&&this.props.datePublished&&Object(r.c)(new Date(this.props.datePublished),"medium")||void 0,trackImageLatency:this.props.trackImageLatency}),this.renderOverlay())),a.createElement(m.a,{display:s.d.Flex,flexWrap:s.f.NoWrap,margin:{top:1}},a.createElement(m.a,{flexGrow:0,flexShrink:0},this.renderIconicImage()),a.createElement(m.a,{className:"preview-card__titles-wrapper",flexGrow:1,flexShrink:1,fullWidth:!0},this.renderTitles(),this.renderTags()),this.props.contextualCardActionProps&&a.createElement(m.a,{flexGrow:0,flexShrink:0},a.createElement(this.props.contextualCardActionProps.component,i.__assign({},this.props.contextualCardActionProps.props)))))},t.prototype.renderOverlay=function(){return ue(this.props)?a.createElement(M.a,{topLeft:this.props.hostedByChannelLogin||this.props.streamType!==H.a.Live?a.createElement(V.a,{type:this.props.streamType,hosting:!!this.props.hostedByChannelLogin}):a.createElement(c.a,{fontSize:p.d.Size4},a.createElement(L.a,{value:Object(r.d)("LIVE","VideoPreviewCard"),withBackground:L.b.Live})),topRight:void 0,bottomLeft:a.createElement(L.a,{value:Object(z.d)(this.props.currentViewerCount),withBackground:L.b.Overlay}),bottomRight:void 0,hideGradient:!0}):me(this.props)?a.createElement(M.a,{topLeft:void 0!==this.props.durationInSeconds&&a.createElement(L.a,{value:Object(q.b)(this.props.durationInSeconds),icon:h.b.Play,withBackground:L.b.Overlay}),topRight:this.props.listPosition&&a.createElement(L.a,{withBackground:L.b.Overlay,value:this.getListPositionLabel()}),bottomLeft:a.createElement(L.a,{value:this.getViewCountLabel(),withBackground:L.b.Overlay}),bottomRight:this.props.datePublished?a.createElement(L.a,{value:U(Object(r.h)(new Date(this.props.datePublished))),withBackground:L.b.Overlay}):null,progressBarPercent:this.props.watchedProgressPercent,topBar:this.props.topBar,hideGradient:!0}):pe(this.props)?a.createElement(M.a,{topLeft:a.createElement(L.a,{value:Object(q.b)(this.props.durationInSeconds),icon:h.b.Clip,withBackground:L.b.Overlay}),topRight:void 0,bottomLeft:a.createElement(L.a,{value:this.getViewCountLabel(),withBackground:L.b.Overlay}),bottomRight:this.props.datePublished?a.createElement(L.a,{value:U(Object(r.h)(new Date(this.props.datePublished))),withBackground:L.b.Overlay}):null,hideGradient:!0}):void 0},t.prototype.getListPositionLabel=function(){return me(this.props)&&this.props.listPosition?Object(r.d)("{totalVideos, plural, one {{position} / # video} other {{position} / # videos}}",{position:this.props.listPosition.position,totalVideos:this.props.listPosition.totalVideos},"VideoPreviewCard"):""},t.prototype.getViewCountLabel=function(){return me(this.props)||pe(this.props)?Object(r.d)("{viewerCount, plural, one {{viewerCountFormatted} view} other {{viewerCountFormatted} views}}",{viewerCount:this.props.viewCount,viewerCountFormatted:Object(r.g)(this.props.viewCount,{maximumFractionDigits:Object(Q.b)(this.props.viewCount)})},"VideoPreviewCard"):""},t.prototype.renderIconicImage=function(){return this.props.context===se.SingleChannelList&&this.props.gameBoxArtImageProps&&this.props.gameBoxArtImageProps.src&&this.props.gameTitleLinkTo?a.createElement(m.a,{margin:{right:1}},a.createElement(T,{image:a.createElement(d.a,i.__assign({},this.props.gameBoxArtImageProps)),linkTo:Object(W.a)(this.getTrackingContext(w.PageviewContent.GameBoxart),this.props.gameTitleLinkTo),onClick:this.props.onGameTitleClick,aspect:l.c.BoxArt,"data-test-selector":oe.BoxArt,"data-a-target":"preview-card-boxart-link"})):(this.props.context===se.SingleGameList||this.props.context===se.MixedGameAndChannelList)&&this.props.channelImageProps&&this.props.channelImageProps.src?a.createElement(m.a,{margin:{right:1}},a.createElement(T,{image:a.createElement(de.a,i.__assign({},this.props.channelImageProps,{size:40})),linkTo:Object(W.a)(this.getTrackingContext(w.PageviewContent.UserThumbnail),this.props.channelLinkTo),onClick:this.props.onChannelImageClick||this.props.onChannelLoginClick,aspect:l.c.Aspect1x1,"data-test-selector":oe.Avatar})):void 0},t.prototype.renderTitles=function(){var e=null,t=[];return this.shouldShowGameBalloon(this.props)||t.push({text:Object(G.a)(this.props.channelLogin,this.props.channelDisplayName,!0),linkTo:Object(W.a)(this.getTrackingContext(w.PageviewContent.ChannelMetadata),this.props.channelLinkTo),onClick:this.props.onChannelLoginClick,automationSelector:"preview-card-channel-link"}),pe(this.props)&&this.props.clipCreatedByChannelLoginLinkTo?t.push({text:Object(r.d)("Clipped by {userName}",{userName:this.props.clipCreatedByChannelLogin||""},"VideoPreviewCard"),linkTo:this.props.clipCreatedByChannelLoginLinkTo,onClick:this.props.onClipCreatedByChannelLoginClick,automationSelector:"preview-card-clip-curator-link"}):me(this.props)&&this.props.multipleVideoGameMarkersType&&this.props.videoGameChanges&&this.props.videoGameChanges.length>0?e=this.renderPreviewCardGameInfo(this.props.multipleVideoGameMarkersType,this.props.videoGameChanges,this.props.onVideoGameBalloonClick,this.props.onVideoGameBalloonItemClick):this.props.context!==se.SingleGameList&&this.props.gameTitle&&this.props.gameTitleLinkTo&&t.push({text:this.props.gameTitle,linkTo:Object(W.a)(this.getTrackingContext(w.PageviewContent.GameMetadata),this.props.gameTitleLinkTo),onClick:this.props.onGameTitleClick,automationSelector:"preview-card-game-link"}),a.createElement(a.Fragment,null,a.createElement(P,{title:this.props.title,onClick:this.props.onVideoTitleClick||this.props.onClick,linkTo:Object(W.a)(this.getTrackingContext(w.PageviewContent.VideoTitle),this.props.linkTo),subtitles:t,"data-a-target":"preview-card-title-link"}),e)},t.prototype.renderTags=function(){return this.props.tagListProps&&0!==this.props.tagListProps.tags.length?a.createElement(m.a,{margin:{top:.5}},a.createElement(Y.a,i.__assign({},this.props.tagListProps,{tagNumberLimit:3}))):null},t.prototype.renderLiveRestrictionOverlay=function(){return ue(this.props)&&ae(this.props.restriction)?a.createElement(ce,{restriction:this.props.restriction,isAuthorized:this.props.isAuthorized,channelLogin:this.props.channelLogin,attachTop:!0}):null},t.prototype.renderVODRestrictionOverlay=function(){return me(this.props)&&re(this.props.restriction)&&this.props.restriction.productName&&this.props.restriction.title?a.createElement(ce,{restriction:this.props.restriction,attachTop:!0}):null},t.prototype.shouldShowGameBalloon=function(e){return!!me(e)&&(!!(e.videoGameChanges&&e.videoGameChanges.length>0)&&e.multipleVideoGameMarkersType===R.a.Balloon)},t.prototype.renderPreviewCardGameInfo=function(e,t,n,i){switch(e){case R.a.Balloon:return a.createElement(E,{videoGameChanges:t,onBalloonClick:n,onBalloonItemClick:i});case R.a.Inline:return a.createElement(D,{videoGameChanges:t,trackingContext:this.props.trackingContext});case R.a.None:return null;default:return e}},t}(a.Component),ge=Object(x.withLatencyTracking)("PreviewCard",{autoReportInteractive:!0})(he);n.d(t,!1,function(){return oe}),n.d(t,"b",function(){return se}),n.d(t,!1,function(){return he}),n.d(t,"a",function(){return ge})},GHzV:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("3sMn"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return this.props.hideOnboardingPrompts?null:this.props.children},t}(a.Component);var s=Object(r.b)(function(e){return{hideOnboardingPrompts:e.hideOnboardingPrompts}})(o);n.d(t,!1,function(){return o}),n.d(t,"a",function(){return s})},GLn2:function(e,t,n){},GOKC:function(e,t,n){},GPTu:function(e,t,n){},GSWs:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SyncedSettingsSetReadableChatColors"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetReadableChatColorsEnabledInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setReadableChatColorsEnabled"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isReadableChatColorsEnabled"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:167}};n.loc.source={body:"mutation SyncedSettingsSetReadableChatColors($input: SetReadableChatColorsEnabledInput!) {\nsetReadableChatColorsEnabled(input:$input) {\nisReadableChatColorsEnabled\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},GXBl:function(e,t,n){},Gcqi:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_Bits"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsUserSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsUserSettings"},directives:[]}]}}]}}]}}],loc:{start:0,end:187}};i.loc.source={body:'#import "twilight/features/bits/models/bits-user-settings-fragment.gql"\nquery BitsCard_Bits {\ncurrentUser {\nid\nbitsBalance\nlogin\nbitsUserState\nbitsUserSettings {\n...bitsUserSettings\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("5Czc").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},GvwK:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"hostingChannel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:160}};n.loc.source={body:"fragment hostingChannel on User {\nhosting {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\nbroadcastSettings {\nid\nlanguage\n}\nstream {\nid\ngame {\nid\nname\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},GxR5:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o});var i="/user/account-recovery",a="https://help.twitch.tv/customer/portal/emails/new",r="https://help.twitch.tv/customer/portal/articles/1727973-about-site-suspensions-channel-bans-and-dmca",o="https://www.twitch.tv/p/legal/terms-of-service/"},GzyO:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return p});var i=n("mrSG"),a=n("/7QA"),r=n("OpME"),o="twilight.emote_picker_history",s=24,l=[{id:"64138",token:"SeemsGood"},{id:"41",token:"Kreygasm"},{id:"245",token:"ResidentSleeper"},{id:"28087",token:"WutFace"},{id:"86",token:"BibleThump"},{id:"9",token:"<3"},{id:"58765",token:"NotLikeThis"},{id:"81274",token:"VoHiYo"},{id:"88",token:"PogChamp"},{id:"425618",token:"LUL"},{id:"25",token:"Kappa"},{id:"30259",token:"HeyGuys"}];function c(e){var t=h(),n=t[e.id];n?(n.uses++,n.lastUpdatedAt=Date.now()):t[e.id]={emote:e,lastUpdatedAt:Date.now(),uses:1},a.n.set(o,t)}function d(){var e=h();if(!(Object.keys(e).length>=s)){for(var t={},n=0;n<l.length;n++){var r=l[n];e[r.id]||(t[r.id]={emote:r,lastUpdatedAt:n,uses:0})}var c=i.__assign({},t,e);a.n.set(o,c)}}function u(){return Object(r.b)(l)}function m(e){var t=h(),n=[],i=!1;return Object.keys(t).forEach(function(a){var r=t[a];if(void 0!==r&&void 0!==e[r.emote.token]){var o=e[r.emote.token].id;o!==a&&(r.emote.id=o,t[o]=r,delete t[o],i=!0),n.push(r)}}),i&&a.n.set(o,t),n.sort(function(e,t){return e.uses>t.uses?-1:t.uses>e.uses?1:e.lastUpdatedAt>t.lastUpdatedAt?-1:t.lastUpdatedAt>e.lastUpdatedAt?1:0}),Object(r.b)(n.slice(0,24).map(function(e){return e.emote}))}function p(){var e=h(),t={};return Object.keys(e).forEach(function(n){void 0!==e[n]&&(t[e[n].emote.token]={count:e[n].uses})}),t}function h(){var e=a.n.get(o,{})||{};return e.undefined&&(delete e.undefined,a.n.set(o,e)),e}},H0r1:function(e,t,n){},H1ft:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var i,a=n("/7QA"),r=n("D7An");!function(e){e.None="None",e.Inline="Inline",e.Balloon="moments_with_images"}(i||(i={}));var o=function(){switch(a.q.experiments.getAndTrackAssignment(r.b.Archer)){case"moments_with_images":return i.Balloon;case"inline":return i.Inline;case"control":default:return i.None}}},H31v:function(e,t,n){"use strict";var i,a;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),function(e){e.Bits="bits",e.Leaderboard="bits-leader"}(i||(i={})),function(e){e.Badge="badge_update",e.Balance="balance_update",e.FirstPurchase="first_bits_purchase",e.BadgeNotification="badge_update_notification"}(a||(a={}))},"H4/V":function(e,t,n){},HGFl:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"d",function(){return c});var i=n("NAv5"),a={RFC3399:"YYYY-MM-DDTHH:mm:ssZ",timeString:"h:mma"};function r(e,t){return Object(i.format)(e,t)}function o(e,t){var n=new Date;return n.setHours(e.hours),n.setMinutes(e.minutes),n.setSeconds(0),r(n,t)}function s(e){return Object(i.parse)(e)}function l(e){var t=e.split(":");if(2!==t.length)throw new Error("invalid time string: "+e);var n=parseInt(t[0],10),i=parseInt(t[1].substring(0,2),10),a=t[1].substring(t[1].length-2);if(12===n&&"am"===a&&(n=0),"pm"===a&&n<12&&(n+=12),isNaN(n)||n<0||n>23||isNaN(i)||i<0||i>59)throw new Error("invalid time string: "+e);return{hours:n,minutes:i}}function c(e){return e.hours>-1&&e.hours<24&&e.minutes>-1&&e.minutes<60&&(!e.seconds||e.seconds>-1&&e.seconds<60)}},HSqT:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var i=n("/7QA"),a=[{code:"ar",label:""},{code:"bg",label:""},{code:"ca",label:"Catal"},{code:"cs",label:"etina"},{code:"da",label:"Dansk"},{code:"de",label:"Deutsch"},{code:"el",label:""},{code:"en",label:"English"},{code:"es",label:"Espaol"},{code:"fi",label:"Suomi"},{code:"fr",label:"Franais"},{code:"hi",label:" "},{code:"hu",label:"Magyar"},{code:"id",label:"Bahasa Indonesia"},{code:"it",label:"Italiano"},{code:"ja",label:""},{code:"ko",label:""},{code:"ms",label:" "},{code:"nl",label:"Nederlands"},{code:"no",label:"Norsk"},{code:"pl",label:"Polski"},{code:"pt",label:"Portugus"},{code:"ro",label:"Romn"},{code:"ru",label:""},{code:"sk",label:"Slovenina"},{code:"sv",label:"Svenska"},{code:"th",label:""},{code:"tl",label:"Tagalog"},{code:"tr",label:"Trke"},{code:"uk",label:""},{code:"vi",label:"Ting Vit"},{code:"zh-hk",label:"()"},{code:"zh",label:""}];function r(e){return void 0===e&&(e=!1),[{code:"asl",label:"American Sign Language"},{code:"other",label:e?Object(i.d)("Other","broadcaster-languages"):"Other"}]}var o=new Set(a.concat(r()).map(function(e){return e.code}));function s(){var e=i.q.intl.getLanguageCode(),t=function(t){return"en"===t.code?0:e&&e.startsWith(t.code)?1:2};return a.slice().sort(function(e,n){var i=t(e),a=t(n);return i!==a?i-a:i+":"+e.label<a+":"+n.label?-1:1}).concat(r(!0))}},HWU2:function(e,t,n){},HXcb:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelHeader"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"videos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"follows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query ChannelPage_ChannelHeader($login: String!) {\nuser(login: $login) {\nid\nvideos {\ntotalCount\n}\nfollowers {\ntotalCount\n}\nfollows {\ntotalCount\n}\ncheer {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},HfAM:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interval"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"benefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:469}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nfragment subProduct on SubscriptionProduct {\nid\nurl\nprice\npriceInfo {\n...subscriptionProductPriceInfo\n}\nname\ntier\ninterval {\nunit\n}\nstate\nemotes {\nid\nsetID\ntoken\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nbenefit {\nid\ntier\n}\n}\nowner {\nid\ndisplayName\nlogin\nsubscriptionProducts {\nid\ntier\nurl\nprice\nemotes {\nid\ntoken\n}\n}\nstream {\nid\ntype\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("35qb").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},HiyX:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"tenure"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionTenure"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"daysRemaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}}],loc:{start:0,end:62}};n.loc.source={body:"fragment tenure on SubscriptionTenure {\ndaysRemaining\nmonths\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},HjUq:function(e,t,n){},HjbF:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return c});var i=n("DpwM");function a(e,t,n,i){return e in t?{bitsConfig:i,commentID:e,cursor:t[e]}:{bitsConfig:i,commentID:e,videoID:n}}function r(e){var t=e.currentVideoTime<e.offsetRange.beginSec,n=e.currentVideoTime>e.offsetRange.endSec;return t&&l(e.cursor)||n&&s(e.cursor)}function o(e){return s(e.cursor)&&function(e){var t=e.offsetEndTime-e.offsetThreshold;return e.currentVideoTime>=t&&e.currentVideoTime<=e.offsetEndTime}({currentVideoTime:e.currentVideoTime,offsetEndTime:e.offsetEndTime,offsetThreshold:e.offsetThreshold})}function s(e){return e.future!==i.g}function l(e){return e.past!==i.g}function c(e,t){if(!e)return!1;var n=!!t&&null!==t.id&&e.id===t.id,i=e.roles&&(e.roles.isGlobalMod||e.roles.isSiteAdmin||e.roles.isStaff)||!1;return!(!t||!t.self)&&!!t.self.isModerator||i||n}},HzXE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRoomBanStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRoomBanStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}},{kind:"Argument",name:{kind:"Name",value:"userID"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moderator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"targetUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:283}};n.loc.source={body:"query ChatRoomBanStatus($targetUserID: ID! $channelID: ID!) {\nchatRoomBanStatus(channelID: $channelID userID: $targetUserID) {\nbannedUser {\nid\nlogin\ndisplayName\n}\ncreatedAt\nexpiresAt\nisPermanent\nmoderator {\nid\nlogin\ndisplayName\n}\n}\ntargetUser: user (id: $targetUserID) {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},I8wU:function(e,t,n){},IIop:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n("XIZb"),a=Object(i.a)("ChatConnection"),r=a.withChatServiceProvider,o=a.withContext,s=r,l=o(function(e){return{chatConnectionAPI:e.serviceAPI,setChatConnectionAPI:e.setServiceAPI}})},IKE4:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"badge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Badge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image1x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"NORMAL"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image2x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"DOUBLE"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image4x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"QUADRUPLE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAction"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickURL"},arguments:[],directives:[]}]}}],loc:{start:0,end:170}};n.loc.source={body:"fragment badge on Badge {\nid\nsetID\nversion\ntitle\nimage1x: imageURL(size: NORMAL)\nimage2x: imageURL(size: DOUBLE)\nimage4x: imageURL(size: QUADRUPLE)\nclickAction\nclickURL\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},IRJ5:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/MKj"),s=n("/7QA"),l=n("gcd7"),c=n("yR8l"),d=n("5zf8"),u=n("DMoW"),m=n("2xye"),p=n("eAdp"),h=n("gMwc"),g=n("5Siz"),f=n("Y5lD");function v(){return Object(s.d)("An unexpected error occurred. Try again.","BookmarkCommandHandler")}function b(){return Object(s.d)("You can only add stream markers during live streams. Try again when the channel is live streaming.","BookmarkCommandHandler")}var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bookmark=function(e){if(void 0===e&&(e=""),t.props.markersData)return{deferred:t.props.markersData.refetch().then(function(){var n=t.props.markersData,i=n.user&&n.user.stream&&n.user.stream.id,a=n.user&&n.user.stream&&n.user.stream.createdAt;return i?t.createBookmarkHelper(i,e,a):Promise.resolve({notice:b()})})}},t.createBookmarkHelper=function(e,n,i){var a=n.substring(0,g.a).trim();return t.props.createVideoBookmark({variables:{input:{broadcastID:e,description:a,medium:t.props.isPopout?"popout_chat":"chat",platform:m.SpadePlatform.Web}}}).then(function(e){var t=e.data&&e.data.createVideoBookmark;if(t&&t.error&&t.error.code)switch(t.error.code){case u.J.ARCHIVES_DISABLED:return{notice:Object(s.d)("Past Broadcast storage must be enabled in order to add stream markers. Enable via Channel Settings and try again.","BookmarkCommandHandler")};case u.J.BROADCAST_FORMAT_INVALID_PREMIERE:case u.J.BROADCAST_FORMAT_INVALID_RERUN:return{notice:Object(s.d)("You can only add stream markers during live streams. Try again when the channel is live streaming and not running a Premiere or Rerun.","BookmarkCommandHandler")};case u.J.BROADCASTER_NOT_LIVE:return{notice:b()};case u.J.USER_UNAUTHORIZED:return{notice:Object(s.d)("You don't have permission to create stream markers for this channel.","BookmarkCommandHandler")};case u.J.INTERNAL_SERVER_ERROR:case u.J.VOD_NOT_READY:default:return{notice:v()}}var n=null===i?null:Object(d.b)(Object(f.a)(i),d.a.ClockHMS),r=""!==a;return{notice:n&&r?Object(s.d)('Successfully added a stream marker at {time}: "{description}"',{description:a,time:n},"BookmarkCommandHandler"):n?Object(s.d)("Successfully added a stream marker at {time}",{time:n},"BookmarkCommandHandler"):r?Object(s.d)('Successfully added a stream marker: "{description}"',{description:a},"BookmarkCommandHandler"):Object(s.d)("Successfully added a stream marker","BookmarkCommandHandler")}}).catch(function(){return{notice:v()}})},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.markersData?a.createElement(l.a,{channelLogin:this.props.channelLogin,command:"marker",handler:this.bookmark}):null},t}(a.Component);var C=Object(r.compose)(Object(o.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}}),Object(c.a)(p,{name:"createVideoBookmark"}),Object(c.a)(h,{name:"markersData",skip:function(e){return!e.firstPageLoaded}}))(k);n.d(t,"a",function(){return C})},J6gT:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_StreamType_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"query ChannelPage_StreamType_User($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\ndisplayName\nstream {\nid\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},JGCS:function(e,t,n){},JiJH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnVIPUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RevokeVIPInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"revokeVIP"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"revokee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"mutation UnVIPUser($input: RevokeVIPInput!){\nrevokeVIP(input: $input) {\nchannel {\nid\n}\nrevokee {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},JzSO:function(e,t,n){},"K+oU":function(e,t,n){},K29g:function(e,t,n){"use strict";var i,a;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),function(e){e.TrackingID="trackingID",e.GameName="game",e.GameID="gameID",e.Title="title",e.Start="start",e.End="end"}(i||(i={})),function(e){e.TrackingContent="tt_content",e.TrackingMedium="tt_medium",e.VideoStartTime="t"}(a||(a={}))},KD05:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var i=function(e){return"v"+e},a=function(e){return e+"s"}},KGti:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"j",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"i",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return f}),n.d(t,"f",function(){return v}),n.d(t,"b",function(){return b}),n.d(t,"d",function(){return k}),n.d(t,"k",function(){return C}),n.d(t,"m",function(){return y}),n.d(t,"l",function(){return S});var i,a=n("mrSG"),r=n("XmgI"),o=n("p52R"),s=n("ZtEv"),l=n("a1OF"),c=n("aF6k");function d(e){return e+"-automod-rejected"}function u(e,t,n,i){var c={badges:null,badgeDynamicData:null,bits:0,color:"",displayName:"",id:"",userID:n,username:n,userType:o.a.User,emotes:{}},u=Object(l.a)(t,c,r.a);return{type:s.b.AutoMod,autoModType:s.a.MessageRejectedPrompt,id:d(e),category:i,rejectedMessage:a.__assign({},u,{type:s.b.Message,messageType:s.c.Post,id:e})}}function m(e,t,n,i,c){var u={badges:null,badgeDynamicData:null,bits:0,color:"",displayName:"",id:"",userID:n,username:n,userType:o.a.User,emotes:{}},m=Object(l.a)(t,u,r.a);return{type:s.b.AutoMod,autoModType:s.a.CheerMessageRejectedPrompt,id:d(e),messageID:e,category:i,targetUserID:c,originalMessage:t,rejectedMessage:a.__assign({},m,{type:s.b.Message,messageType:s.c.Post,id:e})}}function p(){return{id:Object(c.a)("automod-message-rejected"),type:s.b.AutoMod,autoModType:s.a.MessageRejected}}function h(){return{id:Object(c.a)("automod-message-allowed"),type:s.b.AutoMod,autoModType:s.a.MessageAllowed}}function g(e){return{id:Object(c.a)("automod-message-denied"),msg_id:e.data.msg_id,type:s.b.AutoMod,autoModType:s.a.MessageModApproved}}function f(e){return{id:Object(c.a)("automod-message-denied"),msg_id:e.data.msg_id,type:s.b.AutoMod,autoModType:s.a.MessageModDenied}}function v(){return{id:Object(c.a)("automod-message-denied"),type:s.b.AutoMod,autoModType:s.a.MessageDenied}}function b(){return{id:Object(c.a)("automod-cheer-message-denied"),type:s.b.AutoMod,autoModType:s.a.CheerMessageDenied}}function k(){return{id:Object(c.a)("automod-cheer-message-timeout"),type:s.b.AutoMod,autoModType:s.a.CheerMessageTimeout}}function C(e,t,n,a){return{id:Object(c.a)("channel-moderation-action"),type:s.b.ModerationAction,moderationActionType:e,level:i.Channel,createdByLogin:t,createdByUserID:n,args:a}}function y(e,t,n,a,r,o,l,d){return{id:Object(c.a)("channel-moderation-action"),type:s.b.ModerationAction,moderationActionType:e,level:i.User,createdByLogin:t,createdByUserID:n,targetUserLogin:a,duration:r,reason:o,messageBody:l,messageID:d}}function S(e,t,n,i){return{id:Object(c.a)("channel-moderation-action"),type:s.b.TargetedModerationAction,targetedModerationActionType:e,targetUserID:t,messageBody:n,targetMessageID:i}}!function(e){e[e.Channel=0]="Channel",e[e.User=1]="User"}(i||(i={}))},KO0n:function(e,t,n){},KOTp:function(e,t,n){"use strict";var i,a=n("q1tI"),r=n("/7QA"),o=n("yWUM"),s=n("dEDE");!function(e){e.ClipWatchFullButton="clips-watch-full-button"}(i||(i={}));var l=function(e){var t=e.buttonType||s.d.Default;if(!e.video)return a.createElement(s.a,{type:t,disabled:!0},Object(r.d)("Full Video Unavailable","ClipsFullVideoButton"));var n=(e.useAbsoluteURL?"https://twitch.tv/videos/"+e.video.id:"/videos/"+e.video.id)+"?tt_content="+e.tt_content+"&tt_medium="+e.tt_medium+"&t="+Object(o.a)(e.video.offsetSeconds);return a.createElement(s.a,{linkTo:n,type:t,targetBlank:e.targetBlank,"data-test-selector":i.ClipWatchFullButton},Object(r.d)("Watch Full Video","ClipsFullVideoButton"))};n.d(t,!1,function(){return i}),n.d(t,"a",function(){return l})},KYAw:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var i=n("mrSG"),a=n("cr+I"),r=n("Addw");function o(e,t){var n=new URL("https://www.twitch.tv/collections/"+e);return t&&(n.search=a.stringify(t)),n.toString()}function s(e,t){var n=new URL("https://www.twitch.tv/videos/"+e);return t&&(n.search=a.stringify(i.__assign({},t,{t:"number"==typeof t.t?Object(r.a)(t.t):void 0}))),n.toString()}},Kae6:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("pVnL"),a=n.n(i),r=n("q1tI"),o=n("fNzW"),s=n("vCsY"),l=n("hnjF"),c=n("X2PJ"),d=n("2nDl"),u=(n("VFp6"),function(e){var t,n={"tw-textarea":!0,"tw-textarea--no-resize":e.noResize,"tw-textarea--error":e.error};e.tabIndex&&(t=e.tabIndex);var i=d.c.Default;e.size&&(i=e.size);var u={paddingRight:e.paddingRight?e.paddingRight/10+"rem":void 0};return r.createElement(c.e,{display:l.d.Block,borderRadius:c.b.Medium,overflow:e.overflow,fontSize:d.b[i],fullWidth:!0},r.createElement("textarea",a()({className:Object(o.a)(n),autoFocus:e.autoFocus,cols:e.cols,disabled:e.disabled,id:e.id,maxLength:e.maxLength,name:e.name,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,onKeyDown:e.onKeyDown,style:u,placeholder:e.placeholder,rows:e.rows,tabIndex:t,value:e.value,defaultValue:e.defaultValue,ref:e.refDelegate,readOnly:e.readOnly},Object(s.a)(e))))});u.displayName="TextArea",u.displayName="TextArea"},KriR:function(e,t,n){"use strict";n.d(t,"h",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"d",function(){return m}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return u});var i,a=n("/7QA"),r=n("2xye");function o(e){var t={channel:e.channelLogin,channel_id:e.channelId,payment_type:e.paymentType,payment_flow:e.paymentFlow,quantity:e.quantity,action:e.action,action_detail:e.actionDetail,product_id:e.productId,ticket_price:e.ticketPrice,currency:e.currency,saved_payment:e.savedPayment,is_anonymous:e.isAnonymous,checkout_source:e.trackingContext.source};e.trackingContext.detail&&(t.checkout_source_detail=e.trackingContext.detail),a.p.track(r.SpadeEventType.PaymentFormInteraction,t)}!function(e){e.SPM="spm",e.RecurlyCreditCard="recurlyCreditCard"}(i||(i={}));var s,l,c,d,u,m=function(){function e(e){this.store={savedPaymentAvailable:null,savedPaymentDisplayed:null,recurlyCreditCardAvailable:null,details:null},this.counter=0,this.config={allowDuplicateEvents:!(!e||!e.allowDuplicateEvents)},this.readyFields={spm:!1,recurlyCreditCard:!1}}return e.prototype.get=function(e){return this.store[e]},e.prototype.set=function(e){this.store=Object.assign(this.store,e)},e.prototype.setReady=function(e){this.readyFields[e]=!0},e.prototype.reportEvent=function(){var e,t;this.allFieldsReady&&(0===this.counter||this.config.allowDuplicateEvents)&&(this.counter++,e=this.store,t={saved_payment_available:e.savedPaymentAvailable,saved_payment_displayed:e.savedPaymentDisplayed,recurly_credit_card_available:e.recurlyCreditCardAvailable,details:e.details||""},a.p.track(r.SpadeEventType.PaymentFormDisplay,t))},Object.defineProperty(e.prototype,"allFieldsReady",{get:function(){return Object.values(this.readyFields).reduce(function(e,t){return e&&t})},enumerable:!0,configurable:!0}),e}();!function(e){e.Failed="failed",e.Pending="pending",e.Success="success"}(s||(s={})),function(e){e.MysteryGifting="mystery_gifting",e.Gifting="gifting",e.Personal="personal"}(l||(l={})),function(e){e.RecurlyCreditCard="recurly_credit_card",e.RecurlyPaypal="recurly_paypal",e.RecurlyPayWithAmazon="recurly_pay_with_amazon",e.ZuoraCreditCard="zuora_credit_card",e.Xsolla="xsolla"}(c||(c={})),function(e){e.VendorLoginClick="vendor_login_click",e.CompletePurchaseClick="complete_purchase_click",e.PaypalTokenError="paypal_token_error",e.RadioButtonClick="radio_button_click",e.TokenError="token_error",e.PriceChangeAlert="price_change_alert",e.UnsupportedCountryAlert="unsupported_country_alert"}(d||(d={})),function(e){e.ChannelSubscribeButton="channel_subscribe_button_click",e.Direct="direct_url_link",e.EmotePicker="emote_picker_click",e.Extension="extension_click",e.SubscriptionsManagement="subscriptions_management",e.TurboSubscribeButton="turbo_subscribe_button_click",e.ViewerCard="viewer_card_click"}(u||(u={}))},KwB3:function(e,t,n){"use strict";n("7NxT");var i=n("oJmH"),a=n("/MKj"),r=n("yR8l"),o=n("kRBY"),s=n("vSeP"),l=n("IIop"),c=n("knbN"),d=n("nInp"),u=n("2EzP"),m=n("GnwI"),p=n("26nv"),h=n("mrSG"),g=n("q1tI"),f=n("fvjX"),v=n("ZS2+"),b=n("/0dD"),k=n("Mj6i"),C=n("jZLd"),y=n("XDQu"),S=n("/i69"),E=n("IRJ5"),N=n("bhOa"),w=n("D91L"),_=n("PtXu"),D=n("gcd7"),O=n("+pBb"),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showChatRules=function(){t.props.showChatRules()},t}return h.__extends(t,e),t.prototype.render=function(){return g.createElement(D.a,{command:"rules",handler:this.showChatRules,channelLogin:this.props.channelLogin})},t}(g.Component);var T,M,L=Object(a.connect)(null,function(e){return Object(f.bindActionCreators)({showChatRules:function(){return O.Q()}},e)})(I),F=n("bfuM"),x=n("/7QA"),j=n("CpU+"),A=n("fKMw"),P=n("DMoW"),R=n("hnjF"),U=n("sUnt"),B=n("CA5B");!function(e){e.QUERY_ERROR="QUERY_ERROR"}(T||(T={})),function(e){e.UnVIP="vip-command-handler_unvip",e.VIP="vip-command-handler_vip",e.VIPs="vip-command-handler_vips"}(M||(M={}));var V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.vips=function(){return{deferred:x.q.apollo.client.query({query:B,fetchPolicy:"network-only",variables:{login:t.props.channelLogin}}).then(function(e){var n=e.data;if(!n||!n.user||!n.user.vips)return{notice:t.getVIPsErrorMessage()};var i=n.user.vips.edges.filter(function(e){return e.node&&e.node.login});if(0===i.length)return{notice:Object(x.d)("This channel does not have any VIPs.","VIPCommandHandler")};var a=i.map(function(e){return e.node&&e.node.login}).join(", ");return{notice:Object(x.d)("VIPs for this channel are: {vips}.",{vips:a},"VIPCommandHandler")}}).catch(function(){return{notice:t.getVIPsErrorMessage()}})}},t.unVIPUser=function(e){var n=e.trim().split(/\s+/),i=t.getLogin(e);return 1===n.length&&i&&0!==i.length?{deferred:t.props.unVIPUserMutation(i).then(function(e){var n=e.revokeVIP;if(!n||!n.revokee||!n.revokee.login)return{notice:t.getUnVIPErrorMessage(T.QUERY_ERROR)};var a=n.error,r=a&&a.code;return r?{notice:t.getUnVIPErrorMessage(r,i)}:{notice:Object(x.d)("You have removed {login} as a VIP of this channel.",{login:i},"VIPCommandHandler")}}).catch(function(){return{notice:t.getUnVIPErrorMessage(T.QUERY_ERROR)}})}:{deferred:Promise.resolve({notice:Object(x.d)('Usage: "/unvip [login]" - Revoke VIP status to a user. Use "vips" to list the VIPs of this channel.',"VIPCommandHandler")})}},t.vipUser=function(e){var n=t.getLogin(e);return 1===e.trim().split(/\s+/).length&&n&&0!==n.length?{deferred:t.props.vipUserMutation(n).then(function(e){var i=e.grantVIP;if(!i||!i.grantee||!i.grantee.login)return{notice:t.getVIPErrorMessage(T.QUERY_ERROR)};var a=i.error,r=a&&a.code;return r?{notice:t.getVIPErrorMessage(r,n)}:{notice:Object(x.d)("You have added {login} as a VIP of this channel.",{login:n},"VIPCommandHandler")}}).catch(function(){return{notice:t.getVIPErrorMessage(T.QUERY_ERROR)}})}:{deferred:Promise.resolve({notice:Object(x.d)('Usage: "/vip [login]" - Grant VIP status to a user. Use "vips" to list the VIPs of this channel.',"VIPCommandHandler")})}},t}return h.__extends(t,e),t.prototype.render=function(){return g.createElement(U.a,{display:R.d.Hide},g.createElement(D.a,{"data-test-selector":M.UnVIP,command:"unvip",channelLogin:this.props.channelLogin,handler:this.unVIPUser}),g.createElement(D.a,{"data-test-selector":M.VIP,command:"vip",channelLogin:this.props.channelLogin,handler:this.vipUser}),g.createElement(D.a,{"data-test-selector":M.VIPs,command:"vips",channelLogin:this.props.channelLogin,handler:this.vips}))},t.prototype.getLogin=function(e){var t=this.props.activeChattersAPI;return t&&t.getActiveChatterLoginFromDisplayName(e)||e},t.prototype.getCommonErrorMessage=function(e,t){switch(e){default:return"";case P.Y.GRANTEE_NOT_FOUND:case P.Sa.REVOKEE_NOT_FOUND:return Object(x.d)("Invalid username: {login}.",{login:t},"VIPCommandHandler");case P.Y.FORBIDDEN:case P.Sa.FORBIDDEN:return Object(x.d)("You don't have permission to perform that action.","VIPCommandHandler")}},t.prototype.getVIPErrorMessage=function(e,t){switch(void 0===t&&(t=""),e){case P.Y.FORBIDDEN:case P.Y.GRANTEE_NOT_FOUND:return this.getCommonErrorMessage(e,t);case P.Y.GRANTEE_ALREADY_VIP:return Object(x.d)("{login} is already a VIP of this channel.",{login:t},"VIPCommandHandler");case P.Y.GRANTEE_CHAT_BANNED:return Object(x.d)("{login} is banned in this channel. You must unban this user before granting VIP status.",{login:t},"VIPCommandHandler");case P.Y.MAX_VIPS_REACHED:return Object(x.d)("Unable to add VIP. Visit the Achievements page on your dashboard to learn how to unlock additional VIP slots.","VIPCommandHandler");case P.Y.VIP_ACHIEVEMENT_INCOMPLETE:return Object(x.d)("Unable to add VIP. Visit the Achievements page on your dashboard to learn how to unlock this feature.","VIPCommandHandler");case T.QUERY_ERROR:case P.Y.CHANNEL_NOT_FOUND:default:return Object(x.d)("Unable to add VIP.","VIPCommandHandler")}},t.prototype.getUnVIPErrorMessage=function(e,t){switch(void 0===t&&(t=""),e){case P.Sa.FORBIDDEN:case P.Sa.REVOKEE_NOT_FOUND:return this.getCommonErrorMessage(e,t);case P.Sa.REVOKEE_NOT_VIP:return Object(x.d)("{login} is not a VIP of this channel.",{login:t},"VIPCommandHandler");case T.QUERY_ERROR:case P.Sa.CHANNEL_NOT_FOUND:default:return Object(x.d)("Unable to remove VIP.","VIPCommandHandler")}},t.prototype.getVIPsErrorMessage=function(){return Object(x.d)("There was a problem fetching the list of VIPs. Please try again.","VIPCommandHandler")},t}(g.Component),H=Object(f.compose)(Object(j.a)(),Object(A.a)(),s.a)(V),G=n("vKai"),q=n("08uX"),W=n("Qii+"),z=function(e){return g.createElement(U.a,{attachTop:!0,attachLeft:!0,attachRight:!0,display:R.d.Flex,position:R.j.Absolute,flexDirection:R.e.Column,fullWidth:!0},g.createElement(W.a,{onSendMessage:e.onSendMessage,channelID:e.channelID,channelLogin:e.channelLogin}),g.createElement(q.a,{channelID:e.channelID,channelLogin:e.channelLogin}))},Q=n("Tznh"),Y=n("GHzV"),K=n("jBwP"),X=n("xzy9"),$=n("3tQW"),J=n("SDEh"),Z=n("X2PJ"),ee=n("+80q"),te=n("Ws8v"),ne=n("dEDE"),ie=n("7d/q"),ae=n("7uM4"),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={show:!0},t.dismiss=function(){t.setState({show:!1})},t}return h.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.hostedChannelDisplayName!==this.props.hostedChannelDisplayName&&this.setState({show:!0})},t.prototype.render=function(){if(!this.state.show)return null;var e=Object(J.b)()?this.getDesktopHostingUrl():this.getDefaultHostingPath();return g.createElement(te.a,{attachTop:!0,attachLeft:!0,attachRight:!0,background:Z.a.AccentAlt2,color:Z.c.Overlay,position:R.j.Absolute,className:"hosting-notification",padding:{y:.5,left:.5},"data-a-target":"hosting-notification-container"},g.createElement(U.a,{display:R.d.Flex,padding:1,justifyContent:R.h.Between,alignItems:R.b.Center,flexWrap:R.f.NoWrap},g.createElement(U.a,{display:R.d.Flex,flexWrap:R.f.NoWrap},g.createElement(U.a,{margin:{right:.5},flexShrink:0},g.createElement(ee.a,null,Object(x.d)("Hosting","ChatHostingNotification"))),g.createElement(U.a,{ellipsis:!0,flexShrink:1,margin:{right:.5}},g.createElement(ee.a,{type:ee.e.Strong,"data-test-selector":"hosting-notification__text","data-a-target":"hosting-notification-channel-name"},""+this.props.hostedChannelDisplayName))),g.createElement(U.a,{display:R.d.Flex,flexWrap:R.f.NoWrap,flexShrink:0},g.createElement(U.a,{display:R.d.Inline,padding:{right:.5}},g.createElement(ne.a,{overlay:!0,type:ne.d.Hollow,linkTo:{pathname:e,state:{content:"host_channel",medium:"chat_bar_notification"}},size:ne.b.Small,"data-a-target":"hosting-notification-gotochannel-button"},Object(x.d)("Go to Channel","ChatHostingNotification"))),g.createElement(ie.a,{onClick:this.dismiss,ariaLabel:Object(x.d)("Close","HostingNotification"),size:ie.b.Small,overlay:!0,icon:ae.b.Close,"data-a-target":"hosting-notification-close-button"}))))},t.prototype.getDefaultHostingPath=function(){return"/"+this.props.hostedChannelLogin},t.prototype.getDesktopHostingUrl=function(){return this.props.isFullPopoutPlayer?"/popout/"+this.props.hostedChannelLogin+"/desktop-player":this.getDefaultHostingPath()},t}(g.Component),oe=n("fezU"),se=n("ZtEv"),le=n("aF6k");var ce=n("lZdE"),de=function(e){function t(t){var n=e.call(this,t)||this;return n.getActiveChatters=function(e,t){if(void 0===e&&(e=""),void 0===t&&(t=1/0),n.isDirty&&n.sortChatters(),!e)return n.sortedChatters.slice(0,t);var i=new RegExp("^"+Object(ce.a)(e),"i");return n.sortedChatters.filter(function(e){return i.test(e.login)||e.displayName&&i.test(e.displayName)}).slice(0,t)},n.handleMessage=function(e){n.getUsersFromEvent(e).forEach(function(e){n.handleActiveChatter(e)})},n.getActiveChatterLoginFromDisplayName=function(e){return Object.keys(n.activeChatters).find(function(t){return n.activeChatters[t]&&n.activeChatters[t].displayName===e})||null},n.reset(),n}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.setActiveChattersAPI({getActiveChatters:this.getActiveChatters,getActiveChatterLoginFromDisplayName:this.getActiveChatterLoginFromDisplayName}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage)},t.prototype.componentWillUnmount=function(){this.props.setActiveChattersAPI(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage)},t.prototype.render=function(){return null},t.prototype.componentWillReceiveProps=function(e){e.channelLogin!==this.props.channelLogin&&this.reset(),e.currentUserLogin&&e.currentUserLogin!==this.props.currentUserLogin&&this.activeChatterLogins.has(e.currentUserLogin)&&(this.isDirty=!0,this.removeActiveChatter(e.currentUserLogin)),this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.handleMessage))},t.prototype.reset=function(){this.activeChatterLogins=new Set,this.activeChatters={},this.isDirty=!0,this.sortedChatters=[]},t.prototype.getUsersFromEvent=function(e){switch(e.type){case se.b.Message:return[{login:e.user.userLogin,displayName:e.user.userDisplayName}];case se.b.Ritual:return[{login:e.message.user.userLogin,displayName:e.message.user.userDisplayName}];case se.b.Raid:return[{login:e.params.login,displayName:e.params.displayName}];case se.b.Resubscription:case se.b.Subscription:return[{login:e.user.username,displayName:e.user.displayName}];case se.b.SubGift:return[{login:e.user.username,displayName:e.user.displayName},{displayName:e.recipientDisplayName,login:e.recipientLogin}];default:return[]}},t.prototype.handleActiveChatter=function(e){e.login!==this.props.channelLogin&&e.login!==this.props.currentUserLogin&&(this.activeChatterLogins.has(e.login)?(this.activeChatterLogins.delete(e.login),this.addActiveChatter(e)):(this.addActiveChatter(e),this.trimActiveChatters(),this.isDirty=!0))},t.prototype.addActiveChatter=function(e){this.activeChatterLogins.add(e.login),this.activeChatters[e.login]=e},t.prototype.removeActiveChatter=function(e){this.activeChatterLogins.delete(e),delete this.activeChatters[e]},t.prototype.trimActiveChatters=function(){if(!(this.activeChatterLogins.size<=300))for(var e=this.activeChatterLogins.size-300,t=this.activeChatterLogins.values(),n=0;n<e;n++){var i=t.next().value;this.removeActiveChatter(i)}},t.prototype.sortChatters=function(){var e=this,t=[{displayName:this.props.channelDisplayName||void 0,login:this.props.channelLogin}],n=Object.keys(this.activeChatters).map(function(t){return e.activeChatters[t]});n.sort(function(e,t){return e.login<t.login?-1:e.login>t.login?1:0}),this.sortedChatters=t.concat(n),this.isDirty=!1},t}(g.Component);var ue=Object(f.compose)(Object(a.connect)(function(e){var t=Object(o.e)(e);return{currentUserLogin:t&&t.login}}),s.a,u.a)(de),me=n("hO8c"),pe=n("D7An"),he=n("kz7j"),ge=n("XmgI"),fe=n("buTd");var ve=n("TApp");var be=n("ptRJ");var ke=n("oK83");var Ce=n("WytW"),ye=n("oi4T"),Se=n("OpME"),Ee=function(e){function t(t){var n=e.call(this,t)||this;return n.hasConnected=!1,n.inPrivateCalloutExperiment="control"!==x.q.experiments.getAndTrackAssignment(pe.b.ChatPrivateCalloutRedesign),n.sendMessage=function(e){var t=Object(Ce.g)(e,n.props.channelLogin);return t.handled?t.result&&t.result.deferred&&t.result.deferred.then(function(e){var t=e.notice;t&&n.addMessage(Object(ve.a)(t))}):n.client.sendCommand(n.props.channelLogin,e).catch(function(e){x.k.warn("Failed to send message, or message timeout",e)}),t.result},n.onJoinedEvent=function(e){n.logger.debug("Connected",n.props.channelLogin),n.props.latencyTracking.reportInteractive(),n.hasConnected||(Object(ye.c)({channelLogin:n.props.channelLogin,isHostMode:n.props.isHostMode}),n.hasConnected=!0),n.chatConnected&&n.props.latencyTracking.reportCustomEvent(n.chatConnected),n.postMessageToCurrentChannel(e,{type:se.b.Connected,id:Object(le.a)("connected")})},n.onDisconnectedEvent=function(e){var t;n.props.latencyTracking.reportInteractive(),n.addMessage((t=e.reason,{type:se.b.Disconnected,id:Object(le.a)("disconnected"),reason:t}))},n.onReconnectingEvent=function(e){return n.addMessage({type:se.b.Reconnect,id:Object(le.a)("reconnect")})},n.onHostedEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.from,i=e.isAuto,a=e.viewers,{type:se.b.Hosted,id:Object(le.a)("hosted-"+t),hostingChannel:t,isAutohost:i,viewerCount:a}));var t,i,a},n.onHostingEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.target,{type:se.b.Hosting,id:Object(le.a)("hosting"),hostedChannel:t}));var t},n.onUnhostEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.channel,{type:se.b.Unhost,id:Object(le.a)("unhost-"+t)}));var t},n.onChatMessageEvent=function(e){n.postMessageToCurrentChannel(e,n.convertMessage(e))},n.onChatActionEvent=function(e){var t=n.props.bitsConfig||ge.a,i=Object(be.a)(se.c.Action,e.action,e.message.user,t,n.getFilterFlagOptions(e.message.flags));n.postMessageToCurrentChannel(e,i)},n.onChatNoticeEvent=function(e){if("msg_rejected"!==e.msgid){var t=(i=e.channel,a=e.msgid,r=e.body,{type:se.b.Notice,id:Object(le.a)("notice"),channel:i,msgid:a,message:r});n.postMessageToCurrentChannel(e,t)}var i,a,r},n.onTimeoutEvent=function(e){n.onModerationEvent(se.e.Timeout,e)},n.onBanEvent=function(e){n.onModerationEvent(se.e.Ban,e)},n.onClearMsgEvent=function(e){var t,i,a;n.postMessageToCurrentChannel(e,(t=e.userLogin,i=e.targetMessageID,a=e.body,{type:se.b.Moderation,moderationType:se.e.Delete,id:Object(le.a)(t+"-mod"),userLogin:t,targetMessageID:i,body:a}))},n.onModerationEvent=function(e,t){var i,a,r,o;n.postMessageToCurrentChannel(t,(i=e,a=t.userLogin,r=t.reason,o=t.duration,{type:se.b.Moderation,moderationType:i,id:Object(le.a)(a+"-mod"),userLogin:a,reason:r,duration:o}))},n.onSubscriptionEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,user:e.user,methods:e.methods},{type:se.b.Subscription,id:Object(le.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,methods:t.methods}))},n.onSubscriptionGiftEvent=function(e){var t,i=(t={channel:e.channel,user:e.user,methods:e.methods,recipientDisplayName:e.recipientName,recipientID:e.recipientID,recipientLogin:e.recipientLogin,senderCount:e.senderCount},{type:se.b.SubGift,id:Object(le.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,methods:t.methods,recipientDisplayName:t.recipientDisplayName,recipientID:t.recipientID,recipientLogin:t.recipientLogin,senderCount:t.senderCount});if(n.postMessageToCurrentChannel(e,i),n.inPrivateCalloutExperiment&&e.recipientLogin===n.props.currentUserLogin){var a={event:{type:fe.a.ThankSubGifter,gifterDisplayName:i.user.displayName},key:i.id};n.props.pushCallout(a)}},n.onAnonSubscriptionGiftEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,methods:e.methods,recipientDisplayName:e.recipientName,recipientID:e.recipientID,recipientLogin:e.recipientLogin},{type:se.b.AnonSubGift,id:Object(le.a)(t.recipientDisplayName+"-sub"),channel:t.channel.slice(1),methods:t.methods,recipientDisplayName:t.recipientDisplayName,recipientID:t.recipientID,recipientLogin:t.recipientLogin}))},n.onSubscriptionMysteryGiftEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,user:e.user,plan:e.plan,massGiftCount:e.massGiftCount,senderCount:e.senderCount},{type:se.b.SubMysteryGift,id:Object(le.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,plan:t.plan,massGiftCount:t.massGiftCount,senderCount:t.senderCount}))},n.onAnonSubscriptionMysteryGiftEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,plan:e.plan,massGiftCount:e.massGiftCount},{type:se.b.AnonSubMysteryGift,id:Object(le.a)(t.massGiftCount+"-sub"),channel:t.channel.slice(1),plan:t.plan,massGiftCount:t.massGiftCount}))},n.onBitsCharityEvent=function(e){var t,i,a,r,o,s;n.postMessageToCurrentChannel(e,(t=e.total,i=e.charityName,a=e.daysLeft,r=e.hoursLeft,o=e.hashtag,s=e.learnMore,{type:se.b.BitsCharity,id:Object(le.a)("charity"),total:t,charityName:i,daysLeft:a,hoursLeft:r,hashtag:o,learnMore:s}))},n.onResubscriptionEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t={channel:e.channel,user:e.user,methods:e.methods,months:e.months,messageBody:e.body,cumulativeMonths:e.cumulativeMonths,shouldShareStreakTenure:e.shouldShareStreakTenure,streakMonths:e.streakMonths},i=void 0,t.messageBody&&(i=Object(be.a)(se.c.Post,t.messageBody,t.user,ge.a,null)),{type:se.b.Resubscription,id:Object(le.a)(t.user.username+"-sub"),channel:t.channel.slice(1),user:t.user,methods:t.methods,message:i,months:t.months,cumulativeMonths:t.cumulativeMonths,shouldShareStreakTenure:t.shouldShareStreakTenure,streakMonths:t.streakMonths}))},n.onGiftPaidUpgradeEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,senderLogin:e.senderLogin,senderName:e.senderName,user:e.user},{type:se.b.GiftPaidUpgrade,id:Object(le.a)(t.user.username+"-sub"),channel:t.channel.slice(1),promoGiftTotal:t.promoGiftTotal,promoName:t.promoName,senderLogin:t.senderLogin,senderName:t.senderName,user:t.user}))},n.onAnonGiftPaidUpgradeEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,promoGiftTotal:e.promoGiftTotal,promoName:e.promoName,user:e.user},{type:se.b.AnonGiftPaidUpgrade,id:Object(le.a)(t.user.username+"-sub"),channel:t.channel.slice(1),promoGiftTotal:t.promoGiftTotal,promoName:t.promoName,user:t.user}))},n.onPrimePaidUpgradeEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t={channel:e.channel,plan:e.plan,user:e.user},{type:se.b.PrimePaidUpgrade,id:Object(le.a)(t.user.username+"-sub"),channel:t.channel.slice(1),plan:t.plan,user:t.user}))},n.onRoomModsEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.usernames,{type:se.b.RoomMods,id:Object(le.a)("roommods"),moderatorLogins:t}));var t},n.onRoomStateEvent=function(e){var t;n.postMessageToCurrentChannel(e,(t=e.state,{type:se.b.RoomState,id:Object(le.a)("roomstate"),state:t}))},n.onEmoteOnlyModeEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.enabled,{type:se.b.EmoteOnlyMode,id:Object(le.a)("emoteonlymode"),enabled:t}));var t},n.onSubscriberOnlyModeEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.enabled,{type:se.b.SubscriberOnlyMode,id:Object(le.a)("subscriber-only"),enabled:t}));var t},n.onR9KModeEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.enabled,{type:se.b.R9KMode,id:Object(le.a)("r9kmode"),enabled:t}));var t},n.onClearChatEvent=function(e){return n.postMessageToCurrentChannel(e,{type:se.b.Clear,id:Object(le.a)("clear")})},n.onRaidEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.channel,i=e.userLogin,a=e.params,{type:se.b.Raid,id:Object(le.a)("raid"),channel:t,userLogin:i,params:a}));var t,i,a},n.onUnraidEvent=function(e){return n.postMessageToCurrentChannel(e,(t=e.channel,i=e.userLogin,a=e.message,{type:se.b.Unraid,id:Object(le.a)("unraid"),channel:t,userLogin:i,message:a}));var t,i,a},n.onRitualEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t=e.type,i=n.convertMessage(e),{type:se.b.Ritual,id:Object(le.a)(i.user.userLogin+"-"+t+"-ritual"),ritualType:t,message:i}))},n.onFirstCheerEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t={message:n.convertMessage(e)},i=t.message,{type:se.b.FirstCheerMessage,id:Object(le.a)(i.user.userLogin+"-firstcheer"),message:i}))},n.onBitsBadgeTierEvent=function(e){var t,i,a;n.postMessageToCurrentChannel(e,(t=n.convertMessage(e),i=e.threshold,a=e.message.user,{type:se.b.BitsBadgeTierMessage,id:Object(le.a)("bits-badge-tier"),message:t,threshold:i,user:a}))},n.onBadgesUpdatedEvent=function(e){return n.addMessage((t=e.username,i=e.badges,a=e.badgeDynamicData,{type:se.b.BadgesUpdated,id:Object(le.a)("updateBadges"),userName:t,badges:i,badgeDynamicData:a}));var t,i,a},n.onPurchaseEvent=function(e){var t=n.props.bitsConfig||ge.a;n.postMessageToCurrentChannel(e,function(e,t,n,i){return{bitsConfig:i,message:t,purchase:e,timestamp:n,id:Object(le.a)(t.user.userLogin+"-purchase"),type:se.b.Purchase}}(e.purchase,n.convertMessage(e),e.timestamp,t))},n.onCrateEvent=function(e){var t,i;n.postMessageToCurrentChannel(e,(t=n.convertMessage(e),i=e.selectedCount,{type:se.b.CrateGift,id:Object(le.a)("crate"),message:t,selectedCount:i}))},n.onRewardGiftEvent=function(e){var t,i,a,r,o;n.postMessageToCurrentChannel(e,(t=e.user,i=e.selectedCount,a=e.bitsAmount,r=e.minCheerAmount,o=e.domain,{type:se.b.RewardGift,id:Object(le.a)("rewardGift"),selectedCount:i,bitsAmount:a,minCheerAmount:r,messageID:t?t.id:null,userID:t?t.userID:null,userLogin:t?t.username:null,displayName:t?t.displayName:null,domain:o,sourceType:ke.b.chat_message}))},n.convertMessage=function(e){var t=n.props.bitsConfig||ge.a;return Object(be.a)(se.c.Post,e.message.body,e.message.user,t,n.getFilterFlagOptions(e.message.flags))},n.logger=x.k.withCategory("chat-service"),n.logger.debug("Created"),n.service=x.q.tmi,n.client=x.q.tmi.client,n.disabled=x.q.tmi.disabled,n.registerCustomLatencyEvents(),n}return h.__extends(t,e),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){this.props.setChatConnectionAPI({sendMessage:this.sendMessage}),this.shouldConnectOnMount()?this.join(this.props.channelLogin):this.props.latencyTracking.reportInteractive(),this.props.emoteSets&&this.client.updateEmoteMap(Object(Se.c)(this.props.emoteSets)),null===this.props.channelID&&this.skipLatencyMeasurements()},t.prototype.componentWillUnmount=function(){this.props.setChatConnectionAPI(),this.disconnect(this.props.channelLogin)},t.prototype.componentWillReceiveProps=function(e){(null===e.channelID&&e.channelID!==this.props.channelID&&this.skipLatencyMeasurements(),e.emoteSets&&e.emoteSets!==this.props.emoteSets&&this.client.updateEmoteMap(Object(Se.c)(e.emoteSets)),!e.shouldConnect&&this.props.shouldConnect)?this.disconnect(this.props.channelLogin):(e.authToken!==this.props.authToken||e.channelLogin!==this.props.channelLogin||e.currentUserLogin!==this.props.currentUserLogin||e.shouldConnect&&!this.props.shouldConnect)&&(this.logger.debug("Reconnecting..."),this.registerCustomLatencyEvents(),this.join(e.channelLogin))},t.prototype.join=function(e){this.logger.debug("Joining channel and binding all event listeners",this.props.channelLogin),this.hasConnected=!1,this.joinedChannel&&this.joinedChannel!==e&&this.service.part(this.props.channelLogin),this.joinedChannel=e,this.connectHandlers(),this.service.join(e)},t.prototype.disconnect=function(e){this.logger.debug("Parting channel and unbinding all event listeners",e),this.disconnectHandlers(),this.service.part(e)},t.prototype.getFilterFlagOptions=function(e){return e&&0!==e.length?this.props.chatFilterExperimentMembership===Q.b.Excluded||!this.props.viewerChatFilterEnabled||this.props.isCurrentUserModerator?null:{list:e,preferences:this.props.viewerChatFilterSettings}:null},t.prototype.connectHandlers=function(){this.disconnectHandlers(),this.client.events.joined(this.onJoinedEvent),this.client.events.disconnected(this.onDisconnectedEvent),this.client.events.reconnecting(this.onReconnectingEvent),this.client.events.chat(this.onChatMessageEvent),this.client.events.usernotice(this.onChatMessageEvent),this.client.events.notice(this.onChatNoticeEvent),this.client.events.action(this.onChatActionEvent),this.client.events.badgesupdated(this.onBadgesUpdatedEvent),this.client.events.hosted(this.onHostedEvent),this.client.events.hosting(this.onHostingEvent),this.client.events.unhost(this.onUnhostEvent),this.client.events.purchase(this.onPurchaseEvent),this.client.events.crate(this.onCrateEvent),this.client.events.rewardgift(this.onRewardGiftEvent),this.client.events.ritual(this.onRitualEvent),this.client.events.firstcheer(this.onFirstCheerEvent),this.client.events.bitsbadgetier(this.onBitsBadgeTierEvent),this.client.events.subscription(this.onSubscriptionEvent),this.client.events.resub(this.onResubscriptionEvent),this.client.events.giftpaidupgrade(this.onGiftPaidUpgradeEvent),this.client.events.anongiftpaidupgrade(this.onAnonGiftPaidUpgradeEvent),this.client.events.primepaidupgrade(this.onPrimePaidUpgradeEvent),this.client.events.subgift(this.onSubscriptionGiftEvent),this.client.events.anonsubgift(this.onAnonSubscriptionGiftEvent),this.client.events.submysterygift(this.onSubscriptionMysteryGiftEvent),this.client.events.anonsubmysterygift(this.onAnonSubscriptionMysteryGiftEvent),this.client.events.timeout(this.onTimeoutEvent),this.client.events.ban(this.onBanEvent),this.client.events.clearchat(this.onClearChatEvent),this.client.events.clearmsg(this.onClearMsgEvent),this.client.events.raid(this.onRaidEvent),this.client.events.unraid(this.onUnraidEvent),this.client.events.mods(this.onRoomModsEvent),this.client.events.roomstate(this.onRoomStateEvent),this.client.events.subscribers(this.onSubscriberOnlyModeEvent),this.client.events.emoteonlymode(this.onEmoteOnlyModeEvent),this.client.events.r9kmode(this.onR9KModeEvent),this.client.events.charity(this.onBitsCharityEvent)},t.prototype.disconnectHandlers=function(){this.client.events.remove("joined",this.onJoinedEvent),this.client.events.remove("disconnected",this.onDisconnectedEvent),this.client.events.remove("reconnecting",this.onReconnectingEvent),this.client.events.remove("chat",this.onChatMessageEvent),this.client.events.remove("usernotice",this.onChatMessageEvent),this.client.events.remove("notice",this.onChatNoticeEvent),this.client.events.remove("action",this.onChatActionEvent),this.client.events.remove("badgesupdated",this.onBadgesUpdatedEvent),this.client.events.remove("hosted",this.onHostedEvent),this.client.events.remove("hosting",this.onHostingEvent),this.client.events.remove("unhost",this.onUnhostEvent),this.client.events.remove("purchase",this.onPurchaseEvent),this.client.events.remove("crate",this.onCrateEvent),this.client.events.remove("rewardgift",this.onRewardGiftEvent),this.client.events.remove("ritual",this.onRitualEvent),this.client.events.remove("firstcheer",this.onFirstCheerEvent),this.client.events.remove("bitsbadgetier",this.onBitsBadgeTierEvent),this.client.events.remove("subscription",this.onSubscriptionEvent),this.client.events.remove("resub",this.onResubscriptionEvent),this.client.events.remove("subgift",this.onSubscriptionGiftEvent),this.client.events.remove("submysterygift",this.onSubscriptionMysteryGiftEvent),this.client.events.remove("timeout",this.onTimeoutEvent),this.client.events.remove("ban",this.onBanEvent),this.client.events.remove("clearchat",this.onClearChatEvent),this.client.events.remove("raid",this.onRaidEvent),this.client.events.remove("unraid",this.onUnraidEvent),this.client.events.remove("mods",this.onRoomModsEvent),this.client.events.remove("roomstate",this.onRoomStateEvent),this.client.events.remove("subscribers",this.onSubscriberOnlyModeEvent),this.client.events.remove("emoteonlymode",this.onEmoteOnlyModeEvent),this.client.events.remove("r9kmode",this.onR9KModeEvent),this.client.events.remove("charity",this.onBitsCharityEvent)},t.prototype.postMessageToCurrentChannel=function(e,t){e.channel.toLowerCase().replace("#","")===this.props.channelLogin.toLowerCase()&&this.addMessage(t)},t.prototype.addMessage=function(e){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.handleMessage(e)},t.prototype.shouldConnectOnMount=function(){return this.props.shouldConnect&&!this.disabled},t.prototype.registerCustomLatencyEvents=function(){this.logger.debug("Registering custom latency events"),this.props.latencyTracking.resetCustomEvents(he.a.Chat),this.chatInitialized=this.registerInitEvent(),this.props.latencyTracking.reportCustomEvent(this.chatInitialized),this.shouldConnectOnMount()&&(this.chatConnected=this.registerConnectedEvent())},t.prototype.registerInitEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:3e3,group:he.a.Chat,key:he.b.ChatInit,label:he.c.Init})},t.prototype.registerConnectedEvent=function(){return this.props.latencyTracking.registerCustomEvent({benchmark:4e3,group:he.a.Chat,key:he.b.ChatConnected,label:he.c.Connected})},t.prototype.skipLatencyMeasurements=function(){this.props.latencyTracking.resetCustomEvents(he.a.Chat),this.props.latencyTracking.reportInteractive()},t}(g.Component);var Ne=Object(f.compose)(Object(a.connect)(function(e){var t=Object(o.e)(e);return{authToken:Object(o.a)(e),currentUserLogin:t&&t.login,viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled,viewerChatFilterSettings:e.chat.viewerChatFilterSettings}}),Object(m.withLatencyTracking)("ChatConnectionService"),l.a,u.a,Object(Q.d)(function(e){return e}),Object(me.b)(function(e){return{pushCallout:function(t){return e.pushCallout(t)}}}))(Ee),we=n("x7UT"),_e=n("eDVu"),De=n("0Log"),Oe=n("/aPz");var Ie,Te=n("olXY"),Me=n("HGFl"),Le=n("NAv5");function Fe(e,t){var n=Object(Le.addSeconds)(e,t);return Math.max(0,Object(Le.differenceInSeconds)(n,new Date))}!function(e){e.Banned="msg_banned",e.Timedout="msg_timedout",e.Ratelimit="msg_ratelimit",e.Duplicate="msg_duplicate",e.Subsonly="msg_subsonly",e.EmoteOnly="msg_emoteonly",e.VerifiedEmail="msg_verified_email",e.Slowmode="msg_slowmode",e.Facebook="msg_facebook",e.BlizzardConnect="msg_blizzard",e.R9k="msg_r9k",e.Followers="msg_followersonly",e.FollowersZero="msg_followersonly_zero",e.FollowersFollowed="msg_followersonly_followed",e.ChannelSuspended="msg_channel_suspended",e.Suspended="msg_suspended",e.BadCharacters="msg_bad_characters"}(Ie||(Ie={}));var xe,je=n("nIRf"),Ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reasons=[],t.updateHandlers=[],t.followTimerRunning=!1,t.slowModeTimerRunning=!1,t.followSecondsRemaining=0,t.slowSecondsRemaining=0,t.lastMessageSentAt=new Date(0),t.getRestrictions=function(){return 0===t.reasons.length?null:t.reasons},t.updateRestrictionState=function(){var e;if(!t.props.data||!t.props.data.channel)return!1;var n=((e={})[P.v.SUBSCRIBERS_ONLY]=t.shouldEnforceSubsOnly(),e[P.v.VERIFIED_ONLY]=t.shouldEnforceVerifiedOnly(),e[P.v.FOLLOWERS_ONLY]=t.shouldEnforceFollowersOnly(),e[P.v.SLOW_MODE]=t.shouldEnforceSlowMode(),e),i=[],a=t.extractReasons(t.props);if(a)for(var r=0,o=a;r<o.length;r++){var s=o[r];if(n[s])if(s===P.v.VERIFIED_ONLY)t.props.data.currentUser&&t.props.data.currentUser.isEmailVerified||i.push(s);else if(s===P.v.FOLLOWERS_ONLY){if(null!==t.getFollowedTime()){if(0===t.props.followerDurationSeconds)continue;if(t.props.followerDurationSeconds>0&&t.followSecondsRemaining<=0)continue}i.push(s)}else s===P.v.SLOW_MODE?t.slowSecondsRemaining>0&&i.push(s):i.push(s)}return t.reasons=i,!0},t.getRemainingFollowSeconds=function(){return!!t.getFollowedTime()?Math.min(t.followSecondsRemaining,t.props.followerDurationSeconds):null},t.getRemainingSlowModeSeconds=function(){return t.slowSecondsRemaining},t.addUpdateHandler=function(e){-1===t.updateHandlers.indexOf(e)&&(t.updateHandlers=t.updateHandlers.concat(e))},t.removeUpdateHandler=function(e){t.updateHandlers=t.updateHandlers.filter(function(t){return t!==e})},t.updateState=function(){var e=t.updateSlowState();return e=t.updateFollowState()||e,(e=t.updateRestrictionState()||e)&&t.notifyHandlers(),e},t.updateFollowState=function(){var e=t.getFollowedTime(),n=t.followSecondsRemaining,i=n;return e&&(i=Fe(e,t.props.followerDurationSeconds),t.followSecondsRemaining=i),t.followTimerRunning&&(null===e||t.followSecondsRemaining<=0||!t.props.followerMode)?(t.stopFollowTimer(),!0):!t.followTimerRunning&&t.props.followerMode&&t.props.followerDuration>0&&e&&0!==e.getTime()?(t.startFollowTimer(),!0):i!==n},t.updateSlowState=function(){if(t.props.data&&t.props.data.channel&&t.props.data.channel.self&&t.props.data.channel.self.lastRecentChatMessageAt){var e=Object(Me.e)(t.props.data.channel.self.lastRecentChatMessageAt);e>t.lastMessageSentAt&&(t.lastMessageSentAt=e)}var n=(new Date).getTime()/1e3,i=t.lastMessageSentAt.getTime()/1e3+t.props.slowModeDuration,a=t.slowSecondsRemaining;return t.slowSecondsRemaining=Math.round(Math.max(i-n,0)),t.slowModeTimerRunning&&(t.slowSecondsRemaining<=0||!t.props.slowMode||!t.shouldEnforceSlowMode())?(t.stopSlowTimer(),!0):t.slowSecondsRemaining>0&&a<=0?(t.startSlowTimer(),!0):t.slowSecondsRemaining!==a},t.notifyHandlers=function(){t.updateHandlers.forEach(function(e){return e()})},t.onChatEvent=function(e){var n=new Date(0);switch(e.type){case se.b.Message:e.user.userID===t.props.currentUserID&&(n=new Date(e.timestamp));break;case se.b.Notice:Object.values(Ie).includes(e.msgid)&&(t.stopSlowTimer(),t.updateRestrictionState(),t.notifyHandlers())}n>t.lastMessageSentAt&&(t.lastMessageSentAt=n,t.updateSlowState()&&(t.updateRestrictionState(),t.notifyHandlers()))},t.startFollowTimer=function(){var e=t.getFollowedTime(),n=t.props.followerDurationSeconds;null===e||n<=0||!t.shouldEnforceFollowersOnly()||(t.followSecondsRemaining=Fe(e,n),t.followTimerRunning=!0,t.countdownTimer.start())},t.stopFollowTimer=function(){t.followTimerRunning=!1,t.followSecondsRemaining=0,t.slowModeTimerRunning||t.countdownTimer.stop()},t.startSlowTimer=function(){t.shouldEnforceSlowMode()&&(t.slowModeTimerRunning=!0,t.countdownTimer.start())},t.stopSlowTimer=function(){t.slowModeTimerRunning=!1,t.slowSecondsRemaining=0,t.lastMessageSentAt=new Date(0),t.followTimerRunning||t.countdownTimer.stop()},t.tick=function(){t.updateState()},t.getFollowedTime=function(){return t.props.data&&t.props.data.channel&&t.props.data.channel.self&&t.props.data.channel.self.follower&&t.props.data.channel.self.follower.followedAt?Object(Me.e)(t.props.data.channel.self.follower.followedAt):null},t.extractReasons=function(e){return e.data&&e.data.channel&&e.data.channel.self&&e.data.channel.self.chatRestrictedReasons?e.data.channel.self.chatRestrictedReasons:null},t.extractRequireVerified=function(e){return!!(e.data&&e.data.channel&&e.data.channel.chatSettings)&&e.data.channel.chatSettings.requireVerifiedAccount},t.restrictionIncluded=function(e){var n=t.extractReasons(t.props);return!!n&&-1!==n.indexOf(e)},t.shouldEnforceSubsOnly=function(){return t.props.subsOnlyMode&&t.restrictionIncluded(P.v.SUBSCRIBERS_ONLY)},t.shouldEnforceVerifiedOnly=function(){return!(!t.extractRequireVerified(t.props)||!t.restrictionIncluded(P.v.VERIFIED_ONLY))},t.shouldEnforceFollowersOnly=function(){return t.props.followerMode&&t.restrictionIncluded(P.v.FOLLOWERS_ONLY)},t.shouldEnforceSlowMode=function(){return t.props.slowMode&&t.restrictionIncluded(P.v.SLOW_MODE)},t}return h.__extends(t,e),t.prototype.componentDidMount=function(){var e=!1;this.props.setChatRestrictionsAPI({addUpdateHandler:this.addUpdateHandler,removeUpdateHandler:this.removeUpdateHandler,getRestrictions:this.getRestrictions,getRemainingFollowSeconds:this.getRemainingFollowSeconds,getRemainingSlowModeSeconds:this.getRemainingSlowModeSeconds}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent),this.countdownTimer=new je.a({onInterval:this.tick,intervalMillis:1e3}),this.shouldEnforceFollowersOnly()&&(this.props.followerDuration>0&&this.startFollowTimer(),e=!0),(this.shouldEnforceSubsOnly()||this.shouldEnforceVerifiedOnly())&&(e=!0),this.props.data&&this.props.data.channel&&this.props.data.channel.self&&this.props.data.channel.self.lastRecentChatMessageAt&&(this.lastMessageSentAt=Object(Me.e)(this.props.data.channel.self.lastRecentChatMessageAt)),this.shouldEnforceSlowMode()&&(e=this.updateSlowState()||e),e&&this.updateState()},t.prototype.render=function(){return null},t.prototype.componentWillUnmount=function(){this.stopFollowTimer(),this.stopSlowTimer(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent),this.props.setChatRestrictionsAPI()},t.prototype.componentWillReceiveProps=function(e){this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.onChatEvent))},t.prototype.componentDidUpdate=function(e){var t=!1,n=!1;n=this.needsStateUpdate(e)||n,n=this.updateSlowState()||n,n=this.updateFollowState()||n,this.slowModeTimerRunning&&e.slowModeDuration!==this.props.slowModeDuration&&(this.stopSlowTimer(),n=!0),e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&(n=!0,t=!0),e.pubsub.messages.moderatorActions&&e.pubsub.messages.moderatorActions!==this.props.pubsub.messages.moderatorActions&&(t=!0),t&&this.props.data&&this.props.data.refetch(),n&&(this.updateRestrictionState(),this.notifyHandlers())},t.prototype.needsStateUpdate=function(e){if((!e.data||e.data.loading)&&this.props.data&&!this.props.data.loading)return!0;var t=this.extractReasons(e),n=this.extractReasons(this.props);if(!t&&n||t&&!n)return!0;if(t&&n&&(t.length!==n.length||t.every(function(e,t){return e===n[t]})))return!0;if(e.subsOnlyMode!==this.props.subsOnlyMode||e.followerMode!==this.props.followerMode)return!0;if(e.followerDuration!==this.props.followerDuration)return!0;if(this.extractRequireVerified(e)!==this.extractRequireVerified(this.props))return!0;if(e.data&&this.props.data){var i=e.data,a=this.props.data;if(i.currentUser&&a.currentUser&&i.currentUser.isEmailVerified!==a.currentUser.isEmailVerified)return!0;if(a.channel&&a.channel.self){var r=a.channel.self,o=new Date(0),s=!1,l=!(!r.follower||!r.follower.followedAt);if(i.channel&&i.channel.self&&i.channel.self.follower&&i.channel.self.follower.followedAt&&(o=Object(Me.e)(i.channel.self.follower.followedAt),s=!0),s&&!l)return!0;if(l){var c=new Date(0);if(r.follower&&r.follower.followedAt&&(c=Object(Me.e)(r.follower.followedAt)),o.getTime()!==c.getTime())return!0}}}return!1},t}(g.Component);function Pe(e){return!e.data||e.data.loading||!e.data.channel||!e.data.channel.id||!e.currentUserID}var Re=Object(f.compose)(Object(a.connect)(function(e){var t=Object(o.e)(e);return{currentUserID:t&&t.id,isStaff:!!(t&&t.roles&&t.roles.isStaff)}}),c.a,u.a,Object(r.a)(Te,{options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(we.a)([{topic:function(e){return Object(Oe.K)(e.currentUserID||"")},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:Pe},{topic:function(e){return Object(Oe.t)(e.currentUserID||"",e.data&&e.data.channel&&e.data.channel.id||"")},mapMessageTypesToProps:(xe={},xe[De.PubsubMessageType.ModeratorAdded]="moderatorActions",xe[De.PubsubMessageType.ModeratorRemoved]="moderatorActions",xe),skip:Pe,skipMessage:function(e,t){var n=e;return!t.data.currentUser||n.data.target_user_id!==t.data.currentUser.id}}]),Object(_e.a)(function(e){return{query:Te,variables:{channelLogin:e.channelLogin},topic:Object(Oe.J)(e.currentUserID||""),type:De.PubsubMessageType.UserPropertiesUpdate,skip:Pe(e),mutator:function(e,t){return t&&t.currentUser?void 0===e.changed.email_verified?t:(t.currentUser.isEmailVerified=e.changed.email_verified,t):t}}}),Object(_e.a)(function(e){return{query:Te,variables:{channelLogin:e.channelLogin},topic:Object(Oe.p)(e.currentUserID||""),types:[De.PubsubMessageType.UserFollowedEvent,De.PubsubMessageType.UserUnfollowedEvent],skip:Pe(e),mutator:function(e,t){if(!t||!t.channel||!t.channel.self)return t;if(function(e){return e.type===De.PubsubMessageType.UserFollowedEvent}(e)){if(e.target_user_id!==t.channel.id)return t;t.channel.self.follower?t.channel.self.follower.followedAt=e.timestamp:t.channel.self.follower={__typename:"FollowerEdge",followedAt:e.timestamp}}else if(function(e){return e.type===De.PubsubMessageType.UserUnfollowedEvent}(e)){if(e.target_user_id!==t.channel.id)return t;t.channel.self.follower&&(t.channel.self.follower.followedAt=null)}return t}}}),Object(K.b)(function(e){return{followerDuration:e.followerDuration,followerDurationSeconds:60*e.followerDuration,followerMode:e.followerMode,slowMode:e.slowMode,slowModeDuration:e.slowModeDuration,subsOnlyMode:e.subsOnlyMode}}))(Ae),Ue=n("lw3P"),Be=n("nkgB"),Ve=n("KGti"),He=n("RcPG"),Ge=1e3,qe=200,We=function(e){function t(t){var n=e.call(this,t)||this;return n.delayedMessageBuffer=[],n.updateHandlers=[],n.handleMessage=function(e){var t=!1;switch(e.type){case se.b.Message:if(n.uncountedMessages++,e.user.userID&&n.blockedUsers.has(e.user.userID)){if(!n.props.shouldSeeBlockedAndDeletedMessages)return;e.hidden=!n.unhideUsers.has(e.user.userID)}var i=e.messageParts[0];if(i&&i.type===He.a.Text&&i.content.startsWith(":act "))return;t=!n.isOwnMessage(e);break;case se.b.Resubscription:t=!!e.message&&!n.isOwnMessage(e.message);break;case se.b.ModerationAction:if(!n.props.isCurrentUserModerator)return;if(e.level===Ve.a.User&&(e.moderationActionType===De.ModerationActions.Ban||e.moderationActionType===De.ModerationActions.Timeout||e.moderationActionType===De.ModerationActions.Delete)){var a=e.moderationActionType,r=e.targetUserLogin,o=e.createdByLogin,s=e.messageID;if(n.moderatedUsers.has(r))return;var l=[n.buffer,n.delayedMessageBuffer.map(function(e){return e.event})];a===De.ModerationActions.Delete?l.forEach(function(e){e.some(function(e){var t=n.markUserEventDeleted(e,void 0,s);return!!t&&(t.deletedCount=1,t.modLogin=o,t.modActionType=a,!0)})}):n.moderateBuffers(l,r,e);break}break;case se.b.Moderation:if(n.props.isCurrentUserModerator)return;var c=e.moderationType,d=e.userLogin;if(n.moderatedUsers.has(d))return;var u=[n.buffer,n.delayedMessageBuffer.map(function(e){return e.event})];if(c===se.e.Delete){var m=e.targetMessageID;u.forEach(function(e){e.some(function(e){var t=n.markUserEventDeleted(e,void 0,m);return!!t&&(t.deletedCount=1,!0)})})}else n.moderateBuffers(u,d);break;case se.b.Disconnected:return;case se.b.Reconnect:if(n.buffer.find(function(t){return t.id===e.id})||n.delayedMessageBuffer.find(function(t){return t.event.id===e.id}))return;break;case se.b.Clear:n.clear();break;case se.b.AutoMod:switch(e.autoModType){case se.a.MessageModApproved:case se.a.MessageModDenied:return void[n.buffer,n.delayedMessageBuffer.map(function(e){return e.event})].forEach(function(t){t.some(function(t){return!(t.type!==se.b.AutoMod||t.autoModType!==se.a.MessageRejectedPrompt||!t.rejectedMessage||t.rejectedMessage.id!==e.msg_id)&&(t.rejectedMessage.deleted=!0,!0)})})}}n.delayedMessageBuffer.push({event:e,time:Date.now(),shouldDelay:t})},n.getMessages=function(){return n.buffer},n.unsetModeratedUser=function(e){return function(){n.moderatedUsers.delete(e)}},n.isOwnMessage=function(e){var t=e.user;return!(!n.props.currentUserLogin||!t||t.userLogin!==n.props.currentUserLogin)},n.addUpdateHandler=function(e){-1===n.updateHandlers.indexOf(e)&&(n.updateHandlers=n.updateHandlers.concat(e))},n.removeUpdateHandler=function(e){n.updateHandlers=n.updateHandlers.filter(function(t){return t!==e})},n.delayedMessageBuffer=[],n.buffer=[],n.moderatedUsers=new Set,n.blockedUsers=new Set(n.props.blockedUsers),n.unhideUsers=new Set,n.flushInterval=setInterval(function(){return n.flushRawMessages()},qe),n.uncountedMessages=0,n.chatRateMeasurements=[],n.chatRateMeasurementInterval=setInterval(function(){return n.measureChatRate()},Ge),n}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.setMessageBufferAPI({addUpdateHandler:this.addUpdateHandler,removeUpdateHandler:this.removeUpdateHandler,getMessages:this.getMessages}),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.handleMessage)},t.prototype.componentWillUnmount=function(){this.props.setMessageBufferAPI(),this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage),clearInterval(this.flushInterval),clearInterval(this.chatRateMeasurementInterval)},t.prototype.render=function(){return null},t.prototype.componentWillReceiveProps=function(e){this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.handleMessage),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.handleMessage)),e.blockedUsers!==this.props.blockedUsers&&(this.blockedUsers=new Set(e.blockedUsers)),e.unhideIgnoredUsers!==this.props.unhideIgnoredUsers&&(this.unhideUsers=new Set(e.unhideIgnoredUsers)),this.props.isBackground&&!e.isBackground&&(this.chatRate>5&&this.clear(20),this.notifySubscribers())},t.prototype.clear=function(e){if(void 0===e&&(e=0),e<=0)return this.buffer=[],void(this.delayedMessageBuffer=[]);this.buffer=this.buffer.slice(-e)},t.prototype.isDeletable=function(e){return void 0!==e.deleted},t.prototype.markUserEventDeleted=function(e,t,n){var i=null;switch(e.type){case se.b.Message:i=e;break;case se.b.Resubscription:case se.b.Ritual:i=e.message||null;break;default:return null}if(!i||i.deleted)return null;return Boolean(t&&i.user&&t===i.user.userLogin&&i.messageParts)||Boolean(n&&i.id===n)?(i.deleted=!0,i):null},t.prototype.moderateBuffers=function(e,t,n){var i=this,a=e.reduce(function(e,a){return a.reduce(function(e,a){var r=i.markUserEventDeleted(a,t);if(r){if(r.banned=!0,n){var o=n.moderationActionType,s=n.createdByLogin,l=n.duration;r.modLogin=s,r.modActionType=o,r.duration=l}return{lastDeletedMessage:r,deletedCount:e.deletedCount+1}}return e},e)},{deletedCount:0}),r=a.lastDeletedMessage,o=a.deletedCount;r&&(r.deletedCount=o),this.moderatedUsers.add(t),setTimeout(this.unsetModeratedUser(t),1e3)},t.prototype.flushRawMessages=function(){var e=this,t=[],n=Date.now(),i=!1;this.delayedMessageBuffer.forEach(function(a){var r=a.event,o=a.time,s=a.shouldDelay;o<=n-e.delayDuration||!s?!e.props.shouldSeeBlockedAndDeletedMessages&&e.isDeletable(r)&&r.deleted||(e.buffer.push(r),i=!0):t.push({event:r,time:o,shouldDelay:s})}),this.delayedMessageBuffer=t,i&&(this.clear(150),this.props.isBackground||this.notifySubscribers())},t.prototype.measureChatRate=function(){3===this.chatRateMeasurements.length&&this.chatRateMeasurements.shift(),this.chatRateMeasurements.push(this.uncountedMessages),this.uncountedMessages=0},Object.defineProperty(t.prototype,"chatRate",{get:function(){return 0===this.chatRateMeasurements.length?0:this.chatRateMeasurements.reduce(function(e,t){return e+t})/this.chatRateMeasurements.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayDuration",{get:function(){return this.props.isCurrentUserModerator?0:this.props.data.user&&this.props.data.user.chatSettings&&this.props.data.user.chatSettings.chatDelayMs||0},enumerable:!0,configurable:!0}),t.prototype.notifySubscribers=function(){this.updateHandlers.forEach(function(e){return e()})},t}(g.Component);var ze=Object(f.compose)(Object(a.connect)(function(e){var t=Object(o.e)(e);return{authToken:Object(o.a)(e),currentUserLogin:t&&t.login,isLoggedIn:Object(o.f)(e)}}),Object(r.a)(Be,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(Ue.a)(),d.a,u.a)(We),Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageHandlers=[],t.addMessageHandler=function(e){-1===t.messageHandlers.indexOf(e)&&(t.messageHandlers=t.messageHandlers.concat(e))},t.removeMessageHandler=function(e){t.messageHandlers=t.messageHandlers.filter(function(t){return t!==e})},t.handleMessage=function(e){for(var n=t.messageHandlers.length,i=0;i<n;i++)t.messageHandlers[i](e)},t}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.setMessageHandlerAPI({addMessageHandler:this.addMessageHandler,removeMessageHandler:this.removeMessageHandler,handleMessage:this.handleMessage})},t.prototype.render=function(){return null},t.prototype.componentWillUnmount=function(){this.props.setMessageHandlerAPI()},t}(g.Component),Ye=Object(f.compose)(u.a)(Qe),Ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.subscribe=function(e){t.unsubscribe(),e.channelID&&e.currentUserID&&(t.unsubscriber=x.m.subscribe({topic:Object(Oe.t)(e.currentUserID,e.channelID),onMessage:t.handleMessage}))},t.unsubscribe=function(){t.unsubscriber&&(t.unsubscriber(),t.unsubscriber=null)},t.handleMessage=function(e){switch(e.data.moderation_action){case De.ModerationActions.AutoModRejected:var n=Object(Ve.j)(e.data.msg_id,e.data.args[1],e.data.args[0],e.data.args[2]);t.addMessage(n);break;case De.ModerationActions.AutoModCheerRejected:var i=Object(Ve.c)(e.data.msg_id,e.data.args[1],e.data.args[0],e.data.args[2],e.data.target_user_id);t.addMessage(i);break;case De.ModerationActions.ApprovedAutoModMessage:t.addMessage(Object(Ve.g)(e));break;case De.ModerationActions.DeniedAutoModMessage:t.addMessage(Object(Ve.h)(e));break;case De.TargetedModerationActions.AutoModMessageRejected:t.addMessage(Object(Ve.i)());break;case De.TargetedModerationActions.AutoModMessageApproved:t.addMessage(Object(Ve.e)());break;case De.TargetedModerationActions.AutoModMessageDenied:t.addMessage(Object(Ve.f)());break;case De.TargetedModerationActions.AutoModCheerDenied:t.addMessage(Object(Ve.b)());break;case De.TargetedModerationActions.AutoModCheerTimeout:t.addMessage(Object(Ve.d)());break;case De.ModerationActions.Ban:t.addMessage(Object(Ve.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],void 0,e.data.args[1]));break;case De.ModerationActions.Delete:t.addMessage(Object(Ve.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],void 0,void 0,e.data.args[1],e.data.args[2]));break;case De.TargetedModerationActions.DeleteNotification:t.addMessage(Object(Ve.l)(De.TargetedModerationActions.DeleteNotification,e.data.target_user_id,e.data.args[0],e.data.msg_id));break;case De.ModerationActions.Unban:case De.ModerationActions.Timeout:case De.ModerationActions.Untimeout:case De.ModerationActions.Mod:case De.ModerationActions.Unmod:t.addMessage(Object(Ve.m)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args[0],e.data.args[1],e.data.args[2]));break;case De.ModerationActions.AutoModEnabled:case De.ModerationActions.Clear:case De.ModerationActions.EmoteOnly:case De.ModerationActions.EmoteOnlyOff:case De.ModerationActions.FollowersOnly:case De.ModerationActions.FollowersOnlyOff:case De.ModerationActions.Host:case De.ModerationActions.R9kBeta:case De.ModerationActions.R9kBetaOff:case De.ModerationActions.Raid:case De.ModerationActions.Slow:case De.ModerationActions.SlowOff:case De.ModerationActions.SubsBeta:case De.ModerationActions.SubscribersOnly:case De.ModerationActions.SubscribersOnlyOff:case De.ModerationActions.Unhost:case De.ModerationActions.AddBlockedTerm:case De.ModerationActions.AddPermittedTerm:case De.ModerationActions.DeleteBlockedTerm:case De.ModerationActions.DeletePermittedTerm:case De.ModerationActions.ModifiedAutoModProperties:case De.ModerationActions.Unraid:t.addMessage(Object(Ve.k)(e.data.moderation_action,e.data.created_by,e.data.created_by_user_id,e.data.args));break;default:x.k.warn("Unknown moderation action type",e.data.moderation_action)}},t}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.subscribe(this.props)},t.prototype.componentWillReceiveProps=function(e){e.channelID===this.props.channelID&&e.currentUserID===this.props.currentUserID||this.subscribe(e)},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.render=function(){return null},t.prototype.addMessage=function(e){this.props.messageHandlerAPI?this.props.messageHandlerAPI.handleMessage(e):x.k.warn("ModerationActionService received an event before the MessageHandlerAPI was available.")},t}(g.Component);var Xe=Object(f.compose)(Object(a.connect)(function(e){var t=Object(o.e)(e);return{currentUserID:t&&t.id}}),u.a)(Ke),$e=n("BJwa"),Je="(?:\\W|^)",Ze="(?:$|\\W)",et="PowerUpL DarkMode PowerUpR",tt={failSilently:!0,placeholder:null},nt=v.a.wrap(function(){return n.e(205).then(n.bind(null,"Gnts"))},"MysteryGiftChatBannerQueue",tt),it=v.a.wrap(function(){return n.e(204).then(n.bind(null,"KSjr"))},"NativeBroadcastNotification",tt),at=v.a.wrap(function(){return n.e(203).then(n.bind(null,"T3fw"))},"Orbis",tt),rt=v.a.wrap(function(){return n.e(202).then(n.bind(null,"7htX"))},"RaidNotification",tt),ot=v.a.wrap(function(){return n.e(201).then(n.bind(null,"rg60"))},"RitualsOnboardingSticky",tt),st=v.a.wrap(function(){return n.e(200).then(n.bind(null,"miqE"))},"ShareToChat",tt),lt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasReceivedInitialRoomState:!1,hostedChannelLogin:null,userBadges:null,userBadgeDynamicData:null},n.sendMessage=function(e){if(!e||0===e.length||!n.props.authToken)return!1;if(!n.props.chatConnectionAPI)return!1;var t=n.props.chatConnectionAPI.sendMessage(e);return(!t||!t.preserveInput)&&(n.parseOutgoingMessage(e),!0)},n.pushMessage=function(e){n.props.messageHandlerAPI&&n.props.messageHandlerAPI.handleMessage(e)},n.onChatEvent=function(e){switch(e.type){case se.b.Hosting:n.hostingHandler(e.hostedChannel);break;case se.b.Unhost:n.hostingHandler(null);break;case se.b.RoomState:n.onRoomStateUpdated(e.state);break;case se.b.BadgesUpdated:n.onBadgesUpdated(e)}},n.hostingHandler=function(e){n.setState({hostedChannelLogin:e}),n.props.onHostingChange&&n.props.onHostingChange(e)},n.createOutgoingTokenMatchers=function(e){n.outgoingTokenMatchers=e.map(function(e){return{token:e,regex:new RegExp(""+Je+e+Ze)}})},n.parseOutgoingMessage=function(e){n.outgoingTokenMatchers.forEach(function(t){t.regex.test(e)&&n.onOutgoingTokenMatch(t.token,e)})},n.onOutgoingTokenMatch=function(e,t){switch(e){case et:var i=n.props.theme===b.a.Light?b.a.Dark:b.a.Light;n.props.onThemeChange(i);break;default:return}},n.onBadgesUpdated=function(e){n.setState({userBadges:e.badges,userBadgeDynamicData:e.badgeDynamicData||null})},n.onRoomStateUpdated=function(e){n.props.onRoomStateUpdate(e),n.setState({hasReceivedInitialRoomState:!0})},n.createOutgoingTokenMatchers([et]),n}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.addMessageHandler(this.onChatEvent)},t.prototype.componentWillUnmount=function(){this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent)},t.prototype.componentWillReceiveProps=function(e){var t,n;e.channelLogin!==this.props.channelLogin&&this.setState({hostedChannelLogin:null}),this.state.hasReceivedInitialRoomState&&(this.props.followerModeDuration===e.followerModeDuration&&this.props.followerModeEnabled===e.followerModeEnabled||this.pushMessage((t=e.followerModeEnabled,n=e.followerModeDuration,{type:se.b.FollowerOnlyMode,id:Object(le.a)("follower-only"),enabled:t,length:n})),this.props.slowModeEnabled===e.slowModeEnabled&&this.props.slowModeDuration===e.slowModeDuration||this.pushMessage(function(e,t){return{type:se.b.SlowMode,id:Object(le.a)("slowmode"),enabled:e,length:t}}(e.slowModeEnabled,e.slowModeDuration))),this.props.messageHandlerAPI!==e.messageHandlerAPI&&(this.props.messageHandlerAPI&&this.props.messageHandlerAPI.removeMessageHandler(this.onChatEvent),e.messageHandlerAPI&&e.messageHandlerAPI.addMessageHandler(this.onChatEvent))},t.prototype.render=function(){var e,t=this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],n=this.props.isHidden||!this.props.rightColumnExpanded&&!this.props.inlineRightColumnExpanded,i=!(!this.props.isEmbedded&&!this.props.isPopout&&n&&!this.props.shouldConnectChat),a=!!this.props.hostedChannelDisplayName&&(!this.props.isPopout||this.props.isFullPopoutPlayer);return this.props.firstPageLoaded&&(e=g.createElement(at,{channelLogin:this.props.channelLogin,sendMessage:this.sendMessage})),g.createElement(g.Fragment,null,g.createElement($e.b,{authToken:this.props.authToken,bitsConfig:this.props.bitsConfig,channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,chatRoomHeader:e,chatRules:this.props.chatRules,closeRoomPicker:this.props.closeRoomPicker,currentUserDisplayName:this.props.userDisplayName,currentUserLogin:this.props.userLogin,emotes:t,emoteMap:this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap||{},firstPageLoaded:this.props.firstPageLoaded,hostedChannelLogin:this.state.hostedChannelLogin,isBackground:this.props.isBackground,isChatRulesOpen:this.props.isChatRulesOpen,isCurrentUserModerator:this.props.isCurrentUserModerator,isEmbedded:this.props.isEmbedded,isHidden:this.props.isHidden,isHostMode:!!this.state.hostedChannelLogin,isOwnChannel:this.isOwnChannel,isPopout:this.props.isPopout,isStaff:this.props.isStaff,onChatUnhide:this.props.onChatUnhide,onCloseChatRules:this.props.onCloseChatRules,onPushMessage:this.pushMessage,onSendMessage:this.sendMessage,onShowChatRules:this.props.onShowChatRules,theme:this.props.theme,userBadges:this.state.userBadges,userBadgeDynamicData:this.state.userBadgeDynamicData,userID:this.props.userID,useBaseBackground:this.props.useBaseBackground},this.props.firstPageLoaded&&this.props.authToken&&!this.props.isEmbedded&&g.createElement(st,{authToken:this.props.authToken,channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,"data-test-selector":"share-to-chat"}),a&&g.createElement(re,{isFullPopoutPlayer:this.props.isFullPopoutPlayer,hostedChannelDisplayName:this.props.hostedChannelDisplayName||"",hostedChannelLogin:this.state.hostedChannelLogin||""}),this.props.firstPageLoaded&&!this.props.isEmbedded&&this.props.channelID&&g.createElement(rt,{channelID:this.props.channelID,"data-test-selector":"raid-notification"}),this.props.firstPageLoaded&&!this.props.isEmbedded&&this.props.channelID&&g.createElement(nt,{channelID:this.props.channelID,channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&g.createElement(it,{channelLogin:this.props.channelLogin}),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&this.props.channelID&&g.createElement(Y.a,null,g.createElement(ot,{channelID:this.props.channelID,channelLogin:this.props.channelLogin})),this.props.firstPageLoaded&&!this.props.isEmbedded&&!this.props.isPopout&&this.props.channelID&&g.createElement(z,{channelLogin:this.props.channelLogin,onSendMessage:this.sendMessage,channelID:this.props.channelID})),this.renderCommandHandlers(),g.createElement(ue,{channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin}),g.createElement(Re,{channelLogin:this.props.channelLogin}),g.createElement(Ne,{bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,channelLogin:this.props.channelLogin,emoteSets:this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],isCurrentUserModerator:this.props.isCurrentUserModerator,isHostMode:!!this.state.hostedChannelLogin,shouldConnect:i}),g.createElement(ze,{channelLogin:this.props.channelLogin,shouldSeeBlockedAndDeletedMessages:this.props.shouldSeeBlockedAndDeletedMessages,isBackground:!!this.props.isBackground,isCurrentUserModerator:this.props.isCurrentUserModerator,unhideIgnoredUsers:this.props.unhideIgnoredUsers}),g.createElement(Ye,null),g.createElement(Xe,{channelID:this.props.channelID}))},t.prototype.renderCommandHandlers=function(){if(this.props.isBackground)return null;var e=this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap||{},t=this.props,n=t.channelID,i=t.isPopout,a=t.userLogin;return g.createElement(g.Fragment,null,g.createElement(G.a,{channelLogin:this.props.channelLogin,isEmbedded:this.props.isEmbedded,isPopout:i,userLogin:a,userID:this.props.userID,emoteMap:e}),g.createElement(F.a,{channelLogin:this.props.channelLogin,userLogin:a,userID:this.props.userID,isEmbedded:this.props.isEmbedded,isPopout:i}),g.createElement(S.a,{channelLogin:this.props.channelLogin,channelID:this.props.channelID,suppressLocalSuccessMessage:!0}),g.createElement(E.a,{channelLogin:this.props.channelLogin,isPopout:i}),g.createElement(N.a,{channelLogin:this.props.channelLogin}),g.createElement(_.a,{channelID:n,channelLogin:this.props.channelLogin}),g.createElement(H,{channelID:n,channelLogin:this.props.channelLogin}),g.createElement(w.a,{currentUserLogin:a,channelLogin:this.props.channelLogin}),this.props.chatRules&&!!this.props.chatRules.length&&g.createElement(L,{channelLogin:this.props.channelLogin}))},Object.defineProperty(t.prototype,"isOwnChannel",{get:function(){return this.props.userID===this.props.channelID},enumerable:!0,configurable:!0}),t}(g.Component);var ct=Object(K.b)(function(e){return{followerModeDuration:e.followerDuration,followerModeEnabled:e.followerMode,slowModeDuration:e.slowModeDuration,slowModeEnabled:e.slowMode,onRoomStateUpdate:function(t){return e.updateRoomState(t)}}})(lt),dt=Object(f.compose)(Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isChatRulesOpen:e.chat.isChatRulesOpen,isHidden:e.chat.isHidden,isLoggedIn:Object(o.f)(e),rightColumnExpanded:e.ui.rightColumnExpanded,inlineRightColumnExpanded:e.ui.inlineRightColumnExpanded,theme:Object(y.a)(e),unhideIgnoredUsers:e.chat.unhideIgnoredUsers}},function(e){return Object(f.bindActionCreators)({onCloseChatRules:function(){return O.A()},onShowChatRules:function(){return O.Q()},onChatUnhide:function(){return O.P()},onThemeChange:function(e){return Object(C.b)(e,C.a.TypedCommand)}},e)}),Object(m.withLatencyTracking)("ChatRoom",{autoReportInteractive:!0}),Object(k.a)(),l.a,u.a)(function(e){return g.createElement(K.a,null,g.createElement(oe.a,null,g.createElement(Q.a,null,g.createElement($.a,null,g.createElement(X.b,{channelID:e.channelID},g.createElement(ct,h.__assign({},e)))))))}),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentDidUpdate=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=this.props.channelData.channel,t=this.props.userData&&this.props.userData.user,n=!1,i=!1,a=!1;if(t&&e&&e.self){var r=t.login===e.login,o=t.roles&&t.roles.isGlobalMod||!1,s=t.roles&&t.roles.isSiteAdmin||!1;i=t.roles&&t.roles.isStaff||!1,a=e.self.isModerator||r||o,n=e.self.isModerator||r||o||s}var l=void 0;return e&&e.chatSettings&&e.chatSettings.rules&&e.chatSettings.rules.filter(function(e){return e.trim().length}).length&&(l=e.chatSettings.rules),g.createElement(dt,{key:this.props.channelLogin,authToken:this.props.sessionUser&&this.props.sessionUser.authToken,bitsConfig:this.props.bitsConfig,channelDisplayName:e&&e.displayName,channelID:e&&e.id,channelLogin:this.props.channelLogin,chatRules:l,clientID:this.props.clientID,isBackground:this.props.isBackground,isCurrentUserModerator:n,isEmbedded:!!this.props.isEmbedded,isPopout:!!this.props.isPopout,hostedChannelDisplayName:this.props.hostedChannelDisplayName,closeRoomPicker:this.props.closeRoomPicker,onHostingChange:this.props.onHostingChange,userDisplayName:this.props.sessionUser&&this.props.sessionUser.displayName,userID:this.props.sessionUser&&this.props.sessionUser.id.toString(),userLogin:this.props.sessionUser&&this.props.sessionUser.login,isStaff:i,shouldSeeBlockedAndDeletedMessages:a,shouldConnectChat:this.props.shouldConnectChat,useBaseBackground:this.props.useBaseBackground,isFullPopoutPlayer:!!this.props.isFullPopoutPlayer})},t}(g.Component),mt=n("9P+5");var pt=Object(i.compose)(Object(a.connect)(function(e){return{sessionUser:Object(o.e)(e)}}),Object(r.a)(p,{name:"channelData",options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(r.a)(mt,{name:"userData",skip:function(e){return!e.sessionUser}}),Object(m.withLatencyTracking)("Chat"))(ut),ht=Object(i.compose)(s.b,l.b,d.b,u.b,c.b)(pt);n.d(t,!1,function(){return ut}),n.d(t,"b",function(){return pt}),n.d(t,"a",function(){return ht})},"L3+h":function(e,t,n){"use strict";var i,a=n("tiJ6"),r=n("mrSG"),o=n("q1tI"),s=n("fvjX"),l=n("/7QA"),c=n("eJ65"),d=n("DMoW"),u=n("2xye"),m=n("dIU+"),p=n("GnwI"),h=n("4qQ0"),g=n("QjI3"),f=n("ygYM"),v=n("X2PJ"),b=n("HSpZ"),k=n("Ws8v"),C=n("hnjF"),y=n("sUnt"),S=n("Jsra"),E=n("7d/q"),N=n("7uM4"),w=n("i4Ys"),_=n("HH5h"),D=n("+80q");n("axcf");function O(e){return Object(l.d)("Report {hostChannelDisplayName}",{hostChannelDisplayName:e},"VideoPlayerHostingUI")}!function(e){e.ChannelName="hosting-ui__channel-name",e.Footer="hosting-ui__footer",e.Header="hosting-ui__header",e.MoreButton="hosting-ui__more-button",e.ReportHostChannelButton="hosting-ui__report-host-channel-button",e.ReportHostedChannelButton="hosting-ui__report-hosted-channel-button"}(i||(i={}));var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportHostClick=function(){var e=t.props.hostChannelID,n=t.props.hostChannelDisplayName||t.props.hostChannelID;e&&n&&t.openReportModal(e,n)},t.handleReportHostedClick=function(){var e=t.props.hostedChannelID,n=t.props.hostedChannelDisplayName||t.props.hostedChannelID;e&&n&&t.openReportModal(e,n)},t.openReportModal=function(e,n){t.props.isLoggedIn?t.props.showReportUserModal({onClose:t.handleReportModalClose,reportContext:{contentType:d.Pa.USER_REPORT,targetUserID:e},title:O(n)}):t.props.login()},t.handleReportModalClose=function(e){(e===h.b.MutationError||e===h.b.Success)&&t.props.history.push("/")},t}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.isVisible(this.props)!==this.isVisible(e)&&this.props.triggerPlayerReposition&&this.props.triggerPlayerReposition()},t.prototype.render=function(){var e=this.isVisible(this.props);return o.createElement(k.a,{className:"video-player-hosting-ui__container"},e&&this.renderHeader(),o.createElement("span",{key:"video-player"},this.props.children),o.createElement(y.a,{display:e?C.d.Block:C.d.Hide,position:C.j.Relative,zIndex:C.n.Above},e&&this.renderFooter()))},t.prototype.isVisible=function(e){return!!e.hostedChannelDisplayName},t.prototype.renderHeader=function(){return o.createElement(b.a,{type:b.f.SlideInBottom,delay:b.b.Medium,duration:b.c.Medium,enabled:!0},o.createElement(S.a,{key:"hosting-ui-header",className:"video-player-hosting-ui__link",to:{pathname:"/"+this.props.hostedChannelLogin,state:{medium:u.PageviewMedium.Channel,content:u.PageviewContent.Host}},"data-a-target":"hosting-ui-link","data-test-selector":i.Header},o.createElement(k.a,{className:"video-player-hosting-ui__header",display:C.d.Flex,background:v.a.AccentAlt2,color:v.c.Overlay,alignItems:C.b.Center,padding:{x:1,y:.5},"data-a-target":"hosting-ui-header",borderRadius:{topLeft:v.b.Medium,topRight:v.b.Medium}},o.createElement(y.a,{className:"video-player-hosting-ui__avatar-container"},o.createElement(_.a,{src:this.props.hostedChannelProfileImageURL||l.a.defaultAvatarURL,size:30,alt:Object(l.d)("Hosted Channel {hostedChannelDisplayName}'s Avatar",{hostedChannelDisplayName:this.props.hostedChannelDisplayName||""},"VideoPlayerHostingUI")})),o.createElement(k.a,{margin:{left:1},fontSize:v.d.Size5},Object(l.d)("Hosting","VideoPlayerHostingUI"),"",o.createElement(D.a,{type:D.e.Span,className:"video-player-hosting-ui__channel-name",color:v.c.OverlayAlt,"data-a-target":"hosting-ui-channel-name","data-test-selector":i.ChannelName},this.props.hostedChannelDisplayName)))))},t.prototype.renderFooter=function(){return o.createElement(b.a,{type:b.f.SlideInTop,enabled:!0,delay:b.b.Medium,duration:b.c.Medium},o.createElement(k.a,{key:"hosting-ui-footer",background:v.a.AccentAlt2,className:"video-player-hosting-ui__footer",display:C.d.Block,padding:1,"data-test-selector":i.Footer,"data-a-target":"hosting-ui-footer",borderRadius:{bottomLeft:v.b.Medium,bottomRight:v.b.Medium}},this.props.firstPageLoaded&&o.createElement(y.a,{padding:{y:.5},display:C.d.Flex,justifyContent:C.h.Between},o.createElement(y.a,{display:C.d.Flex},o.createElement(y.a,{margin:{right:1}},o.createElement(m.a,{"data-a-target":"hosting-ui-follow-button",channelName:this.props.hostedChannelLogin||"",channelLogin:this.props.hostedChannelLogin,hostChannelLogin:this.props.hostChannelLogin||void 0,hostChannelID:this.props.hostChannelID||void 0,isHostedFollow:!0,balloonDirection:f.b.BottomLeft,followUIType:m.b.IconAndText,unfollowUIType:m.b.IconOnly})),o.createElement(y.a,null,o.createElement(g.SubscribeButton,{channelLogin:this.props.hostedChannelLogin,hostChannelID:this.props.hostChannelID||void 0,hostChannelLogin:this.props.hostChannelLogin||void 0,subLocation:"channel_page","data-a-target":"hosting-ui-subscribe-button"}))),o.createElement(c.a,null,o.createElement(E.a,{ariaLabel:Object(l.d)("More options","HostingUI"),overlay:!0,icon:N.b.More,onClick:this.handleReportHostClick,"data-a-target":"hosting-ui-more-button","data-test-selector":i.MoreButton}),o.createElement(f.a,{direction:f.b.TopRight,"data-a-target":"hosting-ui-more-balloon"},o.createElement(y.a,{padding:{y:1}},this.props.hostChannelID&&(this.props.hostChannelDisplayName||this.props.hostChannelLogin)&&o.createElement(w.a,{onClick:this.handleReportHostClick,"data-a-target":"hosting-ui-report-button","data-test-selector":i.ReportHostChannelButton},o.createElement(y.a,{padding:{x:1,y:.5}},O(this.props.hostChannelDisplayName||this.props.hostChannelLogin))),this.props.hostedChannelID&&(this.props.hostedChannelDisplayName||this.props.hostedChannelLogin)&&o.createElement(w.a,{onClick:this.handleReportHostedClick,"data-a-target":"hosting-ui-report-hosted-button","data-test-selector":i.ReportHostedChannelButton},o.createElement(y.a,{padding:{x:1,y:.5}},O(this.props.hostedChannelDisplayName||this.props.hostedChannelLogin)))))))))},t}(o.Component),T=Object(s.compose)(Object(p.withLatencyTracking)("HostingUI",{autoReportInteractive:!0}))(I),M=n("/MKj"),L=n("wIs1"),F=n("1/iK"),x=n("aCAx"),j=n("y5D0"),A=n("kRBY"),P=n("/HY+");var R=Object(M.connect)(function(e){return{isLoggedIn:Object(A.f)(e),firstPageLoaded:e.session.firstPageLoaded}},function(e){return Object(s.bindActionCreators)({login:function(){return Object(j.e)(F.a.ReportHoster)},showReportUserModal:function(e){var t=r.__rest(e,[]);return Object(x.d)(P.a,t)}},e)})(Object(L.a)(T));var U=Object(a.b)(function(e){var t=e.hostedChannel;return{hostChannelLogin:e.channel&&e.channel.login,hostChannelID:e.channel&&e.channel.id,hostChannelDisplayName:e.channel&&e.channel.displayName,hostedChannelID:t?t.id:null,hostedChannelDisplayName:t?t.displayName:null,hostedChannelLogin:t?t.login:null,hostedChannelProfileImageURL:t?t.profileImageURL:null}})(R);n.d(t,"a",function(){return U})},L5dg:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("q1tI"),a=n("0Rl0"),r=function(e){for(var t=[],n=void 0===e.placeholderCount?20:e.placeholderCount,r=0;r<n;r++)t.push(i.createElement(a.a,{key:r}));return i.createElement(i.Fragment,null,t)}},L6L7:function(e,t,n){},L7EG:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoShareBox_TrackingVideoContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:156}};n.loc.source={body:"query VideoShareBox_TrackingVideoContext($videoID: ID!) {\nvideo(id: $videoID) {\nid\nbroadcastType\nowner {\nid\nlogin\nroles {\nisPartner\n}\n}\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Lmqf:function(e,t,n){e.exports=n.p+"assets/upsell-center-dark-6c092df86238db84cff1.png"},MAph:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelContext_HostedChannel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hostedChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"hostedChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"hostedChannel"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"hostedChannel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]}]}}],loc:{start:0,end:205}};n.loc.source={body:"query ChannelContext_HostedChannel($hostedChannelLogin: String!) {\nuser(login: $hostedChannelLogin) {\n...hostedChannel\n}\n}\nfragment hostedChannel on User {\nid\nlogin\ndisplayName\nprofileImageURL(width: 70)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},MBj5:function(e,t,n){},MIhh:function(e,t,n){},MJbm:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=(n("efEE"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logger=r.q.logger.withCategory("resize-detector"),t.onScroll=function(){var e=t.container,n=e.offsetWidth,i=e.offsetHeight,a=e.offsetLeft,r=e.offsetTop;t.logger.debug("Resize Detector -- onScroll"),n===t.width&&i===t.height&&r===t.top&&a===t.left||(t.width=n,t.height=i,t.props.onResize(n,i,r,a)),t.reset()},t.setGrowDivRef=function(e){return t.growDiv=e},t.setGrowChildDivRef=function(e){return t.growChildDiv=e},t.setShrinkDivRef=function(e){return t.shrinkDiv=e},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement("div",{className:"resize-detector"},a.createElement("div",{className:"resize-detector",ref:this.setGrowDivRef},a.createElement("div",{className:"resize-detector__grow",ref:this.setGrowChildDivRef})),a.createElement("div",{className:"resize-detector",ref:this.setShrinkDivRef},a.createElement("div",{className:"resize-detector__shrink"})))},t.prototype.componentDidMount=function(){if(this.growDiv){this.growDiv.parentElement||this.logger.warn("growDiv.parentElement is undefined!"),this.container=this.growDiv.parentElement.parentElement;var e=this.container.style.position;if("relative"!==e&&"absolute"!==e&&"fixed"!==e){var t=window.getComputedStyle(this.container);t&&"static"===t.getPropertyValue("position")&&(this.container.style.position="relative")}this.onScroll(),this.growDiv.addEventListener("scroll",this.onScroll),this.shrinkDiv.addEventListener("scroll",this.onScroll)}else this.logger.warn("growDiv is undefined!")},t.prototype.componentWillUnmount=function(){this.growDiv.removeEventListener("scroll",this.onScroll),this.shrinkDiv.removeEventListener("scroll",this.onScroll)},t.prototype.reset=function(){var e=this.growDiv,t=this.shrinkDiv,n=this.growChildDiv.style;n.width="100000px",n.height="100000px",e.scrollLeft=1e5,e.scrollTop=1e5,t.scrollLeft=1e5,t.scrollTop=1e5},t}(a.Component));n.d(t,"a",function(){return o})},MLDe:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return p});var i,a,r=n("/7QA"),o=n("wbMx"),s=n("2xye"),l=n("BQs+"),c=((i={})[o.b.Twitter]="twitter",i[o.b.Reddit]="reddit",i[o.b.VKontakte]="vkontakte",i[o.b.Facebook]="facebook",i[o.b.Copy]="link",i[o.b.CopyInput]="option_link",i[o.b.Download]="download",i),d={MyClips:"MyClips",ClipsOfMyChannel:"ClipsOfMyChannel"},u=((a={MyClips:s.PageviewLocation.MyClipsManager,ClipsOfMyChannel:s.PageviewLocation.ChannelClipsManager,TopClipsGame:s.PageviewLocation.ClipsGame,TopClipsChannel:s.PageviewLocation.ChannelClips})[s.PageviewLocation.ClipsEditing]=s.PageviewLocation.ClipsEditing,a[s.PageviewLocation.ClipsViewing]=s.PageviewLocation.ClipsViewing,a[s.PageviewLocation.ClipsWatchPage]=s.PageviewLocation.ClipsWatchPage,a),m=function(e,t,n,i,a){return function(o){r.q.tracking.track(s.SpadeEventType.VideoShare,{vod_id:e,vod_type:s.SpadeVideoBroadcastType.Clip,share_platform:c[o],location:u[a],game:t,channel_id:Number(n||0),channel:i,live:null})}},p=function(e,t,n,i,a,o){return function(){r.q.tracking.track(s.SpadeEventType.VideoShare,{vod_id:e,vod_type:s.SpadeVideoBroadcastType.Clip,share_platform:l.a.Link,location:u[a],game:t,channel_id:Number(n||0),channel:i,live:null,shared_item_url:o})}}},MVDO:function(e,t,n){},MfJU:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"modLogsMessage"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsMessage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelLogin"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:323}};n.loc.source={body:"# fragment for mod logs message\nfragment modLogsMessage on ModLogsMessage {\nid\nsentAt\ncontent {\ntext\nfragments {\ntext\ncontent {\n... on Emote {\nemoteID: id\nsetID\ntoken\n}\n__typename\n}\n}\n__typename\n}\nsender {\nid\nlogin\nchatColor\ndisplayName\ndisplayBadges(channelLogin: $channelLogin) {\nsetID\nversion\n}\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Mj6i:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("yR8l"),r=n("0FG4"),o=n("S4w9");function s(){return Object(a.a)(o,{options:function(e){return{variables:{withOwner:!0}}},props:function(e){if(e.data){var t=e.data.currentUser&&e.data.currentUser.emoteSets||[],n=t&&Object(r.b)(t);return{emoteSetsData:i.__assign({},e.data,{currentUser:e.data.currentUser||null,emoteMap:n,emoteSets:t})}}return{}},skip:function(e){return!e.isLoggedIn}})}},NJiF:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelCurrentUser"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:84}};n.loc.source={body:"fragment channelCurrentUser on User {\nid\ndisplayName\nroles {\nisStaff\nisSiteAdmin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},NNSq:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),a=n("/7QA"),r=n("sAMt");function o(e){return i.__awaiter(this,void 0,Promise,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:t=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.q.apollo.client.query({query:r,variables:{login:e}})];case 2:return t=i.sent(),[3,4];case 3:return n=i.sent(),a.k.warn(n,"Failed to fetch user targeted by chat command.",{userLogin:e}),[3,4];case 4:return t&&t.data.user.id?[2,t.data.user.id]:[2,null]}})})}},NWfm:function(e,t,n){},Nimz:function(e,t,n){},"O/li":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommunityPoints"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"community"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"communityPointsSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"communityPoints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:243}};n.loc.source={body:"query CommunityPoints($channelLogin: String!) {\ncommunity: user(login:$channelLogin) {\nid\nchannel {\nid\ncommunityPointsSettings {\nisEnabled\n# NOTE: We need imageURL here too but it's not stubbed yet.\n}\nself {\ncommunityPoints {\nbalance\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},OCTF:function(e,t,n){},OTul:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"i",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"f",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"h",function(){return f});var i=n("+GjP"),a=n("rwoo"),r=n("QK1T"),o="https://static-cdn.jtvnw.net/emoticons/v1/",s="manager";function l(e){return void 0===e&&(e=""),"https://www.twitch.tv/"+e}function c(e){return void 0===e&&(e=""),"https://clips.twitch.tv/"+e}function d(e,t){return void 0===e&&(e=null),void 0===t&&(t={}),Object(i.e)(u(e)+"/clips",t)}function u(e,t){return void 0===e&&(e=null),void 0===t&&(t={}),e?Object(i.e)(l(e+"/"+s),t):Object(i.e)(l(s),t)}function m(e,t){return void 0===t&&(t={}),Object(i.e)(l(""+e),t)}function p(e,t,n){return void 0===n&&(n={}),Object(i.e)(u(e)+"/highlighter/"+t,n)}function h(e,t){return void 0===t&&(t={}),Object(i.e)(function(e){return l("directory/game/"+e)}(e)+"/clips",t)}function g(e,t){void 0===t&&(t={});var n=Object(i.e)(m(e)+"/clips",t);return Object(r.a)(window.navigator.userAgent)?"intent://stream/"+e+"#Intent;scheme=twitch;package=tv.twitch.android.app;S.browser_fallback_url="+n+";end":n}function f(e){return void 0===e&&(e=a.a.Default),"/clips/"+e}},OXQr:function(e,t,n){},OhOW:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("/7QA"),r=n("+U0Y"),o=n("5xw2");function s(e){return e.userPreferences.languagePreferences}a.q.store.registerReducer("userPreferences",function(e,t){switch(void 0===e&&(e={languagePreferences:Object(o.b)()}),t.type){case r.a:return i.__assign({},e,{languagePreferences:t.languagePreferences});default:return e}})},OpME:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"d",function(){return h});var i=n("mrSG"),a=n("lZdE"),r=n("cpJf"),o={"B-?\\)":"B)","\\:-?[z|Z|\\|]":":|","\\:-?\\)":":)","\\:-?\\(":":(","\\:-?(p|P)":":P","\\;-?(p|P)":";P","\\:-?[\\\\/]":":/","\\;-?\\)":";)","R-?\\)":"R)",":>":":>","\\:\\&gt\\;":":>","[oO](_|\\.)[oO]":"O_o","\\:-?D":":D","\\:-?(o|O)":":O",">\\\\(":">(",":-?(?:7|L)":":7","\\:-?(S|s)":":S","#-?[\\\\/]":"#/","<\\]":"<]","<3":"<3","\\&lt\\;3":"<3","\\&lt\\;\\]":"<]","\\&gt\\;\\(":">("},s=["1.0","2.0","3.0"],l=new Set([457,33,42,0]);function c(e){for(var t=[],n=function(e){if(!e||null===e.id||null===e.token)return"continue";var n=o[e.token]||e.token,a=s.reduce(function(t,n){var i=t;return i&&(i=i.concat(", ")),i.concat("https://static-cdn.jtvnw.net/emoticons/v1/"+e.id+"/"+n+" "+n+"x")},"");t.push(i.__assign({},e,{displayName:n,srcSet:a}))},a=0,r=e;a<r.length;a++){n(r[a])}return t}function d(e){return e.filter(function(e){return!!e&&!!e.id&&!!e.token}).sort(function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)})}function u(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];if(a&&a.id&&a.emotes){for(var r={id:a.id,emotes:[]},o=0,s=a.emotes;o<s.length;o++){var l=s[o];l&&l.id&&l.token&&r.emotes.push(l)}t.push(r)}}return t}function m(e){for(var t=[],n=[],i=0,a=e;i<a.length;i++){var r=a[i];if(r&&r.id&&r.emotes){var o={id:r.id,emotes:c(d(r.emotes))};r.owner&&(o.owner=r.owner),l.has(parseInt(r.id,10))?t.push(o):n.push(o)}}return n.concat(t)}var p=function(e,t,n){var i=n||r.c,o=[],s=[],l=[],c=new RegExp("^"+Object(a.a)(t),"i");return e.forEach(function(e){i[e.token]?l.push(e):e.token.match(c)?o.push(e):s.push(e)}),o.sort(function(e,t){return e.token<t.token?-1:e.token>t.token?1:0}),s.sort(function(e,t){return e.token<t.token?-1:e.token>t.token?1:0}),l.sort(function(e,t){return i[t.token].count-i[e.token].count}),l.concat(o).concat(s)},h=function(e){var t={};return e.filter(function(e){return!t.hasOwnProperty(e.token)&&(t[e.token]=!0)})}},OvAg:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IncomingRaidLine_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"query IncomingRaidLine_Channel($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\ndisplayName\nprofileImageURL(width: 50)\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},OxSk:function(e,t,n){},P5MF:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_EmoteCard_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:176}};n.loc.source={body:"query Core_Services_Spade_EmoteCard_User($channelID: ID!) {\nuser(id: $channelID) {\nid\nhasPrime\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},P6kH:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return c});var i,a=n("/7QA"),r=n("DMoW"),o="owl2019_emote_ids",s="OverwatchLeague",l="137512364";function c(e){return e.emote.subscriptionProduct?"12658"===e.emote.subscriptionProduct.id?i.Prime:"324"===e.emote.subscriptionProduct.id?i.Turbo:(t=e.emote.id,a.b.get(o,[]).includes(t)?i.OWL2019:e.emote.subscriptionProduct.owner&&e.emote.subscriptionProduct.owner.id?"139075904"===e.emote.subscriptionProduct.owner.id||e.emote.subscriptionProduct.state===r.jb.INACTIVE?i.LimitedTime:i.Subscription:i.Unavailable):i.Global;var t}!function(e){e[e.Unknown=0]="Unknown",e[e.Prime=1]="Prime",e[e.Turbo=2]="Turbo",e[e.OWL2019=3]="OWL2019",e[e.LimitedTime=4]="LimitedTime",e[e.Unavailable=5]="Unavailable",e[e.Subscription=6]="Subscription",e[e.Global=7]="Global"}(i||(i={}))},PY8X:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/7QA"),s=n("yR8l"),l=n("+80q"),c=n("sUnt"),d=n("hnjF"),u=n("X2PJ"),m=n("Ws8v"),p=n("7d/q"),h=n("7uM4"),g=n("dEDE"),f=n("ilCE"),v=(n("MVDO"),n("2xye"));function b(e,t){var n=t.action?{action:t.action}:{},i=a.__assign({raid_upsell_source_id:Number(t.sourceChannelID),raid_upsell_target_id:Number(t.targetChannelID)},n);o.p.track(e,i)}!function(e){e.Host="host",e.Raid="raid",e.Dismiss="dismiss"}(i||(i={}));var k="raid-now-upsell";function C(){return!o.n.get(k,!1)}var y={"data-test-selector":"dismiss"},S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDismissUpsell=function(){var e;e={sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id},b(v.SpadeEventType.RaidUpsellClick,a.__assign({},e,{action:i.Dismiss})),t.props.closeRaidUpsell()},t.handleSendHostMsgFromUpsell=function(){var e;e={sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id},b(v.SpadeEventType.RaidUpsellClick,a.__assign({},e,{action:i.Host})),t.handleSendHostMsg()},t.handleSendHostMsg=function(){t.props.send("/host "+t.props.targetChannelLogin),t.props.closeRaidUpsell()},t.handleSendRaidMsg=function(){var e;e={sourceChannelID:t.props.data.sourceChannel.id,targetChannelID:t.props.data.targetChannel.id},b(v.SpadeEventType.RaidUpsellClick,a.__assign({},e,{action:i.Raid})),t.props.send("/raid "+t.props.targetChannelLogin),t.props.closeRaidUpsell()},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.data.refetch()},t.prototype.componentDidUpdate=function(e){if(e.data.loading!==this.props.data.loading&&!this.props.data.loading){if(!this.channelDisplayName||!this.isViewersCountWithinRange||this.isAttemptingToHostSelf)return this.handleSendHostMsg();t={sourceChannelID:this.props.data.sourceChannel.id,targetChannelID:this.props.data.targetChannel.id},b(v.SpadeEventType.RaidUpsellImpression,t),o.n.set(k,!0)}var t},t.prototype.render=function(){var e=this.props.data.loading,t=this.channelDisplayName;return e||!t||!this.isViewersCountWithinRange||this.isAttemptingToHostSelf?null:r.createElement(c.a,{className:"raid-upsell-prompt",padding:1,margin:{x:2}},r.createElement(c.a,{display:d.d.Flex,justifyContent:d.h.Between},r.createElement(c.a,{display:d.d.Flex},r.createElement(c.a,{className:"raid-upsell-prompt__notification",margin:{top:.5}},r.createElement(h.a,{asset:h.b.NotificationInfo})),r.createElement(c.a,{margin:{x:1}},r.createElement(l.a,{type:l.e.H6,bold:!0},Object(o.d)("How about raiding {channelDisplayName}?",{channelDisplayName:t},"RaidUpsellPrompt")),r.createElement(l.a,{type:l.e.P,color:u.c.Alt2},Object(o.d)("Now you can raid whenever you want instead of waiting 30 seconds.","RaidUpsellPrompt")))),r.createElement(m.a,{color:u.c.OverlayAlt},r.createElement(p.a,a.__assign({},y,{icon:h.b.Close,size:p.b.Small,ariaLabel:Object(o.d)("Dismiss","RaidUpsellPrompt"),onClick:this.handleDismissUpsell})))),r.createElement(E,{onSendHostMsg:this.handleSendHostMsgFromUpsell,onSendRaidMsg:this.handleSendRaidMsg}))},Object.defineProperty(t.prototype,"channelDisplayName",{get:function(){var e=this.props.data.targetChannel;return e&&e.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isViewersCountWithinRange",{get:function(){var e=this.props.data.sourceChannel,t=e&&e.stream&&e.stream.viewersCount;return t&&t>=3&&t<1e5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAttemptingToHostSelf",{get:function(){return this.props.targetChannelLogin===this.props.sourceChannelLogin},enumerable:!0,configurable:!0}),t}(r.Component),E=function(e){return r.createElement(c.a,{display:d.d.Flex,justifyContent:d.h.End,margin:{top:1}},r.createElement(c.a,{margin:{right:1}},r.createElement(g.a,{type:g.d.Hollow,size:g.b.Small,onClick:e.onSendHostMsg},r.createElement(c.a,{padding:{x:2}},Object(o.d)("Host","RaidUpsellPrompt")))),r.createElement(c.a,null,r.createElement(g.a,{size:g.b.Small,onClick:e.onSendRaidMsg},r.createElement(c.a,{padding:{x:2}},Object(o.d)("Raid","RaidUpsellPrompt")))))},N=Object(s.a)(f,{options:function(e){return{variables:{targetChannelLogin:e.targetChannelLogin,sourceChannelLogin:e.sourceChannelLogin}}}})(S);n.d(t,!1,function(){return 3}),n.d(t,!1,function(){return 1e5}),n.d(t,!1,function(){return y}),n.d(t,!1,function(){return S}),n.d(t,!1,function(){return E}),n.d(t,"a",function(){return N}),n.d(t,"b",function(){return C})},PrJw:function(e,t,n){"use strict";var i=n("vGFN");n.d(t,"a",function(){return i.b}),n.d(t,"b",function(){return i.c}),n.d(t,"c",function(){return i.d}),n.d(t,"d",function(){return i.e}),n.d(t,"e",function(){return i.f}),n.d(t,"f",function(){return i.g}),n.d(t,"g",function(){return i.h}),n.d(t,"h",function(){return i.i}),n.d(t,"i",function(){return i.j}),n.d(t,"j",function(){return i.k}),n.d(t,"k",function(){return i.m}),n.d(t,"l",function(){return i.p}),n.d(t,"m",function(){return i.q})},PtXu:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/7QA"),s=n("gcd7"),l=n("AKV8"),c=n("yzwe"),d=n("3HtZ"),u=n("QVaV"),m=n("vSeP"),p=n("Ff8q"),h=n("sUnt"),g=n("hnjF"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modUser=function(e){var n=e.trim().split(/\s+/),i=t.userLogin(n[0]);return 1===n.length&&i&&0!==i.length?{deferred:t.props.modUserMutation(i).then(function(e){if(e.modUser.error)switch(e.modUser.error.code){case l.a.Forbidden:return{notice:b()};case l.a.UserAlreadyModded:return{notice:Object(o.d)("{login} is already a moderator of this channel.",{login:i},"ModCommandHandler")};case l.a.UserBanned:return{notice:Object(o.d)("{login} is banned in this channel. You must unban this user before granting mod status.",{login:i},"ModCommandHandler")};case l.a.UserNotFound:return{notice:v(i)};default:return{notice:k()}}return{notice:Object(o.d)("You have added {login} as a moderator of this channel.",{login:i},"ModCommandHandler")}}).catch(function(){return{notice:k()}})}:{deferred:Promise.resolve({notice:Object(o.d)('Usage: "/mod [login]" - Grant mod status to a user. Use "mods" to list the moderators of this channel.',"ModCommandHandler")})}},t.mods=function(e){return{deferred:o.q.apollo.client.query({query:d,fetchPolicy:"network-only",variables:{login:t.props.channelLogin}}).then(function(e){if(!e.data.user||!e.data.user.mods)return{notice:C()};var t=e.data.user.mods.edges.filter(function(e){return e.node.login});if(0===t.length)return{notice:Object(o.d)("There are no moderators of this channel.","ModCommandHandler")};var n=t.map(function(e){return e.node.login}).join(", ");return{notice:Object(o.d)("The moderators of this channel are: {mods}.",{mods:n},"ModCommandHandler")}}).catch(function(){return{notice:C()}})}},t.unmodUser=function(e){var n=e.trim().split(/\s+/),i=t.userLogin(n[0]);return 1===n.length&&i&&0!==i.length?{deferred:t.props.unmodUserMutation(i).then(function(e){if(e.unmodUser.error)switch(e.unmodUser.error.code){case c.a.Forbidden:return{notice:b()};case c.a.UserNotFound:return{notice:v(i)};case c.a.UserNotMod:return{notice:Object(o.d)("{login} is currently not a moderator of this channel.",{login:i},"ModCommandHandler")};default:return{notice:y()}}return{notice:Object(o.d)("You have removed {login} as a moderator of this channel.",{login:i},"ModCommandHandler")}}).catch(function(){return{notice:y()}})}:{deferred:Promise.resolve({notice:Object(o.d)('Usage: "/unmod [login]" - Revoke mod status from a user. Use "mods" to list the moderators of this channel.',"ModCommandHandler")})}},t.userLogin=function(e){return e=Object(p.b)(e),Object(u.b)(e)?e:t.props.activeChattersAPI?t.props.activeChattersAPI.getActiveChatterLoginFromDisplayName(e)||e:t.props.displayNameToLogin&&t.props.displayNameToLogin(e)||e},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(h.a,{display:g.d.Hide},a.createElement(s.a,{command:"mod",handler:this.modUser,channelLogin:this.props.channelLogin}),a.createElement(s.a,{command:"mods",handler:this.mods,channelLogin:this.props.channelLogin}),a.createElement(s.a,{command:"unmod",handler:this.unmodUser,channelLogin:this.props.channelLogin}))},t}(a.Component);function v(e){return Object(o.d)("Invalid username: {login}",{login:e},"ModCommandHandler")}function b(){return Object(o.d)("You don't have permission to perform that action.","ModCommandHandler")}function k(){return Object(o.d)("Unable to add moderator.","ModCommandHandler")}function C(){return Object(o.d)("There was a problem fetching the list of mods.","ModCommandHandler")}function y(){return Object(o.d)("Unable to remove moderator.","ModCommandHandler")}var S=function(e){return{channelID:e.channelID}},E=Object(r.compose)(m.a,Object(c.b)(S),Object(l.b)(S))(f);n.d(t,"a",function(){return E})},"Pub/":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("HzXE");function a(e,t,n){try{return e.readQuery({query:i,variables:{channelID:t,targetUserID:n}})}catch(e){}}},Q34B:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.LIVE="LIVE",e.VIDEO="VIDEO",e.COLLECTION="COLLECTION",e.CLIP="CLIP",e.NONE="NONE"}(i||(i={}))},Q94S:function(e,t,n){"use strict";var i=n("mrSG"),a=(n("cr+I"),n("+GjP")),r=n("vRsq"),o=n("2xye"),s=n("efpB"),l=n("Hz5m"),c=n("DMoW");function d(e){return e&&e.hosting&&e.hosting.stream&&e.hosting.stream.game&&e.hosting.stream.game.name}function u(e){return e&&e.hosting&&e.hosting.broadcastSettings&&e.hosting.broadcastSettings.language}function m(e){return e&&e.stream&&e.stream.game&&e.stream.game.name}function p(e){return e&&e.lastBroadcast&&e.lastBroadcast.game&&e.lastBroadcast.game.name}function h(e){return e&&e.broadcastSettings&&e.broadcastSettings.language}function g(e,t,n,a){var r=e&&e.login;return i.__assign({channel:r,login:r,channel_id:e&&e.id||null,game:m(e)||y(t)||N(n)||p(e),hosted_game:d(e),is_following:!(!e||!e.self||null===e.self.follower||null===e.self.follower.node),is_live:!!(e&&e.stream&&e.stream.id&&e.stream.id.length>0),language:u(e)||h(e)||C(t)||E(n)},function(e,t){var n=e&&e.id,i=t&&t.id;if(!n&&!i)return null;var a=null,r=null;e?a=e.broadcastType:i&&(r=o.SpadeVideoBroadcastType.Clip);r||(r=a?function(e){switch(e){case c.q.ARCHIVE:return o.SpadeVideoBroadcastType.Archive;case c.q.HIGHLIGHT:return o.SpadeVideoBroadcastType.Highlight;case c.q.UPLOAD:return o.SpadeVideoBroadcastType.Upload;case c.q.PAST_PREMIERE:return o.SpadeVideoBroadcastType.PastPremiere;case c.q.PREMIERE_UPLOAD:return o.SpadeVideoBroadcastType.PremiereUpload;default:return e}}(a):null);return{vod_type:r,vod_id:n||i}}(t,a),Object(s.b)())}function f(e){return e.match.params.contentType===r.g.Clip&&e.match.params.contentID||null}function v(e){return e.match.params.videoID||e.match.params.contentType===r.g.Video&&e.match.params.contentID||null}function b(e){return e.match.params.contentType!==l.a.Video&&e.match.params.contentType!==l.a.Clip&&e.match.params.contentType!==l.a.Collection&&e.match.params.page!==l.c.Videos?null:Object(a.a)(e.location.search,"filter")}function k(e){return e.match.params.collectionID?e.match.params.collectionID:e.match.params.contentType===r.g.Collection&&e.match.params.contentID?e.match.params.contentID:Object(a.a)(e.location.search,"collection")||void 0}function C(e){return e&&e.language}function y(e){return e&&e.game&&e.game.name}function S(e){return e&&e.items&&e.items.edges&&e.items.edges[0]&&e.items.edges[0].node&&e.items.edges[0].node.id?e.items.edges[0].node:null}function E(e){var t=S(e);return t&&t.language}function N(e){var t=S(e);return t&&t.game&&t.game.name}n.d(t,"d",function(){return g}),n.d(t,"a",function(){return f}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"b",function(){return k}),n.d(t,"c",function(){return S})},QHJn:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pendingSubscription"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PendingSubscription"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:80}};n.loc.source={body:"fragment pendingSubscription on PendingSubscription {\nprice\nstartsAt\ntier\ntype\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},QYdK:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsBadge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserSelfBitsBadge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}],loc:{start:0,end:174}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nfragment bitsBadge on UserSelfBitsBadge {\nid\ntotalBits\nnextBits\nprogress\ncurrent {\n...badge\n}\nnext {\n...badge\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("IKE4").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},QZCf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SplitLight_CreateHighlight"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateMultiVideoHighlightInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createMultiVideoHighlight"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"highlight"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:142}};n.loc.source={body:"mutation SplitLight_CreateHighlight($input: CreateMultiVideoHighlightInput!) {\ncreateMultiVideoHighlight(input: $input) {\nhighlight {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},QdeI:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("q1tI"),a=n("L5dg"),r=n("uOxs"),o=function(){return i.createElement(i.Fragment,null,i.createElement(r.a,{gutterSize:r.c.Small,childWidth:r.b.Large,placeholderItems:20},i.createElement(a.a,null)))}},Qdho:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RoomSelector"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channelRooms"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topic"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPreviewable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"minimumAllowedRole"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isUnread"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMentionCount"},arguments:[],directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]},{kind:"Field",name:{kind:"Name",value:"hosting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"banStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPermanent"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isChannelMember"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:395}};i.loc.source={body:'#import "twilight/features/chat/models/cheer-fragment.gql"\nquery RoomSelector ($login: String!) {\nchannel: user(login: $login) {\nid\ndisplayName\nchannelRooms {\nname\nid\ntopic\nisPreviewable\nminimumAllowedRole\nself {\nisArchived\nisMuted\nisUnread\nunreadMentionCount\n}\n}\n...cheer\nhosting {\nid\n}\nself {\nbanStatus {\nisPermanent\n}\nisChannelMember\nisModerator\nsubscriptionBenefit {\nid\n}\n}\nstream {\nid\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("F9eG").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},QfRJ:function(e,t,n){},"Qii+":function(e,t,n){"use strict";var i,a,r=n("/MKj"),o=n("kRBY"),s=n("mrSG"),l=n("q1tI"),c=n("fvjX"),d=n("x7UT"),u=n("0Log"),m=n("/aPz"),p=n("f00E"),h=function(){var e=document.querySelector('[data-a-target="bits-button"]');e&&e.click()},g=n("Tvwe"),f=n("/7QA"),v=n("2xye");function b(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return f.p.track(v.SpadeEventType.MegaCheerChatNotificationImpression,{time:Date.now(),notification_type:e.notification_type,user_id:e.user_id,initiator_user_id:e.initiator_user_id,device_id:f.q.session.deviceID,platform:f.q.session.clientApp,channel:e.channel,channel_id:e.channel_id}),[2]})})}function k(e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return f.p.track(v.SpadeEventType.MegaCheerChatNotificationAction,{time:Date.now(),notification_type:e.notification_type,action:e.action,user_id:e.user_id,initiator_user_id:e.initiator_user_id,device_id:f.q.session.deviceID,platform:f.q.session.clientApp,channel:e.channel,channel_id:e.channel_id}),[2]})})}!function(e){e.CheerAgain="cheer_again",e.Thank="thank",e.Share="share"}(i||(i={})),function(e){e.Click="click",e.Dismiss="dismiss"}(a||(a={}));var C,y=n("sUnt"),S=n("X2PJ"),E=n("hnjF"),N=n("Z2sP"),w=n("dEDE"),_=n("+80q"),D=n("7d/q"),O=n("7uM4"),I=n("Ws8v"),T=function(e){return l.createElement(I.a,{background:S.a.AccentAlt2,color:S.c.Overlay,className:"mega-cheer-reward-notification"},l.createElement(y.a,{display:E.d.Flex,justifyContent:E.h.Between,flexWrap:E.f.NoWrap},l.createElement(y.a,{padding:{left:1,top:.5,bottom:.5}},e.children),l.createElement(y.a,{display:E.d.Flex,alignItems:E.b.Center},l.createElement(y.a,{margin:{right:.5}},l.createElement(w.a,{onClick:e.secondaryAction},l.createElement(_.a,{fontSize:S.d.Size7},e.secondaryActionText))),l.createElement(D.a,{onClick:e.onClose,ariaLabel:Object(f.d)("Close","MegaCheerRewardNotificationCard"),size:D.b.Default,overlay:!0,icon:O.b.Close}))),l.createElement(N.a,{animationDirection:N.b.Down,size:N.c.Small,animationDuration:10,onAnimationEnd:e.onProgressBarEnd}))},M=n("uG/k");!function(e){e.Emotes="emotes"}(C||(C={}));var L,F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCardClose=function(){t.props.closeCard&&(t.props.closeCard(),k({notification_type:i.CheerAgain,action:a.Dismiss,user_id:t.props.userID,initiator_user_id:t.props.rewardEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID}))},t.onCheerClick=function(){t.props.cheerClick(),k({notification_type:i.CheerAgain,action:a.Click,user_id:t.props.userID,initiator_user_id:t.props.rewardEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID})},t}return s.__extends(t,e),t.prototype.render=function(){var e,t=this.props.rewardEvent.data.contents,n=1===t.length,a=Object(f.d)("Your MegaCheer unlocked emotes!","MegaGifterNotificationCard");n&&(a=Object(f.d)("Your MegaCheer unlocked an emote!","MegaGifterNotificationCard")),b({notification_type:i.CheerAgain,user_id:this.props.userID,initiator_user_id:this.props.rewardEvent.data.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin});var r=t.map(function(e){var t=e.imageURL||"";return l.createElement(E.g,{key:"MegaGifterNotificationCard-"+e.id,padding:.5},l.createElement(M.a,{src:t,srcSet:{"112w":t},sizes:[{size:"20px"}],alt:e.text,"data-test-selector":C.Emotes}))});return e=l.createElement(y.a,null,l.createElement(_.a,null,a),l.createElement(I.a,{display:E.d.Flex,overflow:E.i.Hidden},r)),l.createElement(T,s.__assign({},this.props,{onClose:this.onCardClose,className:"mega-gifter-notification-card",secondaryActionText:Object(f.d)("Cheer Again","MegaGifterNotificationCard"),secondaryAction:this.onCheerClick}),e)},t}(l.Component),x=(n("GPTu"),n("8Ad5")),j=n("3aAs"),A=255,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={formInputValue:t.props.message,sharing:!1,isMessageTooLong:!1},t.hasUnmounted=!1,t.handleThankClick=function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(e){return this.setState({sharing:!0}),this.props.onThank(this.state.formInputValue),function(e){s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return f.p.track(v.SpadeEventType.MegaCheerChatNotificationShare,{time:Date.now(),body:e.body,user_id:e.user_id,initiator_user_id:e.initiator_user_id,device_id:f.q.session.deviceID,platform:f.q.session.clientApp,channel:e.channel,channel_id:e.channel_id}),[2]})})}({body:this.state.formInputValue,user_id:this.props.userID,initiator_user_id:this.props.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin}),this.hasUnmounted||this.setState({sharing:!1}),[2]})})},t.onInputChange=function(e){var n=e.currentTarget.value.length>A;t.setState({formInputValue:e.currentTarget.value,isMessageTooLong:n})},t.onKeyDown=function(e){switch(e.charCode||e.keyCode){case x.a.Enter:return void t.handleThankClick();default:return}},t}return s.__extends(t,e),t.prototype.componentDidMount=function(){this.hasUnmounted=!1},t.prototype.componentWillUnmount=function(){this.hasUnmounted=!0},t.prototype.render=function(){var e=this.state.isMessageTooLong?"-"+(this.state.formInputValue.length-A):Object(f.d)("Thank","ThankInput"),t=Object(f.d)("Close","ThankInput"),n=this.state.sharing?w.c.Loading:w.c.Default;return b({notification_type:i.Share,user_id:this.props.userID,initiator_user_id:this.props.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin}),l.createElement(y.a,{className:"thank-input",padding:1,attachTop:!0,attachLeft:!0,attachRight:!0,position:E.j.Absolute},l.createElement(I.a,{className:"thank-input__container",position:E.j.Relative,border:!0,background:S.a.Base,padding:1},l.createElement(y.a,{position:E.j.Absolute,attachTop:!0,attachRight:!0},l.createElement(D.a,{ariaLabel:t,onClick:this.props.onClose,type:D.c.Secondary,icon:O.b.Close})),l.createElement(y.a,{textAlign:E.k.Center,padding:{top:1,bottom:2}},this.props.children),l.createElement(y.a,{display:E.d.Flex,flexWrap:E.f.NoWrap},l.createElement(y.a,{fullWidth:!0},l.createElement(j.a,{autoFocus:!0,type:j.c.Text,value:this.state.formInputValue,onChange:this.onInputChange,onKeyDown:this.onKeyDown})),l.createElement(w.a,{disabled:this.state.isMessageTooLong,onClick:this.handleThankClick,state:n},e))))},t}(l.Component);(L||(L={})).RegularEmote="regular-emote";var R,U,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showMessageInput:!1},t.toggleContentShown=function(){t.setState(function(e){return{showMessageInput:!e.showMessageInput}}),k({notification_type:i.Thank,action:a.Click,user_id:t.props.userID,initiator_user_id:t.props.giftEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID})},t.onCardClose=function(){t.props.closeCard&&(t.props.closeCard(),k({notification_type:i.Thank,action:a.Dismiss,user_id:t.props.userID,initiator_user_id:t.props.giftEvent.data.benefactor,channel:t.props.channelID,channel_id:t.props.channelID}))},t.shareThanks=function(e){t.props.onSendMessage(e)&&t.props.onMessageSent()},t}return s.__extends(t,e),t.prototype.render=function(){var e=this.props.giftEvent.data.contents[0],t=e.imageURL||"",n=Object(f.d)("Thanks for the {emote} @{user}",{emote:e.text,user:this.props.giftEvent.data.benefactor},"MegaRecipientNotificationCard");if(b({notification_type:i.Thank,user_id:this.props.userID,initiator_user_id:this.props.giftEvent.data.benefactor,channel:this.props.channelID,channel_id:this.props.channelLogin}),this.state.showMessageInput)return l.createElement(y.a,null,l.createElement(P,{onThank:this.shareThanks,onClose:this.props.onMessageSent,message:n,benefactor:this.props.giftEvent.data.benefactor,channelID:this.props.channelID,channelLogin:this.props.channelLogin,userID:this.props.userID},l.createElement(M.a,{className:"mega-recipient-notification-card__emote",src:t,srcSet:{"112w":t},sizes:[{size:"20px"}],alt:e.text,"data-test-selector":L.RegularEmote}),l.createElement(_.a,null,Object(f.d)("Add a message to thank {user} for your gift!",{user:l.createElement("strong",null,this.props.giftEvent.data.benefactor)},"MegaRecipientNotificationCard"))));var a=l.createElement(y.a,{textAlign:E.k.Left},l.createElement(_.a,{fontSize:S.d.Size7},Object(f.d)("You got an emote thanks to {benefactor}'s MegaCheer!",{benefactor:l.createElement(_.a,{type:_.e.Span,bold:!0},this.props.giftEvent.data.benefactor)},"MegaRecipientNotificationCard")),l.createElement(I.a,{margin:{y:.5},display:E.d.Flex,alignItems:E.b.Center},l.createElement(M.a,{className:"mega-recipient-notification-card__emote",src:t,srcSet:{"112w":t},sizes:[{size:"20px"}],alt:e.text,"data-test-selector":L.RegularEmote}),l.createElement(_.a,{fontSize:S.d.Size7,className:"mega-recipient-notification-card__emote-text"},e.text)));return l.createElement(T,s.__assign({},this.props,{onClose:this.onCardClose,className:"mega-recipient-notification-card",secondaryActionText:Object(f.d)("Thank","MegaRecipientNotificationCard"),secondaryAction:this.toggleContentShown}),a)},t}(l.Component);(U||(U={})).Container="mega-cheer-reward-notification-container-selector";var V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cards:[]},t.onCardClose=function(){t.popCard()},t.onCheerClick=function(){t.popCard(),h()},t}return s.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this,n=[],i=e.pubsub.messages.userNotificationEvent;if(i&&i!==this.props.pubsub.messages.userNotificationEvent){if(i.type===u.PubsubMessageType.UserCampaignMegaCheerRewardEvent&&i.data.channelID&&i.data.channelID===this.props.channelID&&n.push(l.createElement(F,{rewardEvent:i,cheerClick:this.onCheerClick,channelID:this.props.channelID,channelLogin:this.props.channelLogin,userID:this.props.user&&this.props.user.id||""})),i.type===u.PubsubMessageType.UserGiftEvent){var a=i;a.data.channelID&&a.data.channelID===this.props.channelID&&n.push(l.createElement(B,{giftEvent:a,onSendMessage:this.props.onSendMessage,onMessageSent:this.onCardClose,channelID:this.props.channelID,channelLogin:this.props.channelLogin,userID:this.props.user&&this.props.user.id||""}))}n=n.map(function(e){return l.cloneElement(e,{key:Object(p.b)(),closeCard:t.onCardClose,onProgressBarEnd:t.onCardClose})}),this.setState(function(e){return{cards:e.cards.concat(n)}})}},t}(g.a),H=Object(c.compose)(Object(d.a)([{topic:function(e){return Object(m.I)(e.user&&e.user.id||"")},mapMessageTypesToProps:(R={},R[u.PubsubMessageType.UserGiftEvent]="userNotificationEvent",R[u.PubsubMessageType.UserCampaignMegaCheerRewardEvent]="userNotificationEvent",R),skip:function(e){return!e.user||!e.user.id}}]))(V);var G=Object(r.connect)(function(e){return{user:Object(o.e)(e)}})(H);n.d(t,"a",function(){return G})},Qime:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsPinnedCheerV2_Leaderboards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"leaderboard"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"bitsLeaderboard"},directives:[]},{kind:"Field",name:{kind:"Name",value:"secondsRemaining"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"leaderboard"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timePeriodType"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsLeaderboardItem"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entryKey"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:345}};i.loc.source={body:'#import "twilight/features/bits/models/bits-leaderboard-fragment.gql"\nquery BitsPinnedCheerV2_Leaderboards($channelID: ID!) {\nuser(id: $channelID) {\nid\ncheer {\nid\nleaderboard (first: 10) {\nid\n...bitsLeaderboard\nsecondsRemaining\n}\nsettings {\nleaderboard {\nisEnabled\ntimePeriodType\n}\n}\n}\nself {\nbitsLeaderboardItem {\nid\nrank\nscore\nentryKey\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("jrTF").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},QjI3:function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("1/iK"),c=n("aCAx"),d=n("D7An"),u=n("kz7j"),m=n("kRBY"),p=n("w1PT"),h=n("8EUQ"),g=n("GnwI"),f=n("d0xR"),v=n("oJmH"),b=n("2+sX"),k=n("u5aL"),C=n("ZS2+"),y=n("eJ65"),S=n("yR8l"),E=n("x7UT"),N=n("3Bft"),w=n("tIid"),_=n("ht6z"),D=n("/aPz"),O=n("KriR"),I=n("4rCz"),T=n("0WFu"),M="All-Access Pass",L="Continue Sub",F="Continue Sub - Ends Today",x=function(e){return"Continue Sub - "+e+" Days Remaining"},j="Get the All-Access Pass",A="Gift A Sub",P="Resubscribe",R="Subscribe",U="Subscribed",B="Subscribed to <hosted channel>",V="Subscribe to <hosted channel>";var H,G=n("br9A"),q=n("sUnt"),W=n("7uM4"),z=n("dEDE"),Q=n("ygYM"),Y=n("z+dA");!function(e){e.SubButton="subscribe-button__dropdown",e.BalloonLayerButton="subscribe-button__balloon-layer-btn",e.DefaultButton="subscribe-button__default-btn",e.SubscribeBalloon="subscribe-button__subscribe-balloon"}(H||(H={}));var K=C.a.wrap(function(){return Promise.all([n.e(0),n.e(784)]).then(n.bind(null,"f+qK"))},"SubscribeBalloon"),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalLevel="top_page",t.getBalloonWrapperContent=function(){return t.balloonWrapperContent},t.handleSubMenuAction=function(e){new Set([G.a.ClickCheckout,G.a.BuyGiftSub,G.a.BuyMysteryGift,G.a.BuyCustomMysteryGift,G.a.BuyGiftToPaidUpgrade,G.a.BuyPaidUpgrade,G.a.BuyContinueSub,G.a.BuyPrimeToPaid]).has(e.action)&&t.checkAndDisplaySubscriptionCheckout();var n=t.props.data,i=n.user,a=null,r=null;i&&(a=i.self),a&&a.cumulativeTenure&&(r=a.cumulativeTenure.months);var o=!(!a||!a.subscriptionBenefit),s=n.requestInfo&&Object(_.a)(n.requestInfo.countryCode);Object(G.b)({action:e.action||"",buttonCTA:t.buttonTrackingCTA,channelLogin:t.props.channelLogin||"",channelID:i&&i.id||"",checkoutButtonTier:e.checkoutButtonTier,cumulativeTenureMonths:r,hasSubCredit:a&&a.canPrimeSubscribe,hostChannelID:t.props.hostChannelID,hostChannelLogin:t.props.hostChannelLogin,isAnonymous:e.isAnonymous,isMenuOpen:e.action!==G.a.OpenSubMenu,isSingleMonth:e.isSingleMonth,mysteryGiftCount:e.mysteryGiftCount,sub_location:t.props.subLocation,modal:!o,modalLevel:o?"":t.modalLevel.slice(),showPrimeContent:s,giftRecipient:e.giftRecipient||null}),!e.modalLevel||e.action!==G.a.ClickMoreSubOptions&&e.action!==G.a.ClickBack||(t.modalLevel=e.modalLevel)},t.renderBalloonContentForBalloonLayer=function(){return a.createElement(k.a,{onClickOut:t.handleBalloonClickOut},a.createElement(q.a,{"data-a-target":"sub-balloon",refDelegate:t.setBalloonContentRefDelegate},t.balloonWrapperContent))},t.handleButtonClick=function(){t.balloonContentRef||(t.props.useModal&&t.props.channelLogin?(t.props.showSubscriptionModal({channelLogin:t.props.channelLogin,onClose:t.handleModalClose,subLocation:"channel_page_modal"}),t.handleSubMenuAction({action:G.a.OpenSubMenu})):(t.props.balloonLayer.show({direction:t.getBalloonDirection(),ref:t.containerRef,content:t.renderBalloonContentForBalloonLayer(),contentHeight:0,closeOnScroll:!0}),t.handleSubMenuAction({action:G.a.OpenSubMenu})))},t.handleBalloonClickOut=function(){t.handleSubMenuAction({action:G.a.CloseSubMenu}),t.props.balloonLayer.hide({force:!0})},t.handleModalClose=function(){t.handleSubMenuAction({action:G.a.CloseSubMenu})},t.setBalloonWrapperContent=function(e){t.balloonWrapperContent=e},t.handleMenuToggle=function(e){t.handleSubMenuAction({action:e?G.a.CloseSubMenu:G.a.OpenSubMenu})},t.getBalloonDirection=function(){var e=t.props.balloonDirection||Q.b.BottomRight;return t.props.hostChannelID&&(e=Q.b.TopLeft),e},t.setBalloonContentRefDelegate=function(e){t.balloonContentRef=e},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.trackLatencyIfComponentFinished(this.props),this.checkAndDisplaySubscriptionCheckout()},t.prototype.componentDidUpdate=function(e){this.props.channelLogin&&!this.isUserDataReady(this.props)||!this.props.updateContainerWidth||this.props.updateContainerWidth(),this.trackLatencyIfComponentFinished(this.props),!this.isUserDataReady(e)&&this.isUserDataReady(this.props)&&this.checkAndDisplaySubscriptionCheckout()},t.prototype.componentWillReceiveProps=function(e){this.isUserDataReady(e)&&e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&this.props.data.refetch()},t.prototype.componentWillUnmount=function(){h.a.clearSubscriptionCheckoutKeys()},t.prototype.render=function(){var e=this.props,t=e.data,n=e.sessionUser;if(!t||t.loading||t.error)return null;var i=t.requestInfo,r=t.user;if(!r)return null;var o=r.self,s=r.subscriptionProducts;if(!s)return null;var l=s.filter(function(e){return e});if(0===l.length)return null;var c=1===l.length;l.some(function(e){return!e.emoteSetID})&&(c=!0);var u=Object(w.a)(r.id||"",this.props.sessionUser),m=null,p=!1,h=!1,g=!1,f=!1,v=!1,b=!1,k=null,C=!1;if(o){if(o.cumulativeTenure)g=o.cumulativeTenure.months>0;if(o.subscriptionBenefit){var S=o.subscriptionBenefit;m=S.endsAt,p=S.isDNRd,h=!!S.pendingSubscription,f=S.gift&&S.gift.isGift||!1,v=!0,b=S.purchasedWithPrime,k=S.purchasedWithPrime?N.a.Prime:S.tier,this.modalLevel=""}}n&&n.roles&&(C=n.roles.isStaff);var E=function(e){var t=I.r.experiments.getAndTrackAssignment(d.b.SubsReanimator),n=Object(T.d)(T.a.Prime2Paid),i=void 0;if(e.purchasedWithPrime&&n&&(i=I.r.experiments.getAndTrackAssignment(d.b.PrimeToPaid)),e.isSubscribed){if(e.hasInsiderPass)return{text:Object(I.d)("2019 All-Access Pass","SubscribeButton"),cta:M};if(e.isNonStandardSub)return{text:Object(I.d)("Subscribed","SubscribeButton"),cta:U};if(e.hostedDisplayName)return{text:Object(I.d)("Subscribed to {username}",{username:e.hostedDisplayName},"SubscribeButton"),cta:B};if(("variant_a"===i||"control"!==t&&e.benefitIsDNRd||e.isGift)&&e.benefitEndsAt&&!e.hasPendingSub){var a=Object(T.b)(e.benefitEndsAt);if(a<=15&&a>7)return{text:Object(I.d)("Continue Sub","SubscribeButton"),cta:L};if(a<=7&&0!==a)return{text:Object(I.d)("{daysRemaining, plural, one {Continue Sub - {daysRemaining} Day Remaining} other {Continue Sub - {daysRemaining} Days Remaining}}",{daysRemaining:a},"SubscribeButton"),cta:x(a)};if(0===a)return{text:Object(I.d)("Continue Sub - Ends Today","SubscribeButton"),cta:F}}return{text:Object(I.d)("Gift a Sub","SubscribeButton"),cta:A}}return e.hasInsiderPass?{text:Object(I.d)("Get the 2019 All-Access Pass","SubscribeButton"),cta:j}:e.hostedDisplayName?{text:Object(I.d)("Subscribe to {username}",{username:e.hostedDisplayName},"SubscribeButton"),cta:V}:e.hasTenure?{text:Object(I.d)("Resubscribe","SubscribeButton"),cta:P}:{text:Object(I.d)("Subscribe","SubscribeButton"),cta:R}}({benefitEndsAt:m,benefitIsDNRd:p,hasInsiderPass:u,hasPendingSub:h,hasTenure:g,hostedDisplayName:this.props.hostChannelID?r.displayName||"":void 0,isGift:f,isNonStandardSub:c,isSubscribed:v,purchasedWithPrime:b,subscriptionProducts:l});this.buttonTrackingCTA=E.cta;var D=E.text;if(v&&c&&!u)return a.createElement(z.a,{disabled:!0,ariaLabel:D,icon:W.b.Star},D);var O=a.createElement(z.a,{ariaLabel:D,"data-a-target":v?"subscribed-button":"subscribe-button","data-test-selector":H.SubButton,dropdown:!this.props.hideDropdownArrow,fullWidth:!0,icon:this.getButtonIcon(v,k),onClick:this.handleButtonClick,type:this.getButtonType(v)},D);if(this.props.useModal)return O;var G=l[0];return this.setBalloonWrapperContent(a.createElement(K,{authToken:this.props.authToken,channelLogin:this.props.channelLogin||"","data-test-selector":H.SubscribeBalloon,handleSubMenuAction:this.handleSubMenuAction,inPrimeRegion:!!i&&Object(_.a)(i.countryCode),isEsportChannel:u,isNonStandardSub:c,isStaff:C,isSubscribed:v,productId:G?G.id:"",subbedTier:k||N.a.Prime,userHasPrime:!1})),a.createElement(q.a,null,a.createElement(y.a,{"data-test-selector":H.DefaultButton,onToggle:this.handleMenuToggle},O,a.createElement(Q.a,{"data-a-target":"sub-balloon",direction:this.getBalloonDirection(),size:Q.c.Large},this.balloonWrapperContent)))},t.prototype.getButtonType=function(e){z.d.Default;return e&&void 0!==this.props.subscribedButtonType?this.props.subscribedButtonType:e?z.d.Success:this.props.unsubscribedButtonType||z.d.Default},t.prototype.getButtonIcon=function(e,t){var n=void 0;return e?n=t===N.a.Prime?W.b.Crown:W.b.Star:this.props.forceIcon&&(n=W.b.StarHollow),n},t.prototype.isUserDataReady=function(e){return e.data&&e.data.user&&!e.data.loading&&!e.data.error},t.prototype.trackLatencyIfComponentFinished=function(e){e.data&&!e.data.loading&&(e.reportInteractive&&e.reportInteractive(),e.reportCustomLatency&&e.reportCustomLatency())},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=s.o.get(h.a.SUB_CHECKOUT__PRODUCT_KEY,"");if(e){var t=this.props.data.user;if(t&&t.subscriptionProducts)t.subscriptionProducts.filter(function(e){return e}).map(function(e){return e.name}).includes(e)||this.props.extraSubscriptionProducts&&this.props.extraSubscriptionProducts.includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({isAnonymous:s.o.get(h.a.SUB_CHECKOUT__GIFTING_ANONYMOUSLY,!1),isOneTimePurchase:s.o.get(h.a.SUB_CHECKOUT__IS_ONE_TIME_PURCHASE,!1),mysteryGiftCount:Number(s.o.get(h.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,"")),productName:e,recipientLogin:s.o.get(h.a.SUB_CHECKOUT__RECIPIENT_KEY,""),trackingContext:{source:O.c.ChannelSubscribeButton}}):this.props.showLoginModal():h.a.clearSubscriptionCheckoutKeys()}},t}(a.Component),$=Object(v.compose)(Object(S.a)(Y,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(E.a)([{topic:function(e){return Object(D.K)(e.data.currentUser&&e.data.currentUser.id||"")},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!(e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser)}}]),Object(b.e)())(X),J=function(e){function t(t){var n=e.call(this,t)||this;return n.loadedLatencyEvent=n.props.latencyTracking.registerCustomEvent({benchmark:500,group:u.a.Subscriptions,label:u.c.Loaded,start:u.d.Registration,key:u.b.SubscriptionButtonLoaded}),n.reportCustomLatencyTracking=function(){n.props.latencyTracking.reportCustomEvent(n.loadedLatencyEvent)},n.reportInteractive=function(){n.props.latencyTracking.reportInteractive()},n.modalExperimentAssignment=s.q.experiments.getAndTrackAssignment(d.b.SubModalPretest)||"",n}return i.__extends(t,e),t.prototype.render=function(){var e,t;switch(this.modalExperimentAssignment){case"variant":t=!0,e=!0;break;case"variant_b":t=!0,e=!1;break;default:t=!1,e=!1}return a.createElement($,{authToken:this.props.authToken,balloonDirection:this.props.balloonDirection,channelLogin:this.props.channelLogin,extraSubscriptionProducts:this.props.extraSubscriptionProducts,forceIcon:this.props.forceIcon,hideDropdownArrow:t&&void 0!==e?e:this.props.hideDropdownArrow,hostChannelID:this.props.hostChannelID,hostChannelLogin:this.props.hostChannelLogin,reportCustomLatency:this.reportCustomLatencyTracking,reportInteractive:this.reportInteractive,sessionUser:this.props.sessionUser,showLoginModal:this.props.showLoginModal,showSubscriptionCheckout:this.props.showSubscriptionCheckout,showSubscriptionModal:this.props.showSubscriptionModal,subscribedButtonType:this.props.subscribedButtonType,unsubscribedButtonType:this.props.unsubscribedButtonType,updateContainerWidth:this.props.updateContainerWidth,useModal:t||this.props.useModal,subLocation:this.props.subLocation})},t=i.__decorate([Object(g.withLatencyTracking)("SubscribeButton")],t)}(a.Component);var Z=Object(r.connect)(function(e){return{authToken:Object(m.a)(e),sessionUser:Object(m.e)(e)}},function(e){return Object(o.bindActionCreators)({showLoginModal:h.a.showLoginModalWithCheckoutDispatch(l.a.ChannelSubscriptionButton),showSubscriptionModal:function(e){var t=i.__rest(e,[]);return Object(c.d)(f.SubscribeModal,t)},showSubscriptionCheckout:p.a},e)})(J);n.d(t,"SubscribeButtonContainer",function(){return J}),n.d(t,"SubscribeButton",function(){return Z}),n.d(t,"TestSelectors",function(){return H}),n.d(t,"SubscribeButtonPresentation",function(){return X}),n.d(t,"SubscribeButtonComponent",function(){return $})},Qnm5:function(e,t,n){"use strict";var i=n("q1tI"),a=n("/7QA"),r=n("hnjF"),o=n("Ws8v"),s=n("X2PJ"),l=n("+80q"),c=(n("EZlB"),function(){return i.createElement(o.a,{alignItems:r.b.Center,borderRadius:s.b.Small,className:"channel-status-textual-indicator",color:s.c.Overlay,fontSize:s.d.Size6},i.createElement(l.a,null,Object(a.d)("LIVE","ChannelStatusTextualIndicator")))}),d=c;n.d(t,!1,function(){return c}),n.d(t,"a",function(){return d})},R2Ti:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_AllowRejectedCheerMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AllowRejectedCheerInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowRejectedCheer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"mutation Chat_AllowRejectedCheerMessage($input: AllowRejectedCheerInput!) {\nallowRejectedCheer(input: $input) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},R4sh:function(e,t,n){"use strict";function i(e){var t=[e[0],e[1],e[2]].map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return.2126*t[0]+.7152*t[1]+.0722*t[2]}function a(e,t){var n=i(e)+.05,a=i(t)+.05;return n>a?n/a:a/n}n.d(t,"a",function(){return a})},RNNG:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"a",function(){return m});var i=n("mrSG"),a=n("DpwM"),r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=function(e){return i.__assign({commentCount:0,maxOffset:o,minOffset:r,parentComments:{},offsets:{},replies:{}},e)},l=function(e,t){var n=h(e);return t.forEach(function(e){var t,a=e.id,r=e.contentOffset,o=e.parentId;if(""===o){n.minOffset=Math.min(n.minOffset,r),n.maxOffset=Math.max(n.maxOffset,r),n.parentComments=i.__assign({},n.parentComments,((t={})[a]=e,t));var s=n.offsets[r];Array.isArray(s)?s.includes(a)||(n.offsets[r]=s.concat(a),n.commentCount++):(n.offsets[r]=[a],n.commentCount++)}else{var l=n.replies[o];if(Array.isArray(l)){var c=l.findIndex(function(t){return t.id===e.id});-1!==c?l[c]=e:(n.replies[o]=l.concat(e),n.commentCount++)}else n.replies[o]=[e],n.commentCount++}}),n},c=function(e,t){if(t in e.parentComments)return e.parentComments[t]},d=function(e,t){var n=h(e);return Object(a.h)(t)?v(n,t.parentId,t.id):f(n,t.id)},u=function(e,t){if(e.commentCount<t||p(e))return e;for(var n=e;n.commentCount>t&&!p(e);)n=b(n,n.minOffset);return n},m=function(e,t){var n=h(e);return Object.keys(e.parentComments).forEach(function(i){var a=e.parentComments[i];t(a)||(n=f(n,a.id))}),Object.keys(e.replies).forEach(function(i){e.replies[i].forEach(function(e){t(e)||(n=v(n,e.id,e.parentId))})}),n},p=function(e){return e.minOffset===e.maxOffset},h=function(e){return{commentCount:e.commentCount,maxOffset:e.maxOffset,minOffset:e.minOffset,offsets:g(e.offsets),parentComments:i.__assign({},e.parentComments),replies:i.__assign({},e.replies)}},g=function(e){return Object.keys(e).reduce(function(t,n){return t[Number(n)]=e[Number(n)].slice(),t},{})},f=function(e,t){if(!(t in e.parentComments))return e;var n=e.parentComments[t].contentOffset,i=e.offsets[n],a=[];if(i&&(a=i.filter(function(e){return e!==t})),e.offsets[n]=a,delete e.parentComments[t],e.commentCount--,t in e.replies){var r=e.replies[t].length;delete e.replies[t],e.commentCount-=r}return e},v=function(e,t,n){if(!(t in e.replies))return e;var i=e.replies[t].length,a=e.replies[t].filter(function(e){if(e.id!==n)return e});e.replies[t]=a,0===a.length&&delete e.replies[t];var r=i-a.length;return e.commentCount-=r,e},b=function(e,t){return t>=e.minOffset&&t<=e.maxOffset&&!p(e)?(t in e.offsets&&e.offsets[t].forEach(function(t){e=f(e,t)}),delete e.offsets[t],e.maxOffset===t?e.maxOffset--:e.minOffset===t&&e.minOffset++,e):e}},RTtf:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelVideo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scope"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"126"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"71"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]}]}}],loc:{start:0,end:291}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\nfragment channelVideo on Video {\nid\nbroadcastType\ntitle\ndescription\nlengthSeconds\npublishedAt\nviewCount\nscope\npreviewThumbnailURL(width: 126 height: 71)\ngame {\nid\nboxArtURL(width: 138 height: 190)\nname\n}\nowner {\n...channel\n}\nlanguage\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("BbLt").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},RXle:function(e,t,n){"use strict";var i=n("86FS");n.d(t,"VideoPreviewCard",function(){return i.a});n("0T/G");var a=n("0Rl0");n.d(t,"VideoPreviewCardPlaceholder",function(){return a.a})},RuiO:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_SubEvent_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withVideo"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withVideo"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:266}};n.loc.source={body:"query Core_Services_Spade_SubEvent_User($channelID: ID! $withVideo: Boolean! $videoID: ID) {\nuser(id: $channelID) {\nid\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\nvideo(id: $videoID) @include(if: $withVideo) {\nid\nbroadcastType\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},S4w9:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserEmotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withOwner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withOwner"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:188}};n.loc.source={body:"query UserEmotes ($withOwner: Boolean!) {\ncurrentUser {\nid\nemoteSets {\nid\nemotes {\nid\nsetID\ntoken\n}\nowner @include(if: $withOwner) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 28)\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},S58p:function(e,t,n){},"SHn+":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("Ws8v"),o=n("hnjF"),s=n("+80q"),l=n("X2PJ"),c=n("vCsY"),d=n("sUnt"),u=n("Jsra"),m=function(e){return a.createElement(d.a,{margin:{right:1},display:o.d.Flex,alignItems:o.b.Center},a.createElement(d.a,{margin:{right:.5}},a.createElement(r.a,{display:o.d.Flex,alignItems:o.b.Center},a.createElement(s.a,{fontSize:l.d.Size5,"data-test-selector":"labeled-text-label"},e.label))),a.createElement(s.a,{fontSize:l.d.Size5,ellipsis:!0},a.createElement(u.a,i.__assign({to:e.linkTo},Object(c.a)(e),{targetBlank:e.targetBlank,"data-test-selector":"labeled-link-title"}),e.title)))};n.d(t,"a",function(){return m})},SceP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsChatCard_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:151}};n.loc.source={body:"query ClipsChatCard_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nthumbnailURL\ntitle\nslug\nurl\ncurator {\nid\ndisplayName\n}\nbroadcaster {\nid\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},Sfdh:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("4rCz");function a(){return{messageCreatedTooQuickError:Object(i.d)("Your message was not sent because you are sending messages too quickly.","format-error-messages"),chatReplayFilterError:Object(i.d)("Your message has been posted. However, other messages posted after the live stream are hidden.","format-error-messages")}}},SnaI:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),a=n("q1tI"),r=n("tiJ6");function o(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(n,t),n.prototype.render=function(){return a.createElement(r.a,i.__assign({},this.props),a.createElement(e,i.__assign({},this.props)))},n}(a.Component)}},T7Bf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Drops_ChannelDrops_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isLoggedIn"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDropsLinked"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activeDropCampaigns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"connectionURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applicableChannels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isStreamDropsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:281}};n.loc.source={body:"query Drops_ChannelDrops_User($login: String! $isLoggedIn: Boolean!) {\nuser(login: $login) {\nid\nlogin\ndisplayName\nstream {\nid\ngame {\nid\nself @include(if: $isLoggedIn) {\nisDropsLinked\n}\nactiveDropCampaigns{\nconnectionURL\napplicableChannels {\nid\n}\n}\n}\nisStreamDropsEnabled\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},T84l:function(e,t,n){},TApp:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("ZtEv"),a=n("aF6k");function r(e){return{type:i.b.Info,id:Object(a.a)("info"),message:e}}},TOso:function(e,t,n){"use strict";var i=n("mrSG"),a=n("/7QA"),r=n("cMjZ"),o=n("geRD"),s=n("f00E"),l=n("DMoW"),c=n("U1yz"),d=n("xXlL"),u=n("a1OF");var m,p=n("3YIm"),h=n("NMMG"),g=n("Vl9+");function f(e){var t=e.currentUserID,n=e.emotes,m=e.message,f=e.recipientUserID;if(""===t||""===m||""===f)return Promise.reject(new Error("Tried to send a whisper with nonsensical parameters."));var v=Object(s.b)(),b=i.__assign({mutation:p},Object(o.a)({message:m,nonce:v,recipientUserID:f})),k=Object(h.a)(t,f),C=Object(c.a)(a.q.apollo.client.cache,k,!0);if(C&&C.messages){var y=function(e,t){for(var n=[],i=/\S+/g,a=i.exec(e);a;){var r=a[0],o=t[r];if(o){var s=Object(u.c)(e.slice(0,a.index)),l=s?s.length:a.index;n.push({id:o.id,start:l,end:l+r.length-1})}a=i.exec(e)}return n}(m,n).map(d.a);b.optimisticResponse={sendWhisper:{__typename:"SendWhisperPayload",message:{content:{content:m,emotes:y,__typename:"MessageBody"},from:{id:t,__typename:"User"},id:v,nonce:v,sentAt:(new Date).toISOString(),deletedAt:null,editedAt:null,thread:{id:k,__typename:"WhisperThread",participants:[{id:t,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:l.xb.NOT_PERMITTED,__typename:"WhisperPermissions"}}},{id:f,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:l.xb.PERMITTED,__typename:"WhisperPermissions"}}}]},__typename:"WhisperMessage"},error:null}},b.update=function(e,t){if(t.data){var n=t.data;if(n.sendWhisper.message&&!n.sendWhisper.error){var a=n.sendWhisper.message,o=Object(c.a)(e,k);if(o&&o.messages){var s=o.messages.edges.findIndex(function(e){return e.node.id===v||e.node.nonce===v||e.node.id===a.id});if(s<0){var l={cursor:(1+C.messages.edges.reduce(function(e,t){return Math.max(parseInt(t.cursor,10),e)},0)).toString(),node:a,__typename:"WhisperMessageEdge"};o.messages.edges.unshift(l)}else o.messages.edges[s].node=a;o.userLastMessageRead&&(o.userLastMessageRead.sentAt=a.sentAt),o.unreadMessagesCount=0,e.writeFragment({id:Object(r.a)(o),fragment:g,data:i.__assign({},o)})}}}}}return a.q.apollo.client.mutate(b)}n.d(t,"a",function(){return m}),n.d(t,"b",function(){return f}),function(e){e.TargetBanned="TARGET_BANNED",e.BodyEmpty="BODY_EMPTY",e.RestrictedRecipient="TARGET_RESTRICTED",e.NotDelivered="NOT_DELIVERED"}(m||(m={}))},Tqc9:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o});var i="@",a="Enter",r="Escape",o=" "},TvOw:function(e,t,n){"use strict";var i,a;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),function(e){e.Spam="Spam",e.Harassment="Harassment"}(i||(i={})),function(e){e.Spam="spam",e.Harassment="harassment",e.Other="other"}(a||(a={}))},Tvwe:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,a=n("mrSG"),r=n("q1tI"),o=n("Ws8v");!function(e){e.Container="mega-notification-container-selector"}(i||(i={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cards:[]},t.popCard=function(){t.setState(function(e){return{cards:e.cards.slice(1).slice()}})},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.state.cards[0];return e?r.createElement(o.a,{className:"mega-cheer-notification","data-test-selector":i.Container},e):null},t}(r.Component)},Tznh:function(e,t,n){"use strict";var i,a,r,o=n("mrSG"),s=n("q1tI"),l=n("/MKj"),c=n("fvjX"),d=n("/7QA"),u=n("yR8l"),m=n("D7An"),p=n("kRBY"),h=n("1rIY"),g=n("+pBb"),f=n("CbHG");!function(e){e.Excluded="control",e.OptIn="opt-in",e.OptOut="opt-out"}(a||(a={})),function(e){e.FilteredMessage="chat_filter_message",e.Onboarding="onboarding",e.Other="other"}(r||(r={}));var v=(i=Object(h.a)("ChatFilterContext",{chatFilterExperimentMembership:a.Excluded,chatFilterSettingsSource:r.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:function(){return null},showChatFilterSettings:function(){return null}})).InnerProvider,b=i.withContext,k=function(e){function t(t){var n=e.call(this,t)||this;return n.hideChatFilterSettings=function(){n.setState({isShowingChatFilterSettings:!1})},n.showChatFilterSettings=function(e){n.setState({chatFilterSettingsSource:e||r.Other,isShowingChatFilterSettings:!0})},n.state={chatFilterExperimentMembership:a.Excluded,chatFilterSettingsSource:r.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:n.hideChatFilterSettings,showChatFilterSettings:n.showChatFilterSettings},n}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.updateStateWithProps(this.props)},t.prototype.componentWillReceiveProps=function(e){this.updateStateWithProps(e)},t.prototype.render=function(){return s.createElement(v,{value:this.state},this.props.children)},t.prototype.updateStateWithProps=function(e){switch(this.getExperimentMembership(e)){case a.OptIn:this.setOptInState(e);break;case a.OptOut:this.setOptOutState(e);break;case a.Excluded:default:this.setExcludedState()}},t.prototype.getExperimentMembership=function(e){if("off"===d.b.get("chat_filter_enabled","off"))return a.Excluded;if(!e.isLoggedIn||"en"!==e.languageCode)return a.Excluded;if(e.data&&e.data.currentUser&&e.data.currentUser.createdAt){var t=d.b.get("chat_filter_start","3000-01-01"),n=new Date(e.data.currentUser.createdAt)>=new Date(t)?m.b.ChatFiltersNewUsers:m.b.ChatFiltersExistingUsers,i=d.q.experiments.getAndTrackAssignment(n);switch(i){case a.Excluded:case a.OptIn:case a.OptOut:return i;default:return a.Excluded}}return a.Excluded},t.prototype.setExcludedState=function(){this.setState({chatFilterExperimentMembership:a.Excluded})},t.prototype.setOptInState=function(e){this.setState({chatFilterExperimentMembership:a.OptIn}),void 0===e.viewerChatFilterEnabled&&this.props.disableViewerChatFilter(r.Other)},t.prototype.setOptOutState=function(e){this.setState({chatFilterExperimentMembership:a.OptOut}),void 0===e.viewerChatFilterEnabled&&this.props.enableViewerChatFilter(r.Other)},t}(s.Component);var C=Object(c.compose)(Object(l.connect)(function(e){return{isLoggedIn:Object(p.f)(e),languageCode:Object(p.b)(e),viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled}},function(e){return Object(c.bindActionCreators)({disableViewerChatFilter:g.G,enableViewerChatFilter:g.L},e)}),Object(u.a)(f,{skip:function(e){return!e.isLoggedIn||"en"!==e.languageCode}}))(k);n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,!1,function(){return v}),n.d(t,"d",function(){return b}),n.d(t,!1,function(){return k}),n.d(t,"a",function(){return C})},U1yz:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("2Dht");function a(e,t,n){try{var a=e.readQuery({query:i,variables:{id:t}},n);return a?a.whisperThread:null}catch(e){return null}}},U1zV:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("pVnL"),a=n.n(i),r=n("q1tI"),o=n("fNzW"),s=n("vCsY"),l=n("IbuL"),c=n("b7S+"),d=(n("8gBY"),function(e){var t;e.icon&&(t=r.createElement(l.a,{asset:e.icon}));var n=r.createElement("div",a()({className:Object(o.a)({"tw-stat":!0})},Object(s.a)(e)),r.createElement("span",{className:"tw-stat__icon"},t),r.createElement("span",{className:"tw-stat__value","data-a-target":"tw-stat-value"},e.value));return e.label?r.createElement(c.a,{direction:e.tooltipDirection?e.tooltipDirection:c.c.Bottom,align:e.tooltipAlign?e.tooltipAlign:c.b.Center,label:e.label},n):n});d.displayName="Stat"},U80U:function(e,t,n){},UNiU:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("/7QA"),a=n("D7An"),r="on";function o(){return i.q.experiments.getAndTrackAssignment(a.b.VODFourtyStacks)===r}},UUau:function(e,t,n){},UWbL:function(e,t,n){"use strict";function i(e){var t=/^((\d+)[Hh])?((\d+)[Mm])?((\d+)[Ss])?$/.exec(e||"");return t?3600*(parseInt(t[2],10)||0)+60*(parseInt(t[4],10)||0)+(parseInt(t[6],10)||0):0}n.d(t,"a",function(){return i})},UZgS:function(e,t,n){},UajW:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BitsCard_MainCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsOffer"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCheerBombEventEnabled"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withCheerBombEventEnabled"}}}]}]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsBadge"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"tournament"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsTournamentFragment"},directives:[]}]}}]}}]}}],loc:{start:0,end:581}};i.loc.source={body:'#import "twilight/features/bits/models/bits-badge-fragment.gql"\n#import "twilight/features/bits/models/bits-offer-fragment.gql"\n#import "twilight/features/bits/models/bits-tournament-fragment.gql"\nquery BitsCard_MainCard($name: ID! $withCheerBombEventEnabled: Boolean!) {\ncurrentUser {\nid\nbitsBalance\nlogin\nbitsOffers {\n...bitsOffer\n}\n}\nuser(id: $name) {\nid\ndisplayName\ncheer {\nid\nsettings {\nemoteMinimumBits\ncheerMinimumBits\nevent\nisCheerBombEventEnabled @include(if: $withCheerBombEventEnabled)\n}\n}\nself {\nbitsBadge {\n...bitsBadge\n}\n}\ntournament {\n...bitsTournamentFragment\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("QYdK").definitions)),i.definitions=i.definitions.concat(r(n("wmIm").definitions)),i.definitions=i.definitions.concat(r(n("XaK9").definitions)),e.exports=i},V3Pk:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"h",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"i",function(){return m});var i=n("mrSG"),a="vodChat.channel-moderation-comments.RESULTS_RECEIVED",r=function(e,t){return i.__assign({type:a},e,{bitsConfig:t})},o="vodChat.channel-moderation-comments.RESULTS_FAILED",s=function(e){return{type:o,error:e}},l=function(e){return{type:"vodChat.channel-moderation-comments.BAN_FAILED",error:e}},c="vodChat.channel-moderation-comments.BAN_SUCCESS",d=function(e){return{type:c,user:e}},u="vodChat.channel-moderation-comments.SEARCH_SUCCESS",m=function(e){return{type:u,hits:e}}},VAW9:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/MKj"),s=n("fvjX"),l=n("yR8l"),c=n("eDVu"),d=n("0Log"),u=n("/aPz"),m=n("3sMn"),p=n("kRBY"),h=n("DMoW");function g(e){var t,n,i={__typename:"Cheermote",id:"",prefix:e.prefix,type:f(e.type),campaign:null,tiers:[]},a=e.tiers.map(function(e){var t=[];return v(e.images).forEach(function(e,n){v(e).forEach(function(e,i){v(e).forEach(function(e,a){t.push({__typename:"CheermoteImage",id:"",url:e,theme:n.toUpperCase(),dpiScale:parseFloat(a),isAnimated:"animated"===i})})})}),{__typename:"CheermoteTier",id:e.id,bits:e.min_bits,canCheer:e.can_cheer,canShowInBitsCard:e.show_in_bits_card,color:e.color,images:t}});return i.tiers=a,e.campaign&&(i.campaign=(t=e.campaign,n={__typename:"CheermoteCampaign",id:t.id,brandName:t.brand_name,brandImageURL:t.brand_image_url,minimumBitsAmount:t.min_bits_to_be_sponsored,bitsTotal:t.total_bits,bitsUsed:t.used_bits,bitsPercentageRemaining:t.used_bits/t.total_bits,userLimit:t.user_limit,thresholds:[],self:null},v(t.sponsored_amount_thresholds).forEach(function(e,t){n.thresholds.push({__typename:"CheermoteCampaignThreshold",id:"",minimumBits:t,matchedPercent:e})}),n)),i}function f(e){var t=h.y.UNKNOWN;switch(e){case"channel_custom":t=h.y.CUSTOM;break;case"global_first_party":t=h.y.FIRST_PARTY;break;case"global_third_party":t=h.y.THIRD_PARTY;break;case"sponsored":t=h.y.SPONSORED;break;default:t=h.y.UNKNOWN}return t}var v=function(e){return Object.keys(e).reduce(function(t,n){return t.set(n,e[n])},new Map)},b=n("0Lz3"),k=n("hO8c"),C=n("+pBb"),y=n("Y3y8"),S=n("GnwI");var E=n("/7QA"),N=n("w0yC"),w=n("ZS2+"),_=n("KwB3"),D=n("i4un"),O=n("BJwa"),I=n("hnjF"),T=n("7uM4"),M=n("sUnt"),L=n("X2PJ"),F=n("dEDE"),x=n("Ws8v"),j=n("wp5a"),A=n("+80q"),P=n("7d/q"),R=(n("eZF0"),w.a.wrap(function(){return n.e(210).then(n.bind(null,"+k6+"))},"ActiveRoomButton")),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loggedOutChannelPageAssignment=Object(D.c)(),t}return i.__extends(t,e),t.prototype.render=function(){var e="control"===this.loggedOutChannelPageAssignment&&!this.props.isLoggedIn||!this.loggedOutChannelPageAssignment||this.props.isLoggedIn,t=a.createElement(x.a,{className:"rooms-header",background:L.a.Alt,borderBottom:!0,display:I.d.Flex,fullWidth:!0,justifyContent:I.h.Between,alignItems:I.b.Center,flexShrink:0,padding:{left:2,right:1}},a.createElement("div",{id:O.a},this.renderActiveRoomName()),e&&a.createElement(M.a,{display:I.d.Flex},this.renderRoomsIngress()));return this.props.isRoomPickerOpen&&(t=a.createElement(M.a,{className:"rooms-header__open-header-wrapper","data-test-selector":"open-header-wrapper"},t)),t},t.prototype.renderRoomsIngress=function(){if(this.props.isEmbedded)return null;var e=a.createElement(M.a,{alignItems:I.b.Center,"data-test-selector":"rooms-ingress",display:I.d.Flex},!this.props.isRoomPickerOpen&&Object(E.d)("Rooms","RoomsHeaderClosedLabel"),a.createElement(M.a,{display:I.d.Flex,alignItems:I.b.Center},this.renderAlertText(),!this.props.isRoomPickerOpen&&a.createElement(M.a,{padding:{left:.5},display:I.d.Flex},a.createElement(T.a,{asset:T.b.RoomList})),this.props.isRoomPickerOpen&&a.createElement(P.a,{ariaLabel:"RoomListOpen",icon:T.b.RoomListOpen,"data-test-selector":"close-room-picker-button",onClick:this.props.onClick,blurAfterClick:!0})));return this.props.isRoomPickerOpen||(e=a.createElement(M.a,{position:I.j.Relative},a.createElement(F.a,{"data-a-target":"room-selector-button","data-test-selector":"open-room-picker-button",onClick:this.props.onClick,type:F.d.Text},e))),e},t.prototype.renderAlertText=function(){return this.props.alertText?a.createElement(M.a,{display:I.d.InlineBlock,padding:{left:.5},position:I.j.Relative},a.createElement(j.a,{label:this.props.alertText,type:j.b.Alert})):null},t.prototype.renderActiveRoomName=function(){return this.props.isRoomPickerOpen?a.createElement(A.a,{color:L.c.Alt,"data-test-selector":O.a},Object(E.d)("Rooms","RoomsHeaderOpenLabel")):"Stream Chat"===this.props.activeRoomName?this.props.channelDisplayName?a.createElement(A.a,{color:L.c.Alt,"data-test-selector":O.a},Object(E.d)("<x:bold>{displayName}</x:bold>'s Chat",{displayName:this.props.channelDisplayName,"x:bold":function(e){return a.createElement(A.a,{type:A.e.Span,bold:!0},e)}},"RoomsHeaderUserChat")):a.createElement(A.a,{color:L.c.Alt,"data-test-selector":O.a},Object(E.d)("Stream Chat","RoomsHeaderTitle")):this.props.isActiveRoomDeleted?a.createElement(A.a,{color:L.c.Alt,"data-test-selector":O.a},this.props.activeRoomName):a.createElement(R,{roomID:this.props.activeRoomID,roomName:this.props.activeRoomName})},t}(a.PureComponent),B=(n("zWFo"),"Stream Chat"),V=w.a.wrap(function(){return n.e(215).then(n.bind(null,"Xf1I"))},"Room"),H=w.a.wrap(function(){return n.e(214).then(n.bind(null,"cs/o"))},"RoomPicker"),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeRoomID:B,activeRoomName:B,isActiveRoomDeleted:!1,showRoomPicker:!1},t.isChannelLive=function(e){return!(e.error||!e.channel)&&!!(e.channel.stream&&e.channel.stream.id||e.channel.hosting&&e.channel.hosting.id)},t.headerClick=function(){t.setState(function(e){return{showRoomPicker:!e.showRoomPicker}})},t.handleRoomSelect=function(e,n){t.setState({activeRoomID:e,activeRoomName:n,isActiveRoomDeleted:!1,showRoomPicker:!1})},t.onActiveRoomDelete=function(){t.state.activeRoomID!==B&&t.setState({isActiveRoomDeleted:!0})},t.goToStreamChat=function(){t.handleRoomSelect(B,B)},t.closeRoomPicker=function(){t.setState({showRoomPicker:!1})},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.updateChatConfigState({hideOnboardingPrompts:!!this.props.hideOnboardingPrompts,hideChatInputButtons:!!this.props.hideChatInputButtons})},t.prototype.componentWillReceiveProps=function(e){var t=this;if(this.props.data&&e.data&&this.props.data.channel&&e.data.channel&&this.props.data.channel.self&&e.data.channel.self&&!e.data.channel.self.isChannelMember&&this.props.data.channel.self.isChannelMember!==e.data.channel.self.isChannelMember&&this.goToStreamChat(),e.data&&e.data.channel&&e.data.channel.self){var n=e.data.channel.self;(!n.isChannelMember||n.banStatus&&n.banStatus.isPermanent)&&this.state.activeRoomID!==B&&this.goToStreamChat()}if(this.props.sessionUser&&this.props.routedRoomName&&this.props.data&&this.props.data.loading&&!this.props.data.channel&&e.data&&!e.data.loading&&e.data.channel&&e.data.channel.channelRooms&&e.data.channel.self&&e.data.channel.self.isChannelMember){var i=e.data.channel.channelRooms.find(function(e){return null!==e&&e.name===t.props.routedRoomName});i&&this.setState({activeRoomID:i.id,activeRoomName:i.name})}else this.props.channelLogin!==e.channelLogin&&this.state.activeRoomID!==B&&this.goToStreamChat()},t.prototype.render=function(){return a.createElement(M.a,{className:"room-selector",fullWidth:!0,fullHeight:!0,display:I.d.Flex,flexDirection:I.e.Column,flexGrow:1,flexWrap:I.f.NoWrap,position:I.j.Relative},this.renderHeader(),this.renderRoomPicker(),this.renderHiddenState(),this.renderChat(),this.renderCurrentRoom())},t.prototype.renderChat=function(){if(this.props.isHidden&&!this.props.isPopout)return null;var e=this.props.isBackground||this.state.activeRoomID!==B,t=this.props.bitsConfig&&this.props.bitsConfig.orderedActions.length>0;return a.createElement(_.a,{bitsConfig:t?this.props.bitsConfig:void 0,channelLogin:this.props.channelLogin,clientID:E.a.authSettings.clientID,isBackground:e,isEmbedded:this.props.isEmbedded,isPopout:this.props.isPopout,closeRoomPicker:this.closeRoomPicker,onHostingChange:this.props.onHostingChange,hostedChannelDisplayName:this.props.hostedChannelDisplayName,shouldConnectChat:this.props.shouldConnectChat,useBaseBackground:this.props.useBaseBackground,isFullPopoutPlayer:this.props.isFullPopoutPlayer})},t.prototype.renderCurrentRoom=function(){return(!this.props.isHidden||this.props.isPopout)&&this.props.data&&this.props.data.channel&&this.props.data.channel.id&&this.state.activeRoomID!==B?a.createElement(V,{bitsConfig:this.props.bitsConfig,isDeleted:this.state.isActiveRoomDeleted,isPopout:this.props.isPopout,channelLogin:this.props.channelLogin,channelID:this.props.data.channel.id,roomID:this.state.activeRoomID,closeRoomPicker:this.closeRoomPicker,handleStreamChatClick:this.goToStreamChat,onDelete:this.onActiveRoomDelete,isHostMode:!!this.props.hostedChannelDisplayName,useBaseBackground:this.props.useBaseBackground}):null},t.prototype.renderHeader=function(){var e=this,t=this.props.data,n=void 0;if(t&&!t.error&&t.channel&&t.channel.self&&t.channel.self.isChannelMember&&t.channel.channelRooms){var i=t.channel.channelRooms.reduce(function(t,n){return n&&n.self&&!n.self.isMuted&&n.id!==e.state.activeRoomID?t+n.self.unreadMentionCount:t},0);n=i>0?i.toString():void 0}var r=void 0;return this.props.renderChannelName&&this.props.data&&this.props.data.channel&&this.props.data.channel.displayName&&(r=this.props.data.channel.displayName),a.createElement(U,{activeRoomName:this.state.activeRoomName,activeRoomID:this.state.activeRoomID,alertText:n,channelDisplayName:r,onClick:this.headerClick,isActiveRoomDeleted:this.state.isActiveRoomDeleted,isEmbedded:this.props.isEmbedded,isRoomPickerOpen:this.state.showRoomPicker,isLoggedIn:this.props.isLoggedIn})},t.prototype.renderRoomPicker=function(){if(this.state.showRoomPicker&&this.props.data&&this.props.data.channel&&this.props.data.channel.id)return a.createElement(N.a,{onClickOut:this.closeRoomPicker},a.createElement(x.a,{attachLeft:!0,attachRight:!0,background:L.a.Alt,borderBottom:!0,borderLeft:!0,borderRight:!0,elevation:2,position:I.j.Absolute,zIndex:I.n.Above},a.createElement(H,{channelID:this.props.data.channel.id,handleRoomSelect:this.handleRoomSelect,isChannelLive:this.isChannelLive(this.props.data),renderChannelName:this.props.renderChannelName,activeRoomID:this.state.activeRoomID,"data-test-selector":"room-picker"})))},t.prototype.renderHiddenState=function(){return!this.props.isHidden||this.props.isPopout?null:a.createElement(x.a,{alignItems:I.b.Center,borderLeft:!0,"data-test-selector":"room-selector-hidden-state",display:I.d.Flex,flexDirection:I.e.Column,fullHeight:!0,fullWidth:!0,justifyContent:I.h.Center,color:L.c.Base,position:I.j.Relative},a.createElement(M.a,{margin:{bottom:1}},a.createElement(A.a,{fontSize:L.d.Size5},Object(E.d)("Chat is hidden.","RoomSelector"))),a.createElement(F.a,{onClick:this.props.onChatUnhide,"data-a-target":"show-chat-button"},Object(E.d)("Show Chat","RoomSelector")))},t}(a.Component),q=n("Qdho");var W=Object(m.b)(function(e){return{updateChatConfigState:function(t){return e.updateChatConfigState(t)}}})(G),z=Object(r.compose)(Object(o.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded,isHidden:e.chat.isHidden,sessionUser:Object(p.e)(e),isLoggedIn:Object(p.f)(e)}},function(e){return Object(s.bindActionCreators)({onChatUnhide:function(){return C.P()}},e)}),Object(l.a)(q,{skip:function(e){return!e.firstPageLoaded},props:function(e){return{data:e.data,bitsConfig:Object(b.a)(e.data&&e.data.channel&&e.data.channel.cheer&&e.data.channel.cheer.emotes||[]),channelID:e.data&&e.data.channel&&e.data.channel.id}},options:function(e){return{variables:{login:e.channelLogin}}}}),Object(c.a)(function(e){return{query:q,skip:!e.firstPageLoaded||!e.data||!e.data.channel,variables:{login:e.channelLogin},topic:Object(u.j)(""+(e.data&&e.data.channel&&e.data.channel.id)),types:[d.PubsubMessageType.ChatRoomCreated,d.PubsubMessageType.ChatRoomDeleted],mutator:function(e,t){if(e.type===d.PubsubMessageType.ChatRoomDeleted&&t.channel&&t.channel.channelRooms)return t.channel.channelRooms=t.channel.channelRooms.filter(function(t){return null!==t&&t.id!==e.data.room.room_id}),t;if(e.type===d.PubsubMessageType.ChatRoomCreated&&t.channel&&t.channel.channelRooms){var n=function(e){return{id:e.data.room.room_id,minimumAllowedRole:e.data.room.minimum_allowed_role,name:e.data.room.name,topic:e.data.room.topic,isPreviewable:e.data.room.is_previewable,self:{isArchived:!1,isMuted:!1,isUnread:!1,unreadMentionCount:0,__typename:"RoomView"},__typename:"Room"}}(e);return t.channel.channelRooms.push(n),t}}}}),Object(c.a)(function(e){return{query:q,skip:!(e.firstPageLoaded&&e.sessionUser&&e.data&&e.data.channel),variables:{login:e.channelLogin},topic:Object(u.k)(""+(e.sessionUser&&e.sessionUser.id)),types:[d.PubsubMessageType.UserMention,d.PubsubMessageType.ChatRoomsRoomViewUpdated],mutator:function(e,t){switch(e.type){case d.PubsubMessageType.UserMention:if(e=e,!t.channel||!t.channel.channelRooms||t.channel.id!==e.data.channel_id)break;var n=e.data.room_id;t.channel.channelRooms=t.channel.channelRooms.filter(function(e){return e&&e.self}).map(function(e){return e.id===n&&e.self&&(e.self.unreadMentionCount+=1),e});break;case d.PubsubMessageType.ChatRoomsRoomViewUpdated:if(e=e,!t.channel||t.channel.id!==e.data.room_view.room.owner_id||!t.channel.self)break;t.channel.self.isModerator=e.data.room_view.permissions.moderate}return t}}}),Object(c.a)(function(e){return{query:q,skip:!(e.firstPageLoaded&&e.sessionUser&&e.data&&e.data.channel),variables:{login:e.channelLogin},topic:Object(u.b)(),types:[d.PubsubMessageType.BitsCampaignTotalUpdate,d.PubsubMessageType.BitsCampaignComplete],mutator:function(e,t){if(t.channel&&t.channel.cheer&&t.channel.cheer.emotes)if(e.type===d.PubsubMessageType.BitsCampaignTotalUpdate){var n=e;t.channel.cheer.emotes=t.channel.cheer.emotes.map(function(e){return e&&e.campaign?(e.campaign&&e.campaign.id===n.campaign_id&&(e.campaign.bitsUsed=n.used_amount),e):e})}else if(e.type===d.PubsubMessageType.BitsCampaignComplete){var i=e;t.channel.cheer.emotes=t.channel.cheer.emotes.filter(function(e){return!e||!e.campaign||e.campaign.id!==i.campaign_id})}return t}}}),Object(c.a)(function(e){return{query:q,skip:!(e.firstPageLoaded&&e.sessionUser&&e.data&&e.data.channel),variables:{login:e.channelLogin},topic:Object(u.a)(""+(e.data&&e.data.channel&&e.data.channel.id)),types:[d.PubsubMessageType.BitsCampaignAddCheermoteEvent,d.PubsubMessageType.BitsCampaignRemoveCheermoteEvent],mutator:function(e,t){if(t.channel&&t.channel.cheer&&t.channel.cheer.emotes)if(e.type===d.PubsubMessageType.BitsCampaignAddCheermoteEvent){var n=g(e.action);t.channel.cheer.emotes.unshift(n)}else if(e.type===d.PubsubMessageType.BitsCampaignRemoveCheermoteEvent){var i=e;t.channel.cheer.emotes=t.channel.cheer.emotes.filter(function(e){return!e||!e.campaign||e.campaign.id!==i.campaign_id})}return t}}}),Object(y.b)(),Object(S.withLatencyTracking)("RoomSelector",{autoReportInteractive:!0}))(function(e){return a.createElement(m.a,null,a.createElement(k.a,{channelLogin:e.channelLogin},a.createElement(W,i.__assign({},e))))});n.d(t,"a",function(){return z})},VFp6:function(e,t,n){},VKOn:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return d});var i=n("/7QA"),a=n("DMoW"),r="disable_multiview_load";function o(e){if(e&&e.channel&&e.channel.id&&e.channel.chanlets){var t=e.channel,n=t.chanlets,i=t.id;return n.filter(function(e){return i!==e.id})}return[]}function s(e){return e.every(function(e){var t=e.restriction;if(!t)return!0;var n=new Date(Date.now());return!!t.exemptions&&t.exemptions.filter(function(e){return e.type===a.Qa.ALL&&(!e.startsAt||new Date(e.startsAt)<=n)&&(!e.endsAt||new Date(e.endsAt)>=n)}).length>=1})}function l(e){return e.every(function(e){return!!e.restriction})}function c(e){return e.some(function(e){return!!e.self&&e.self.isAuthorized})}function d(){return i.b.get(r,!1)}},VN3V:function(e,t,n){},Ve5Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UpsellCenter_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query UpsellCenter_Channel($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nprofileImageURL(width: 70)\nbroadcastSettings {\nid\ngame {\nid\ndisplayName\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"Vl9+":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"thread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:240}};n.loc.source={body:"fragment thread on WhisperThread {\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n}\n}\ndeletedAt\neditedAt\nsentAt\nfrom {\nid\n}\n}\n}\n}\nunreadMessagesCount\nuserLastMessageRead {\nsentAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},VrOd:function(e,t,n){},Vsf8:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsModalDeleteAll_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcast"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:101}};n.loc.source={body:"query ClipsModalDeleteAll_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nvideo {\nid\n}\nbroadcast {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},VwyG:function(e,t,n){"use strict";var i=n("/MKj"),a=n("kRBY"),r=n("mrSG"),o=n("q1tI"),s=n("oJmH"),l=n("/7QA"),c=n("yR8l"),d=n("GnwI"),u=n("nt5g"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.logger=l.k.withCategory("role-restricted"),n.state={loading:t.isLoggedIn,permitted:!1,roles:{staff:!1,editor:!1,owner:!1},error:null},n}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){var t=e.data&&e.data.loading,n=this.props.data&&this.props.data.loading;(!this.props.isLoggedIn||t&&!n)&&this.props.latencyTracking.reportInteractive()},t.prototype.componentWillReceiveProps=function(e){this.maybeSetRoleState(e)},t.prototype.componentDidMount=function(){(!this.props.isLoggedIn||this.props.data&&!this.props.data.loading)&&this.props.latencyTracking.reportInteractive(),this.maybeSetRoleState(this.props)},t.prototype.render=function(){return this.props.children(this.state)},t.prototype.maybeSetRoleState=function(e){if(e.isLoggedIn&&e.data){var t=function(e){var t=e.data,n={staff:!1,editor:!1,owner:!1};t&&!t.error&&!t.loading&&t.user&&t.currentUser&&(n.staff=!(!t.currentUser.roles||!t.currentUser.roles.isStaff),n.editor=!(!t.user.self||!t.user.self.isEditor),n.owner=t.user.id===t.currentUser.id);return n}(e),n={loading:e.data.loading,permitted:p(t,e.permittedRoles),roles:t,error:null};e.data.error?(n.error=new Error(e.data.error.toString()),this.logger.warn("Unable to retrieve data from GraphQL.",{err:n.error})):e.data.loading||e.data.user&&e.data.currentUser||(n.error=new Error("Failed to fetch user information"),this.logger.warn("Failed to fetch user information.",{err:n.error})),this.setState(n)}},t}(o.Component);function p(e,t){return!!e.owner||(!(!e.staff||!t.staff)||!(!e.editor||!t.editor))}var h=Object(s.compose)(Object(c.a)(u,{options:function(e){return{variables:{contentOwnerLogin:e.ownerLogin}}},skip:function(e){return!e.isLoggedIn}}),Object(d.withLatencyTracking)("RoleRestricted"))(m);var g=Object(i.connect)(function(e){return{isLoggedIn:Object(a.f)(e)}})(h);n.d(t,"a",function(){return g})},"W/3w":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s});var i=n("/7QA"),a=30,r=[0,10,30,60,1440,10080,43200,129600];function o(e){switch(e){case 0:return Object(i.d)("0 minutes (Any followers)","FollowersOnlyLabel");case 10:return Object(i.d)("10 minutes (Most used)","FollowersOnlyLabel");case 30:return Object(i.d)("30 minutes","FollowersOnlyLabel");case 60:return Object(i.d)("1 hour","FollowersOnlyLabel");case 1440:return Object(i.d)("1 day","FollowersOnlyLabel");case 10080:return Object(i.d)("1 week","FollowersOnlyLabel");case 43200:return Object(i.d)("1 month","FollowersOnlyLabel");case 129600:return Object(i.d)("3 months","FollowersOnlyLabel");default:return i.k.warn("[FollowersOnlyLabel] Tried to generate a label for a non-preset.",e),""}}function s(e){switch(e){case 0:return Object(i.d)("0 min","FollowersOnlyShorthand");case 10:return Object(i.d)("10 min","FollowersOnlyShorthand");case 30:return Object(i.d)("30 min","FollowersOnlyShorthand");case 60:return Object(i.d)("1 hr","FollowersOnlyShorthand");case 1440:return Object(i.d)("1 day","FollowersOnlyShorthand");case 10080:return Object(i.d)("1 wk","FollowersOnlyShorthand");case 43200:return Object(i.d)("1 mo","FollowersOnlyShorthand");case 129600:return Object(i.d)("3 mo","FollowersOnlyShorthand");default:return Object(i.d)("custom","FollowersOnlyShorthand")}}},W7Hf:function(e,t,n){"use strict";var i=n("9sGC");n.d(t,"a",function(){return i.a})},W8Fi:function(e,t,n){"use strict";function i(e){return e.some(function(e){return!!e.self&&!!e.self.promotion})}function a(e){return e.some(function(e){return!!e.giftPromotion})}function r(e){return e.some(function(e){return!!e.self&&!!e.self.paidUpgradePromotion})}function o(e,t){var n;return t?n=e.giftPromotion:e.self&&(n=e.self.promotion),n?n.newPrice:e.price}function s(e,t){var n;return t?n=e.giftPromotion:e.self&&(n=e.self.promotion),n?parseInt(n.discountValue,10):0}function l(e){return e.self&&e.self.paidUpgradePromotion?e.self.paidUpgradePromotion.newPrice:e.price}function c(e){return e.find(function(e){return!!e.self&&!!e.self.paidUpgradePromotion})||null}n.d(t,"g",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c})},WK0g:function(e,t,n){"use strict";var i=n("cr+I"),a=n("b6Yk"),r=n("ahza"),o=n("mrSG"),s=n("pU2t"),l=n("XeJ1"),c=function(e,t){var n=Object(s.d)(e,t),i=e.comments.reduce(function(e,t){return void 0===t.video?e:e.concat([d(t.video)])},[]);return Array.isArray(e.parents)&&e.parents.forEach(function(e){n.comments.push(s.a.normalizeRecord(e,t)),n.users.push(l.a.normalizeRecord(e.commenter))}),o.__assign({},n,{videos:i})},d=function(e){return{id:e._id,title:e.title,preview:e.preview}};n.d(t,"b",function(){return g}),n.d(t,"a",function(){return f});var u="channel_id",m="limit",p="video_id",h=50;function g(e){var t;return t=function(e){return"userId"in e}(e)?function(e){var t={};return t[m]=h.toString(),t[u]=e.userId,void 0!==e.cursor&&(t[r.a]=e.cursor),"/v5/videos/comments?"+i.stringify(t)}(e):function(e){var t={};return t[m]=h.toString(),t[p]=e.videoId,void 0!==e.cursor&&(t[r.a]=e.cursor),"/v5/videos/comments?"+i.stringify(t)}(e),a.a.getOrThrow(t).then(function(t){return c(t.body,e.bitsConfig)})}function f(e){var t=function(e){return"/v5/videos/channels/"+e.targetChannel+"/bans"}(e),n={body:{commenter_id:e.bannedUser}};return a.a.postOrThrow(t,n)}},WrC7:function(e,t,n){},WytW:function(e,t,n){"use strict";n.d(t,"h",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"a",function(){return p}),n.d(t,"n",function(){return g}),n.d(t,"k",function(){return v}),n.d(t,"i",function(){return k}),n.d(t,"m",function(){return y}),n.d(t,"l",function(){return E}),n.d(t,"j",function(){return _}),n.d(t,"g",function(){return O});var i=n("/7QA"),a=n("4G6/"),r=n("Ff8q"),o=i.q.logger.withCategory("chat-commands");function s(e){return/^[\/]/.test(e)}function l(){return"/clear"}function c(){return"/followersoff"}function d(){return"/slowoff"}function u(e){return"/followers "+e}function m(){return"/slow"}function p(e){return"/color "+e}var h=/^\/w(?:$|\s+)(\S+)?\s*(.+)?/i;function g(e){var t=e.trim().match(h);return t?{recipientLogin:t[1]&&Object(r.b)(t[1])||null,body:t[2]||null}:null}var f=/^\/host\s+(\S+)$/i;function v(e){var t=e.trim().match(f);return t?{recipientLogin:Object(r.b)(t[1])}:null}var b=/^\/ban\s+(\S+)(?:\s+(.+))?$/;function k(e){var t=e.trim().match(b);return t&&t[1]?{banTarget:Object(r.b)(t[1]),reason:t[2]||null}:null}var C=/^\/timeout\s+(\S+)(?:\s+(\S+))?(?:\s+(.+))?$/;function y(e){var t=!0,n=e.trim().match(C);if(!n||!n[1])return null;var i=Object(r.b)(n[1]),o=n[2]||null,s=n[3]||null,l=null;if(null!==o){var c=Number(o);if(Number.isNaN(c)){var d=Object(a.b)(o||"");!d||Number.isNaN(d)?t=!1:l=d}else l=c}return{validArguments:t,banTarget:i,rawDuration:o,durationSeconds:l,reason:s}}var S=/^\/slow(?:\s+(\d+)?)?$/;function E(e){var t=e.trim().match(S);return t?{duration:t[1]&&Number(t[1])||null}:null}var N=["blue","blueviolet","cadetblue","chocolate","coral","dodgerblue","firebrick","goldenrod","green","hotpink","orangered","red","seagreen","springgreen","yellowgreen"],w=/^\/color\s+(#[A-Fa-f0-9]{6}|[A-Za-z]+)$/;function _(e){var t=e.trim().match(w);if(!t)return null;var n=t[1];return n.startsWith("#")||-1!==N.indexOf(n.toLowerCase())?{color:n}:null}var D=/^[\/.]([a-z0-9]+)(.+)?$/i;function O(e,t){var n=e.match(D);if(!n)return{handled:!1};var a=n[1],r=(i.q.store.getState().chat.commandHandlers[t]||{})[a.toLowerCase()];if(!r)return{command:a,handled:!1};if(1!==r.length)return o.error(new Error("Failed to run comand "+a),"Multiple command handlers defined for '"+a+"'",{command:a}),{command:a,handled:!1};var s=(n[2]||"").trim(),l={channelLogin:t},c=r[0];try{return{command:a,handled:!0,result:c(s,l)}}catch(e){return o.warn("Exception thrown from chat command handler",{command:a,err:e}),{handled:!1}}}},X31c:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("oJmH"),s=n("/MKj"),l=n("fvjX"),c=n("/7QA"),d=n("8Ad5"),u=n("0Log"),m=n("DMoW"),p=n("uIkQ"),h=n("+pBb"),g=n("ZVTe"),f=n("6wGa"),v=n("cys1"),b=n("EE1E"),k=n("fezU"),C=n("ZtEv"),y=n("oK83"),S=n("hnjF"),E=n("+80q"),N=n("sUnt"),w=(n("uYvD"),"chat-deleted-message-placeholder"),_="chat-deleted-message-attribution",D="chat-hidden-message-placeholder",O="chat-hidden-username-placeholder",I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderModerationIcons=function(){return t.props.isCurrentUserModerator&&t.props.showModerationIcons&&t.props.message.user.userID&&t.props.channelID?r.createElement(f.a,{targetUserID:t.props.message.user.userID,confirmModerationAction:t.props.confirmModerationAction,channelID:t.props.channelID,isMessageDeleted:t.props.message.deleted,isMessageBanned:t.props.message.banned,senderLogin:t.props.message.user.userLogin,messageID:t.props.message.id}):null},t.renderMessageBody=function(){if(t.props.isHidden&&!t.state.alwaysShowMessage&&t.props.isCurrentUserModerator){var e=Object(c.d)("message hidden from blocked user","ChatLine");return r.createElement("span",{key:"hidden_message",className:"chat-line__message--hidden","data-a-target":D},r.createElement("a",{href:"",onClick:t.hiddenMessageClickHandler},"<"+e+">"))}if(t.props.isDeleted)return t.renderDeletedMessage();var n={chatChannelID:t.props.channelID,chatChannelLogin:t.props.channelLogin,messageAuthorID:t.props.message.user.userID,messageSourceID:t.props.message.id,emoteSourceType:y.a.chat};return Object(v.f)(t.props.message.messageParts,n)},t.renderDeletedMessage=function(){var e=t.props,n=e.isCurrentUserModerator,i=e.isCurrentUserStaff,a=e.deletedMessageDisplay;if(n||i){var o={chatChannelID:t.props.channelID,chatChannelLogin:t.props.channelLogin,messageAuthorID:t.props.message.user.userID,messageSourceID:t.props.message.id,emoteSourceType:y.a.chat,disableChatCard:!0};if(a===m.O.DETAILED){var s=t.props.message,l=s.modLogin,d=s.modActionType,p=s.duration,h=Object(c.d)("(Deleted)","ChatLine");return d&&d===u.ModerationActions.Ban&&l&&(h=Object(c.d)("(Banned by {modLogin})",{modLogin:l},"ChatLine")),d&&d===u.ModerationActions.Timeout&&(l&&p?h=Object(c.d)("({duration}s Timeout by {modLogin})",{duration:p,modLogin:l},"ChatLine"):l&&(h=Object(c.d)("(Timeout by {modLogin})",{modLogin:l},"ChatLine"))),d&&d===u.ModerationActions.Delete&&l&&(h=Object(c.d)("(Deleted by {modLogin})",{modLogin:l},"ChatLine")),r.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":w},r.createElement("span",{className:"chat-line__message--deleted-detailed"},Object(v.f)(t.props.message.messageParts,o)),r.createElement(S.g,{padding:{left:.5}},r.createElement(E.a,{type:E.e.Span,"data-test-selector":_},h)))}return t.state.alwaysShowMessage?Object(v.f)(t.props.message.messageParts,o):r.createElement("span",{key:"deleted",className:"chat-line__message--deleted","data-a-target":w},r.createElement("a",{href:"",onClick:t.alwaysShowMessage},"<"+Object(c.d)("message deleted","ChatLine")+">"))}return r.createElement("span",{key:"deleted",className:"chat-line__message--deleted-notice","data-a-target":w},""+Object(c.d)("message deleted by a moderator.","ChatLine"))},t.renderMessageAuthor=function(){var e=t.props,n=e.badgeSets,i=e.message,a=e.theme,o=e.useHighContrastColors;return t.props.isHidden&&!t.state.alwaysShowMessage&&t.props.isCurrentUserModerator?r.createElement("span",{key:"hidden_username",className:"chat-line__username--hidden","data-a-target":O},r.createElement("a",{href:"",onClick:t.hiddenMessageClickHandler},Object(c.d)("User Hidden","ChatLine"))):r.createElement(r.Fragment,null,t.renderModerationIcons(),r.createElement(p.b,{badgeSets:n,badgesToRender:i.badges,dynamicData:i.badgeDynamicData}),r.createElement("span",{className:"chat-line__username",onClick:t.openViewerCard,onKeyDown:t.openViewerCard,role:"button",tabIndex:0},r.createElement(g.a,{userData:i.user,highContrastUsernameColor:o,theme:a})))},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t.hiddenMessageClickHandler=function(e){t.alwaysShowMessage(e),t.props.message.user.userID&&t.props.onHiddenMessageClick(t.props.message.user.userID)},t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==d.a.Space&&e.keyCode!==d.a.Enter||t.props.onUsernameClick(t.props.message.user.userLogin,y.b.chat_message,t.props.message.id,e.currentTarget.getBoundingClientRect().bottom)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.message,i=e.showTimestamps,o=e.theme,s=e.useHighContrastColors,l=e.isDeleted,d=e.isCurrentUserModerator,u=e.deletedMessageDisplay,p=e.deletedCount;if(l&&d&&u===m.O.BRIEF)return p&&p>0?r.createElement(N.a,{className:"chat-line__status"},r.createElement(E.a,{type:E.e.Span,"data-a-target":w},Object(c.d)("{numDeleted, plural, one {# message was deleted by a moderator.} other {# messages were deleted by a moderator.}}",{numDeleted:p},"ChatLine"))):null;var h={},g=": ";if(n.messageType===C.c.Action){var f=n.user.color;s&&f&&(f="#"+Object(b.a)(f,o)),h={color:f},g=" "}var k=null;return i&&(k=Object(v.l)(n.timestamp)),r.createElement("div",{className:a(t,"chat-line__message"),style:h,"data-a-target":"chat-line-message"},k,this.renderMessageAuthor(),r.createElement("span",{key:"separator","aria-hidden":"true"},g),this.renderMessageBody())},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(r.Component);var T=Object(o.compose)(Object(s.connect)(void 0,function(e){return Object(l.bindActionCreators)({onHiddenMessageClick:h.R},e)}),Object(k.b)(function(e){return{onUsernameClick:e.onShowViewerCard,onEmoteClick:e.onShowEmoteCard}}))(I)},X7Ac:function(e,t,n){"use strict";var i=n("wbMx");n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},XA5B:function(e,t,n){},XIZb:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("q1tI"),r=n("4rCz"),o=n("1rIY");function s(e){var t=Object(o.a)(e,{setServiceAPI:function(){r.l.warn("The "+e+" chat service attempted to register its API without a provider.")}}),n=t.InnerProvider,s=t.withContext;return{InnerProvider:n,withChatServiceProvider:function(e){return function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e.setServiceAPI=function(t){e.setState({serviceAPI:t})},e}return i.__extends(r,t),r.prototype.render=function(){return a.createElement(n,{value:{serviceAPI:this.state.serviceAPI,setServiceAPI:this.setServiceAPI}},a.createElement(e,i.__assign({},this.props)))},r}(a.Component)},withContext:s}}},XQnt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_SubUpsell_PriceInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTaxInclusive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:393}};n.loc.source={body:"query EmotePicker_SubUpsell_PriceInfo($channelID: ID!) {\nuser(id: $channelID) {\nid\nsubscriptionProducts {\nid\ndisplayName\nname\ntier\nurl\nemotes {\nid\ntoken\n}\nprice\npriceInfo {\ncurrency\nexponent\ntotal\ndescription\nprice\nisTaxInclusive\nid\ntax\n}\nemoteSetID\nself {\npromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\n}\npaidUpgradePromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},XRPh:function(e,t,n){"use strict";var i=n("oJmH"),a=n("/MKj"),r=n("kRBY"),o=n("fezU"),s=n("mrSG"),l=n("q1tI"),c=n("/7QA"),d=n("D7An"),u=n("j0ar"),m="emote_card",p="emote_card_whitelist";var h=n("oK83"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emoteClickHandler=function(e){t.props.emote.emoteID&&t.props.onEmoteClick({channelID:t.props.channelID||"",channelLogin:t.props.channelLogin||"",emoteID:t.props.emote.emoteID,emoteCode:t.props.emote.alt||"",sourceID:t.props.sourceID||"",emoteSourceType:t.props.sourceType?t.props.sourceType:h.a.unknown,referrerID:t.props.referrerID||"",initialTopOffset:e.currentTarget.getBoundingClientRect().bottom})},t}return s.__extends(t,e),t.prototype.render=function(){var e,t,n=this.props.emote.alt||"";return this.props.emote.cheerAmount&&(n+=" "+this.props.emote.cheerAmount.toString(),e=l.createElement("strong",{className:"chat-line__message--cheer-amount",style:{color:this.props.emote.cheerColor}},this.props.emote.cheerAmount)),t=l.createElement(u.a,{alt:n,cheerText:e,className:"chat-line__message--emote",srcKey:"1x",srcSet:this.props.emote.images}),this.props.emote.cheerAmount||this.props.disableCard||!function(e){var t=c.b.get(m,"off");if("on"===t)return!0;if("staff"===t&&e&&e.roles&&e.roles.isStaff)return!0;var n=c.b.get(p,[]);return!!("whitelist"===t&&e&&e.id&&n.includes(e.id))}(this.props.user)||"treatment"!==c.q.experiments.getAndTrackAssignment(d.b.EmoteCard)?t:l.createElement("div",{onClick:this.emoteClickHandler,className:"chat-line__message--emote-button","data-test-selector":"emote-button"},t)},t}(l.Component);var f=Object(i.compose)(Object(a.connect)(function(e){return{user:Object(r.e)(e)}}),Object(o.b)(function(e){return{onEmoteClick:e.onShowEmoteCard}}))(g);f.displayName="Emote",n.d(t,!1,function(){}),n.d(t,"a",function(){return f})},XUhy:function(e,t,n){},XXm5:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var i="vod-message",a="mod-dashboard",r="mod-comment"},"Xa2/":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateBitsBadgeTierNotification"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateBitsBadgeTierNotificationInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateBitsBadgeTierNotification"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:152}};n.loc.source={body:"mutation UpdateBitsBadgeTierNotification($input:UpdateBitsBadgeTierNotificationInput!) {\nupdateBitsBadgeTierNotification(input:$input) {\nuser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},XaK9:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsTournamentFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tournament"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"teams"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:70}};n.loc.source={body:"fragment bitsTournamentFragment on Tournament {\nid\nteams {\nid\nname\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},XeJ1:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("nxZp"),a=n("ehEd"),r={normalizeRecord:function(e){return new i.a({id:e._id,name:e.name,logo:new URL(e.logo||a.a),bio:e.bio,createdAt:new Date(e.created_at),displayName:e.display_name,type:e.type,updatedAt:new Date(e.updated_at)})},serializeRecord:function(e){return{_id:e.id,name:e.name,logo:e.logo.toString(),bio:e.bio,created_at:e.createdAt.toISOString(),display_name:e.displayName,type:e.type,updated_at:e.updatedAt.toISOString()}}}},Y3y8:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var i=n("yR8l"),a=n("eDVu"),r=n("0Log"),o=n("/aPz"),s=n("/gva");function l(){return Object(i.a)(s,{name:"currentUserBannedStatusData",options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin||!e.firstPageLoaded}})}function c(){return Object(a.a)(function(e){return{variables:{channelLogin:e.channelLogin},query:s,skip:!e.sessionUser||!e.channelID||!e.firstPageLoaded,topic:e.sessionUser&&e.channelID?Object(o.k)(""+(e.sessionUser&&e.sessionUser.id)):"",type:r.PubsubMessageType.ChatRoomsUserModAction,mutator:function(t,n){return e.sessionUser&&e.channelID&&n.channel&&n.channel.self&&t.data.target_id===e.sessionUser.id&&t.data.channel_id===e.channelID&&("ban"===t.data.action?n.channel.self.banStatus={isPermanent:!0,__typename:"ChatRoomBanStatus"}:"unban"===t.data.action&&(n.channel.self.banStatus={isPermanent:!1,__typename:"ChatRoomBanStatus"})),n}}})}},Y5lD:function(e,t,n){"use strict";function i(e){return Math.floor((Date.now()-new Date(e).getTime())/1e3)}n.d(t,"a",function(){return i})},YXxK:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a});var i=n("B/KH");n.d(t,"b",function(){return i.a});var a,r={Embed:"embed",Web:"web"};!function(e){e.ZeroBits="zero_bits",e.CheeringDisabled="cheering_disabled",e.BitsUnavailable="bits_unavailable",e.BitsCardDisabled="bits_card_disabled",e.AboveMaxEmote="above_max_emote",e.AboveMaxCheer="above_max_cheer",e.BelowMin="below_min",e.BelowMinEmote="below_min_emote",e.InputAboveMaxLength="input_above_max_length",e.InputCommandStart="input_command_start",e.InvalidBitsMessage="invalid_bits_message",e.Canceled="canceled",e.UserBanned="user_banned",e.AutoModMessage="auto_mod_message",e.AutoModPending="auto_mod_pending",e.ChannelBlockedTerms="channel_blocked_terms",e.ChannelIneligible="channel_ineligible",e.InvalidAnonymousMessage="invalid_anonymous_message",e.InvalidEventId="invalid_event_id",e.RequestThrottled="request_throttled",e.Unknown="unknown",e.UserIneligible="user_ineligible",e.UserSuspended="user_suspended",e.ZalgoMessage="zalgo_message",e.DuplicateEventId="duplicate_event_id",e.MissingBitsConfig="missing_bits_config"}(a||(a={}))},Yr1V:function(e,t,n){},Z2sP:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return p});var i,a,r,o=n("pVnL"),s=n.n(o),l=n("q1tI"),c=n("fNzW"),d=n("vCsY"),u=n("hnjF"),m=n("X2PJ");n("ulxC");!function(e){e.Default="",e.Small="tw-progress-bar--sm",e.ExtraSmall="tw-progress-bar--xs"}(i||(i={})),function(e){e.Default="",e.Caution="tw-progress-bar--caution",e.Error="tw-progress-bar--error",e.Success="tw-progress-bar--success"}(a||(a={})),function(e){e.Up="up",e.Down="down"}(r||(r={}));var p=function(e){var t={"tw-progress-bar":!0,"tw-progress-bar--countdown":e.animationDirection===r.Down,"tw-progress-bar--countup":e.animationDirection===r.Up,"tw-progress-bar--inherit":e.inherit,"tw-progress-bar--mask":e.mask,"tw-progress-bar--overlay":e.overlay},n={"tw-progress-bar__fill":!0,"tw-progress-bar__fill--paused":e.paused};e.size&&(t[e.size]=!0),e.status&&(t[e.status]=!0);var i=e.borderRadius||m.b.Large;return l.createElement(m.e,{borderRadius:i},l.createElement("div",s()({className:Object(c.a)(t)},Object(d.a)(e),{role:"progressbar","aria-valuenow":e.value,"aria-valuemin":0,"aria-valuemax":100}),l.createElement(m.e,{borderRadius:i,display:u.d.Block},l.createElement("div",{onAnimationEnd:e.onAnimationEnd,className:Object(c.a)(n),style:{width:e.value+"%",animationDuration:e.animationDuration?e.animationDuration+"s":""},"data-a-target":"tw-progress-bar-animation"}))))};p.displayName="ProgressBar",p.displayName="ProgressBar"},ZEQw:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l});var i="subscribe_to_channel",a="turbo",r="get_bits",o="visit_url",s="none",l="broadcaster"},ZGqV:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelChanlet"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Channel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthorized"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"restriction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exemptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:120}};n.loc.source={body:"fragment channelChanlet on Channel {\nid\nself {\nisAuthorized\n}\nrestriction {\ntype\nexemptions {\nstartsAt\nendsAt\ntype\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ZLqn:function(e,t,n){"use strict";var i=n("q1tI"),a=n("/7QA"),r=n("EuPq"),o=n("X7Ac"),s=n("eJ65"),l=n("EdhP"),c=n("+GjP"),d=n("+80q"),u=n("dEDE"),m=n("sUnt"),p=n("ygYM"),h=n("7uM4"),g=n("hnjF"),f=function(e){var t=Object(c.e)("https://www.twitch.tv/"+e.login,{tt_medium:"live_embed",tt_content:"text_link"}),n=Object(a.d)("Watch live video from {displayName} on www.twitch.tv",{displayName:e.displayName||e.login},"ChannelShareButton"),f=Object(l.b)({channel:e.login},{textLink:{url:t,text:n},allowScrolling:!1,allowFullscreen:!0}),v="https://www.twitch.tv/embed/"+e.login+"/chat",b=Object(l.a)(v,{height:500,width:350,allowFullscreen:!1,allowScrolling:!1});return i.createElement(s.a,null,i.createElement(u.a,{type:u.d.Text,"data-a-target":"share-button",icon:h.b.Share},Object(a.d)("Share","ChannelShareButton")),i.createElement(p.a,{direction:p.b.TopRight,size:p.c.Small,"data-a-target":"share-balloon"},i.createElement(m.a,{padding:1},i.createElement(m.a,{padding:{top:1,bottom:1},display:g.d.Flex,justifyContent:g.h.Between},i.createElement(o.a,{type:o.b.Twitter,text:e.title,"data-a-target":"twitter-share-button"}),i.createElement(o.a,{type:o.b.Facebook,"data-a-target":"facebook-share-button"}),i.createElement(o.a,{type:o.b.VKontakte,"data-a-target":"vkontakte-share-button"}),i.createElement(o.a,{type:o.b.Reddit,text:e.title,"data-a-target":"reddit-share-button"}),i.createElement(o.a,{type:o.b.Copy,"data-a-target":"copy-link-share-button"})),i.createElement(m.a,null,i.createElement(m.a,{padding:{top:1}},i.createElement(d.a,null,Object(a.d)("Embed Channel","ChannelShareButton")),i.createElement(r.a,{value:f})),i.createElement(m.a,{padding:{top:1}},i.createElement(d.a,null,Object(a.d)("Embed Chat","ChannelShareButton")),i.createElement(r.a,{value:b}))))))};n.d(t,"a",function(){return f})},ZUUl:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var i=n("4rCz");function a(e,t){return function(n,a){e({dispatch:n,getState:a},t,i.r.apollo.client)}}function r(e,t){return function(n,a){e({dispatch:n,getState:a},t,i.r.apollo.client,i.q)}}},ZVTe:function(e,t,n){"use strict";var i=n("TSYQ"),a=n("q1tI"),r=n("EE1E"),o=(n("2e6W"),function(e){var t,n=e.userData.color;e.highContrastUsernameColor&&n&&(n="#"+Object(r.a)(n,e.theme));var o=[a.createElement("span",{key:"username-display",className:"chat-author__display-name","data-a-target":"chat-message-username","data-a-user":e.userData.userLogin,"data-test-selector":"message-username",style:{color:n}},e.userData.userDisplayName)];if(e.userData.isIntl){var s=i(((t={})["chat-author__intl-login"]=!e.highlighted,t["chat-author__intl-login--highlighted"]=e.highlighted,t));o.push(a.createElement("span",{key:"username-login",style:{color:n},className:s,"data-test-selector":"message-username-canonical"}," ("+e.userData.userLogin+")"))}return a.createElement("span",{key:e.userData.userID+"-authorlabel"},o)});n.d(t,!1,function(){return"message-username"}),n.d(t,!1,function(){return"message-username-canonical"}),n.d(t,!1,function(){return"chat-author__display-name"}),n.d(t,!1,function(){return"chat-author__intl-login"}),n.d(t,!1,function(){return"chat-author__intl-login--highlighted"}),n.d(t,"a",function(){return o})},ZbA5:function(e,t,n){"use strict";var i,a,r,o,s=n("mrSG"),l=n("TSYQ"),c=n("q1tI"),d=n("/7QA"),u=n("oB8h"),m=n("+80q"),p=n("7uM4"),h=n("Ws8v"),g=n("X2PJ"),f=n("sUnt"),v=n("hnjF"),b=n("rWGy");n("kVMo");!function(e){e.HostingDot="stream-type-indicator__hosting-dot"}(o||(o={}));var k=((i={})[u.a.Live]="stream-type-indicator--live",i[u.a.Premiere]="stream-type-indicator--premiere",i[u.a.Rerun]="stream-type-indicator--rerun",i[u.a.WatchParty]="stream-type-indicator--rerun",i),C=((a={})[u.a.Premiere]=p.b.VideoPremiere,a[u.a.Rerun]=p.b.VideoRerun,a[u.a.WatchParty]=p.b.VideoRerun,a),y=((r={})[u.a.Premiere]=p.c.Live,r[u.a.Rerun]=p.c.Inherit,r[u.a.WatchParty]=p.c.Inherit,r),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.render=function(){return c.createElement(h.a,{className:this.getClassNames(),color:g.c.Overlay,background:g.a.Overlay,padding:{x:.5},borderRadius:g.b.Small,display:v.d.Flex},c.createElement(f.a,{display:v.d.Flex,alignItems:v.b.Center,margin:{right:.5}},this.getIcon()),c.createElement(m.a,{type:m.e.Span},this.getLabel()))},t.prototype.getClassNames=function(){var e={"stream-type-indicator":!0};return e[k[this.props.type]]=!0,l(e)},t.prototype.getIcon=function(){return this.props.hosting?c.createElement(h.a,{borderRadius:g.b.Rounded,className:"stream-type-indicator__hosting-dot","data-test-selector":o.HostingDot}):this.props.type===u.a.Live?c.createElement(f.a,{className:"stream-type-indicator__live-wrapper",display:v.d.Flex,alignItems:v.b.Center},c.createElement(b.a,{status:b.c.Live,size:b.b.Small})):c.createElement(p.a,{asset:C[this.props.type],type:y[this.props.type],width:14,height:14})},t.prototype.getLabel=function(){if(this.props.hosting)return Object(d.d)("Hosting","StreamTypeIndicator");switch(this.props.type){case u.a.Live:return Object(d.d)("LIVE","StreamTypeIndicator");case u.a.Premiere:return Object(d.d)("Premiere","StreamTypeIndicator");case u.a.Rerun:case u.a.WatchParty:return Object(d.d)("Rerun","StreamTypeIndicator");default:return""}},t}(c.Component);n.d(t,!1,function(){return o}),n.d(t,"a",function(){return S})},ZfCj:function(e,t,n){},Zkco:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("q1tI"),a=n("cys1"),r=n("oK83"),o=function(e){var t=e.message,n={disableLinks:!0,forceClipsNetworkRequest:!0,messageAuthorID:e.author.id,messageSourceID:t.id,emoteSourceType:r.a.vod};return i.createElement("span",{key:t.id,style:{color:e.allowActionTextColors&&t.isAction?t.userColor:""}},Object(a.f)(t.tokens,n,!0))}},ZtEv:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o});var i,a,r,o,s=n("0Log");n.d(t,"d",function(){return s.ModerationActions}),function(e){e[e.Message=0]="Message",e[e.ExtensionMessage=1]="ExtensionMessage",e[e.Moderation=2]="Moderation",e[e.ModerationAction=3]="ModerationAction",e[e.TargetedModerationAction=4]="TargetedModerationAction",e[e.AutoMod=5]="AutoMod",e[e.SubscriberOnlyMode=6]="SubscriberOnlyMode",e[e.FollowerOnlyMode=7]="FollowerOnlyMode",e[e.SlowMode=8]="SlowMode",e[e.EmoteOnlyMode=9]="EmoteOnlyMode",e[e.R9KMode=10]="R9KMode",e[e.Connected=11]="Connected",e[e.Disconnected=12]="Disconnected",e[e.Reconnect=13]="Reconnect",e[e.Hosting=14]="Hosting",e[e.Unhost=15]="Unhost",e[e.Hosted=16]="Hosted",e[e.Subscription=17]="Subscription",e[e.Resubscription=18]="Resubscription",e[e.GiftPaidUpgrade=19]="GiftPaidUpgrade",e[e.AnonGiftPaidUpgrade=20]="AnonGiftPaidUpgrade",e[e.PrimePaidUpgrade=21]="PrimePaidUpgrade",e[e.SubGift=22]="SubGift",e[e.AnonSubGift=23]="AnonSubGift",e[e.Clear=24]="Clear",e[e.RoomMods=25]="RoomMods",e[e.RoomState=26]="RoomState",e[e.Raid=27]="Raid",e[e.Unraid=28]="Unraid",e[e.Ritual=29]="Ritual",e[e.Notice=30]="Notice",e[e.Info=31]="Info",e[e.BadgesUpdated=32]="BadgesUpdated",e[e.Purchase=33]="Purchase",e[e.BitsCharity=34]="BitsCharity",e[e.CrateGift=35]="CrateGift",e[e.RewardGift=36]="RewardGift",e[e.SubMysteryGift=37]="SubMysteryGift",e[e.AnonSubMysteryGift=38]="AnonSubMysteryGift",e[e.FirstCheerMessage=39]="FirstCheerMessage",e[e.BitsBadgeTierMessage=40]="BitsBadgeTierMessage",e[e.InlinePrivateCallout=41]="InlinePrivateCallout"}(i||(i={})),function(e){e[e.Post=0]="Post",e[e.Action=1]="Action",e[e.PostWithMention=2]="PostWithMention"}(a||(a={})),function(e){e[e.Ban=0]="Ban",e[e.Timeout=1]="Timeout",e[e.Delete=2]="Delete"}(r||(r={})),function(e){e[e.MessageRejectedPrompt=0]="MessageRejectedPrompt",e[e.CheerMessageRejectedPrompt=1]="CheerMessageRejectedPrompt",e[e.MessageRejected=2]="MessageRejected",e[e.MessageAllowed=3]="MessageAllowed",e[e.MessageDenied=4]="MessageDenied",e[e.CheerMessageDenied=5]="CheerMessageDenied",e[e.CheerMessageTimeout=6]="CheerMessageTimeout",e[e.MessageModApproved=7]="MessageModApproved",e[e.MessageModDenied=8]="MessageModDenied"}(o||(o={}))},ZuCe:function(e,t,n){},ZuiC:function(e,t,n){"use strict";n.d(t,"n",function(){return r}),n.d(t,"t",function(){return o}),n.d(t,"l",function(){return s}),n.d(t,"s",function(){return l}),n.d(t,"m",function(){return c}),n.d(t,"r",function(){return d}),n.d(t,"o",function(){return u}),n.d(t,"u",function(){return m}),n.d(t,"p",function(){return p}),n.d(t,"v",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"z",function(){return f}),n.d(t,"e",function(){return v}),n.d(t,"A",function(){return b}),n.d(t,"f",function(){return k}),n.d(t,"B",function(){return C}),n.d(t,"c",function(){return y}),n.d(t,"y",function(){return S}),n.d(t,"k",function(){return E}),n.d(t,"q",function(){return N}),n.d(t,"i",function(){return w}),n.d(t,"E",function(){return _}),n.d(t,"h",function(){return D}),n.d(t,"D",function(){return O}),n.d(t,"g",function(){return I}),n.d(t,"C",function(){return T}),n.d(t,"a",function(){return M}),n.d(t,"w",function(){return L}),n.d(t,"j",function(){return F}),n.d(t,"F",function(){return x}),n.d(t,"b",function(){return j}),n.d(t,"x",function(){return A});var i=n("mrSG"),a=n("/7QA"),r="vodChat.comments.DELETED_SUCCESS",o=function(e){return i.__assign({type:r},e)},s="vodChat.comments.CREATED_SUCCESS",l=function(e){return i.__assign({type:s},e)},c="vodChat.comments.CREATE_FAILED",d=function(e){return{type:c,createError:e}},u="vodChat.comments.DISPLAY_ERROR",m=function(e){return{type:u,errorMessage:e}},p="vodChat.comments.UPDATED_SUCCESS",h=function(e){return i.__assign({type:p},e)},g="vodChat.comments.CURSOR_RECEIVED",f=function(e){return i.__assign({type:g},e)},v="vodChat.comments.OFFSET_RECEIVED",b=function(e){return i.__assign({type:v},e)},k="vodChat.comments.QUERY_FAILED",C=function(){return{type:k}},y="vodChat.comments.CLEARED",S=function(){return{type:y}},E="vodChat.comments.COOLDOWN_ENDED",N=function(){return{type:E}},w="vodChat.comments.SYNC_ENABLED",_=function(){return{type:w}},D="vodChat.comments.SYNC_DISABLED",O=function(){return{type:D}},I="vodChat.comments.REPLAY_FILTER_CHANGED",T=function(e){return a.n.set("videoChat.is_replay_mode",e),{type:I,isReplayFilterOn:e}},M="vodChat.comments.CHAT_REPLAY_ERROR_HIDE",L=function(){return{type:M}},F="vodChat.comments.TIMESTAMP_MODE_CHANGED",x=function(e){return a.n.set("videoChat.hide_timestamps",e),{type:F,hideTimestamps:e}},j="vodChat.comments.REQUEST_CHAT_SETTINGS",A=function(){return{type:j,isReplayFilterOn:a.n.get("videoChat.is_replay_mode",!1),hideTimestamps:a.n.get("videoChat.hide_timestamps",!1)}}},a1OF:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return g});var i=n("mrSG"),a=n("/7QA"),r=n("oe5X"),o=n("0FG4"),s=n("kRBY"),l=n("60o1"),c=["#FF0000","#0000FF","#008000","#B22222","#FF7F50","#9ACD32","#FF4500","#2E8B57","#DAA520","#D2691E","#5F9EA0","#1E90FF","#FF69B4","#8A2BE2","#00FF7F"],d={};function u(e,t,n,a,r,o,s){void 0===a&&(a=null),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=!1);var c=Object(l.a)(t.displayName,t.username);return{badges:t.badges||{},badgeDynamicData:t.badgeDynamicData||{},bits:t.bits,user:i.__assign({},c,{userLogin:t.username,userID:t.userID,userType:t.userType,color:t.color||m(t.userID)}),messageParts:p(e,t.emotes||{},t.bits,n,t.username,a||void 0),deleted:r,banned:s,hidden:o,timestamp:Date.now()}}function m(e,t){return void 0===t&&(t=15),"number"!=typeof d[e]&&(d[e]=Math.floor(Math.random()*t)),c[d[e]]}function p(e,t,n,i,l,c){var d=Object(s.e)(a.q.store.getState()),u={cheers:n?i:void 0,emotes:{type:o.a.Position,map:t},links:{parseClips:!0,parseVods:!0},mentions:{senderLogin:l,sessionUser:d},flags:c};return Object(r.a)(e,u)}function h(e){return e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)}function g(e,t){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/"+Math.min(Math.ceil(t),3)+".0"}},a2Ot:function(e,t,n){},a2UF:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),a=n("yR8l"),r=n("Pub/"),o=n("HzXE"),s=n("1Rv/");function l(e){var t=this;return Object(a.a)(s,{props:function(n){return{unbanUserMutation:function(a){return i.__awaiter(t,void 0,void 0,function(){var t;return i.__generator(this,function(s){switch(s.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate||!t)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:a}},update:function(e,n){return function(e,t,n){if(t&&t.data&&t.data.unbanUserFromChatRoom&&t.data.unbanUserFromChatRoom.ban&&t.data.unbanUserFromChatRoom.ban.bannedUser&&t.data.unbanUserFromChatRoom.ban.bannedUser.id){var a=Object(r.a)(e,n,t.data.unbanUserFromChatRoom.ban.bannedUser.id);if(!a)return;e.writeQuery({query:o,variables:{targetUserID:t.data.unbanUserFromChatRoom.ban.bannedUser.id,channelID:n},data:i.__assign({},a,{chatRoomBanStatus:null})})}}(e,n,t)}})];case 2:return[2,s.sent().data];case 3:throw s.sent(),new Error("Unable to unban user");case 4:return[3,6];case 5:throw new Error("Unban user mutation is not ready");case 6:return[2]}})})}}}})}},a5fV:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s});var i=n("/7QA"),a=n("W8Fi");function r(e,t){return e/Math.pow(10,t)}function o(e,t){return Object(i.f)(e,{style:"currency",currency:t})}function s(e,t){return void 0===t&&(t=!1),Object(a.g)([e])||Object(a.e)([e])?Object(a.c)(e,t):e.priceInfo?o(r(e.priceInfo.total,e.priceInfo.exponent),e.priceInfo.currency):e.price}},aF6k:function(e,t,n){"use strict";function i(e){var t=Math.random().toString(36).substring(2,6);return e+"-"+Date.now()+"-"+t}n.d(t,"a",function(){return i})},ahza:function(e,t,n){"use strict";var i=n("cr+I"),a=n("b6Yk");var r=n("pU2t");n.d(t,"a",function(){return s}),n.d(t,"b",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"h",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return v}),n.d(t,"f",function(){return b});var o="content_offset_seconds",s="cursor",l="comment_id";function c(e){return"/v5/videos/"+e+"/comments"}function d(e){return u(e).toString()+"/replies"}function u(e){return"/v5/videos/comments/"+e}function m(e){var t;t=f(e)?d(e.parentId):c(e.contentId);var n={body:Object(r.g)(e)};return a.a.post(t,n)}function p(e){try{if(function(e){return"commentID"in e}(e))return function(e){var t={};void 0!==e.cursor&&(t[s]=e.cursor);var n=d(e.commentID)+"?"+i.stringify(t);return a.a.getOrThrow(n).then(function(e){return Object(r.e)(e.body)})}(e);var t={};v(e)?t[s]=e.cursor:b(e)&&(t[o]=""+e.offset,void 0!==e.highlightedMessageID&&(t[l]=e.highlightedMessageID));var n=c(e.videoID)+"?"+i.stringify(t);return a.a.getOrThrow(n).then(function(t){return Object(r.d)(t.body,e.bitsConfig)})}catch(e){return Promise.reject(e)}}function h(e){var t=u(e.comment.id),n={body:{state:e.state}};return a.a.putOrThrow(t,n).then(function(t){return Object(r.f)(t.body,e.comment)})}function g(e){var t=u(e.id);return a.a.delete(t)}function f(e){return"parentId"in e}function v(e){return"cursor"in e}function b(e){return"offset"in e}},amaQ:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return d}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return m});var i,a,r,o,s=n("mrSG"),l=n("/7QA"),c=n("2xye");!function(e){e.MegacheerEmoteRecipient="megacheer_emote_recipient",e.Resub="re_sub",e.PinnedResub="pinned_re_sub",e.CheerBadgeGrant="cheer_badge_grant",e.CommunitySubGift="community_sub_gift"}(i||(i={})),function(e){e.Dismiss="dismiss",e.Remind="remind_later",e.Pin="pin_callout",e.SkipMonthlyAlert="skip_monthly_alert",e.Message="chat_message_send"}(a||(a={})),function(e){e.Share="click_share",e.Options="options_menu",e.Thank="click_thank"}(r||(r={})),function(e){e.PrivateCallout="private_callout",e.Chat="private_callout_chat"}(o||(o={}));var d=function(e){l.p.track(c.SpadeEventType.PrivateCalloutAction,s.__assign({},p(e),{action:e.action,ui_context:e.uiContext,msg_body:e.msgBody,used_prompt:e.usedPrompt}))},u=function(e){l.p.track(c.SpadeEventType.PrivateCalloutClick,s.__assign({},p(e),{click_type:e.clickType,ui_context:e.uiContext}))},m=function(e){l.p.track(c.SpadeEventType.PrivateCalloutImpression,s.__assign({},p(e),{has_cta:e.hasCTA}))};function p(e){return{user_id:e.userID,user_login:e.userLogin,channel_id:e.channelID,channel_login:e.channelLogin,callout_type:e.calloutType,private_callout_sid:e.privateCalloutSID}}},axcf:function(e,t,n){},b5C3:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("q1tI"),a=n("vHGB"),r=function(e){var t=e.badgesToRender,n=e.badgeSets;if(!t)return null;var r,o=[];r=t,Array.isArray(r)?o=t.map(function(t){var r=n.getBadge(t.setID,t.version);return null===r?null:e.usesSchemaBadges?i.createElement(a.a,{key:r.setID+"/"+r.version,schemaBadge:r}):i.createElement(a.a,{key:r.setID+"/"+r.version,badge:r})}):function(e){return!Array.isArray(e)}(t)&&(o=Object.keys(t).map(function(r){var o=t[r],s=n.getBadge(r,o);if(null===s)return null;var l=e.dynamicData&&e.dynamicData[s.setID];return e.usesSchemaBadges?i.createElement(a.a,{key:s.setID+"/"+s.version,schemaBadge:s,dynamicData:l}):i.createElement(a.a,{key:s.setID+"/"+s.version,badge:s,dynamicData:l})}));var s=o.filter(function(e){return null!==e});return i.createElement("span",null,s)};r.displayName="BadgeList"},b6Yk:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),a=n("/7QA"),r=n("kRBY"),o=function(){function e(){}return e.get=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"GET"}),n)];case 1:return[2,a.sent()]}})})},e.getOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"GET"}),n)];case 1:return[2,a.sent()]}})})},e.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"PUT"}),n)];case 1:return[2,a.sent()]}})})},e.putOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"PUT"}),n)];case 1:return[2,a.sent()]}})})},e.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"POST"}),n)];case 1:return[2,a.sent()]}})})},e.postOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"POST"}),n)];case 1:return[2,a.sent()]}})})},e.delete=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.request(e,i.__assign({},t,{method:"DELETE"}),n)];case 1:return[2,a.sent()]}})})},e.deleteOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(a){switch(a.label){case 0:return[4,this.requestOrThrow(e,i.__assign({},t,{method:"DELETE"}),n)];case 1:return[2,a.sent()]}})})},e.request=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){var a,r,o,s;return i.__generator(this,function(l){switch(l.label){case 0:return t=this.constructOptions(t,n),a=t.headers?t.headers["Content-Type"]:void 0,r=this.serialize(t.body,a),o=i.__assign({},t,{body:r}),[4,this._fetch(e,o)];case 1:return s=l.sent(),[4,this.constructLegacyAPIResponse(s)];case 2:return[2,l.sent()]}})})},e.requestOrThrow=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.__awaiter(this,void 0,Promise,function(){var a;return i.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.request(e,t,n)];case 1:if((a=r.sent()).requestError)throw a.requestError;if(a.error)throw new Error("Error while sending legacy-api request: "+a.error.status+" - "+a.error.message);return[2,i.__assign({},a,{body:a.body})];case 2:throw r.sent();case 3:return[2]}})})},e.getAPIURL=function(e){return new URL(e,a.q.config.apiBaseURL)},e.constructLegacyAPIResponse=function(e){return i.__awaiter(this,void 0,Promise,function(){var t,n,a,r;return i.__generator(this,function(i){switch(i.label){case 0:t={status:e.status},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.json()];case 2:return n=i.sent(),e.ok?t.body=n:t.error=n,[3,4];case 3:return a=i.sent(),e.headers&&e.headers.get&&(r=e.headers.get("Content-Type"))&&-1!==r.indexOf("application/json")&&(t.requestError=a),[3,4];case 4:return[2,t]}})})},e._fetch=function(e,t){return void 0===t&&(t={}),i.__awaiter(this,void 0,Promise,function(){return i.__generator(this,function(n){switch(n.label){case 0:return[4,fetch(this.getAPIURL(e).toString(),t)];case 1:return[2,n.sent()]}})})},e.constructOptions=function(e,t){return e=Object.assign({},e,{headers:i.__assign({},this.getDefaultHeaders(e,t),e.headers)})},e.serialize=function(e,t){return"application/json; charset=UTF-8"===t?JSON.stringify(e):"string"==typeof e?e:e&&FormData.prototype.isPrototypeOf(e)?e:e?(this.logger.error(new Error("Could not serialize this request body for the content-type provided."),"attempting to serialize object with a non-JSON content-type",{contentType:t}),null):null},e.getDefaultHeaders=function(e,t){var n=a.q.store.getState(),i={Accept:"application/vnd.twitchtv.v"+(t.version||5)+"+json; charset=UTF-8","Accept-Language":"en-us","Client-ID":a.q.config.legacyClientID,"X-Requested-With":"XMLHttpRequest"};e.body&&FormData.prototype.isPrototypeOf(e.body)||(i["Content-Type"]="application/json; charset=UTF-8");var o=Object(r.e)(n);return o&&(i.Authorization="OAuth "+o.authToken,o.legacyCSRFToken&&(i["Twitch-Api-Token"]=o.legacyCSRFToken)),t.excludeHeaders&&t.excludeHeaders.forEach(function(e){i[e]&&delete i[e]}),i},e.logger=a.q.logger.withCategory("legacy-api"),e}()},bRMw:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s});var i=n("/7QA"),a=n("kRBY"),r="cc_v2_whitelist";function o(e,t){var n=i.b.get(e,[]),r=i.q.store.getState();return n.includes(t)||n.includes(t+"-staff")&&Object(a.g)(r)||!!(n.includes(t+"-staff")&&r.session&&r.session.user&&r.session.user.login===t)}function s(e){return o(r,e)}},bTcf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoShareBox_CollectionTrackingMeta"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"creatorID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"creatorID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPartner"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:117}};n.loc.source={body:"query VideoShareBox_CollectionTrackingMeta($creatorID: ID!) {\nuser(id: $creatorID) {\nid\nlogin\nroles {\nisPartner\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},bdHe:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("q1tI"),a=n("zjIR"),r=n("EJeP"),o=n("sUnt"),s=n("uOxs"),l=function(){for(var e=[],t=0;t<r.REQUEST_LIMIT;t++)e.push(i.createElement(o.a,{margin:{bottom:2},key:t},i.createElement(a.a,null)));return i.createElement(o.a,{fullWidth:!0,padding:{x:3,y:2}},i.createElement(s.a,{placeholderItems:r.REQUEST_LIMIT,center:!0,gutterSize:s.c.Small,childWidth:s.b.Large},e))}},bfuM:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("gcd7"),s=n("fezU"),l=n("oK83"),c=n("NNSq"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleUserCardCommand=function(e){return t.openUserCard(e)},t.openUserCard=function(e){return{deferred:new Promise(function(n,a){return i.__awaiter(t,void 0,void 0,function(){return i.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Object(c.a)(e)];case 1:return t.sent()?(this.props.onUserCommand(e,l.b.user_command,""),[3,3]):[2,n({notice:Object(r.d)("No user matching that login.","UserCardCommandHandler")})];case 2:return t.sent(),[2,a({})];case 3:return[2,n({})]}})})})}},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(o.a,{channelLogin:this.props.channelLogin,command:"user",handler:this.handleUserCardCommand})},t}(a.Component);var u=Object(s.b)(function(e){return{onUserCommand:e.onShowViewerCard}})(d);n.d(t,!1,function(){return d}),n.d(t,"a",function(){return u})},bhOa:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("gcd7"),s=n("ygQa"),l=n("WytW"),c=n("sUnt"),d=n("hnjF"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateChatColor=function(e){var n=Object(l.j)("/color "+e);if(n&&n.color){var i=n.color;return{deferred:t.props.updateChatColorMutation(i).then(function(){return{notice:Object(r.d)("Your color has been changed.","ColorCommandHandler")}}).catch(function(){return{notice:Object(r.d)("Unable to change your color.","ColorCommandHandler")}})}}return{deferred:Promise.resolve({notice:Object(r.d)('Usage: "/color [color]" - Change your username color. Color must be in hex (#000000) or one of the following: Blue, BlueViolet, CadetBlue, Chocolate, Coral, DodgerBlue, Firebrick, GoldenRod, Green, HotPink, OrangeRed, Red, SeaGreen, SpringGreen, YellowGreen.',"ColorCommandHandler")})}},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(c.a,{display:d.d.Hide},a.createElement(o.a,{channelLogin:this.props.channelLogin,command:"color",handler:this.updateChatColor}))},t}(a.Component),m=Object(s.a)()(u);n.d(t,"a",function(){return m})},br9A:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("I6K6"),s=n("RuiO"),l={BuyContinueSub:"buy_continue_sub",BuyCustomMysteryGift:"buy_custom_mystery_gift",BuyGiftSub:"buy_gift_sub",BuyGiftToPaidUpgrade:"buy_gift_to_paid_upgrade",BuyMysteryGift:"buy_mystery_gift",BuyPaidUpgrade:"buy_paid_upgrade",BuyPrimeToPaid:"buy_prime_to_paid",ChangeTier:"change_tier",ClickAnonymousGiftCheckbox:"anonymous_gift_click",ClickBack:"back_top_level",ClickCancelAndRefund:"click_cancel_and_refund",ClickCancelPaidUpgrade:"click_cancel_paid_upgrade",ClickChangePaymentMethod:"click_change_payment_method",ClickChangeSubTier:"click_change_sub_tier",ClickCheckout:"click_checkout_button",ClickDisableGift:"click_disable_gift_button",ClickDNRSub:"click_dnr_sub_button",ClickGiftSubOptions:"gift_options_click",ClickMoreSubOptions:"more_options_click",ClickPaidUpgrade:"click_paid_upgrade",ClickPrimeFAQ:"click_prime_faq",ClickResubscribe:"click_resubscribe",ClickSignupForPrime:"click_signup_for_prime",CloseSubMenu:"close_subscribe_menu",GiftASub:"gift_a_sub",OpenSubMenu:"open_subscribe_menu",SubWithPrime:"samus_spend_credit"};function c(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,l,c,d,u,m,p,h,g,f,v,b;return i.__generator(this,function(i){switch(i.label){case 0:t=a.p.getVideoPlayerTrackingData().vodID,n=!!t,l={channelID:e.channelID,withVideo:!1},n&&(l.withVideo=!0,l.videoID=t),c=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a.q.apollo.client.query({query:s,variables:l})];case 2:return c=i.sent(),[3,4];case 3:return d=i.sent(),a.k.warn(d,"Failed to make query for channel info in FollowEvent reporting.",{channelID:e.channelID}),[3,4];case 4:return u=c&&c.data&&c.data.user||null,c&&!u&&a.k.warn("Query for channel info in SubEvent reporting returned no data.",{channelID:e.channelID}),m=null,c&&n&&((p=c&&c.data&&c.data.video)?m=Object(o.a)(p.broadcastType):a.k.warn("Query for video info in SubEvent reporting returned no data.",{currentVideoID:t})),h=u&&u.self,g=h?!!h.subscriptionBenefit:null,f=h&&h.subscriptionBenefit&&h.subscriptionBenefit.purchasedWithPrime||!1,v=h?h.canPrimeSubscribe:null,b={action:e.action,button_cta:e.buttonCTA,can_subscribe:v,channel:e.channelLogin,channel_id:e.channelID,checkout_button_tier:e.checkoutButtonTier,cumulative_tenure_months:e.cumulativeTenureMonths,days_to_next_tenure_anniversary:e.daysToNextTenureAnniversary||null,has_sub_credit:e.hasSubCredit||null,host_channel:e.hostChannelLogin,host_channel_id:e.hostChannelID,is_anonymous:e.isAnonymous,is_menu_open:e.isMenuOpen||null,is_single_month:e.isSingleMonth,is_subscribed:g,is_subscribed_current_tier:h&&h.subscriptionBenefit&&h.subscriptionBenefit.tier,mystery_gift_count:e.mysteryGiftCount||null,sub_location:e.sub_location,sub_recipient:e.giftRecipient||null,modal:e.modal,modal_level:e.modalLevel||"",show_prime_content:e.showPrimeContent||!1,show_resub:u?v&&f:null,streak_number:e.streakNumber||null,vod_id:t,vod_type:m,viewport_height:window.innerHeight,viewport_width:window.innerWidth},a.p.track(r.SpadeEventType.Subscription,b),[2]}})})}},buTd:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.BitsBadgeTier="bits-badge-tier",e.ShareResub="share-resub",e.ThankSubGifter="thank-sub-gifter"}(i||(i={}))},"c+1r":function(e,t,n){},cERj:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i,a=n("mrSG"),r=n("q1tI"),o=n("9C/b"),s=n("/7QA"),l=n("eJ65"),c=n("+GjP"),d=n("vRsq"),u=n("UNiU"),m=n("sUnt"),p=n("+80q"),h=n("dEDE"),g=n("ygYM"),f=n("i4Ys");!function(e){e.ButtonText="button-text",e.FilterText="filter-text"}(i||(i={}));var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=this.getFilters(),t=e.find(function(e){return!!e.selected});return r.createElement(m.a,{padding:{right:1}},r.createElement(m.a,{padding:{bottom:.5}},r.createElement(p.a,{bold:!0},Object(s.d)("Showing","VideoFilter"))),r.createElement(l.a,{hideBalloonOnInsideClick:!0},r.createElement(h.a,{dropdown:!0,type:h.d.Hollow,"data-test-selector":i.ButtonText,"data-a-target":"video-type-filter-dropdown"},t?t.label:e[0].label),r.createElement(g.a,{noTail:!0,direction:g.b.Bottom},this.renderFilterList())))},t.prototype.renderFilterList=function(){return this.getFilters().map(this.renderFilter.bind(this))},t.prototype.renderFilter=function(e){var t=!!e.selected;return r.createElement(f.a,{key:e.label,linkTo:t?this.props.location:this.filterLink(e.filter),selected:t,"data-a-target":"video-type-filter-"+e.filter},r.createElement(m.a,{padding:{x:1,y:.5},"data-test-selector":i.FilterText},e.label))},t.prototype.getFilters=function(){var e=[{label:Object(s.d)("All Videos","VideoFilter2"),filter:d.e.All},{label:Object(s.d)("Past Broadcasts","VideoFilter2"),filter:d.e.PastBroadcasts},{label:Object(s.d)("Highlights","VideoFilter2"),filter:d.e.Highlights},{label:Object(s.d)("Clips","VideoFilter2"),filter:d.e.Clips},{label:Object(s.d)("Uploads","VideoFilter2"),filter:d.e.Uploads},{label:Object(s.d)("Past Premieres","VideoFilter2"),filter:d.e.PastPremieres},{label:Object(s.d)("Collections","VideoFilter2"),filter:d.e.Collections}],t=Object(u.a)();t&&e.unshift({label:Object(s.d)("Featured","CustomShelves"),filter:d.e.Featured});var n;return n=Object(d.w)(this.props.location.search),e.forEach(function(e){!n&&t&&e.filter===d.e.Featured?e.selected=!0:n||t||e.filter!==d.e.All?n&&n===e.filter&&(e.selected=!0):e.selected=!0}),e},t.prototype.filterLink=function(e){var t;return e?Object(d.k)(this.props.channelLogin,this.props,((t={})[d.c]=e,t)):Object(c.c)(this.props.location,d.c)},t}(r.Component),b=Object(o.a)(v)},cMjZ:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("o4DC");function a(e){return e&&Object(i.c)(e)||""}},cRsL:function(e,t,n){},cnlr:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("Lmqf"),d=n.n(c),u=n("yR8l"),m=n("1/iK"),p=n("y5D0"),h=n("ugtu"),g=n("D7An");!function(e){e.Learn="learn",e.Support="support",e.LiveUp="liveup",e.Recommendation="rec",e.Bullet="bullet"}(i||(i={}));var f,v,b=n("+80q"),k=n("hnjF"),C=n("sUnt"),y=n("7uM4"),S=n("X2PJ"),E=function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.state={upsellCenterChannelsAssignment:n.props.showDefault?null:(t=l.q.experiments.getAndTrackAssignment(g.b.WebSideNavUpsellCenterChannels),t===i.Learn||t===i.Support||t===i.LiveUp||t===i.Recommendation||t===i.Bullet?t:null)},n}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(C.a,{margin:{y:1}},this.renderText())},t.prototype.renderText=function(){if(!this.props.data||this.props.showDefault||!this.state.upsellCenterChannelsAssignment)return this.renderDefault();switch(this.state.upsellCenterChannelsAssignment){case i.Learn:return this.renderTextContent(Object(l.d)("Want to master <x:bold>{game}</x:bold>?",{game:this.props.data.game,"x:bold":h.k},"UpsellCenterText"),Object(l.d)("Sign up to learn from the best.","UpsellCenterText"));case i.Support:return this.renderTextContent(Object(l.d)("Sign up and follow to support <x:bold>{name}</x:bold> and all your favorite streamers!",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"));case i.LiveUp:return this.renderTextContent(Object(l.d)("Late to the show?","UpsellCenterText"),Object(l.d)("Sign up and get notifications next time <x:bold>{name}</x:bold> goes live.",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"));case i.Recommendation:return this.renderTextContent(Object(l.d)("Discover more streamers like <x:bold>{name}</x:bold>!",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"),Object(l.d)("Sign up to see which channels we've picked just for you.","UpsellCenterText"));case i.Bullet:return this.renderBulletPoints(Object(l.d)("Sign up to experience the best of <x:bold>{name}</x:bold>:",{name:this.props.data.channelDisplayName,"x:bold":h.k},"UpsellCenterText"),[Object(l.d)("Chat with other fans","UpsellCenterText"),Object(l.d)("Capture your favorite moments","UpsellCenterText"),Object(l.d)("Watch in Dark Mode!","UpsellCenterText")]);default:return this.renderDefault()}},t.prototype.renderDefault=function(){return this.renderTextContent(Object(l.d)("Join the Twitch community!","UpsellCenterText"),Object(l.d)("Discover the best live streams anywhere.","UpsellCenterText"))},t.prototype.renderTextContent=function(e,t){return r.createElement(r.Fragment,null,r.createElement(b.a,{color:S.c.Base,fontSize:S.d.Size4},e),r.createElement(b.a,{color:S.c.Alt2,fontSize:S.d.Size5},t))},t.prototype.renderBulletPoints=function(e,t){var n=t.map(function(e,t){return r.createElement(C.a,{key:"upsell-center-text-"+t,display:k.d.Flex,flexDirection:k.e.Row,alignItems:k.b.Start},r.createElement(y.a,{type:y.c.Alt2,asset:y.b.Check}),r.createElement(C.a,{margin:{left:1},textAlign:k.k.Left},r.createElement(b.a,{color:S.c.Alt2,fontSize:S.d.Size6},e)))});return r.createElement(r.Fragment,null,r.createElement(b.a,{color:S.c.Base,fontSize:S.d.Size4},e),r.createElement(C.a,{margin:{top:1}},n))},t}(r.Component),N=n("2xye");!function(e){e.SideNav="sidenav"}(f||(f={})),function(e){e.Upsell="upsell"}(v||(v={}));var w=n("uG/k"),_=n("Ws8v"),D=n("HH5h"),O=n("dEDE"),I=n("Ve5Q"),T=(n("wqI2"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.impressionEventFired=!1,t.signup=function(){var e,n;n=a.__assign({section:f.SideNav,click_subsection:v.Upsell},e),l.p.track(N.SpadeEventType.ItemClick,n),t.props.signup()},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.trackImpression()},t.prototype.componentDidUpdate=function(){this.trackImpression()},t.prototype.render=function(){return r.createElement(_.a,{background:S.a.AccentAlt2,display:k.d.Flex,flexDirection:k.e.Column,padding:{y:2,x:1},margin:1,borderRadius:S.b.Large},this.renderImage(),r.createElement(C.a,{textAlign:k.k.Center},this.renderText(),r.createElement(O.a,{onClick:this.signup,size:O.b.Large},r.createElement(C.a,{padding:{x:1}},r.createElement(b.a,{color:S.c.Base},Object(l.d)("Sign up","UpsellCenter"))))))},t.prototype.renderText=function(){if(!this.props.channelLogin)return r.createElement(E,{showDefault:!0});if(this.props.data&&this.props.data.user){var e={game:this.props.data.user.broadcastSettings&&this.props.data.user.broadcastSettings.game&&this.props.data.user.broadcastSettings.game.displayName||"",channelDisplayName:this.props.data.user.displayName||""};return r.createElement(E,{data:e})}},t.prototype.renderImage=function(){var e=r.createElement(w.a,{alt:Object(l.d)("Upsell Center","UpsellCenter"),src:d.a});return this.props.channelLogin&&this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL?r.createElement(C.a,{position:k.j.Relative},r.createElement(C.a,{className:"upsell-center__avatar",position:k.j.Absolute,zIndex:k.n.Above},r.createElement(D.a,{src:this.props.data.user.profileImageURL,alt:Object(l.d)("{displayName}'s Profile Image",{displayName:this.props.data.user.displayName||""},"UpsellCenter"),borderRadius:S.b.Large,size:40})),e):e},t.prototype.trackImpression=function(){var e,t;this.impressionEventFired||(t=a.__assign({section:f.SideNav},e),l.p.track(N.SpadeEventType.ItemDisplay,t),this.impressionEventFired=!0)},t}(r.PureComponent));var M=Object(s.compose)(Object(u.a)(I,{options:function(e){return{variables:{login:e.channelLogin||""}}},skip:function(e){return!e.channelLogin}}),Object(o.connect)(null,function(e){return Object(s.bindActionCreators)({signup:function(){return Object(p.g)(m.a.SideNavUpsellCenter)}},e)}))(T),L=n("kRBY"),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return this.props.isLoggedIn||this.props.collapsed?null:r.createElement(M,a.__assign({},this.props))},t}(r.PureComponent);var x=Object(o.connect)(function(e){return{collapsed:!e.ui.sideNavExpanded,isLoggedIn:Object(L.f)(e)}})(F);n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return T}),n.d(t,!1,function(){return F}),n.d(t,"a",function(){return x})},cpJf:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r}),function(e){e.Chat="stream_chat",e.Feeds="feeds",e.Room="chatroom",e.Whisper="whisper",e.VodChat="vod-chat"}(i||(i={}));var a={TriHard:{count:196568036},Kappa:{count:192158118},"4Head":{count:155758710},PogChamp:{count:151485090},cmonBruh:{count:146352878},BibleThump:{count:56472964},WutFace:{count:45069031},Kreygasm:{count:41387580},DansGame:{count:38097659},hi5F:{count:34986404},SMOrc:{count:34734484},KappaPride:{count:34262839},VoHiYo:{count:27886434},SwiftRage:{count:24561900},ResidentSleeper:{count:24438298},EleGiggle:{count:19891526},FailFish:{count:19118343},NotLikeThis:{count:18802905},Keepo:{count:18351415},BabyRage:{count:18220906},MingLee:{count:18026207},pbfSSH:{count:16911241},forsenE:{count:14960299},HeyGuys:{count:14851569},ANELE:{count:14648986},PJSalt:{count:14438861}},r=["354","49106","4339","48","25","55338","70433","1902","68856","81103","76171","27509"]},cr2a:function(e,t,n){},csJo:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Collection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCollection"},directives:[]}]}}]}}],loc:{start:0,end:310}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-collection.gql"\nquery ChannelRoot_Collection(\n$collectionID: ID!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\ncollection(id: $collectionID) {\n...channelCollection\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("NJiF").definitions)),i.definitions=i.definitions.concat(r(n("vtET").definitions)),e.exports=i},cw0r:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("wUQP"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return Object(r.c)(this.props.name)?this.props.children:null},t}(a.Component);n.d(t,"a",function(){return o})},cys1:function(e,t,n){"use strict";var i,a=n("q1tI"),r=n("/7QA"),o=n("gvGA"),s=n("5zf8"),l=n("4rCz"),c=n("x0+1"),d=n("XRPh"),u=function(e){var t=e.displayText,n=e.url;return a.createElement("a",{className:"link-fragment",href:n,target:"_blank",rel:"noreferrer noopener"},t)},m=n("TSYQ"),p=n("RcPG"),h=(n("VN3V"),function(e){var t,n=e.content,i=e.highlightType,r=m("text-fragment",((t={})["text-fragment--moderated-highlight"]=i===p.a.ModeratedText,t));return a.createElement("span",{className:r,"data-a-target":"chat-message-text"},n)}),g=n("mrSG"),f=n("oJmH"),v=n("+GjP"),b=n("2xye"),k=n("L/cU"),C=n("fPaz"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasImageLoadingError:!1},t.handleImageError=function(){t.setState({hasImageLoadingError:!0})},t}return g.__extends(t,e),t.prototype.componentWillReceiveProps=function(){this.setState({hasImageLoadingError:!1})},t.prototype.render=function(){var e=r.a.defaultStreamPreviewURL;return!this.state.hasImageLoadingError&&this.props.imageURL&&(e=this.props.imageURL),a.createElement(k.a,{aspect:C.c.Aspect16x9,alt:this.props.altText,src:e,onError:this.handleImageError})},t}(a.Component),S=n("hnjF"),E=n("+80q"),N=n("Ws8v"),w=n("X2PJ"),_=n("PL8s"),D=n("sUnt"),O=n("Jsra"),I=(n("Epr8"),"https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0"),T={ERROR:"chat-card-error",TITLE:"chat-card-title",DESCRIPTION:"chat-card-description"},M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderErrorCard=function(){var e=a.createElement("img",{"data-test-selector":T.ERROR,src:I,className:"chat-card__error-img"});return t.renderCardContent(e,t.props.error)},t.renderCardContent=function(e,t){var n,i;return t?(n=a.createElement(E.a,{type:E.e.Span,fontSize:w.d.Size5,"data-test-selector":T.TITLE,title:t.title},t.title),i=a.createElement(E.a,{type:E.e.Span,fontSize:w.d.Size6,color:w.c.Alt2,"data-test-selector":T.DESCRIPTION},t.description)):(e=a.createElement(_.a,{overlay:!0}),n=a.createElement(_.a,{width:180}),i=a.createElement(_.a,{width:120})),a.createElement(N.a,{background:w.a.Base,display:S.d.Flex,flexWrap:S.f.NoWrap,padding:.5},a.createElement(N.a,{className:"chat-card__preview-img",background:w.a.Alt2,display:S.d.Flex,alignItems:S.b.Center,justifyContent:S.h.Center,flexShrink:0},e),a.createElement(D.a,{display:S.d.Flex,alignItems:S.b.Center,overflow:S.i.Hidden},a.createElement(D.a,{padding:{left:1},fullWidth:!0},a.createElement(D.a,{className:"chat-card__title",ellipsis:!0},n),a.createElement(D.a,{ellipsis:!0},i))))},t}return g.__extends(t,e),t.prototype.render=function(){var e;if(this.props.error)e=this.renderErrorCard();else if(this.props.data){var t=Object(v.e)(this.props.data.contentURL,{tt_medium:b.PageviewMedium.Chat,tt_content:b.PageviewContent.ChatCard}),n=a.createElement(y,{altText:this.props.data.title,imageURL:this.props.data.previewImageURL});e=a.createElement(O.a,{className:"chat-card__link",to:t,targetBlank:!0},this.renderCardContent(n,{title:this.props.data.title,description:this.props.data.description}))}else e=this.renderCardContent();return a.createElement(N.a,{elevation:1,margin:{top:.5}},e)},t}(a.Component),L=n("SceP"),F={isTimedOut:!1},x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=F,t.timeoutID=null,t}return g.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.data.clip||(this.timeoutID=setTimeout(function(){e.setState({isTimedOut:!0})},5e3))},t.prototype.componentWillReceiveProps=function(e){!this.props.data.clip&&e.data.clip&&(this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null),this.setState({isTimedOut:!1}))},t.prototype.render=function(){var e=this.props.data,t=e.clip,n=e.error,i=e.loading;return n||this.state.isTimedOut?a.createElement(M,{error:{title:Object(r.d)("Something went wrong","ClipsChatCard"),description:Object(r.d)("We couldn't find that Clip","ClipsChatCard")}}):i||!t?a.createElement(M,null):a.createElement(M,{data:{title:t.title||(t.broadcaster&&t.broadcaster.displayName?Object(r.d)("Clip of {broadcaster}",{broadcaster:t.broadcaster.displayName},"ClipsChatCard"):""),description:t.curator&&t.curator.displayName?Object(r.d)("Clipped by {curator}",{curator:t.curator.displayName},"ClipsChatCard"):"",previewImageURL:t.thumbnailURL,contentURL:t.url}})},t}(a.Component),j=Object(f.graphql)(L,{options:function(e){return{variables:{slug:e.slug},notifyOnNetworkStatusChange:!0,fetchPolicy:e.forceNetworkRequest?"cache-first":"cache-only"}}})(x),A=n("gTu3"),P=(n("lpj/"),(i={})[A.a.Default]="",i[A.a.Recipient]="mention-fragment--recipient",i[A.a.Sender]="mention-fragment--sender",i),R=function(e){var t=e.isAtMention?"@":"",n=m("mention-fragment",P[e.currentUserMentionRelation]);return a.createElement("span",{className:n,"data-a-target":"chat-message-mention"},""+t+e.recipient)};R.displayName="MentionFragment";var U,B=n("yR8l"),V=n("QVaV"),H=n("sU0Q"),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g.__extends(t,e),t.prototype.render=function(){var e=this.props.data,t=e.video,n=e.error;if(e.loading||!t)return a.createElement(M,null);if(n||!t.owner||!t.owner.login||!t.publishedAt||!t.title)return a.createElement(M,{error:{title:Object(r.d)("Something went wrong","VideoChatCard"),description:Object(r.d)("We couldn't find that video","VideoChatCard")}});var i=a.createElement(E.a,null,Object(r.c)(new Date(t.publishedAt),"medium"),a.createElement("span",null,"  "),Object(V.a)(t.owner.login,t.owner.displayName));return a.createElement(M,{data:{title:t.title,description:i,previewImageURL:t.previewThumbnailURL,contentURL:this.props.url}})},t}(a.Component),q=Object(B.a)(H,{options:function(e){return{variables:{videoID:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-first"}}})(G),W=n("ZtEv"),z=n("u5aL"),Q=n("fvjX"),Y=n("Tznh"),K=n("VJH5"),X=n("dEDE"),$=n("akKH"),J=n("y0tB");!function(e){e.CancelButton="flagged-fragment-cancel",e.ConfirmButton="flagged-fragment-confirm",e.FeedbackButton="flagged-fragment-feedback",e.FeedbackNo="flagged-fragment-no",e.FeedbackYes="flagged-fragment-yes",e.SettingsLink="flagged-fragment-settings",e.Title="flagged-fragment-title"}(U||(U={}));var Z,ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={feedbackSelection:null,textShown:!1},t.hasTrackedImpression=!1,t.showSettings=function(){t.props.showChatFilterSettings(Y.c.FilteredMessage)},t.showText=function(){t.props.onShowText(),t.setState({textShown:!0}),r.p.track(b.SpadeEventType.ChatFilterMessageInteraction,t.getCommonTrackingProps())},t.onAffirmativeFeedbackSelected=function(){t.setState({feedbackSelection:!0})},t.onNegativeFeedbackSelected=function(){t.setState({feedbackSelection:!1})},t.onSubmit=function(){t.props.onDismissBalloon(),r.p.track(b.SpadeEventType.ChatFilterFeedbackInteraction,g.__assign({},t.getCommonTrackingProps(),{value:t.state.feedbackSelection?t.getAffirmativeText():t.getNegativeText()}))},t}return g.__extends(t,e),t.prototype.render=function(){var e=this,t=Object(r.d)("Cancel","FlaggedFragmentBalloonContent");return this.state.textShown?a.createElement(D.a,{padding:1},a.createElement($.a,{label:Object(r.d)("Help improve our filters. Was this message correctly hidden?","FlaggedFragmentBalloonContent")},a.createElement(J.a,{label:this.getAffirmativeText(),name:"flagged-fragment-feedback",onChange:this.onAffirmativeFeedbackSelected,"data-test-selector":U.FeedbackYes}),a.createElement(J.a,{label:this.getNegativeText(),name:"flagged-fragment-feedback",onChange:this.onNegativeFeedbackSelected,"data-test-selector":U.FeedbackNo})),a.createElement(D.a,{display:S.d.Flex,justifyContent:S.h.End},a.createElement(D.a,{margin:{right:1}},a.createElement(X.a,{onClick:this.props.onDismissBalloon,type:X.d.Hollow,"data-test-selector":U.CancelButton},t)),a.createElement(X.a,{disabled:null===this.state.feedbackSelection,onClick:this.onSubmit,"data-test-selector":U.FeedbackButton},Object(r.d)("Submit","FlaggedFragmentBalloonContent")))):(this.hasTrackedImpression||(r.p.track(b.SpadeEventType.ChatFilterMessageImpression,this.getCommonTrackingProps()),this.hasTrackedImpression=!0),a.createElement(D.a,{padding:1},a.createElement(E.a,{bold:!0,type:E.e.H6,"data-test-selector":U.Title},this.getCategoryTitle()),Object(r.d)("Would you like to see this message? It has been hidden for you based on your <x:link>NSFW Chat Filter settings</x:link>.",{"x:link":function(t){return a.createElement(O.a,{onClick:e.showSettings,"data-test-selector":U.SettingsLink},t)}},"FlaggedFragmentBalloonContent"),a.createElement(D.a,{display:S.d.Flex,justifyContent:S.h.End},a.createElement(D.a,{margin:{right:1}},a.createElement(X.a,{onClick:this.props.onDismissBalloon,type:X.d.Hollow,"data-test-selector":U.CancelButton},t)),a.createElement(X.a,{onClick:this.showText,"data-test-selector":U.ConfirmButton},Object(r.d)("Show Message","FlaggedFragmentBalloonContent")))))},t.prototype.getCategoryTitle=function(){var e=this.props.messagePart.categories;return 1!==Object.values(e).filter(function(e){return!!e}).length?Object(r.d)("Message Blocked","FlaggedFragmentBalloonContent"):e[K.a.Aggressive]?Object(r.d)("Hostile Message Blocked","FlaggedFragmentBalloonContent"):e[K.a.Identity]?Object(r.d)("Discriminatory Message Blocked","FlaggedFragmentBalloonContent"):e[K.a.Sexual]?Object(r.d)("Sexually Explicit Message Blocked","FlaggedFragmentBalloonContent"):Object(r.d)("Profanity Blocked","FlaggedFragmentBalloonContent")},t.prototype.getAffirmativeText=function(){return Object(r.d)("Yes","FlaggedFragmentBalloonContent")},t.prototype.getNegativeText=function(){return Object(r.d)("No","FlaggedFragmentBalloonContent")},t.prototype.getCommonTrackingProps=function(){var e=this.props.messagePart;return{channel_id:this.props.channelID||"",channel:this.props.channelLogin||"",msg_uuid:this.props.messageID||"",word:e.originalText,aggressive_language_detected:!!e.categories[K.a.Aggressive],explicit_language_detected:!!e.categories[K.a.Sexual],identity_language_detected:!!e.categories[K.a.Identity],profane_language_detected:!!e.categories[K.a.Profanity]}},t}(a.Component),te=Object(Q.compose)(Object(Y.d)(function(e){return e}))(ee),ne=n("ygYM");n("UUau");!function(e){e.Balloon="flagged-fragment-balloon",e.Container="flagged-fragment-container",e.Target="flagged-fragment-span"}(Z||(Z={}));var ie=function(e){function t(t){var n=e.call(this,t)||this;return n.state={active:!1,balloonDirection:ne.b.TopCenter,balloonTailOffset:0,balloonXOffset:0,displayed:!1},n.setTopRef=function(e){n.topRef=e},n.setBalloonContentRef=function(e){n.balloonContentRef=e,n.state.active&&n.setState(g.__assign({},n.getBalloonState()))},n.onClickOut=function(){n.setState({active:!1})},n.onClick=function(){n.setState({active:!0})},n.onShowText=function(){n.setState({displayed:!0},function(){n.setState(g.__assign({},n.getBalloonState()))})},n.onDismissBalloon=function(){n.setState({active:!1})},n.placeholder=new Array(t.messagePart.length+1).join("*"),n}return g.__extends(t,e),t.prototype.render=function(){return this.state.active?a.createElement("span",{ref:this.setTopRef,"data-test-selector":Z.Container},a.createElement(S.g,{display:S.d.Inline,position:S.j.Relative},a.createElement(z.a,{onClickOut:this.onClickOut},this.renderContent(),a.createElement(ne.a,{direction:this.state.balloonDirection,offsetX:this.state.balloonXOffset+"px",show:!0,size:ne.c.Medium,tailOffset:this.state.balloonTailOffset},a.createElement("span",{ref:this.setBalloonContentRef,"data-test-selector":Z.Balloon}),a.createElement(te,g.__assign({},this.props,{onDismissBalloon:this.onDismissBalloon,onShowText:this.onShowText})))))):a.createElement("span",{ref:this.setTopRef,"data-test-selector":Z.Container},this.renderContent())},t.prototype.renderContent=function(){var e={"flagged-fragment":!(this.state.displayed&&!this.state.active),"flagged-fragment--active":this.state.active};return this.state.displayed?a.createElement("span",{className:m(e),"data-test-selector":Z.Target},re(this.props.messagePart.content)):a.createElement("span",{className:m(e),onClick:this.onClick,"data-test-selector":Z.Target},a.createElement(h,{content:this.placeholder}))},t.prototype.getBalloonState=function(){if(this.balloonContentRef&&this.topRef&&this.topRef.offsetParent){var e=this.topRef.offsetParent.getBoundingClientRect(),t=this.balloonContentRef.getBoundingClientRect(),n=this.state.balloonDirection;t.top<e.top&&(n=ne.b.BottomCenter);var i=e.left+20,a=t.left,r=this.state.balloonXOffset-(a-i);return{balloonDirection:n,balloonTailOffset:e.width/2-r-20,balloonXOffset:r}}return{balloonDirection:ne.b.TopCenter,balloonTailOffset:0,balloonXOffset:0}},t}(a.Component);function ae(e,t,n){void 0===n&&(n=!1);var i=t.content,r=i.displayText,o=i.url;return n?a.createElement(h,{key:"message-span-"+e,content:r}):a.createElement(u,{key:e+"-link",displayText:r,url:o})}function re(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var i=null,r=e.reduce(function(r,s,l){var c=[];switch(l>0&&e[l-1].type!==p.a.Text&&s.type!==p.a.Text&&c.push(" "),s.type){case p.a.Text:case p.a.ModeratedText:var u=s.content,m=s.type;c.push(a.createElement(h,{key:l,content:u,highlightType:m}));break;case p.a.FlaggedSegment:c.push(a.createElement(ie,{key:l,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,messageID:t.messageSourceID,messagePart:s}));break;case p.a.CurrentUserHighlight:c.push(a.createElement(R,{isAtMention:!1,currentUserMentionRelation:A.a.Recipient,recipient:s.content,key:l}));break;case p.a.Mention:c.push(a.createElement(R,{isAtMention:!0,currentUserMentionRelation:s.content.currentUserMentionRelation,recipient:s.content.recipient,key:l}));break;case p.a.Emote:c.push(a.createElement(d.a,{key:l,emote:s.content,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,sourceID:t.messageSourceID,sourceType:t.emoteSourceType,referrerID:t.messageAuthorID,disableCard:n}));break;case p.a.Link:c.push(ae(l,s,t.disableLinks));break;case p.a.ClipLink:i||t.disableChatCard||(i=a.createElement(o.a,{key:l+"-ErrorBoundary"},a.createElement(j,{slug:s.content.slug,forceNetworkRequest:t.forceClipsNetworkRequest}))),c.push(ae(l,s,t.disableLinks));break;case p.a.VideoLink:i||t.disableChatCard||(i=a.createElement(q,{key:l,id:s.content.id,url:s.content.url})),c.push(ae(l,s,t.disableLinks))}return r.concat(c)},[]);return i&&(r=r.concat(i)),r}function oe(e){if(e.moderationType===W.e.Delete){var t=e,n=t.userLogin,i=t.body;return a.createElement(c.a,{targetLogin:n,messageBody:i})}if((e=e).moderationType===W.e.Ban)return e.reason?a.createElement("span",{className:"chat-line__moderation--ban-with-reason"},Object(r.d)("{userLogin} has been banned. Reason: {reason}",{userLogin:e.userLogin,reason:e.reason},"ChatLine")):a.createElement("span",{className:"chat-line__moderation--ban"},Object(r.d)("{userLogin} is now banned from this channel.",{userLogin:e.userLogin},"ChatLine"));if(e.reason&&e.duration){var o=Object(r.d)("{userLogin} has been timed out for {duration} seconds. Reason: {reason}",{duration:e.duration,reason:e.reason,userLogin:e.userLogin},"ChatLine");return a.createElement("span",{className:"chat-line__moderation--timeout-with-reason"},o)}return e.duration?a.createElement("span",{className:"chat-line__moderation--timeout"},Object(r.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:e.userLogin,duration:e.duration},"ChatLine")):void 0}function se(e){var t=e.daysLeft;0===t&&(t=e.hoursLeft);var n,i={bitsTotal:a.createElement("strong",null,Object(l.f)(e.total,{style:"currency",currency:"USD"})),charityName:a.createElement("strong",null,e.charityName),learnMoreURL:a.createElement("a",{href:e.learnMore,target:"_blank",rel:"noopener noreferrer"},e.learnMore),hashtag:a.createElement("strong",null,e.hashtag),timeRemaining:Object(l.f)(t)};return a.createElement("span",null,0===e.daysLeft?(n=i,Object(r.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more hours to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:n.bitsTotal,charityName:n.charityName,timeRemaining:n.timeRemaining,hashtag:n.hashtag,learnMoreURL:n.learnMoreURL},"ChatLine")):function(e){return Object(r.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more days to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:e.bitsTotal,charityName:e.charityName,timeRemaining:e.timeRemaining,hashtag:e.hashtag,learnMoreURL:e.learnMoreURL},"ChatLine")}(i))}function le(e){var t=e.enabled?Object(r.d)("This room is now in slow mode. You may send messages every {length} seconds.",{length:e.length},"ChatLine"):Object(r.d)("This room is no longer in slow mode.","ChatLine");return a.createElement("span",null,t)}function ce(e){var t;if(e.length>0){var n=e.join(", ");t=Object(r.d)("The moderators of this channel are: {moderatorList}",{moderatorList:n},"ChatLine")}else t=Object(r.d)("There are no moderators of this channel.","ChatLine");return a.createElement("span",null,t)}function de(e){if(e.enabled){var t=0===e.length?Object(r.d)("This room is in followers-only mode.","ChatLine"):Object(r.d)("This room is now in {length} followers-only mode.",{length:Object(s.b)(60*e.length)},"ChatLine");return a.createElement("span",null,t)}return a.createElement("span",null,Object(r.d)("This room is no longer in followers-only mode.","ChatLine"))}function ue(e){return e.enabled?a.createElement("span",null,Object(r.d)("This room is now in emote-only mode.","ChatLine")):a.createElement("span",null,Object(r.d)("This room is no longer in emote-only mode.","ChatLine"))}function me(e){var t=e.enabled?Object(r.d)("This room is now in subscriber-only mode.","ChatLine"):Object(r.d)("This room is no longer in subscriber-only mode.","ChatLine");return a.createElement("span",null,t)}function pe(e){return e.enabled?a.createElement("span",null,Object(r.d)("r9k mode has been enabled for this room.","ChatLine")):a.createElement("span",null,Object(r.d)("r9k mode has been disabled for this room.","ChatLine"))}function he(e){return e.isAutohost?Object(r.d)("{host} is now auto hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine"):e.viewerCount<=2?Object(r.d)("{host} is now hosting you.",{host:e.hostingChannel},"ChatLine"):Object(r.d)("{host} is now hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine")}function ge(e,t){void 0===t&&(t=!1);var n=t?e.getHours():e.getHours()%12;t||0!==n||(n=12);var i=n.toString(),a=e.getMinutes(),r=a.toString();return a<10&&(r="0"+r),t&&n<10&&(i="0"+i),i+":"+r}function fe(e,t){return void 0===t&&(t=!1),a.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},ge(new Date(e),t))}function ve(e){return a.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},function(e,t){void 0===t&&(t={});var n=r.q.intl.getLanguageCode()||"en";return Intl.DateTimeFormat(n,t).format(e)}(new Date(e),{hour:"numeric",minute:"numeric"}))}n.d(t,"f",function(){return re}),n.d(t,"g",function(){return oe}),n.d(t,"b",function(){return se}),n.d(t,"j",function(){return le}),n.d(t,"i",function(){return ce}),n.d(t,"d",function(){return de}),n.d(t,"c",function(){return ue}),n.d(t,"k",function(){return me}),n.d(t,"h",function(){return pe}),n.d(t,"e",function(){return he}),n.d(t,"a",function(){return ge}),n.d(t,"l",function(){return fe}),n.d(t,"m",function(){return ve})},d0xR:function(e,t,n){"use strict";n.r(t);var i,a=n("mrSG"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("cZKs"),c=n("1/iK"),d=n("aCAx"),u=n("kRBY"),m=n("w1PT"),p=n("8EUQ"),h=n("Ws8v"),g=n("X2PJ"),f=n("/7QA"),v=n("ZS2+"),b=n("yR8l"),k=n("3Bft"),C=n("tIid"),y=n("ht6z"),S=n("KriR"),E=n("br9A"),N=n("sUnt"),w=n("hnjF"),_=n("HH5h"),D=n("uG/k"),O=n("PL8s"),I=(n("y2dA"),n("eaNi"));!function(e){e.SubButton="subscribe-button__dropdown",e.BalloonLayerButton="subscribe-button__balloon-layer-btn",e.DefaultButton="subscribe-button__default-btn",e.SubscribeBalloon="subscribe-button__subscribe-balloon"}(i||(i={}));var T=v.a.wrap(function(){return Promise.all([n.e(0),n.e(784)]).then(n.bind(null,"f+qK"))},"SubscribeBalloon"),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modalLevel="top_page",t.handleSubMenuAction=function(e){new Set([E.a.ClickCheckout,E.a.BuyGiftSub,E.a.BuyMysteryGift,E.a.BuyCustomMysteryGift,E.a.BuyGiftToPaidUpgrade,E.a.BuyPaidUpgrade,E.a.BuyPrimeToPaid,E.a.BuyContinueSub]).has(e.action)&&t.checkAndDisplaySubscriptionCheckout();var n=t.props.data,i=n.user,a=null;i&&i.self&&i.self.cumulativeTenure&&(a=i.self.cumulativeTenure.months);var r=!!(i&&i.self&&i.self.subscriptionBenefit),o=n.requestInfo&&Object(y.a)(n.requestInfo.countryCode);Object(E.b)({action:e.action||"",channelLogin:t.props.channelLogin||"",channelID:i&&i.id||"",checkoutButtonTier:e.checkoutButtonTier,cumulativeTenureMonths:a,hasSubCredit:i&&i.self&&i.self.canPrimeSubscribe,hostChannelID:t.props.data.user&&t.props.data.user.id||"",hostChannelLogin:t.props.channelLogin,isMenuOpen:e.action!==E.a.OpenSubMenu,mysteryGiftCount:e.mysteryGiftCount,sub_location:t.props.subLocation||"squad_page",modal:!r,modalLevel:r?"":t.modalLevel.slice(),showPrimeContent:o,giftRecipient:e.giftRecipient||null}),!e.modalLevel||e.action!==E.a.ClickMoreSubOptions&&e.action!==E.a.ClickBack||(t.modalLevel=e.modalLevel)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.checkAndDisplaySubscriptionCheckout()},t.prototype.componentDidUpdate=function(e){!this.isUserDataReady(e)&&this.isUserDataReady(this.props)&&this.checkAndDisplaySubscriptionCheckout()},t.prototype.render=function(){var e,t,n,i,a,o,s,l=null,c=null;if(this.props.data&&this.props.data.user&&this.props.data.user.id&&this.props.data.user.subscriptionProducts&&this.props.data.requestInfo){s=this.props.data.user.displayName||this.props.channelLogin,this.props.data.user.bannerImageURL&&(l=r.createElement(D.a,{src:this.props.data.user.bannerImageURL,alt:Object(f.d)("{channelName}'s banner image",{channelName:s},"SubscribeModal")})),this.props.data.user.profileImageURL&&(c=r.createElement(_.a,{size:80,src:this.props.data.user.profileImageURL,alt:Object(f.d)("{channelName}'s profile image",{channelName:s},"SubscribeModal")}));var d=this.props.data.user,u=d.self,m=d.subscriptionProducts.filter(function(e){return e});if(0===m.length)return null;i=Object(y.a)(this.props.data.requestInfo.countryCode),o=!(!u||!u.subscriptionBenefit),a=Object(C.a)(this.props.data.user.id||"",this.props.sessionUser),e=1===m.length,m.some(function(e){return!e.emoteSetID})&&(e=!0),n="",u&&u.subscriptionBenefit&&(n=u.subscriptionBenefit.purchasedWithPrime?k.a.Prime:u.subscriptionBenefit.tier,this.modalLevel=""),t=m[0].id}else e=!1,t="",n="",i=!1,a=!1,o=!1,l=r.createElement(O.a,{width:400,height:120}),c=r.createElement(O.a,{width:80,height:80});return r.createElement(r.Fragment,null,r.createElement(N.a,{className:"subscribe-modal__container"},r.createElement(h.a,{overflow:w.i.Hidden,fullWidth:!0,className:"subscribe-modal__banner"},l),r.createElement(h.a,{className:"subscribe-modal__avatar",background:g.a.Alt,position:w.j.Absolute,borderRadius:g.b.Small,overflow:w.i.Hidden},c)),r.createElement(N.a,{className:"subscribe-modal__balloon-container"},r.createElement(T,{authToken:this.props.authToken,channelLogin:this.props.channelLogin,handleSubMenuAction:this.handleSubMenuAction,inPrimeRegion:i,isEsportChannel:a,isNonStandardSub:e,isStaff:!(!this.props.sessionUser||!this.props.sessionUser.roles)&&this.props.sessionUser.roles.isStaff,isSubscribed:o,overrideStylesForModalExperiment:!0,userHasPrime:!1,productId:t,subbedTier:n})))},t.prototype.isUserDataReady=function(e){return e.data&&e.data.user&&!e.data.loading&&!e.data.error},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=f.o.get(p.a.SUB_CHECKOUT__PRODUCT_KEY,"");if(e){var t=this.props.data.user;if(t&&t.subscriptionProducts)if(this.props.showSubscriptionCheckout&&this.props.showLoginModal)t.subscriptionProducts.filter(function(e){return e}).map(function(e){return e.name}).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({isAnonymous:f.o.get(p.a.SUB_CHECKOUT__GIFTING_ANONYMOUSLY,!1),mysteryGiftCount:Number(f.o.get(p.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,"")),productName:e,recipientLogin:f.o.get(p.a.SUB_CHECKOUT__RECIPIENT_KEY,""),trackingContext:{source:S.c.ChannelSubscribeButton}}):(f.o.set("subscription-target-login",this.props.channelLogin),this.props.showLoginModal()):p.a.clearSubscriptionCheckoutKeys()}},t}(r.Component),L=Object(b.a)(I,{options:function(e){return{variables:{login:e.channelLogin}}}})(M);var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(){t.props.closeModal()},t}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){this.props.onClose&&this.props.onClose()},t.prototype.render=function(){return r.createElement(h.a,{className:"subscribe-modal",background:g.a.Base},r.createElement(L,{authToken:this.props.authToken,sessionUser:this.props.sessionUser,onClose:this.handleClose,channelLogin:this.props.channelLogin,showLoginModal:this.props.showLoginModal,showSubscriptionCheckout:this.props.showSubscriptionCheckout,subLocation:this.props.subLocation}),r.createElement(l.a,{closeOnBackdropClick:!0,closeOnPageNavigation:!0}))},t}(r.Component);var x=Object(o.connect)(function(e){return{authToken:Object(u.a)(e),sessionUser:Object(u.e)(e)}},function(e){return Object(s.bindActionCreators)({closeModal:d.c,showLoginModal:p.a.showLoginModalWithCheckoutDispatch(c.a.ChannelSubscriptionButton),showSubscriptionCheckout:m.a},e)})(F);n.d(t,"SubscribeModalContainer",function(){return F}),n.d(t,"SubscribeModal",function(){return x}),n.d(t,"SUBSCRIPTION_TARGET_LOGIN",function(){return"subscription-target-login"}),n.d(t,"TestSelectors",function(){return i}),n.d(t,"SubscribeModalComponentPresentation",function(){return M}),n.d(t,"SubscribeModalComponent",function(){return L})},djOf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelInfoBar_EditButton"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:114}};n.loc.source={body:"query ChannelPage_ChannelInfoBar_EditButton {\ncurrentUser {\nid\nlogin\nroles {\nisStaff\nisGlobalMod\nisSiteAdmin\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},dsMP:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("hnjF"),s=n("+80q"),l=n("X2PJ"),c=n("dEDE"),d=n("sUnt"),u=n("Ws8v"),m=n("4wKg"),p=n("7uM4"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showSkipConfirmation:!1},t.showSkipConfirmation=function(){t.setState({showSkipConfirmation:!0})},t.hideSkipConfirmation=function(){t.setState({showSkipConfirmation:!1})},t}return i.__extends(t,e),t.prototype.render=function(){var e=Object(r.d)("{monthsSubbed, plural, one {We can show your {monthsSubbed} month sub anniversary reminder to you again later, or choose to:} other {We can show your {monthsSubbed} months sub anniversary reminder to you again later, or choose to:}}",{monthsSubbed:this.props.event.cumulativeTenureMonths},"ShareResubCallout"),t=Object(r.d)("{monthsSubbed, plural, one {You will not be able to share your {monthsSubbed} month sub anniversary reminder again. Future anniversary reminders will still show.} other {You will not be able to share your {monthsSubbed} months sub anniversary reminder again. Future anniversary reminders will still show.}}",{monthsSubbed:this.props.event.cumulativeTenureMonths},"ShareResubContextMenu");return this.state.showSkipConfirmation?a.createElement(d.a,null,a.createElement(s.a,null,t),a.createElement(d.a,{padding:{y:2},display:o.d.Flex,justifyContent:o.h.End},a.createElement(d.a,{margin:{right:.5}},a.createElement(c.a,{onClick:this.hideSkipConfirmation,size:c.b.Small,children:Object(r.d)("Go back","ShareResubContextMenu"),type:c.d.Hollow})),a.createElement(c.a,{onClick:this.props.onSkip,size:c.b.Small,children:Object(r.d)("Okay","ShareResubContextMenu")}))):a.createElement(d.a,null,a.createElement(s.a,{bold:!0,color:l.c.Alt2},Object(r.d)("Change when you'll see this","ShareResubCallout")),a.createElement(d.a,{padding:{y:.5}},a.createElement(s.a,{color:l.c.Alt2},e)),a.createElement(u.a,{fullWidth:!0,border:!0,margin:{y:.5}}),this.props.onPin&&a.createElement(m.a,{title:Object(r.d)("Pin this here","ShareResubContextMenu"),onClick:this.props.onPin,figure:{icon:p.b.Pin}}),this.props.onHide&&a.createElement(m.a,{title:Object(r.d)("Show on next visit","ShareResubContextMenu"),onClick:this.props.onHide,figure:{icon:p.b.EventsReminderAdd}}),this.props.onSkip&&a.createElement(m.a,{title:Object(r.d)("Skip this month's alert","ShareResubContextMenu"),onClick:this.showSkipConfirmation,figure:{icon:p.b.VisibilityHidden}}))},t}(a.Component);n.d(t,"a",function(){return h})},e7rh:function(e,t,n){},eAAt:function(e,t,n){"use strict";var i=n("q1tI"),a=n("kduP"),r=n("hnjF"),o=n("Jsra"),s=n("L/cU"),l=n("fPaz"),c=function(e){return i.createElement(r.g,{margin:{right:1},overflow:r.i.Hidden,flexShrink:0},i.createElement(o.a,{to:{pathname:Object(a.b)(e.name),state:{content:"current_game",medium:"twitch_channel"}},"data-a-target":"stream-box-art-link"},i.createElement(s.a,{src:e.boxArtURL,alt:e.name,aspect:l.c.Aspect3x4,size:e.size})))};n.d(t,"a",function(){return c})},eAdp:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateVideoBookmark"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateVideoBookmarkInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createVideoBookmark"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"videoBookmark"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:140}};n.loc.source={body:"mutation CreateVideoBookmark($input: CreateVideoBookmarkInput!) {\ncreateVideoBookmark(input: $input){\nvideoBookmark{\nid\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},eZF0:function(e,t,n){},eaNi:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MultiStream_SubscribeModal_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"300"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pendingSubscription"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gift"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGift"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:492}};n.loc.source={body:"query MultiStream_SubscribeModal_User($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nbannerImageURL\nprofileImageURL(width:300)\nsubscriptionProducts {\nid\nemoteSetID\nname\nself {\npaidUpgradePromotion {\nnewPrice\n}\n}\n}\nself {\ncanPrimeSubscribe\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\npurchasedWithPrime\ntier\npendingSubscription {\nstartsAt\n}\ngift {\nisGift\n}\n}\n}\n}\ncurrentUser {\nid\nroles {\nisStaff\n}\n}\nrequestInfo {\ncountryCode\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},ecb7:function(e,t,n){},efEE:function(e,t,n){},efpB:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("rEFn");function s(){return a.q.history.location.state&&a.q.history.location.state.medium===r.PageviewMedium.NavSearch?i.__assign({},l(),{medium:a.q.history.location.state.medium,content:a.q.history.location.state.content}):null}function l(){var e;return(e={})[o.a]=a.q.history.location.state&&a.q.history.location.state[o.a],e[o.b]=a.q.history.location.state&&a.q.history.location.state[o.b],e}},ehEd:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r});var i="https://static-cdn.jtvnw.net/jtv_user_pictures/xarth/404_user_150x150.png",a=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/1.0"},r=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/2.0 2x"}},esZd:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("2Ygb");function o(e){return function(t){return function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return i.__extends(o,n),o.prototype.render=function(){return a.createElement(t,i.__assign({},e(this.props)))},o.displayName=Object(r.a)(o.name,t),o}(a.Component)}}n.d(t,"a",function(){return o})},"f/23":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i=n("/7QA");function a(e){return"WATCH__NON_LIVE_BANNER_DISMISSED__"+e}var r="all";function o(e){return i.o.get(a(r),!1)||i.o.get(a(e),!1)}function s(e,t){e?i.o.set(a(r),!0):i.o.set(a(t),!0)}},fCiU:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i=n("p52R"),a=/^[\x00-\x7F]*$/,r=function(e){return!a.test(e)},o=function(e){return r(e.displayName)?e.displayName+" ("+e.name+")":e.displayName},s=function(e,t){return{userID:e.id,userDisplayName:e.displayName,userType:i.a.User,isIntl:r(e.displayName),userLogin:e.name,color:t}}},fGoN:function(e,t,n){},fI4C:function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return g}),n.d(t,"a",function(){return f}),n.d(t,"m",function(){return v}),n.d(t,"l",function(){return b}),n.d(t,"f",function(){return k}),n.d(t,"g",function(){return C}),n.d(t,"e",function(){return y}),n.d(t,"i",function(){return S}),n.d(t,"h",function(){return E}),n.d(t,"j",function(){return N}),n.d(t,"k",function(){return w});var i=n("mrSG"),a=n("/7QA"),r=n("vRsq"),o=n("2xye"),s=n("L9xt"),l=n("I6K6"),c=n("ahza"),d=n("DpwM"),u=n("BQs+"),m=n("CJLt"),p="replay_mode",h="timestamp_mode",g="on",f="off",v=function(e){a.p.track(s.SpadeEventType.VideoChatSettingChanged,e)},b=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n,c,d,p;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,a.q.apollo.client.query({query:m,variables:{videoCreatorID:e.channelId,videoID:e.contentId}})];case 1:return n=i.sent().data,c={channel:n.video.owner.login,channel_id:Number(e.channelId),game:n.video.game?n.video.game.name:null,location:o.PageviewLocation.VideoWatchPage,share_platform:u.a.Link,share_context:o.ShareItemContext.Chomment,shared_item_id:Object(r.q)(e.contentId),shared_item_type:Object(l.a)(n.video.broadcastType),shared_item_url:t.toString(),partner:n.video.owner.roles.isPartner,source_item_id:e.id,source_item_type:o.SourceItemType.Chomment},d=_(e,n,u.a.Link),a.p.track(s.SpadeEventType.ChommentUIAction,d),a.p.track(s.SpadeEventType.ShareItem,c),[3,3];case 2:return p=i.sent(),a.k.error(p.toString(),b.name),[3,3];case 3:return[2]}})})},k=function(e,t){var n=e.users[0],i=e.comments[0];return{channel:t.user.login,channel_id:Number(i.channelId),comment_id:i.id,comment_state:i.state,event_source:"frontend",game:t.video.game?t.video.game.name:null,login:n.name,play_session_id:a.p.getVideoPlayerTrackingData().playSessionID,reply_to_comment_id:Object(d.h)(i)?i.parentId:null,user_id:Number(n.id),vod_id:Number(i.contentId),vod_title:t.video.title,vod_ts:i.contentOffset,vod_type:Object(l.a)(t.video.broadcastType)}},C=function(e,t,n){return{author_id:Number(e.comment.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.comment.channelId),comment_id:e.comment.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(e.comment.contentId),vod_title:n.video.title,vod_type:Object(l.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},y=function(e,t,n){return{action:"ban_user",author_id:Number(e.bannedUser),channel_id:Number(e.targetChannel),event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,target_user_id:Number(e.bannedUser),user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_type:Object(l.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},S=function(e,t,n){return{action:"delete",author_id:Number(e.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,reply_to_comment_id:e.parentId?e.parentId:null,user_id:Number(t.session.user.id),vod_id:Number(e.contentId),vod_title:n.video.title,vod_type:Object(l.a)(n.video.broadcastType),vod_ts:e.contentOffset}},E=function(e,t,n){var i=null,a=Object.keys(t.vodChat.comments.comments.parentComments);if(a.length>0){var r=a[0];i=t.vodChat.comments.comments.parentComments[r].channelId}return{action:"create",channel_id:i?Number(i):null,comment_body:e.message,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,reply_to_comment_id:Object(c.e)(e)?e.parentId:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:Object(c.e)(e)?null:Number(e.contentOffsetSeconds),vod_type:Object(l.a)(n.video.broadcastType)}},N=function(e,t,n){var i=e.comment.id,a=e.comment.channelId;return{action:e.state===d.c?"publish":"unpublish",channel_id:Number(a),comment_id:i,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:e.comment.contentOffset,vod_type:Object(l.a)(n.video.broadcastType)}},w=function(e,t,n){return{action:"sync_vod_to_time",author_id:Number(e.commenter),channel:n.user.login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(e.contentId),vod_title:n.video.title,vod_ts:e.contentOffset,vod_type:Object(l.a)(n.video.broadcastType)}},_=function(e,t,n){return{action:"share",author_id:Number(e.commenter),channel:t.video.owner.login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:t.video.game?t.video.game.name:null,login:t.currentUser?t.currentUser.login:null,user_id:t.currentUser?Number(t.currentUser.id):null,vod_id:Number(e.contentId),vod_title:t.video.title,vod_ts:e.contentOffset,vod_type:Object(l.a)(t.video.broadcastType),share_platform:n}}},fIj0:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:186}};n.loc.source={body:"query VideoChatChannelAndVideoTrackingContext($videoCreatorID: ID $videoID: ID) {\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\nuser(id: $videoCreatorID) {\nid\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},fKMw:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),a=n("yR8l"),r=n("sMoq");function o(){var e=this;return Object(a.a)(r,{props:function(t){return{vipUserMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate&&t.ownProps.channelID?[4,t.mutate({variables:{input:{channelID:t.ownProps.channelID,granteeLogin:n}}})]:[2];case 1:return[2,e.sent().data]}})})}}}})}},fQWD:function(e,t,n){"use strict";var i=n("vHGB");n.d(t,"a",function(){return i.a})},fezU:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("1rIY"),s=n("1MDS"),l=n("oK83"),c=(i=Object(o.a)("ViewerCardContext",{viewerCardOptions:null,onShowViewerCard:function(){return null},onShowExtensionMessageCard:function(){return null},onShowEmoteCard:function(){return null},hideViewerCard:function(){return null}})).InnerProvider,d=i.withContext,u=function(e){function t(t){var n=e.call(this,t)||this;return n.onShowViewerCard=function(e,t,i,a){n.setState(function(n){var r=n.viewerCardOptions;return r&&r.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:l.c.Viewer,initialTopOffset:a,sourceID:i,sourceType:t,targetID:e}}})},n.onShowExtensionMessageCard=function(e,t,i,a){n.setState(function(n){var r=n.viewerCardOptions;return r&&r.viewerCardType===l.c.Extension&&r.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:l.c.Extension,initialTopOffset:a,sourceID:i,targetID:e,extensionVersion:t}}})},n.onShowEmoteCard=function(e){n.setState(function(t){var n=t.viewerCardOptions;return n&&n.viewerCardType===l.c.Emote&&n.emoteID===e.emoteID?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:l.c.Emote,initialTopOffset:e.initialTopOffset||0,sourceID:e.sourceID,emoteSourceType:e.emoteSourceType,targetID:e.referrerID,emoteID:e.emoteID,emoteCode:e.emoteCode}}}),Object(s.c)({emoteLocation:Object(s.b)(e.emoteSourceType),emoticonID:e.emoteID,chatChannel:e.channelLogin,chatChannelID:e.channelID?e.channelID:"",referrerUserID:e.referrerID,action:s.a.Open,msgID:e.sourceID})},n.hideViewerCard=function(){n.setState({viewerCardOptions:null})},n.state={viewerCardOptions:null,onShowViewerCard:n.onShowViewerCard,onShowExtensionMessageCard:n.onShowExtensionMessageCard,onShowEmoteCard:n.onShowEmoteCard,hideViewerCard:n.hideViewerCard},n}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(c,{value:this.state},this.props.children)},t}(r.Component);n.d(t,!1,function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return u})},frkH:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DenyRejectedChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DenyRejectedChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"denyRejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation Chat_DenyRejectedChatMessage($input: DenyRejectedChatMessageInput!) {\ndenyRejectedChatMessage(input: $input) {\nmessage {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},fxMP:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return f});var i=n("i6WW"),a=n("6j5V"),r=n("XmgI"),o=n("4h+t"),s=n("gTu3"),l=n("RcPG"),c=n("a1OF"),d="/me ";function u(e,t,n){var i=e.content.text.startsWith(d);return p(e.content.fragments,i,n,t||Object(o.a)(),e.sender&&e.sender.login||void 0)}function m(e,t){return p(e.content.fragments,!1,t)}function p(e,t,n,o,u){var m=[];return e.forEach(function(e,p){if(null!==e){var h=e.content||{__typename:"Text"};switch(h.__typename){case"Emote":if(!h.emoteID)return;m.push({type:l.a.Emote,content:{alt:e.text,emoteID:h.emoteID,images:{themed:!1,sources:{"1x":Object(c.d)(h.emoteID,1),"2x":Object(c.d)(h.emoteID,2),"4x":Object(c.d)(h.emoteID,4)}}}});break;case"CheermoteToken":if(!o)return;var g=h.prefix,f=h.bitsAmount,v=h.tier,b=o.indexedActions[g],k=b&&b.indexedTiers.get(v);k?m.push({type:l.a.Emote,content:{alt:g,images:Object(r.d)(k),cheerAmount:f,cheerColor:k.color}}):m.push(Object(a.a)(e.text));break;case"User":var C=s.a.Default;n&&h.login===n?C=s.a.Recipient:n&&u&&u===n&&(C=s.a.Sender),m.push({type:l.a.Mention,content:{recipient:e.text.slice(1),currentUserMentionRelation:C}});break;case"AutoMod":m.push({type:l.a.ModeratedText,content:e.text});break;default:var y=Object(i.a)(e.text,{parseClips:!0,parseVods:!0});if(y)m.push(y);else{var S=e.text;t&&0===p&&S.startsWith(d)&&(S=S.substr(3)),m.push(Object(a.a)(S))}}}}),m}function h(e){var t=e.data,n=t.message,i=t.cursor,a=g(n.content.fragments),r=f(n.sender.badges);return{cursor:""+i,node:{id:n.id,deletedAt:null,sentAt:n.sent_at,content:{text:n.content.text,fragments:a,__typename:"RoomMessageContent"},sender:{id:n.sender.user_id,login:n.sender.login,chatColor:n.sender.chat_color,displayName:n.sender.display_name,displayBadges:r,__typename:"User"},__typename:"RoomMessage"},__typename:"RoomMessageEdge"}}function g(e){return e.map(function(e){var t={text:e.text,content:null,__typename:"RoomMessageFragment"},n=e.cheermote,i=e.emoticon,a=e.mention,r=e.text;return n?t.content={bitsAmount:n.bits_amount,prefix:n.prefix,tier:n.tier,__typename:"CheermoteToken"}:i?t.content={emoteID:i.id,setID:i.set_id,token:r,__typename:"Emote"}:a&&(t.content={id:a.user_id,login:a.login,displayName:a.display_name,__typename:"User"}),t})}function f(e){return e.map(function(e){return{setID:e.id,version:e.version,__typename:"Badge"}})}},g17B:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Chat_ChannelCheermotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]}]}}]}}],loc:{start:0,end:157}};i.loc.source={body:'#import "twilight/features/chat/models/cheer-fragment.gql"\nquery Chat_ChannelCheermotes($channelLogin: String) {\nuser(login: $channelLogin) {\nid\n...cheer\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("F9eG").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},g807:function(e,t,n){"use strict";var i=n("RNNG"),a=function(){function e(e){this.videoComments=e,this.currentOffset=e.minOffset}return e.prototype[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.videoComments.offsets[e.currentOffset]||[],n={done:e.currentOffset>e.videoComments.maxOffset,value:{offset:e.currentOffset,comments:t}};return e.currentOffset++,n}}},e}();n.d(t,"b",function(){return i.b}),n.d(t,"c",function(){return i.c}),n.d(t,!1,function(){return i.d}),n.d(t,!1,function(){return i.e}),n.d(t,"d",function(){return i.f}),n.d(t,!1,function(){}),n.d(t,"a",function(){return a})},gDzh:function(e,t,n){},gFHd:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ShareVideo_Content"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasVideo"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasCollection"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasVideo"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasCollection"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:451}};n.loc.source={body:"query ShareVideo_Content($videoID: ID! $collectionID: ID! $hasVideo: Boolean! $hasCollection: Boolean!) {\n# If the page specifies a video ID query it directly.\nvideo(id: $videoID options: { includePrivate: true }) @include(if: $hasVideo) {\nid\nowner {\nid\ndisplayName\n}\ntitle\n}\n# If the page is a collection page grab the first video from the collection.\ncollection(id: $collectionID) @include(if: $hasCollection) {\nid\nowner {\nid\ndisplayName\n}\ntitle\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},gMwc:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoMarkersChatCommand"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:115}};n.loc.source={body:"query VideoMarkersChatCommand($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nstream {\nid\ncreatedAt\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},gO1k:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_DeleteChatMessage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteChatMessageInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"responseCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:182}};n.loc.source={body:"mutation Chat_DeleteChatMessage($input: DeleteChatMessageInput!) {\ndeleteChatMessage(input: $input) {\nresponseCode\nmessage {\nid\nsender {\nid\nlogin\ndisplayName\n}\ncontent {\ntext\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},gPTj:function(e,t,n){},gTu3:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Default=0]="Default",e[e.Recipient=1]="Recipient",e[e.Sender=2]="Sender"}(i||(i={}))},gcd7:function(e,t,n){"use strict";var i=n("/MKj"),a=n("fvjX"),r=n("+pBb"),o=n("mrSG"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.props.addCommand(this.props.command,this.props.handler,this.props.channelLogin)},t.prototype.componentWillReceiveProps=function(e){this.props.command===e.command&&this.props.handler===e.handler&&this.props.channelLogin===e.channelLogin||(this.props.removeCommand(this.props.command,this.props.handler,this.props.channelLogin),this.props.addCommand(e.command,e.handler,e.channelLogin))},t.prototype.componentWillUnmount=function(){this.props.removeCommand(this.props.command,this.props.handler,this.props.channelLogin)},t.prototype.render=function(){return null},t}(n("q1tI").PureComponent);var l=Object(i.connect)(null,function(e){return Object(a.bindActionCreators)({addCommand:r.x,removeCommand:r.O},e)})(s);n.d(t,"a",function(){return l})},ghdf:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelFollowers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"order"}},type:{kind:"NamedType",name:{kind:"Name",value:"SortOrder"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"order"},value:{kind:"Variable",name:{kind:"Name",value:"order"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"userCardFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:316}};i.loc.source={body:'#import "twilight/features/user-card/queries/user-card-fragment.gql"\nquery ChannelFollowers($login: String $limit: Int $cursor: Cursor $order: SortOrder) {\nuser(login: $login) {\nid\nfollowers(first: $limit after: $cursor order: $order) {\nedges {\ncursor\nnode {\nid\n...userCardFragment\n}\n}\npageInfo {\nhasNextPage\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("xXGc").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},grjI:function(e,t,n){},hO8c:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("1rIY"),s=(i=Object(o.a)("PrivateCalloutQueueContext",{callouts:[],pinnedCallout:null,pinCallout:function(e){return null},pushCallout:function(e){return null},popCallout:function(){return null},unpinCallout:function(){return null},setInputPrompt:function(e){return null},clearInputPrompt:function(){return null}})).InnerProvider,l=i.withContext,c=function(e){function t(t){var n=e.call(this,t)||this;return n.popCallout=function(){n.setState(function(e){return{callouts:e.callouts.slice(1).slice()}})},n.pushCallout=function(e){n.setState(function(t){return{callouts:t.callouts.concat([e])}})},n.pinCallout=function(e){n.setState({pinnedCallout:e})},n.unpinCallout=function(){n.setState({pinnedCallout:null})},n.setInputPrompt=function(e){n.setState({inputPrompt:e})},n.clearInputPrompt=function(){n.setState({inputPrompt:void 0})},n.state={callouts:[],pinnedCallout:null,pinCallout:n.pinCallout,pushCallout:n.pushCallout,popCallout:n.popCallout,unpinCallout:n.unpinCallout,setInputPrompt:n.setInputPrompt,clearInputPrompt:n.clearInputPrompt},n}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.channelLogin!==this.props.channelLogin&&this.setState({callouts:[],inputPrompt:void 0,pinnedCallout:null})},t.prototype.render=function(){return r.createElement(s,{value:this.state},this.props.children)},t}(r.Component),d=c;n.d(t,!1,function(){return s}),n.d(t,"b",function(){return l}),n.d(t,!1,function(){return c}),n.d(t,"a",function(){return d})},he03:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PreviewCardVideo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"animatedPreviewURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"40"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"56"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"320"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"180"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isRestricted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewingHistory"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"restriction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"productTitle"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"contentTags"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tagFragment"},directives:[]}]}}]}}],loc:{start:0,end:454}};i.loc.source={body:'#import "twilight/features/tags/models/tag-fragment.gql"\nfragment PreviewCardVideo on Video {\nanimatedPreviewURL\ngame {\nboxArtURL(width: 40 height: 56)\nid\ndisplayName\nname\n}\nid\nlengthSeconds\nowner {\ndisplayName\nid\nlogin\nprofileImageURL(width: 50)\n}\npreviewThumbnailURL(width: 320 height: 180)\npublishedAt\nself {\nisRestricted\nviewingHistory {\nposition\nupdatedAt\n}\n}\ntitle\nviewCount\nrestriction {\nproductName\nproductTitle\n}\ncontentTags {\n...tagFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("iiOx").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},i6WW:function(e,t,n){"use strict";var i=n("RcPG"),a=new RegExp("(?:^|\\s)(?:https?://)?clips.twitch.tv/(\\w+)(?:/)?(\\w+)?(?:/edit)?(?:$|\\s)?"),r=new RegExp("(?:^|\\s)(?:https?:\\/\\/)?(?:www\\.)?twitch\\.tv\\/(\\w+)\\/clip\\/(\\w+)(?:$|\\s)?");var o=new RegExp("(?:^|\\s)(?:https?://)?(?:(?:www|go).)?twitch.tv/videos/(\\d+)(?:$|\\s)?");n.d(t,"a",function(){return l});var s=/^(?:(https?:\/\/)?((?:[\w#%\-+=:~]+\.)+[a-z]{2,8}(?:\/[\w.\/#%&@()\-+=:?~]*)?))$/;function l(e,t){void 0===t&&(t={});var n=e.match(s);if(!n)return null;var l=""+(n[1]||"https://")+n[2];if(t.parseClips&&function(e){void 0===e&&(e="");var t=a.test(e)&&!e.includes("clips.twitch.tv/2017/"),n=r.test(e);return t||n}(l)){var c=function(e){void 0===e&&(e="");var t=e.match(a);if(t&&t.length>0&&void 0!==t.index)return t[1];var n=e.match(r);return n&&n.length>0&&void 0!==n.index?n[2]:""}(l);if("create"!==c)return{type:i.a.ClipLink,content:{slug:c,url:l,displayText:e}}}if(t.parseVods&&function(e){return void 0===e&&(e=""),o.test(e)}(l)){var d=function(e){void 0===e&&(e="");var t=e.match(o);return null===t?"":t&&t.length>0&&void 0!==t.index?t[1]:""}(l);return{type:i.a.VideoLink,content:{id:d,url:l,displayText:e}}}return{type:i.a.Link,content:{displayText:e,url:l}}}},iS14:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("mrSG"),a=n("yR8l"),r=n("8jSG"),o=n("cMjZ"),s=n("zixI");function l(){var e=this;return Object(a.a)(s,{props:function(t){return{unblockUserMutation:function(n,a){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n}},optimisticResponse:{unblockUser:{__typename:"UnblockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(o.a)(a),fragment:r});t&&(t.blockedUsers=t.blockedUsers.filter(function(e){return null!==e&&e.id!==n}),e.writeFragment({id:Object(o.a)(a),fragment:r,data:t}))}})]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("unblockUserMutation is not ready");case 3:return[2]}})})}}}})}},ifPV:function(e,t,n){},ilCE:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RaidUpsell_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetChannelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sourceChannelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"targetChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"targetChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"sourceChannel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"sourceChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewersCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:240}};n.loc.source={body:"query RaidUpsell_Channel($targetChannelLogin: String $sourceChannelLogin: String) {\ntargetChannel: user(login: $targetChannelLogin) {\nid\nlogin\ndisplayName\n}\nsourceChannel: user(login: $sourceChannelLogin) {\nid\nstream {\nid\nviewersCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},iyGE:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("mrSG"),a=n("yR8l"),r=n("Pub/"),o=n("HzXE"),s=n("4G6/"),l=n("4w0E");function c(e){var t=this;return Object(a.a)(l,{props:function(n){return{banUserMutation:function(a,l,c){return void 0===l&&(l=null),void 0===c&&(c=null),i.__awaiter(t,void 0,void 0,function(){var t,d;return i.__generator(this,function(u){switch(u.label){case 0:if(t=e(n.ownProps).channelID,!n.mutate||!t)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),d=null,"number"==typeof l?d=Object(s.a)(l):"string"==typeof l&&(d=l),[4,n.mutate({variables:{input:{channelID:t,bannedUserLogin:a,expiresIn:d,reason:c}},update:function(e,n){return function(e,t,n){if(t&&t.data&&t.data.banUserFromChatRoom&&t.data.banUserFromChatRoom.ban&&t.data.banUserFromChatRoom.ban.bannedUser&&t.data.banUserFromChatRoom.ban.bannedUser.id){var a=Object(r.a)(e,n,t.data.banUserFromChatRoom.ban.bannedUser.id);if(!a)return;e.writeQuery({query:o,variables:{targetUserID:t.data.banUserFromChatRoom.ban.bannedUser.id,channelID:n},data:i.__assign({},a,{chatRoomBanStatus:{isPermanent:t.data.banUserFromChatRoom.ban.isPermanent,__typename:"ChatRoomBanStatus"}})})}}(e,n,t)}})];case 2:return[2,u.sent().data];case 3:throw u.sent(),new Error("Unable to ban user");case 4:return[3,6];case 5:throw new Error("Ban user mutation is not ready");case 6:return[2]}})})}}}})}},"j+2s":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatList_Badges"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"selectedBadge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:256}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChatList_Badges($channelLogin: String!) {\nbadges {\n...badge\n}\nuser(login: $channelLogin) {\nid\nbroadcastBadges {\n...badge\n}\nself {\nselectedBadge {\n...badge\n}\ndisplayBadges {\n...badge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("IKE4").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},j0ar:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("x1M1"),s=n("hnjF"),l=n("+80q"),c=n("PL8s"),d=n("b7S+"),u=(n("9KaG"),function(e){function t(t){var n=e.call(this,t)||this;return n.onImageLoad=function(){n.setState({imageLoaded:!0})},n.onMouseOver=function(){n.setState({isHovering:!0})},n.onMouseOut=function(){n.setState({isHovering:!1})},n.renderImage=function(){var e=null,t=a("chat-image",{"chat-image__animated":!!n.props.cheerText&&n.state.imageLoaded},n.props.className);if(n.props.srcSet.themed)e=r.createElement(s.g,{display:n.state.imageLoaded?s.d.InlineBlock:s.d.Hide},r.createElement(o.a,{alt:n.props.alt,className:t,defaultRes:n.props.srcKey,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,sources:n.props.srcSet}));else{for(var i=[],l=0,c=Object.keys(n.props.srcSet.sources);l<c.length;l++){var d=c[l];i.push(n.props.srcSet.sources[d]+" "+d)}e=r.createElement(s.g,{display:n.state.imageLoaded?s.d.InlineBlock:s.d.Hide},r.createElement("img",{className:t,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,src:n.props.srcSet.sources[n.props.srcKey],srcSet:i.join(","),alt:n.props.alt}))}return e},n.renderPlaceholder=function(){return n.state.imageLoaded?null:r.createElement(s.g,{display:s.d.InlineBlock},r.createElement(l.a,{type:l.e.Span,className:"chat-image__placeholder",align:s.l.Top},r.createElement(c.a,{height:28,width:28})))},n.state={imageLoaded:!1,isHovering:!1},n}return i.__extends(t,e),t.prototype.render=function(){var e;return e=this.state.isHovering&&this.state.imageLoaded?r.createElement(d.a,{direction:this.props.tooltipDirection||d.c.Top,label:this.props.alt,display:s.d.Inline,offsetY:"0.9rem","data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText):r.createElement("span",{"data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText),this.props.cheerText?r.createElement(l.a,{type:l.e.Span,noWrap:!0},e):e},t}(r.Component));n.d(t,"a",function(){return u})},j426:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsDescription_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:98}};n.loc.source={body:"query ClipsDescription_User {\ncurrentUser {\nid\nroles {\nisStaff\nisSiteAdmin\n}\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jBwP:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("1rIY"),s=n("W/3w"),l=(i=Object(o.a)("ChatRoomStateContext",{followerDuration:s.a,followerMode:!1,slowMode:!1,slowModeDuration:120,subsOnlyMode:!1,updateRoomState:function(e){return null}})).InnerProvider,c=i.withContext,d=function(e){function t(t){var n=e.call(this,t)||this;return n.updateRoomState=function(e){n.setState(function(t){return{followerMode:void 0!==e.followersOnly?e.followersOnly:t.followerMode,followerDuration:void 0!==e.followersOnlyRequirement?e.followersOnlyRequirement:t.followerDuration,slowMode:void 0!==e.slowMode?e.slowMode:t.slowMode,slowModeDuration:e.slowModeDuration||t.slowModeDuration,subsOnlyMode:void 0!==e.subsOnly?e.subsOnly:t.subsOnlyMode}})},n.state={followerDuration:s.a,followerMode:!1,slowMode:!1,slowModeDuration:120,subsOnlyMode:!1,updateRoomState:n.updateRoomState},n}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(l,{value:this.state},this.props.children)},t}(r.Component),u=d;n.d(t,!1,function(){return l}),n.d(t,"b",function(){return c}),n.d(t,!1,function(){return d}),n.d(t,"a",function(){return u})},jCkG:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"targetedModAction"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsTargetedModActionsEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"targetedModActionDetails"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"targetedModActionDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TargetedModActionDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bannedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expiresAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[]}]}}],loc:{start:0,end:361}};n.loc.source={body:"# fragments for targeted mod actions on the mod logs query\nfragment targetedModAction on ModLogsTargetedModActionsEntry {\nid\naction\ntimestamp\nchannel {\nid\nlogin\n}\ntarget {\nid\nlogin\n}\nuser {\nid\nlogin\n}\ndetails {\n...targetedModActionDetails\n}\n__typename\n}\nfragment targetedModActionDetails on TargetedModActionDetails {\nbannedAt\ndurationSeconds\nexpiresAt\nreason\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},jPLR:function(e,t,n){},jeZI:function(e,t,n){},jh7r:function(e,t,n){"use strict";var i,a=n("TSYQ"),r=n("q1tI"),o=n("hnjF"),s=n("Ws8v"),l=n("X2PJ"),c=n("+80q"),d=n("7uM4"),u=n("sUnt");n("kF1+");!function(e){e[e.Live=1]="Live",e[e.Overlay=2]="Overlay"}(i||(i={}));var m=function(e){var t=e.icon&&r.createElement(u.a,{display:o.d.Flex,margin:{right:.5}},r.createElement(d.a,{asset:e.icon,width:10,height:10}));if(e.withBackground){var n=a("preview-card-stat",{"preview-card-stat--live":e.withBackground===i.Live});return r.createElement(s.a,{alignItems:o.b.Center,background:e.withBackground===i.Overlay?l.a.Overlay:void 0,borderRadius:l.b.Small,className:n,color:l.c.Overlay,display:o.d.Flex,fontSize:l.d.Size6,justifyContent:o.h.Center},t,r.createElement(c.a,null,e.value))}return r.createElement(s.a,{className:"preview-card-stat",color:l.c.Overlay,display:o.d.Flex,padding:{x:.5}},t,r.createElement(c.a,null,e.value))};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return m})},jrTF:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsLeaderboard"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsLeaderboard"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"bitsLeaderboardEdge"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"secondsRemaining"},arguments:[],directives:[]}]}}],loc:{start:0,end:185}};i.loc.source={body:'#import "twilight/features/bits/models/bits-leaderboard-edge-fragment.gql"\nfragment bitsLeaderboard on BitsLeaderboard {\nid\nitems {\nedges { ...bitsLeaderboardEdge }\n}\nsecondsRemaining\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("3ag2").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},jsEL:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("u5aL"),s=n("sUnt"),l=n("+80q"),c=n("dEDE"),d=n("Ws8v"),u=n("X2PJ"),m=n("hnjF"),p=n("XQbB"),h=(n("wC0O"),{TITLE:"clips-modal-title",MAIN_BODY:"clips-modal-main-body",SUCCESS_BODY:"clips-modal-success-body",ERROR_BODY:"clips-modal-error-body",SUBMIT_BUTTON:"clips-modal-submit-button",CANCEL_BUTTON:"clips-modal-cancel-button"}),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderSuccess=function(){return t.props.successContent?a.createElement(d.a,{"data-test-selector":h.SUCCESS_BODY,padding:{x:2,y:1},margin:{bottom:1},borderMarked:!0,background:u.a.Alt,fullWidth:!0},a.createElement(l.a,{type:l.e.Strong},t.props.successContent)):null},t.renderError=function(){return t.props.errorContent?a.createElement(d.a,{"data-test-selector":h.ERROR_BODY,padding:{x:1,y:.5},margin:{bottom:1},borderMarked:!0,background:u.a.Alt,fullWidth:!0},a.createElement(l.a,{type:l.e.Strong,color:u.c.Error},t.props.errorContent)):null},t.onSubmit=function(){t.props.onSubmit()},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.successContent?a.createElement(o.a,{onClickOut:this.props.onClose},a.createElement(d.a,{padding:2,background:u.a.Base,className:"clip-modal"},this.renderSuccess(),a.createElement(s.a,{display:m.d.Flex,justifyContent:m.h.Center},a.createElement(s.a,{margin:{x:1}},a.createElement(c.a,{"data-test-selector":h.CANCEL_BUTTON,onClick:this.props.onClose},Object(r.d)("Close","ClipsModal")))))):a.createElement(o.a,{onClickOut:this.props.onClose},a.createElement(d.a,{padding:2,background:u.a.Base,className:"clip-modal"},a.createElement(d.a,{"data-test-selector":h.TITLE,borderBottom:!0,margin:{bottom:2},padding:{bottom:1}},this.props.title),a.createElement(d.a,{"data-test-selector":h.MAIN_BODY,borderBottom:!0,margin:{bottom:2},padding:{bottom:2}},this.renderError(),this.props.body),a.createElement(s.a,{display:m.d.Flex,justifyContent:m.h.Center},a.createElement(s.a,{margin:{x:1}},a.createElement(c.a,{"data-test-selector":h.CANCEL_BUTTON,type:c.d.Text,onClick:this.props.onClose},Object(r.d)("Cancel","ClipsModal"))),a.createElement(s.a,{margin:{x:1}},a.createElement(c.a,{"data-test-selector":h.SUBMIT_BUTTON,type:this.props.buttonType?this.props.buttonType:c.d.Default,onClick:this.onSubmit,disabled:this.props.submitDisabled},this.props.buttonContent),this.props.isLoading&&a.createElement(p.a,{delay:0})))))},t}(a.Component),f=n("iyGE"),v=n("GnwI"),b=86400,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoading:!1,hasErrored:!1,hasSucceeded:!1},t.renderTitle=function(){return t.props.isTemporary?a.createElement(l.a,{type:l.e.H5,ellipsis:!0},Object(r.d)("Timeout this Clip Creator for 24 hours from Your Channel","ClipsModalBanUser")):a.createElement(l.a,{type:l.e.H5,ellipsis:!0},Object(r.d)("Ban this Clip Creator from Your Channel","ClipsModalBanUser"))},t.renderBodyText=function(){return t.props.isTemporary?a.createElement(l.a,null,Object(r.d)("{clipCreator} will temporarily be timed out from creating clips and chatting in your channel for 24 hours.",{clipCreator:t.props.targetUser.displayName},"ClipsModalBanUser")):a.createElement(l.a,null,Object(r.d)("{clipCreator} will be permanently banned from creating clips and chatting in your channel.",{clipCreator:t.props.targetUser.displayName},"ClipsModalBanUser"))},t.renderButtonText=function(){return t.props.isTemporary?Object(r.d)("Timeout User","ClipsModalBanUser"):Object(r.d)("Ban User","ClipsModalBanUser")},t.renderSuccess=function(){return t.state.hasSucceeded?Object(r.d)("Success!","ClipsModalBanUser"):null},t.renderFailure=function(){return t.state.hasErrored?t.props.isTemporary?Object(r.d)("There was a problem timing out this clip creator","ClipsModalBanUser"):Object(r.d)("There was a problem banning this clip creator","ClipsModalBanUser"):null},t.banUser=function(){return i.__awaiter(t,void 0,void 0,function(){var e,t,n;return i.__generator(this,function(i){switch(i.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e=this.props.targetUser.login,t=this.props.isTemporary?this.props.banUserMutation(e,b):this.props.banUserMutation(e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t];case 2:return!(n=i.sent().banUserFromChatRoom)||n.error?this.setState({hasErrored:!0,isLoading:!1}):this.setState({hasSucceeded:!0,isLoading:!1}),[3,4];case 3:return i.sent(),this.setState({hasErrored:!0,isLoading:!1}),[3,4];case 4:return[2]}})})},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return a.createElement(g,{onSubmit:this.banUser,onClose:this.props.onClose,title:this.renderTitle(),body:this.renderBodyText(),buttonContent:this.renderButtonText(),buttonType:c.d.Alert,submitDisabled:this.state.isLoading||this.state.hasSucceeded,successContent:this.renderSuccess(),errorContent:this.renderFailure(),isLoading:this.state.isLoading})},t}(a.Component),C=Object(v.withLatencyTracking)("ClipsModalBanUser")(Object(f.a)(function(e){return{channelID:e.broadcasterID}})(k)),y=n("fvjX"),S=n("yR8l"),E=n("vUXZ");function N(e){return Object(S.a)(E,e)}var w=n("fPaz"),_=n("DJtx"),D=(n("n9Ey"),{isLoading:!1,hasErrored:!1,hasSucceeded:!1}),O=function(e){function t(t){var n=e.call(this,t)||this;return n.onDeleteClick=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),this.props.data.clip?[4,this.props.deleteClip(this.props.slug)]:[2];case 2:return e.sent(),this.setState({isLoading:!1,hasSucceeded:!0}),[3,4];case 3:return e.sent(),this.setState({isLoading:!1,hasErrored:!0}),[3,4];case 4:return[2]}})})},n.state=D,n}return i.__extends(t,e),t.prototype.render=function(){var e=[a.createElement(l.a,{key:"title",type:l.e.H4},Object(r.d)("Delete This Clip","ClipsModalDelete")),a.createElement(s.a,{key:"message",margin:{top:1}},a.createElement(l.a,{type:l.e.P,color:u.c.Alt2},Object(r.d)("This clip will be permanently deleted.","ClipsModalDelete")))];if(!this.props.data.clip)return null;var t=null;this.props.data.clip.curator&&this.props.data.clip.curator.login&&(t=a.createElement("span",null,"",Object(r.d)("Clipped by {curator}",{curator:this.props.data.clip.curator.login},"ClipsModalDelete")));var n=a.createElement(d.a,{display:m.d.Flex,flexWrap:m.f.NoWrap},a.createElement(s.a,{className:"clips-modal-delete__thumb",margin:{right:1}},a.createElement(w.b,{ratio:w.c.Aspect16x9},a.createElement("img",{src:this.props.data.clip.thumbnailURL}))),a.createElement(s.a,null,a.createElement(l.a,{type:l.e.H5},this.props.data.clip.title),a.createElement(l.a,{color:u.c.Alt2},Object(r.d)("{created, date, medium}",{created:new Date(this.props.data.clip.createdAt)},"ClipsModalDelete"),t),a.createElement(l.a,{color:u.c.Alt2},Object(r.d)("{viewCount, number} views",{viewCount:this.props.data.clip.viewCount},"ClipsModalDelete"))));return a.createElement(g,{onSubmit:this.onDeleteClick,onClose:this.props.onClose,title:e,body:n,buttonContent:Object(r.d)("Delete","ClipsModalDelete"),buttonType:c.d.Alert,submitDisabled:this.state.hasSucceeded||this.state.isLoading,successContent:this.state.hasSucceeded?Object(r.d)("Success!","ClipsModalDelete"):null,errorContent:this.state.hasErrored?Object(r.d)("There was a problem deleting this clip.","ClipsModalDelete"):null,isLoading:this.state.isLoading})},t}(a.Component),I=Object(y.compose)(Object(S.a)(_),N({props:function(e){return{deleteClip:function(t){return i.__awaiter(void 0,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.mutate({variables:{input:{slugs:[t]}}})];case 1:return i.sent(),e.ownProps.onDelete&&e.ownProps.onDelete(t),[3,3];case 2:throw n=i.sent(),r.k.error(n,"Failed to delete clip"),n;case 3:return[2]}})})}}}}))(O),T=n("oJmH"),M=n("Vsf8"),L={isLoading:!1,hasErrored:!1,hasSucceeded:!1},F=function(e){function t(t){var n=e.call(this,t)||this;return n.deleteAll=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.deleteAllClips(this.props.broadcastID,this.props.videoID)];case 2:return e.sent(),this.setState({isLoading:!1,hasSucceeded:!0}),[3,4];case 3:return e.sent(),this.setState({isLoading:!1,hasErrored:!0}),[3,4];case 4:return[2]}})})},n.renderSuccess=function(){return n.state.hasSucceeded?Object(r.d)("A request has been made to delete the clip. Please wait a few minutes for this to take effect.","ClipsModalDeleteAll"):null},n.renderFailure=function(){return n.state.hasErrored?Object(r.d)("There was a problem deleting this clip.","ClipsModalDeleteAll"):null},n.state=L,n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=a.createElement(l.a,{type:l.e.P},Object(r.d)("This clip and all other clips created from the same video will be permanently deleted.","ClipsModalDeleteAll"));return a.createElement(g,{onSubmit:this.deleteAll,onClose:this.props.onClose,title:a.createElement(l.a,{type:l.e.H4},Object(r.d)("Delete All Clips from Related Video","ClipsModalDeleteAll")),body:e,buttonContent:Object(r.d)("Delete","ClipsModalDeleteAll"),buttonType:c.d.Alert,submitDisabled:this.state.isLoading||this.state.hasSucceeded||""===this.props.broadcastID,isLoading:this.state.isLoading,successContent:this.renderSuccess(),errorContent:this.renderFailure()})},t}(a.Component),x=Object(T.compose)(Object(v.withLatencyTracking)("ClipsModalDeleteAll"),N({props:function(e){return{deleteAllClips:function(t,n){return i.__awaiter(void 0,void 0,void 0,function(){var a,o,s;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),a=void 0,n?[4,e.mutate({variables:{input:{videoID:n}}})]:[3,2];case 1:return o=i.sent(),a=o.data,[3,5];case 2:return t?[4,e.mutate({variables:{input:{broadcastID:t}}})]:[3,4];case 3:return o=i.sent(),a=o.data,[3,5];case 4:throw new Error("Invalid broadcastID specified for deleteAllClips");case 5:return e.ownProps.onDeleteAll&&a.deleteClips&&a.deleteClips.clips&&e.ownProps.onDeleteAll(a.deleteClips.clips),[3,7];case 6:throw s=i.sent(),r.k.error(s,"Failed to delete clips from VOD"),s;case 7:return[2]}})})}}}}),Object(S.a)(M,{props:function(e){var t=e.data.clip;return t?{videoID:t.video?t.video.id:null,broadcastID:t.broadcast&&t.broadcast.id||""}:{videoID:null,broadcastID:""}},options:function(e){return{variables:{slug:e.slug}}}}))(F),j={isLoading:!1,hasErrored:!1,hasSucceeded:!1},A=function(e){function t(t){var n=e.call(this,t)||this;return n.renderSuccess=function(){return n.state.hasSucceeded?Object(r.d)("Clips successfully deleted.","ClipsModalBatchDelete"):null},n.renderError=function(){return n.state.hasErrored?Object(r.d)("There was a problem deleting this clip.","ClipsModalBatchDelete"):null},n.onDeleteClick=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:this.setState({isLoading:!0,hasSucceeded:!1,hasErrored:!1}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.props.deleteClips()];case 2:return e.sent(),this.setState({hasSucceeded:!0,isLoading:!1}),[3,4];case 3:return e.sent(),this.setState({hasErrored:!0,isLoading:!1}),[3,4];case 4:return[2]}})})},n.state=j,n}return i.__extends(t,e),t.prototype.render=function(){var e=a.createElement(l.a,{type:l.e.H4},Object(r.d)("Delete these clips?","ClipsModalBatchDelete")),t=a.createElement(l.a,{type:l.e.P},Object(r.d)("These clips will be permanently deleted. Are you sure?","ClipsModalBatchDelete"));return a.createElement(g,{onSubmit:this.onDeleteClick,onClose:this.props.onClose,title:e,body:t,buttonContent:Object(r.d)("Delete","ClipsModalBatchDelete"),buttonType:c.d.Alert,submitDisabled:this.state.hasSucceeded||this.state.isLoading,isLoading:this.state.isLoading,successContent:this.renderSuccess(),errorContent:this.renderError()})},t}(a.Component),P=N({props:function(e){return{deleteClips:function(){return i.__awaiter(void 0,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.mutate({variables:{input:{slugs:e.ownProps.clipSlugs}}})];case 1:return n.sent(),e.ownProps.onBatchDelete&&e.ownProps.onBatchDelete(),[3,3];case 2:throw t=n.sent(),r.k.error(t,"Failed to delete clips"),t;case 3:return[2]}})})}}}})(A);n.d(t,"a",function(){return g}),n.d(t,"b",function(){return C}),n.d(t,"d",function(){return I}),n.d(t,"e",function(){return x}),n.d(t,"c",function(){return P})},jy35:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"message"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Message"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageContent"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageSender"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageContent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MessageContent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fragments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"messageParticle"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageSender"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"messageParticle"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MessageFragment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"cheermoteFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emoteFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mentionFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"automodFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"cheermoteFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheermoteToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitsAmount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prefix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emoteFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"emoteID"},name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mentionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"automodFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AutoMod"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:907}};n.loc.source={body:"fragment message on Message {\nid\ndeletedAt\nsentAt\ncontent {\n...messageContent\n}\nsender {\n...messageSender\n}\n__typename\n}\nfragment messageContent on MessageContent {\ntext\nfragments {\n...messageParticle\n}\n__typename\n}\nfragment messageSender on User {\nid\nlogin\nchatColor\ndisplayName\ndisplayBadges(channelID: $channelID) {\nsetID\nversion\n__typename\n}\n__typename\n}\nfragment messageParticle on MessageFragment {\ntext\ncontent {\n... on CheermoteToken {\n...cheermoteFragment\n}\n... on Emote {\n...emoteFragment\n}\n... on User {\n...mentionFragment\n}\n... on AutoMod {\n...automodFragment\n}\n__typename\n}\n__typename\n}\nfragment cheermoteFragment on CheermoteToken {\nbitsAmount\nprefix\ntier\n__typename\n}\nfragment emoteFragment on Emote {\nemoteID: id\nsetID\ntoken\n__typename\n}\nfragment mentionFragment on User {\nid\nlogin\ndisplayName\n__typename\n}\nfragment automodFragment on AutoMod {\ntopics {\ntype\nweight\n__typename\n}\n__typename\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},k0nM:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("pVnL"),a=n.n(i),r=n("VbXa"),o=n.n(r),s=n("q1tI"),l=n("ygYM"),c=n("hnjF"),d=n("sUnt"),u=n("cNYe"),m=n("4wKg"),p=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.render=function(){var e=[];return this.props.items&&this.props.items.map(function(t,n){t.type?e.push(s.createElement(u.a,a()({},t,{key:n}))):e.push(s.createElement(m.a,a()({key:n},t)))}),s.createElement(l.a,{elevation:this.props.elevation,offsetX:this.props.offsetX,offsetY:this.props.offsetY,direction:this.props.direction,noTail:this.props.noTail,size:this.props.size?this.props.size:l.c.Small,show:this.props.show},s.createElement(c.g,{display:c.d.Flex,flexDirection:c.e.Column},s.createElement("div",{style:{maxHeight:this.props.maxHeight}},s.createElement(d.a,{overflow:c.i.Auto,padding:1},e,this.props.children))))},t}(s.Component);p.displayName="DropDownMenu"},k7qK:function(e,t,n){},"kF1+":function(e,t,n){},kPBf:function(e,t){},kPCN:function(e,t,n){},kSkr:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BlockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BlockUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:94}};n.loc.source={body:"mutation BlockUser($input: BlockUserInput!) {\nblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},kVMo:function(e,t,n){},kVrx:function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return h});var i=n("/7QA"),a=n("f00E"),r=n("4rCz"),o=n("BKFw"),s=n("NZDK"),l=n("9kXc"),c=n("BZOq"),d=n("V3Pk"),u=n("WK0g"),m=function(e,t){return Object(u.b)(t).then(function(n){e.dispatch(Object(d.h)(n,t.bitsConfig))},function(){e.dispatch(Object(d.g)(Object(r.d)("Unable to retrieve messages, please try again.","routines-moderation")))})},p=function(e,t){return Object(u.a)(t).then(function(){e.dispatch(Object(d.f)(t.bannedUser))}).catch(function(t){return e.dispatch(Object(d.e)(t))})},h=function(e,t){var n=new s.a({appId:i.a.algoliaApplicationID,apiKey:i.a.algoliaAPIKey,apolloClient:i.q.apollo.client,logger:i.k,config:i.a,stats:i.q.stats}),r=a.a(),u=Object(c.b)({broadcastType:o.c,broadcasterId:t.creatorId}),m=u.typeID,p=u.params;return n.queryForType(m,t.searchTerm,r,p).then(function(t){var n=Object(l.b)({searchResults:t});n.currentVideoResults&&e.dispatch(Object(d.i)(n.currentVideoResults))}).catch(function(){})}},"kY/a":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewerCardModComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channelUser"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"modLogs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetID"},value:{kind:"Variable",name:{kind:"Name",value:"targetID"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"moderatorComments"},directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moderatorComments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsCommentConnection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"moderatorComment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPreviousPage"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"moderatorComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ModLogsComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:494}};n.loc.source={body:"query ViewerCardModComments($channelID: ID! $targetID: ID! $cursor: Cursor) {\nchannelUser: user(id: $channelID) {\nid\nmodLogs {\ncomments(targetID: $targetID first: 100 after: $cursor) {\n...moderatorComments\n}\n}\n}\n}\nfragment moderatorComments on ModLogsCommentConnection {\nedges {\ncursor\nnode {\n...moderatorComment\n}\n}\npageInfo {\nhasNextPage\nhasPreviousPage\n}\n}\nfragment moderatorComment on ModLogsComment {\nid\ntimestamp\nchannel {\nid\n}\nauthor {\nid\nlogin\ndisplayName\nchatColor\n}\ndetails {\ntext\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},kmJV:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}}]}}],loc:{start:0,end:301}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\n#import "twilight/features/channel/queries/channel-current-user.gql"\nquery ChannelRoot_Channel(\n$currentChannelLogin: String!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nuser(login: $currentChannelLogin) {\n...channel\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("BbLt").definitions)),i.definitions=i.definitions.concat(r(n("NJiF").definitions)),e.exports=i},knbN:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n("XIZb"),a=Object(i.a)("ChatRestrictions"),r=(a.InnerProvider,a.withChatServiceProvider),o=a.withContext,s=r,l=o(function(e){return{chatRestrictionsAPI:e.serviceAPI,setChatRestrictionsAPI:e.setServiceAPI}})},"ky+Y":function(e,t,n){},kyTI:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("VwyG"),s=n("vRsq"),l=n("GnwI"),c=n("sUnt"),d=n("hnjF"),u=n("dEDE"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this;return a.createElement(o.a,{ownerLogin:this.props.channelLogin,permittedRoles:{owner:!0,editor:!0,staff:!1}},function(t){return t.permitted?a.createElement(c.a,{display:d.d.InlineFlex},a.createElement(u.a,{blurAfterClick:!0,linkTo:{pathname:Object(s.m)(e.props.channelLogin),state:{content:e.props.trackingContext&&e.props.trackingContext.content,medium:e.props.trackingContext&&e.props.trackingContext.medium}}},Object(r.d)("Customize Layout","CustomShelvesEditing"))):null})},t}(a.Component),p=Object(l.withLatencyTracking)("RoleRestrictedCustomizeButton",{autoReportInteractive:!0})(m)},l41m:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return k});var i=n("mrSG"),a=n("DMoW"),r=n("DpwM"),o=n("g807"),s=n("RNNG"),l=n("pU2t"),c=n("KD05"),d={beginSec:Number.MIN_VALUE,endSec:Number.MAX_VALUE},u=function(e,t){return t.commenter in e},m=function(e,t,n,i){var a=e.vodChat.comments,r=a.currentVideoTime,c=a.comments;return 0===c.commentCount?[]:Array.from(new o.a(c)).reduce(function(a,o){return o.offset>r?a:(o.comments.forEach(function(r){var o=Object(s.b)(c,r);if(void 0!==o&&(n||!u(i,o)))return o.source===l.b&&C(e.vodChat.comments.isReplayFilterOn,t)?a:a.push(f(o,e,n,i,t||void 0))}),a)},[]).sort(h)},p=function(e){var t=function(e){return e.vodChat.comments.comments}(e);return Object.keys(t.parentComments).map(function(n){return b(t.parentComments[n],e)}).filter(function(e){return void 0!==e.video}).sort(g)},h=function(e,t){return e.comment.contentOffset===t.comment.contentOffset?e.comment.createdAt.getTime()-t.comment.createdAt.getTime():e.comment.contentOffset-t.comment.contentOffset},g=function(e,t){return e.comment.createdAt.getTime()===t.comment.createdAt.getTime()?t.comment.contentOffset-e.comment.contentOffset:t.lastUpdated.getTime()-e.lastUpdated.getTime()},f=function(e,t,n,i,a){var o=new Array,s=new Array,l=t.vodChat.comments.comments.replies[e.id],c=e.createdAt;return Array.isArray(l)&&l.forEach(function(e){!n&&u(i,e)||(e.source===r.f&&C(t.vodChat.comments.isReplayFilterOn,a)?(s.push(f(e,t,n,i)),c=y(c,e.createdAt)):(o.push(f(e,t,n,i)),c=y(c,e.createdAt)))}),C(t.vodChat.comments.isReplayFilterOn,a)?{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:c,replies:s.sort(h)}:{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:c,replies:o.sort(h)}},v=function(e,t){var n=new Array,i=t.vodChat.comments.comments.replies[e.id],a=e.createdAt;return Array.isArray(i)&&i.forEach(function(e){n.push(v(e,t)),a=y(a,e.createdAt)}),{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:a,replies:n.sort(h)}},b=function(e,t){var n=v(e,t);return i.__assign({},n,{video:t.vodChat.moderation.videos[Object(c.a)(e.contentId)]})},k=function(e){return 0===e.commentCount?d:{beginSec:e.minOffset,endSec:e.maxOffset}},C=function(e,t){return!!t&&(e&&(t===a.q.ARCHIVE||t===a.q.HIGHLIGHT))},y=function(e,t){return e.getTime()>t.getTime()?e:t}},lNGo:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return p});var i=n("mrSG"),a=n("/7QA"),r=n("DMoW"),o=n("2xye"),s=n("YXxK"),l=n("04j6"),c=n("oi4T"),d=function(e){return i.__awaiter(void 0,void 0,void 0,function(){var t,n,r,s;return i.__generator(this,function(d){switch(d.label){case 0:t=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,a.q.apollo.client.query({query:l,variables:{id:e.channelID}})];case 2:return t=d.sent(),[3,4];case 3:return n=d.sent(),a.k.error(n,"ChatEvent query failed."),[3,4];case 4:return t&&t.data||a.k.warn("ChatEvent query failed; Chat tracking data sent may be incomplete."),r=t&&t.data&&t.data.user||null,s=i.__assign({},Object(c.b)(e),{viewer_context:e.viewerContext,broadcast_id:a.p.getVideoPlayerTrackingData().broadcastID,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,game:r&&r.stream&&r.stream.game&&r.stream.game.name,live:!!(r&&r.stream&&r.stream.id.length>0),partner:r&&r.isPartner||!1,play_session_id:a.p.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode}),a.p.track(o.SpadeEventType.Chat,s),[2]}})})},u=function(e){return i.__awaiter(void 0,void 0,void 0,function(){var t,n,r,s;return i.__generator(this,function(d){switch(d.label){case 0:t=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,a.q.apollo.client.query({query:l,variables:{id:e.channelID}})];case 2:return t=d.sent(),[3,4];case 3:return n=d.sent(),a.k.error(n,"ChatEvent query failed for CheerEvent."),[3,4];case 4:return t&&t.data||a.k.warn("ChatEvent query failed; Cheer tracking data sent may be incomplete."),r=t&&t.data&&t.data.user||null,s=i.__assign({},Object(c.a)(e),{broadcast_id:a.p.getVideoPlayerTrackingData().broadcastID,bits_value:e.bitsValue,cheermote:e.cheermote,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,game:r&&r.stream&&r.stream.game&&r.stream.game.name,is_anonymous_cheer:e.isAnonymousCheer,live:!!(r&&r.stream&&r.stream.id.length>0),partner:r&&r.isPartner||!1,play_session_id:a.p.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode,transaction_id:e.transactionID,viewer_context:e.viewerContext}),a.p.track(o.SpadeEventType.ChatClientCheer,s),[2]}})})},m=function(e){return i.__awaiter(void 0,void 0,void 0,function(){var t,n,r,s;return i.__generator(this,function(d){switch(d.label){case 0:t=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,a.q.apollo.client.query({query:l,variables:{id:e.channelID}})];case 2:return t=d.sent(),[3,4];case 3:return n=d.sent(),a.k.error(n,"ChatEvent query failed for CheerEvent."),[3,4];case 4:return t&&t.data||a.k.warn("ChatEvent query failed; Cheer tracking data sent may be incomplete."),r=t&&t.data&&t.data.user||null,s=i.__assign({},Object(c.a)(e),{broadcast_id:a.p.getVideoPlayerTrackingData().broadcastID,bits_value:e.bitsValue,cheermote:e.cheermote,channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,error_type:e.errorType,game:r&&r.stream&&r.stream.game&&r.stream.game.name,is_anonymous_cheer:e.isAnonymousCheer,live:!!(r&&r.stream&&r.stream.id.length>0),partner:r&&r.isPartner||!1,play_session_id:a.p.getVideoPlayerTrackingData().playSessionID,player:e.player,ritual_nca:e.fromNewChatterRitual||!1,sub_only_mode:e.subOnlyMode,viewer_context:e.viewerContext}),a.p.track(o.SpadeEventType.ChatClientCheerError,s),[2]}})})},p=function(e){switch(e){case r.Xa.AMOUNT_BELOW_MIN_BITS:return s.c.BelowMin;case r.Xa.AUTO_MOD_MESSAGE:return s.c.AutoModMessage;case r.Xa.AUTO_MOD_PENDING:return s.c.AutoModPending;case r.Xa.CHANNEL_BLOCKED_TERMS:return s.c.ChannelBlockedTerms;case r.Xa.CHANNEL_INELIGIBLE:return s.c.ChannelIneligible;case r.Xa.EMOTE_AMOUNT_BELOW_MIN_BITS:return s.c.BelowMinEmote;case r.Xa.INSUFFICIENT_BALANCE:return s.c.BitsUnavailable;case r.Xa.INVALID_ANONYMOUS_MESSAGE:return s.c.InvalidAnonymousMessage;case r.Xa.INVALID_BITS_AMOUNT:case r.Xa.INVALID_BITS_MESSAGE:return s.c.InvalidBitsMessage;case r.Xa.INVALID_EVENT_ID:return s.c.InvalidEventId;case r.Xa.MESSAGE_LENGTH_EXCEEDED:return s.c.InputAboveMaxLength;case r.Xa.REQUEST_THROTTLED:return s.c.RequestThrottled;case r.Xa.TOO_LARGE_BITS_EMOTE:return s.c.AboveMaxEmote;case r.Xa.TOO_LARGE_CHEER:return s.c.AboveMaxCheer;case r.Xa.USER_BANNED:return s.c.UserBanned;case r.Xa.USER_INELIGIBLE:return s.c.UserIneligible;case r.Xa.USER_SUSPENDED:return s.c.UserSuspended;case r.Xa.ZALGO_MESSAGE:return s.c.ZalgoMessage;default:return s.c.Unknown}}},lRNp:function(e,t,n){},lXDb:function(e,t,n){},lZdE:function(e,t,n){"use strict";function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n.d(t,"a",function(){return i})},lh1U:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Thud_Recommendations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"currentChannelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"categoryTags"},name:{kind:"Name",value:"tags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tagType"},value:{kind:"EnumValue",value:"CONTENT"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tagFragment"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tags"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tagFragment"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"offlineHighlight"},name:{kind:"Name",value:"videos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"HIGHLIGHT"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VideoEdge"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"offlinePremiere"},name:{kind:"Name",value:"videos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"PAST_PREMIERE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VideoEdge"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"offlineArchive"},name:{kind:"Name",value:"videos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ARCHIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VideoEdge"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:596}};i.loc.source={body:'#import "twilight/features/tags/models/tag-fragment.gql"\n#import "twilight/features/video-preview-card/models/video-edge-fragment.gql"\nquery Thud_Recommendations(\n$currentChannelLogin: String!\n) {\nuser(login: $currentChannelLogin) {\nid\nbroadcastSettings {\nid\ngame {\nid\nname\ncategoryTags: tags(tagType: CONTENT) {\n...tagFragment\n}\n}\n}\nstream {\nid\ntags {\n...tagFragment\n}\n}\nofflineHighlight: videos(first:1 type:HIGHLIGHT){\nedges{\n...VideoEdge\n}\n}\nofflinePremiere: videos(first:1 type:PAST_PREMIERE){\nedges{\n...VideoEdge\n}\n}\nofflineArchive: videos(first:1 type:ARCHIVE){\nedges{\n...VideoEdge\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("iiOx").definitions)),i.definitions=i.definitions.concat(r(n("qy/S").definitions)),e.exports=i},"lpj/":function(e,t,n){},lw3P:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("yR8l"),a=n("ru7j");function r(){return Object(i.a)(a,{props:function(e){return e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser&&e.data.currentUser.blockedUsers?{blockedUsers:e.data.currentUser.blockedUsers.reduce(function(e,t){return t&&t.id&&e.push(t.id),e},[])}:{blockedUsers:[]}},skip:function(e){return!(e.isLoggedIn||e.authToken)}})}},m493:function(e,t,n){},mBWp:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Tracking_CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasTurbo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:86}};n.loc.source={body:"query Whispers_Tracking_CurrentUser {\ncurrentUser {\nid\nhasTurbo\navailability\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},mGiD:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeCollection"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelVideo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeCollection"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCollection"},directives:[]}]}}]}}],loc:{start:0,end:517}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-video.gql"\n#import "twilight/features/channel/queries/channel-collection.gql"\nquery ChannelRoot_Video(\n$videoID: ID!\n$collectionID: ID!\n$includeCollection: Boolean!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nvideo(id: $videoID options: { includePrivate: true }) {\n...channelVideo\n}\ncollection(id: $collectionID) @include(if: $includeCollection) {\n...channelCollection\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("NJiF").definitions)),i.definitions=i.definitions.concat(r(n("RTtf").definitions)),i.definitions=i.definitions.concat(r(n("vtET").definitions)),e.exports=i},mmRu:function(e,t,n){"use strict";var i,a=n("/MKj"),r=n("mrSG"),o=n("q1tI"),s=n("u5aL"),l=n("/7QA"),c=n("7d/q"),d=n("7uM4"),u=function(e){return o.createElement(c.a,{icon:d.b.Emoticons,ariaLabel:Object(l.d)("Emote picker","EmotePickerButton"),type:e.isActive?c.c.Default:c.c.Secondary,onClick:e.onClick,"data-a-target":"emote-picker-button"})},m=n("fvjX"),p=n("yR8l"),h=n("x7UT"),g=n("Mj6i"),f=n("1/iK"),v=n("kRBY"),b=n("+pBb"),k=n("w1PT"),C=n("8EUQ"),y=n("KriR"),S=n("GzyO"),E=n("OpME"),N=function(e){return e.tier&&!isNaN(parseInt(e.tier,10))?parseInt(e.tier,10)/1e3:1},w=n("GnwI"),_=n("br9A"),D=n("8/mp"),O=n("2xye"),I=n("7SjK"),T=n("uG/k"),M=n("sUnt"),L=n("Ws8v"),F=n("hnjF"),x=n("+80q"),j=n("X2PJ"),A=(n("zyUW"),function(e){var t=null;return e.imgSrc&&(t=o.createElement(o.Fragment,null,o.createElement(T.a,{className:"emote-grid-section__header-image",src:e.imgSrc,alt:e.label}),o.createElement(M.a,{padding:{right:.5}}))),o.createElement(M.a,{position:F.j.Relative,padding:1,className:"emote-grid-section"},o.createElement(L.a,{alignItems:F.b.Center,display:F.d.Flex,padding:{x:1,bottom:.5}},t,o.createElement(x.a,{align:F.l.Middle,bold:!0,color:j.c.Alt},e.label)),o.createElement(I.a,{context:e.context,emotes:e.emotes,onClickEmote:e.onClickEmote,spaced:!0}))}),P=n("4VQm"),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkVisible=function(e,n){t.props.checkVisible(e,n)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerReceiver(this)},t.prototype.componentWillUnmount=function(){this.unregister&&this.unregister()},t.prototype.render=function(){return o.createElement(o.Fragment,null,this.props.children)},t}(o.Component),U=Object(P.c)(function(e){return{registerReceiver:e.registerReceiver}})(R),B=n("i4Ys"),V=(n("cr2a"),function(e){return o.createElement(M.a,{className:"emote-picker-tab-item "+(e.isActive?"emote-picker-tab-item--active":""),position:F.j.Relative},o.createElement(B.a,{"data-a-target":e.label,onClick:e.onClick,blurAfterClick:!0},o.createElement(M.a,{padding:1,display:F.d.InlineFlex},o.createElement(d.a,{asset:e.icon}))))}),H=n("oJmH"),G=n("DnOo"),q=n("a5fV"),W=n("dEDE"),z=n("CGUg"),Q=(n("GLn2"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.channelSubEmotes,n=e.channelSubscriptionProducts,i=e.subUpsellClickedEmote,a=n.find(function(e){return e.emoteSetID===i.setID});if(!a)return null;var s={};t.forEach(function(e){if(e.isLocked&&null!==e.setID&&void 0!==e.setID){var t=n.find(function(t){return t.emoteSetID===e.setID});t&&(s[t.emoteSetID]=t)}});var c=N(a),u=Object(l.d)("Subscribe at Tier {tierNumber}",{tierNumber:c},"EmotePickerCard"),m=[],p=[];t.forEach(function(e){var t=s[e.setID];t&&(N(t)<=c?p.push(r.__assign({},e,{isLocked:!1})):m.push(e))}),m.sort(function(e,t){var n=s[e.setID],i=s[t.setID],a=N(n);return N(i)-a});var h=m.concat(p),g=a.price.toString()||"";if(a.priceInfo){var f=a.priceInfo;g=Object(q.a)(Object(q.b)(f.total,f.exponent),f.currency)}var v=p.length>1?Object(l.d)("{numUnlocked} Emotes Included",{numUnlocked:p.length},"EmotePickerCard"):Object(l.d)("1 Emote Included","EmotePickerCard");return o.createElement(M.a,{className:"emote-sub-upsell"},o.createElement(L.a,{padding:{top:.5}},o.createElement(W.a,{type:W.d.Text,icon:d.b.AngleLeft,onClick:this.props.onBackClick,size:W.b.Small},Object(l.d)("Back","EmotePickerCard"))),o.createElement(L.a,{display:F.d.Flex,padding:{x:2,bottom:1}},o.createElement(M.a,{flexGrow:0,flexShrink:0,padding:{top:.5}},o.createElement(T.a,{src:this.getBigImageSrc(i.srcSet),alt:i.displayName||""})),o.createElement(M.a,{flexGrow:1,flexShrink:1,padding:{left:1}},o.createElement(x.a,{bold:!0},this.renderCopyHeader(c.toString())),o.createElement(x.a,null,this.renderCopyBody(c.toString(),p.length)))),o.createElement(M.a,{display:F.d.Flex,alignItems:F.b.Center,justifyContent:F.h.Center,padding:{x:2}},o.createElement(G.a,{customSubscribeNowMessage:u,isSubbedToTier:!1,fullWidth:!0,tierPrice:g,handleSubAction:this.props.handleSubAction,productName:a.name,url:a.url,isEsportChannel:this.props.isEsportChannel})),o.createElement(z.a,null,o.createElement("hr",{className:"emote-sub-upsell__divider"})),o.createElement(D.b,{className:"emote-sub-upsell__content"},o.createElement(M.a,null,o.createElement(M.a,{padding:{x:2}},o.createElement(x.a,{bold:!0},v)),o.createElement(M.a,{padding:{x:1,top:.5,bottom:3}},o.createElement(I.a,{emotes:h,spaced:!0,onClickEmote:this.props.onClickEmote})))))},t.prototype.renderCopyHeader=function(e){return Object(l.d)("{channelDisplayName} - Tier {tierNumber} Subscription",{tierNumber:e,channelDisplayName:this.props.channelDisplayName},"EmotePickerCard")},t.prototype.renderCopyBody=function(e,t){return 1===t?Object(l.d)("To unlock 1 emote and more subscriber benefits, subscribe at Tier {tierNumber}",{tierNumber:e},"EmotePickerCard"):Object(l.d)("To unlock {numEmotes} emotes and more subscriber benefits, subscribe at Tier {tierNumber}.",{tierNumber:e,numEmotes:t},"EmotePickercard")},t.prototype.getBigImageSrc=function(e){var t=e.split(" ");return 6===t.length?t[2]:t[0]},t}(o.Component)),Y=n("XQnt"),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.props.data&&(!this.props.data.loading||this.props.data.error)&&e.data&&e.data.loading&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return o.createElement(Q,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelSubscriptionProducts:this.subscriptionProducts,handleSubAction:this.props.handleSubAction,isEsportChannel:this.props.isEsportChannel,onBackClick:this.props.onBackClick,onClickEmote:this.props.onClickEmote,subUpsellClickedEmote:this.props.subUpsellClickedEmote})},Object.defineProperty(t.prototype,"subscriptionProducts",{get:function(){return this.props.data&&this.props.data.user&&this.props.data.user.subscriptionProducts?this.props.data.user.subscriptionProducts.filter(function(e){return null!==e}):this.props.channelSubscriptionProducts},enumerable:!0,configurable:!0}),t}(o.Component),X=Object(H.compose)(Object(p.a)(Y,{options:function(e){return{variables:{channelID:e.channelID}}}}),Object(w.withLatencyTracking)("EmoteSubUpsell"))(K);!function(e){e.FrequentlyUsed="frequently_used",e.CurrentChannel="current_channel",e.OtherChannel="other_subbed_channel",e.Unlocked="unlocked",e.Global="global"}(i||(i={}));var $,J=n("XQbB"),Z=n("ygYM"),ee=n("3Law");n("JGCS");!function(e){e.FrequentlyUsedEmotes="FREQUENTLY_USED_EMOTES",e.ChannelEmotes="CHANNEL_EMOTES",e.AllEmotes="ALL_EMOTES"}($||($={}));var te=function(e){function t(t){var n=e.call(this,t)||this;return n.onTabNavClick=function(e){if(n.scroll&&n.scroll.scrollContent&&e.currentTarget.getAttribute("data-a-target")){var t=e.currentTarget.getAttribute("data-a-target"),i=$.FrequentlyUsedEmotes;switch(t){case $.FrequentlyUsedEmotes:n.frequentlyUsedEmotesRef&&(n.frequentlyUsedEmotesRef.scrollIntoView(),i=$.FrequentlyUsedEmotes);break;case $.ChannelEmotes:n.channelEmotesRef&&(n.channelEmotesRef.scrollIntoView(),i=$.ChannelEmotes);break;case $.AllEmotes:n.allEmotesRef&&(n.allEmotesRef.scrollIntoView(),i=$.AllEmotes)}n.setState({selectedNavTab:i})}},n.onClickEmote=function(e,t){if(n.props.onClickEmote&&!e.isLocked){n.props.onClickEmote(e.displayName||e.token,e.id);var i={channel_id:n.props.channelID||void 0,chatroom_id:n.props.roomID,context:t,emote_picker_sid:n.props.emotePickerSessionID,emote_id:e.id,emoticon_set_id:e.setID,generated_by:n.props.emotePickerSource};l.p.track(O.SpadeEventType.EmotePickerClickthrough,i)}else e.isLocked&&n.onClickLockedEmote(e)},n.saveScrollRef=function(e){return n.scroll=e},n.saveAllEmotesRef=function(e){return n.allEmotesRef=e},n.saveChannelEmotesRef=function(e){return n.channelEmotesRef=e},n.saveFrequentlyUsedEmotesRef=function(e){return n.frequentlyUsedEmotesRef=e},n.checkVisible=function(e,t){if(t){n.state.hasUserInteracted||n.setState({hasUserInteracted:!0});var i=n.state.selectedNavTab,a=n.allEmotesRef&&t.offset>=n.allEmotesRef.offsetTop;i=n.channelEmotesRef&&t.offset>=n.channelEmotesRef.offsetTop&&!a?$.ChannelEmotes:a?$.AllEmotes:$.FrequentlyUsedEmotes,n.state.selectedNavTab!==i&&n.setState({selectedNavTab:i})}},n.onClickLockedEmote=function(e){n.setState({subUpsellClickedEmote:e})},n.onBackClick=function(){n.setState({subUpsellClickedEmote:null,selectedNavTab:$.FrequentlyUsedEmotes})},n.handleFilterChange=function(e){var t=e.target.value,i=t.toLowerCase();n.setState({filter:i,inputValue:t,filteredEmotes:n.filterEmoteSets(n.props.allEmoteSets,i),selectedNavTab:$.FrequentlyUsedEmotes})},n.filterEmoteSets=function(e,t){var n=[];e.forEach(function(e){e.emotes.filter(function(e){return!(!e.displayName||!e.displayName.toLowerCase().includes(t))||e.token.toLowerCase().includes(t)}).forEach(function(t){t.setID=e.id,n.push(t)})});var i=Object(S.e)(),a=0===Object.keys(i).length?void 0:i,r=Object(E.e)(n,t,a);return Object(E.d)(r)},n.updateChannelEmotes=function(e){var t=e.channelSubEmotes;if(0===t.length||!e.channelDisplayName)return null;var i=[],a=[];t.forEach(function(e){e.isLocked?i.push(e):a.push(e)});var r=Object(E.d)(n.props.channelCampaignEmotes.concat(a,i));n.setState({sortedChannelEmotes:r})},n.state={filter:"",filteredEmotes:[],hasUserInteracted:!1,inputValue:"",selectedNavTab:$.FrequentlyUsedEmotes,sortedChannelEmotes:[],subUpsellClickedEmote:null},n}return r.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.channelID&&this.updateChannelEmotes(this.props),this.props.emotePickerSessionID&&this.props.channelID){var e={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};l.p.track(O.SpadeEventType.ViewedEmotePicker,e)}},t.prototype.componentWillReceiveProps=function(e){if(this.props.channelID===e.channelID&&this.props.channelSubscriptionProducts===e.channelSubscriptionProducts||this.updateChannelEmotes(e),e.channelID&&e.emotePickerSessionID&&!this.props.emotePickerSessionID){var t={channel_id:e.channelID,emote_picker_sid:e.emotePickerSessionID,generated_by:e.emotePickerSource,chatroom_id:e.roomID};l.p.track(O.SpadeEventType.ViewedEmotePicker,t)}},t.prototype.render=function(){return o.createElement(Z.a,{"data-a-target":"emote-picker",direction:this.props.direction?this.props.direction:Z.b.TopRight,size:this.props.size?this.props.size:Z.c.Medium,noTail:!0,show:!0},o.createElement(M.a,{className:"emote-picker"},this.renderView()))},t.prototype.renderView=function(){var e=null;null===this.state.subUpsellClickedEmote&&(e=o.createElement(o.Fragment,null,o.createElement(L.a,{padding:{top:2,x:2}},o.createElement(ee.a,{autoFocus:!0,onChange:this.handleFilterChange,placeholder:Object(l.d)("Search for Emotes","EmotePickerCard"),value:this.state.inputValue})),this.renderTabContent()));var t=null;return null!==this.props.channelDisplayName&&null!==this.props.channelID&&null!==this.state.subUpsellClickedEmote&&(t=o.createElement(X,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelID:this.props.channelID,channelSubscriptionProducts:this.props.channelSubscriptionProducts,isEsportChannel:this.props.isEsportChannel||!1,handleSubAction:this.props.handleSubAction,onBackClick:this.onBackClick,onClickEmote:this.onClickLockedEmote,ownedSetIDs:this.props.ownedSetIDs,subUpsellClickedEmote:this.state.subUpsellClickedEmote})),o.createElement(o.Fragment,null,t,e)},t.prototype.renderTabContent=function(){return this.props.gqlError?o.createElement(M.a,null,o.createElement(x.a,{"data-test-selector":"emote-picker-menu-error-text",color:j.c.Error},Object(l.d)("Unable to load available emotes.","EmotePickerCard"))):this.props.loading?o.createElement(M.a,{alignItems:F.b.Center,display:F.d.Flex,fullHeight:!0,fullWidth:!0,justifyContent:F.h.Center,padding:1},o.createElement(J.a,null)):""!==this.state.filter?this.renderSearchContent():o.createElement(o.Fragment,null,o.createElement(D.b,{scrollRef:this.saveScrollRef,className:"emote-picker__tab-content"},o.createElement(M.a,{padding:{bottom:2}},o.createElement(U,{checkVisible:this.checkVisible},this.getFrequentlyUsedEmoteGrid(),this.getCurrentChannelEmoteGrid(),this.getOtherSubEmoteGrids(),this.getResidualEmoteGrids()))),this.renderTabNav())},t.prototype.getFrequentlyUsedEmoteGrid=function(){return 0===this.props.frequentlyUsedEmotes.length?null:o.createElement(M.a,{className:"emote-picker__content-block",refDelegate:this.saveFrequentlyUsedEmotesRef},o.createElement(A,{context:i.FrequentlyUsed,emotes:this.props.frequentlyUsedEmotes,label:Object(l.d)("Frequently Used","EmotePickerCard"),onClickEmote:this.onClickEmote}))},t.prototype.getCurrentChannelEmoteGrid=function(){var e=this.props.channelCampaignEmotes.concat(this.state.sortedChannelEmotes);return 0===e.length||null===this.props.channelDisplayName?null:o.createElement(M.a,{className:this.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:this.saveChannelEmotesRef},o.createElement(A,{context:i.CurrentChannel,emotes:e,imgSrc:this.props.channelProfileImageURL,label:this.props.channelDisplayName,onClickEmote:this.onClickEmote}))},t.prototype.getOtherSubEmoteGrids=function(){var e=this;if(!this.props.isLoggedIn)return null;var t=[];return this.props.otherChannelEmoteSets.forEach(function(n){n.owner&&n.owner.displayName&&t.push(o.createElement(M.a,{key:"emote-grid--"+n.id+"-emotes",className:"emote-picker__content-block"},o.createElement(A,{context:i.OtherChannel,emotes:n.emotes,imgSrc:n.owner.profileImageURL,label:n.owner.displayName,onClickEmote:e.onClickEmote})))}),this.state.hasUserInteracted||(t=t.slice(0,4)),o.createElement(o.Fragment,null,t)},t.prototype.getResidualEmoteGrids=function(){if(!this.props.isLoggedIn)return null;var e=[];return this.props.unlockedEmotes.length>0&&this.props.isLoggedIn&&e.push(o.createElement(M.a,{key:"emote-grid--unlocked-emotes",className:"emote-picker__content-block"},o.createElement(A,{context:i.Unlocked,emotes:this.props.unlockedEmotes,label:Object(l.d)("Unlocked","EmotePickerCard"),onClickEmote:this.onClickEmote}))),this.props.globalEmotes.length>0&&e.push(o.createElement(M.a,{key:"emote-grid--global-emotes"},o.createElement(A,{context:i.Global,emotes:this.props.globalEmotes,label:Object(l.d)("Global","EmotePickerCard"),onClickEmote:this.onClickEmote}))),o.createElement(M.a,{refDelegate:this.saveAllEmotesRef},e)},t.prototype.renderSearchContent=function(){var e=Object(l.d)('No Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard");return this.state.filteredEmotes.length>0&&(e=Object(l.d)('Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard")),o.createElement(D.b,{className:"emote-picker__tab-content"},o.createElement(M.a,{position:F.j.Relative,padding:{x:1,top:1,bottom:3},className:"emote-picker__content-block"},o.createElement(L.a,{padding:{x:1}},o.createElement(x.a,{bold:!0},e)),o.createElement(I.a,{emotes:this.state.filteredEmotes,onClickEmote:this.onClickEmote,spaced:!0})))},t.prototype.renderTabNav=function(){var e=null;this.state.sortedChannelEmotes.length>0&&(e=o.createElement(V,{isActive:this.state.selectedNavTab===$.ChannelEmotes,label:$.ChannelEmotes,icon:d.b.NavChannels,onClick:this.onTabNavClick}));var t=null;return this.props.isLoggedIn&&(t=o.createElement(V,{isActive:this.state.selectedNavTab===$.AllEmotes,label:$.AllEmotes,icon:d.b.EmoticonsAll,onClick:this.onTabNavClick})),e||t?o.createElement(L.a,{background:j.a.Alt,display:F.d.Flex,className:"emote-picker__tab-nav-container"},o.createElement(V,{isActive:this.state.selectedNavTab===$.FrequentlyUsedEmotes,label:$.FrequentlyUsedEmotes,icon:d.b.GlyphLength,onClick:this.onTabNavClick}),e,t):null},t}(o.PureComponent),ne=n("DB+C"),ie=function(e){function t(t){var n=e.call(this,t)||this;n.handleSubEvent=function(e){e.action===_.a.ClickCheckout&&n.checkAndDisplaySubscriptionCheckout();var t=n.props.channelData,i=null;if(t){var a=t.user;a&&a.self&&a.self.cumulativeTenure&&(i=a.self.cumulativeTenure.months)}Object(_.b)(r.__assign({},e,{action:_.a.ClickCheckout,channelID:t&&t.user&&t.user.id||"",channelLogin:t&&t.user&&t.user.displayName||"",cumulativeTenureMonths:i,isMenuOpen:null,hasSubCredit:null,sub_location:"emote_picker",modal:!1,showPrimeContent:!0,giftRecipient:null}))};var i={allEmoteSets:[],channelCampaignEmotes:[],channelSubEmotes:[],channelSubscriptionProducts:[],frequentlyUsedEmotes:t.isLoggedIn?[]:Object(S.b)(),globalEmotes:[],gqlError:t.emoteSetsData&&!!t.emoteSetsData.error||t.channelData&&!!t.channelData.error||!1,gqlLoading:t.emoteSetsData&&!!t.emoteSetsData.loading||t.channelData&&!!t.channelData.loading||!1,otherChannelEmoteSets:[],ownedSetIDs:new Set([]),unlockedEmotes:[]};return i=n.applyDataPropsToState(t,i),n.state=r.__assign({},i),n}return r.__extends(t,e),t.prototype.componentDidMount=function(){Object(S.c)(),this.checkDataLoaded(this.props)&&(this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)),this.props.latencyTracking.reportInteractive())},t.prototype.componentWillReceiveProps=function(e){if(e.emoteSetsData&&e.emoteSetsData.error||e.channelData&&e.channelData.error)this.setState({gqlError:!0});else{var t=this.applyDataPropsToState(e,this.state);this.props.pubsub.messages.subscriptionInfo!==e.pubsub.messages.subscriptionInfo&&(this.props.channelData&&this.props.channelData.refetch(),this.props.emoteSetsData&&this.props.emoteSetsData.refetch()),this.checkDataLoaded(e)&&(e.latencyTracking.reportInteractive(),e.onLoad&&e.onLoad(this.checkForContent(e)),t.gqlLoading=!1),this.setState(r.__assign({},t,{gqlError:!1}))}if(e.visible&&!this.props.visible){if(this.props.openEmotePicker(),e.emoteSetsData&&e.emoteSetsData.emoteMap){var n=Object(S.d)(e.emoteSetsData.emoteMap);this.setState({frequentlyUsedEmotes:n})}}else this.props.visible&&!e.visible&&this.props.closeEmotePicker()},t.prototype.componentWillUnmount=function(){this.props.closeEmotePicker()},t.prototype.render=function(){var e=this.props.channelData;if(!this.props.visible)return null;var t=e&&e.user&&e.user.campaignProperties&&e.user.campaignProperties.domains&&e.user.campaignProperties.domains.length>0||!1,n=e&&e.user?e.user.displayName:null,i=e&&e.user?e.user.profileImageURL:null;return o.createElement(te,{allEmoteSets:this.state.allEmoteSets,channelCampaignEmotes:this.state.channelCampaignEmotes,channelDisplayName:n,channelID:this.props.channelOwnerID,channelProfileImageURL:i,channelSubEmotes:this.state.channelSubEmotes,channelSubscriptionProducts:this.state.channelSubscriptionProducts,direction:this.props.direction,emotePickerSessionID:this.props.emotePickerSessionID,emotePickerSource:this.props.emotePickerSource,frequentlyUsedEmotes:this.state.frequentlyUsedEmotes,globalEmotes:this.state.globalEmotes,gqlError:this.state.gqlError,handleSubAction:this.handleSubEvent,isEsportChannel:t,isLoggedIn:this.props.isLoggedIn,loading:this.state.gqlLoading,onClickEmote:this.props.onClickEmote,ownedSetIDs:this.state.ownedSetIDs,otherChannelEmoteSets:this.state.otherChannelEmoteSets,roomID:this.props.roomID,size:this.props.size,toggleVisibility:this.props.toggleVisibility,unlockedEmotes:this.state.unlockedEmotes})},t.prototype.checkDataLoaded=function(e){var t=!e.channelOwnerID||e.channelData&&!e.channelData.loading,n=!e.isLoggedIn||e.emoteSetsData&&!e.emoteSetsData.loading;return t&&n},t.prototype.checkForContent=function(e){var t=e.emoteSetsData,n=e.channelData;return!!(t&&t.emoteSets&&t.emoteSets.length>0)||!!(n&&n.user&&n.user.subscriptionProducts)&&e.channelData.user.subscriptionProducts.filter(function(e){return null!==e}).filter(this.subscriptionProductHasEmotes).length>0},t.prototype.applyDataPropsToState=function(e,t){var n,i=r.__assign({},t);if(e.emoteSetsData&&e.emoteSetsData.emoteSets&&e.emoteSetsData.emoteSets.length>0){i.ownedSetIDs=new Set;for(var a=0,o=e.emoteSetsData.emoteSets;a<o.length;a++){var s=o[a];s&&s.id&&i.ownedSetIDs.add(parseInt(s.id,10))}var l=new Set;if(e.channelData&&e.channelData.user&&e.channelData.user.subscriptionProducts)for(var c=0,d=e.channelData.user.subscriptionProducts;c<d.length;c++){var u=d[c];u&&void 0!==u.emoteSetID&&null!==u.emoteSetID&&l.add(u.emoteSetID)}i.allEmoteSets=Object(E.a)(e.emoteSetsData.emoteSets);var m=[],p=[],h=[],g=[];i.allEmoteSets.forEach(function(t){t.owner||"0"!==t.id?t.owner&&""!==t.owner.id?e.channelData&&e.channelData.user&&e.channelData.user.id===t.owner.id?e.channelData.user.id!==t.owner.id||l.has(t.id)||p.push.apply(p,t.emotes):m.push(t):g.push.apply(g,t.emotes):h.push.apply(h,t.emotes)}),i.channelCampaignEmotes=p,i.otherChannelEmoteSets=function(e){var t={};e.forEach(function(e){var n;e.owner&&e.owner.id&&(t[e.owner.id]?(n=t[e.owner.id].emotes).push.apply(n,e.emotes):t[e.owner.id]=r.__assign({},e))});var n=Object.keys(t),i=[];return n.forEach(function(e){i.push(t[e])}),i}(m),i.globalEmotes=h,i.unlockedEmotes=g}if(e.channelData&&e.channelData.user&&e.channelData.user.subscriptionProducts){var f=e.channelData.user.subscriptionProducts.filter(function(e){return null!==e});i.channelSubscriptionProducts=f,i.channelSubEmotes=(n=i.ownedSetIDs,f.reduce(function(e,t){if(null===t.emotes||null===t.emoteSetID)return e;var i=Object(E.b)(t.emotes);return e.concat(i.map(function(e){return r.__assign({},e,{isLocked:!n.has(parseInt(t.emoteSetID,10))})}))},[]))}else i.channelSubscriptionProducts=[];return i},t.prototype.subscriptionProductHasEmotes=function(e){return null!==e.emoteSetID&&!!e.emotes&&e.emotes.length>0},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=l.o.get(C.a.SUB_CHECKOUT__PRODUCT_KEY,""),t=l.o.get(C.a.SUB_CHECKOUT__RECIPIENT_KEY,""),n=l.o.get(C.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,""),i=Number(n);e&&(this.props.channelData&&this.props.channelData.user&&this.props.channelData.user.subscriptionProducts&&this.props.channelData.user.subscriptionProducts.map(function(e){return e?e.name:null}).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({recipientLogin:t,productName:e,mysteryGiftCount:i,trackingContext:{source:y.c.EmotePicker}}):this.props.showLoginModal():C.a.clearSubscriptionCheckoutKeys())},t}(o.PureComponent);var ae=Object(m.compose)(Object(a.connect)(function(e){return{currentUserID:e.session.user&&e.session.user.id,emotePickerSessionID:e.chat&&e.chat.emotePickerSessionID||null,sessionUser:e.session.user,isLoggedIn:Object(v.f)(e)}},function(e){return Object(m.bindActionCreators)({closeEmotePicker:b.B,openEmotePicker:b.N,showLoginModal:C.a.showLoginModalWithCheckoutDispatch(f.a.EmotePickerSubscriptionButton),showSubscriptionCheckout:k.a},e)}),Object(p.a)(ne,{name:"channelData",skip:function(e){return!e.channelOwnerID},options:function(e){return{variables:{channelOwnerID:e.channelOwnerID}}}}),Object(h.a)([{topic:function(e){return"user-subscribe-events-v1."+e.currentUserID},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!e.currentUserID}}]),Object(w.withLatencyTracking)("EmotePicker"),Object(g.a)())(ie),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasInteracted:!1,isEmotePickerMenuVisible:!1,isEmotePickerButtonVisible:!1},t.onClickOut=function(){t.setState({isEmotePickerMenuVisible:!1})},t.onClickEmote=function(e,n){t.props.onClickEmote&&t.props.onClickEmote(e,n)},t.toggleEmotePicker=function(){t.setState(function(e){return{isEmotePickerMenuVisible:!e.isEmotePickerMenuVisible}})},t.onEmotePickerDataLoaded=function(e){e&&t.setState({isEmotePickerButtonVisible:!0})},t.onInteraction=function(){return t.setState({hasInteracted:!0})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.inputRef&&(this.props.inputRef.addEventListener("mouseenter",this.onInteraction),this.props.inputRef.addEventListener("focus",this.onInteraction))},t.prototype.componentWillUnmount=function(){this.props.inputRef&&(this.props.inputRef.removeEventListener("mouseenter",this.onInteraction),this.props.inputRef.removeEventListener("focus",this.onInteraction))},t.prototype.render=function(){var e=null;this.state.isEmotePickerButtonVisible&&(e=o.createElement(u,{onClick:this.toggleEmotePicker,isActive:this.state.isEmotePickerMenuVisible}));var t=null;this.hasInteractedOrPageload&&(t=o.createElement(ae,{channelOwnerID:this.props.channelOwnerID,emotePickerSource:this.props.emotePickerSource,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,toggleVisibility:this.toggleEmotePicker,visible:this.state.isEmotePickerMenuVisible,direction:this.props.direction}));var n=o.createElement(M.a,r.__assign({className:"emote-picker-and-button"},this.layoutProps),e,t);return this.props.shouldCloseOnClickOut?o.createElement(s.a,{onClickOut:this.onClickOut},n):n},Object.defineProperty(t.prototype,"hasInteractedOrPageload",{get:function(){return!(!this.props.firstPageLoaded&&!this.state.hasInteracted)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutProps",{get:function(){var e={attachTop:!!this.props.attachTop,attachRight:!!this.props.attachRight,attachBottom:!!this.props.attachBottom,attachLeft:!!this.props.attachLeft,padding:this.props.padding};return this.props.position&&(e.position=this.props.position),e},enumerable:!0,configurable:!0}),t}(o.Component),oe=Object(w.withLatencyTracking)("EmotePicker")(re);var se=Object(a.connect)(function(e){return{firstPageLoaded:e.session.firstPageLoaded}})(oe),le=n("cpJf");n.d(t,"a",function(){return se}),n.d(t,"c",function(){return ae}),n.d(t,!1,function(){return le.a}),n.d(t,!1,function(){return le.c}),n.d(t,!1,function(){return le.b}),n.d(t,"b",function(){return u})},"n+IG":function(e,t,n){},n9Ey:function(e,t,n){},nIRf:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){return function(e){var t=this;this.timerId=null,this.start=function(){t.timerId&&t.stop(),t.timerId=setInterval(t.onInterval,t.intervalMillis)},this.stop=function(){t.timerId&&(clearInterval(t.timerId),t.timerId=null)},this.restart=function(e){void 0===e&&(e=0),t.stop(),t.timerId=setTimeout(function(){t.onInterval(),t.start()},e)},this.onInterval=e.onInterval,this.intervalMillis=e.intervalMillis}}()},nInp:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n("XIZb"),a=Object(i.a)("MessageBuffer"),r=a.withChatServiceProvider,o=a.withContext,s=r,l=o(function(e){return{messageBufferAPI:e.serviceAPI,setMessageBufferAPI:e.setServiceAPI}})},nNLF:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("hnjF"),s=n("X2PJ"),l=n("sUnt"),c=n("+80q"),d=(n("cRsL"),function(e){var t=a("preview-card-top-bar",{"preview-card-top-bar--gray":!e.selected,"preview-card-top-bar--green":e.selected});return r.createElement(l.a,{display:o.d.Flex,padding:{x:1,y:.5},justifyContent:o.h.Between,alignItems:o.b.Center,className:t},r.createElement(l.a,{display:o.d.InlineFlex},r.createElement(c.a,{"data-test-selector":"top-bar-title-selector",color:s.c.Overlay,bold:!0,transform:c.d.Uppercase},e.title)),e.subTitle&&r.createElement(l.a,{display:o.d.InlineFlex},r.createElement(c.a,{"data-test-selector":"top-bar-sub-title-selector",color:s.c.Overlay},e.subTitle)))}),u=n("Z2sP"),m=(n("m493"),function(e){var t=.5,n=null;"number"==typeof e.progressBarPercent&&e.progressBarPercent>0&&(n=r.createElement(l.a,{position:o.j.Absolute,attachBottom:!0,fullWidth:!0},r.createElement(u.a,{borderRadius:s.b.None,size:u.c.Small,value:e.progressBarPercent,mask:!0})),t=1);var c=a("preview-card-overlay",{"preview-card-overlay--gradient":!e.hideGradient}),m=1,p=null;return e.topBar&&(p=r.createElement(l.a,{position:o.j.Absolute,attachTop:!0,fullWidth:!0},r.createElement(d,i.__assign({},e.topBar))),m=3),r.createElement(l.a,{position:o.j.Absolute,attachTop:!0,attachLeft:!0,fullWidth:!0,fullHeight:!0,className:c},p,n,r.createElement(l.a,{position:o.j.Absolute,attachTop:!0,attachLeft:!0,margin:e.topBar?{x:1,y:m}:1,"data-test-selector":"top-left-selector"},e.topLeft),r.createElement(l.a,{position:o.j.Absolute,attachTop:!0,attachRight:!0,margin:e.topBar?{x:1,y:m}:1,"data-test-selector":"top-right-selector"},e.topRight),r.createElement(l.a,{position:o.j.Absolute,attachBottom:!0,attachLeft:!0,margin:{x:e.hideGradient?1:.5,y:e.hideGradient?1:t},"data-test-selector":"bottom-left-selector"},e.bottomLeft),r.createElement(l.a,{position:o.j.Absolute,attachBottom:!0,attachRight:!0,margin:{x:e.hideGradient?1:.5,y:e.hideGradient?1:t},"data-test-selector":"bottom-right-selector"},e.bottomRight))});n.d(t,!1,function(){return"top-left-selector"}),n.d(t,!1,function(){return"top-right-selector"}),n.d(t,!1,function(){return"bottom-left-selector"}),n.d(t,!1,function(){return"bottom-right-selector"}),n.d(t,"a",function(){return m})},nR4f:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmoteCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"emoteID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"emoteID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProduct"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subProduct"},directives:[]}]}}]}}]}}],loc:{start:0,end:192}};i.loc.source={body:'#import "twilight/features/chat/components/emote-card/emote-subscription-product.gql"\nquery EmoteCard ($emoteID: ID!) {\nemote(id: $emoteID) {\nid\ntoken\nsubscriptionProduct {\n...subProduct\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("HfAM").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},nkgB:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MessageBuffer_Channel"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatDelayMs"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"query MessageBuffer_Channel($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nchatSettings {\nchatDelayMs\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},nt5g:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RoleRestricted"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"contentOwnerLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEditor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:147}};n.loc.source={body:"query RoleRestricted($contentOwnerLogin: String!) {\ncurrentUser {\nid\nroles {\nisStaff\n}\n}\nuser(login: $contentOwnerLogin) {\nid\nself {\nisEditor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},nxZp:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){return function(e){this.bio=e.bio,this.createdAt=e.createdAt,this.displayName=e.displayName,this.id=e.id,this.logo=e.logo,this.name=e.name,this.type=e.type,this.updatedAt=e.updatedAt}}()},o8Ti:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("/7QA"),a="viewer_card_mod_logs",r="viewer_card_mod_logs_user_whitelist";function o(e){var t=i.b.get(a,!1),n=i.b.get(r,[]);return t||!(!e||!n.includes(e))}},oK83:function(e,t,n){"use strict";var i,a,r;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),function(e){e[e.unknown=0]="unknown",e[e.chat=1]="chat",e[e.room=2]="room",e[e.whisper=3]="whisper",e[e.vod=4]="vod"}(i||(i={})),function(e){e[e.chat_message=0]="chat_message",e[e.extension_message=1]="extension_message",e[e.member_list=2]="member_list",e[e.recent_raids=3]="recent_raids",e[e.room_message=4]="room_message",e[e.test=5]="test",e[e.user_command=6]="user_command",e[e.viewer_list=7]="viewer_list",e[e.viewer_list_mod_section=8]="viewer_list_mod_section",e[e.mega_cheer_notification=9]="mega_cheer_notification",e[e.bits_leaderboard=10]="bits_leaderboard",e[e.popout_button=11]="popout_button"}(a||(a={})),function(e){e[e.Viewer=0]="Viewer",e[e.Extension=1]="Extension",e[e.Emote=2]="Emote"}(r||(r={}))},"oc+d":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelClip"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Clip"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"creationState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"videoOffsetSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"durationSeconds"},arguments:[],directives:[]}]}}],loc:{start:0,end:330}};i.loc.source={body:'#import "twilight/features/channel/queries/channel.gql"\nfragment channelClip on Clip {\nid\nbroadcaster {\n...channel\n}\ngame {\nid\nboxArtURL(width: 138 height: 190)\nname\ndisplayName\n}\nlanguage\ntitle\nslug\nviewCount\ncurator {\n...channel\n}\ncreatedAt\ncreationState\nurl\nvideoOffsetSeconds\nvideo {\nid\nbroadcastType\ntitle\n}\ndurationSeconds\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("BbLt").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},oe5X:function(e,t,n){"use strict";var i=n("XmgI"),a=n("RcPG"),r=n("0FG4"),o=n("mrSG"),s=n("VJH5");var l=n("i6WW"),c=n("gTu3"),d=n("6j5V"),u=/^(['"*([{<\/]*)(@?)((?:[^\u0000-\u007F]|[\w-])+)/;function m(e,t){if(!t)return!1;var n=t.displayName,i=t.login;return e===n||e.toLowerCase()===i}function p(e,t){void 0===t&&(t={});for(var n=f(e),i=function(e){if(!e)return[];var t=e.list.filter(function(t){return t.categories[s.a.Aggressive]&&e.preferences[s.a.Aggressive]||t.categories[s.a.Identity]&&e.preferences[s.a.Identity]||t.categories[s.a.Profanity]&&e.preferences[s.a.Profanity]||t.categories[s.a.Sexual]&&e.preferences[s.a.Sexual]});return 0===t.length?t:(t.sort(function(e,t){return e.startIndex-t.startIndex}),t.reduce(function(e,t,n){if(0===n)return e.push(t),e;var i=e[e.length-1];return t.startIndex<=i.endIndex+1?(i.endIndex=Math.max(t.endIndex,i.endIndex),i.categories=o.__assign({},i.categories,t.categories)):e.push(t),e},[]))}(t.flags),r=0,l=[];r<n.length;){var c=i&&i.shift();c?(l.push.apply(l,h(n.slice(r,c.startIndex),r,t)),l.push({type:a.a.FlaggedSegment,categories:c.categories,content:g(h(n.slice(c.startIndex,c.endIndex+1),c.startIndex,t)),length:c.endIndex-c.startIndex+1,originalText:n.slice(c.startIndex,c.endIndex+1).join("")}),r=c.endIndex+1):(l.push.apply(l,h(n.slice(r),r,t)),r=n.length)}return g(l)}function h(e,t,n){void 0===n&&(n={});var o=n.cheers,s=n.emotes,p=n.links,h=n.mentions,g="",f=0;return e.reduce(function(n,b,k){if(v(b))return g="",n;if(0===g.length&&(f=t+k),g+=b,k!==e.length-1&&!v(e[k+1]))return n;var C=s&&Object(r.c)(g,f,s);if(C)return n.concat(C);var y=o&&Object(i.f)(g,o);if(y)return n.concat(y);var S=p&&Object(l.a)(g,p);if(S)return n.concat(S);var E=h&&function(e,t){var n=e.match(u);if(!n)return null;var i=[],r=n[1],o=Boolean(n[2].length),s=n[3],l=e.slice(n[0].length);if(r.length&&i.push(Object(d.a)(r)),o){var p=c.a.Default;m(s,t.sessionUser)?p=c.a.Recipient:t.sessionUser&&t.sessionUser.login===t.senderLogin&&(p=c.a.Sender),i.push({type:a.a.Mention,content:{recipient:s,currentUserMentionRelation:p}})}else{if(!m(s,t.sessionUser))return null;i.push({type:a.a.CurrentUserHighlight,content:s})}return l.length&&i.push(Object(d.a)(l)),i}(g,h);return E?n.concat([E]):n.concat(Object(d.a)(g))},[])}function g(e){return e.reduce(function(e,t,n){return 0===n?[].concat.call(e,t):[].concat.call(e,Object(d.a)(" "),t)},[]).reduce(function(e,t,n){if(0===n)return e.concat(t);var i=e[e.length-1];return t.type===a.a.Text&&i.type===a.a.Text?(i.content=""+i.content+t.content,e):e.concat(t)},[])}function f(e){return e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)||[]}function v(e){return/\s/.test(e)}n.d(t,"a",function(){return p}),n.d(t,!1,function(){return g}),n.d(t,!1,function(){return f})},oi4T:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("/7QA"),o=n("DMoW"),s=n("2xye");!function(e){e.Everyone="everyone",e.ModsOnly="mod",e.StreamChat="twitch_chat",e.SubsOnly="sub"}(i||(i={})),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return u});var l=function(e){var t;switch(e.roomMinimumRole){case o.Wa.EVERYONE:t=i.Everyone;break;case o.Wa.MODERATOR:t=i.ModsOnly;break;case o.Wa.SUBSCRIBER:t=i.SubsOnly;break;default:t=i.StreamChat}var n={channel:e.channelLogin,chatroom_type:t,is_host_mode:e.isHostMode,is_using_web_sockets:!0};return e.roomID&&(n.chatroom_id=e.roomID),n},c=function(e){var t;switch(e.roomMinimumRole){case o.Wa.EVERYONE:t=i.Everyone;break;case o.Wa.MODERATOR:t=i.ModsOnly;break;case o.Wa.SUBSCRIBER:t=i.SubsOnly;break;default:t=i.StreamChat}var n={channel:e.channelLogin,room_type:t,is_host_mode:e.isHostMode,is_using_web_sockets:!0};return e.roomID&&(n.room_id=e.roomID),e.room&&(n.room=e.room),n},d=function(e){r.p.track(s.SpadeEventType.ChatRoomJoined,l(e))},u=function(e){r.p.track(s.SpadeEventType.ChatRoomWatched,a.__assign({},l(e),{channel_id:e.channelID}))}},okS7:function(e,t,n){"use strict";n("kPBf");var i,a=n("mrSG"),r=n("q1tI"),o=n("8Ad5"),s=n("1rIY"),l=n("TSYQ"),c=n("/7QA"),d=n("u5aL"),u=n("8/mp"),m=n("X2PJ"),p=n("sUnt"),h=n("hnjF"),g=n("ygYM"),f=n("+80q"),v=(n("JzSO"),"autocomplete-balloon-matches"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.resizeAnimationFrame=0,t.messages={noMatches:Object(c.d)("No matches.","AutocompleteBalloon")},t.logger=c.k.withCategory("AutocompleteBalloon"),t.renderMatches=function(){return t.props.matches.map(function(e,n){var i=t.state.selectedMatch,a=i&&i.replacement===e.replacement,o=l("autocomplete-balloon__item",{"autocomplete-balloon__item--selected":a});return r.createElement(p.a,{key:"autocomplete-match-"+n,refDelegate:a?t.focusOnOption:void 0,"data-test-selector":v},r.createElement(h.g,{display:h.d.Block,fullWidth:!0},r.createElement("button",{onMouseEnter:t.handleMatchMouseEnter,className:o,"data-a-target":e.replacement,"data-click-index":n,onClick:t.onMatchClick},r.createElement(p.a,{padding:{x:.5},display:h.d.Flex,alignItems:h.b.Center},e.element))))})},t.handleMatchMouseEnter=function(e){var n=t.getMatchFromEvent(e);n&&t.setState({selectedMatch:n})},t.onMatchClick=function(e){var n=t.getMatchFromEvent(e);n&&t.props.onMatchSelect(n)},t.getMatchFromEvent=function(e){var n=t.props.matches,i=e.currentTarget.getAttribute("data-click-index");return!i||+i>=n.length?(t.logger.error(new Error,"The index received from the UI element was not found in props.matches."),null):n[+i]},t.handleKeydown=function(e){var n=e.charCode||e.keyCode,i=function(){e.preventDefault(),e.stopPropagation()};switch(n){case o.a.Tab:case o.a.Enter:i(),t.props.matches.length&&t.state.selectedMatch?t.props.onMatchSelect(t.state.selectedMatch):t.props.onDismiss();break;case o.a.Up:case o.a.Down:if(!t.state.selectedMatch||!t.props.matches.length)return;var a=t.props.matches.indexOf(t.state.selectedMatch);if(-1===a)return void t.logger.error(new Error,"The selected match was not found in props.matches.");i();var r=n===o.a.Up?-1:1,s=t.getIndexWithinLength(a+r,t.props.matches.length),l=t.props.matches[s];t.setState({selectedMatch:l})}},t.getIndexWithinLength=function(e,t){var n=e%t;return n<0?n+t:n},t.onResize=function(){t.resizeAnimationFrame||(t.resizeAnimationFrame=requestAnimationFrame(t.setContainerHeight))},t.setContainerHeight=function(){var e=t.props.containerElement&&t.props.containerElement.clientHeight||1080;t.setState({containerHeight:e}),t.resizeAnimationFrame=0},t.focusOnOption=function(e){if(e&&t.autocompleteBalloonElement){var n=e.getBoundingClientRect(),i=t.autocompleteBalloonElement.getBoundingClientRect();(n.bottom>i.bottom||n.top<i.top)&&e.scrollIntoView()}},t.setAutocompleteBalloonElement=function(e){t.autocompleteBalloonElement=e},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeydown,!0),window.addEventListener("resize",this.onResize,!0),this.setContainerHeight(),this.props.matches.length>0&&this.setState({selectedMatch:this.props.matches[0]})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!0),window.removeEventListener("keydown",this.handleKeydown,!0),this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame)},t.prototype.componentWillReceiveProps=function(e){var t=this,n=e.matches.reduce(function(e,n,i){return t.state.selectedMatch?n.replacement===t.state.selectedMatch.replacement?i:e:0},0);this.setState({selectedMatch:e.matches[n]})},t.prototype.render=function(){var e;return e=0===this.props.matches.length?r.createElement(p.a,{padding:{x:.5},"data-test-selector":"autocomplete-balloon-no-matches"},r.createElement(f.a,{type:f.e.Span,color:m.c.Alt2},this.messages.noMatches)):this.renderMatches(),r.createElement(p.a,{position:h.j.Relative},r.createElement(d.a,{onClickOut:this.props.onDismiss},r.createElement(g.a,{direction:g.b.TopLeft,"data-a-target":"autocomplete-balloon","data-test-selector":"autocomplete-balloon",show:!0},r.createElement(h.g,{"data-test-selector":"autocomplete-matches-container",className:"autocomplete-balloon",overflow:h.i.Hidden,display:h.d.Flex,flexDirection:h.e.Column},r.createElement("div",{style:{maxHeight:this.state.containerHeight},ref:this.setAutocompleteBalloonElement},r.createElement(u.b,null,r.createElement(p.a,{padding:{y:1}},e)))))))},t}(r.Component),k=n("uu1w"),C=n("2xye"),y={Chat:"chat",Feed:"feed",Whisper:"whisper"},S=":",E="#",N="@",w=function(e){switch(e){case k.a.Emote:return S;case k.a.Hashtag:return E;case k.a.Mention:return N;default:return void c.k.warn("Chat Suggestions tracking was passed an unknown autocomplete type.")}},_=function(e){var t=w(e.autocompleteType);if(t){var n={channel:e.channelLogin,completed_text:e.completedText,source:e.source,start_character:t};c.p.track(C.SpadeEventType.ChatSuggestionComplete,n)}},D=n("3aAs"),O=n("Kae6");!function(e){e.Input="input",e.TextArea="textarea"}(i||(i={}));var I=Object(s.a)("Autocomplete",{registerAutocompleteProvider:function(){return function(){return null}}}),T=I.withContext,M=I.InnerProvider,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={autocompleteType:k.a.None,matchedCursorPosition:0,matches:null,value:""},t.providers=[],t.contextForChildren={registerAutocompleteProvider:t.registerAutocompleteProvider.bind(t)},t.onChange=function(e){t.setState({value:e.target.value},function(){t.getMatches()}),t.props.onChange&&t.props.onChange(e)},t.onKeyDown=function(e){var n=function(){t.props.onKeyDown&&t.props.onKeyDown(e)},i=function(){e.preventDefault(),e.stopPropagation()},a=e.charCode||e.keyCode;if(a!==o.a.Enter){switch(a){case o.a.Tab:if(!t.state.matches)t.getMatches(!0)&&i();break;case o.a.Esc:t.state.matches&&(i(),t.resetDisplayState())}n()}else n()},t.setComponentRefDelegate=function(e){t.componentRef=e,t.props.componentRefDelegate&&t.props.componentRefDelegate(e)},t.getMatches=function(e){var n=t.state.value;if(0===t.providers.length||0===n.length)return t.resetDisplayState(),!1;var i=t.getCurrentCursorPosition();if(i>n.length);else for(;i<n.length&&!/\s/.test(n.charAt(i));)i++;var a=n.substring(0,i);if(0===a.length||/\s/.test(a.substring(a.length-1)))return t.resetDisplayState(),!1;for(var r=a.split(/\s/),o=r[r.length-1],s=0,l=t.providers;s<l.length;s++){var c=l[s];if(!e||c.canBeTriggeredByTab){var d=c.getMatches(o,e);if(d)return t.setState({autocompleteType:c.autocompleteType,matchedCursorPosition:i,matches:d}),!0}}return t.resetDisplayState(),!1},t.resetDisplayState=function(e,n){var i=a.__assign({},t.state,{autocompleteType:k.a.None,matches:null},e||{});t.setState(i,n)},t.insertReplacement=function(e){var n=t.state.value,i=t.state.matchedCursorPosition,r=n.substring(0,i),o=r.lastIndexOf(e.current);if(-1===o)r=r.concat(e.replacement+" "),i=r.length;else{var s=r.substring(0,o),l=n.length>o+e.current.length?n.substring(o+e.current.length):"",c=l.startsWith(" ")?e.replacement:e.replacement+" ";r=""+s+c+l,i=s.length+c.length}_(a.__assign({},t.props.trackingParams||{},{autocompleteType:t.state.autocompleteType,completedText:e.replacement,source:t.props.suggestionSource})),t.resetDisplayState({value:r},function(){t.setCursorPosition(i)})},t.getCurrentCursorPosition=function(){return t.componentRef.selectionStart||0},t.setCursorPosition=function(e){t.componentRef&&(t.componentRef.setSelectionRange(e,e),t.componentRef.focus())},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.refDelegate&&this.props.refDelegate(this)},t.prototype.componentWillUpdate=function(e,t){!this.state.matches&&t.matches&&function(e){var t=w(e.autocompleteType);if(t){var n={source:e.source,start_character:t};c.p.track(C.SpadeEventType.ChatSuggestion,n)}}({autocompleteType:t.autocompleteType,source:e.suggestionSource})},t.prototype.componentDidUpdate=function(e,t){t.value!==this.state.value&&this.props.onValueUpdate&&this.props.onValueUpdate(this.state.value)},t.prototype.render=function(){var e=a.__assign({},this.props,{onChange:this.onChange,onKeyDown:this.onKeyDown,refDelegate:this.setComponentRefDelegate,value:this.state.value});return r.createElement(M,{value:this.contextForChildren},this.state.matches&&r.createElement(b,{matches:this.state.matches,onMatchSelect:this.insertReplacement,onDismiss:this.resetDisplayState,containerElement:this.props.containerElement}),this.props.componentType===i.Input?r.createElement(D.a,a.__assign({},e,{type:e.type||D.c.Text})):r.createElement(O.a,a.__assign({},e)),this.props.children)},t.prototype.getValue=function(){return this.state.value},t.prototype.setValue=function(e){this.resetDisplayState({value:e})},t.prototype.registerAutocompleteProvider=function(e){var t=this;return this.providers.push(e),function(){var n=t.providers.indexOf(e);t.providers.splice(n,1)}},t}(r.Component),F=n("lZdE"),x=n("OpME"),j=(n("gDzh"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=k.a.Emote,t.canBeTriggeredByTab=!1,t.getMatches=function(e){return e.startsWith(":")?e.length<3?null:t.getMatchedEmotes(e):null},t.getMatchedEmotes=function(e){var n=t.state.hydratedEmotes;if(!n||0===n.length)return null;var i=e.substring(1),a=n.reduce(function(e,n){var a=n.emotes.filter(function(e){return t.doesEmoteMatchTerm(e,i)});return e.concat(a)},[]);return a=Object(x.d)(a),(a=Object(x.e)(a,i)).map(function(e){return{current:":"+i,replacement:e.token,element:t.renderEmoteSuggestion(e)}})},t.doesEmoteMatchTerm=function(e,t){var n=new RegExp("^"+Object(F.a)(t),"i");if(e.token.match(n))return!0;var i=new RegExp(""+Object(F.a)(t.charAt(0)).toUpperCase()),a=new RegExp("^"+Object(F.a)(t.slice(1)),"i"),r=e.token.match(i);return!!(r&&r.index&&e.token.slice(r.index+1).match(a))},t.renderEmoteSuggestion=function(e){return[r.createElement(p.a,{padding:{right:.5},flexShrink:0,key:"emote-img-"+e.id},r.createElement("img",{className:"emote-autocomplete-provider__image",srcSet:e.srcSet})),r.createElement(f.a,{type:f.e.Span,key:"emote-text-"+e.id,ellipsis:!0},e.token)]},t.hydrateEmotes=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var r=a[i];r&&r.id&&r.emotes&&n.push({id:r.id,emotes:Object(x.b)(r.emotes)})}t.setState({hydratedEmotes:n})},t}return a.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.emotes&&this.props.emotes!==e.emotes&&this.hydrateEmotes(e.emotes)},t.prototype.componentWillMount=function(){this.hydrateEmotes(this.props.emotes)},t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t}(r.Component)),A=T(function(e){return e})(j);n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"b",function(){return L}),n.d(t,"a",function(){return i}),n.d(t,!1,function(){}),n.d(t,"e",function(){return T}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return y})},olXY:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatRestrictions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chatRestrictedReasons"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastRecentChatMessageAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"follower"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followedAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"requireVerifiedAccount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEmailVerified"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:247}};n.loc.source={body:"query ChatRestrictions($channelLogin: String!) {\nchannel: user(login: $channelLogin) {\nid\nself {\nchatRestrictedReasons\nlastRecentChatMessageAt\nfollower {\nfollowedAt\n}\n}\nchatSettings {\nrequireVerifiedAccount\n}\n}\ncurrentUser {\nid\nisEmailVerified\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},p52R:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.Admin="admin",e.GlobalMod="global_mod",e.Moderator="mod",e.Owner="owner",e.Staff="staff",e.Subscriber="subscriber",e.User=""}(i||(i={}))},pU2t:function(e,t,n){"use strict";var i=n("mrSG"),a=n("XmgI"),r=n("ahza"),o=n("DpwM"),s=n("a1OF"),l=function(e,t,n){var i=e.bits_spent,a=e.body,r=e.emoticons,o=e.is_action,l=e.user_color,c=e.user_notice_params,d=function(e){void 0===e&&(e=[]);return e.reduce(function(e,t){return e[t.begin]={id:t._id,startIndex:t.begin},e},{})}(r);return{id:"1",isAction:o,tokens:Object(s.e)(a,d,i||0,n,t),userColor:l||Object(s.b)(t),userNoticeParams:c||void 0}};var c=n("XeJ1");n.d(t,"b",function(){return d}),n.d(t,"g",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"f",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"a",function(){return v});var d="comment";function u(e){return Object(r.e)(e)?{message:e.message,parent_id:e.parentId}:{content_id:e.contentId,content_offset_seconds:e.contentOffsetSeconds,content_type:e.contentType,message:e.message}}var m=function(e){return{comments:[v.normalizeRecord(e,a.a)],users:[c.a.normalizeRecord(e.commenter)]}},p=function(e,t){var n=i.__assign({},e,{more_replies:t.moreReplies});return{comments:[v.normalizeRecord(n,a.a)],users:[c.a.normalizeRecord(e.commenter)]}},h=function(e,t){var n=e.comments.map(function(e){return c.a.normalizeRecord(e.commenter)}),i={past:o.g,future:o.g};return void 0!==e._next&&(i.future=e._next),void 0!==e._prev&&(i.past=e._prev),{comments:e.comments.reduce(function(e,i){return i.replies&&i.replies.map(function(e){n.push(c.a.normalizeRecord(e.commenter))}),e.concat(v.normalizeRecords(i,t))},[]),cursor:i,users:n}},g=function(e){var t=e.comments.map(function(e){return c.a.normalizeRecord(e.commenter)});return{comments:e.comments.map(function(e){return v.normalizeRecord(e,a.a)}),cursor:{future:e._next||o.g},users:t}};function f(e){return e.reduce(function(e,t){return e[t._id]=t.version,e},{})}var v={normalizeRecords:function(e,t){var n=[v.normalizeRecord(e,t)];return Array.isArray(e.replies)&&e.replies.forEach(function(e){n.push(b.normalizeRecord(e,t))}),n},normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:l(e.message,e.commenter._id,t),moreReplies:e.more_replies||!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:f(e.message.user_badges||[])}}},b={normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:l(e.message,e.commenter._id,t),moreReplies:!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:f(e.message.user_badges||[])}}}},piIJ:function(e,t,n){"use strict";var i,a=n("TSYQ"),r=n("q1tI"),o=n("cys1"),s=n("X2PJ"),l=n("7uM4"),c=n("Ws8v"),d=n("hnjF"),u=n("sUnt");n("ZuCe");!function(e){e.AUTOMOD="automod",e.ANONYMOUS_CHEERING="anonymous-cheering",e.UNKNOWN="unknown"}(i||(i={}));var m=function(e){var t=e.moderatedReason,n=void 0===t?i.UNKNOWN:t,m=e.moderatedMessageParts,p=a("moderated-message-fake-input__container",n);return r.createElement(c.a,{position:d.j.Relative,borderRadius:s.b.Medium,className:p},r.createElement(c.a,{className:"moderated-message-fake-input__content",display:d.d.Block,overflow:d.i.Auto,color:s.c.Alt,background:s.a.Alt,fullWidth:!0},r.createElement(s.e,{padding:{y:.5,left:1},fullHeight:!0},r.createElement("div",{style:{paddingRight:"6rem"}},Object(o.f)(m)))),r.createElement(c.a,{position:d.j.Absolute,display:d.d.Flex,flexDirection:d.e.Row,attachRight:!0,attachTop:!0},r.createElement(u.a,{display:d.d.InlineFlex,alignItems:d.b.Center,className:"moderated-message-fake-input__icon",padding:.5},r.createElement(l.a,{asset:l.b.Bits,type:l.c.Inherit})),r.createElement(u.a,{display:d.d.InlineFlex,alignItems:d.b.Center,className:"moderated-message-fake-input__icon",padding:.5},r.createElement(l.a,{asset:l.b.Emoticons,type:l.c.Inherit}))))};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return m})},"pq/L":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hasVideoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"includePrivate"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"hasVideoID"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isModerator"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:497}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\n#import "twilight/features/chat/models/cheer-fragment.gql"\nquery VideoComments($videoID: ID! $hasVideoID: Boolean!) {\nbadges {\n...badge\n}\ncurrentUser {\nid\nroles {\nisStaff\nisSiteAdmin\nisGlobalMod\n}\nblockedUsers {\nid\n}\nemoteSets {\nid\nemotes {\nid\ntoken\n}\n}\n}\nvideo(id: $videoID options: { includePrivate: true }) @include(if: $hasVideoID) {\nid\nbroadcastType\nowner {\nid\nlogin\nbroadcastBadges {\n...badge\n}\n...cheer\nself {\nisModerator\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("IKE4").definitions)),i.definitions=i.definitions.concat(r(n("F9eG").definitions)),e.exports=i},ptRJ:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("ZtEv"),r=n("a1OF"),o=n("aF6k");function s(e,t,n,s,l,c,d){return void 0===c&&(c=!1),void 0===d&&(d=!1),i.__assign({},Object(r.a)(t,n,s,l,c,d),{type:a.b.Message,messageType:e,id:n.id||Object(o.a)(n.username)})}},pwkZ:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("DMoW"),s=n("4rCz"),l=n("uIkQ"),c=n("0Lz3"),d=n("GnwI"),u=n("Sfdh"),m=n("hnjF"),p=n("+80q"),h=n("X2PJ"),g=n("sUnt"),f=n("7d/q"),v=n("Ws8v"),b=n("7uM4"),k=15e3,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoDismissErrorTimeoutId=0,t.clearDismissTimeout=function(){window.clearTimeout(t.autoDismissErrorTimeoutId)},t.onManualErrorDismissClickHandler=function(){t.props.onErrorDismissed(!0)},t.setAutoDismissTimeout=function(){t.autoDismissErrorTimeoutId=window.setTimeout(function(){t.props.onErrorDismissed()},k)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.setAutoDismissTimeout()},t.prototype.componentWillUpdate=function(e){this.props.message!==e.message&&(this.clearDismissTimeout(),this.setAutoDismissTimeout())},t.prototype.componentWillUnmount=function(){this.clearDismissTimeout()},t.prototype.render=function(){var e=null;return this.props.message===Object(u.a)().chatReplayFilterError&&(e=r.createElement(p.a,{type:p.e.Span},"",r.createElement(p.a,{type:p.e.Span,decoration:p.c.Underline},r.createElement("a",{onClick:this.props.onMessageClick},Object(s.d)("Click here to show all messages.","CommentError"))))),r.createElement(v.a,{alignItems:m.b.Center,background:h.a.Base,className:"anim-swoop",color:h.c.Error,"data-test-selector":"vod-chat-error",display:m.d.Flex,flexWrap:m.f.NoWrap,fullWidth:!0,padding:{y:1,x:2},position:m.j.Absolute,zIndex:m.n.Above},r.createElement(p.a,{type:p.e.Span},this.props.message,e),r.createElement(g.a,{alignSelf:m.c.Start},r.createElement(f.a,{ariaLabel:Object(s.d)("Close","CommentErrorComponent"),icon:b.b.Close,onClick:this.onManualErrorDismissClickHandler})))},t}(r.Component),y=n("/7QA"),S=n("hyVY"),E=n("0FG4"),N=n("okS7"),w=n("tFCv"),_=n("mmRu"),D=n("cpJf"),O=n("OpME"),I=n("/MKj"),T=n("ZuiC"),M=n("fI4C"),L=n("Jsra"),F=n("K/KT"),x=(n("UZgS"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildModerationDashboardURL=function(){return"/"+t.props.videoOwnerLogin+"/dashboard/moderation"},t.buildModerationPrefsURL=function(){return"/"+t.props.videoOwnerLogin+"/dashboard/settings/moderation"},t.onReplayModeChange=function(e){t.props.onReplayModeChange(e.currentTarget.checked)},t.onTimestampModeChange=function(e){t.props.onTimestampModeChange(e.currentTarget.checked)},t}return i.__extends(t,e),t.prototype.render=function(){var e=null;this.props.isUpload||(e=r.createElement(g.a,{display:m.d.Flex,flexWrap:m.f.NoWrap,justifyContent:m.h.Between,key:"viewerReplayOption",padding:{bottom:1}},r.createElement(g.a,null,Object(y.d)("Show me only messages posted during the live broadcast","VideoChatSettings")),r.createElement(g.a,{flexShrink:0},r.createElement(F.a,{checked:this.props.isReplayFilterOn,"data-test-selector":"reply-mode",onChange:this.onReplayModeChange}))));var t=[r.createElement(p.a,{key:"moderationHeader",bold:!0},Object(y.d)("Mod Tools","VideoChatSettings"))];return this.props.canSessionEditModerationSettings&&t.push(r.createElement(m.g,{key:"moderationPrefs",display:m.d.InlineBlock},r.createElement(L.a,{to:this.buildModerationPrefsURL(),"data-test-selector":"video_chat_settings_mod_prefs"},Object(y.d)("Change moderation preferences","VideoChatSettings")))),this.props.canSessionModerateMessages&&t.push(r.createElement(m.g,{key:"moderationDashboard",display:m.d.InlineBlock},r.createElement(L.a,{to:this.buildModerationDashboardURL(),"data-test-selector":"video_chat_settings_mod_dashboard"},Object(y.d)("Moderate messages","VideoChatSettings")))),r.createElement(g.a,{className:"video-chat__settings",padding:{x:2,y:2}},r.createElement(p.a,{bold:!0},Object(y.d)("Viewer Settings","VideoChatSettings")),e,r.createElement(g.a,{display:m.d.Flex,justifyContent:m.h.Between,padding:{bottom:1}},r.createElement(g.a,null,Object(y.d)("Hide timestamps","VideoChatSettings")),r.createElement(g.a,{flexShrink:0},r.createElement(F.a,{"data-test-selector":"timestamp-mode",checked:this.props.hideTimestamps,onChange:this.onTimestampModeChange}))),t.length>1?t:null)},t}(r.Component)),j=Object(d.withLatencyTracking)("ChatSettings")(x);var A,P=Object(I.connect)(function(e){return{isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,hideTimestamps:e.vodChat.comments.hideTimestamps}},function(e){return{onReplayModeChange:function(t){Object(M.m)({setting:M.c,value:t?M.b:M.a}),e(Object(T.C)(t))},onTimestampModeChange:function(t){Object(M.m)({setting:M.d,value:t?M.b:M.a}),e(Object(T.F)(t))}}})(j),R=n("Tqc9"),U=n("dEDE");!function(e){e.CurrentTime="current-time"}(A||(A={}));var B=function(e){function t(t){var n=e.call(this,t)||this;n.onKeyDown=function(e){switch(e.key){case R.b:e.preventDefault(),n.createComment();break;case R.d:n.maybeUnpauseScrolling();break;case R.a:n.setState({isMentionPaused:!n.state.isMentionPaused&&n.props.isScrollingSynced||n.state.isMentionPaused}),n.props.onScrollPause()}},n.createComment=function(){if(""!==n.state.newMessageText){if(n.props.isPostCooldownActive)return n.setState({showCoolDownState:!0}),void n.props.onError(Object(u.a)().messageCreatedTooQuickError);n.props.onCreateComment(n.state.newMessageText),n.setState({newMessageText:""}),n.autocompleteInputRef.setValue(""),n.maybeUnpauseScrolling()}},n.setTextareaRef=function(e){n.textArea=e},n.setAutocompleteInputRef=function(e){n.autocompleteInputRef=e},n.maybeUnpauseScrolling=function(){n.state.isMentionPaused&&(n.setState({isMentionPaused:!1}),n.props.onScrollResume())},n.onChange=function(e){n.setState({newMessageText:e})},n.onEmoticonClick=function(e){n.autocompleteInputRef.setValue(n.state.newMessageText+" "+e),n.setState({newMessageText:n.state.newMessageText+" "+e}),n.maybeUnpauseScrolling()},n.getSessionSpecificEmotes=function(){if(!n.props.currentUser||!n.props.currentUser.emoteSets)return[];var e=Object(E.b)(n.props.currentUser.emoteSets);return Object.keys(e).map(function(t){return{id:t,emotes:Object(O.b)([e[t]])}})};var i=null!==n.props.currentUser&&(n.props.currentUser.id===n.props.videoOwnerID||!!n.props.currentUser.roles&&!!n.props.currentUser.roles.isStaff),a=null!==n.props.currentUser&&(n.props.isModerator||n.props.currentUser.roles&&n.props.currentUser.roles.isSiteAdmin||i);return n.state={isMentionPaused:!1,canSessionModerateMessages:a,canSessionEditModerationSettings:i,newMessageText:"",showCoolDownState:!1},n}return i.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){e.isPostCooldownActive||this.setState({showCoolDownState:!1})},t.prototype.render=function(){var e=null;(!this.props.isUpload||this.state.canSessionModerateMessages||this.state.canSessionEditModerationSettings)&&(e=r.createElement(w.b,null,r.createElement(P,{canSessionEditModerationSettings:this.state.canSessionEditModerationSettings,canSessionModerateMessages:this.state.canSessionModerateMessages,videoOwnerLogin:this.props.videoOwnerLogin,isUpload:this.props.isUpload})));var t=null;return this.props.currentUser&&(t=r.createElement(N.d,{emotes:this.getSessionSpecificEmotes()})),r.createElement("div",null,r.createElement(g.a,{position:m.j.Relative},r.createElement(N.b,{componentType:N.a.TextArea,suggestionSource:N.c.Chat,onValueUpdate:this.onChange,onKeyDown:this.onKeyDown,componentRefDelegate:this.setTextareaRef,refDelegate:this.setAutocompleteInputRef,paddingRight:30,placeholder:Object(y.d)("Post a message","VideoChatInput"),noResize:!0,"data-a-target":"video-chat-input",disabled:this.state.showCoolDownState},t),r.createElement(_.a,{channelOwnerID:this.props.videoOwnerID,emotePickerSource:D.a.VodChat,inputRef:this.textArea,onClickEmote:this.onEmoticonClick,attachTop:!0,attachRight:!0,position:m.j.Absolute})),r.createElement(g.a,{margin:{top:1},justifyContent:m.h.Between,display:m.d.Flex},e,r.createElement("span",null)," ",r.createElement(U.a,{onClick:this.createComment,disabled:this.state.showCoolDownState,"data-a-target":"video-chat-submit-button"},r.createElement(g.a,{display:m.d.Flex},r.createElement("span",null,Object(y.d)("Post at ","CommentInput")),r.createElement(g.a,{margin:{x:.5},display:m.d.Flex},r.createElement(b.a,{asset:b.b.GlyphLength})),r.createElement("span",{"data-test-selector":A.CurrentTime},Object(S.b)(this.props.currentVideoTime))))))},t}(r.Component);var V=Object(d.withLatencyTracking)("MessageInput",{autoReportInteractive:!0})(B),H=n("b7S+"),G=n("i4Ys"),q=function(e){var t=e.offset,n=e.onClick;return r.createElement(g.a,{margin:{right:.5}},r.createElement(H.a,{align:H.b.Left,direction:H.c.Top,label:Object(y.d)("Jump to video","TimeStamp")},r.createElement(G.a,{onClick:n,blurAfterClick:!0},r.createElement(g.a,{padding:{x:.5}},r.createElement(p.a,{fontSize:h.d.Size7},Object(S.b)(t))))))},W=n("ZEQw"),z=n("r7KY"),Q=n("ZVTe"),Y=n("Zkco"),K=n("u5aL"),X=n("Jxh/"),$=n("GCGb"),J=n("fCiU"),Z=n("cr+I"),ee=function(e,t){var n=new URL("https://www.twitch.tv/videos/"+e);if(t){var i=Z.stringify(t);n.search=i}return n},te=n("Addw"),ne=n("ygYM"),ie="ban-user",ae="delete-comment-button",re="reply-button",oe="relative-time-title",se="share-button",le="share-button-clicked",ce=3e3,de=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={confirmationAction:null,isMenuOpen:!1,isLinkCopied:!1},t.dismissTimeoutID=0,t.onToggleMenu=function(){t.state.isMenuOpen?t.closeMenu():(t.setState({isMenuOpen:!0}),t.props.onOpen())},t.getContent=function(){if("function"==typeof t.state.confirmationAction)return r.createElement(g.a,{padding:{y:1}},r.createElement(v.a,{display:m.d.Flex,margin:{x:1},padding:{bottom:.5}},r.createElement(p.a,{type:p.e.Span},Object(y.d)("Are you sure you want to perform this action?","chomments.moderation.confirmAction"))),r.createElement(g.a,{display:m.d.Flex,justifyContent:m.h.Center,alignItems:m.b.Center},r.createElement(g.a,{display:m.d.Inline,padding:{right:1}},r.createElement(U.a,{type:U.d.Alert,onClick:t.onContinueClickHandler,"data-test-selector":$.a},Object(y.d)("Yes","MessageOptionsMenu"))),r.createElement(U.a,{type:U.d.Hollow,onClick:t.onCancelClickHandler,"data-test-selector":$.c},Object(y.d)("No","MessageOptionsMenu"))));var e=[];t.props.isExpandedLayout||e.push(r.createElement(v.a,{key:t.props.context.comment.id,color:h.c.Alt2,display:m.d.Flex,"data-test-selector":oe},r.createElement(v.a,{margin:{x:1},padding:{bottom:.5},fullWidth:!0,borderBottom:!0},r.createElement(p.a,{type:p.e.Span},Object(y.d)("Posted ","MessageOptionsMenu"),Object(y.i)(t.props.context.comment.createdAt)))),r.createElement(v.a,{key:t.props.context.comment.id+"2",display:m.d.Flex,color:h.c.Link},r.createElement(G.a,{onClick:t.onReplyClickHandler,"data-test-selector":re},r.createElement(g.a,{padding:{y:.5,x:1}},Object(y.d)("Reply to {userName}",{userName:Object(J.b)(t.props.context.author)},"MessageOptionsMenu")))));var n=[];t.props.isCurrentUserModerator&&n.push(r.createElement(g.a,{key:t.props.context.comment.id,display:m.d.Flex},r.createElement(G.a,{type:G.b.Alert,onClick:t.onDeleteButtonClickHandler,"data-test-selector":ae},r.createElement(v.a,{margin:{x:1},padding:{y:.5},borderBottom:!0},Object(y.d)("Delete","MessageOptionsMenu")))),r.createElement(g.a,{key:t.props.context.comment.id+"2",display:m.d.Flex},r.createElement(G.a,{type:G.b.Alert,onClick:t.onBanUserClickHandler,"data-test-selector":ie},r.createElement(g.a,{padding:{y:.5,x:1}},Object(y.d)("Ban User","MessageOptionsMenu")))));var i=r.createElement(G.a,{onClick:t.onShareClick,"data-test-selector":se},r.createElement(g.a,{padding:{y:.5,x:1}},Object(y.d)("Copy Link","MessageOptionsMenu")));t.state.isLinkCopied&&(i=r.createElement(U.a,{fullWidth:!0,icon:b.b.Check,type:U.d.Success,"data-test-selector":le},r.createElement(g.a,{display:m.d.Flex,alignItems:m.b.Center,justifyContent:m.h.Start},Object(y.d)("Copied to clipboard","MessageOptionsMenu"))));var a=r.createElement(v.a,{display:m.d.Flex,fullWidth:!0,key:t.props.context.comment.id+"-share",color:h.c.Link},i);return r.createElement(g.a,{padding:{y:1}},e,a,n)},t.closeMenu=function(){t.setState({isMenuOpen:!1,confirmationAction:null,isLinkCopied:!1}),t.props.onClose()},t.onShareClick=function(){var e=t.props.context.comment,n=e.contentId,i=ee(n,{tt_medium:"video_chat",tt_content:"message_share_link",t:Object(te.a)(e.contentOffset),comment:e.id});return Object(X.a)(i.toString()),t.setState({isLinkCopied:!0},function(){return t.dismissTimeoutID=setTimeout(function(){t.setState({isLinkCopied:!1})},ce)}),Object(M.l)(e,i)},t.onReplyClickHandler=function(){t.props.onReplyClick(Object(J.b)(t.props.context.author)),t.closeMenu()},t.onBanUserClickHandler=function(){t.setState(function(e){return i.__assign({},e,{confirmationAction:t.props.onBanUserClick})})},t.onDeleteButtonClickHandler=function(){t.setState(function(e){return i.__assign({},e,{confirmationAction:t.props.onDeleteCommentClick})})},t.onContinueClickHandler=function(){t.state.confirmationAction&&t.state.confirmationAction(),t.closeMenu()},t.onCancelClickHandler=function(){t.setState(function(e){return i.__assign({},e,{confirmationAction:null})})},t}return i.__extends(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.dismissTimeoutID)},t.prototype.render=function(){return r.createElement(g.a,{position:m.j.Relative},r.createElement(K.a,{onClickOut:this.closeMenu},r.createElement(f.a,{ariaLabel:Object(y.d)("Message Actions Menu","VideoCommentsMenu"),size:f.b.Small,type:f.c.Secondary,"data-test-selector":"menu-button",icon:b.b.More,onClick:this.onToggleMenu}),r.createElement(ne.a,{direction:ne.b.BottomRight,show:this.state.isMenuOpen,size:ne.c.Small,offsetX:"0.5rem"},this.getContent())))},t}(r.Component);function ue(e){var t=e.message.userNoticeParams;return!!t&&!!t["msg-id"]}n("Nimz");var me,pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={forceMenuVisibility:!1},t.onBanUserClickHandler=function(){t.props.onBanUserClick({bannedUser:t.props.context.comment.commenter,targetChannel:t.props.context.comment.channelId,comment:t.props.context.comment})},t.onDeleteCommentClickHandler=function(){t.props.onDeleteCommentClick(t.props.context.comment)},t.onMenuOpenHandler=function(){t.props.onDisableSync(),t.setState({forceMenuVisibility:!0})},t.onMenuCloseHandler=function(){t.setState({forceMenuVisibility:!1})},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.context,i=t.badgeSets,o=t.currentUser,s=!!o&&n.comment.commenter===o.id,c=void 0!==n.comment.userBadges[W.a],d=ue(n.comment),u=a("video-chat__message-menu",{"video-chat__message-menu--force-visible":this.state.forceMenuVisibility}),p=r.createElement(g.a,{className:u,"data-test-selector":"menu-options-wrapper",flexShrink:0},r.createElement(de,{context:n,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.onBanUserClickHandler,onClose:this.onMenuCloseHandler,onDeleteCommentClick:this.onDeleteCommentClickHandler,onOpen:this.onMenuOpenHandler,onReplyClick:this.props.onReplyClick})),h=a("video-chat__message-author",((e={})["video-chat__message-author--me"]=s,e["video-chat__message-author--creator"]=c,e)),f=s||c?"":n.comment.message.userColor,v=r.createElement(m.g,{padding:{right:.5}},r.createElement("span",null,":"));n.comment.message.isAction&&(v=r.createElement(m.g,{padding:{right:.5}},r.createElement("span",null)));var b=r.createElement(g.a,{alignItems:m.b.Start,display:m.d.Flex,flexWrap:m.f.NoWrap},r.createElement(g.a,{flexGrow:1},!d&&r.createElement(r.Fragment,null,r.createElement(l.b,{badgesToRender:n.comment.userBadges,badgeSets:i,usesSchemaBadges:!0}),r.createElement("a",{className:h,"data-test-selector":"comment-author-selector","data-tt_content":"tab_videos","data-tt_medium":"video-message-author",href:"/"+n.author.name,target:"_blank",rel:"noopener noreferrer"},r.createElement(Q.a,{userData:Object(J.a)(n.author,f),highlighted:s||c}))),r.createElement(g.a,{display:m.d.Inline,className:"video-chat__message","data-test-selector":"comment-message-selector"},!d&&v,r.createElement(Y.a,{message:n.comment.message,allowActionTextColors:!0,author:n.author}))),p);return d?r.createElement(z.a,null,b):b},t}(r.Component),he=n("GEnX"),ge=n("4OCo"),fe=function(e){return r.createElement(g.a,{padding:{y:.5,left:1}},r.createElement(g.a,{className:"vod-message__content"},r.createElement(pe,{badgeSets:e.badgeSets,context:e.context,currentUser:e.currentUser,isCurrentUserModerator:e.isCurrentUserModerator,isExpandedLayout:e.isExpandedLayout,onBanUserClick:e.onBanUserClick,onDeleteCommentClick:e.onDeleteCommentClick,onDisableSync:e.onDisableSync,onReplyClick:e.onReplyClick})))},ve="vod-message-reply",be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeReplyButtonAndRelativeTime=function(e){return r.createElement(g.a,{display:m.d.Flex,alignItems:m.b.Center},r.createElement(he.a,{context:ve,onReplyClick:t.props.onReplyClick,replyCommentContext:e}),r.createElement(m.g,{margin:{left:.5}},r.createElement(p.a,{color:h.c.Alt2,fontSize:h.d.Size7,type:p.e.Span},"  "+Object(y.i)(e.comment.createdAt))))},t.makeReply=function(e){var n=null;return t.props.isExpandedLayout&&(n=t.makeReplyButtonAndRelativeTime(e)),r.createElement("li",{key:e.comment.id},r.createElement(fe,{badgeSets:t.props.badgeSets,context:e,currentUser:t.props.currentUser,isCurrentUserModerator:t.props.isCurrentUserModerator,isExpandedLayout:t.props.isExpandedLayout,onBanUserClick:t.props.onBanUserClick,onDeleteCommentClick:t.props.onDeleteCommentClick,onDisableSync:t.props.onDisableSync,onReplyClick:t.props.onReplyClick}),n)},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.replies.map(this.makeReply.bind(this));return r.createElement("ul",null,e)},t}(r.Component),ke=n("82xK"),Ce=(n("lRNp"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=null;!this.props.parentMessage.comment.moreReplies||this.props.isReplayFilterOn&&!this.props.isExpandedLayout||(e=r.createElement(g.a,{display:m.d.InlineBlock,className:"vod-message__show-more-replies"},r.createElement(ke.a,{onClick:this.props.onLoadMoreRepliesClick})));var t=null;this.props.showReplyForm&&(t=r.createElement(g.a,{margin:{top:.5,bottom:1,x:1}},r.createElement(ge.a,{isCreationCoolDownActive:this.props.isCreationCoolDownActive||!1,onError:this.props.onError,onReplyFormClose:this.props.onReplyFormClose,onReplySubmit:this.props.onReplySubmit,replyToUserDisplayName:this.props.replyToUserDisplayName,videoOwnerID:this.props.parentMessage.comment.channelId})));var n=null;return this.props.isExpandedLayout&&(n=r.createElement(g.a,{alignItems:m.b.Center,display:m.d.Flex},r.createElement(he.a,{context:"vod-message",onReplyClick:this.props.onReplyClick,replyCommentContext:this.props.parentMessage}),r.createElement(m.g,{margin:{left:.5}},r.createElement(p.a,{color:h.c.Alt2,fontSize:h.d.Size7,type:p.e.Span},"  "+Object(y.i)(this.props.parentMessage.comment.createdAt))))),r.createElement(g.a,null,n,r.createElement(g.a,{margin:{y:.5,left:.5},className:a("vod-message__reply","qa-vod-chat-reply")},e,r.createElement(be,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.props.onReplyClick,replies:this.props.parentMessage.replies}),t))},t}(r.Component)),ye=n("HSpZ"),Se=(n("ya7N"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showReplyForm:!1,replyToUserDisplayName:""},t.onReplyClickHandler=function(e){t.setState({showReplyForm:!0,replyToUserDisplayName:e},t.props.onDisableSync)},t.onReplyFormCloseHandler=function(){t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onReplySubmitHandler=function(e){t.props.onCreateReply(e,t.props.messageContext.comment.id),t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onTimestampClickHandler=function(){t.props.onTimeStampClick(t.props.messageContext.comment.contentOffset,t.props.messageContext.comment)},t.onLoadMoreRepliesClickHandler=function(){t.props.onLoadMoreRepliesClick(t.props.messageContext.comment.id,t.props.messageContext.comment.contentId)},t.refHandler=function(e){t.shouldFocusMessage()&&t.props.onFocus(e)},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=null;(this.props.isExpandedLayout||this.props.messageContext.replies.length>0||this.state.showReplyForm)&&(t=r.createElement(Ce,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCreationCoolDownActive:this.props.isCreationCoolDownActive,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,isReplayFilterOn:this.props.isReplayFilterOn,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onError:this.props.onError,onLoadMoreRepliesClick:this.onLoadMoreRepliesClickHandler,onReplyClick:this.onReplyClickHandler,onReplyFormClose:this.onReplyFormCloseHandler,onReplySubmit:this.onReplySubmitHandler,parentMessage:this.props.messageContext,replyToUserDisplayName:this.state.replyToUserDisplayName,showReplyForm:this.state.showReplyForm}));var n=null;this.props.hideTimestamp||(n=r.createElement(g.a,{className:"vod-message__header","data-test-selector":"message-timestamp",display:m.d.Flex,flexShrink:0,textAlign:m.k.Right},r.createElement(q,{offset:this.props.timeStampOffset,onClick:this.onTimestampClickHandler})));var i=a("vod-message",((e={})["vod-message--focused"]=this.shouldFocusMessage(),e["vod-message--user-notice"]=ue(this.props.messageContext.comment),e["vod-message--timestamp"]=!this.props.hideTimestamp,e)),o=this.props.messageContext.comment.highlight||!1;return r.createElement(ye.a,{duration:ye.c.Medium,enabled:o,type:ye.f.FadeIn},r.createElement(g.a,{alignItems:m.b.Start,className:i,"data-test-selector":"message-layout",display:m.d.Flex,flexWrap:m.f.NoWrap,fullWidth:!0,refDelegate:this.refHandler},n,r.createElement(g.a,{fullWidth:!0},r.createElement(pe,{badgeSets:this.props.badgeSets,context:this.props.messageContext,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.onReplyClickHandler}),t)))},t.prototype.shouldComponentUpdate=function(e,t){return e.focus!==this.props.focus||e.isReplayFilterOn!==this.props.isReplayFilterOn||e.hideTimestamp!==this.props.hideTimestamp||t.showReplyForm!==this.state.showReplyForm||e.messageContext.replies.length!==this.props.messageContext.replies.length||t.replyToUserDisplayName!==this.state.replyToUserDisplayName},t.prototype.shouldFocusMessage=function(){return this.props.focus},t}(r.Component)),Ee=(n("52dQ"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={firstScroll:!0},t.componentInitiatedScroll=!1,t.mouseDragging=!1,t.preventScrolling=!1,t.allowScrolling=function(){t.preventScrolling=!1},t.atBottom=function(){var e=t.commentListRef.scrollTop,n=t.commentListRef.scrollHeight;return e+t.commentListRef.clientHeight===n},t.bindCommentListRef=function(e){t.commentListRef=e},t.onMouseDown=function(){t.preventScrolling=!1,t.mouseDragging=!0},t.onMouseUp=function(){t.mouseDragging=!1},t.onScroll=function(){t.shouldFireOnScroll()&&(t.componentInitiatedScroll||(t.atBottom()?t.props.onScrollBottom():t.props.onScrollOffBottom()),t.componentInitiatedScroll=!1,t.preventScrolling=!0)},t.syncButtonClick=function(){t.preventScrolling=!1,t.props.onSyncScrollClick()},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onMount()},t.prototype.componentDidUpdate=function(){this.preventScrolling=!0,this.props.isScrollingSynced&&(this.preventScrolling=!1,this.componentInitiatedScroll=!0,this.commentListRef.scrollTop=this.commentListRef.scrollHeight)},t.prototype.render=function(){var e,t=a("video-chat__message-list-wrapper",((e={})["video-chat__message-list-wrapper--unsynced"]=!this.props.isScrollingSynced,e)),n=null;return!1===this.props.isScrollingSynced&&(n=r.createElement(m.g,{className:"video-chat__sync-button",padding:{x:1},position:m.j.Absolute,attachBottom:!0},r.createElement("button",{onClick:this.syncButtonClick},Object(s.d)("Resume auto scroll","MessageScrollArea")))),r.createElement(v.a,{fullHeight:!0,overflow:m.i.Hidden,position:m.j.Relative},r.createElement("div",{className:t,onKeyDown:this.allowScrolling,onMouseMove:this.allowScrolling,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onScroll:this.onScroll,onWheel:this.allowScrolling,ref:this.bindCommentListRef,tabIndex:-1,"data-test-selector":"video-chat-message-list-wrapper"},this.props.children),n)},t.prototype.shouldFireOnScroll=function(){return!this.mouseDragging&&this.preventScrolling?(this.componentInitiatedScroll=!1,!1):!(this.state.firstScroll&&!this.props.startSynced)||(this.setState({firstScroll:!1}),!1)},t}(r.Component)),Ne=n("DpwM"),we=n("l41m"),_e=n("ehEd"),De=function(e,t){return!!e&&(t>=e.offset&&e.offset+e.duration>=t)},Oe=n("PL8s"),Ie=n("XQbB");n("n+IG");n.d(t,"a",function(){return Le}),function(e){e.MessageInputPlaceholder="video-chat-message-input-placeholder",e.VideoChatError="video-chat-error",e.NoCommentCTA="video-chat-no-comments-cta"}(me||(me={}));var Te=5e3;var Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={commentAlreadyFocused:!1},t.badgeSets=new l.c([],[],""),t.createComment=function(e){if(t.props.videoID){var n={contentId:t.props.videoID,contentOffsetSeconds:t.props.currentVideoTime,contentType:Ne.e,message:e};t.onCreate(n)}},t.createReply=function(e,n){var i={message:e,parentId:n};t.onCreate(i)},t.onErrorDismissedHandler=function(e){t.props.onError("");var n=t.props.errorMessage===Object(u.a)().chatReplayFilterError;e&&t.props.shouldSendReplayFilterError&&n&&t.props.onErrorDismissClick()},t.onErrorMessageClickHandler=function(){t.props.onError(""),t.props.onTurnOffReplayFilter()},t.onMessageScrollAreaMount=function(){t.props.highlightedMessageID&&""!==t.props.highlightedMessageID&&t.props.onDisableSync()},t.onError=function(e){t.props.onError(e)},t.onLoadMoreRepliesHandler=function(e,n){var i=t.props.data.video,a=i&&i.owner&&i.owner.cheer&&i.owner.cheer.emotes||[];t.props.onLoadMoreReplies(e,t.props.replyCursorMap,n,Object(c.a)(a))},t.focusedCommentCallback=function(e){t.setState({commentToFocus:e})},t.startUnfocusTimeout=function(){t.focusTimer=setTimeout(function(){t.setState({commentAlreadyFocused:!0})},Te)},t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.props.onWillMount()},t.prototype.componentDidMount=function(){this.props.startInReplayMode&&this.props.onDidMount(this.props.startInReplayMode)},t.prototype.componentWillReceiveProps=function(e){void 0!==e.highlightedMessageID&&this.props.highlightedMessageID!==e.highlightedMessageID&&(this.props.onPlayerSeekRequest(e.highlightTimestamp),this.props.onDisableSync(),this.setState({commentAlreadyFocused:!1})),function(e,t){if(!t.data.loading&&!t.data.error){var n=t.data.video!==e.data.video,i=t.data.badges!==e.data.badges;return n||i}return!1}(this.props,e)&&(this.badgeSets=new l.c([],[],""),!e.data.loading&&!e.data.error&&e.data.video&&e.data.video.owner&&e.data.badges&&(this.badgeSets=new l.c(e.data.badges,e.data.video.owner.broadcastBadges||void 0,e.data.video.owner.login||void 0))),this.props.onUpdateBegan(e,this.props)},t.prototype.componentDidUpdate=function(){(this.props.data.loading||this.props.data.error||!this.props.hasFetchedComments||this.props.latencyTracking.reportInteractive(),this.props.data.loading||this.props.data.error||!this.props.isClipChatDisabled||this.props.latencyTracking.reportInteractive(),this.state.commentToFocus)&&((this.state.commentToFocus.nextElementSibling||this.state.commentToFocus).scrollIntoView(!0),this.setState({commentToFocus:void 0}),this.startUnfocusTimeout())},t.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimer),this.props.latencyTracking.reportInteractive(),this.props.onUnmount()},t.prototype.render=function(){var e,t=this,n=this.props,i=n.comments,l=n.highlightedMessageID,c=n.data,d=c.video;if(this.props.isClipChatDisabled)e=r.createElement(v.a,{fullHeight:!0,background:h.a.Alt2,alignItems:m.b.Center,justifyContent:m.h.Center},r.createElement(g.a,{padding:1,display:m.d.Flex,flexDirection:m.e.Column,alignItems:m.b.Center,justifyContent:m.h.Center,textAlign:m.k.Center},r.createElement(g.a,{margin:{bottom:.5}},r.createElement(b.a,{asset:b.b.Clip})),r.createElement(p.a,null,Object(s.d)("This clip's past broadcast has expired and chat replay is no longer available.","VideoChat"))));else if(!d||c.loading)e=r.createElement(Ie.a,{fillContent:!0});else if(c.error)e=r.createElement(g.a,{alignItems:m.b.Center,"data-test-selector":me.VideoChatError,fullHeight:!0,justifyContent:m.h.Center},r.createElement(p.a,{italic:!0},Object(s.d)("Video Chat is currently unavailable.","VideoChat")));else{var u=void 0;if(this.props.hasFetchedComments&&this.props.offsetRange===we.a)u=r.createElement(m.g,{display:m.d.Flex,margin:{x:1,top:2,bottom:1},alignItems:m.b.Center},r.createElement("li",{"data-test-selector":me.NoCommentCTA},r.createElement(m.g,{margin:{right:1}},r.createElement("img",{src:Object(_e.b)(65),srcSet:Object(_e.c)(65)})),Object(s.d)("Join the chat while watching the video!","VideoChatComponent")));else{u=(this.props.messageWindow?i.filter(function(e){return De(t.props.messageWindow,e.comment.contentOffset)}):i).map(function(e,n){var i=!t.state.commentAlreadyFocused&&e.comment.id===l,a=n+1===t.props.comments.length,s=!t.props.isScrollingSynced&&a,u=e.comment.contentOffset;return t.props.messageWindow&&De(t.props.messageWindow,e.comment.contentOffset)&&(u=e.comment.contentOffset-t.props.messageWindow.offset),r.createElement(m.g,{padding:s?{bottom:4}:{},key:e.comment.id,fullWidth:!0},r.createElement("li",null,r.createElement(Se,{badgeSets:t.badgeSets,currentUser:c.currentUser,focus:i,isCreationCoolDownActive:t.props.isCreationCoolDownActive,isCurrentUserModerator:t.props.isCurrentUserModerator,isExpandedLayout:d.broadcastType===o.q.UPLOAD,isReplayFilterOn:t.props.isReplayFilterOn,messageContext:e,onBanUserClick:t.props.onBanUser,onCreateReply:t.createReply,onDeleteCommentClick:t.props.onDeleteComment,onDisableSync:t.props.onDisableSync,onError:t.onError,onFocus:t.focusedCommentCallback,onLoadMoreRepliesClick:t.onLoadMoreRepliesHandler,onTimeStampClick:t.props.onPlayerSeekRequest,hideTimestamp:t.props.hideTimestamps,timeStampOffset:u})))})}e=r.createElement("ul",{style:{minHeight:0}},u)}var f,k=void 0===this.props.highlightedMessageID,y=null;if(""!==this.props.errorMessage&&(y=r.createElement(C,{message:this.props.errorMessage,onErrorDismissed:this.onErrorDismissedHandler,onMessageClick:this.onErrorMessageClickHandler})),!d||!d.owner||c.loading||c.error)f=r.createElement(Oe.a,{"data-test-selector":me.MessageInputPlaceholder,height:90,width:340});else{var S=this.props.currentVideoTime;this.props.messageWindow&&De(this.props.messageWindow,this.props.currentVideoTime)&&(S=this.props.currentVideoTime-this.props.messageWindow.offset),f=r.createElement(V,{currentUser:c.currentUser,currentVideoTime:S,onError:this.onError,isModerator:!(!d.owner.self||null===d.owner.self.isModerator)&&d.owner.self.isModerator,isReplayMode:this.props.isReplayFilterOn,isScrollingSynced:this.props.isScrollingSynced,isPostCooldownActive:this.props.isCreationCoolDownActive,isUpload:d.broadcastType===o.q.UPLOAD,onCreateComment:this.createComment,onScrollPause:this.props.onDisableSync,onScrollResume:this.props.onEnableSync,videoOwnerID:d.owner.id||"",videoOwnerLogin:d.owner.login||""})}return r.createElement(v.a,{className:a("video-chat","qa-vod-chat"),display:m.d.Flex,color:h.c.Alt,flexDirection:m.e.Column,flexShrink:0,flexWrap:m.f.NoWrap,fullHeight:!0,fullWidth:!0,position:m.j.Relative},r.createElement(v.a,{alignItems:m.b.Center,background:h.a.Alt,className:"video-chat__header",display:m.d.Flex,flexShrink:0,justifyContent:m.h.Center},r.createElement(p.a,{type:p.e.Span},Object(s.d)("Chat on Videos","VideoChatPresentation"))),y,r.createElement(Ee,{startSynced:k,isScrollingSynced:this.props.isScrollingSynced,onScrollOffBottom:this.props.onDisableSync,onScrollBottom:this.props.onEnableSync,onMount:this.onMessageScrollAreaMount,onSyncScrollClick:this.props.onEnableSync},r.createElement(g.a,{display:m.d.Flex,flexDirection:m.e.Column,fullHeight:!0,justifyContent:m.h.End},r.createElement(m.g,{display:m.d.Flex,flexWrap:m.f.Wrap,alignItems:m.b.End,fullWidth:!0},e))),!this.props.isClipChatDisabled&&r.createElement(g.a,{className:"video-chat__input",padding:{top:1,bottom:2,x:2},flexShrink:0,fullWidth:!0},f))},t.prototype.onCreate=function(e){this.props.isLoggedIn?this.props.onCreate(e):this.props.onShowLogin()},t}(r.Component),Le=Object(d.withLatencyTracking)("VideoChat")(Me)},qnat:function(e,t,n){"use strict";var i,a,r=n("mrSG"),o=n("q1tI"),s=n("fvjX"),l=n("yR8l"),c=n("eDVu"),d=n("0Log"),u=n("/aPz"),m=n("DMoW"),p=n("TSYQ"),h=n("/7QA"),g=n("8/mp"),f=n("hnjF"),v=n("sUnt");n("CK1f");!function(e){e[e.Gold=0]="Gold",e[e.Silver=1]="Silver",e[e.Bronze=2]="Bronze",e[e.Default=3]="Default"}(i||(i={})),function(e){e[e.Big=0]="Big",e[e.Small=1]="Small"}(a||(a={}));var b,k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.renderMedalSVG(this.props.medal,this.props.size),t=p("bits-leaderboard-medal__profile-image",{"bits-leaderboard-medal__profile-image--big":this.props.size===a.Big},{"bits-leaderboard-medal__profile-image--small":this.props.size===a.Small}),n=null;return this.props.profileImageUrl&&(n=o.createElement(f.g,{position:f.j.Absolute},o.createElement("img",{className:t,src:this.props.profileImageUrl}))),o.createElement(v.a,{className:"bits-leaderboard-medal",display:f.d.Flex,position:f.j.Relative},e,n)},t.prototype.renderMedalSVG=function(e,t){var n=t===a.Big?"bits-leaderboard-medal__big":"bits-leaderboard-medal__small",r=null;switch(e){case i.Gold:r=o.createElement(S,null);break;case i.Silver:r=o.createElement(E,null);break;case i.Bronze:r=o.createElement(C,null);break;default:r=o.createElement(y,null)}return o.createElement(f.g,{className:n},r)},t}(o.Component),C=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("linearGradient",{x1:"14.834%",y1:"10.25%",x2:"82.068%",y2:"89.469%",id:"bits-leaderboard-bronze-linearGradient-1"},o.createElement("stop",{stopColor:"#DF904C",offset:"0%"}),o.createElement("stop",{stopColor:"#A65611",offset:"100%"})),o.createElement("path",{id:"bits-leaderboard-bronze-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("linearGradient",{x1:"19.142%",y1:"10.021%",x2:"79.509%",y2:"86.458%",id:"bits-leaderboard-bronze-linearGradient-3"},o.createElement("stop",{offset:"0%"}),o.createElement("stop",{stopColor:"#494949",offset:"9.355%"}),o.createElement("stop",{stopColor:"#BCBCBC",offset:"13.369%"}),o.createElement("stop",{stopColor:"#FFF",offset:"20.419%"}),o.createElement("stop",{stopColor:"#818181",offset:"25.723%"}),o.createElement("stop",{stopColor:"#5D5D5D",offset:"39.965%"}),o.createElement("stop",{stopColor:"#EFEFEF",offset:"45.279%"}),o.createElement("stop",{stopColor:"#7A7A7A",offset:"50.012%"}),o.createElement("stop",{stopColor:"#717171",offset:"57.677%"}),o.createElement("stop",{stopColor:"#B5B5B5",offset:"63.526%"}),o.createElement("stop",{stopColor:"#888",offset:"69.88%"}),o.createElement("stop",{stopColor:"#F1F1F1",offset:"75.215%"}),o.createElement("stop",{stopColor:"#B9B9B9",offset:"79.325%"}),o.createElement("stop",{stopColor:"#545454",offset:"92.875%"}),o.createElement("stop",{offset:"100%"})),o.createElement("linearGradient",{x1:"19.604%",y1:"10.043%",x2:"84.81%",y2:"89.074%",id:"bits-leaderboard-bronze-linearGradient-4"},o.createElement("stop",{stopColor:"#F2C6A5",offset:"0%"}),o.createElement("stop",{stopColor:"#864223",offset:"100%"})),o.createElement("circle",{id:"bits-leaderboard-bronze-path-5",cx:"16",cy:"16",r:"11"})),o.createElement("g",{id:"bits-leaderboard-bronze-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-bronze-Medal-3-bronze-lg"},o.createElement("g",{id:"bits-leaderboard-bronze-Star-Copy-2B"},o.createElement("use",{fill:"#DE9572",xlinkHref:"#bits-leaderboard-bronze-path-2"}),o.createElement("path",{stroke:"url(#bits-leaderboard-bronze-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),o.createElement("path",{id:"bits-leaderboard-bronze-Star-Copy-3B",fill:"url(#bits-leaderboard-bronze-linearGradient-3)",opacity:".4",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("g",{id:"bits-leaderboard-bronze-Oval-Copy-B"},o.createElement("use",{fill:"#A96643",xlinkHref:"#bits-leaderboard-bronze-path-5"}),o.createElement("circle",{stroke:"url(#bits-leaderboard-bronze-linearGradient-4)",cx:"16",cy:"16",r:"11.5"})))))},y=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("path",{id:"bits-leaderboard-default-path-1",d:"M10 16.88l-1.31676 1.01089-.91717-1.38367-1.57365.52857-.4182-1.6065-1.66001-.01104.12608-1.65525-1.56648-.54944.65672-1.52462-1.3032-1.0283L3.1435 9.43184l-.8987-1.39573 1.45468-.79978-.39681-1.61193 1.63555-.2841.14808-1.65343 1.63918.26234.67692-1.51576 1.46519.78037L10 2l1.13241 1.21383 1.46519-.78037.67692 1.51576 1.63918-.26234.14808 1.65342 1.63555.28411-.3968 1.61193 1.45467.79978-.8987 1.39573 1.11618 1.22878-1.3032 1.02831.6567 1.52462-1.56647.54944.12608 1.65525-1.66.01104-.41821 1.6065-1.57365-.52857-.91717 1.38367z"})),o.createElement("g",{id:"bits-leaderboard-default-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-default-bitbadge/blank"},o.createElement("g",{id:"bits-leaderboard-default-Star"},o.createElement("use",{fill:"#D7CCEB",xlinkHref:"#bits-leaderboard-default-path-1"}),o.createElement("path",{stroke:"#D7CCEB",d:"M10 17.51035l-1.4374 1.10351-1.0012-1.51044-1.71783.577-.45652-1.7537-1.8121-.01204.13763-1.8069-1.71-.59979.71688-1.6643-1.4226-1.12253L2.5153 9.3798l-.98104-1.52362 1.58796-.87305-.43317-1.75961 1.7854-.31014.16165-1.80492 1.78937.28638.73894-1.65463 1.59943.85187L10 1.26703l1.23616 1.32505 1.59943-.85187.73894 1.65463 1.78937-.28638.16165 1.80492 1.7854.31014-.43317 1.7596 1.58796.87306-.98104 1.52362 1.21844 1.34136-1.4226 1.12252.71688 1.66431-1.71.59978.13763 1.8069-1.8121.01205-.45652 1.7537-1.71782-.577-1.00121 1.51044L10 17.51036z"})),o.createElement("circle",{id:"bits-leaderboard-default-Oval-2",fill:"#EEE9F6",cx:"10",cy:"10",r:"6"}))))},S=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("linearGradient",{x1:"15.783%",y1:"9.653%",x2:"82.407%",y2:"91.627%",id:"bits-leaderboard-gold-linearGradient-1"},o.createElement("stop",{stopColor:"#D8B258",offset:"0%"}),o.createElement("stop",{stopColor:"#A4770E",offset:"100%"})),o.createElement("path",{id:"bits-leaderboard-gold-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("linearGradient",{x1:"17.025%",y1:"7.356%",x2:"84.092%",y2:"91.769%",id:"bits-leaderboard-gold-linearGradient-3"},o.createElement("stop",{stopColor:"#E5B561",offset:"0%"}),o.createElement("stop",{stopColor:"#EEC05F",offset:"12.638%"}),o.createElement("stop",{stopColor:"#FFECB9",offset:"20.419%"}),o.createElement("stop",{stopColor:"#DCB35E",offset:"30.58%"}),o.createElement("stop",{stopColor:"#E0B55B",offset:"45.279%"}),o.createElement("stop",{stopColor:"#CDA148",offset:"62.771%"}),o.createElement("stop",{stopColor:"#E9CC8F",offset:"76.584%"}),o.createElement("stop",{stopColor:"#ECBE5D",offset:"83.038%"}),o.createElement("stop",{stopColor:"#C09A4C",offset:"100%"})),o.createElement("linearGradient",{x1:"83.2%",y1:"89.733%",x2:"12.813%",y2:"3.179%",id:"bits-leaderboard-gold-linearGradient-4"},o.createElement("stop",{stopColor:"#9A790A",offset:"0%"}),o.createElement("stop",{stopColor:"#FFEFB9",offset:"87.642%"}),o.createElement("stop",{stopColor:"#FFF",offset:"100%"})),o.createElement("circle",{id:"bits-leaderboard-gold-path-5",cx:"16",cy:"16",r:"11"})),o.createElement("g",{id:"bits-leaderboard-gold-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-gold-Medal-1-gold-lg"},o.createElement("g",{id:"bits-leaderboard-gold-Star"},o.createElement("use",{fill:"#D6A94C",xlinkHref:"#bits-leaderboard-gold-path-2"}),o.createElement("path",{stroke:"url(#bits-leaderboard-gold-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),o.createElement("path",{id:"bits-leaderboard-gold-Star",fill:"url(#bits-leaderboard-gold-linearGradient-3)",d:"M16 28.58l-2.469 2.215-1.615-2.897-3.055 1.294-.587-3.265-3.31.232.505-3.279-3.206-.855 1.543-2.937-2.755-1.85 2.413-2.277-2.005-2.643 3.021-1.371-1.037-3.151 3.302-.316.042-3.317 3.226.774 1.117-3.124 2.8 1.78L16 1l2.07 2.592 2.8-1.78 1.117 3.125 3.226-.774.042 3.317 3.302.316-1.037 3.151 3.021 1.37-2.005 2.644 2.413 2.278-2.755 1.849 1.543 2.937-3.206.855.505 3.28-3.31-.233-.587 3.265-3.055-1.294-1.615 2.897z"}),o.createElement("g",{id:"bits-leaderboard-gold-Oval"},o.createElement("use",{fill:"#BE912A",xlinkHref:"#bits-leaderboard-gold-path-5"}),o.createElement("circle",{stroke:"url(#bits-leaderboard-gold-linearGradient-4)",cx:"16",cy:"16",r:"11.5"})))))},E=function(e){return o.createElement("svg",{className:e.className,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.createElement("defs",null,o.createElement("linearGradient",{x1:"18.738%",y1:"20.297%",x2:"79.716%",y2:"88.714%",id:"bits-leaderboard-silver-linearGradient-1"},o.createElement("stop",{stopColor:"#D0D8DB",offset:"0%"}),o.createElement("stop",{stopColor:"#7E848A",offset:"100%"})),o.createElement("path",{id:"bits-leaderboard-silver-path-2",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("linearGradient",{x1:"19.638%",y1:"10.855%",x2:"81.99%",y2:"89.124%",id:"bits-leaderboard-silver-linearGradient-3"},o.createElement("stop",{stopColor:"#202020",offset:"0%"}),o.createElement("stop",{stopColor:"#BCBCBC",offset:"13.369%"}),o.createElement("stop",{stopColor:"#FFF",offset:"20.779%"}),o.createElement("stop",{stopColor:"#313131",offset:"30.58%"}),o.createElement("stop",{stopColor:"#EFEFEF",offset:"45.279%"}),o.createElement("stop",{stopColor:"#B5B5B5",offset:"61.521%"}),o.createElement("stop",{stopColor:"#FFF",offset:"74.572%"}),o.createElement("stop",{stopColor:"#656565",offset:"87.343%"}),o.createElement("stop",{stopColor:"#C4C4C4",offset:"100%"})),o.createElement("linearGradient",{x1:"0%",y1:"0%",x2:"99.438%",y2:"96.312%",id:"bits-leaderboard-silver-linearGradient-4"},o.createElement("stop",{stopColor:"#FFF",offset:"3.677%"}),o.createElement("stop",{offset:"100%"})),o.createElement("linearGradient",{x1:"8.437%",y1:"13.448%",x2:"86.525%",y2:"83.33%",id:"bits-leaderboard-silver-linearGradient-5"},o.createElement("stop",{stopColor:"#FFF",offset:"0%"}),o.createElement("stop",{stopColor:"#EAEEF2",offset:"9.632%"}),o.createElement("stop",{stopColor:"#686C71",offset:"100%"})),o.createElement("circle",{id:"bits-leaderboard-silver-path-6",cx:"16",cy:"16",r:"11"})),o.createElement("g",{id:"bits-leaderboard-silver-Symbols",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"bits-leaderboard-silver-Medal-2-silver-lg"},o.createElement("g",{id:"bits-leaderboard-silver-Star-Copy-2"},o.createElement("use",{fill:"#CBC8D0",xlinkHref:"#bits-leaderboard-silver-path-2"}),o.createElement("path",{stroke:"url(#bits-leaderboard-silver-linearGradient-1)",d:"M16 29.53l-2.59 1.988-1.803-2.72-3.095 1.039-.823-3.16-3.264-.021.248-3.256-3.08-1.08 1.29-2.998-2.562-2.023 2.195-2.416-1.768-2.745 2.861-1.573-.78-3.17 3.216-.559.292-3.252L9.56 4.1l1.332-2.98 2.881 1.534L16 .267l2.227 2.387 2.881-1.535L22.44 4.1l3.223-.516.292 3.252 3.216.559-.78 3.17 2.86 1.573-1.767 2.745 2.195 2.416-2.563 2.023 1.292 2.998-3.08 1.08.247 3.256-3.264.021-.823 3.16-3.095-1.04-1.803 2.721L16 29.53z"})),o.createElement("path",{id:"bits-leaderboard-silver-Star-Copy-3",fill:"url(#bits-leaderboard-silver-linearGradient-3)",opacity:".6",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("path",{id:"bits-leaderboard-silver-Star-Copy-4-grad",fill:"url(#bits-leaderboard-silver-linearGradient-4)",opacity:".6",d:"M16 28.9l-2.469 1.895-1.72-2.594-2.95.991-.784-3.012-3.113-.02.237-3.104-2.938-1.03 1.232-2.86L1.05 17.24l2.093-2.304-1.685-2.617 2.728-1.5-.744-3.022 3.066-.533.278-3.1 3.073.492 1.27-2.842 2.747 1.463L16 1l2.123 2.276 2.747-1.463 1.27 2.842 3.073-.492.278 3.1 3.066.533-.744 3.022 2.728 1.5-1.685 2.617 2.093 2.304-2.444 1.928 1.232 2.858-2.938 1.03.237 3.104-3.113.02-.784 3.013-2.95-.991-1.72 2.594z"}),o.createElement("g",{id:"bits-leaderboard-silver-Oval-Copy"},o.createElement("use",{fill:"#A3A7AA",xlinkHref:"#bits-leaderboard-silver-path-6"}),o.createElement("circle",{stroke:"url(#bits-leaderboard-silver-linearGradient-5)",cx:"16",cy:"16",r:"11.5"})))))},N=n("wUQP"),w=n("3CMh"),_=n("6MRn"),D=n("4h+t"),O=n("8SX2"),I=n("oK83"),T=n("PL8s"),M=n("wp5a"),L=n("+80q"),F=n("X2PJ"),x=(n("ky+Y"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.avatarRoundification=Object(N.c)("watch_avatar_roundification"),t}return r.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(v.a,{className:"bits-leaderboard-expanded-leaderboard-entry",display:f.d.Block,alignItems:f.b.Center},o.createElement(v.a,{overflow:f.i.Hidden,display:f.d.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:f.b.Center},o.createElement(v.a,{className:"bits-leaderboard-expanded-leaderboard-entry__rank"},o.createElement(T.a,{width:8,height:2})),o.createElement(v.a,{className:"bits-leaderboard-expanded-leaderboard-entry__avatar"},o.createElement(T.a,{height:15})),o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-expanded-leaderboard-entry__username",margin:{x:1}},o.createElement(T.a,{width:100,height:2})),o.createElement(v.a,{className:"bits-leaderboard-expanded-leaderboard-entry__score",margin:{left:"auto"}},o.createElement(T.a,{width:75,height:2}))));var e=this.props.bitsConfig?this.props.bitsConfig:Object(D.a)(),t=null,n="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){n=this.props.data.user.displayName||this.props.data.user.login;var i=o.createElement(L.a,{ellipsis:!0},n);this.props.selfId&&this.props.selfId===this.props.id&&(i=o.createElement(L.a,{ellipsis:!0,color:F.c.Link,bold:!0},n)),t=o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-expanded-leaderboard-entry__username",margin:{x:1},display:f.d.InlineBlock},o.createElement(O.a,{contentID:"",login:this.props.data.user.login,sourceType:I.b.bits_leaderboard},i))}var a,r=null;r=this.props.selfId&&this.props.selfId===this.props.value?o.createElement(M.a,{label:this.props.rank.toString(),type:M.b.Brand}):o.createElement(L.a,{color:F.c.Link,bold:!0},this.props.rank);var s=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;return a=o.createElement(v.a,{overflow:f.i.Hidden,display:f.d.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:f.b.Center},o.createElement(v.a,{className:"bits-leaderboard-expanded-leaderboard-entry__rank",padding:{right:.5}},r),o.createElement(F.e,{borderRadius:this.avatarRoundification?F.b.Rounded:void 0},o.createElement("img",{alt:n||"",src:s,className:"bits-leaderboard-expanded-leaderboard-entry__avatar"})),t,o.createElement(v.a,{flexShrink:0,className:"bits-leaderboard-expanded-leaderboard-entry__score",margin:{left:"auto"},display:f.d.InlineBlock},o.createElement(w.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:w.b.ExtremelySmall,display:f.d.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.b.Center}))),o.createElement(v.a,{className:"bits-leaderboard-expanded-leaderboard-entry",display:f.d.Block,alignItems:f.b.Center},a)},t}(o.Component)),j=Object(s.compose)(Object(l.a)(_,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.value,profileImageWidth:50}}}}))(x),A=(n("U80U"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(v.a,{display:f.d.InlineFlex,alignItems:f.b.Center,flexGrow:1});var e=this.props.bitsConfig?this.props.bitsConfig:Object(D.a)(),t=null,n="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){n=this.props.data.user.displayName||this.props.data.user.login;var i=o.createElement(L.a,{ellipsis:!0,bold:!0},n);this.props.selfId&&this.props.selfId===this.props.value&&(i=o.createElement(L.a,{ellipsis:!0,color:F.c.Link,bold:!0},n)),t=o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-expanded-top-three-entry__username",margin:{x:.5},display:f.d.InlineBlock},o.createElement(O.a,{contentID:"",login:this.props.data.user.login,sourceType:I.b.bits_leaderboard},i))}var r,s=null;s=this.props.selfId&&this.props.selfId===this.props.value?o.createElement(M.a,{label:this.props.rank.toString(),type:M.b.Brand}):o.createElement(L.a,{color:F.c.Link,bold:!0},this.props.rank);var l=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;return r=o.createElement(v.a,{overflow:f.i.Hidden,display:f.d.InlineFlex,flexGrow:1,fullWidth:!0,alignItems:f.b.Center},o.createElement(v.a,{className:"bits-leaderboard-expanded-top-three-entry__rank"},s),o.createElement(k,{size:a.Big,medal:this.props.medal,profileImageUrl:l}),t,o.createElement(v.a,{flexShrink:0,className:"bits-leaderboard-expanded-top-three-entry__score",margin:{left:"auto"},display:f.d.InlineBlock},o.createElement(w.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:e,size:w.b.ExtremelySmall,display:f.d.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.b.Center}))),o.createElement(v.a,{className:"bits-leaderboard-expanded-top-three-entry",display:f.d.Block},r)},t}(o.Component)),P=Object(s.compose)(Object(l.a)(_,{name:"data",skip:function(e){return!e.id},options:function(e){return{variables:{userID:e.value,profileImageWidth:50}}}}))(A),R=n("Ws8v"),U=n("7uM4"),B=n("b7S+"),V=n("dEDE");n("2C+f");!function(e){e.UserPlaceEntry="user-place-entry"}(b||(b={}));var H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderExpandArrow=function(){return o.createElement(v.a,{position:f.j.Absolute,attachRight:!0,attachTop:!0,className:"bits-leaderboard-expanded__arrow",display:f.d.Flex,alignItems:f.b.Stretch},o.createElement(V.a,{size:V.b.Small,fullWidth:!0,type:V.d.Text,onClick:t.props.toggleExpand},o.createElement(U.a,{asset:U.b.AngleUp,height:20,width:20})))},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.shouldRenderBottomContent(),t=this.renderTopThreeEntries(),n=this.renderTopTenEntries(),i=this.renderExpandArrow(),a=this.renderTopSection(),r=null,s=null;e&&((r=this.renderUserPlaceEntry())||(s=this.renderBottomSection()));var l={"bits-leaderboard-expanded__top-three-break":!!this.props.topEdges&&this.props.topEdges.length>3},c={"bits-leaderboard-expanded__top-ten-break":!!this.props.topEdges&&this.props.topEdges.length>0};return o.createElement(R.a,{background:F.a.Base,padding:{top:1},position:f.j.Relative},a,o.createElement(g.b,{className:"bits-leaderboard-expanded__scrollable",suppressScrollX:!0},o.createElement(v.a,null,o.createElement("ul",null,t,o.createElement(v.a,{className:p(l)}),n,o.createElement(v.a,{className:p(c)}),r),s)),i)},t.prototype.renderTopThreeEntries=function(){var e=this.props.topEdges;if(!e)return null;var t=[];return t.push(this.renderTopThreeEntry(e[0],i.Gold)),t.push(this.renderTopThreeEntry(e[1],i.Silver)),t.push(this.renderTopThreeEntry(e[2],i.Bronze)),t},t.prototype.renderTopSection=function(){var e=Object(h.d)("Weekly Top Cheerers","Bits--PinnedCheerV2"),t=this.props.secondsRemaining?this.props.secondsRemaining:0,n=Math.floor(t/86400),i=o.createElement(L.a,{type:L.e.Span},Object(h.d)("{time, plural, one {Resets in {time} day} other {Resets in {time} days}}",{time:n},"Bits--PinnedCheerV2"));return n<1&&(i=o.createElement(L.a,{type:L.e.Span},Object(h.d)("Resets in less than a day","Bits--PinnedCheerV2"))),this.props.leaderboardMode===m.Z.ALLTIME?(e=Object(h.d)("All-time Top Cheerers","Bits--PinnedCheerV2"),i=null):this.props.leaderboardMode===m.Z.MONTH&&(e=Object(h.d)("Monthly Top Cheerers","Bits--PinnedCheerV2")),o.createElement(v.a,{display:f.d.Flex,alignItems:f.b.Center,flexDirection:f.e.Column},o.createElement(v.a,{display:f.d.Flex},o.createElement(L.a,{type:L.e.H5,bold:!0},e),"",o.createElement(v.a,{alignSelf:f.c.Start},o.createElement(B.a,{label:Object(h.d)("List of users ordered by total amount of Bits used for a given time period. Users with the highest Bits are at the top.","Bits--PinnedCheerV2"),width:150,direction:B.c.Bottom},o.createElement(U.a,{asset:U.b.NotificationInfo,height:16,width:16})))),i,o.createElement(v.a,{className:"bits-leaderboard-expanded__section-break",margin:{y:1}}))},t.prototype.renderBottomSection=function(){var e=!!this.props.topEdges&&this.props.topEdges.length>0;return o.createElement(v.a,{padding:{bottom:1}},o.createElement(R.a,{borderTop:e},o.createElement(v.a,{display:f.d.Flex,flexDirection:f.e.Column,alignItems:f.b.Center,margin:{top:1}},o.createElement(U.a,{asset:U.b.Bits,type:U.c.Brand}),o.createElement(L.a,{type:L.e.Span,bold:!0},Object(h.d)("Cheer your way to the top!","Bits--PinnedCheersV2")))))},t.prototype.renderTopThreeEntry=function(e,t){return e&&e.node?o.createElement(v.a,{key:e.node.id,padding:{x:1,top:.5}},o.createElement(P,{id:e.node.id,value:e.node.entryKey,score:e.node.score,bitsConfig:this.props.bitsConfig,medal:t,selfId:this.props.selfId,rank:e.node.rank})):null},t.prototype.renderTopTenEntries=function(){var e=this;return this.props.topEdges?this.props.topEdges.slice(3,10).reduce(function(t,n){return n&&n.node&&t.push(e.renderTopTenEntry(n.node)),t},[]):null},t.prototype.renderTopTenEntry=function(e){return o.createElement(v.a,{key:e.id,padding:{x:1,top:.5}},o.createElement(j,{id:e.id,value:e.entryKey,score:e.score,bitsConfig:this.props.bitsConfig,selfId:this.props.selfId,rank:e.rank}))},t.prototype.shouldRenderBottomContent=function(){var e=this;if(!this.props.topEdges)return!1;var t=!0;return this.props.topEdges.forEach(function(n){n&&n.node&&n.node.entryKey===e.props.selfId&&(t=!1)}),t},t.prototype.renderUserPlaceEntry=function(){if(!this.props.userPlaceEdge)return null;var e=this.renderTopTenEntry(this.props.userPlaceEdge);return o.createElement(v.a,{padding:{top:.5},"data-test-selector":b.UserPlaceEntry},o.createElement(R.a,{borderTop:!0},o.createElement(v.a,{padding:{y:.5}},e)))},t}(o.Component);function G(e){switch(e){case 1:return Object(h.d)("Cheer now to be #1!","Bits--PinnedCheerV2");case 2:return Object(h.d)("Cheer to take #2!","Bits--PinnedCheerV2");case 3:return Object(h.d)("Cheer to take #3!","Bits--PinnedCheerV2");default:return Object(h.d)("...","Bits--PinnedCheerV2")}}n("986b");var q,W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(v.a,{className:"bits-leaderboard-header-first-entry",flexShrink:0},o.createElement(v.a,{className:"bits-leaderboard-header-first-entry__container",overflow:f.i.Hidden,display:f.d.InlineFlex,alignItems:f.b.Center,flexGrow:1},o.createElement(v.a,{className:"bits-leaderboard-medal__profile-image--big"},o.createElement(T.a,{width:22,height:22})),o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-header-first-entry__text",margin:{left:.5}},o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-header-first-entry__username"},o.createElement(T.a,{width:50,height:2})),o.createElement(v.a,{className:"bits-leaderboard-header-first-entry__score",padding:{y:.5}},o.createElement(T.a,{width:30,height:2})))));var e,t=this.props.bitsConfig?this.props.bitsConfig:Object(D.a)(),n=null,r="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){r=this.props.data.user.displayName||this.props.data.user.login;var s=o.createElement(L.a,{ellipsis:!0,bold:!0},r);this.props.selfId&&this.props.selfId===this.props.entryKey&&(s=o.createElement(M.a,{label:r,type:M.b.Brand})),n=o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-header-first-entry__username"},o.createElement(O.a,{contentID:"",login:this.props.data.user.login,sourceType:I.b.bits_leaderboard},s))}if(this.props.isEmpty||this.props.data&&!this.props.data.user){var l=G(1);e=o.createElement(v.a,{className:"bits-leaderboard-header-first-entry__container",overflow:f.i.Hidden,display:f.d.InlineFlex,alignItems:f.b.Center,flexGrow:1},o.createElement(v.a,{flexShrink:0},o.createElement(k,{size:a.Big,medal:i.Default})),o.createElement(v.a,{className:"bits-leaderboard-header-first-entry__text",margin:{left:.5}},o.createElement(L.a,{color:F.c.Link,bold:!0},l)))}else{var c=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;e=o.createElement(v.a,{className:"bits-leaderboard-header-first-entry__container",overflow:f.i.Hidden,display:f.d.InlineFlex,alignItems:f.b.Center,flexGrow:1},o.createElement(v.a,{flexShrink:0},o.createElement(k,{size:a.Big,medal:i.Gold,profileImageUrl:c})),o.createElement(v.a,{className:"bits-leaderboard-header-first-entry__text",margin:{left:.5}},n,o.createElement(v.a,{className:"bits-leaderboard-header-first-entry__score"},o.createElement(w.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:t,size:w.b.ExtremelySmall,display:f.d.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.b.Center}))))}this.props.isEmpty||(e=o.createElement(B.a,{label:r,direction:B.c.Bottom},e));var d={"bits-leaderboard-header-first-entry":!0,"bits-leaderboard-header-first-entry__empty":this.props.isEmpty};return o.createElement(v.a,{className:p(d),flexShrink:0},e)},t}(o.Component),z=Object(s.compose)(Object(l.a)(_,{name:"data",skip:function(e){return!e.id||!e.entryKey},options:function(e){return{variables:{userID:e.entryKey,profileImageWidth:50}}}}))(W),Q=(n("ifPV"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){if(this.props.data&&(this.props.data.loading||this.props.data.error))return o.createElement(v.a,{className:"bits-leaderboard-header-runner-up-entry",display:f.d.Flex,alignItems:f.b.Center},o.createElement(v.a,{overflow:f.i.Hidden,display:f.d.Flex,alignItems:f.b.Center,flexGrow:0,fullWidth:!0},o.createElement(v.a,{flexShrink:0},o.createElement(v.a,{className:"bits-leaderboard-medal__profile-image--small"},o.createElement(T.a,{width:10,height:10}))),o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",flexShrink:1,margin:{x:.5}},o.createElement(T.a,{width:80,height:2})),o.createElement(v.a,{className:"bits-leaderboard-header-runner-up-entry__score",display:f.d.InlineFlex,margin:{left:"auto",y:.5},flexShrink:0},o.createElement(T.a,{width:40,height:2}))));var e,t=this.props.bitsConfig?this.props.bitsConfig:Object(D.a)(),n=null,r="";if(this.props.data&&this.props.data.user&&this.props.data.user.login){r=this.props.data.user.displayName||this.props.data.user.login;var s=o.createElement(L.a,{ellipsis:!0,bold:!0},r);this.props.selfId&&this.props.selfId===this.props.entryKey&&(s=o.createElement(M.a,{label:r,type:M.b.Brand})),n=o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",flexShrink:1,margin:{x:.5}},o.createElement(O.a,{contentID:"",login:this.props.data.user.login,sourceType:I.b.bits_leaderboard},s))}if(this.props.isEmpty||this.props.data&&!this.props.data.user){var l=G(this.props.rank?this.props.rank:0);e=o.createElement(v.a,{overflow:f.i.Hidden,display:f.d.Flex,alignItems:f.b.Center,flexGrow:0,fullWidth:!0},o.createElement(v.a,{flexShrink:0},o.createElement(k,{size:a.Small,medal:i.Default})),o.createElement(v.a,{ellipsis:!0,className:"bits-leaderboard-header-runner-up-entry__username",flexShrink:1,margin:{x:.5}},o.createElement(L.a,{color:F.c.Link,bold:!0},l)))}else{var c=this.props.data&&this.props.data.user&&this.props.data.user.profileImageURL||h.a.defaultAvatarURL;e=o.createElement(v.a,{overflow:f.i.Hidden,display:f.d.Flex,alignItems:f.b.Center,flexGrow:0,fullWidth:!0},o.createElement(v.a,{flexShrink:0},o.createElement(k,{size:a.Small,medal:this.props.medal,profileImageUrl:c})),n,o.createElement(v.a,{flexShrink:0,className:"bits-leaderboard-header-runner-up-entry__score",margin:{left:"auto"}},o.createElement(w.a,{animated:!1,showImage:!0,showAmount:!0,prefix:"Cheer",bitsConfig:t,size:w.b.ExtremelySmall,display:f.d.InlineFlex,amount:this.props.score,formattedNumber:!0,alignItems:f.b.Center})))}return this.props.isEmpty||(e=o.createElement(B.a,{label:r,direction:B.c.Bottom},e)),o.createElement(v.a,{className:"bits-leaderboard-header-runner-up-entry",display:f.d.Flex,alignItems:f.b.Center},e)},t}(o.Component)),Y=Object(s.compose)(Object(l.a)(_,{name:"data",skip:function(e){return!e.id||!e.entryKey},options:function(e){return{variables:{userID:e.entryKey,profileImageWidth:50}}}}))(Q);n("MBj5");(q||(q={})).ExpandArrow="expand-arrow";var K,X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderFirstPlaceEntry=function(){var e,n=null;return t.props.topEdges&&t.props.topEdges[0]&&(n=t.props.topEdges[0]),e=n&&n.node?o.createElement(z,{selfId:t.props.selfId,id:n.node.id,entryKey:n.node.entryKey,score:n.node.score,bitsConfig:t.props.bitsConfig}):o.createElement(z,{isEmpty:!0}),o.createElement(f.g,{key:1},e)},t.renderExpandArrow=function(){return o.createElement(v.a,{"data-test-selector":q.ExpandArrow,className:"pinned-cheer-v2-header--arrow",alignItems:f.b.Stretch,fullHeight:!0,display:f.d.InlineFlex,attachTop:!0,position:f.j.Absolute},o.createElement(V.a,{size:V.b.Small,fullWidth:!0,type:V.d.Text,onClick:t.props.toggleExpand},o.createElement(U.a,{asset:U.b.AngleDown,height:20,width:20})))},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.renderFirstPlaceEntry(),t=null,n=null,a=this.renderExpandArrow();if(this.props.topEdges&&this.props.topEdges[0]){t=this.renderRunnerUpEntry(2,i.Silver);var r=this.props.topEdges[1]?3:0;n=this.renderRunnerUpEntry(r,i.Bronze)}return o.createElement(R.a,{className:"pinned-cheer-v2-header",background:F.a.Base,position:f.j.Relative},o.createElement(v.a,{className:"pinned-cheer-v2-header__users",display:f.d.InlineFlex,flexWrap:f.f.NoWrap,justifyContent:f.h.Between,fullHeight:!0},e,o.createElement(v.a,{className:"pinned-cheer-v2-header__runner-up-entries",display:f.d.Flex,flexShrink:1,flexWrap:f.f.NoWrap,justifyContent:f.h.Between,flexDirection:f.e.Column},t,n)),a)},t.prototype.renderRunnerUpEntry=function(e,t){var n,a=null;return e>0&&this.props.topEdges&&this.props.topEdges[e-1]&&(a=this.props.topEdges[e-1]),n=a&&a.node?o.createElement(Y,{selfId:this.props.selfId,id:a.node.id,entryKey:a.node.entryKey,score:a.node.score,medal:t,bitsConfig:this.props.bitsConfig}):o.createElement(Y,{isEmpty:!0,medal:i.Default,rank:e}),o.createElement(f.g,{key:e},n)},t}(o.Component),$=n("+LJB"),J=n("RiD7"),Z=n("Qime");n("MIhh");(K||(K={})).Container="pinned-cheers-container";var ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isExpanded:!1},t.toggleIsExpanded=function(){t.setState(function(e){return{isExpanded:!e.isExpanded}},function(){t.state.isExpanded&&t.onExpandClick()})},t.onExpandClick=function(){var e=t.props,n=e.channelID,i=e.userID,a=e.data.user;if(a&&a.cheer&&a.cheer.leaderboard&&a.cheer.settings&&a.cheer.settings.leaderboard&&a.cheer.settings.leaderboard.isEnabled){var r=a.cheer.settings.leaderboard.timePeriodType,o=a.cheer.leaderboard.items.edges&&a.cheer.leaderboard.items.edges.slice(0,10),s=!1;i&&o&&(s=o.findIndex(function(e){return!!e&&!!e.node&&e.node.entryKey===i})>=0),Object(J.l)({leaderboardSize:o?o.length:0,leaderboardMode:r||m.Z.ALLTIME,userPresentInLeaderboard:s,userID:i,channelID:n})}},t}return r.__extends(t,e),t.prototype.render=function(){var e;return e=this.renderLeaderboard(),o.createElement(v.a,{zIndex:f.n.Default},e)},t.prototype.renderLeaderboard=function(){if(this.props.data.error||!(this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.leaderboard))return null;if(!this.props.data.user.cheer.settings||!this.props.data.user.cheer.settings.leaderboard||!this.props.data.user.cheer.settings.leaderboard.isEnabled)return null;var e=this.props.data.user.cheer.leaderboard.items.edges&&this.props.data.user.cheer.leaderboard.items.edges.slice(0,10),t=null,n=this.props.data.user.cheer.settings.leaderboard.timePeriodType||m.Z.ALLTIME;this.props.data.user.self&&this.props.data.user.self.bitsLeaderboardItem&&(t=this.props.data.user.self.bitsLeaderboardItem);var i=null;this.state.isExpanded&&(i=o.createElement(H,{topEdges:e,userPlaceEdge:t,toggleExpand:this.toggleIsExpanded,selfId:this.props.userID,bitsConfig:this.props.bitsConfig,leaderboardMode:n,secondsRemaining:this.props.data.user.cheer.leaderboard.secondsRemaining}));var a=null;return this.state.isExpanded||(a=o.createElement(X,{topEdges:e,toggleExpand:this.toggleIsExpanded,selfId:this.props.userID,bitsConfig:this.props.bitsConfig})),o.createElement(v.a,{className:"pinned-cheer-v2","data-test-selector":K.Container,zIndex:f.n.Default},o.createElement(R.a,{borderBottom:!0},a,i))},t}(o.Component),te=Object(s.compose)(Object(l.a)(Z,{name:"data",options:function(e){return{variables:{channelID:e.channelID}}}}),Object(c.a)(function(e){return{query:Z,variables:{channelID:e.channelID},topic:Object(u.d)(e.channelID),type:d.PubsubMessageType.BitsChannelSettingsEvent,mutator:function(e,t){if(t)return t&&t.user&&null!==t.user.cheer&&null!==t.user.cheer.leaderboard&&null!==t.user.cheer.settings.leaderboard&&void 0!==e.updates.leaderboard_enabled&&(t.user.cheer.settings.leaderboard.isEnabled=e.updates.leaderboard_enabled),t}}}),Object(c.a)(function(e){return Object($.a)(Z,e.channelID,e.data.user&&e.data.user.cheer&&e.data.user.cheer.leaderboard,e.userID)}))(ee),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={cheerIsTall:!1,recentCheerID:null,recentCheerExpireTime:null,pcheersV2Enabled:!1},t}return r.__extends(t,e),t.prototype.render=function(){return o.createElement(te,{channelID:this.props.channelID,userID:this.props.userID,bitsConfig:this.props.bitsConfig,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin})},t}(o.Component),ie=n("/MKj"),ae=n("kRBY");var re=Object(ie.connect)(function(e){var t=Object(ae.e)(e);return{isStaff:t&&t.roles&&t.roles.isStaff}})(ne);n.d(t,!1,function(){return ne}),n.d(t,"a",function(){return re})},"qy/S":function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"VideoEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PreviewCardVideo"},directives:[]}]}}]}}],loc:{start:0,end:157}};i.loc.source={body:'#import "twilight/features/video-preview-card/models/preview-card-video-fragment.gql"\nfragment VideoEdge on VideoEdge {\ncursor\nnode {\n...PreviewCardVideo\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("he03").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},"r/lI":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FirstCheerBuilder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emoteMinimumBits"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:145}};n.loc.source={body:"query FirstCheerBuilder($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\ncheer {\nid\nsettings {\nemoteMinimumBits\ncheerMinimumBits\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},r2XO:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("x7UT"),c=n("0Log"),d=n("/aPz"),u=n("SceP"),m=n("xzy9"),p=n("3tQW"),h=n("ZtEv"),g=n("fxMP");var f=n("nInp"),v=n("DLhE"),b=n("MJbm"),k=n("8/mp"),C=n("DMoW"),y=n("TSYQ"),S=n("oJmH"),E=n("yR8l"),N=n("8Ad5"),w=n("geRD"),_=n("b5C3"),D=n("XmgI"),O=n("4h+t"),I=n("0Lz3"),T=n("X31c"),M=n("ZVTe"),L=n("cys1"),F=n("fezU"),x=n("p52R"),j=n("TApp"),A=n("oK83"),P=n("2EzP"),R=n("a1OF"),U=n("1VX3"),B=n("sUnt"),V=n("PL8s"),H=n("dEDE"),G=n("+80q"),q=n("9yes"),W=n("R2Ti"),z=n("g17B"),Q=n("frkH"),Y=n("4zGI"),K=n("tX9j"),X={badges:{twitchbot:"1"},badgeDynamicData:{},bits:0,color:"#6441A5",displayName:"AutoMod",id:"automod",userID:"automod",username:"automod",userType:x.a.GlobalMod,emotes:{}};function $(e){var t;switch(e){case"aggressive":t=Object(s.d)("aggressive","AutoModLine");break;case"sexual":t=Object(s.d)("sexual","AutoModLine");break;case"profanity":t=Object(s.d)("profanity","AutoModLine");break;case"identity":t=Object(s.d)("identity","AutoModLine");break;default:return Object(s.d)("Message is being held for review. Allow will post it to chat.","AutoModLine")}return Object(s.d)("Held a message for reason: {category}. Allow will post it to chat.",{category:t},"AutoModLine")}var J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isResolved:!1},t.getAllowMessageCallback=function(e){return e!==h.a.CheerMessageRejectedPrompt?t.allowAutoModRejectedMessage:t.allowAutoModRejectedCheerMessage},t.getDenyMessageCallback=function(e){return e!==h.a.CheerMessageRejectedPrompt?t.denyAutoModRejectedMessage:t.denyAutoModRejectedCheerMessage},t.allowAutoModRejectedMessage=function(){t.setState({isResolved:!0});var e=t.props.message;e.autoModType===h.a.MessageRejectedPrompt&&t.props.allowRejectedChatMessage&&t.props.allowRejectedChatMessage(Object(w.a)({id:e.rejectedMessage.id}))},t.denyAutoModRejectedMessage=function(){t.setState({isResolved:!0});var e=t.props.message;e.autoModType===h.a.MessageRejectedPrompt&&t.props.denyRejectedChatMessage&&t.props.denyRejectedChatMessage(Object(w.a)({id:e.rejectedMessage.id}))},t.allowAutoModRejectedCheerMessage=function(){t.setState({isResolved:!0});var e=t.props,n=e.message,i=e.allowRejectedCheer;if(n.autoModType===h.a.CheerMessageRejectedPrompt&&i){var a={id:n.rejectedMessage.id,targetUserID:n.targetUserID};i(Object(w.a)(a))}},t.denyAutoModRejectedCheerMessage=function(){t.setState({isResolved:!0});var e=t.props,n=e.message,i=e.denyRejectedCheer;if(n.autoModType===h.a.CheerMessageRejectedPrompt&&i){var a={id:n.rejectedMessage.id,targetUserID:n.targetUserID};i(Object(w.a)(a))}},t.surfaceError=function(e){t.props.messageHandlerAPI&&t.props.messageHandlerAPI.handleMessage(Object(j.a)(e))},t.openViewerCard=function(e){t.isKeyboardEvent(e)&&e.keyCode!==N.a.Space&&e.keyCode!==N.a.Enter||t.props.message.autoModType===h.a.MessageRejectedPrompt&&t.props.onUsernameClick(t.props.message.rejectedMessage.user.userLogin,A.b.chat_message,t.props.message.id,e.currentTarget.getBoundingClientRect().bottom)},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props.message,n=i.__assign({},X);switch(t.autoModType){case h.a.MessageRejectedPrompt:e=$(t.category);break;case h.a.CheerMessageRejectedPrompt:e=$(t.category);var r=this.props.data&&this.props.data.user&&this.props.data.user.cheer?this.props.data.user.cheer:{__typename:"CheerInfo",id:null,emotes:[]},o=Object(D.g)(t.originalMessage,Object(I.a)(r.emotes||[]));t.rejectedMessage=i.__assign({},t.rejectedMessage,{messageParts:o});break;case h.a.MessageRejected:e=Object(s.d)("Hey! Your message is being checked by mods and has not been sent.","AutoModLine");break;case h.a.MessageAllowed:e=Object(s.d)("Mods have allowed your message. Happy chatting!","AutoModLine");var l=(e+=" VoHiYo").match("VoHiYo");l&&void 0!==l.index&&(n.emotes[""+l.index]={startIndex:l.index,id:"81274"});break;case h.a.MessageDenied:e=Object(s.d)("Mods have removed your message.","AutoModLine");break;case h.a.CheerMessageDenied:e=Object(s.d)("Mods have removed your text message. Your Cheermote was sent.","AutoModLine");break;case h.a.CheerMessageTimeout:e=Object(s.d)("Mods did not approve your message in time.  Your Cheermote was sent without the text.","AutoModLine");break;case h.a.MessageModApproved:case h.a.MessageModDenied:return null;default:throw new Error("Invalid message type")}var c=Object(R.a)(e,n,D.a);switch(t.autoModType){case h.a.MessageRejectedPrompt:case h.a.CheerMessageRejectedPrompt:if(!(t.autoModType!==h.a.CheerMessageRejectedPrompt||this.props.data&&this.props.data.user&&this.props.data.user.cheer))return null;if(t.rejectedMessage.deleted)return null;if(this.state.isResolved)return a.createElement(B.a,{className:"chat-line__status"},Object(s.d)("Thank you for your feedback!","ChatLine"));var d=["chat-line__message--alert","chat-line__message--special","chat-line__message--clearfix"],u=void 0;return u=this.props.extractedMessage&&this.props.extractedMessage.message&&!this.props.extractedMessage.error?a.createElement(B.a,{className:y(d)},a.createElement(U.a,{badgeSets:this.props.badgeSets,bitsConfig:Object(O.a)(),channelID:this.props.channelID,message:this.props.extractedMessage.message,hasModPermissions:!0,showModerationIcons:this.props.showModerationIcons,showTimestamps:!1,currentUserLogin:this.props.channelLogin,onUsernameClick:this.openViewerCard,surfaceError:this.surfaceError})):this.props.extractedMessage&&this.props.extractedMessage.loading?a.createElement(V.a,{lineCount:2}):a.createElement(T.a,i.__assign({},this.props,{isCurrentUserStaff:!1,isDeleted:!1,isHidden:!1,showTimestamps:!1,className:y(d),message:t.rejectedMessage})),a.createElement(B.a,{className:"chat-line__message"},a.createElement(_.a,{badgeSets:this.props.badgeSets,badgesToRender:c.badges}),a.createElement(M.a,{userData:c.user}),a.createElement("span",{key:"separator"},": "),Object(L.f)(c.messageParts),a.createElement(B.a,{key:"automod-prompt",className:"chat-line__nested-component--float-right"},a.createElement(H.a,{size:H.b.Small,onClick:this.getAllowMessageCallback(t.autoModType),type:H.d.Text},Object(s.d)("Allow","AutoModLine")),a.createElement(G.a,{type:G.e.Span},""),a.createElement(H.a,{size:H.b.Small,onClick:this.getDenyMessageCallback(t.autoModType),type:H.d.Text},Object(s.d)("Deny","AutoModLine"))),u);case h.a.MessageRejected:case h.a.MessageAllowed:case h.a.MessageDenied:case h.a.CheerMessageDenied:case h.a.CheerMessageTimeout:return a.createElement(B.a,{className:y(["chat-line__message","chat-line__message--special","chat-line__message--alert"])},a.createElement(_.a,{badgeSets:this.props.badgeSets,badgesToRender:c.badges}),a.createElement(M.a,{userData:c.user}),a.createElement("span",{key:"separator"},": "),Object(L.f)(c.messageParts));default:throw new Error("Invalid message type")}},t.prototype.isKeyboardEvent=function(e){return void 0!==e.keyCode},t}(a.Component);var Z=Object(S.compose)(P.a,Object(F.b)(function(e){return{onUsernameClick:e.onShowViewerCard}}),Object(E.a)(q,{name:"allowRejectedChatMessage"}),Object(E.a)(Q,{name:"denyRejectedChatMessage"}),Object(E.a)(W,{name:"allowRejectedCheer"}),Object(E.a)(Y,{name:"denyRejectedCheer"}),Object(E.a)(z,{name:"data",options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(E.a)(K,{options:function(e){return{variables:{msgID:e.message.rejectedMessage.id,channelID:e.channelID}}},props:function(e){return{extractedMessage:{message:e.data&&e.data.rejectedChatMessage&&e.data.rejectedChatMessage.message||null,loading:!(!e.data||!e.data.loading),error:!(!e.data||!e.data.error)}}},skip:function(e){return!e.channelID||e.message.autoModType!==h.a.MessageRejectedPrompt}}))(J),ee=n("QVaV"),te=n("8SX2"),ne=n("Ws8v"),ie=n("X2PJ"),ae=n("hnjF"),re=n("7uM4"),oe=function(e){var t=e.event,n=t.promoGiftTotal,i=t.promoName,r=t.user,o=a.createElement(te.a,{contentID:r.id,login:r.username,sourceType:A.b.chat_message},Object(ee.a)(r.username,r.displayName)),l=i&&n?Object(s.d)("{recipientButton} is continuing the Gift Sub they got from an anonymous gifter!        They're one of {promoGiftTotal} gift subs to continue this {promoName}.",{promoGiftTotal:n,promoName:i,recipientButton:o},"AnonGiftPaidUpgradeNoticeLine"):Object(s.d)("{recipientButton} is continuing the Gift Sub they got from an anonymous gifter!",{recipientButton:o},"AnonGiftPaidUpgradeNoticeLine");return a.createElement(B.a,{alignItems:ae.b.Start,display:ae.d.Flex},a.createElement(ne.a,{color:ie.c.Alt2,display:ae.d.Flex,flexDirection:ae.e.Column,flexShrink:0,margin:{right:.5}},a.createElement(re.a,{asset:re.b.Ghost})),a.createElement(G.a,{color:ie.c.Alt2,type:G.e.Span},l))};oe.displayName="AnonGiftPaidUpgradeNoticeLine";var se=n("4+Ji"),le=n("0WFu"),ce=function(e){var t=e.event,n=a.createElement(te.a,{contentID:t.recipientID,login:t.recipientLogin,sourceType:A.b.chat_message},Object(ee.a)(t.recipientLogin,t.recipientDisplayName));return a.createElement(B.a,{alignItems:ae.b.Start,display:ae.d.Flex},a.createElement(ne.a,{color:ie.c.Alt2,display:ae.d.Flex,flexDirection:ae.e.Column,flexShrink:0,margin:{right:.5}},a.createElement(re.a,{asset:re.b.Ghost})),a.createElement(G.a,{color:ie.c.Alt2,type:G.e.Span},function(e,t,n){return Object(se.c)(n)?Object(s.d)("An anonymous gifter gave {recipientButton} a 2019 All-Access Pass!",{recipientButton:t},"AnonSubGiftNoticeLine"):"custom"===e.plan?Object(s.d)("An anonymous gifter gave {recipientButton} a Sub!",{recipientButton:t},"AnonSubGiftNoticeLine"):Object(s.d)("An anonymous gifter gave {recipientButton} a Tier {tierNumber} Sub!",{recipientButton:t,tierNumber:Object(le.c)(e.plan)||1},"AnonSubGiftNoticeLine")}(t.methods,n,t.channel)))};ce.displayName="AnonSubGiftNoticeLine";var de=function(e){var t=e.event,n=t.channel,i=t.massGiftCount,r=t.plan,o=Object(se.c)(n)?Object(s.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} 2019 All-Access Pass to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} 2019 All-Access Passes to {channel}'s community!}}",{channel:n,massGiftCount:i},"AnonSubMysteryGiftNoticeLine"):"custom"===r?Object(s.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} Sub to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} Subs to {channel}'s community!}}",{channel:n,massGiftCount:i},"AnonSubMysteryGiftNoticeLine"):Object(s.d)("{massGiftCount, plural,        one {An anonymous gifter is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community!}        other {An anonymous gifter is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community!}}",{channel:n,massGiftCount:i,tierNumber:Object(le.c)(r)||1},"AnonSubMysteryGiftNoticeLine");return a.createElement(B.a,{alignItems:ae.b.Start,display:ae.d.Flex},a.createElement(ne.a,{color:ie.c.Alt2,display:ae.d.Flex,flexDirection:ae.e.Column,flexShrink:0,margin:{right:.5}},a.createElement(re.a,{asset:re.b.Ghost})),a.createElement(G.a,{color:ie.c.Alt2,type:G.e.Span},o))};de.displayName="AnonSubMysteryGiftNoticeLine";var ue=n("xZ3y"),me=function(e){var t=e.event.threshold,n=e.badgeSets.getBadge(ue.a,t.toString()),i=Object(s.d)("{text} Bits badge!",{text:Object(ue.b)(n,t)},"BitsBadgeTierNotification");return a.createElement(B.a,{display:ae.d.Flex},a.createElement(re.a,{height:20,width:20,asset:re.b.Bits,type:re.c.Alt2}),a.createElement(ne.a,{color:ie.c.Alt2,padding:{left:.5},display:ae.d.Inline},Object(s.d)("{userLogin} just earned a new <x:bold>{boldedBadgeText}</x:bold>",{userLogin:a.createElement(te.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:A.b.chat_message},Object(ee.a)(e.event.user.userID,e.event.user.displayName)),boldedBadgeText:i,"x:bold":function(e){return a.createElement(G.a,{color:ie.c.Base,bold:!0,type:G.e.Span},e)}},"BitsBadgeTierNotification")))};me.displayName="BitsBadgeTierNoticeLine";var pe=function(e){return a.createElement(ne.a,{color:ie.c.Alt2,display:ae.d.Inline},Object(s.d)("{userLogin} just made their first cheer!",{userLogin:a.createElement(te.a,{contentID:e.event.message.id,login:e.event.message.user.userLogin,sourceType:A.b.chat_message},Object(ee.a)(e.event.message.user.userLogin,e.event.message.user.userDisplayName))},"FirstCheerNoticeLine"))};pe.displayName="FirstCheerNoticeLine";var he=function(e){var t=e.event,n=a.createElement(te.a,{contentID:t.user.id,login:t.user.username,sourceType:A.b.chat_message},Object(ee.a)(t.user.username,t.user.displayName)),i=a.createElement(te.a,{contentID:t.user.id,login:t.senderLogin,sourceType:A.b.chat_message},Object(ee.a)(t.senderLogin,t.senderName));return a.createElement(G.a,{color:ie.c.Alt2,type:G.e.Span},t.promoName&&t.promoGiftTotal?Object(s.d)("{recipientButton} is continuing the Gift Sub they got from {gifterButton}!            They're one of {promoGiftTotal} gift subs to continue this {promoName}.",{gifterButton:i,promoGiftTotal:t.promoGiftTotal,promoName:t.promoName,recipientButton:n},"GiftPaidUpgradeNoticeLine"):Object(s.d)("{recipientButton} is continuing the Gift Sub they got from {gifterButton}!",{gifterButton:i,recipientButton:n},"GiftPaidUpgradeNoticeLine"))};he.displayName="GiftPaidUpgradeNoticeLine";var ge=n("r7KY"),fe=n("HH5h"),ve=n("OvAg"),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.message.params,t=this.props.data,n=t.channel,i=t.loading,r=t.error;if(i||r||!n||!n.displayName)return null;var o=Object(s.d)("{displayName} is raiding with a party of {viewerCount}.",{displayName:a.createElement("strong",null,n.displayName),viewerCount:a.createElement("strong",null,e.viewerCount)},"RaidIncomingMessage");return a.createElement(ge.a,{"data-test-selector":"incoming-raid"},a.createElement(B.a,{display:ae.d.Flex,alignItems:ae.b.Center},a.createElement(fe.a,{alt:n.displayName,src:n.profileImageURL,size:30}),a.createElement(ne.a,{color:ie.c.Base,margin:{left:1}},o)))},t}(a.Component),ke=Object(E.a)(ve,{options:function(e){return{variables:{channelLogin:e.message.params.login}}}})(be),Ce=n("u5aL"),ye=n("dsMP"),Se=n("hO8c"),Ee=n("amaQ"),Ne=n("7d/q"),we=n("k0nM"),_e=n("ygYM"),De=(n("T84l"),function(e){function t(t){var n=e.call(this,t)||this;return n.state={contextMenuOpen:!1,hideCTA:!1,isHidden:!1},n.toggleContextMenu=function(){var e=n.state.contextMenuOpen;n.setState({contextMenuOpen:!e})},n.onContextMenuClickout=function(){n.setState({contextMenuOpen:!1})},n.hideOnContextMenuAction=function(e){if(void 0!==e)return function(){e(),n.setState({isHidden:!0})}},n.actionClick=n.actionClick.bind(n),n.showCTA=n.showCTA.bind(n),n}return i.__extends(t,e),t.prototype.render=function(){if(this.state.isHidden)return null;var e=this.props.event.callout,t=void 0===this.props.messageIndex||this.props.messageIndex<6;return a.createElement(ne.a,{border:!0,background:ie.a.Alt2,borderRadius:ie.b.Medium,margin:{x:2,y:.5}},a.createElement(B.a,{display:ae.d.Flex,flexDirection:ae.e.Row,alignItems:ae.b.Center,className:"inline-private-callout-line__header"},a.createElement(re.a,{asset:re.b.Lock,width:14,height:14}),a.createElement(B.a,{padding:{left:.5}},a.createElement(G.a,{color:ie.c.Alt2}," ",Object(s.d)("Only visible to you","InlineChatPrivateCallout")," "))),a.createElement(ne.a,{display:ae.d.Flex,alignItems:ae.b.Center,padding:1,borderTop:!0},e.icon&&a.createElement(ne.a,{className:"inline-private-callout-line__icon",margin:{right:1},padding:.5,display:ae.d.Flex,flexGrow:0,flexShrink:0,alignItems:ae.b.Center,justifyContent:ae.h.Center,background:ie.a.Base,borderRadius:ie.b.Rounded,border:!0},e.icon),a.createElement(B.a,{flexGrow:1,padding:{right:1}},a.createElement(G.a,{color:ie.c.Base,bold:!0},e.title)),e.cta&&this.props.event.prompt&&a.createElement(ne.a,{visibility:this.state.hideCTA?ae.m.Hidden:ae.m.Visible},a.createElement(H.a,{onClick:this.actionClick,size:H.b.Small,children:e.cta})),e.contextMenuProps&&a.createElement(ne.a,{color:ie.c.Base,position:ae.j.Relative,padding:{top:.5,bottom:1,x:.5}},a.createElement(Ce.a,{onClickOut:this.onContextMenuClickout},a.createElement(Ne.a,{icon:re.b.More,onClick:this.toggleContextMenu,ariaLabel:"more options"}),a.createElement(we.a,{show:this.state.contextMenuOpen,direction:t?_e.b.BottomRight:_e.b.TopRight,offsetX:"12px"},a.createElement(ye.a,{event:e.contextMenuProps.event,onPin:this.hideOnContextMenuAction(e.contextMenuProps.onPin),onHide:this.hideOnContextMenuAction(e.contextMenuProps.onHide),onSkip:this.hideOnContextMenuAction(e.contextMenuProps.onSkip)}))))),e.withReminderText&&a.createElement(ne.a,{borderTop:!0,background:ie.a.Base,padding:{left:1}},a.createElement(G.a,{color:ie.c.Alt2,type:G.e.Span},Object(s.d)("You will be reminded later","InlinePrivateCallout"))))},t.prototype.actionClick=function(){if(this.props.event.prompt){var e=this.props.event.prompt;e.callOnClose=this.showCTA,e.trackingContext=Ee.c.Chat,this.props.setChatInputPrompt(e),this.setState({hideCTA:!0}),Object(Ee.f)({userID:this.props.currentUserID,userLogin:this.props.currentUserLogin,channelID:this.props.channelID,channelLogin:this.props.channelLogin,calloutType:this.props.event.callout.trackingType,privateCalloutSID:this.props.event.callout.privateSID,clickType:this.props.event.callout.trackingClickType,uiContext:Ee.c.Chat})}},t.prototype.showCTA=function(){this.setState({hideCTA:!1})},t}(a.Component));var Oe=Object(S.compose)(Object(Se.b)(function(e){return{setChatInputPrompt:function(t){return e.setInputPrompt(t)}}}))(De),Ie=n("5zf8"),Te=n("x0+1"),Me=n("KGti"),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.moderationActionEvent,t=e.createdByLogin,n=null;if(e.moderationActionType===h.d.AutoModEnabled)n=Object(s.d)("AutoMod has been enabled for this channel.","ModerationActionLine");else if(e.level===Me.a.Channel)switch(e.moderationActionType){case h.d.Clear:n=Object(s.d)("{user} cleared chat for this room.",{user:t},"ModerationActionLine");break;case h.d.EmoteOnly:n=Object(s.d)("{user} enabled emote-only mode for this room.",{user:t},"ModerationActionLine");break;case h.d.EmoteOnlyOff:n=Object(s.d)("{user} disabled emote-only for this room.",{user:t},"ModerationActionLine");break;case h.d.FollowersOnly:var i=(e.args||[""]).join(" ").trim(),r=parseInt(i,10);n=r?Object(s.d)("{user} enabled {length} followers-only mode for this room.",{user:t,length:Object(Ie.b)(60*r)},"ModerationActionLine"):Object(s.d)("{user} enabled followers-only mode for this room.",{user:t},"ModerationActionLine");break;case h.d.FollowersOnlyOff:n=Object(s.d)("{user} disabled followers-only mode for this room.",{user:t},"ModerationActionLine");break;case h.d.R9kBeta:n=Object(s.d)("{user} enabled r9k mode for this room.",{user:t},"ModerationActionLine");break;case h.d.R9kBetaOff:n=Object(s.d)("{user} disabled r9k mode for this room.",{user:t},"ModerationActionLine");break;case h.d.Slow:var o=(e.args||["120"]).join(" ").trim(),l=parseInt(o,10);n=Object(s.d)("{user} enabled {slowTime}-second slow mode for this room.",{user:t,slowTime:l},"ModerationActionLine");break;case h.d.SlowOff:n=Object(s.d)("{user} disabled slow mode for this room.",{user:t},"ModerationActionLine");break;case h.d.SubscribersOnly:n=Object(s.d)("{user} enabled subscribers-only mode for this room.",{user:t},"ModerationActionLine");break;case h.d.SubscribersOnlyOff:n=Object(s.d)("{user} disabled subscribers-only mode for this room.",{user:t},"ModerationActionLine");break;default:var c=e.args&&e.args.join(" ").trim(),d=c&&c.length>0?"/"+e.moderationActionType+" "+c:""+e.moderationActionType;n=Object(s.d)("{user} used: {command}.",{user:e.createdByLogin,command:d},"ModerationActionLine")}else{var u=e.targetUserLogin,m=e.duration,p=e.reason,g=e.messageBody;switch(e.moderationActionType){case h.d.Timeout:n=e.level===Me.a.User&&this.props.currentUserLogin&&u===this.props.currentUserLogin?m&&p?Object(s.d)("You were timed out for {duration} seconds. Reason: {reason}.",{duration:m,reason:p},"ModerationActionLine"):m?Object(s.d)("You were timed out for {duration} seconds.",{duration:m},"ModerationActionLine"):p?Object(s.d)("You were timed out. Reason: {reason}.",{reason:p},"ModerationActionLine"):Object(s.d)("You were timed out.","ModerationActionLine"):m&&p?Object(s.d)("{user} timed out {target} for {duration} seconds. Reason: {reason}.",{user:t,target:u,duration:m,reason:p},"ModerationActionLine"):m?Object(s.d)("{user} timed out {target} for {duration} seconds.",{user:t,target:u,duration:m},"ModerationActionLine"):Object(s.d)("{user} timed out {target}.",{user:t,target:u},"ModerationActionLine");break;case h.d.Ban:n=!t&&p?Object(s.d)("You were banned. Reason: {reason}.",{reason:p},"ModerationActionLine"):t?p?Object(s.d)("{user} banned {target}. Reason: {reason}.",{user:t,target:u,reason:p},"ModerationActionLine"):Object(s.d)("{user} banned {target}.",{user:t,target:u},"ModerationActionLine"):Object(s.d)("You were banned.","ModerationActionLine");break;case h.d.Untimeout:n=Object(s.d)("{user} removed time out on {target}.",{user:t,target:u},"ModerationActionLine");break;case h.d.Unban:n=Object(s.d)("{user} removed ban on {target}.",{user:t,target:u},"ModerationActionLine");break;case h.d.Mod:n=Object(s.d)("{user} granted moderator privileges to {target}.",{user:t,target:u},"ModerationActionLine");break;case h.d.Unmod:n=Object(s.d)("{user} removed moderator privileges for {target}.",{user:t,target:u},"ModerationActionLine");break;case h.d.Delete:var f=g||"";n=a.createElement(Te.a,{targetLogin:u,moderatorLogin:t,messageBody:f});break;default:return null}}return n?a.createElement(B.a,{className:"chat-line__status"},a.createElement(G.a,{type:G.e.Span},n)):null},t}(a.Component),Fe=n("3Bft"),xe=n("+GjP"),je=n("Jsra"),Ae=function(e){var t=e.channel,n=e.reference,i=e.text,r=Object(xe.e)("https://twitch.amazon.com/prime",{reference:n,channel:t});return a.createElement(je.a,{className:"chat-line__message--link",linkTo:r,targetBlank:!0,rel:"noopener"},i)},Pe=function(e){var t=a.createElement(ne.a,{display:ae.d.Block},a.createElement(te.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:A.b.chat_message},a.createElement(G.a,{color:ie.c.Link},Object(ee.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.plan===Fe.a.Custom?Object(s.d)("{userLogin} <x:strong>Converted</x:strong> from a <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link> sub to a Paid sub!",{userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)},"x:twitch-prime-link":function(t){return Re(e.event.channel,"primetopaid",t)}},"PrimePaidUpgradeNoticeLine"):Object(s.d)("{userLogin} <x:strong>Converted</x:strong> from a <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link> sub to a Tier {tierNumber} sub!",{tierNumber:Object(le.c)(e.event.plan)||1,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)},"x:twitch-prime-link":function(t){return Re(e.event.channel,"primetopaid",t)}},"PrimePaidUpgradeNoticeLine"),a.createElement(B.a,{display:ae.d.Flex},a.createElement(ne.a,{color:ie.c.Alt2},a.createElement(re.a,{asset:re.b.Star})),a.createElement(B.a,{margin:{left:.5}},a.createElement(G.a,null,n)))},Re=function(e,t,n){return a.createElement(Ae,{channel:e,reference:t,text:n})};function Ue(){return{raid_error_self:Object(s.d)("You cannot raid your own channel.","RaidErrorSelfMessage"),raid_error_forbidden:Object(s.d)("You cannot raid this channel.","RaidErrorAlreadyRaidingMessage"),raid_error_already_raiding:Object(s.d)("You already have a raid in progress.","RaidErrorForbiddenMessage"),raid_error_too_many_viewers_to_raid:Object(s.d)("Sorry, raids can only support up to 20,000 viewers right now.","RaidErrorTooManyViewersMessage"),raid_error_unexpected:Object(s.d)("There was a problem starting the raid. Please try again in a minute.","RaidErrorUnexpectedMessage"),unraid_error_unexpected:Object(s.d)("There was a problem stopping the raid. Please try again in a minute.","UnraidErrorUnexpectedMessage"),unraid_error_no_active_raid:Object(s.d)("You do not have an active raid.","UnraidErrorNoActiveRaidMessage"),raid_notice_restricted_chat:Object(s.d)("This channel has follower or subscriber only chat.","RaidNoticeRestrictedChatMessage"),raid_notice_mature:Object(s.d)("This channel is intended for mature audiences.","RaidNoticeMatureMessage"),raid_notice_owner:Object(s.d)("This channel has started a raid, type {unraidCommand} if you want to cancel.",{unraidCommand:"/unraid"},"RaidNoticeOwnerMessage")}}Pe.displayName="PrimePaidUpgradeNoticeLine";var Be=function(e){return a.createElement("span",null,Ue()[e.message.msgid])};Be.displayName="RaidNoticeLine";var Ve=function(e){var t=a.createElement(ne.a,{display:ae.d.Block},a.createElement(te.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:A.b.chat_message},a.createElement(G.a,{color:ie.c.Link},Object(ee.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.methods.prime?e.event.cumulativeMonths<2?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>",{userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)},"x:twitch-prime-link":function(t){return He(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>. They've subscribed for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)},"x:twitch-prime-link":function(t){return He(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>. They've subscribed for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)},"x:twitch-prime-link":function(t){return He(e.event.channel,"resubscription",t)}},"ResubNoticeV2Line"):e.event.methods.plan!==Fe.a.Custom?e.event.cumulativeMonths<2?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}.",{tierNumber:Object(le.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}. They've subscribed for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,tierNumber:Object(le.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"ResubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}. They've subscribed for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,tierNumber:Object(le.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"ResubNoticeV2Line"):e.event.cumulativeMonths<2?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong>.",{userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"ResubNoticeV2Line"):e.event.shouldShareStreakTenure&&void 0!==e.event.streakMonths&&e.event.streakMonths>0?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> for <x:strong>{cumulative} months</x:strong>, currently on a {streak} month streak!",{cumulative:e.event.cumulativeMonths,streak:e.event.streakMonths||0,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"ResubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> for <x:strong>{cumulative} months</x:strong>!",{cumulative:e.event.cumulativeMonths,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"ResubNoticeV2Line"),a.createElement(B.a,{display:ae.d.Flex},a.createElement(ne.a,{color:ie.c.Alt2},a.createElement(re.a,{asset:e.event.methods.prime?re.b.Crown:re.b.Star})),a.createElement(B.a,{margin:{left:.5}},a.createElement(G.a,null,n)))},He=function(e,t,n){return a.createElement(Ae,{channel:e,reference:t,text:n})};Ve.displayName="ResubNoticeV2Line";var Ge=n("yZCp"),qe=function(e){var t=e.event.message,n=t.user.isIntl?t.user.userDisplayName+" ("+t.user.userLogin+")":t.user.userDisplayName,i=Object(s.d)("{user} is new here. Say hello!",{user:a.createElement(te.a,{contentID:t.id,login:t.user.userLogin,sourceType:A.b.chat_message},"@",n)},"NewChatterRitual");return a.createElement(ne.a,{color:ie.c.Alt2},i)};qe.displayName="RitualNoticeLine";var We=function(e){var t=e.event,n=a.createElement(te.a,{contentID:t.user.id,login:t.user.username,sourceType:A.b.chat_message},Object(ee.a)(t.user.username,t.user.displayName)),i=a.createElement(te.a,{contentID:t.user.id,login:t.recipientLogin,sourceType:A.b.chat_message},Object(ee.a)(t.recipientLogin,t.recipientDisplayName)),r=null;return r=Object(se.c)(t.channel)?function(e,t){return Object(s.d)("{gifterButton} just gifted a 2019 All-Access Pass to {recipientButton}!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine")}(n,i):"custom"===t.methods.plan?function(e,t,n){return 1===n?Object(s.d)("{gifterButton} gifted a Sub to {recipientButton}! It's their first time gifting a Sub in the channel!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine"):n>1?Object(s.d)("{gifterButton} gifted a Sub to {recipientButton}! They've gifted {senderCount} Subs in the channel!",{gifterButton:e,recipientButton:t,senderCount:n},"SubGiftNoticeLine"):Object(s.d)("{gifterButton} gifted a subscription to {recipientButton}!",{gifterButton:e,recipientButton:t},"SubGiftNoticeLine")}(n,i,t.senderCount):function(e,t,n,i){return 1===n?Object(s.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}! It's their first Gift Sub in the channel!",{gifterButton:e,recipientButton:t,tierNumber:i},"SubGiftNoticeLine"):n>1?Object(s.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}! They've given {senderCount} Gift Subs in the channel!",{gifterButton:e,recipientButton:t,senderCount:n,tierNumber:i},"SubGiftNoticeLine"):Object(s.d)("{gifterButton} gifted a Tier {tierNumber} Sub to {recipientButton}!",{gifterButton:e,recipientButton:t,tierNumber:i},"SubGiftNoticeLine")}(n,i,t.senderCount,Object(le.c)(t.methods.plan)||1),a.createElement(G.a,{color:ie.c.Alt2,type:G.e.Span},r)};We.displayName="SubGiftNoticeLine";var ze=function(e){var t=e.event,n=a.createElement(te.a,{contentID:t.user.id,login:t.user.username,sourceType:A.b.chat_message},Object(ee.a)(t.user.username,t.user.displayName)),i=null;return i=Object(se.c)(t.channel)?function(e,t,n){return Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} 2019 All-Access Pass to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} 2019 All-Access Passes to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount):"custom"===t.plan?function(e,t,n,i){return 1===i?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community. It's their first Gift Sub in the channel!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community. It's their first Gift Sub in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine"):i>1?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community. They've gifted a total of {senderCount} in the channel!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community. They've gifted a total of {senderCount} in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,senderCount:i},"SubMysteryGiftNoticeLine"):Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Sub to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} Subs to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount,t.senderCount):function(e,t,n,i,a){return 1===i?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community. It's their first Gift Sub in the channel!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community. It's their first Gift Sub in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,tierNumber:a},"SubMysteryGiftNoticeLine"):i>1?Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community. They've gifted a total of {senderCount} in the channel!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community. They've gifted a total of {senderCount} in the channel!}}",{channel:t,gifterButton:e,massGiftCount:n,senderCount:i,tierNumber:a},"SubMysteryGiftNoticeLine"):Object(s.d)("{massGiftCount, plural, one {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Sub to {channel}'s community!} other {{gifterButton} is gifting {massGiftCount} Tier {tierNumber} Subs to {channel}'s community!}}",{channel:t,gifterButton:e,massGiftCount:n,tierNumber:a},"SubMysteryGiftNoticeLine")}(n,t.channel,t.massGiftCount,t.senderCount,Object(le.c)(t.plan)||1),a.createElement(G.a,{color:ie.c.Alt2,type:G.e.Span},i)};ze.displayName="SubMysteryGiftNoticeLine";var Qe=function(e){var t=a.createElement(ne.a,{display:ae.d.Block},a.createElement(te.a,{contentID:e.event.user.id,login:e.event.user.username,sourceType:A.b.chat_message},a.createElement(G.a,{color:ie.c.Link},Object(ee.a)(e.event.user.username,e.event.user.displayName)))),n=null;return n=e.event.methods.prime?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> with <x:twitch-prime-link>Twitch Prime</x:twitch-prime-link>",{userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)},"x:twitch-prime-link":function(t){return Ye(e.event.channel,"subscription",t)}},"SubNoticeV2Line"):e.event.methods.plan===Fe.a.Custom?Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong>",{userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"SubNoticeV2Line"):Object(s.d)("{userLogin} <x:strong>Subscribed</x:strong> at Tier {tierNumber}",{tierNumber:Object(le.c)(e.event.methods.plan)||1,userLogin:t,"x:strong":function(e){return a.createElement(G.a,{bold:!0,type:G.e.Span},e)}},"SubNoticeV2Line"),a.createElement(B.a,{display:ae.d.Flex},a.createElement(ne.a,{color:ie.c.Alt2},a.createElement(re.a,{asset:re.b.Star})),a.createElement(B.a,{margin:{left:.5}},a.createElement(G.a,null,n)))},Ye=function(e,t,n){return a.createElement(Ae,{channel:e,reference:t,text:n})};Qe.displayName="SubNoticeV2Line";var Ke,Xe=n("+kC+"),$e=n("cr+I"),Je=Object(S.compose)(Object(E.a)(Xe,{options:function(e){return{variables:{login:e.channelLogin}}}}))(function(e){var t=e.data;if(t.loading)return null;var n=null;if(!t.error&&t.user&&t.user.subscriptionProducts&&t.user.subscriptionProducts.length>0){var i=t.user.subscriptionProducts.find(function(e){return!!e&&!!e.url});i&&(n=i.url)}if(!n)return a.createElement(B.a,null,Object(s.d)("This room is in subscribers only mode.","SubsOnlyUpsellLine"));var r=a.createElement(je.a,{targetBlank:!0,to:n+"?"+$e.stringify({ref:"subscriber_only_mode_chat"})},n);return a.createElement(B.a,null,Object(s.d)("This room is in subscribers only mode. To talk, purchase a channel subscription at {productLink}",{productLink:r},"SubsOnlyUpsellLine"))}),Ze=n("6wGa"),et=n("5zC2"),tt=n("k8pZ"),nt=n("uIkQ");!function(e){e.Timestamp="extension-message-timestamp",e.ExtensionName="extension-message-name"}(Ke||(Ke={}));var it=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onExtensionNameClick=function(e){var n=t.props.message;t.props.onExtensionNameClick(n.extension.clientID,n.extension.version,n.id,e.currentTarget.getBoundingClientRect().bottom)},t}return i.__extends(t,e),t.prototype.render=function(){if(!this.props.installedExtensions)return null;var e=this.props.message;if(!this.props.installedExtensions.some(function(t){var n=t.extension;return n.clientId===e.extension.clientID&&n.version===e.extension.version}))return null;var t=this.props.message.extension.displayBadges;return a.createElement(B.a,{padding:{x:2,y:.5}},a.createElement("div",{id:this.props.message.id,className:"room-message"},this.renderTimestamp(),a.createElement(nt.b,{badgeSets:this.props.badgeSets,badgesToRender:t}),this.renderMessageAuthor(this.props.message.extension),a.createElement("span",null,": "),this.renderMessageBody()))},t.prototype.renderTimestamp=function(){return this.props.showTimestamps?a.createElement("span",{key:"timestamp",className:"room-message__timestamp","data-test-selector":Ke.Timestamp},Object(L.a)(new Date(this.props.message.sentAt))):null},t.prototype.renderMessageBody=function(){var e=Object(g.f)(this.props.message);return Object(L.f)(e,{forceClipsNetworkRequest:!0})},t.prototype.renderMessageAuthor=function(e){return a.createElement("button",{onClick:this.onExtensionNameClick,"data-test-selector":Ke.ExtensionName},a.createElement("span",{key:e.clientID+"-"+e.version+"-messageauthor"},a.createElement("span",{key:"username-display",style:{color:e.chatColor}},a.createElement(G.a,{bold:!0},e.displayName))))},t}(a.Component);var at,rt=Object(S.compose)(Object(r.connect)(function(e,t){return{installedExtensions:t.channelID?Object(tt.a)(e,t.channelID):null}}),Object(F.b)(function(e){return{onExtensionNameClick:e.onShowExtensionMessageCard}}),Object(et.c)({name:"extensionsForChannel",skip:function(e){return!e.channelID||!!e.installedExtensions},options:function(e){return{variables:{channelID:e.channelID||""}}}}))(it),ot="https://www.twitch.tv/settings/connections";!function(e){e.Kickback="msg_blizzard",e.Enabled="blizzard_connect_on",e.Disabled="blizzard_connect_off",e.AlreadyEnabled="already_blizzard_mode_on",e.AlreadyDisabled="already_blizzard_mode_off"}(at||(at={}));var st=function(e){var t=null;switch(e.type){case at.Kickback:var n=a.createElement(je.a,{targetBlank:!0,to:ot},ot);t=Object(s.d)("You must connect your Blizzard account to send messages in this room. You can connect your Blizzard account in your Twitch settings at {settingsLink}",{settingsLink:n},"BlizzardConnectModeNoticeLine");break;case at.Enabled:t=Object(s.d)("This room now requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case at.Disabled:t=Object(s.d)("This room no longer requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case at.AlreadyEnabled:t=Object(s.d)("This room already requires a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;case at.AlreadyDisabled:t=Object(s.d)("This room does not require a Blizzard account connection to chat.","BlizzardConnectModeNoticeLine");break;default:return null}return a.createElement(B.a,null,t)};st.displayName="BlizzardConnectNoticeLine";var lt,ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.targetedModerationActionEvent,t=null;switch(e.targetedModerationActionType){case c.TargetedModerationActions.DeleteNotification:var n=e.messageBody||"";t=a.createElement(Te.a,{messageBody:n,targetIsCurrentUser:!0})}return t?a.createElement(B.a,{className:"chat-line__status"},a.createElement(G.a,{type:G.e.Span},t)):null},t}(a.Component),dt=(n("NWfm"),"timeout_success"),ut="untimeout_success",mt="ban_success",pt="unban_success",ht="delete_message_success",gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPrimeToPaidEnabled=Object(le.d)(le.a.Prime2Paid),t}return i.__extends(t,e),t.prototype.shouldComponentUpdate=function(e){if(e.forceUpdateMessage)return!0;if(e.isCurrentUserModerator!==this.props.isCurrentUserModerator)return!0;if(e.showModerationIcons!==this.props.showModerationIcons)return!0;if(e.showTimestamps!==this.props.showTimestamps)return!0;if(e.useHighContrastColors!==this.props.useHighContrastColors)return!0;if(e.theme!==this.props.theme)return!0;switch(e.message.type){case h.b.Message:if(e.message.deleted)return!0;break;case h.b.Resubscription:case h.b.Ritual:if(e.message.message&&e.message.message.deleted)return!0;break;case h.b.AutoMod:if(e.message.autoModType===h.a.MessageRejectedPrompt&&(e.showAutoModActions!==this.props.showAutoModActions||e.message.rejectedMessage.deleted))return!0;break;case h.b.Hosting:case h.b.Unhost:case h.b.SlowMode:case h.b.SubscriberOnlyMode:case h.b.FollowerOnlyMode:case h.b.EmoteOnlyMode:case h.b.R9KMode:case h.b.Clear:case h.b.Unraid:case h.b.Notice:case h.b.ModerationAction:if(e.showModerationActions!==this.props.showModerationActions)return!0;break;case h.b.Moderation:if(e.showModerationActions!==this.props.showModerationActions||e.deletedMessageDisplay!==this.props.deletedMessageDisplay)return!0}return!1},t.prototype.render=function(){var e=this.props.message,t=null;if(this.props.isCurrentUserModerator){if(this.props.showModerationActions)switch(e.type){case h.b.Hosting:case h.b.Unhost:case h.b.SlowMode:case h.b.SubscriberOnlyMode:case h.b.FollowerOnlyMode:case h.b.EmoteOnlyMode:case h.b.R9KMode:case h.b.Clear:case h.b.Unraid:return null}if(this.props.showModerationIcons&&this.props.channelID)switch(e.type){case h.b.Subscription:case h.b.SubGift:case h.b.SubMysteryGift:case h.b.Resubscription:case h.b.GiftPaidUpgrade:case h.b.AnonGiftPaidUpgrade:case h.b.PrimePaidUpgrade:t=a.createElement(Ze.a,{channelID:this.props.channelID,renderNewVersion:!0,senderLogin:e.user.username,targetUserID:e.user.userID})}}switch(e.type){case h.b.AutoMod:return e.autoModType!==h.a.MessageRejectedPrompt||this.props.isCurrentUserModerator&&this.props.showAutoModActions?a.createElement(Z,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,message:e,badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,isCurrentUserModerator:this.props.isCurrentUserModerator,showModerationIcons:this.props.showModerationIcons,currentUserLogin:this.props.currentUserLogin,confirmModerationAction:this.props.confirmModerationAction}):null;case h.b.ModerationAction:return this.props.isCurrentUserModerator&&this.props.showModerationActions?a.createElement(Le,{moderationActionEvent:e,currentUserLogin:this.props.currentUserLogin}):e.level===Me.a.User&&e.targetUserLogin&&e.targetUserLogin===this.props.currentUserLogin?a.createElement(Le,{moderationActionEvent:e,currentUserLogin:this.props.currentUserLogin}):null;case h.b.TargetedModerationAction:return this.props.isCurrentUserModerator?null:a.createElement(ct,{targetedModerationActionEvent:e});case h.b.Connected:return a.createElement(B.a,{className:"chat-line__status","data-a-target":"chat-welcome-message"},a.createElement(G.a,{type:G.e.Span},Object(s.d)("Welcome to the chat room!","ChatLine")));case h.b.Disconnected:return e.reason?a.createElement(B.a,{className:"chat-line__status"},a.createElement(G.a,{type:G.e.Span},Object(s.d)("You have been disconnected from chat for the following reason: {reason}",{reason:e.reason},"ChatLine"))):a.createElement(B.a,{className:"chat-line__status"},a.createElement(G.a,{type:G.e.Span},Object(s.d)("Sorry, we were unable to connect to chat. Attempting to reconnect...","ChatLine")));case h.b.Hosted:return a.createElement(B.a,{className:"chat-line__status"},a.createElement(G.a,{type:G.e.Span},Object(L.e)(e)));case h.b.Hosting:return a.createElement(B.a,{className:"chat-line__status"},a.createElement(G.a,{type:G.e.Span},Object(s.d)("Now hosting {channel}",{channel:e.hostedChannel},"ChatLine")));case h.b.Unhost:return a.createElement(B.a,{className:"chat-line__status"},a.createElement(G.a,{type:G.e.Span},Object(s.d)("No longer hosting.","ChatLine")));case h.b.Message:return this.props.onRenderReportChatSent&&e.user.userLogin===this.props.currentUserLogin&&this.props.onRenderReportChatSent(),a.createElement(T.a,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,badgeSets:this.props.badgeSets,message:e,isDeleted:e.deleted,isHidden:e.hidden,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,confirmModerationAction:this.props.confirmModerationAction,theme:this.props.theme,deletedCount:e.deletedCount});case h.b.FirstCheerMessage:return a.createElement(ge.a,null,a.createElement(pe,{event:e}),a.createElement(B.a,null,a.createElement(T.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay})));case h.b.BitsBadgeTierMessage:var n=void 0;return e.message.messageParts&&e.message.messageParts.length>0&&(n=a.createElement(B.a,{padding:{top:.5}},a.createElement(T.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay}))),a.createElement(ge.a,null,a.createElement(me,{event:e,badgeSets:this.props.badgeSets}),n);case h.b.Moderation:return this.props.isCurrentUserModerator&&!this.props.showModerationActions?this.props.deletedMessageDisplay===C.O.BRIEF?null:a.createElement(B.a,{className:"chat-line__moderation"},Object(L.g)(e)):null;case h.b.Subscription:return a.createElement(ge.a,null,a.createElement(B.a,{display:ae.d.Flex,justifyContent:ae.h.Between},a.createElement(B.a,{alignItems:ae.b.Start},a.createElement(Qe,{event:e})),a.createElement(B.a,{alignItems:ae.b.End},t)));case h.b.SubGift:if("274598607"===e.user.userID){var i={type:h.b.AnonSubGift,id:e.id,channel:e.channel,methods:e.methods,recipientDisplayName:e.recipientDisplayName,recipientID:e.recipientID,recipientLogin:e.recipientLogin};return a.createElement(ge.a,null,a.createElement(ce,{event:i}))}return a.createElement(ge.a,null,t,a.createElement(We,{event:e}));case h.b.AnonSubGift:return a.createElement(ge.a,null,a.createElement(ce,{event:e}));case h.b.SubMysteryGift:if("274598607"===e.user.userID){i={type:h.b.AnonSubMysteryGift,id:e.id,channel:e.channel,plan:e.plan,massGiftCount:e.massGiftCount};return a.createElement(ge.a,null,a.createElement(de,{event:i}))}return a.createElement(ge.a,null,t,a.createElement(ze,{event:e}));case h.b.AnonSubMysteryGift:return a.createElement(ge.a,null,a.createElement(de,{event:e}));case h.b.RewardGift:return a.createElement(Ge.a,{event:e});case h.b.BitsCharity:return a.createElement(B.a,{className:"chat-line__bits-charity",padding:{right:2,y:.5}},Object(L.b)(e));case h.b.Resubscription:var r=null;return e.message&&(r=a.createElement(T.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay})),a.createElement(ge.a,null,a.createElement(B.a,{display:ae.d.Flex,justifyContent:ae.h.Between},a.createElement(Ve,{event:e}),!r&&a.createElement(B.a,{alignItems:ae.b.End},t)),r&&a.createElement(B.a,{margin:{top:.5}},r));case h.b.GiftPaidUpgrade:return a.createElement(ge.a,null,t,a.createElement(he,{event:e}));case h.b.AnonGiftPaidUpgrade:return a.createElement(ge.a,null,t,a.createElement(oe,{event:e}));case h.b.PrimePaidUpgrade:return a.createElement(a.Fragment,null,this.isPrimeToPaidEnabled&&a.createElement(ge.a,null,a.createElement(B.a,{display:ae.d.Flex,justifyContent:ae.h.Between},a.createElement(B.a,{alignItems:ae.b.Start},a.createElement(Pe,{event:e})),a.createElement(B.a,{alignItems:ae.b.End},t))));case h.b.RoomMods:return a.createElement(B.a,{className:"chat-line__status"},Object(L.i)(e.moderatorLogins));case h.b.SlowMode:return a.createElement(B.a,{className:"chat-line__status"},Object(L.j)(e));case h.b.SubscriberOnlyMode:return a.createElement(B.a,{className:"chat-line__status"},Object(L.k)(e));case h.b.FollowerOnlyMode:return a.createElement(B.a,{className:"chat-line__status"},Object(L.d)(e));case h.b.EmoteOnlyMode:return a.createElement(B.a,{className:"chat-line__status"},Object(L.c)(e));case h.b.R9KMode:return a.createElement(B.a,{className:"chat-line__status"},Object(L.h)(e));case h.b.Clear:return a.createElement(B.a,{className:"chat-line__status"},Object(s.d)("Chat was cleared by a moderator","ChatLine"));case h.b.Notice:if(function(e){return e.msgid in Ue()}(e))return a.createElement(B.a,{className:"chat-line__status"},a.createElement(Be,{message:e}));switch(e.msgid){case"msg_subsonly":return a.createElement(B.a,{className:"chat-line__status"},a.createElement(Je,{channelLogin:this.props.channelLogin}));case at.Kickback:case at.Enabled:case at.Disabled:case at.AlreadyEnabled:case at.AlreadyDisabled:return a.createElement(B.a,{className:"chat-line__status"},a.createElement(st,{type:e.msgid}))}if(this.props.isCurrentUserModerator)switch(e.msgid){case ht:case dt:case mt:return null;case ut:case pt:if(this.props.showModerationActions)return null}return a.createElement(B.a,{className:"chat-line__status"},e.message);case h.b.Info:return a.createElement(B.a,{className:"chat-line__status"},e.message);case h.b.InlinePrivateCallout:return this.props.channelLogin&&this.props.currentUserLogin?a.createElement(Oe,{event:e,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentUserLogin:this.props.currentUserLogin,currentUserID:this.props.currentUserID,messageIndex:this.props.messageIndex}):null;case h.b.Raid:return a.createElement(ke,{message:e});case h.b.Unraid:return a.createElement(ge.a,null,a.createElement(G.a,{color:ie.c.Alt2},Object(s.d)("The raid has been cancelled.","RaidCancelMessage")));case h.b.Ritual:return a.createElement(ge.a,null,a.createElement(qe,{event:e}),a.createElement(T.a,{badgeSets:this.props.badgeSets,confirmModerationAction:this.props.confirmModerationAction,channelID:this.props.channelID,channelLogin:this.props.channelLogin,className:"chat-line--inline",currentUserDisplayName:this.props.currentUserDisplayName,currentUserLogin:this.props.currentUserLogin,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isDeleted:e.message.deleted,isHidden:e.message.hidden,message:e.message,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,useHighContrastColors:!!this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay}));case h.b.ExtensionMessage:return a.createElement(rt,{badgeSets:this.props.badgeSets,channelID:this.props.channelID,currentUserLogin:this.props.currentUserLogin,message:e,showTimestamps:this.props.showTimestamps});default:return null}},t}(a.Component),ft=n("GnwI"),vt=(n("HjUq"),["scroll","wheel","mousewheel","DOMMouseScroll","keyup","mousedown"]),bt=10,kt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isAutoScrolling:!0},t.shouldUpdateMessages=!1,t.saveScrollRef=function(e){return t.scroll=e},t.handleScrollEvent=function(e){t.scroll&&t.scroll.scrollContent&&(e.which>0||"mousedown"===e.type||"mousewheel"===e.type||"wheel"===e.type)&&(t.scroll.scrollContent.scrollHeight-t.scroll.scrollContent.scrollTop-t.scroll.scrollContent.offsetHeight<=bt?t.setState({isAutoScrolling:!0}):t.setState({isAutoScrolling:!1}))},t.handleResize=function(){t.state.isAutoScrolling&&t.scrollToBottom()},t.handleClickMoreMessages=function(){t.setState({isAutoScrolling:!0},t.scrollToBottom)},t.scrollToBottom=function(){t.scroll&&t.scroll.scrollContent&&(t.scroll.scrollContent.scrollTop=t.scroll.scrollContent.scrollHeight)},t.reportChatRenderSent=function(){t.props.chatRenderSentEvent&&t.props.latencyTracking.reportCustomEvent(t.props.chatRenderSentEvent)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;vt.forEach(function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.addEventListener(t,e.handleScrollEvent)})},t.prototype.componentWillUnmount=function(){var e=this;vt.forEach(function(t){e.scroll&&e.scroll.scrollContent&&e.scroll.scrollContent.removeEventListener(t,e.handleScrollEvent)})},t.prototype.componentWillReceiveProps=function(e){0===this.props.badgeSets.count&&e.badgeSets.count>0&&(this.shouldUpdateMessages=!0)},t.prototype.componentDidUpdate=function(e){this.shouldUpdateMessages=!1,this.state.isAutoScrolling&&this.props.messages!==e.messages&&this.scrollToBottom()},t.prototype.render=function(){var e=this,t=this.props.messages.map(function(t,n){return a.createElement(gt,{badgeSets:e.props.badgeSets,channelID:e.props.channelID,channelLogin:e.props.channelLogin,isCurrentUserModerator:e.props.isCurrentUserModerator,isCurrentUserStaff:e.props.isCurrentUserStaff,message:t,key:t.id,showAutoModActions:e.props.showAutoModActions,showModerationActions:e.props.showModerationActions,showModerationIcons:e.props.showModerationIcons,showTimestamps:e.props.showTimestamps,useHighContrastColors:e.props.useHighContrastColors,deletedMessageDisplay:e.props.deletedMessageDisplay,currentUserDisplayName:e.props.currentUserDisplayName,currentUserLogin:e.props.currentUserLogin,currentUserID:e.props.userID,confirmModerationAction:e.props.confirmModerationAction,forceUpdateMessage:e.shouldUpdateMessages,theme:e.props.theme,onRenderReportChatSent:e.reportChatRenderSent,messageIndex:n})});return a.createElement(B.a,{refDelegate:this.props.containerRef,className:"chat-list",display:ae.d.Flex,flexDirection:ae.e.Column,flexWrap:ae.f.NoWrap,overflow:ae.i.Hidden,flexGrow:1},a.createElement(b.a,{onResize:this.handleResize}),a.createElement(ae.g,{flexGrow:1},a.createElement(k.b,{className:"chat-list__lines",scrollRef:this.saveScrollRef,"data-a-target":"chat-scroller"},a.createElement(ae.g,{flexGrow:1,fullHeight:!0,padding:{bottom:1}},a.createElement("div",{role:"log"},t)))),a.createElement(B.a,{className:"chat-list__more-messages-placeholder",position:ae.j.Relative,margin:{x:2}},this.moreMessages()))},t.prototype.moreMessages=function(){return this.state.isAutoScrolling?null:a.createElement(ae.g,{display:ae.d.Flex,justifyContent:ae.h.Center,alignItems:ae.b.Center,position:ae.j.Absolute,padding:.5,attachBottom:!0,fullWidth:!0},a.createElement(ne.a,{className:"chat-list__more-messages",borderRadius:ie.b.Medium},a.createElement("div",{onClick:this.handleClickMoreMessages},Object(s.d)("More messages below.","ChatList"))))},t}(a.Component),Ct=Object(ft.withLatencyTracking)("ChatListPresentation",{autoReportInteractive:!0})(kt),yt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={messages:[]},t.onBufferUpdate=function(){t.syncBufferHandle||(t.syncBufferHandle=setTimeout(t.syncBufferedMessages,0))},t.syncBufferedMessages=function(){t.props.messageBufferAPI&&t.setState({messages:t.props.messageBufferAPI.getMessages()}),t.clearBufferHandle()},t.clearBufferHandle=function(){t.syncBufferHandle&&(clearTimeout(t.syncBufferHandle),t.syncBufferHandle=0)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.messageBufferAPI&&(this.props.messageBufferAPI.addUpdateHandler(this.onBufferUpdate),this.setState({messages:this.props.messageBufferAPI.getMessages()}))},t.prototype.componentWillReceiveProps=function(e){var t,n,i,a=e.pubsub.messages.chatRichEmbedInfo,r=e.pubsub.messages.extensionMessage;a&&this.props.pubsub.messages.chatRichEmbedInfo!==a&&s.q.apollo.client.writeQuery({query:u,variables:{slug:a.data.twitch_metadata.clip_metadata.slug},data:(t=a,n=t.data.twitch_metadata.clip_metadata,{clip:n.id?{__typename:"Clip",slug:n.slug,id:n.id,url:t.data.request_url,title:t.data.title,thumbnailURL:t.data.thumbnail_url,curator:n.curator_id?{displayName:t.data.author_name,id:n.curator_id,__typename:"User"}:null,broadcaster:n.channel_display_name?{displayName:n.channel_display_name,id:n.broadcaster_id,__typename:"User"}:null}:null})}),this.props.messageBufferAPI!==e.messageBufferAPI&&(this.props.messageBufferAPI&&this.props.messageBufferAPI.removeUpdateHandler(this.onBufferUpdate),e.messageBufferAPI&&(e.messageBufferAPI.addUpdateHandler(this.onBufferUpdate),this.setState({messages:e.messageBufferAPI.getMessages()}))),r&&this.props.pubsub.messages.extensionMessage!==r&&this.props.onPushMessage((i=r.data,{type:h.b.ExtensionMessage,id:i.id,sentAt:i.sent_at,extension:{clientID:i.sender.extension_client_id,version:i.sender.extension_version,displayName:i.sender.display_name,displayBadges:Object(g.b)(i.sender.badges),chatColor:i.sender.chat_color},content:{text:i.content.text,fragments:Object(g.c)(i.content.fragments)}}))},t.prototype.componentWillUnmount=function(){this.props.messageBufferAPI&&this.props.messageBufferAPI.removeUpdateHandler(this.onBufferUpdate),this.clearBufferHandle()},t.prototype.render=function(){return a.createElement(Ct,{channelID:this.props.channelID,badgeSets:this.props.badgeSets,currentUserDisplayName:this.props.currentUserDisplayName,channelLogin:this.props.channelLogin,onPushMessage:this.props.onPushMessage,isCurrentUserModerator:this.props.isCurrentUserModerator,isCurrentUserStaff:this.props.isCurrentUserStaff,isEmbedded:this.props.isEmbedded,messages:this.state.messages,showAutoModActions:this.props.showAutoModActions,showModerationActions:this.props.showModerationActions,showModerationIcons:this.props.showModerationIcons,showTimestamps:this.props.showTimestamps,theme:this.props.theme,useHighContrastColors:this.props.useHighContrastColors,deletedMessageDisplay:this.props.deletedMessageDisplay,currentUserLogin:this.props.currentUserLogin,userID:this.props.userID,containerRef:this.props.containerRef,chatRenderSentEvent:this.props.chatRenderSentEvent,confirmModerationAction:this.props.confirmModerationAction})},t}(a.Component);var St=Object(o.compose)(Object(r.connect)(function(e){return{chatRenderSentEvent:Object(v.b)(e),showAutoModActions:e.chat.showAutoModActions,showModerationActions:e.chat.showModerationActions,showModerationIcons:e.chat.showModIcons,showTimestamps:e.chat.showTimestamps}}),Object(l.a)([{skip:function(e){return!e.channelID},topic:function(e){return e.channelID?Object(d.D)(e.channelID):""},mapMessageTypesToProps:(lt={},lt[c.PubsubMessageType.StreamChatRoomChatRichEmbed]="chatRichEmbedInfo",lt[c.PubsubMessageType.StreamChatRoomExtensionMessage]="extensionMessage",lt)}]),f.a,Object(p.b)(function(e){return{useHighContrastColors:e.value}}),Object(m.c)(function(e){return{deletedMessageDisplay:e.value}}))(yt);n.d(t,!1,function(){return yt}),n.d(t,"a",function(){return St})},r2Xj:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DarkMode:"darkMode",FollowerDuration:"followerDuration",FollowerMode:"followerMode",HideChat:"hideChat",ShowMessageFlags:"showMessageFlags",ShowAutoModActions:"showAutoModActions",ShowModActions:"showModerationActions",ShowModIcons:"showModIcons",ShowTimestamps:"showTimestamps",UseHighContrastColors:"useHighContrastColors",SlowMode:"slowMode",DeletedMessageDisplaySetting:"deletedMessageDisplaySetting"}},r62z:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return u});var i=n("+GjP"),a="https://www.facebook.com/sharer/sharer.php",r="https://www.twitter.com/share",o="https://www.reddit.com/submit",s="https://vk.com/share.php";function l(e){return Object(i.e)(a,{u:e})}function c(e,t){return Object(i.e)(r,{url:e,text:t})}function d(e,t){return Object(i.e)(o,{url:e,title:t})}function u(e){return Object(i.e)(s,{url:e})}},r7KY:function(e,t,n){"use strict";var i=n("q1tI"),a=n("sUnt"),r=(n("xDdc"),function(e){return i.createElement(a.a,{className:"user-notice-line",margin:{y:.5},padding:{right:2,y:.5}},e.children)});r.displayName="UserNoticeLine",n.d(t,"a",function(){return r})},rVcM:function(e,t,n){},rYEI:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i,a=n("/7QA");function r(e){switch(e){case 0:return Object(a.d)("Base","LoyaltyBadgesPageComponent");case 3:return Object(a.d)("3-Month","LoyaltyBadgesPageComponent");case 6:return Object(a.d)("6-Month","LoyaltyBadgesPageComponent");case 9:return Object(a.d)("9-Month","LoyaltyBadgesPageComponent");case 12:return Object(a.d)("1-Year","LoyaltyBadgesPageComponent");case 18:return Object(a.d)("1.5-Year","LoyaltyBadgesPageComponent");case 24:return Object(a.d)("2-Year","LoyaltyBadgesPageComponent");case 30:return Object(a.d)("2.5-Year","LoyaltyBadgesPageComponent");case 36:return Object(a.d)("3-Year","LoyaltyBadgesPageComponent");case 42:return Object(a.d)("3.5-Year","LoyaltyBadgesPageComponent");case 48:return Object(a.d)("4-Year","LoyaltyBadgesPageComponent");case 54:return Object(a.d)("4.5-Year","LoyaltyBadgesPageComponent");case 60:return Object(a.d)("5-Year","LoyaltyBadgesPageComponent");case 66:return Object(a.d)("5.5-Year","LoyaltyBadgesPageComponent");case 72:return Object(a.d)("6-Year","LoyaltyBadgesPageComponent");case 78:return Object(a.d)("6.5-Year","LoyaltyBadgesPageComponent");case 84:return Object(a.d)("7-Year","LoyaltyBadgesPageComponent");case 90:return Object(a.d)("7.5-Year","LoyaltyBadgesPageComponent");case 96:return Object(a.d)("8-Year","LoyaltyBadgesPageComponent");default:return""}}!function(e){e.Base="Base",e.Month3="3-Month",e.Month6="6-Month",e.Month9="9-Month",e.Year1="1-Year",e.Year1Half="1.5-Year",e.Year2="2-Year",e.Year2Half="2.5-Year",e.Year3="3-Year",e.Year3Half="3.5-Year",e.Year4="4-Year",e.Year4Half="4.5-Year",e.Year5="5-Year",e.Year5Half="5.5-Year",e.Year6="6-Year",e.Year6Half="6.5-Year",e.Year7="7-Year",e.Year7Half="7.5-Year",e.Year8="8-Year"}(i||(i={}));var o=[{availableToAffiliate:!0,name:i.Base,requiredTenureMonths:0},{availableToAffiliate:!0,name:i.Month3,requiredTenureMonths:3},{availableToAffiliate:!0,name:i.Month6,requiredTenureMonths:6},{availableToAffiliate:!0,name:i.Month9,requiredTenureMonths:9},{availableToAffiliate:!0,name:i.Year1,requiredTenureMonths:12},{availableToAffiliate:!1,name:i.Year1Half,requiredTenureMonths:18},{availableToAffiliate:!1,name:i.Year2,requiredTenureMonths:24},{availableToAffiliate:!1,name:i.Year2Half,requiredTenureMonths:30},{availableToAffiliate:!1,name:i.Year3,requiredTenureMonths:36},{availableToAffiliate:!1,name:i.Year3Half,requiredTenureMonths:42},{availableToAffiliate:!1,name:i.Year4,requiredTenureMonths:48},{availableToAffiliate:!1,name:i.Year4Half,requiredTenureMonths:54},{availableToAffiliate:!1,name:i.Year5,requiredTenureMonths:60},{availableToAffiliate:!1,name:i.Year5Half,requiredTenureMonths:66},{availableToAffiliate:!1,name:i.Year6,requiredTenureMonths:72},{availableToAffiliate:!1,name:i.Year6Half,requiredTenureMonths:78},{availableToAffiliate:!1,name:i.Year7,requiredTenureMonths:84},{availableToAffiliate:!1,name:i.Year7Half,requiredTenureMonths:90},{availableToAffiliate:!1,name:i.Year8,requiredTenureMonths:96}]},rdDs:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/7QA"),s=n("ZDlU"),l=n("8/mp"),c=n("bdHe"),d=n("jytb"),u=n("+80q"),m=n("hnjF"),p=n("sUnt"),h=n("X2PJ"),g=n("ygYM"),f=n("uOxs");!function(e){e.DESC="DESC",e.ASC="ASC"}(i||(i={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderUserCards=function(e){return e.map(function(e){return e&&e.node&&e.node.id?r.createElement(p.a,{key:e.node.id,margin:{bottom:2}},r.createElement(d.b,{requestContext:t.props.requestContext,id:e.node.id,balloonDirection:g.b.Right,showButtonsOnHover:!0,userData:{user:e.node}})):null})},t}return a.__extends(t,e),t.prototype.render=function(){return this.props.loading&&!this.props.followEdge?r.createElement(c.a,null):this.props.error?r.createElement(s.a,{message:Object(o.d)("Error loading Follow List","ChannelFollowListing")}):this.props.loading||this.props.userExist?r.createElement(p.a,{fullWidth:!0,padding:{x:3,y:2}},this.renderListOfCards(),r.createElement(l.a,{loadMore:this.props.loadMore,enabled:this.props.hasNextPage&&!this.props.loading,pixelThreshold:300})):r.createElement(s.a,{message:Object(o.d)("User does not exist","ChannelFollowListing")})},t.prototype.renderListOfCards=function(){var e=(this.props.followEdge||[]).filter(function(e){return e&&e.node&&e.node.id});return e&&e.length?r.createElement(f.a,{placeholderItems:e.length,center:!0,gutterSize:f.c.Small,childWidth:f.b.Large},this.renderUserCards(e)):r.createElement(p.a,{"data-test-selector":"no-follow-users",margin:{top:5},display:m.d.Flex,flexDirection:m.e.Row,justifyContent:m.h.Center},r.createElement(u.a,{type:u.e.H4,color:h.c.Alt2,italic:!0},Object(o.d)("No Users Found","ChannelFollowListing")))},t}(r.Component);n.d(t,"b",function(){return i}),n.d(t,!1,function(){return"no-follow-users"}),n.d(t,"a",function(){return v})},rhXE:function(e,t,n){},ru7j:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BlockedUsers"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:61}};n.loc.source={body:"query BlockedUsers {\ncurrentUser {\nid\nblockedUsers {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},rwoo:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.ChannelNotLive="channel_not_live",e.UserBanned="user_banned",e.UserTimedOut="user_timed_out",e.ChannelBanned="channel_banned",e.ChannelNotClippable="channel_not_clippable",e.NotLoggedIn="not_logged_in",e.VideoNotAvailable="video_not_available",e.SubOnlyVod="video_subonly",e.ClipMissing="clip_missing",e.ClipMaintenance="maintenance",e.Default="500"}(i||(i={}))},ry0r:function(e,t,n){"use strict";var i,a=n("/MKj"),r=n("kRBY"),o=n("mrSG"),s=n("q1tI"),l=n("oJmH"),c=n("/7QA"),d=n("yR8l"),u=n("eDVu"),m=n("0Log"),p=n("geRD"),h=n("/aPz"),g=n("DMoW"),f=n("TSYQ"),v=n("4rCz"),b=n("hnjF"),k=n("7uM4"),C=n("7d/q"),y=n("sUnt"),S=n("Ws8v"),E=n("X2PJ");n("OCTF");!function(e){e.CloseButton="bits-card-wrapper-close-button-selector",e.OuterWrapper="bits-card-wrapper-outer-selector",e.InnerWrapper="bits-card-wrapper-inner-selector"}(i||(i={}));var N,w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.onUserClose,n=e.children,a=e.className,r=e.dataATarget,o=e.closeDataATarget,l=t?s.createElement(y.a,{position:b.j.Absolute,padding:{top:.5,right:.5},attachRight:!0,attachTop:!0,zIndex:b.n.Above},s.createElement(C.a,{ariaLabel:Object(v.d)("close bits card","BitsCard"),"data-a-target":o,"data-test-selector":i.CloseButton,onClick:t,icon:k.b.Close,type:C.c.Secondary,size:C.b.Small})):null;return s.createElement(S.a,{"data-test-selector":i.OuterWrapper,className:f("bits-card-wrapper",a),"data-a-target":r,display:b.d.Flex,flexDirection:b.e.Column,position:b.j.Absolute,background:E.a.Base,elevation:3,zIndex:b.n.Above,fullWidth:!0,border:!0},l,s.createElement(y.a,{"data-test-selector":i.InnerWrapper,display:b.d.Flex,flexDirection:b.e.Column,alignItems:b.b.Center,justifyContent:b.h.Center,flexGrow:1,fullWidth:!0},n))},t.defaultProps={dataATarget:"bits-card",closeDataATarget:"bits-card-close-button"},t}(s.PureComponent),_=n("zrSb"),D=n("+80q"),O=function(){return s.createElement(y.a,{textAlign:b.k.Center,padding:1},s.createElement(D.a,{italic:!0},Object(c.d)("Have no fear, your Bits inventory is safe! The ability to Cheer will return shortly.","BitsCard")))},I=n("VeT4"),T=n("/0dD"),M=n("XDQu");n("ZfCj");(N||(N={})).Placeholder="placeholder";var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave&&t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick&&t.props.onClick(n)},t}return o.__extends(t,e),t.prototype.render=function(){return this.props.cheermote&&this.props.cheermote.key?s.createElement("li",{className:f("cheermote-button",this.props.className)},s.createElement("button",{className:"cheermote-button__button","data-key":this.props.cheermote.key,onMouseEnter:this.handleCheermoteHover,onMouseLeave:this.handleCheermoteUnhover,onClick:this.handleCheermoteClick,"data-a-target":"cheermote-"+this.props.cheermote.key.replace(":","")},s.createElement("img",{alt:this.props.cheermote.key,src:this.props.darkModeEnabled?this.props.cheermote.imgSrcDark:this.props.cheermote.imgSrc})),this.props.children):s.createElement("li",{"data-test-selector":N.Placeholder},s.createElement("button",{className:"cheermote-button__button",disabled:!0},s.createElement("div",{className:"cheermote-button__placeholder"})))},t}(s.PureComponent);var F,x=Object(a.connect)(function(e){return{darkModeEnabled:Object(M.a)(e)===T.a.Dark}})(L),j=n("5zXJ"),A=n("dEDE");(F||(F={})).MinBitsAmountDisclaimer="min-bits-amount-disclaimer";var P,R=["cheer","shamrock","frankerz","party"],U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeCheermoteButtons=function(e){var n=t.props.bitsConfig.indexedActions[e];return t.makeCheermoteButton(n)},t.makeCheermoteButton=function(e){if(e){var n=e.indexedTiers.get(j.l);if(n){var i={key:e.prefix,imgSrc:n.indexedImages.LIGHT.static.get(2),imgSrcDark:n.indexedImages.DARK.static.get(2)};return s.createElement(x,{key:i.key,cheermote:i,onClick:t.props.onCheermoteClick})}}},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=R.map(this.makeCheermoteButtons),n=this.props.bitsConfig.orderedActions.find(function(e){return e.type===g.y.CUSTOM});return n&&(t[1]=this.makeCheermoteButton(n)),s.createElement(y.a,{className:"first-cheer-builder",display:b.d.Flex,flexDirection:b.e.Column,padding:{top:3},justifyContent:b.h.Between},s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Column,textAlign:b.k.Center},s.createElement(D.a,{bold:!0,type:D.e.H4},Object(c.d)("Support your streamer with Bits","FirstCheerPrefixSelector")),s.createElement(y.a,{padding:{x:4,top:.5},textAlign:b.k.Left},s.createElement(D.a,{type:D.e.Span},Object(c.d)("Twitch rewards streamers when you use Bits. Send {channelName} some love! First select a cheermote.",{channelName:this.props.channelName},"FirstCheerPrefixSelector"))),!this.props.canCheerInChannel&&s.createElement(y.a,{padding:{top:1}},s.createElement(D.a,{"data-test-selector":F.MinBitsAmountDisclaimer,type:D.e.Span,italic:!0},Object(c.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return s.createElement(I.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerPrefixSelector")))),s.createElement(b.g,{display:b.d.Flex,flexDirection:b.e.Row,justifyContent:b.h.Center},s.createElement("ol",null,t)),s.createElement(y.a,{padding:{x:2,bottom:.5},fullWidth:!0},s.createElement(A.a,{"data-a-target":"bits-card-back-button",type:A.d.Text,fullWidth:!0,onClick:this.props.onShowAllCheermotes},Object(c.d)("Show All Cheermotes","FirstCheerPrefixSelector"))))},t}(s.PureComponent),B=n("8/mp"),V=n("Jsra"),H=function(e){return s.createElement(y.a,{padding:{top:2,bottom:1}},s.createElement(V.a,{onClick:e.onClickHelp},Object(c.d)("How do I cheer?","Bits--CheermoteIntro")))},G=n("3CMh"),q=function(e){var t=e.headline||e.prefix+(e.tier||"");if(e.tournament&&e.tournament.teams&&e.tier<=0){var n=e.tournament.teams.find(function(t){return!!t&&t.id===e.prefix});n&&(t=n.name+" - "+e.prefix)}return s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Column,alignItems:b.b.Center,padding:1},!e.hideHeadline&&s.createElement(D.a,{type:D.e.H4,bold:!0},t),s.createElement(G.a,{prefix:e.prefix,amount:e.tier,bitsConfig:e.bitsConfig,showImage:!0,showAmount:e.tier>0}),s.createElement(H,{onClickHelp:e.onClickHelp}))},W=(n("ecb7"),function(e){var t=e.prefixes.map(function(t,n){if(t.alt&&t.cheerAmount)return s.createElement(b.g,{className:"pending-cheer-list__list-item",key:n,padding:{x:1}},s.createElement("li",null,s.createElement(G.a,{prefix:t.alt,amount:t.cheerAmount>j.o?j.o:t.cheerAmount,bitsConfig:e.bitsConfig,size:G.b.Small,showAmount:!0,showImage:!0})))});return s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Row,alignItems:b.b.End,justifyContent:b.h.Center,flexWrap:b.f.Wrap,margin:{top:1},className:"pending-cheer-list"},t)});!function(e){e.MinCheer="sponsored-campaign-minimum-cheer",e.OverBitsTotal="sponsored-campaign-over-total",e.CannotBeSponsored="sponsored-campaign-cannot-be-sponsored",e.OverUserLimit="sponsored-campaign-over-user-limit"}(P||(P={}));var z,Q,Y=function(e){var t=0;if(e.prefixes.forEach(function(n){n.alt===e.sponsoredCampaignPrefix&&n.cheerAmount&&(t+=n.cheerAmount)}),t<=0)return null;if(t<e.sponsoredCampaign.minimumBitsAmount){var n=Object(c.d)("This Cheermote has a minimum of {minBits} Bits for {brand} to add extra Bits.",{minBits:e.sponsoredCampaign.minimumBitsAmount,brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(D.a,{"data-test-selector":P.MinCheer,color:E.c.Error},n)}if(!e.sponsoredCampaign.bitsUsed||!e.sponsoredCampaign.bitsTotal||e.sponsoredBitsBonus+e.sponsoredCampaign.bitsUsed>e.sponsoredCampaign.bitsTotal){n=Object(c.d)("Not enough bits from the sponsored pool to support your cheer with the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(D.a,{"data-test-selector":P.OverBitsTotal,color:E.c.Error},n)}if(e.sponsoredCampaign.self){if(!e.sponsoredCampaign.self.canBeSponsored){n=Object(c.d)("You are not eligible to use the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(D.a,{"data-test-selector":P.CannotBeSponsored,color:E.c.Error},n)}if(e.sponsoredCampaign.self.bitsUsed+e.sponsoredBitsBonus>e.sponsoredCampaign.userLimit){n=Object(c.d)("You have reached the user limit for use of the {brand} Cheermote.",{brand:e.sponsoredCampaign.brandName},"Bits--PendingCheer");return s.createElement(D.a,{"data-test-selector":P.OverUserLimit,color:E.c.Error},n)}}return null},K=n("XmgI");!function(e){e.DisplayOnlyCheermote="display-only-cheermote-selector",e.ZeroBalance="zero-balance-selector",e.PurchaseMore="purchase-more-selector",e.LargestCheermote="largest-cheermote-selector",e.MinimumCheerSelector="minimum-cheer-selector",e.MinimumCheermoteSelector="minimum-cheermote-selector",e.MessageLengthExceeded="message-length-exceeded-selector",e.UserBanned="user-banned-selector",e.UserIneligible="user-ineligible-selector",e.UserSuspended="user-suspended-selector",e.ChannelIneligible="channel-ineligible-selector",e.ZalgoMessage="zalgo-message-selector",e.ChannelBlockedTerms="channel-blocked-terms-selector",e.InvalidEventID="invalid-event-id-selector",e.RequestThrottled="request-throttled-selector",e.Unknown="unknown-selector"}(Q||(Q={}));var X=((z={})[g.Xa.USER_BANNED]=Q.UserBanned,z[g.Xa.USER_INELIGIBLE]=Q.UserIneligible,z[g.Xa.USER_SUSPENDED]=Q.UserSuspended,z[g.Xa.CHANNEL_INELIGIBLE]=Q.ChannelIneligible,z[g.Xa.ZALGO_MESSAGE]=Q.ZalgoMessage,z[g.Xa.CHANNEL_BLOCKED_TERMS]=Q.ChannelBlockedTerms,z[g.Xa.INVALID_EVENT_ID]=Q.InvalidEventID,z[g.Xa.REQUEST_THROTTLED]=Q.RequestThrottled,z[g.Xa.UNKNOWN]=Q.Unknown,z),$=function(e){if(e.smallestCheermote<e.minPerEmote||e.bitsSendHasError&&e.bitsSendErrorCode===g.Xa.EMOTE_AMOUNT_BELOW_MIN_BITS){var t=Object(c.d)("This channel has set a minimum of {minPerEmote} Bits to use a Cheer emote in chat.",{minPerEmote:e.minPerEmote},"Bits--PendingCheer");return e.onValidationError(g.Xa.EMOTE_AMOUNT_BELOW_MIN_BITS),s.createElement(D.a,{"data-test-selector":Q.MinimumCheermoteSelector,color:E.c.Error,italic:!0,"data-a-target":"min-emote-bits-error"},t)}if(e.chatMessage&&e.chatMessage.length>j.n||e.bitsSendHasError&&e.bitsSendErrorCode===g.Xa.MESSAGE_LENGTH_EXCEEDED){var n=Object(c.d)("You have exceeded the maximum number of characters you can use in your cheer.","Bits--PendingCheer");return e.onValidationError(g.Xa.MESSAGE_LENGTH_EXCEEDED),s.createElement(D.a,{"data-test-selector":Q.MessageLengthExceeded,color:E.c.Error,italic:!0},n)}if(e.bitsSendHasError){var i=X[e.bitsSendErrorCode]||X[g.Xa.UNKNOWN],a=void 0;switch(e.bitsSendErrorCode){case g.Xa.ZALGO_MESSAGE:a=Object(c.d)("You have unsupported characters in your message, please remove them and try again.","Bits--PendingCheer");break;case g.Xa.USER_BANNED:case g.Xa.USER_INELIGIBLE:case g.Xa.USER_SUSPENDED:case g.Xa.CHANNEL_INELIGIBLE:a=Object(c.d)("Sorry, you are unable to send bits in this channel at this time.","Bits--PendingCheer");break;case g.Xa.CHANNEL_BLOCKED_TERMS:a=Object(c.d)("You have blocked words in your message, please remove them and try again.","Bits--PendingCheer");break;case g.Xa.INVALID_EVENT_ID:case g.Xa.REQUEST_THROTTLED:case g.Xa.UNKNOWN:default:a=Object(c.d)("Something went wrong when processing your cheer, please try again later.","Bits--PendingCheer")}return e.onValidationError(e.bitsSendErrorCode),s.createElement(D.a,{"data-test-selector":i,color:E.c.Error,italic:!0},a)}return null},J=function(e){if(e.largestCheermote>j.o||e.bitsSendHasError&&e.bitsSendErrorCode===g.Xa.TOO_LARGE_BITS_EMOTE){var t=Object(c.d)("{maximumCheerSize} is the largest Cheer emote, add another emote to Cheer louder!",{maximumCheerSize:j.o},"Bits--PendingCheer");return e.onValidationError(g.Xa.TOO_LARGE_BITS_EMOTE),s.createElement(D.a,{"data-test-selector":Q.LargestCheermote,"data-a-target":"max-cheer-bits-error"},t)}if(0===e.bitsBalance)return e.onValidationError(g.Xa.INSUFFICIENT_BALANCE),s.createElement(D.a,{"data-test-selector":Q.ZeroBalance,"data-a-target":"zero-bits-error"},Object(c.d)("Please get Bits. You have 0 Bits and cannot send a Cheer","Bits--PendingCheer"));if(e.bitsBalance&&e.amount>e.bitsBalance)return e.onValidationError(g.Xa.INSUFFICIENT_BALANCE),s.createElement(D.a,{"data-test-selector":Q.PurchaseMore,"data-a-target":"need-more-bits-error"},Object(c.d)("Please purchase {neededBits} more Bits to Cheer",{neededBits:e.amount-e.bitsBalance},"Bits--PendingCheer"));if(e.amount<e.minToCheer||e.bitsSendHasError&&e.bitsSendErrorCode===g.Xa.AMOUNT_BELOW_MIN_BITS){e.onValidationError(g.Xa.AMOUNT_BELOW_MIN_BITS);var n=Object(c.d)("Add {moreBitsAmount} more Bits to reach this channel's minimum Cheer.",{moreBitsAmount:e.minToCheer-e.amount},"Bits--PendingCheer");return s.createElement(D.a,{"data-test-selector":Q.MinimumCheerSelector,"data-a-target":"min-cheer-bits-error"},n)}if(e.amount>j.p||e.bitsSendHasError&&e.bitsSendErrorCode===g.Xa.TOO_LARGE_CHEER){e.onValidationError(g.Xa.TOO_LARGE_CHEER);var i=Object(c.d)("{maximumCheerSize} is the maximum amount of Bits you can send in one message, send multiple messages if you want to Cheer more!",{maximumCheerSize:j.p},"Bits--PendingCheer");return s.createElement(D.a,{"data-test-selector":Q.MinimumCheerSelector,"data-a-target":"max-message-bits-error"},i)}if(e.chatMessage&&Object(K.c)(e.chatMessage,e.bitsConfig)){e.onValidationError(g.Xa.INVALID_BITS_MESSAGE);var a=Object(c.d)("message contains at least one display only Cheermote.","Bits--PendingCheer");return s.createElement(D.a,{"data-test-selector":Q.DisplayOnlyCheermote,"data-a-target":"display-only-bits-error"},a)}return null},Z=(n("ECxT"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.indexedActions[this.props.chosenCheermote.toLowerCase()],n=this.props.isAnonymous&&Object(K.e)(this.props.chosenCheermote),i=t.orderedTiers.filter(function(e){return e.canCheer&&e.canShowInBitsCard||n}).map(function(e){return{imgSrc:e.indexedImages.LIGHT.static.get(2),imgSrcDark:e.indexedImages.DARK.static.get(2),key:t.prefix+":"+e.bits}}).reverse().map(function(t,n){return t&&t.key?s.createElement("li",{key:t.key,className:"cheermote-tier-selector__cheermote"},s.createElement("button",{className:"cheermote-tier-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},s.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})),s.createElement(G.a,{bitsConfig:e.props.bitsConfig,prefix:"",amount:+t.key.split(":")[1],showImage:!1,showAmount:!0,size:G.b.Small})):s.createElement("li",{key:"null-cheermote-"+n},s.createElement("button",{className:"cheermote-tier-selector__item-button",disabled:!0},s.createElement("div",{className:"cheermote-tier-selector__placeholder"})))}),a=s.createElement(y.a,{padding:{right:2},fullWidth:!0,className:"cheermote-tier-selector__back-button",visibility:this.props.isAnonymous?b.m.Hidden:b.m.Visible},s.createElement(A.a,{"data-a-target":"bits-card-back-button",type:A.d.Text,fullWidth:!0,onClick:this.props.onClose},Object(c.d)("Show All Cheermotes","CheermoteCarousel"))),r=s.createElement(b.g,{className:"cheermote-tier-selector__cheermotes",display:b.d.Flex,flexWrap:b.f.Wrap,flexDirection:b.e.Row,justifyContent:b.h.Between,alignItems:b.b.End,padding:{bottom:1}},s.createElement("ul",null,i,a));return s.createElement(y.a,{flexGrow:1,overflow:b.i.Hidden,className:"cheermote-tier-selector"},r)},t}(s.PureComponent));var ee,te=Object(a.connect)(function(e){return{darkModeEnabled:Object(M.a)(e)===T.a.Dark}})(Z),ne=n("ebRM");n("8BsE");!function(e){e.MinBitsChannelDisclaimer="min-bits-channel-disclaimer",e.BitsAmountCheering="bits-amount-cheering"}(ee||(ee={}));var ie,ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.unhoverTimeout=0,t.onClickTier=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.onHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||t.setState({hoveredTier:parseInt(n[1],10),hoveredCheermote:n[0]})},t.onHoverLeave=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:void 0,hoveredCheermote:void 0})},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=Object(ne.a)(this.props.currentCheers),n=t.total,i=t.bonus,a=t.smallestCheermote,r=t.largestCheermote,o=null;if(this.props.currentCheers&&1===this.props.currentCheers.length){var l=this.props.currentCheers[0].alt;l&&(o=s.createElement(y.a,{padding:{top:1}},s.createElement(G.a,{prefix:l,amount:n>j.o?j.o:n,bitsConfig:this.props.bitsConfig,showImage:!0,showAmount:!0})))}else this.props.currentCheers&&(o=s.createElement(y.a,{margin:{y:1}},s.createElement(B.b,{className:"first-cheer-tier-selector__scroll-container"},s.createElement(W,{prefixes:this.props.currentCheers,bitsConfig:this.props.bitsConfig}))));var d=Object(c.d)("Back","FirstCheerTierSelector"),u=!(!this.state.hoveredCheermote||!this.state.hoveredTier),m=this.props.canCheerInChannel&&this.props.currentCheers.length>0,p=null;this.props.currentCheers&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(p=s.createElement(Y,{prefixes:this.props.currentCheers,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:i}));var h=$({smallestCheermote:a,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,minPerEmote:this.props.minPerEmote,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),g=J({largestCheermote:r,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,amount:n,minToCheer:this.props.minCheerAmount,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});return h||g||this.props.onCheerInvalid(void 0),s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Column,justifyContent:b.h.Between},s.createElement(S.a,{padding:{top:3},display:b.d.Flex,flexDirection:b.e.Column,textAlign:b.k.Center,borderBottom:!0},s.createElement(y.a,{position:b.j.Absolute,attachLeft:!0,attachTop:!0,padding:{top:.5}},s.createElement(A.a,{ariaLabel:d,onClick:this.props.onBack,type:A.d.Text,icon:k.b.AngleLeft},d)),s.createElement(D.a,{type:D.e.H4,bold:!0},Object(c.d)("Pick cheermote tier","FirstCheerTierSelector")),s.createElement(y.a,{padding:{x:4,top:.5},textAlign:b.k.Left},s.createElement(D.a,null,Object(c.d)("Now, select how many Bits to use and send your message in chat.","FirstCheerTierSelector"))),u&&s.createElement(q,{hideHeadline:!0,bitsConfig:this.props.bitsConfig,prefix:this.state.hoveredCheermote,tier:this.state.hoveredTier,event:null,onClickHelp:this.props.showHelp}),!u&&s.createElement(s.Fragment,null,m&&!h&&s.createElement(s.Fragment,null,o,s.createElement(y.a,{padding:{bottom:.5}},s.createElement(D.a,{"data-test-selector":ee.BitsAmountCheering},Object(c.d)("You're cheering <x:bitsAmount></x:bitsAmount>",{"x:bitsAmount":function(){return s.createElement(I.a,{count:n,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector")))),m&&!g&&p&&s.createElement(y.a,{padding:{top:1}},p),m&&g&&s.createElement(S.a,{padding:{top:1},color:E.c.Error},g),m&&h&&s.createElement(y.a,{padding:{top:3,x:3}},h),!m&&s.createElement(y.a,{padding:{y:3}},s.createElement(D.a,{"data-test-selector":ee.MinBitsChannelDisclaimer,type:D.e.Span,italic:!0},Object(c.d)("{channelName} requires <x:bitsAmount></x:bitsAmount> to cheer in this channel",{channelName:this.props.channelName,"x:bitsAmount":function(){return s.createElement(I.a,{count:e.props.minCheerAmount,bitsConfig:e.props.bitsConfig,withImage:!1,withText:!0})}},"FirstCheerTierSelector"))))),s.createElement(te,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onClose:this.props.onClose,onClick:this.onClickTier,onHover:this.onHover,onHoverLeave:this.onHoverLeave,isAnonymous:this.props.isAnonymous}))},t}(s.PureComponent),re=(n("wtKP"),function(e){var t=void 0!==e.progress,n=s.createElement("img",{className:"cheer-badge__image",src:e.badge.image1x,alt:e.badge.title,srcSet:e.badge.image1x+" 1x, "+e.badge.image2x+" 2x, "+e.badge.image4x+" 4x"});if(!t)return n;var i=e.progress?Math.max(Math.round(18*(1-e.progress)),1):18;return s.createElement("div",{className:"cheer-badge__progress-container"},n,s.createElement("div",{className:"cheer-badge__progress-overlay",style:{width:i+"px"},"data-test-selector":"cheer-progress"}))}),oe=function(e){var t;e.selfBitsBadge&&(e.selfBitsBadge.current||e.selfBitsBadge.next)&&(t=s.createElement(y.a,{padding:{bottom:.5},visibility:e.isAnonymous?b.m.Hidden:b.m.Visible},e.selfBitsBadge.current&&s.createElement(y.a,{display:b.d.Inline,margin:{right:.5}},s.createElement(re,{badge:e.selfBitsBadge.current})),e.selfBitsBadge.next&&s.createElement(re,{badge:e.selfBitsBadge.next,progress:e.selfBitsBadge.progress}),e.selfBitsBadge.nextBits&&Object(c.d)("Next badge unlocks in {bitsToNextBadge} Bits!",{bitsToNextBadge:e.selfBitsBadge.nextBits-e.selfBitsBadge.totalBits},"Bits--BalanceFooter")));var n=Object(c.d)("{bitsGem} Log in to see your Bits balance",{bitsGem:s.createElement(I.a,{count:100,withImage:!0,bitsConfig:e.bitsConfig,themeOverride:T.a.Dark})},"Bits--BalanceFooter");return void 0!==e.balance&&null!==e.balance&&(n=Object(c.d)("You have {currentBits}",{currentBits:s.createElement(I.a,{count:e.balance,withImage:!0,withText:!0,bitsConfig:e.bitsConfig,themeOverride:T.a.Dark})},"Bits--BalanceFooter")),s.createElement(y.a,{flexGrow:1,padding:1,className:"bits-balance-footer"},t,s.createElement(y.a,{display:b.d.Flex,flexGrow:1,alignItems:b.b.Center,justifyContent:b.h.Between},s.createElement("div",null,n),(void 0===e.showBuyButton||void 0!==e.showBuyButton&&e.showBuyButton)&&s.createElement(A.a,{disabled:void 0===e.balance||void 0!==e.balance&&e.balance>j.m,onClick:e.onClickGetBits,"data-test-selector":"get-bits-button","data-a-target":"get-bits-button"},Object(c.d)("Get Bits","Bits--BalanceFooter"))))},se=n("jv9u"),le=n("wUQP"),ce=function(){return s.createElement(y.a,{display:b.d.Flex,flexGrow:1,flexDirection:b.e.Column,justifyContent:b.h.Center,alignItems:b.b.Center,padding:1},s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Row,alignItems:b.b.Center,padding:{bottom:1}},s.createElement(y.a,{display:b.d.Flex,alignItems:b.b.Center,padding:{right:.5}},s.createElement(k.a,{asset:k.b.Ghost,type:k.c.Brand})),s.createElement(D.a,{type:D.e.Span,fontSize:E.d.Size4,bold:!0},Object(c.d)("Cheering Anonymously","Bits--AnonymousIntro"))),s.createElement(D.a,null,Object(c.d)("Your name will appear in Chat as {anAnonymousCheerer} and custom messaging will be turned off.",{anAnonymousCheerer:s.createElement(b.g,{padding:{y:.5}},s.createElement(D.a,{bold:!0},j.c))},"Bits--AnonymousIntro")),s.createElement(y.a,{margin:1},s.createElement(V.a,{to:"https://help.twitch.tv/customer/portal/articles/2449458#AnonCheer",targetBlank:!0},Object(c.d)("Learn more","Bits--AnonymousIntro"))))},de=function(e){return s.createElement(y.a,{display:b.d.Flex,flexGrow:1,flexDirection:b.e.Column,justifyContent:b.h.Center,alignItems:b.b.Center,padding:1},s.createElement(y.a,{padding:{top:1}},s.createElement(D.a,{type:D.e.H4,color:E.c.Link,bold:!0},Object(c.d)("Cheer to support Direct Relief","Bits--CharityCheerIntro"))),s.createElement(D.a,null,Object(c.d)("Cheer with the Charity Cheermote or #charity and we'll donate $0.20 for every 100 Bits to Direct Relief, PLUS you'll unlock a custom charity chat badge. Available December 12 - 27.","Bits--CharityCheerIntro")),s.createElement(D.a,null,Object(c.d)("<x:link>Learn more</x:link>",{"x:link":function(e){return s.createElement(V.a,{targetBlank:!0,linkTo:"https://link.twitch.tv/blizzardofbits"},e)}},"Bits--CharityCheerIntro")),s.createElement(y.a,{padding:{top:1,bottom:1}},s.createElement("a",{href:"#",onClick:e.onClickHelp,"data-test-selector":"help-link"},Object(c.d)("How do I cheer?","Bits--CharityCheerIntro"))))},ue=n("dx/T"),me=function(e){return s.createElement(y.a,{display:b.d.Flex,flexGrow:1,flexDirection:b.e.Column,justifyContent:b.h.Center,alignItems:b.b.Center,padding:1},s.createElement(y.a,{padding:{top:2,bottom:2}},s.createElement(D.a,{type:D.e.H5,color:E.c.Link,bold:!0},Object(c.d)("Cheering Supports Your Streamer!","Bits--CheermoteIntro"))),s.createElement(D.a,null,Object(c.d)("Select a Cheermote to start your Cheer","Bits--CheermoteIntro")),s.createElement(H,{onClickHelp:e.onClickHelp}))},pe=(n("Aa/l"),function(e){var t=null;return e.minToCheer>1&&(t=s.createElement(D.a,{"data-test-selector":"min-to-cheer-selector",color:E.c.Alt2,italic:!0},Object(c.d)("This channel has a Cheer minimum of {minToCheer} Bits",{minToCheer:e.minToCheer},"Bits--CheermoteTierIntro"))),s.createElement(y.a,{display:b.d.Flex,flexGrow:1,flexDirection:b.e.Column,alignItems:b.b.Center,justifyContent:b.h.Center,padding:1,className:"cheermote-tier-intro"},s.createElement(y.a,{padding:{x:4},margin:{bottom:1}},s.createElement(D.a,{color:E.c.Alt2},Object(c.d)("Cheermotes have multiple tiers, rollover below to see each one!","Bits--CheermoteTierIntro"))),t)}),he=n("4VQm"),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return this.props.event,null},t}(s.Component),fe=n("2rlx"),ve=n("hCFK");n("H0r1");!function(e){e.DefaultPendingCheerMessage="default-pending-cheer-message-selector",e.EventReminder="event-reminder-selector",e.InlineError="inline-error",e.FullError="full-error",e.GhostIcon="ghost-icon"}(ie||(ie={}));var be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inlineError:!1,fullError:!1},t}return o.__extends(t,e),t.prototype.render=function(){var e;if(this.props.prefixes&&1===this.props.prefixes.length){var t=this.props.prefixes[0].alt;t&&(e=s.createElement(y.a,{padding:{top:2}},s.createElement(G.a,{prefix:t,amount:this.props.amount>j.o?j.o:this.props.amount,bitsConfig:this.props.bitsConfig,showImage:!0,showAmount:!0})))}else if(this.props.prefixes)e=s.createElement(y.a,{margin:{top:1}},s.createElement(he.b,{className:"pending-cheer__scroll-container"},s.createElement(W,{prefixes:this.props.prefixes,bitsConfig:this.props.bitsConfig})));else{var n=Object(c.d)("You are using a total of {totalBits} Bits to cheer in {channelName}!",{totalBits:s.createElement("strong",null,this.props.amount),channelName:this.props.channelDisplayName},"Bits--PendingCheer");e=s.createElement(y.a,{"data-test-selector":ie.DefaultPendingCheerMessage,padding:{top:2,x:5}},s.createElement(D.a,{color:E.c.Alt2,"data-a-target":"total-bits-message"},n))}var i=null;this.props.prefixes&&this.props.sponsoredCampaign&&this.props.sponsoredCampaignPrefix&&(i=s.createElement(Y,{prefixes:this.props.prefixes,sponsoredCampaign:this.props.sponsoredCampaign,sponsoredCampaignPrefix:this.props.sponsoredCampaignPrefix,sponsoredBitsBonus:this.props.sponsoredBitsBonus}));var a=$({minPerEmote:this.props.minPerEmote,smallestCheermote:this.props.smallestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid}),r=J({minToCheer:this.props.minToCheer,largestCheermote:this.props.largestCheermote,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsConfig:this.props.bitsConfig,bitsBalance:this.props.bitsBalance,amount:this.props.amount,chatMessage:this.props.chatMessage,onValidationError:this.props.onCheerInvalid});a||r||this.props.onCheerInvalid(void 0);var o=s.createElement(G.a,{amount:this.props.amount+this.props.bonusBits,prefix:j.k,bitsConfig:this.props.bitsConfig,display:b.d.Inline,showImage:!1,showAmount:!0,size:G.b.Medium}),l=[s.createElement(S.a,{key:"cheering-total-bits"},s.createElement(D.a,{fontSize:E.d.Size4,bold:!0},Object(c.d)("Cheering {totalBits} Bits",{totalBits:o},"Bits--PendingCheer")))];this.props.isAnonymous&&(l=[s.createElement(S.a,{key:"ghost-icon",display:b.d.Flex,alignItems:b.b.Center,margin:{right:.5}},s.createElement(k.a,{"data-test-selector":ie.GhostIcon,asset:k.b.Ghost,type:k.c.Brand}))].concat(l));return s.createElement(y.a,null,s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Column,alignItems:b.b.Center,padding:1,className:"pending-cheer"},s.createElement(b.g,{display:b.d.Flex,alignItems:b.b.Center},s.createElement(fe.a,{transitionType:ve.c.Fade},l)),!a&&e,!a&&!r&&i&&s.createElement(y.a,{padding:{top:1}},i),!a&&r&&s.createElement(S.a,{"data-test-selector":ie.InlineError,padding:{top:1},color:E.c.Error},r),a&&s.createElement(y.a,{"data-test-selector":ie.FullError,padding:{top:3,x:3}},a)),!a&&!r&&s.createElement(ge,{event:this.props.event,amount:this.props.amount,"data-test-selector":ie.EventReminder}))},t}(s.PureComponent),ke=n("x1M1"),Ce=(n("zmH+"),{themed:!0,dark:{"1x":j.g+"/dark/animated/promo/intro.gif"},light:{"1x":j.g+"/light/animated/promo/intro.gif"}}),ye=function(){return s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Column,alignItems:b.b.Center,justifyContent:b.h.Center,flexGrow:1,className:"bits-sending"},s.createElement(y.a,{padding:{bottom:1}},s.createElement(ke.a,{sources:Ce})),s.createElement(D.a,{italic:!0},Object(c.d)("Your Cheer is currently processing.","Bits--SendingBits")))};function Se(e){var t={maximumFractionDigits:1};return e<1e4?Object(c.f)(e,t):e<1e5?Object(c.g)(100*Math.floor(e/100),t):e<1e6?Object(c.g)(1e3*Math.floor(e/1e3),t):Object(c.g)(1e5*Math.floor(e/1e5),t)}var Ee,Ne=n("uG/k"),we=n("Z2sP"),_e=(n("Yr1V"),function(e){var t=Se(e.sponsorCampaign.bitsUsed||0),n=Se(e.sponsorCampaign.bitsTotal||0),i=e.sponsorCampaign.bitsUsed&&e.sponsorCampaign.bitsTotal?e.sponsorCampaign.bitsUsed/e.sponsorCampaign.bitsTotal*100:0;return s.createElement(S.a,{background:E.a.AccentAlt2,color:E.c.Overlay,display:b.d.Flex,flexGrow:1,flexDirection:b.e.Column,position:b.j.Relative,justifyContent:b.h.Center,alignItems:b.b.Center,padding:1},s.createElement(y.a,{padding:{top:1,bottom:1}},s.createElement(D.a,{type:D.e.H5,bold:!0},Object(c.d)("Give more Bits to this streamer!","Bits--SponsorIntro"))),s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Row,fullWidth:!0,padding:{bottom:1}},s.createElement(b.g,{padding:{right:1}},s.createElement(Ne.a,{src:e.sponsorCampaign.brandImageURL,alt:e.sponsorCampaign.brandName})),s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Column,flexGrow:1},s.createElement(b.g,{alignSelf:b.c.Baseline},s.createElement(D.a,null,Object(c.d)("{brandName} Bits",{brandName:e.sponsorCampaign.brandName},"Bits--SponsorIntro"))),s.createElement(we.a,{value:i,mask:!0}),s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Row,justifyContent:b.h.Between},s.createElement(D.a,{fontSize:E.d.Size7},Object(c.d)("{bitsUsed} Used",{bitsUsed:t},"Bits--SponsorIntro")),s.createElement(D.a,{fontSize:E.d.Size7},Object(c.d)("{totalBits}",{totalBits:n},"Bits--SponsorIntro"))))),s.createElement(D.a,{fontSize:E.d.Size7},Object(c.d)("The {brandName} Cheermote gives {sponsorPercentage}% bonus Bits when you Cheer {minimumSponsorBits} or more!",{minimumSponsorBits:e.sponsorCampaign.thresholds[0].minimumBits,brandName:e.sponsorCampaign.brandName,sponsorPercentage:100*e.sponsorCampaign.thresholds[0].matchedPercent},"Bits--SponsorIntro")),s.createElement(S.a,{background:E.a.AccentAlt2,position:b.j.Absolute,className:"sponsored-cheermote__tail"}))}),De=(n("u0cu"),function(e){var t=Object(c.d)("You are using {totalBits} Bits to cheer in {channelName}'s chat.",{totalBits:e.totalBits,channelName:e.channelDisplayName},"Bits--UndoPrompt"),n=null;if(e.prefixes&&e.prefixes.length>1)n=s.createElement(he.b,{className:"bits-undo-prompt__scroll-container"},s.createElement(y.a,{margin:{top:1}},s.createElement(W,{prefixes:e.prefixes,bitsConfig:e.bitsConfig})));else{var i=e.prefixes[0].alt;i&&(n=s.createElement(y.a,{padding:{bottom:1}},s.createElement(G.a,{prefix:i,amount:e.totalBits,bitsConfig:e.bitsConfig,showAmount:!0,showImage:!0})))}return s.createElement(y.a,{display:b.d.Flex,flexDirection:b.e.Column,alignItems:b.b.Center,justifyContent:b.h.Center,flexGrow:1,padding:1,className:"bits-undo-prompt"},n,s.createElement(D.a,null,t))});n("I8wU");!function(e){e.Container="lazy-carousel-container",e.Prev="lazy-carousel-prev-button",e.Next="lazy-carousel-next-button",e.NavDot="lazy-carousel-nav-dot",e.NavDotContainer="lazy-carousel-nav-dot-container",e.Animation="lazy-carousel-animation-container"}(Ee||(Ee={}));var Oe,Ie=[{bitsAmount:300,gifts:10,level:1},{bitsAmount:500,gifts:20,level:2},{bitsAmount:1e3,gifts:50,level:3},{bitsAmount:5e3,gifts:300,level:4}],Te=[{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862838/3.0",emoteString:"OWL2019vinyl"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862840/3.0",emoteString:"OWL2019eyes"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862827/3.0",emoteString:"OWL2019punch"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862837/3.0",emoteString:"OWL2019hungry"},{src:"https://static-cdn.jtvnw.net/emoticons/v1/1862830/3.0",emoteString:"OWL2019snowball"}],Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currIndex:0},t.renderMegaCheerLevels=Ie.map(function(e){return s.createElement(y.a,{key:"MegaGifterNotificationCard-"+e.level,padding:.5,display:b.d.Flex,flexDirection:b.e.Column,alignItems:b.b.Center},s.createElement(y.a,{className:"owl-2019-introduction__icon",padding:{bottom:.5}},t.renderLevelIcon(e.level)),s.createElement(D.a,{bold:!0,color:E.c.Link},Object(c.d)("{gifts} Gifts",{gifts:e.gifts},"OWL2019BitsIntroduction")),s.createElement(y.a,{display:b.d.Flex,alignItems:b.b.Center,justifyContent:b.h.Center,padding:{top:.5}},s.createElement(k.a,{asset:k.b.Bits,width:14,height:14}),s.createElement(D.a,{type:D.e.Span},Object(c.f)(e.bitsAmount))))}),t.renderOwlEmotes=Te.map(function(e){return s.createElement(Ne.a,{key:e.emoteString,className:"owl-2019-introduction__emote",src:e.src,srcSet:{"112w":e.src},sizes:[{size:"28px"}],alt:e.emoteString})}),t}return o.__extends(t,e),t.prototype.render=function(){return s.createElement(y.a,null,s.createElement(y.a,{className:"owl-2019-introduction__info",padding:{top:1}},s.createElement(D.a,{fontSize:E.d.Size5,bold:!0,color:E.c.Link},Object(c.d)("Introducing: MegaCheer","OWL2019BitsIntroduction")),s.createElement(y.a,{padding:{x:1,top:.5,bottom:1}},s.createElement(D.a,null,Object(c.d)("Cheer Bits in the amounts below to initiate a MegaCheer. Each MegaCheer gets you 2 exclusive emotes (35+ available) and gifts 1 randomly to multiple viewers in Chat.","OWL2019BitsIntroduction")))),s.createElement(y.a,{display:b.d.Flex,justifyContent:b.h.Center,flexDirection:b.e.Row,padding:{bottom:1}},this.renderOwlEmotes),s.createElement(y.a,{padding:{bottom:.5},display:b.d.Flex,flexDirection:b.e.Row,justifyContent:b.h.Around},this.renderMegaCheerLevels))},t.prototype.renderLevelIcon=function(e){return s.createElement("img",{src:j.h+"/owl-2019/bits-card/MegaCheer-icon-0"+e+".png",alt:Object(c.d)("MegaCheer level {level}",{level:e},"OWL2019BitsIntroduction")})},t}(s.Component);!function(e){e.CratesChristmas="CratesChristmas",e.OWL2018="owl2018",e.HGC2018="hgc2018",e.WORLDCUP2018="worldcup2018",e.HGG2018="hearthstone2018",e.HGG2018TEST="hearthstone2018-test",e.OWL2019TEST="owl2019-test",e.OWL2019="owl2019"}(Oe||(Oe={}));var Le=function(e){switch(e.event){case Oe.OWL2019TEST:case Oe.OWL2019:return s.createElement(Me,null);default:return s.createElement(me,{onClickHelp:e.onClickHelp})}},Fe=n("FZ/2"),xe=function(e){if(e.isSending)return e.totalBits<j.q?s.createElement(ye,null):s.createElement(De,{bitsConfig:e.bitsConfig,channelDisplayName:e.displayName,prefixes:e.currentCheers,totalBits:e.totalBits});if(e.hoveredCheermote)return s.createElement(q,{event:e.event,tournament:e.tournament,bitsConfig:e.bitsConfig,prefix:e.hoveredCheermote,tier:e.hoveredTier,onClickHelp:e.showHelp});var t=je(e.bitsConfig),n=Ae(e.bitsConfig),i=c.b.get(j.t,le.b.Off);if(e.totalBits)return s.createElement(be,{bitsConfig:e.bitsConfig,prefixes:e.currentCheers,amount:e.totalBits,bonusBits:e.bonusBits,channelDisplayName:e.displayName,bitsBalance:e.bitsBalance,largestCheermote:e.largestCheermote,smallestCheermote:e.smallestCheermote,minPerEmote:e.emoteMinimumBits,minToCheer:e.cheerMinimumBits,event:e.event,sponsoredCampaign:t,sponsoredCampaignPrefix:n,sponsoredBitsBonus:e.bonusBits,bitsSendErrorCode:e.bitsSendErrorCode,bitsSendHasError:e.bitsSendHasError,chatMessage:e.chatMessage,onCheerInvalid:e.onCheerInvalid,isAnonymous:e.isAnonymous});if(e.helpRequested)return s.createElement(ue.a,null);var a,r=c.b.get(j.i,le.b.Off),o=null;if(e.bitsOffers&&(o=e.bitsOffers.find(function(e){return Object(ne.f)(e)})),!e.event||e.event!==Oe.OWL2019TEST&&e.event!==Oe.OWL2019){if(e.isAnonymous)return s.createElement(ce,null);if(e.chosenCheermote){var l=e.cheerMinimumBits;return s.createElement(pe,{minToCheer:l})}return o&&(a=o,Object(ne.f)(a))?s.createElement(Fe.a,{offer:o,channelID:e.channelID||"",trackBitsCardInteraction:e.trackBitsCardInteraction,onPromoBuyClose:e.onPromoBuyClose,isBitsCard:!0}):e.event?s.createElement(Le,{event:e.event,onClickHelp:e.showHelp}):t&&(i===le.b.On||i===le.b.StaffOnly&&e.isStaff)?s.createElement(_e,{sponsorCampaign:t}):r===le.b.On?s.createElement(de,{onClickHelp:e.showHelp}):s.createElement(me,{onClickHelp:e.showHelp})}return s.createElement(Le,{event:e.event,onClickHelp:e.showHelp})};function je(e){var t=null;return e.orderedActions.forEach(function(e){e.campaign&&(t=e.campaign)}),t}function Ae(e){var t="";return e.orderedActions.forEach(function(e){e.campaign&&(t=e.prefix)}),t}var Pe=n("r/lI"),Re=(n("KO0n"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onTierSelectionExit=function(){t.setState({selectedCheermote:void 0})},t.onCheermoteClick=function(e){t.setState({selectedCheermote:e})},t}return o.__extends(t,e),t.prototype.render=function(){if(this.props.data.loading&&!this.props.data.error)return s.createElement(se.a,null);if(this.props.data.error)return s.createElement(O,null);var e=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.cheerMinimumBits,t=this.props.data.user&&this.props.data.user.cheer&&this.props.data.user.cheer.settings.emoteMinimumBits,n=!!(this.props.bitsBalance&&null!==e&&this.props.bitsBalance>=e),i=je(this.props.bitsConfig),a=Ae(this.props.bitsConfig);return s.createElement(w,{onUserClose:this.props.handleExit},this.state.selectedCheermote&&s.createElement(ae,{chosenCheermote:this.state.selectedCheermote,bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,minPerEmote:t||1,channelName:this.props.channelLogin,onClose:this.props.handleExit,currentCheers:this.props.currentCheers,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,chatMessage:this.props.chatMessage,sponsoredCampaign:i,sponsoredCampaignPrefix:a,bitsBalance:this.props.bitsBalance||0,onClickCheermote:this.props.onClickCheermote,onBack:this.onTierSelectionExit,onCheerInvalid:this.props.onCheerInvalid,isAnonymous:this.props.isAnonymous,showHelp:this.props.showHelp}),!this.state.selectedCheermote&&s.createElement(U,{bitsConfig:this.props.bitsConfig,canCheerInChannel:n,minCheerAmount:e||1,channelName:this.props.channelLogin,onCheermoteClick:this.onCheermoteClick,onShowAllCheermotes:this.props.handleExit}),s.createElement(y.a,{fullWidth:!0,className:"first-cheer-builder__footer"},s.createElement(oe,{bitsConfig:this.props.bitsConfig,balance:this.props.bitsBalance||0,showBuyButton:!n,onClickGetBits:this.props.handleClickBuy,isAnonymous:this.props.isAnonymous})))},t}(s.PureComponent)),Ue=Object(l.compose)(Object(d.a)(Pe,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}))(Re),Be=function(e){return s.createElement(y.a,{flexGrow:1},s.createElement(y.a,{className:"undo-prompt__footer",padding:1,display:b.d.Flex,justifyContent:b.h.Between},s.createElement(A.a,{onClick:e.onCancel||void 0,type:A.d.Hollow,overlay:!0,"data-test-selector":"cancel-button"},Object(c.d)("Cancel","Bits--UndoPrompt")),s.createElement(A.a,{onClick:e.onConfirm||void 0,"data-test-selector":"confirm-button"},Object(c.d)("Send","Bits--UndoPrompt"))),s.createElement(we.a,{animationDirection:we.b.Down,size:we.c.ExtraSmall,animationDuration:j.u.UNDO_PROMPT_DURATION/1e3}))},Ve=function(e){return e.event,s.createElement(oe,{bitsConfig:e.bitsConfig,onClickGetBits:e.onClickGetBits,balance:e.balance,selfBitsBadge:e.selfBitsBadge,isAnonymous:!1})},He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return this.props.isSending?this.props.totalBits>=j.q?s.createElement(Be,{onCancel:this.props.onCancelSend,onConfirm:this.props.onConfirmSend}):null:this.props.event?s.createElement(Ve,{event:this.props.event,selfBitsBadge:this.props.userSelfBitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance}):s.createElement(oe,{selfBitsBadge:this.props.userSelfBitsBadge,bitsConfig:this.props.bitsConfig,onClickGetBits:this.props.handleClickBuy,balance:this.props.bitsBalance,isAnonymous:this.props.isAnonymous})},t}(s.PureComponent),Ge=n("cw0r"),qe=(n("AcdH"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheermoteHover=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onHover(n)},t.handleCheermoteUnhover=function(){t.props.onHoverLeave()},t.handleCheermoteClick=function(e){var n=e.currentTarget.getAttribute("data-key");n&&t.props.onClick(n)},t}return o.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.bitsConfig.orderedActions.filter(function(e){return e.type!==g.y.THIRD_PARTY&&e.type!==g.y.DISPLAY_ONLY}).map(function(e){var t=e.indexedTiers.get(j.l);return t?{imgSrc:t.indexedImages.LIGHT.static.get(2),imgSrcDark:t.indexedImages.DARK.static.get(2),key:e.prefix}:null}).map(function(t,n){return t&&t.key?s.createElement(b.g,{key:t.key,margin:{bottom:1}},s.createElement("li",{className:"cheermote-prefix-selector__cheermote"},s.createElement("button",{className:"cheermote-prefix-selector__item-button","data-key":t.key,onMouseEnter:e.handleCheermoteHover,onMouseLeave:e.handleCheermoteUnhover,onClick:e.handleCheermoteClick,"data-a-target":"cheermote-"+t.key.replace(":","")},s.createElement("img",{alt:t.key,src:e.props.darkModeEnabled?t.imgSrcDark:t.imgSrc})))):s.createElement("li",{key:"null-cheermote-"+n},s.createElement("button",{className:"cheermote-prefix-selector__item-button",disabled:!0},s.createElement("div",{className:"cheermote-prefix-selector__placeholder"})))}),n=s.createElement(b.g,{className:"cheermote-prefix-selector__cheermotes",display:b.d.Flex,flexWrap:b.f.Wrap,flexDirection:b.e.Row,justifyContent:b.h.Start,alignItems:b.b.End,padding:{bottom:1}},s.createElement("ul",null,t));return s.createElement(y.a,{flexGrow:1,overflow:b.i.Hidden,className:"cheermote-prefix-selector"},s.createElement(B.b,null,n))},t}(s.PureComponent));var We=Object(a.connect)(function(e){return{darkModeEnabled:Object(M.a)(e)===T.a.Dark}})(qe),ze=n("b7S+"),Qe=n("kqSx"),Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAnonymousCheckBoxChange=function(e){t.props.handleAnonymousToggle(e.currentTarget.checked)},t}return o.__extends(t,e),t.prototype.render=function(){if(this.props.helpRequested&&!this.props.currentCheers.length)return null;var e=null;return e=this.props.isAnonymous?s.createElement(te,{bitsConfig:this.props.bitsConfig,chosenCheermote:j.b,onHover:this.props.handleTierHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleTierClick,onClose:this.props.clearChosenCheermote,isAnonymous:this.props.isAnonymous}):this.props.chosenCheermote?s.createElement(te,{bitsConfig:this.props.bitsConfig,chosenCheermote:this.props.chosenCheermote,onHover:this.props.handleTierHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleTierClick,onClose:this.props.clearChosenCheermote,isAnonymous:this.props.isAnonymous}):s.createElement(We,{bitsConfig:this.props.bitsConfig,onHover:this.props.handleCheermoteHover,onHoverLeave:this.props.handleUnhover,onClick:this.props.handleCheermoteClick}),s.createElement(y.a,null,!this.props.event&&s.createElement(Ge.a,{name:"bits_project_marley"},s.createElement(y.a,{padding:{left:1,top:1}},s.createElement(ze.a,{label:Object(c.d)("Your name will appear as {anAnonymousCheerer} and custom messaging will be turned off.",{anAnonymousCheerer:j.c},"CheermotePrefixSelector"),direction:ze.c.Bottom,align:ze.b.Left,width:275},s.createElement(Qe.a,{checked:this.props.isAnonymous,onChange:this.onAnonymousCheckBoxChange,label:Object(c.d)("Cheer Anonymously","CheermotePrefixSelector")})))),e)},t}(s.PureComponent),Ke=n("edgk"),Xe=n("RiD7"),$e=n("UajW"),Je=(n("c+1r"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={chosenCheermote:null,hoveredCheermote:null,hoveredTier:0,totalBits:0,bonusBits:0,largestCheermote:0,smallestCheermote:0},t.unhoverTimeout=0,t.handleTierHover=function(e){clearTimeout(t.unhoverTimeout);var n=e.split(":");n.length<2||(t.setState({hoveredTier:+n[1],hoveredCheermote:n[0]}),t.props.trackBitsCardInteraction(Xe.c.PreviewEmote,{actionType:Xe.a.Hover,emoteType:n[0],emoteLevel:+n[1]}))},t.handleUnhover=function(){t.unhoverTimeout=setTimeout(t.clearHovered,500)},t.clearHovered=function(){t.setState({hoveredTier:0,hoveredCheermote:null})},t.handleTierClick=function(e){t.props.onClickCheermote(e.split(":").join(""))},t.handleCheermoteHover=function(e){clearTimeout(t.unhoverTimeout),t.setState({hoveredCheermote:e,hoveredTier:0}),t.props.trackBitsCardInteraction(Xe.c.PreviewEmote,{actionType:Xe.a.Hover,emoteType:e,emoteLevel:100})},t.handleCheermoteClick=function(e){t.setState({chosenCheermote:e,hoveredCheermote:null,hoveredTier:0})},t.clearChosenCheermote=function(){t.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0})},t.onPromoBuyClose=function(e){Object(Ke.a)(e,function(){t.props.data&&t.props.data.refetch()})},t}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props.visible||!!this.props.currentCheers.length,n=e.visible||!!e.currentCheers.length;if(t&&!n&&this.setState({chosenCheermote:null,hoveredCheermote:null,hoveredTier:0}),this.props.currentCheers!==e.currentCheers){var i=Object(ne.a)(e.currentCheers),a=i.total,r=i.bonus,o=i.largestCheermote,s=i.smallestCheermote;this.setState({totalBits:a,bonusBits:r,largestCheermote:o,smallestCheermote:s})}},t.prototype.componentDidMount=function(){var e=Object(ne.a)(this.props.currentCheers),t=e.total,n=e.bonus,i=e.largestCheermote,a=e.smallestCheermote;this.setState({totalBits:t,bonusBits:n,largestCheermote:i,smallestCheermote:a}),this.props.onMount&&this.props.onMount()},t.prototype.render=function(){var e=this.props,t=e.cheerMessageAutoModded,n=e.visible,i=e.currentCheers,a=e.data,r=e.bitsConfig,o=e.isSending,l=e.helpRequested,d=e.channelID,u=e.showHelp,m=e.isStaff,p=e.bitsSendErrorCode,h=e.bitsSendHasError,g=e.handleClickBuy,v=e.onCancelSend,C=e.onConfirmSend,E=e.chatMessage;if(t||!n&&!i.length)return null;if(!a.user||a.loading)return s.createElement(se.a,null);if(a.error||!r)return s.createElement(O,null);if(!a.user.cheer)return null;var N,w=this.props.helpRequested&&!this.props.currentCheers.length,_=null;a.user.cheer.settings.event&&(_=a.user.cheer.settings.event.toLowerCase().replace("_","-")),w&&(N=s.createElement(y.a,{position:b.j.Absolute,padding:{left:.5,top:.5},attachLeft:!0,attachTop:!0},s.createElement(A.a,{onClick:this.props.closeHelp,"data-a-target":"bits-card-back-button",icon:k.b.ChatSettingsBack,type:A.d.Text,size:A.b.Small},Object(c.d)("Back","BitsCard"))));var D=f("t-bits-card__contents",{"t-bits-card__contents--anonymous":this.props.isAnonymous});return s.createElement(s.Fragment,null,!o&&N,s.createElement(S.a,{className:D,display:b.d.Flex,flexGrow:0,flexDirection:b.e.Column,alignContent:b.a.Stretch,textAlign:b.k.Center,borderBottom:!o,fullWidth:!0},s.createElement(xe,{bitsBalance:a.currentUser&&a.currentUser.bitsBalance||0,bitsConfig:r,cheerMinimumBits:a.user.cheer.settings.cheerMinimumBits,chosenCheermote:this.state.chosenCheermote,currentCheers:i,displayName:a.user.displayName||"",emoteMinimumBits:a.user.cheer.settings.emoteMinimumBits,event:_,helpRequested:l,hoveredCheermote:this.state.hoveredCheermote,hoveredTier:this.state.hoveredTier,isSending:o,largestCheermote:this.state.largestCheermote,smallestCheermote:this.state.smallestCheermote,totalBits:this.state.totalBits,bonusBits:this.state.bonusBits,tournament:a.user.tournament,channelID:d,showHelp:u,isStaff:m,isAnonymous:this.props.isAnonymous,bitsSendErrorCode:p,bitsSendHasError:h,chatMessage:E,onCheerInvalid:this.props.onCheerInvalid,bitsOffers:a.currentUser&&a.currentUser.bitsOffers,trackBitsCardInteraction:this.props.trackBitsCardInteraction,onPromoBuyClose:this.onPromoBuyClose})),!o&&s.createElement(Ye,{bitsConfig:r,chosenCheermote:this.state.chosenCheermote,currentCheers:i,event:_,helpRequested:l,isAnonymous:this.props.isAnonymous,handleCheermoteClick:this.handleCheermoteClick,handleCheermoteHover:this.handleCheermoteHover,handleTierClick:this.handleTierClick,handleTierHover:this.handleTierHover,handleUnhover:this.handleUnhover,handleAnonymousToggle:this.props.onAnonymousToggle,clearChosenCheermote:this.clearChosenCheermote}),s.createElement(y.a,{className:"t-bits-card__footer",fullWidth:!0,display:b.d.Flex},s.createElement(He,{bitsBalance:a.currentUser&&a.currentUser.bitsBalance||0,bitsConfig:r,event:_,isSending:o,totalBits:this.state.totalBits,userSelfBitsBadge:a.user.self&&a.user.self.bitsBadge,handleClickBuy:g,onCancelSend:v,onConfirmSend:C,isAnonymous:this.props.isAnonymous})))},t}(s.Component)),Ze=Object(l.compose)(Object(u.a)(function(e){return{query:$e,variables:{name:e.channelID},topic:Object(h.d)(e.channelID||""),type:m.PubsubMessageType.BitsChannelSettingsEvent,mutator:function(e,t){if(t.user&&t.user.cheer)return void 0!==e.updates.minimum_bits&&(t.user.cheer.settings.cheerMinimumBits=e.updates.minimum_bits),void 0!==e.updates.minimum_bits_emote&&(t.user.cheer.settings.emoteMinimumBits=e.updates.minimum_bits_emote),t},skip:!e.channelID}}),Object(d.a)($e,{name:"data",skip:function(e){return!e.channelID},options:function(e){return{variables:{name:e.channelID||"",withCheerBombEventEnabled:!1},fetchPolicy:"cache-and-network"}}}))(Je),et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return s.createElement(y.a,{padding:1,textAlign:b.k.Center},s.createElement(D.a,{color:E.c.Error,italic:!0},Object(c.d)("You cannot Cheer in your own channel.","BitsCard")))},t}(s.PureComponent),tt=n("opIq"),nt=n("bYOw"),it=n("H31v"),at=n("8nkl"),rt=n("ao1a"),ot=n("Gcqi"),st=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={helpRequested:!1,buyingBits:!1,backTargetsIntro:!1},t.lastRefetchTime=0,t.showHelp=function(e){e.preventDefault(),t.setState({helpRequested:!0}),t.props.trackBitsCardInteraction(Xe.c.NewUserHelpRequested)},t.closeHelp=function(){return t.setState({helpRequested:!1})},t.handleClickBuy=function(){t.setState({buyingBits:!0}),t.props.trackBitsCardInteraction(Xe.c.BuyMain)},t.handleCloseBuy=function(){return t.setState({buyingBits:!1})},t.handleSkip=function(){t.closeHelp(),t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}),t.props.trackBitsCardInteraction(Xe.c.NewUserSkipTutorial)},t.handleCloseIntro=function(){t.closeHelp(),t.props.currentCheers.length?t.mutateFirstCheerTutorialState({hasAbandoned:!1,hasSkipped:!0}):t.props.onUserClose(),t.props.trackBitsCardInteraction(Xe.c.NewUserCloseTutorial)},t.handleClickFirstTimePurchaseDiscount=function(){t.setState({buyingBits:!0,helpRequested:!1,backTargetsIntro:!0}),t.mutateFirstCheerTutorialState({hasAbandoned:!0,hasSkipped:!1}),t.props.trackBitsCardInteraction(Xe.c.NewUserFirstTimePurchaseDiscountClick)},t.handleBackFromBuy=function(){t.setState({helpRequested:t.state.backTargetsIntro,buyingBits:!1})},t.onMountBitsCardMain=function(){t.setState({backTargetsIntro:!1})},t.mutateFirstCheerTutorialState=function(e){return o.__awaiter(t,void 0,void 0,function(){var t,n,i,a,r,s,l;return o.__generator(this,function(d){switch(d.label){case 0:if(!(t=this.props.data&&this.props.data.currentUser))return[3,4];n=t.bitsUserSettings,i=t.id,a=n&&n.firstCheerTutorial||{hasAbandoned:!1,hasSkipped:!1},r={hasAbandoned:e.hasAbandoned,hasSkipped:e.hasSkipped},s={setBitsUserSettings:{__typename:"SetBitsUserSettingsPayload",currentUser:{__typename:"User",id:i||null,bitsUserSettings:{__typename:"BitsUserSettings",firstCheerTutorial:o.__assign({__typename:"FirstCheerTutorial"},a,r)}}}},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.props.setBitsUserSettings(Object(p.b)({abandonedFirstCheerTutorial:e.hasAbandoned,skippedFirstCheerTutorial:e.hasSkipped},s))];case 2:return d.sent(),[3,4];case 3:return l=d.sent(),c.k.error(l,"Failed to set bits user settings."),[3,4];case 4:return[2]}})})},t}return o.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props.visible||!!this.props.currentCheers.length,n=e.visible||!!e.currentCheers.length;if(!t&&n){var i=Date.now();i-this.lastRefetchTime>1e3&&this.props.data&&e.data&&!e.data.loading&&(this.lastRefetchTime=i,e.data.refetch())}t&&!n&&this.setState({buyingBits:!1})},t.prototype.render=function(){if(this.props.cheerMessageAutoModded||!this.props.visible&&!this.props.currentCheers.length)return null;if(!this.props.data||this.props.data.loading)return s.createElement(w,{onUserClose:this.props.onUserClose},s.createElement(se.a,null));if(this.props.data.error||!this.props.bitsConfig)return s.createElement(w,{onUserClose:this.props.onUserClose},s.createElement(O,null));if(this.props.data.currentUser&&this.props.data.currentUser.login===this.props.channelLogin)return s.createElement(w,{onUserClose:this.props.onUserClose},s.createElement(et,null));var e=this.props.data&&this.props.data.currentUser,t=e&&e.bitsUserState,n=e&&e.bitsUserSettings;if(Object(rt.a)(t)){if(this.state.buyingBits)return s.createElement(w,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},s.createElement(tt.a,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,onBack:this.handleBackFromBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:Xe.d.ChatTooltip,shouldShowNewUserCheerUX:!0}));if(Object(rt.d)(t,n)||Object(rt.a)(t)&&this.state.helpRequested)return s.createElement(w,{onUserClose:this.handleCloseIntro,closeDataATarget:"bits-intro-close-button"},s.createElement(y.a,{padding:1},s.createElement(_.a,{onUserSkip:this.handleSkip,onUserClickFirstTimePurchaseDiscount:this.handleClickFirstTimePurchaseDiscount,trackBitsCardInteraction:this.props.trackBitsCardInteraction})))}return this.state.buyingBits?s.createElement(w,{onUserClose:this.handleCloseBuy,closeDataATarget:"bits-buy-card-close-button"},s.createElement(tt.a,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,closeAllBits:this.props.onUserClose,onClose:this.handleCloseBuy,trackBitsCardInteraction:this.props.trackBitsCardInteraction,location:Xe.d.ChatTooltip,size:nt.b.Scrollview})):Object(rt.b)(this.props.isStaff,t,n)?s.createElement(Ue,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,currentCheers:this.props.currentCheers,bitsSendHasError:this.props.bitsSendHasError,bitsSendErrorCode:this.props.bitsSendErrorCode,chatMessage:this.props.chatMessage,onClickCheermote:this.props.onClickCheermote,bitsBalance:e&&e.bitsBalance,handleClickBuy:this.handleClickBuy,handleExit:this.handleSkip,onCheerInvalid:this.props.onCheerInvalid,isAnonymous:!1,showHelp:this.showHelp}):s.createElement(w,{onUserClose:this.props.currentCheers.length?void 0:this.props.onUserClose},s.createElement(Ze,{onMount:this.onMountBitsCardMain,bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,channelLogin:this.props.channelLogin,cheerMessageAutoModded:this.props.cheerMessageAutoModded,visible:this.props.visible,currentCheers:this.props.currentCheers,isSending:this.props.isSending,isStaff:this.props.isStaff,isAnonymous:this.props.isAnonymous,onClickCheermote:this.props.onClickCheermote,onCancelSend:this.props.onCancelSend,onConfirmSend:this.props.onConfirmSend,trackBitsCardInteraction:this.props.trackBitsCardInteraction,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,helpRequested:this.state.helpRequested,showHelp:this.showHelp,closeHelp:this.closeHelp,handleClickBuy:this.handleClickBuy,chatMessage:this.props.chatMessage,onCheerInvalid:this.props.onCheerInvalid,onAnonymousToggle:this.props.onAnonymousToggle}))},t}(s.Component),lt=Object(l.compose)(Object(d.a)(ot,{name:"data",skip:function(e){return!e.channelID}}),Object(d.a)(at,{name:"setBitsUserSettings"}),Object(u.a)(function(e){return{query:ot,topic:e.user?Object(h.H)(e.user.id):"",type:m.PubsubMessageType.UserBitsFirstPurchase,skip:!e.user,mutator:function(t,n){return!n.currentUser||t.message_type!==it.b.FirstPurchase||e.user&&t.data.user_id!==e.user.id?n:(n.currentUser.bitsUserState===g.k.NEW_USER&&(n.currentUser.bitsUserState=g.k.ACQUIRED),n)}}}))(st);var ct=Object(a.connect)(function(e){return{user:Object(r.e)(e),isStaff:Object(r.g)(e)}})(lt);n.d(t,"a",function(){return ct})},sAMt:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:62}};n.loc.source={body:"query ChatUser($login: String!) {\nuser(login: $login) {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sLlB:function(e,t,n){"use strict";var i,a=n("/MKj"),r=n("fvjX"),o=n("5xw2"),s=n("OhOW"),l=n("mrSG"),c=n("q1tI"),d=n("wIs1"),u=n("/7QA"),m=n("vSJR"),p=n("8/mp"),h=n("HSqT"),g=n("2xye"),f=n("GnwI"),v=n("sUnt"),b=n("wp5a"),k=n("kqSx"),C=n("hnjF"),y=n("dEDE"),S=n("X2PJ"),E=n("Ws8v");n("S58p");!function(e){e.ClearAllButton="language-select-menu__clear-all-button"}(i||(i={}));var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLanguageChange=function(e){var n=e.currentTarget,i=n.parentElement&&n.parentElement.getAttribute("data-language-code");i&&(t.props.updateLanguagePreferences(i,n.checked),t.trackLanguageChange(i,n.checked))},t.renderDropdownContent=function(){return c.createElement(c.Fragment,null,c.createElement("div",{className:"language-select-menu__balloon"},c.createElement(p.b,null,c.createElement(v.a,{padding:.5},Object(h.b)().map(t.renderLanguageOption)))),c.createElement(E.a,{background:S.a.Alt,borderTop:!0,className:"language-select-menu__footer"},c.createElement(y.a,{type:y.d.Text,onClick:t.props.clearLanguagePreferences,"data-a-target":"language-clear-all","data-test-selector":i.ClearAllButton},Object(u.d)("Clear all","LanguageSelectMenu"))))},t.renderLanguageOption=function(e){return c.createElement(v.a,{padding:{x:1,y:.5},key:e.code},c.createElement(k.a,{label:e.label,checked:t.props.languagePreferences.includes(e.code),"data-language-code":e.code,"data-a-target":"language-filter-"+e.code+"-checkbox",onChange:t.handleLanguageChange}))},t.renderButtonContent=function(){var e=t.props.languagePreferences.length,n=Object(u.d)("Language","LanguageSelectMenu");return c.createElement(v.a,{display:C.d.Flex},n,c.createElement(v.a,{margin:{left:.5}},0!==e&&c.createElement(b.a,{type:b.b.Brand,label:e.toString()})))},t.trackLanguageChange=function(e,n){var i="";t.props.match&&t.props.match.params&&(i=decodeURIComponent(t.props.match.params.encodedCommunityName).toLowerCase()),u.q.tracking.track(g.SpadeEventType.LanguageFilterChange,{item_name:"language",item_value:e,item_action:n?"select":"deselect",game:i||null,open_click:!0})},t}return l.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return c.createElement(v.a,{className:"language-select-menu"},c.createElement(m.a,{"data-a-target":"language-filter-dropdown",buttonLabel:this.renderButtonContent()},this.renderDropdownContent()))},t}(c.Component),w=Object(r.compose)(d.a,Object(f.withLatencyTracking)("LanguageSelectMenu"))(N);var _=Object(a.connect)(function(e){return{languagePreferences:Object(s.a)(e)}},function(e){return Object(r.bindActionCreators)({updateLanguagePreferences:o.c,clearLanguagePreferences:o.a},e)})(w);n.d(t,"a",function(){return _})},sMoq:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"VIPUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GrantVIPInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantVIP"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"grantee"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:122}};n.loc.source={body:"mutation VIPUser($input: GrantVIPInput!){\ngrantVIP(input: $input) {\nchannel {\nid\n}\ngrantee {\nid\nlogin\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sPFP:function(e,t,n){},sQmm:function(e,t,n){"use strict";var i=n("q1tI"),a=n("PL8s"),r=n("sUnt"),o=n("hnjF"),s=n("X2PJ"),l=n("Ws8v"),c=function(){return i.createElement(l.a,{display:o.d.Flex,flexDirection:o.e.Row,border:!0,elevation:2,borderRadius:s.b.Medium,overflow:o.i.Hidden},i.createElement(r.a,{flexGrow:0,flexShrink:0},i.createElement(a.a,{height:300,width:20})),i.createElement(r.a,{flexGrow:1,flexShrink:1,display:o.d.Flex,flexDirection:o.e.Column,padding:{left:1}},i.createElement(r.a,{flexGrow:0,flexShrink:0,padding:{top:1}},i.createElement(a.a,{height:20,width:500})),i.createElement(r.a,{flexGrow:1,flexShrink:1,display:o.d.Flex,flexDirection:o.e.Row},i.createElement(r.a,{padding:{top:1,right:1,bottom:1}},i.createElement(a.a,{height:200,width:300})),i.createElement(r.a,{padding:1},i.createElement(a.a,{height:200,width:300})),i.createElement(r.a,{padding:1},i.createElement(a.a,{height:200,width:300})),i.createElement(r.a,{padding:1},i.createElement(a.a,{height:200,width:300})),i.createElement(r.a,{padding:1},i.createElement(a.a,{height:200,width:300})),i.createElement(r.a,{padding:1},i.createElement(a.a,{height:200,width:300})))))};n.d(t,"a",function(){return d});var d=function(){return i.createElement(r.a,{margin:{top:1}},i.createElement(r.a,{padding:{bottom:1}},i.createElement(c,{key:1})),i.createElement(r.a,{padding:{bottom:1}},i.createElement(c,{key:2})),i.createElement(r.a,{padding:{bottom:1}},i.createElement(c,{key:3})),i.createElement(r.a,{padding:{bottom:1}},i.createElement(c,{key:4})))}},sU0Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatCard_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"90"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"51"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query VideoChatCard_Video($videoID: ID!) {\nvideo(id: $videoID) {\nid\ntitle\npreviewThumbnailURL(width: 90 height: 51)\npublishedAt\nowner {\nid\nlogin\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},sbEw:function(e,t,n){},"sf7/":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o});var i="vodChat.video.CURRENT_VIDEO_CHANGED",a="vodChat.video.CURRENT_VIDEO_TIME_CHANGED",r=function(e){return{type:i,id:e}},o=function(e){return{type:a,updatedTime:e}}},tFCv:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/MKj"),s=n("9C/b"),l=n("fvjX"),c=n("ZS2+"),d=n("/0dD"),u=n("SDEh"),m=n("edgk"),p=n("1/iK"),h=n("y5D0"),g=n("jZLd"),f=n("kRBY"),v=n("XDQu"),b=n("+pBb"),k=n("3sMn"),C=n("Tznh"),y=n("xzy9"),S=n("3tQW"),E=n("fezU"),N=n("r2Xj"),w=n("WytW"),_=n("F6GT"),D=n("x0gr"),O=c.a.wrap(function(){return Promise.all([n.e(0),n.e(206)]).then(n.bind(null,"8MX0"))},"ChatSettingsComponent"),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={editAppearance:!1,shouldMountChild:!1},t.onEdit=function(){t.setState({editAppearance:!0})},t.onLeaveEdit=function(){t.setState({editAppearance:!1})},t.onDarkModeToggle=function(){var e=t.props.darkModeEnabled?d.a.Light:d.a.Dark;t.props.onThemeChanged(e,!t.props.isPopout),Object(D.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.darkModeEnabled,settingName:N.a.DarkMode})},t.onTimestampToggle=function(){Object(_.c)("showTimestamps",!t.props.showTimestamps),t.props.showTimestamps?t.props.onTimestampsDisable():t.props.onTimestampsEnable(),Object(D.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.showTimestamps,settingName:N.a.ShowTimestamps})},t.onHighContrastColorsToggle=function(){t.props.setHighContrastColors(!t.props.useHighContrastColors),Object(D.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!t.props.useHighContrastColors,settingName:N.a.UseHighContrastColors})},t.onDeletedMessageDisplaySettingChange=function(e){t.props.setDeletedMessageDisplaySetting(e)},t.onChatHide=function(){t.props.onChatHide(),t.onCloseSettings(),Object(D.b)({channelLogin:t.props.channelLogin,isHostMode:t.props.isHostMode,newValue:!0,settingName:N.a.HideChat})},t.onChatPopout=function(){t.props.isPopout||t.props.onChatHide();var e=window.open("/popout/"+t.props.channelLogin+"/chat?popout=","_blank","right=50,top=50,width=400,height=600,resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no");e&&!Object(u.a)()&&(e.focus(),Object(m.a)(e,function(){t.props.onChatUnhide()}))},t.onShowChatRules=function(){t.props.onShowChatRules&&(t.props.onShowChatRules(),t.onCloseSettings())},t.onColorSelected=function(e){t.props.isLoggedIn?t.props.onChatCommand(Object(w.a)(e)):t.props.login()},t.onCloseSettings=function(){t.props.isSettingsOpen&&(t.props.hideChatFilterSettings(),t.props.hideDeletedMessageDisplaySettings(),t.props.updateChatConfigState({isSettingsOpen:!1}))},t}return i.__extends(t,e),t.prototype.componentDidUpdate=function(e,t){e.isSettingsOpen||!this.props.isSettingsOpen||t.shouldMountChild?e.isSettingsOpen&&!this.props.isSettingsOpen&&(this.props.hideChatFilterSettings(),this.props.hideDeletedMessageDisplaySettings(),this.onLeaveEdit()):this.setState({shouldMountChild:!0})},t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(O.Preload,null),this.state.shouldMountChild&&a.createElement(O,{authToken:this.props.authToken,darkModeEnabled:this.props.darkModeEnabled,editAppearance:this.state.editAppearance,isShowingChatFilterSettings:this.props.isShowingChatFilterSettings,showChatFilterSettings:this.props.showChatFilterSettings,hideChatFilterSettings:this.props.hideChatFilterSettings,isCurrentUserModerator:this.props.isCurrentUserModerator,isHostMode:this.props.isHostMode,isVisible:this.props.isSettingsOpen,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,onChatCommand:this.props.onChatCommand,onChatHide:this.onChatHide,onChatPopout:this.onChatPopout,onShowChatRules:this.props.onShowChatRules&&this.onShowChatRules,onDarkModeToggle:this.onDarkModeToggle,onTimestampToggle:this.onTimestampToggle,onHighContrastColorsToggle:this.onHighContrastColorsToggle,showTimestamps:this.props.showTimestamps,useHighContrastColors:this.props.useHighContrastColors,theatreModeEnabled:this.props.theatreModeEnabled,onColorSelected:this.onColorSelected,channelLogin:this.props.channelLogin,channelID:this.props.channelID,isLoggedIn:this.props.isLoggedIn,onClickEditAppearance:this.onEdit,onLeaveEditAppearance:this.onLeaveEdit,onShowViewerCard:this.props.onShowViewerCard,containerElement:this.props.containerElement,"data-test-selector":"chat-settings-component",onCloseSettings:this.onCloseSettings,isShowingDeletedMessageDisplaySettings:this.props.isShowingDeletedMessageDisplaySettings,hideDeletedMessageDisplaySettings:this.props.hideDeletedMessageDisplaySettings,showDeletedMessageDisplaySettings:this.props.showDeletedMessageDisplaySettings,onDeletedMessageDisplaySettingChange:this.onDeletedMessageDisplaySettingChange,deletedMessageDisplaySetting:this.props.deletedMessageDisplaySetting,hasSetDeletedMessageDisplaySetting:this.props.hasSetDeletedMessageDisplaySetting}))},t}(a.Component);var T=Object(o.connect)(function(e){return{isChatRulesOpen:e.chat.isChatRulesOpen,isLoggedIn:Object(f.f)(e),darkModeEnabled:Object(v.a)(e)===d.a.Dark,showTimestamps:e.chat.showTimestamps,theatreModeEnabled:e.ui.theatreModeEnabled}},function(e){return Object(l.bindActionCreators)({login:function(){return Object(h.e)(p.a.ChatSettings)},onChatHide:function(){return b.M()},onChatUnhide:function(){return b.P()},onThemeChanged:function(e){return Object(g.b)(e,void 0,!1)},onTimestampsDisable:function(){return b.F()},onTimestampsEnable:function(){return b.K()}},e)})(I),M=Object(r.compose)(s.a,Object(k.b)(function(e){return{isSettingsOpen:e.isSettingsOpen,updateChatConfigState:function(t){return e.updateChatConfigState(t)}}}),Object(S.b)(function(e){return{setHighContrastColors:e.setValue,useHighContrastColors:e.value}}),Object(y.c)(function(e){return{setDeletedMessageDisplaySetting:e.setValue,deletedMessageDisplaySetting:e.value,isShowingDeletedMessageDisplaySettings:e.isShowingDeletedMessageDisplaySettings,hideDeletedMessageDisplaySettings:e.hideDeletedMessageDisplaySettings,showDeletedMessageDisplaySettings:e.showDeletedMessageDisplaySettings,hasSetDeletedMessageDisplaySetting:e.hasSetSetting}}),Object(E.b)(function(e){return{onShowViewerCard:e.onShowViewerCard}}),Object(C.d)(function(e){return e}))(T),L=n("/7QA"),F=n("eJ65"),x=n("7d/q"),j=n("7uM4"),A=n("ygYM"),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setToggleBalloonRef=function(e){return t.toggleBalloonRef=e},t}return i.__extends(t,e),t.prototype.componentDidUpdate=function(e){this.props.onToggle&&this.props.isChatRulesOpen&&!e.isChatRulesOpen?this.toggleBalloonRef.toggleBalloon(!1):this.props.isShowingChatFilterSettings&&!e.isShowingChatFilterSettings&&(this.toggleBalloonRef.toggleBalloon(!0),this.props.onToggle&&this.props.onToggle(!1))},t.prototype.render=function(){return a.createElement(F.a,{onToggle:this.props.onToggle,ref:this.setToggleBalloonRef},a.createElement(x.a,{icon:j.b.Gear,ariaLabel:Object(L.d)("Chat settings","ChatInput"),"data-a-target":"chat-settings",disabled:!!this.props.disabled}),a.createElement(A.a,{direction:A.b.Top,noTail:!0,offsetY:"11px","data-a-target":"chat-settings-balloon"},this.props.children))},t}(a.Component);var R=Object(o.connect)(function(e){return{isChatRulesOpen:e.chat.isChatRulesOpen}})(P);n.d(t,"a",function(){return M}),n.d(t,"b",function(){return R})},tIid:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c});var i=n("/7QA"),a="esport_insider_pass_whitelist",r="esports_room_cheering_whitelist",o="owlallaccess2019";function s(e,t,n){return void 0===n&&(n=!1),d(a,e,t,n)}function l(e,t){return d(r,e,t)}function c(e){return e===o}function d(e,t,n,a){void 0===a&&(a=!1);var r=i.b.get(e,[]),o=n&&n.roles&&n.roles.isStaff||a;return r.includes(t)||r.includes(t+"-staff")&&o}},tX9j:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AutoModRejectedChatMessagePrompt"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"msgID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rejectedChatMessage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"msgID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"message"},directives:[]}]}}]}}]}}],loc:{start:0,end:200}};i.loc.source={body:'#import "twilight/features/message/fragments/message-fragment.gql"\nquery AutoModRejectedChatMessagePrompt($msgID: ID! $channelID: ID!) {\nrejectedChatMessage(id: $msgID) {\nid\nmessage {\n...message\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("jy35").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},tiJ6:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=n("0Log"),s=n("wUQP"),l=n("cMjZ"),c=n("geRD"),d=n("/aPz"),u=n("2xye"),m=n("1rIY"),p=n("Q34B"),h=n("vRsq"),g=n("Q94S");function f(e,t){var n=e.owner?e.owner.login:"",i=p.a.VIDEO,a=Object(h.j)(n,e.id);return{clipSlug:"",collectionID:t?t.id:"",contentCanonicalUrl:a,contentType:i,hostedChannel:null,videoID:e.id,videoPlayerSource:""}}function v(e){if(e&&e.hosting&&e.hosting.id&&e.hosting.login){var t=e.hosting;return{id:t.id,login:t.login,displayName:t.displayName||"",profileImageURL:t.profileImageURL}}return null}var b,k=function(e,t){return"https://static-cdn.jtvnw.net/ttv-boxart/"+encodeURIComponent(e)+"-"+t.width+"x"+t.height+".jpg"},C=n("VKOn"),y=n("Hz5m"),S=n("zQgx"),E=n("kmJV"),N=n("xyN1"),w=n("csJo"),_=n("mGiD"),D=n("BbLt"),O=n("MAph");n.d(t,"b",function(){return T}),n.d(t,"a",function(){return M});var I=(b=Object(m.a)("ChannelContext",{loading:!1,error:!1,channel:null,channelLogin:"",clip:null,clipSlug:"",collection:null,collectionID:"",contentCanonicalUrl:"",contentType:p.a.NONE,currentUser:null,hostedChannel:null,live:!1,page:y.c.About,video:null,videoID:"",videoPlayerSource:"",viewerCount:null,clearData:function(){}})).InnerProvider,T=b.withContext,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1,error:!1,channelLogin:"",channel:null,clipSlug:"",clip:null,videoID:"",video:null,collectionID:"",collection:null,contentCanonicalUrl:"",contentType:p.a.NONE,currentUser:null,live:!1,hostedChannel:null,videoPlayerSource:"",page:y.c.About,viewerCount:null,clearData:function(){t.clearResetOfflineTimer()}},t.logger=r.k.withCategory("ChannelContext"),t.nextHostTarget="",t.updateRoute=function(e){t.setState({page:t.getPageType(e)});var n=(e.match.params.channelLogin||"").toLowerCase();n&&n===t.state.channelLogin||(t.resetPrivateVariables(),t.setState({viewerCount:null})),t.setState(t.updateVideoSource({route:e}));var i=Object(g.e)(e),a=Object(g.a)(e),r=Object(g.b)(e);t.setState({channelLogin:n}),i?t.fetchVideo(i,r):a?t.fetchClip(a):r?t.fetchCollection(r):n?(t.fetchChannel(n),t.setupPubsub("",n)):t.logger.warn("Channel Root had no content to load",e.match)},t.onResetOffline=function(){t.resetOfflineTimer=void 0,t.state.live&&(r.p.track(u.SpadeEventType.ChannelOffline,{offline_type:"viewcount",channel:t.state.channel&&t.state.channel.login}),t.setState({live:!1}))},t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.updateRoute(this.props)},t.prototype.componentWillReceiveProps=function(e){e.match.url!==this.props.match.url&&this.updateRoute(e)},t.prototype.render=function(){return a.createElement(I,{value:this.state},this.props.children)},t.prototype.componentDidUpdate=function(e,t){t.channel&&this.state.channel&&t.channel.id===this.state.channel.id&&(t.hostedChannel!==this.state.hostedChannel||t.hostedChannel&&this.state.hostedChannel&&t.hostedChannel.id!==this.state.hostedChannel.id)&&r.p.track(u.SpadeEventType.HostModeDebug,{log_type:"state_change",channel:this.state.channel.login,host_channel:this.state.hostedChannel&&this.state.hostedChannel.login})},t.prototype.resetPrivateVariables=function(){this.pubsubHostTargetChange&&this.pubsubHostTargetChange.unsubscribe(),this.pubsubHostTargetChange=void 0,this.pubsubViewCountUpdate&&this.pubsubViewCountUpdate.unsubscribe(),this.pubsubViewCountUpdate=void 0,this.pubsubBroadcastSettings&&this.pubsubBroadcastSettings.unsubscribe(),this.pubsubBroadcastSettings=void 0,this.gqlChannelObservable=void 0,this.gqlChannelSubscription&&this.gqlChannelSubscription.unsubscribe(),this.gqlChannelSubscription=void 0,this.nextHostTarget="",this.clearResetOfflineTimer()},t.prototype.fetchChannel=function(e){var t=this;if(this.setState({loading:!0}),this.gqlChannelObservable)this.gqlChannelObservable.refetch();else{var n=r.q.apollo.client.watchQuery({query:E,variables:{currentChannelLogin:e,includeChanlets:!Object(C.a)()}}),a=n.subscribe({next:function(e){t.setState(i.__assign({error:!1,loading:!1,clip:null,video:null,collection:null},t.updateCurrentUser(e.data.currentUser),t.updateChannel(e.data.user),t.updateVideoSource({live:e.data.user})))},error:function(n){t.logger.error(n,"failed to fetch channel root data",{channelLogin:e}),t.setState({error:!0,loading:!1})}});this.gqlChannelObservable=n,this.gqlChannelSubscription=a}},t.prototype.fetchVideo=function(e,t){var n=this;this.setState({loading:!0});var a=r.q.apollo.client.watchQuery({query:_,variables:{videoID:e,collectionID:t,includeCollection:!!t,includeChanlets:!1}}).subscribe({next:function(e){a.unsubscribe(),n.setState(i.__assign({error:!1,loading:!1,clip:null,collection:null},n.updateCurrentUser(e.data.currentUser),n.updateVideo(e.data.video),n.updateChannel(e.data.video&&e.data.video.owner),n.updateVideoSource({video:e.data.video})))},error:function(i){a&&a.unsubscribe(),n.setState({error:!0,loading:!1}),n.logger.error(i,"failed to fetch channel root data for video",{videoID:e,collectionID:t})}})},t.prototype.fetchCollection=function(e){var t=this;this.setState({loading:!0});var n=r.q.apollo.client.watchQuery({query:w,variables:{collectionID:e,includeChanlets:!1}}).subscribe({next:function(e){n.unsubscribe();var a=Object(g.c)(e.data.collection);t.setState(i.__assign({error:!1,loading:!1,clip:null},t.updateCurrentUser(e.data.currentUser),t.updateCollection(e.data.collection),t.updateVideo(a),t.updateChannel(e.data.collection&&e.data.collection.owner),t.updateVideoSource({video:a,collection:e.data.collection})))},error:function(i){n&&n.unsubscribe(),t.setState({error:!0,loading:!1}),t.logger.error(i,"failed to fetch channel root data for collection",{collectionID:e})}})},t.prototype.fetchClip=function(e){var t=this;this.setState({loading:!0});var n=r.q.apollo.client.watchQuery({query:N,variables:{currentChannelLogin:"",includeChannel:!1,videoID:"",includeVideo:!1,collectionID:"",includeCollection:!1,slugID:e,includeClip:!0,includeChanlets:!1}}).subscribe({next:function(e){n.unsubscribe(),t.setState(i.__assign({error:!1,loading:!1,video:null,collection:null},t.updateCurrentUser(e.data.currentUser),t.updateClip(e.data.clip),t.updateChannel(e.data.clip&&e.data.clip.broadcaster),t.updateVideoSource({clip:e.data.clip})))},error:function(i){n&&n.unsubscribe(),t.setState({error:!0,loading:!1}),t.logger.error(i,"failed to fetch channel root data for video",{clipSlug:e})}})},t.prototype.updateCurrentUser=function(e){return{currentUser:e}},t.prototype.updateCollection=function(e){return{collection:e}},t.prototype.updateVideo=function(e){return{video:e}},t.prototype.updateClip=function(e){return{clip:e}},t.prototype.updateChannel=function(e){var t=e&&e.login||"",n=!!Object(S.d)(e),i=v(e),a=Object(S.h)(e);return this.setupPubsub(e&&e.id||"",t),this.clearResetOfflineTimer(),n&&(this.resetOfflineTimer=setTimeout(this.onResetOffline,6e4)),{channel:e,channelLogin:t,live:n,hostedChannel:i,viewerCount:a}},t.prototype.updateVideoSource=function(e){var t,n,i,a,r,o,s,l,c,d,u;if(e.route)a=e.route.match.params.channelLogin||"",r=e.route,o=Object(g.a)(r)||"",s=Object(g.e)(r)||"",l=Object(g.b)(r)||"",c="",d=p.a.NONE,u="",""!==o?(d=p.a.CLIP,c=Object(h.h)(a,o)):s||l?(d=l?p.a.COLLECTION:p.a.VIDEO,c=Object(h.j)(a,s,l)):(d=p.a.LIVE,c="/"+a,u=a),t={clipSlug:o,collectionID:l,contentCanonicalUrl:c,contentType:d,hostedChannel:null,videoID:s,videoPlayerSource:u};else if(e.live){t=function(e){var t=e.login||"",n=p.a.LIVE,i="/"+t,a=t,r=v(e);return r&&(a=r.login),{clipSlug:"",collectionID:"",contentCanonicalUrl:i,contentType:n,hostedChannel:r,videoID:"",videoPlayerSource:a}}(e.live)}else e.clip?t=function(e){var t=e.broadcaster&&e.broadcaster.login,n=p.a.CLIP,i=Object(h.h)(t||"",e.slug);return{clipSlug:e.slug,collectionID:"",contentCanonicalUrl:i,contentType:n,hostedChannel:null,videoID:"",videoPlayerSource:""}}(e.clip):e.collection?(n=e.collection,t=(i=Object(g.c)(n))?f(i,n):{clipSlug:"",collectionID:n.id,contentCanonicalUrl:"",contentType:p.a.COLLECTION,hostedChannel:null,videoID:"",videoPlayerSource:""}):e.video&&(t=f(e.video));return t||(this.logger.warn("Unable to set context.",e),{})},t.prototype.getPageType=function(e){if(e.match.params.standaloneType){if(e.match.params.standaloneType===y.e.Videos)return y.c.Videos;if(e.match.params.standaloneType===y.e.Collections)return y.c.Videos}if(void 0===e.match.params.page){if(e.match.params.contentType){if(e.match.params.contentType===y.a.Video)return y.c.Videos;if(e.match.params.contentType===y.a.Clip)return y.c.Clips;if(e.match.params.contentType===y.a.Collection)return y.c.Videos}return y.c.About}return e.match.params.page&&y.d.has(e.match.params.page)?e.match.params.page:(r.k.error(new Error,"Unknown Page Type: '"+e.match.params.page+"' in route: "+e.match.url),y.c.About)},t.prototype.setupPubsub=function(e,t){var n=this;if(!this.pubsubHostTargetChange||this.pubsubHostTargetChange.channelLogin!==t)if(this.pubsubHostTargetChange&&this.pubsubHostTargetChange.unsubscribe(),e){var i=r.q.pubsub.subscribe({topic:Object(d.D)(e),onMessage:function(i){i.type===o.PubsubMessageType.StreamChatRoomHostTargetChange&&n.handleStreamChatRoomHostTargetChange(i,t,e)}});this.pubsubHostTargetChange={channelLogin:t,unsubscribe:i}}else this.pubsubHostTargetChange=void 0;if(!this.pubsubViewCountUpdate||this.pubsubViewCountUpdate.channelLogin!==t)if(this.pubsubViewCountUpdate&&this.pubsubViewCountUpdate.unsubscribe(),t&&e){var a=Object(s.c)("watch_playback_by_id")?Object(d.L)(e):Object(d.M)(t);i=r.q.pubsub.subscribe({topic:a,onMessage:function(e){e.type===o.PubsubMessageType.ViewCount&&n.handleViewCount(e),e.type===o.PubsubMessageType.ChannelStreamDown&&n.handleStreamDown()}});this.pubsubViewCountUpdate={channelLogin:t,unsubscribe:i}}else this.pubsubViewCountUpdate=void 0;if(!this.pubsubBroadcastSettings||this.pubsubBroadcastSettings.channelLogin!==t)if(this.pubsubBroadcastSettings&&this.pubsubBroadcastSettings.unsubscribe(),e){i=r.q.pubsub.subscribe({topic:Object(d.e)(e),onMessage:function(e){e.type===o.PubsubMessageType.BroadcastSettingsUpdate&&n.handleBroadcastSettingsUpdate(e)}});this.pubsubBroadcastSettings={channelLogin:t,unsubscribe:i}}else this.pubsubBroadcastSettings=void 0},t.prototype.handleStreamChatRoomHostTargetChange=function(e,t,n){if(e.data.channel_id===n){r.p.track(u.SpadeEventType.HostModeDebug,{log_type:"pubsub_msg_v2",channel:t,data_channel_id:e.data.channel_id,data_target_channel_id:e.data.target_channel_id,data_target_channel_login:e.data.target_channel_login});var i=e.data.channel_login,a=e.data.target_channel_id,o=(e.data.target_channel_login||"").toLowerCase();if(t!==i)return;a&&o?(this.setState({videoPlayerSource:o,hostedChannel:{id:a,login:o,displayName:o,profileImageURL:null}}),this.fetchPubsubHostedChannel(o)):this.setState({videoPlayerSource:t,hostedChannel:null})}},t.prototype.fetchPubsubHostedChannel=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,a;return i.__generator(this,function(i){switch(i.label){case 0:this.nextHostTarget=e,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.q.apollo.client.query({query:O,variables:{hostedChannelLogin:e}})];case 2:return(t=i.sent()).data.user&&this.nextHostTarget===e&&(n=t.data.user,this.setState({hostedChannel:{id:n.id||"",login:n.login||"",displayName:n.displayName||"",profileImageURL:n.profileImageURL}})),[3,4];case 3:return a=i.sent(),this.logger.error(a,"failed to fetch hosted channel data",{hostedChannelLogin:e}),[3,4];case 4:return[2]}})})},t.prototype.handleViewCount=function(e){e.viewers!==this.state.viewerCount&&this.setState({live:!0,viewerCount:e.viewers}),this.clearResetOfflineTimer(),this.resetOfflineTimer=setTimeout(this.onResetOffline,6e4)},t.prototype.handleStreamDown=function(){r.p.track(u.SpadeEventType.ChannelOffline,{offline_type:"stream_down_pubsub",channel:this.state.channel&&this.state.channel.login}),this.setState({live:!1})},t.prototype.handleBroadcastSettingsUpdate=function(e){if(this.state.channel){var t=this.state.channel;Object(c.f)({fragment:D,fragmentName:"channel",id:Object(l.a)(t),variables:{includeChanlets:!Object(C.a)()},mutator:function(t){var n=i.__assign({},t);if(null!==e.status){var a=null;e.game&&e.game_id&&(a={__typename:"Game",name:e.game,id:e.game_id,boxArtURL:k(e.game,{width:83,height:113})}),n.stream&&(n.stream.title=e.status,n.stream.game=a),n.lastBroadcast&&(n.lastBroadcast.title=e.status,n.lastBroadcast.game=a)}return n}})}},t.prototype.clearResetOfflineTimer=function(){this.resetOfflineTimer&&(clearTimeout(this.resetOfflineTimer),this.resetOfflineTimer=void 0)},t}(a.Component)},ttMT:function(e,t,n){"use strict";var i,a=n("/MKj"),r=n("kRBY"),o=n("mrSG"),s=n("q1tI"),l=n("/7QA"),c=n("sLlB"),d=n("9C/b"),u=n("vSJR"),m=n("eJ65"),p=n("+GjP"),h=n("vRsq"),g=n("dEDE"),f=n("hnjF"),v=n("7uM4"),b=n("sUnt"),k=n("wp5a"),C=n("ygYM"),y=n("i4Ys");!function(e){e[e.FilterText=0]="FilterText"}(i||(i={}));var S,E=h.b.Week,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filterOptions=[{label:Object(l.d)("Trending","TopClipsTimeFilter"),filter:h.b.Trending},{label:Object(l.d)("24h","TopClipsTimeFilter"),filter:h.b.Day},{label:Object(l.d)("7d","TopClipsTimeFilter"),filter:h.b.Week},{label:Object(l.d)("30d","TopClipsTimeFilter"),filter:h.b.Month},{label:Object(l.d)("all","TopClipsTimeFilter"),filter:h.b.All}],t.renderFilterText=function(e){return e.filter===h.b.Trending?s.createElement("span",{"data-test-selector":i.FilterText},e.label):s.createElement(b.a,{display:f.d.Flex},Object(l.d)("Top","TopClipsTimeFilter"),s.createElement(b.a,{margin:{left:.5}},s.createElement(k.a,{"data-test-selector":i.FilterText,type:k.b.Brand,label:e.label})))},t.renderBalloonOption=function(e){var n,i=((n={})[h.a]=e.filter,n),a=Object(p.d)(t.props.location,i),r=e.selected?s.createElement(b.a,{attachRight:!0,position:f.j.Absolute,margin:{right:1}},s.createElement(v.a,{asset:v.b.Check,height:18,width:18})):null;return s.createElement(y.a,{"data-a-target":"time-filter-option-"+e.filter,key:e.filter,linkTo:a,selected:!t.props.showTagExperimentStyles&&e.selected},s.createElement(b.a,{display:f.d.Flex,padding:{x:1,y:.5}},t.renderFilterText(e),t.props.showTagExperimentStyles&&r))},t}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.ensureFilterPresent()},t.prototype.componentWillUpdate=function(){this.ensureFilterPresent()},t.prototype.render=function(){var e=this.filterOptions,t=Object(h.v)(this.props.location.search);t||(t=E),e.forEach(function(e){e.selected=e.filter===t});var n=e.find(function(e){return!!e.selected})||e[0];return this.props.showTagExperimentStyles?s.createElement(u.a,{buttonLabel:this.renderFilterText(n),hideDropdownOnInsideClick:!0},e.map(this.renderBalloonOption)):s.createElement(b.a,{className:"top-clips-time-filter"},s.createElement(m.a,{hideBalloonOnInsideClick:!0},s.createElement(g.a,{dropdown:!0,type:g.d.Hollow,"data-a-target":"time-filter-selection"},this.renderFilterText(n)),s.createElement(C.a,{direction:C.b.BottomLeft,noTail:!0},e.map(this.renderBalloonOption))))},t.prototype.ensureFilterPresent=function(){var e;if(!Object(h.v)(this.props.location.search)){var t=((e={})[h.a]=E,e),n=Object(p.d)(this.props.location,t);this.props.history.replace(n)}},t}(s.Component),w=Object(d.a)(N);(S||(S={})).ManageMyClipsButton="manage-my-clips-button";var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return s.createElement(b.a,{alignItems:f.b.End,display:f.d.Flex,flexDirection:f.e.Row,fullWidth:!0,justifyContent:f.h.Between},s.createElement(b.a,{alignItems:f.b.End,display:f.d.Flex,flexDirection:f.e.Row},this.renderLanguageFilter(),s.createElement(w,{showTagExperimentStyles:this.props.showTagExperimentStyles})),s.createElement(b.a,{padding:{y:this.props.showTagExperimentStyles?.5:0}},this.renderManageMyClips()))},t.prototype.renderManageMyClips=function(){if(this.props.user&&this.props.user.login===this.props.channelLogin)return s.createElement(g.a,{"data-a-target":"manage-clips-button","data-test-selector":S.ManageMyClipsButton,linkTo:"/manager/clips",size:this.props.showTagExperimentStyles?g.b.Large:g.b.Default,targetBlank:!0,type:g.d.Default},Object(l.d)("Manage my clips","TopClips"))},t.prototype.renderLanguageFilter=function(){return this.props.hideLanguageFilter?null:s.createElement(b.a,{margin:{right:this.props.showTagExperimentStyles?0:1}},s.createElement(c.a,null))},t}(s.Component);var D=Object(a.connect)(function(e){return{user:Object(r.e)(e)}})(_);n.d(t,"a",function(){return D})},u0cu:function(e,t,n){},uIkQ:function(e,t,n){"use strict";var i=n("b5C3"),a=n("fQWD"),r=n("ZEQw"),o=(n("yzyL"),n("mrSG")),s=function(){function e(e,t,n){this.count=0,this.globalsBySet=new Map,this.channelsBySet=new Map,this.count=e.length+(t?t.length:0),this.indexBadges(e,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(t,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:void 0!==(n=this.globalsBySet.get(e))&&n.get(t)||null},e.prototype.indexBadges=function(e,t,n){e.forEach(function(e){n&&e.clickAction===r.d&&(e=o.__assign({},e,{channelName:n}));var i=t.get(e.setID);i||(i=new Map,t.set(e.setID,i)),i.set(e.version,e)})},e}(),l=(new s([],[],""),n("2Ev9"));n.d(t,"b",function(){return i.a}),n.d(t,"a",function(){return a.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return s}),n.d(t,"c",function(){return l.b})},uYvD:function(e,t,n){},uYye:function(e,t,n){},ugtu:function(e,t,n){"use strict";n.d(t,"k",function(){return l}),n.d(t,"l",function(){return c}),n.d(t,"m",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"i",function(){return p}),n.d(t,"b",function(){return h}),n.d(t,"j",function(){return g}),n.d(t,"c",function(){return f}),n.d(t,"g",function(){return v}),n.d(t,"h",function(){return b}),n.d(t,"a",function(){return k}),n.d(t,"f",function(){return C});var i=n("q1tI"),a=n("/7QA"),r=n("GxR5"),o=n("+80q"),s=n("Jsra");function l(e){return i.createElement(o.a,{type:o.e.Strong},e)}function c(e,t){return i.createElement(s.a,{to:t,targetBlank:!0},e)}function d(e,t){return i.createElement(s.a,{onClick:t},e)}function u(){return Object(a.d)("<x:link>Forgot your username</x:link>?",{"x:link":function(e){return c(e,r.b)}},"ServerMessage")}function m(){return Object(a.d)("<x:link>Forgot your password</x:link>?",{"x:link":function(e){return c(e,r.b)}},"ServerMessage")}function p(){return Object(a.d)("Please <x:link>reset your password</x:link>.",{"x:link":function(e){return c(e,r.b)}},"ServerMessage")}function h(){return Object(a.d)("Please <x:link>contact support</x:link> for assistance.",{"x:link":function(e){return c(e,r.a)}},"ServerMessage")}function g(){return Object(a.d)("To learn more, please read <x:link>this article</x:link>.",{"x:link":function(e){return c(e,r.c)}},"ServerMessage")}function f(e){return Object(a.d)("Want to <x:click>create a new account</x:click>?",{"x:click":function(t){return d(t,e)}},"ServerMessage")}function v(e){return Object(a.d)("Want to <x:click>log in</x:click> instead?",{"x:click":function(t){return d(t,e)}},"ServerMessage")}function b(e){return Object(a.d)("If you need a Twitch account, you can <x:click>create one here</x:click>.",{"x:click":function(t){return d(t,e)}},"ServerMessage")}function k(e){return Object(a.d)("If you want to use an existing Twitch ID, you can <x:click>connect it here</x:click>.",{"x:click":function(t){return d(t,e)}},"ServerMessage")}function C(e){return e?Object(a.d)("That password was incorrect. Please try again. It looks like your caps lock was on.","ServerMessage"):Object(a.d)("That password was incorrect. Please try again.","ServerMessage")}},ulxC:function(e,t,n){},uu1w:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.Emote="emote",e.Mention="mention",e.Hashtag="hashtag",e.None="none"}(i||(i={}))},uy8m:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward"}(i||(i={}))},v8tf:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsDownloadButton"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"videoQualities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sourceURL"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"query ClipsDownloadButton($slug: ID!) {\nclip(slug: $slug) {\nid\nbroadcaster {\nid\n}\ngame {\nid\nname\n}\nvideoQualities {\nsourceURL\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},vDRX:function(e,t,n){},vGFN:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"j",function(){return v}),n.d(t,"h",function(){return b}),n.d(t,"g",function(){return k}),n.d(t,"l",function(){return C}),n.d(t,"o",function(){return y}),n.d(t,"n",function(){return S}),n.d(t,"k",function(){return E}),n.d(t,"m",function(){return N}),n.d(t,"i",function(){return w}),n.d(t,"e",function(){return _}),n.d(t,"d",function(){return D}),n.d(t,"b",function(){return O}),n.d(t,"f",function(){return I}),n.d(t,"c",function(){return T}),n.d(t,"q",function(){return L}),n.d(t,"p",function(){return F});var i,a,r,o,s,l,c=n("mrSG"),d=n("/7QA"),u=n("2xye"),m=n("mBWp");function p(e){d.q.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e.threadID,action:e.action})}function h(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,M()];case 1:return t=n.sent(),d.q.tracking.track(u.SpadeEventType.WhisperIgnoreUser,{ui_context:e.context,from_login:t&&t.login,ignored_login:e.targetUserLogin,reason:e.reason||i.Other,source:e.source}),[2]}})})}function g(e,t){return c.__awaiter(this,void 0,void 0,function(){var n;return c.__generator(this,function(i){switch(i.label){case 0:return[4,M()];case 1:return n=i.sent(),d.q.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e,action:t,login:n&&n.login}),[2]}})})}function f(e){d.q.tracking.track(u.SpadeEventType.WhisperAllThreadsMod,{action:e})}function v(){f(a.MarkAllRead)}function b(){f(a.EnableDoNotDisturb)}function k(){f(a.DisableDoNotDisturb)}function C(e,t){h({context:t,targetUserLogin:e,reason:i.Spam,source:"conversations_button"})}function y(e){g(e,s.MarkNotSpam)}function S(e){g(e,s.Archive)}function E(e){p({threadID:e,action:r.Mute})}function N(e){p({threadID:e,action:r.Unmute})}function w(e){p({threadID:e,action:r.Expand})}function _(e){p({threadID:e,action:r.Collapse})}function D(e){p({threadID:e,action:r.Close})}function O(e){p({threadID:e,action:r.Archive})}function I(e){d.q.tracking.track(u.SpadeEventType.WhisperThreadCreate,{conversation_id:e.threadID,target_login:e.targetUserlogin,source:"search_target_result",search_result_rank:e.searchResultRank})}function T(e){d.q.tracking.track(u.SpadeEventType.WhisperSearchClick,{query:e.searchQuery,source:"conversation_list",rank:e.searchResultRank,is_conversation:e.isConversation})}function M(){var e=this;return new Promise(function(t){setTimeout(function(){return c.__awaiter(e,void 0,void 0,function(){var e,n,i;return c.__generator(this,function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,d.q.apollo.client.query({query:m})];case 2:return e=a.sent(),[3,4];case 3:return n=a.sent(),d.k.error(n,"Failed to make query for current user info in WhisperSent reporting"),[3,4];case 4:return i=e&&e.data&&e.data.currentUser,t(i),[2]}})})})})}function L(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,M()];case 1:return t=n.sent(),d.q.tracking.track(u.SpadeEventType.WhisperSent,{to:e.targetUserLogin,from:t&&t.login,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID,availability:t&&t.availability,room_type:e.inChannelChat?l.Channel:l.Conversation}),[2]}})})}function F(e){return c.__awaiter(this,void 0,void 0,function(){var t;return c.__generator(this,function(n){switch(n.label){case 0:return[4,M()];case 1:return t=n.sent(),d.q.tracking.track(u.SpadeEventType.WhisperReceived,{to:t&&t.login,from:e.targetUserLogin,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID}),[2]}})})}!function(e){e.Harassment="Harassment",e.Spam="Spam",e.Other="Other"}(i||(i={})),function(e){e.MarkAllRead="mark_all_read",e.EnableDoNotDisturb="do_not_disturb_on",e.DisableDoNotDisturb="do_not_disturb_off"}(a||(a={})),function(e){e.Mute="mute",e.Unmute="unmute",e.Expand="maximize",e.Collapse="minimize",e.Close="close",e.Archive="archive",e.Open="open"}(r||(r={})),function(e){e.Dock="dock",e.SpamPropmt="dock_spam_cta"}(o||(o={})),function(e){e.Archive="archive",e.MarkNotSpam="mark_not_spam"}(s||(s={})),function(e){e.Channel="channel",e.Conversation="conversation"}(l||(l={}))},vHGB:function(e,t,n){"use strict";var i=n("mrSG"),a=n("TSYQ"),r=n("q1tI"),o=n("DMoW"),s=n("ZEQw"),l=n("xZ3y"),c=n("hnjF"),d=n("b7S+"),u=(n("E78O"),n("/7QA")),m=n("rYEI");var p=n("2xye"),h=function(e){e.badge_type=e.badge_type.toLowerCase().replace(/( |\s)/g,"_"),u.q.tracking.track(p.SpadeEventType.ChatBadgeClick,e)};n.d(t,"a",function(){return f});var g="https://www.twitch.tv/products/turbo?ref=chat_badge",f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isHovering:!1},t.onMouseOver=function(){t.setState({isHovering:!0})},t.onMouseOut=function(){t.setState({isHovering:!1})},t.onBadgeClickHandler=function(){h({badge_type:t.props.badge&&t.props.badge.title||t.props.schemaBadge&&t.props.schemaBadge.title||"",badge_url_target:t.targetURL})},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.schemaBadge||this.props.badge,t=e&&function(e,t){if(!t)return e.title;if("subscriber"===e.setID){var n=Number(e.version)||0,i=Number(t)||0;if(i>0)return 0===n?Object(u.d)("{tenure}-Month Subscriber",{tenure:String(i)},"DynamicBadgeTitles"):Object(u.d)("{tenure}-Month Subscriber ({title} Badge)",{tenure:String(i),title:Object(m.a)(n)},"DynamicBadgeTitles")}return e.title}(e,this.props.dynamicData)||"",n=this.props.schemaBadge?this.props.schemaBadge.version:this.props.badge&&this.props.badge.version||"",i=this.props.schemaBadge?this.props.schemaBadge.setID:this.props.badge&&this.props.badge.setID||"",o=this.props.schemaBadge?this.props.schemaBadge.image1x:this.props.badge&&this.props.badge.image1x||"",s=this.props.schemaBadge?this.props.schemaBadge.image2x:this.props.badge&&this.props.badge.image2x||"",p=this.props.schemaBadge?this.props.schemaBadge.image4x:this.props.badge&&this.props.badge.image4x||"",h=this.props.large,g=this.props.hideTooltip,f=a({"chat-badge":!this.props.noMargins}),v=h?s:o,b=h?s+" 1x, "+p+" 2x":o+" 1x, "+s+" 2x, "+p+" 4x";i===l.a&&(t=Object(l.c)(t,n));var k=r.createElement("img",{alt:t,"aria-label":Object(u.d)("{badgeTitle} badge",{badgeTitle:t},"Badge"),className:f,src:v,srcSet:b,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut});return this.targetURL=this.getTargetURL(),""!==this.targetURL&&(k=r.createElement("a",{href:this.targetURL,onClick:this.onBadgeClickHandler,target:"_blank",rel:"noopener noreferrer","data-a-target":"chat-badge"},k)),!g&&this.state.isHovering?r.createElement(d.a,{align:d.b.Left,"data-a-target":"chat-badge",display:c.d.Inline,key:o,label:t,offsetY:"0.9rem"},k):k},t.prototype.getTargetURL=function(){if(this.props.badge){if(this.props.badge.setID===l.a)return"";switch(this.props.badge.clickAction){case s.f:return this.props.badge.clickURL;case s.d:return this.props.badge.channelName?this.getSubscriberLink(this.props.badge.channelName):"";case s.e:return g;default:return""}}else if(this.props.schemaBadge){if(this.props.schemaBadge.setID===l.a)return"";switch(this.props.schemaBadge.clickAction){case s.f:case o.d.VISIT_URL:return this.props.schemaBadge.clickURL||"";case s.d:case o.d.SUBSCRIBE:return this.props.schemaBadge.channelName?this.getSubscriberLink(this.props.schemaBadge.channelName):"";case s.e:case o.d.GET_TURBO:return g;default:return""}}return""},t.prototype.getSubscriberLink=function(e){return"https://www.twitch.tv/"+e+"/subscribe?ref=in_chat_subscriber_link"},t}(r.Component)},vKai:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/MKj"),o=n("fvjX"),s=n("/7QA"),l=n("gcd7"),c=n("WytW"),d=n("NNSq"),u=n("CzFK"),m=n("TOso"),p=n("NMMG"),h=n("l1Uh"),g=n("PrJw"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleWhisperCommand=function(e){var n=Object(c.n)("/w "+e);if(!n||!n.recipientLogin||!n.body)return{preserveInput:!0,deferred:Promise.resolve({notice:Object(s.d)('Usage: "/w [login] [message]"',"WhisperCommandHandler")})};var i=n.recipientLogin,a=n.body;return t.props.isEmbedded||t.props.isPopout?{deferred:Promise.resolve({notice:Object(s.d)("Please use the whisper window for whispers.","WhisperCommandHandler")})}:i.toLowerCase()===t.props.userLogin?{deferred:Promise.resolve({notice:Object(s.d)("You cannot whisper to yourself.","WhisperCommandHandler")})}:t.props.userID?t.initiateWhisper(i,a):void 0},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(l.a,{channelLogin:this.props.channelLogin,command:"w",handler:this.handleWhisperCommand})},t.prototype.initiateWhisper=function(e,t){var n=this;return{deferred:new Promise(function(a,r){return i.__awaiter(n,void 0,void 0,function(){var n,o,l,c;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(d.a)(e)];case 1:return n=i.sent(),[3,3];case 2:return o=i.sent(),s.k.warn(o,"Failed to fetch user targeted by whisper command.",{recipientLogin:e}),[2,r(o)];case 3:return n?[3,4]:[2,a({notice:Object(s.d)("No user matching that login.","WhisperCommandHandler")})];case 4:l=Object(p.a)(this.props.userID,n),i.label=5;case 5:return i.trys.push([5,7,,8]),Object(g.m)({threadID:l,targetUserLogin:e,inChannelChat:!0}),[4,Object(m.b)({currentUserID:this.props.userID,emotes:this.props.emoteMap||{},message:t,recipientUserID:n})];case 6:return i.sent(),[3,8];case 7:return c=i.sent(),s.k.error(c,"Failed to send whisper using whisper command.",{currentUserID:this.props.userID,recipientUserID:n}),[2,a({notice:Object(s.d)("Unable to send Whisper at this moment.","WhisperCommandHandler")})];case 8:return this.props.openThread(l),[2,a({})]}})})})}},t}(a.Component);var v=Object(r.connect)(null,function(e){return Object(o.bindActionCreators)({openThread:function(e){return Object(u.l)({threadID:e,collapsed:!0},Object(h.a)())}},e)})(f);n.d(t,"a",function(){return v})},"vLL+":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("q1tI"),a=n("/7QA"),r=n("68Fl"),o=n("7uM4"),s=n("hnjF"),l=n("b7S+"),c=n("X2PJ"),d=n("Ws8v"),u=(n("L6L7"),function(e){var t=e.onBanUser,n=o.b.Ban,u=Object(a.d)("Ban {login}",{login:e.senderLogin},"ModerationIcons"),m="chat-ban-button",p=null,h=e.renderNewVersion?s.d.Flex:s.d.Inline,g=e.renderNewVersion?l.b.Center:l.b.Left,f=e.renderNewVersion?l.c.Bottom:l.c.Top,v=e.renderNewVersion?c.c.Link:c.c.Alt2,b=e.renderNewVersion?{right:.5}:{right:0};return e.isMessageBanned&&(t=e.onUnbanUser,n=o.b.FollowCheck,u=Object(a.d)("Unban {login}",{login:e.senderLogin},"ModerationIcons"),m="chat-unban-button"),!e.isMessageDeleted&&e.canDelete&&(p=i.createElement(r.a,{name:"single_message_delete"},i.createElement(d.a,{display:s.d.InlineFlex,margin:b,verticalAlign:s.l.Bottom},i.createElement(l.a,{align:g,direction:f,label:Object(a.d)("Delete message","ModerationIcons")},i.createElement("button",{className:"mod-icon",onClick:e.onDelete,"data-test-selector":"chat-delete-button"},i.createElement(o.a,{width:16,height:16,type:o.c.Inherit,asset:o.b.Trash})))))),i.createElement(d.a,{color:v,display:h,margin:{right:.5}},i.createElement(d.a,{display:s.d.InlineFlex,margin:b,verticalAlign:s.l.Bottom},i.createElement(l.a,{align:g,direction:f,label:u},i.createElement("button",{className:"mod-icon",onClick:t,"data-test-selector":m},i.createElement(o.a,{width:16,height:16,type:o.c.Inherit,asset:n})))),i.createElement(d.a,{display:s.d.InlineFlex,margin:b,verticalAlign:s.l.Bottom},i.createElement(l.a,{align:g,direction:f,label:Object(a.d)("Timeout {login}",{login:e.senderLogin},"ModerationIcons")},i.createElement("button",{className:"mod-icon",onClick:e.onTimeoutUser,"data-test-selector":"chat-timeout-button"},i.createElement(o.a,{width:16,height:16,type:o.c.Inherit,asset:o.b.Timeout})))),p)})},vSJR:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("u5aL"),s=n("N0BP"),l=n("Ws8v"),c=n("hnjF"),d=n("dEDE"),u=n("X2PJ");!function(e){e.DropdownInsideClickDetector="dropdown-inside-click-detector",e.DropdownWrapper="dropdown-wrapper"}(i||(i={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isOpen:!!t.props.openByDefault},t.handleOnClickOut=function(){t.hideDropdown()},t.handleButtonClick=function(){t.setState(function(e){return{isOpen:!e.isOpen,hasInteracted:!0}},function(){t.props.onToggle&&t.props.onToggle(!t.state.isOpen)})},t.hideDropdown=function(){t.setState({isOpen:!1},function(){t.props.onToggle&&t.props.onToggle(!0)})},t.handleInsideDropdownClick=function(){t.hideDropdown()},t}return a.__extends(t,e),t.prototype.render=function(){var e=this.props.children;return this.props.hideDropdownOnInsideClick&&(e=r.createElement("div",{"data-test-selector":i.DropdownInsideClickDetector,onClick:this.handleInsideDropdownClick},e)),r.createElement(o.a,{onClickOut:this.handleOnClickOut},r.createElement(l.a,a.__assign({background:this.state.isOpen?u.a.Base:void 0,borderRadius:u.b.Large,className:"inline-dropdown",elevation:this.state.isOpen?3:void 0,padding:.5,position:c.j.Relative},Object(s.a)(this.props)),r.createElement("div",{className:"inline-dropdown__button-wrapper"},r.createElement(d.a,{blurAfterClick:!0,dropdown:!0,onClick:this.handleButtonClick,size:d.b.Large,type:d.d.Hollow,"data-a-target":"inline-dropdown-button"},this.props.buttonLabel)),r.createElement(l.a,{attachLeft:!0,background:u.a.Base,borderRadius:{bottomLeft:u.b.Large,bottomRight:u.b.Large},"data-test-selector":i.DropdownWrapper,display:this.state.isOpen?c.d.Block:c.d.Hide,elevation:3,fullWidth:!0,padding:{y:1},position:c.j.Absolute,zIndex:c.n.Above},e)))},t.prototype.toggleDropdown=function(e){void 0===e&&(e=!this.state.isOpen),this.setState({isOpen:e})},t}(r.Component);n.d(t,"a",function(){return m})},vSeP:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n("XIZb"),a=Object(i.a)("ActiveChatters"),r=a.withChatServiceProvider,o=a.withContext,s=r,l=o(function(e){return{activeChattersAPI:e.serviceAPI,setActiveChattersAPI:e.setServiceAPI}})},vUXZ:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Clips_DeleteClips"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteClipsInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteClips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clips"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:106}};n.loc.source={body:"mutation Clips_DeleteClips($input: DeleteClipsInput!) {\ndeleteClips(input: $input) {\nclips {\nid\nslug\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},vVeY:function(e,t,n){"use strict";function i(e,t){return"https://www.twitch.tv"+a(e,t)}function a(e,t){return"/"+t+"/clip/"+e}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},vhpE:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return g});var i,a=n("mrSG"),r=n("q1tI"),o=n("wbMx"),s=n("vVeY"),l=n("+GjP"),c=n("2xye"),d=n("MLDe"),u=n("4L7N"),m=n("hnjF"),p=n("sUnt"),h=[{type:o.b.Twitter,params:{tt_medium:"twtr"}},{type:o.b.Facebook,params:{tt_medium:"fb"}},{type:o.b.Reddit,params:{tt_medium:"redt"}},{type:o.b.Copy}];!function(e){e.MainContainer="main-container",e.DownloadButtonContainer="download-button-container",e.ShareButtonTwitter="share-button-twitter",e.ShareButtonFacebook="share-button-facebook",e.ShareButtonReddit="share-button-reddit",e.ShareButtonCopy="share-button-copy"}(i||(i={}));var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e={margin:{right:1}},t={};return this.props.asBalloon&&(t={justifyContent:m.h.Between},e={}),r.createElement(p.a,a.__assign({className:"clips-social-share",display:m.d.Flex,flexWrap:m.f.NoWrap},t,{"data-test-selector":i.MainContainer}),r.createElement(p.a,a.__assign({display:m.d.InlineBlock},e,{"data-test-selector":i.DownloadButtonContainer}),r.createElement(u.a,{broadcasterLogin:this.props.clip.broadcaster&&this.props.clip.broadcaster.login||"",broadcasterId:this.props.clip.broadcaster&&this.props.clip.broadcaster.id||"",slug:this.props.clip.slug,pageType:this.props.pageType})),this.renderSocialButton(e,i.ShareButtonTwitter,o.b.Twitter,{tt_medium:"twtr"}),this.renderSocialButton(e,i.ShareButtonFacebook,o.b.Facebook,{tt_medium:"fb"}),this.renderSocialButton(e,i.ShareButtonReddit,o.b.Reddit,{tt_medium:"redt"}),this.renderSocialButton(e,i.ShareButtonCopy,o.b.Copy))},t.prototype.renderSocialButton=function(e,t,n,i){var u=Object(l.e)(this.props.clip.url,i);return this.props.pageType===c.PageviewLocation.ClipsWatchPage&&this.props.clip.broadcaster&&this.props.clip.broadcaster.login&&(u=Object(l.e)(Object(s.a)(this.props.clip.slug,this.props.clip.broadcaster.login),i)),r.createElement(p.a,a.__assign({key:n},e,{"data-test-selector":t}),r.createElement(o.a,{key:n,type:n,text:this.props.clip.title,url:u,onShareClick:Object(d.b)(this.props.clip.id,this.props.clip.game&&this.props.clip.game.name,this.props.clip.broadcaster&&this.props.clip.broadcaster.id,this.props.clip.broadcaster&&this.props.clip.broadcaster.login,this.props.pageType)}))},t}(r.Component)},vlTn:function(e,t,n){"use strict";var i=n("q1tI"),a=n("sUnt"),r=n("hnjF"),o=n("PL8s"),s=function(){return i.createElement(a.a,{display:r.d.Flex,margin:{bottom:.5}},i.createElement(a.a,{margin:{right:.5}},i.createElement(o.a,{height:20,width:70})))};n.d(t,"a",function(){return s})},vtET:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"channelCollection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelVideo"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channel"},directives:[]}]}}]}}],loc:{start:0,end:269}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-video.gql"\n#import "twilight/features/channel/queries/channel.gql"\nfragment channelCollection on Collection {\nid\nitems(first: 1) {\ntotalCount\nedges {\nnode {\n... on Video {\n...channelVideo\n}\n}\n}\n}\nowner {\n...channel\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("RTtf").definitions)),i.definitions=i.definitions.concat(r(n("BbLt").definitions)),e.exports=i},w1PT:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("/7QA"),a=n("ZS2+"),r=n("SDEh"),o=n("aCAx"),s=n("8EUQ"),l="core.ui.CHECKOUT_SHOWN";function c(e){if(Object(r.b)()){try{s.a.clearSubscriptionCheckoutKeys(),function(e){if(!e.productName)return void i.k.warn("No productName provided");var t=new URL("https://www.twitch.tv/products/"+e.productName);e.recipientLogin?t.searchParams.append("recipient",e.recipientLogin):e.mysteryGiftCount&&t.searchParams.append("gift_count",e.mysteryGiftCount.toString());e.isAnonymous&&t.searchParams.append("is_anonymous",e.isAnonymous.toString());e.isOneTimePurchase&&t.searchParams.append("is_one_time_purchase",e.isOneTimePurchase.toString());window.open(t.toString(),"_blank")}(e)}catch(e){i.k.error(e,"Failed to open subscription checkout externally")}return function(e){e({type:l})}}return function(t){t(Object(o.d)(a.a,{component:"CheckoutModal",loader:function(){return Promise.all([n.e(0),n.e(781)]).then(n.bind(null,"KJv/"))},componentProps:e}))}}},w4P5:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelBadgeSets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"channel"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}}]}}]}}],loc:{start:0,end:209}};i.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\nquery ChannelBadgeSets($channelLogin: String!) {\nbadges {\n...badge\n}\nchannel: user(login: $channelLogin) {\nid\nlogin\nbroadcastBadges {\n...badge\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};i.definitions=i.definitions.concat(n("IKE4").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})),e.exports=i},wC0O:function(e,t,n){},wR0s:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommunityPoints_Icon"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"community"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"communityPointsSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:222}};n.loc.source={body:"query CommunityPoints_Icon($channelLogin: String!) {\ncommunity: user(login:$channelLogin) {\nid\nchannel {\nid\ncommunityPointsSettings {\n# imageURL isn't stubbed yet just query enabled for now for skelington\nisEnabled\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},wbMx:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return h});var i,a=n("mrSG"),r=n("q1tI"),o=n("/7QA"),s=n("Jxh/"),l=n("r62z"),c=n("vCsY"),d=n("sUnt"),u=n("hnjF"),m=n("7uM4"),p=n("b7S+");n("jeZI");!function(e){e[e.Twitter=0]="Twitter",e[e.Reddit=1]="Reddit",e[e.VKontakte=2]="VKontakte",e[e.Facebook=3]="Facebook",e[e.Copy=4]="Copy",e[e.CopyInput=5]="CopyInput",e[e.Download=6]="Download"}(i||(i={}));var h=function(e){function t(t){var n=e.call(this,t)||this;return n.renderLink=function(){var e="social-button__link "+n.addSocialClassModifier("social-button__link");return n.props.type===i.Download?r.createElement("a",a.__assign({href:n.props.url,target:"_blank",rel:"noopener noreferrer",className:e,onClick:n.onShareClickHandler},Object(c.a)(n.props),{download:n.props.text}),n.renderIcon()):n.isLink()?r.createElement("a",a.__assign({href:n.getLinkTarget(),target:"_blank",rel:"noopener noreferrer",className:e,onClick:n.onShareClickHandler},Object(c.a)(n.props)),n.renderIcon()):r.createElement("button",a.__assign({onClick:n.copyPageUrl,onMouseLeave:n.clearIsCopiedStatus,className:e},Object(c.a)(n.props)),n.renderIcon())},n.onShareClickHandler=function(){n.props.onShareClick&&n.props.onShareClick(n.props.type)},n.clearIsCopiedStatus=function(){n.setState({isCopied:!1})},n.getUrl=function(){return n.props.url||window.location.href},n.copyPageUrl=function(e){e&&e.preventDefault(),n.props.onShareClick&&n.props.onShareClick(n.props.type),Object(s.a)(n.getUrl()),n.setState({isCopied:!0})},n.renderIcon=function(){var e=n.getAssetFromType();return r.createElement(d.a,{className:"social-button__icon "+n.addSocialClassModifier("social-button__icon"),display:u.d.Flex,alignItems:u.b.Center,justifyContent:u.h.Center},r.createElement(m.a,{asset:e}))},n.isLink=function(){return n.props.type!==i.Copy},n.getTooltipFromType=function(){switch(n.props.type){case i.Twitter:return"Twitter";case i.Reddit:return"Reddit";case i.Facebook:return"Facebook";case i.VKontakte:return"VKontakte";case i.Download:return Object(o.d)("Download","SocialButton");case i.Copy:return n.state.isCopied?Object(o.d)("Copied","SocialButton"):Object(o.d)("Copy to clipboard","SocialButton");default:return""}},n.getAssetFromType=function(){switch(n.props.type){case i.Twitter:return m.b.Twitter;case i.Facebook:return m.b.Facebook;case i.VKontakte:return m.b.VKontakte;case i.Reddit:return m.b.Reddit;case i.Download:return m.b.Download;case i.Copy:default:return m.b.Copy}},n.addSocialClassModifier=function(e){switch(n.props.type){case i.Twitter:return e+"--twitter";case i.Reddit:return e+"--reddit";case i.Facebook:return e+"--facebook";case i.VKontakte:return e+"--vkontakte";case i.Download:return e+"--download";case i.Copy:return e+"--copy";default:return""}},n.getLinkTarget=function(){var e=n.props,t=e.text,a=e.type,r=n.getUrl(),o=t||"";switch(a){case i.Reddit:return Object(l.b)(r,o);case i.VKontakte:return Object(l.d)(r);case i.Facebook:return Object(l.a)(r);case i.Twitter:return Object(l.c)(r,o);default:return""}},n.state={isCopied:!1},n}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(d.a,{className:"social-button"},r.createElement(p.a,{label:this.getTooltipFromType(),direction:p.c.Bottom},this.renderLink()))},t}(r.Component)},wqI2:function(e,t,n){},wtKP:function(e,t,n){},"x0+1":function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("/7QA"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderBody=function(){return t.state.alwaysShowMessage?t.props.messageBody:a.createElement("span",{key:"deleted",className:"chat-line__message--deleted"},a.createElement("a",{href:"",onClick:t.alwaysShowMessage},"<"+Object(r.d)("click to show","MessageDeletedLine")+">"))},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t}return i.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.moderatorLogin,n=e.targetIsCurrentUser,i=this.props.targetLogin;return n?Object(r.d)("A moderator deleted your message: {body}",{body:this.renderBody()},"MessageDeletedLine"):t?Object(r.d)("{moderatorLogin} deleted {targetLogin}'s message: {body}",{moderatorLogin:t,targetLogin:i,body:this.renderBody()},"MessageDeletedLine"):Object(r.d)("A moderator deleted {targetLogin}'s message: {body}",{targetLogin:i,body:this.renderBody()},"MessageDeletedLine")},t}(a.Component);n.d(t,"a",function(){return o})},x0gr:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return u});var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("r2Xj"),s=n("oi4T"),l=function(e){a.p.track(r.SpadeEventType.ChatSettingsOpened,Object(s.b)(e))},c=function(e){var t=i.__assign({},Object(s.b)(e),{setting_name:e.settingName,new_value:e.newValue.toString()});a.p.track(r.SpadeEventType.ChatSettingsChanged,t)},d=function(e){var t=i.__assign({},Object(s.b)(e),{setting_name:e.settingName,new_value:e.newValue.toString().toLowerCase(),old_value:e.oldValue&&e.oldValue.toLowerCase(),channel_id:e.channelID});a.p.track(r.SpadeEventType.ChatSettingsChanged,t)},u=function(e){var t=i.__assign({},Object(s.b)(e),{setting_name:o.a.FollowerDuration,new_value:e.newValue.toString(),follower_mode_on:e.followerModeOn});a.p.track(r.SpadeEventType.ChatSettingsChanged,t)}},xDdc:function(e,t,n){},xM4F:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndCommentCreatorAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentCreator"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},{kind:"Variable",name:{kind:"Name",value:"commentCreator"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:245}};n.loc.source={body:"query VideoChatChannelAndCommentCreatorAndVideoTrackingContext($videoCreatorID: ID! $commentCreator: ID! $videoID: ID) {\nusers(ids: [$videoCreatorID $commentCreator]) {\nid\nlogin\n}\nvideo(id: $videoID) {\nid\nbroadcastType\ntitle\ngame {\nid\nname\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},xQnr:function(e,t,n){"use strict";var i=n("8qOS");n.d(t,"a",function(){return i.a})},xTLu:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"bitsLeaderboardEdgeNode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsLeaderboardItem"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entryKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]}]}}],loc:{start:0,end:82}};n.loc.source={body:"fragment bitsLeaderboardEdgeNode on BitsLeaderboardItem {\nid\nentryKey\nrank\nscore\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},xXlL:function(e,t,n){"use strict";function i(e){return{id:""+e.id,start:e.start,end:e.end}}function a(e){return{__typename:"WhisperMessageEdge",cursor:""+e.data_object.id,node:{__typename:"WhisperMessage",id:e.data_object.message_id,nonce:e.data_object.nonce,sentAt:new Date(1e3*e.data_object.sent_ts).toISOString(),editedAt:null,deletedAt:null,content:{__typename:"MessageBody",content:e.data_object.body,emotes:e.data_object.tags.emotes.map(function(e){return o(i(e))})},from:{__typename:"User",id:""+e.data_object.from_id}}}}function r(e){return e.map(function(e){return o(i(e))})}function o(e){return{from:e.start,to:e.end,emoteID:e.id,id:e.id+";"+e.start+";"+e.end,setID:"0",__typename:"EmbeddedEmote"}}n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o})},xZ3y:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s});var i=n("/7QA"),a="bits",r="cheer";function o(e,t){return e&&e.setID===a&&e.title&&e.title!==r+" "+e.version?s(e.title,e.version):Object(i.g)(t,{maximumFractionDigits:2})}function s(e,t){if(e.endsWith(t)){var n=parseInt(t,10);if(!isNaN(n))return""+e.substring(0,e.length-t.length)+Object(i.g)(n,{maximumFractionDigits:2})}return e}},xyN1:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelRoot_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slugID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeChanlets"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelCurrentUser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slugID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"channelClip"},directives:[]}]}}]}}],loc:{start:0,end:276}};i.loc.source={body:'#import "twilight/features/channel/queries/channel-current-user.gql"\n#import "twilight/features/channel/queries/channel-clip.gql"\nquery ChannelRoot_Clip(\n$slugID: ID!\n$includeChanlets: Boolean!\n) {\ncurrentUser {\n...channelCurrentUser\n}\nclip(slug: $slugID) {\n...channelClip\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("NJiF").definitions)),i.definitions=i.definitions.concat(r(n("oc+d").definitions)),e.exports=i},xzy9:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("yR8l"),d=n("geRD"),u=n("DMoW"),m=n("kRBY"),p=n("1rIY"),h=n("BR/5"),g=n("FQLb"),f="deletedMessageDisplaySetting",v=(i=Object(p.a)("DeletedMessageDisplaySettingContext",{setValue:function(){return null},value:void 0,isShowingDeletedMessageDisplaySettings:!1,hideDeletedMessageDisplaySettings:function(){return null},showDeletedMessageDisplaySettings:function(){return null},hasSetSetting:function(){return!1}})).InnerProvider,b=i.withContext,k=function(e){function t(t){var n=e.call(this,t)||this;return n.hasSetSetting=function(){var e=n.hasData(n.props);return!(!e||null===e.deletedMessageDisplaySetting)||null!==l.n.get(f,null)},n.setValue=function(e){if(n.setState({localOverride:e}),l.n.set(f,e),n.props.isLoggedIn){var t=a.__assign({},Object(d.a)({deletedMessageDisplaySetting:e}),{optimisticResponse:{setDeletedMessageDisplaySetting:{__typename:"SetDeletedMessageDisplaySettingPayload",deletedMessageDisplaySetting:e}},update:function(t){var n;try{n=t.readQuery({query:g})}catch(e){return}n&&n.currentUser&&n.currentUser.chatUISettings&&(n.currentUser.chatUISettings.deletedMessageDisplaySetting=e,t.writeQuery({query:g,data:n}))}});n.props.setDeletedMessageDisplaySetting(t)}},n.hideDeletedMessageDisplaySettings=function(){n.setState({isShowingDeletedMessageDisplaySettings:!1})},n.showDeletedMessageDisplaySettings=function(){n.setState({isShowingDeletedMessageDisplaySettings:!0})},n.state={isShowingDeletedMessageDisplaySettings:!1},n}return a.__extends(t,e),t.prototype.render=function(){return r.createElement(v,{value:{setValue:this.setValue,value:this.value,isShowingDeletedMessageDisplaySettings:this.state.isShowingDeletedMessageDisplaySettings,hideDeletedMessageDisplaySettings:this.hideDeletedMessageDisplaySettings,showDeletedMessageDisplaySettings:this.showDeletedMessageDisplaySettings,hasSetSetting:this.hasSetSetting}},this.props.children)},t.prototype.componentDidUpdate=function(e){!this.hasData(this.props)||this.hasData(e)||(this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting?l.n.set(f,this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting):l.n.get(f,null)&&this.value&&this.setValue(this.value))},t.prototype.hasData=function(e){return e.data&&!e.data.error&&!e.data.loading&&e.data.currentUser&&e.data.currentUser.chatUISettings},t.prototype.defaultValue=function(e){return this.props.sessionUser&&e&&this.props.sessionUser.id===e?u.O.BRIEF:u.O.DETAILED},Object.defineProperty(t.prototype,"value",{get:function(){if(l.b.get("deleted_message_display",!1))return void 0!==this.state.localOverride?this.state.localOverride:this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.chatUISettings&&null!==this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting?this.props.data.currentUser.chatUISettings.deletedMessageDisplaySetting:l.n.get(f,null)||this.defaultValue(this.props.channelID)},enumerable:!0,configurable:!0}),t}(r.Component);var C=Object(s.compose)(Object(o.connect)(function(e){return{isLoggedIn:Object(m.f)(e),sessionUser:Object(m.e)(e)}}),Object(c.a)(g,{skip:function(e){return!e.isLoggedIn}}),Object(c.a)(h,{name:"setDeletedMessageDisplaySetting"}))(k);n.d(t,"a",function(){return"deleted_message_display"}),n.d(t,!1,function(){return v}),n.d(t,"c",function(){return b}),n.d(t,!1,function(){return k}),n.d(t,"b",function(){return C})},y2dA:function(e,t,n){},ySk3:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("oi4T"),s=function(e){var t=i.__assign({},Object(o.b)(e),{mentioned_user_display_name:e.mentionedUserDisplayName,user:e.userLogin});a.p.track(r.SpadeEventType.ChatMentionUsed,t)}},yWUM:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i="0h0m1s";function a(e){if(0===e)return i;if(!e||e<0)return"";var t=e,n=Math.floor(t/3600);return t%=3600,n+"h"+Math.floor(t/60)+"m"+(t%=60)+"s"}},yXtP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Chat_UpdateChatColor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateChatColorInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateChatColor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:120}};n.loc.source={body:"mutation Chat_UpdateChatColor($input: UpdateChatColorInput!){\nupdateChatColor(input: $input) {\nuser {\nid\nchatColor\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},yZCp:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("q1tI"),a=n("/7QA"),r=n("7TkE"),o=n.n(r),s=n("8SX2"),l=n("sUnt"),c=n("hnjF"),d=n("+80q"),u=n("X2PJ"),m=(n("OXQr"),function(e){if(!(e.event.messageID&&e.event.userLogin&&e.event.displayName))return null;var t=i.createElement(s.a,{contentID:e.event.messageID,login:e.event.userLogin,sourceType:e.event.sourceType},e.event.displayName),n=Object(a.d)("{gifterButton}'s Cheer shared rewards to {selectedCount} others in chat.",{gifterButton:t,selectedCount:e.event.selectedCount},"RewardGiftNoticeLine"),r=o.a;return i.createElement(l.a,{className:"reward-gift-user-notice",margin:{y:.5}},i.createElement(l.a,{display:c.d.Flex,alignItems:c.b.Center,padding:{x:1,y:.5}},i.createElement(c.g,{margin:{right:1}},i.createElement("img",{className:"reward-gift-user-notice__icon",src:r})),i.createElement(d.a,{color:u.c.Alt2},n)))})},ya7N:function(e,t,n){},ybym:function(e,t,n){"use strict";var i,a=n("mrSG"),r=n("q1tI"),o=n("fvjX"),s=n("/7QA"),l=n("yR8l"),c=n("x7UT"),d=n("0Log"),u=n("/aPz"),m=n("GnwI"),p=n("7uM4"),h=n("U1zV"),g=n("DOvc"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(this.props.data.loading||this.props.data.error||!this.props.data.user||!this.props.data.user.stream||!this.props.data.user.stream.id)return null;var e=this.props.pubsub.messages.viewCount&&this.props.pubsub.messages.viewCount.viewers||this.props.data.user.stream.viewersCount||0;return r.createElement(h.a,{value:Object(s.f)(e),label:Object(s.d)("Watching Now","ChannelViewersCount"),icon:p.b.GlyphLive,"data-a-target":"channel-viewers-count"})},t}(r.Component),v=Object(o.compose)(Object(l.a)(g),Object(c.a)([{topic:function(e){return e.data.user&&e.data.user.id?Object(u.L)(e.data.user.id):""},skip:function(e){return e.data.loading||!e.data.user||!e.data.user.id},mapMessageTypesToProps:(i={},i[d.PubsubMessageType.ViewCount]="viewCount",i)}]),Object(m.withLatencyTracking)("ChannelViewersCount"))(f),b=function(e){return r.createElement(v,a.__assign({key:e.login},e))};n.d(t,!1,function(){return f}),n.d(t,"a",function(){return b})},ygQa:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("mrSG"),a=n("yR8l"),r=n("yXtP");function o(){var e=this;return Object(a.a)(r,{props:function(t){return{updateChatColorMutation:function(n){return i.__awaiter(e,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{color:n}}})]:[3,2];case 1:return[2,e.sent().data];case 2:throw new Error("Update chat color mutation is not ready")}})})}}}})}},yzwe:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var i,a=n("mrSG"),r=n("yR8l"),o=n("FAYk");function s(e){var t=this;return Object(r.a)(o,{props:function(n){return{unmodUserMutation:function(i){return a.__awaiter(t,void 0,void 0,function(){var t;return a.__generator(this,function(a){if(t=e(n.ownProps).channelID,n.mutate&&t)return[2,n.mutate({variables:{input:{channelID:t,targetLogin:i}}}).then(function(e){return e.data})];throw new Error("unmodUser mutation is not ready")})})}}}})}!function(e){e.ChannelNotFound="CHANNEL_NOT_FOUND",e.Forbidden="FORBIDDEN",e.UserNotFound="TARGET_NOT_FOUND",e.UserNotMod="TARGET_NOT_MOD"}(i||(i={}))},yzyL:function(e,t){},"z+dA":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_SubscribeButton_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tenure"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDNRd"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pendingSubscription"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pendingSubscription"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gift"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGift"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:616}};i.loc.source={body:'#import "twilight/pages/subscriptions-management/models/cumulative-tenure-fragment.gql"\n#import "twilight/features/subscribe-button/components/subscribe-button/pending_subscription.gql"\nquery ChannelPage_SubscribeButton_User($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nsubscriptionProducts {\nid\nemoteSetID\nname\n}\nself {\ncanPrimeSubscribe\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\n...tenure\n}\nsubscriptionBenefit {\nid\npurchasedWithPrime\ntier\nendsAt\nisDNRd\nplatform\npendingSubscription {\n...pendingSubscription\n}\ngift {\nisGift\n}\n}\n}\n}\ncurrentUser {\nid\n}\nrequestInfo {\ncountryCode\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}i.definitions=i.definitions.concat(r(n("HiyX").definitions)),i.definitions=i.definitions.concat(r(n("QHJn").definitions)),e.exports=i},zClW:function(e,t,n){"use strict";n.d(t,"c",function(){return b}),n.d(t,"a",function(){return k}),n.d(t,"b",function(){return C}),n.d(t,"i",function(){return y}),n.d(t,"d",function(){return N}),n.d(t,"f",function(){return w}),n.d(t,"e",function(){return _}),n.d(t,"g",function(){return D}),n.d(t,"h",function(){return O});var i=n("mrSG"),a=n("/7QA"),r=n("2xye"),o=n("ZuiC"),s=n("ahza"),l=n("pU2t"),c=n("ZUUl"),d=n("fI4C"),u=n("fIj0"),m=n("xM4F"),p=n("8uuy");var h=function(e){if(e.includes("FollowersOnlyError"))return function(e){return Object(a.d)("This room is in {duration} followers-only mode. Follow this channel to join the community",{duration:e},"routines-comments")}(function(e){var t=e.split(" "),n=t[t.length-1].match(/((\d+)h)?(\d+)m(\d+)s/);if(!Array.isArray(n))return"";return{600:"10 Minutes",1800:"30 Minutes",3600:"1 Hour",86400:"1 Day",604800:"1 Week",2592000:"1 Month",7776000:"3 Months"}[60*parseInt(n[2]||"0",10)*60+60*parseInt(n[3],10)+parseInt(n[4],10)]}(e));var t={CommenterBannedError:Object(a.d)("You are banned from sending messages in this channel","routines-comments"),CommentingDisabledError:Object(a.d)("Sending messages in this channel is disabled","routines-comments"),UserNotVerifiedError:Object(a.d)("Account email verification required to send a message","routines-comments"),MaxChildCommentsError:Object(a.d)("The reply limit for this message has been reached","routines-comments"),MessageLikelySpamError:Object(a.d)("Your message was blocked by the spam filter","routines-comments"),MessageContainsBannedWordsError:Object(a.d)("Your message wasn't posted due to conflicts with the channel's moderation settings","routines-comments")},n=Object.keys(t).find(function(t){return e.includes(t)});return n?t[n]:Object(a.d)("Unable to send a new message at this time","routines-comments")},g="",f=-1,v=!1,b=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){return i.__generator(this,function(n){if(v)return[2,Promise.resolve()];if(Object(s.f)(t)){if(t.offset===f)return[2,Promise.resolve()];f=t.offset}if(Object(s.d)(t)){if(t.cursor===g)return[2,Promise.resolve()];g=t.cursor}return v=!0,[2,Object(s.g)(t).then(function(n){v=!1,Object(s.f)(t)&&t.offset===f?e.dispatch(Object(o.A)(n)):e.dispatch(Object(o.z)(n))},function(t){v=!1,a.k.warn("VideoChat: unable to fetch messages",{error:t}),e.dispatch(Object(o.B)())})]})})},k=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n,r,d;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(s.b)(t)];case 1:return(n=i.sent()).requestError?(a.k.error(n.requestError,k.name),e.dispatch(Object(o.r)(h(""))),[2]):n.error?(a.k.error(new Error(n.error.error),k.name),e.dispatch(Object(o.r)(h(n.error.message))),[2]):void 0===n.body?(e.dispatch(Object(o.r)(h(""))),[2]):(r=Object(l.c)(n.body),e.dispatch(Object(o.s)(r)),e.dispatch(Object(c.b)(S,r)),setTimeout(function(){e.dispatch(Object(o.q)())},5e3),[3,3]);case 2:return d=i.sent(),a.k.error(d,k.name),e.dispatch(Object(o.r)(h(""))),[3,3];case 3:return[2]}})})},C=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(s.c)(t)];case 1:return i.sent(),e.dispatch(Object(o.t)({comment:t})),e.dispatch(Object(c.b)(E,{comment:t})),[3,3];case 2:return n=i.sent(),a.k.error(n,C.name),[3,3];case 3:return[2]}})})},y=function(e,t){return i.__awaiter(void 0,void 0,void 0,function(){var n,r;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Object(s.h)(t)];case 1:return n=i.sent(),e.dispatch(Object(o.v)(n)),[3,3];case 2:return r=i.sent(),a.k.error(r,y.name),[3,3];case 3:return[2]}})})},S=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var e,s;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:u,variables:{videoCreatorID:t.comments[0].channelId,videoID:t.comments[0].contentId}})];case 1:return e=i.sent().data,o.track(r.SpadeEventType.ChommentCreated,Object(d.f)(t,e)),[3,3];case 2:return s=i.sent(),a.k.error(s,S.name),[3,3];case 3:return[2]}})})},E=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:m,variables:{videoCreatorID:t.comment.channelId,commentCreator:t.comment.commenter,videoID:t.comment.contentId}})];case 1:return s=i.sent().data,o.track(r.SpadeEventType.ChommentDeleted,Object(d.g)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),a.k.error(l,E.name),[3,3];case 3:return[2]}})})},N=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:p,variables:{videoID:t.comment.contentId}})];case 1:return s=i.sent().data,o.track(r.SpadeEventType.ChommentUIAction,Object(d.e)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),a.k.error(l,N.name),[3,3];case 3:return[2]}})})},w=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:m,variables:{videoCreatorID:t.channelId,commentCreator:t.commenter,videoID:t.contentId}})];case 1:return s=i.sent().data,o.track(r.SpadeEventType.ChommentUIAction,Object(d.i)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),a.k.error(l,w.name),[3,3];case 3:return[2]}})})},_=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var l,c,u,m;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),l=e.getState(),c=Object(s.e)(t)?l.vodChat.comments.comments.parentComments[t.parentId].contentId:t.contentId,[4,n.query({query:p,variables:{videoID:c}})];case 1:return u=i.sent().data,o.track(r.SpadeEventType.ChommentUIAction,Object(d.h)(t,e.getState(),u)),[3,3];case 2:return m=i.sent(),a.k.error(m,_.name),[3,3];case 3:return[2]}})})},D=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:p,variables:{videoID:t.comment.contentId}})];case 1:return s=i.sent().data,o.track(r.SpadeEventType.ChommentUIAction,Object(d.j)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),a.k.error(l,D.name),[3,3];case 3:return[2]}})})},O=function(e,t,n,o){return i.__awaiter(void 0,void 0,void 0,function(){var s,l;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.query({query:u,variables:{videoCreatorID:t.channelId,videoID:t.contentId}})];case 1:return s=i.sent().data,o.track(r.SpadeEventType.ChommentUIAction,Object(d.k)(t,e.getState(),s)),[3,3];case 2:return l=i.sent(),a.k.error(l,O.name),[3,3];case 3:return[2]}})})}},zLNX:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),r=n("oJmH"),o=n("/MKj"),s=n("fvjX"),l=n("/7QA"),c=n("u5aL"),d=n("lZCe"),u=n("cw0r"),m=n("ZS2+"),p=n("yR8l"),h=n("8Ad5"),g=n("5zf8"),f=n("geRD"),v=n("oe5X"),b=n("1/iK"),k=n("f00E"),C=n("y5D0"),y=n("D7An"),S=n("DMoW"),E=n("kz7j"),N=n("kRBY"),w=n("9o5F"),_=n("tKDy"),D=n("okS7"),O=n("ry0r"),I=n("7d/q"),T=n("7uM4"),M=n("Ideu"),L=function(e){return l.q.integrations.app&&l.q.integrations.app.id===M.AppIntegrationID.Spotlight?null:a.createElement(I.a,{icon:T.b.Bits,ariaLabel:Object(l.d)("Bits","ChatInput"),type:I.c.Secondary,onClick:e.onClick,"data-a-target":"bits-button"})},F=n("uu1w"),x=n("sUnt"),j=n("+80q"),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=F.a.Hashtag,t.canBeTriggeredByTab=!1,t.getMatches=function(e){return e.startsWith("#")&&null!==t.props.hashTags.edges?t.props.hashTags.edges.filter(function(t){return t.node.id.includes(e)}).map(function(n){return{current:e,replacement:n.node.id,element:t.genearateHashtagDisplay(n.node.id)}}):null},t.genearateHashtagDisplay=function(e){return a.createElement(x.a,{padding:{right:.5},key:"hashtag:"+e},a.createElement(j.a,null,e))},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t}(a.Component),P=Object(D.e)(function(e){return e})(A),R=n("5zXJ"),U=n("XmgI"),B=n("ebRM"),V=n("RiD7"),H=n("i4un"),G=n("hO8c"),q=n("buTd"),W=n("amaQ"),z=n("tFCv"),Q=n("3sMn"),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickSettings=function(){t.props.updateChatConfigState({isSettingsOpen:!t.props.isSettingsOpen})},t}return i.__extends(t,e),t.prototype.render=function(){return a.createElement(I.a,{"data-a-target":"chat-settings",icon:T.b.Gear,ariaLabel:Object(l.d)("Chat settings","SettingsIconButton"),onClick:this.onClickSettings})},t}(a.PureComponent);var K=Object(s.compose)(Object(Q.b)(function(e){return{updateChatConfigState:function(t){return e.updateChatConfigState(t)},isSettingsOpen:e.isSettingsOpen}}))(Y),X=n("Xa2/"),$=n("+pBb"),J=n("QVaV"),Z=n("vSeP"),ee=5,te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=F.a.Mention,t.canBeTriggeredByTab=!0,t.getMatches=function(e,n){return n||e.startsWith("@")?t.getMentions(e,n):null},t.getMentions=function(e,n){if(!t.props.activeChattersAPI)return[];var i=n?e:e.substring(1);return t.props.activeChattersAPI.getActiveChatters(i,ee).map(function(i){return{current:e,replacement:(n?"":"@")+(i.displayName||i.login),element:t.renderMention(i)}})},t.renderMention=function(e){return a.createElement("span",null,Object(J.a)(e.login,e.displayName||null))},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t}(a.Component),ne=Object(s.compose)(Object(D.e)(function(e){return e}),Z.a)(te),ie=n("hnjF"),ae=n("Ws8v"),re=n("X2PJ"),oe=function(e){return a.createElement(ae.a,{background:re.a.Base,border:!0,borderRadius:re.b.Large,display:ie.d.Block,fullWidth:!0,padding:.5,elevation:1,zIndex:ie.n.Below},a.createElement(x.a,{padding:{bottom:1},display:ie.d.Flex,flexDirection:ie.e.Row,alignItems:ie.b.Start},e.icon&&a.createElement(x.a,{margin:{left:.5,y:.5,right:.5},textAlign:ie.k.Center},e.icon),a.createElement(x.a,{padding:{left:.5,top:.5}},a.createElement(j.a,{bold:!0,fontSize:re.d.Size5,color:re.c.Alt}," ",e.title," "),e.description&&a.createElement(x.a,{padding:{top:.5}},a.createElement(j.a,{color:re.c.Alt2}," ",e.description," "))),a.createElement(I.a,{ariaLabel:Object(l.d)("Close","ChatInputPrompt"),onClick:e.onClose,type:I.c.Secondary,icon:T.b.Close})),a.createElement(x.a,{position:ie.j.Relative},e.children))},se=n("jBwP"),le=n("knbN"),ce=n("2xye");var de,ue=n("dIU+"),me=n("QjI3"),pe=n("Jsra"),he=n("dEDE"),ge=n("ygYM");!function(e){e.ChatRestrictedHeader="chat-restricted-header"}(de||(de={}));var fe=function(e){function t(t){var n=e.call(this,t)||this;return n.renderBalloon=function(e,t){if(!n.props.showBalloon)return null;var i=null;return t&&(i=a.createElement(x.a,{display:ie.d.Flex,margin:{top:1}},t,a.createElement(x.a,null))),a.createElement(c.a,{onClickOut:n.handleBalloonClickOut},a.createElement(ge.a,{direction:ge.b.TopLeft,offsetY:"-0.5rem",size:ge.c.Medium,show:n.props.showBalloon,tailOffset:50},a.createElement(ae.a,{color:re.c.Base,padding:1},e,i)))},n.onRestrictionsUpdate=function(){if(n.props.chatRestrictionsAPI){var e=n.props.chatRestrictionsAPI.getRestrictions();if(e&&0!==e.length){var t=e[0],i=null;t===S.v.FOLLOWERS_ONLY&&(i=n.props.chatRestrictionsAPI.getRemainingFollowSeconds()),n.setState({reason:t,followSecondsRemaining:i})}else n.setState({reason:null})}else n.setState({reason:null})},n.handleBalloonClickOut=function(e){n.rootRef&&n.rootRef.contains(e.target)&&e.stopPropagation(),n.props.closeBalloon()},n.handleActionClick=function(){null!==n.state.reason&&function(e){var t;switch(e.restriction){case S.v.SUBSCRIBERS_ONLY:t="subscribe";break;case S.v.VERIFIED_ONLY:t="go_to_settings";break;case S.v.FOLLOWERS_ONLY:t="follow";break;default:return}var n={action_type:t,channel:e.channelLogin,channel_id:e.channelID};l.p.track(ce.SpadeEventType.ChatInputRestrictedAction,n)}({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,restriction:n.state.reason})},n.setRootRef=function(e){return n.rootRef=e},n.state={reason:null,followSecondsRemaining:null},n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.showBalloon&&this.trackImpression(),this.props.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate),this.onRestrictionsUpdate())},t.prototype.componentWillUnmount=function(){this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate)},t.prototype.componentWillReceiveProps=function(e){e.showBalloon&&!this.props.showBalloon&&this.trackImpression(),this.props.chatRestrictionsAPI!==e.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate),e.chatRestrictionsAPI&&(e.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate),this.onRestrictionsUpdate()))},t.prototype.render=function(){var e="",t=null,n=null;switch(this.state.reason){case S.v.SUBSCRIBERS_ONLY:e=Object(l.d)("Subscribers-Only Chat","ChatModeHeader"),t=Object(l.d)("Only {streamer}'s subscribers can chat right now. Subscribe and join in!",{streamer:this.props.channelDisplayName||this.props.channelLogin},"ChatModeHeader"),n=a.createElement("div",{onClick:this.handleActionClick},a.createElement(me.SubscribeButton,{balloonDirection:ge.b.TopRight,channelLogin:this.props.channelLogin,subLocation:"channel_page"}));break;case S.v.VERIFIED_ONLY:e=Object(l.d)("Verified Accounts Only Chat","ChatModeHeader"),t=Object(l.d)("Verify your account in Settings to chat!","ChatModeHeader"),n=a.createElement(he.a,{onClick:this.handleActionClick,linkTo:"/settings/security",targetBlank:!0},Object(l.d)("Go to Settings","ChatModeHeader"));break;case S.v.FOLLOWERS_ONLY:if(e=Object(l.d)("Followers-Only Chat","ChatModeHeader"),this.props.followerDurationSeconds>0&&null!==this.state.followSecondsRemaining){var i=Object(g.b)(this.props.followerDurationSeconds),r=Object(g.b)(this.state.followSecondsRemaining);t=Object(l.d)("You need to be a follower for {timeRequired} to chat, and you have {timeRemaining} left.",{timeRequired:i,timeRemaining:r},"ChatModeHeader")}else t=Object(l.d)("You need to be a follower of {streamer} to chat.",{streamer:this.props.channelDisplayName||this.props.channelLogin},"ChatModeHeader"),n=a.createElement(ue.a,{channelLogin:this.props.channelLogin,onFollow:this.handleActionClick,onUnfollow:this.handleActionClick,followUIType:ue.b.IconAndText,unfollowUIType:ue.b.IconAndText,balloonDirection:ge.b.TopRight,hideDropdownWhenFollowing:!0});break;case S.v.SLOW_MODE:default:return null}return a.createElement("div",{ref:this.setRootRef},a.createElement(ae.a,{borderTop:!0,color:re.c.Alt2,display:ie.d.Flex,fontSize:re.d.Size6,padding:{y:.5},position:ie.j.Relative,"data-test-selector":de.ChatRestrictedHeader},a.createElement(pe.a,{hoverColorInherit:!0,hoverUnderlineNone:!0,onClick:this.props.openBalloon,type:pe.b.Inherit},a.createElement(j.a,{bold:!0},e)),a.createElement(x.a,{margin:{left:.5}},a.createElement(I.a,{icon:T.b.NotificationInfo,onClick:this.props.openBalloon,type:I.c.Secondary})),this.renderBalloon(t,n)))},t.prototype.trackImpression=function(){this.state.reason&&function(e){var t;switch(e.restriction){case S.v.SUBSCRIBERS_ONLY:t="subscriber_mode";break;case S.v.VERIFIED_ONLY:t="verified_mode";break;case S.v.FOLLOWERS_ONLY:t=e.requiredDuration?"follow_mode_timer":"follow_mode";break;default:return}var n={channel:e.channelLogin,channel_id:e.channelID,impression_type:t};l.p.track(ce.SpadeEventType.ChatInputRestrictedImpression,n)}({channelID:this.props.channelID||"",channelLogin:this.props.channelLogin,restriction:this.state.reason,requiredDuration:this.props.followerDurationSeconds})},t}(a.Component);Object(s.compose)(fe);var ve,be=Object(s.compose)(Object(se.b)(function(e){return{followerDurationSeconds:60*e.followerDuration,followerMode:e.followerMode}}),le.a)(fe),ke=n("9MrB"),Ce=n("piIJ"),ye=n("PY8X"),Se=n("gTu3"),Ee=n("RcPG"),Ne=n("YXxK"),we=n("WytW"),_e=n("lNGo"),De=n("ySk3"),Oe=n("x0gr"),Ie=n("eDVu"),Te=n("0Log"),Me=n("/aPz"),Le=n("O/li"),Fe=function(e){return a.createElement(j.a,{color:re.c.Alt2},Object(l.g)(e.balance,{maximumFractionDigits:1}))},xe=n("wR0s"),je=Object(r.compose)(Object(p.a)(xe,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}))(function(e){return e.data.community&&e.data.community.channel&&e.data.community.channel.communityPointsSettings?a.createElement(ae.a,{display:ie.d.Flex,color:re.c.Link,margin:{right:.5}},a.createElement(T.a,{asset:T.b.Star,width:20,height:20})):null}),Ae=n("b7S+");!function(e){e.CommunityPointsSummary="community-points-summary"}(ve||(ve={}));var Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(){var e=t.props.data;if(e.error||!e.community||!e.community.channel||!e.community.channel.communityPointsSettings||!e.community.channel.communityPointsSettings.isEnabled)return null;var n=e.community.channel.self,i=n&&n.communityPoints&&n.communityPoints.balance||0,r=Object(l.f)(i),o=Object(l.e)("{pointBalance} community points",{pointBalance:r},"CommunityPointsSummary");return a.createElement(Ae.a,{label:o},a.createElement(re.e,{"data-test-selector":ve.CommunityPointsSummary,display:ie.d.Flex,alignItems:ie.b.Center},a.createElement(he.a,{type:he.d.Text},a.createElement(x.a,{alignItems:ie.b.Center,display:ie.d.Flex},a.createElement(je,{channelLogin:t.props.channelLogin}),a.createElement(Fe,{balance:i})))))},t}return i.__extends(t,e),t}(a.Component);var Re,Ue,Be=Object(r.compose)(Object(o.connect)(function(e){var t=Object(N.e)(e);return{currentUserID:t&&t.id}}),Object(p.a)(Le,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(Ie.a)(function(e){return{query:Le,variables:{channelLogin:e.channelLogin},topic:Object(Me.m)(""+e.currentUserID),skip:!e.data||!e.data.community||!e.currentUserID,types:[Te.PubsubMessageType.CommunityPointsEarned,Te.PubsubMessageType.CommunityPointsSpent],mutator:function(t,n){if(!(e.data.community&&e.data.community.id===t.data.channel_id&&n.community&&n.community.channel&&n.community.channel.self))return n;var i=0;switch(t.type){case Te.PubsubMessageType.CommunityPointsEarned:i=t.data.balance.balance;break;case Te.PubsubMessageType.CommunityPointsSpent:i=t.data.balance;break;default:return n}return n.community.channel.self.communityPoints?n.community.channel.self.communityPoints.balance=i:n.community.channel.self.communityPoints={__typename:"CommunityPointsProperties",balance:i},n}}}))(Pe),Ve=n("mmRu"),He=n("cpJf"),Ge=n("GzyO"),qe=n("GnwI"),We=n("Z2sP"),ze=n("EOIh"),Qe=n("FS60"),Ye=/\S/,Ke=m.a.wrap(function(){return n.e(207).then(n.bind(null,"tPnS"))},"ChatPrivateCalloutQueue",{placeholder:null});!function(e){e[e.Bits=0]="Bits",e[e.ChatRestriction=1]="ChatRestriction",e[e.Emotes=2]="Emotes",e[e.None=3]="None"}(Re||(Re={})),function(e){e.ShareBitsBadgeTier="share-bits-badge-tier",e.ThankSubGifter="thank-sub-gifter",e.ShareResub="share-resub"}(Ue||(Ue={}));var Xe=function(e){function t(t){var n=e.call(this,t)||this;return n.cancelDelayedSend=null,n.confirmDelayedSend=null,n.hasConfirmedInEmbed=!1,n.hasSeenConfirmationPrompt=!1,n.renderSlowModeProgressBar=function(){if(n.state.chatRestrictedReason===S.v.SLOW_MODE){var e=n.state.slowModeSecondsRemaining/n.props.slowModeDuration*100;return a.createElement(x.a,{position:ie.j.Absolute,attachBottom:!0,fullWidth:!0},a.createElement(We.a,{borderRadius:re.b.Small,size:We.c.Small,value:e,mask:!0}))}return null},n.setChatInputRef=function(e){return n.chatInputRef=e},n.setAutocompleteInputRef=function(e){n.autocompleteInputRef=e,n.props.privateCalloutPrompt&&n.props.privateCalloutPrompt.inputText&&n.autocompleteInputRef.setValue(n.props.privateCalloutPrompt.inputText)},n.onCheerInvalid=function(e){n.state.bitsCardError!==e&&(n.setState({bitsCardError:e}),e&&n.trackBitsCardInteraction(V.c.UserViewingCheerError,{bitsCardError:e}))},n.onSendCheerWhenSendDisabled=function(){n.trackBitsCardInteraction(V.c.SendInvalidCheerAttemptButtonDisabled,{bitsCardError:n.state.bitsCardError})},n.onAnonymousCheerToggle=function(e){n.setState({isAnonymousCheer:e})},n.onChatSettingsToggle=function(e){e||Object(Oe.c)({channelLogin:n.props.channelLogin,isHostMode:n.props.isHostMode})},n.onKeyDown=function(e){var t=e.charCode||e.keyCode;switch(n.props.onKeyDown&&t!==h.a.Enter&&n.props.onKeyDown(e),n.props.bitsSendHasError&&n.props.clearBitsSendError(),t){case h.a.Enter:return void(e.shiftKey||(e.preventDefault(),n.onMessageSend()));case h.a.Esc:return void(n.state.showCard===Re.Bits&&n.setState({showCard:Re.None}));default:return}},n.onMessageValueUpdate=function(e){n.setState({value:e})},n.onInputFocus=function(){n.props.onInputFocus&&n.props.onInputFocus(),n.state.hasInteractedOrPageload||n.setState({hasInteractedOrPageload:!0})},n.onMouseEnterInput=function(){n.state.hasInteractedOrPageload||n.setState({hasInteractedOrPageload:!0})},n.onChatCommand=function(e){n.props.onChatCommand(e),n.trackChatEvent(n.props.emotePickerSessionID)},n.confirmEmbedAction=function(e,t,i){var a=n,r=a.hasConfirmedInEmbed;if(a.hasSeenConfirmationPrompt)return r;var o=window.confirm(n.confirmationMessage(e,t,i));return n.hasSeenConfirmationPrompt=!0,n.hasConfirmedInEmbed=o,n.setState({hasSeenAndRejectedEmbedPrompt:!o}),o},n.confirmationMessage=function(e,t,n){return Object(l.d)('Hi {displayName}. You are attempting to send "{message}" in {channelLogin}\'s chat via an embedded version of Twitch Chat. Are you sure you want to do this? This setting will persist until you refresh the page',{displayName:e,message:t,channelLogin:n},"ChatInput")},n.onMessageSend=function(){return i.__awaiter(n,void 0,void 0,function(){var e,t,n,a,r,o,s,c=this;return i.__generator(this,function(i){switch(i.label){case 0:if(e=this.state.chatRestrictedReason,!(this.isTypingCommand()||this.isTypingCheer())&&null!==e)return this.setState({showCard:Re.ChatRestriction}),[2];if(!this.props.authToken)return this.handleLogin(),[2];if(!this.props.channelID)return l.k.warn("[ChatInput] Attempt to send a message before channel ID"),[2];if(!this.props.privateCalloutPrompt)return[3,6];switch(this.props.privateCalloutPrompt.sendButtonOverride){case Ue.ShareBitsBadgeTier:return[3,1];case Ue.ShareResub:return[3,2]}return[3,5];case 1:return this.shareBitsBadgeTier(),[2];case 2:return this.props.privateCalloutPrompt.callOnSubmit?[4,this.props.privateCalloutPrompt.callOnSubmit(this.state.value)]:[3,4];case 3:i.sent(),i.label=4;case 4:return[2];case 5:i.label=6;case 6:return(t=Ye.test(this.state.value))?this.state.isSendingBits?(l.k.debug("[ChatInput] Supressing chat message send. Bits spending is still in progress."),[2]):this.props.isEmbedded&&(this.props.isCurrentUserModerator||this.props.data&&this.props.data.currentUser&&this.props.data.currentUser.isPartner)&&this.props.sessionUser&&!this.confirmEmbedAction(this.props.sessionUser.displayName,this.state.value||"",this.props.channelLogin)?(l.k.debug("[ChatInput] Embed Confirmation check failed. Not sending message"),[2]):(this.resetAndUpdateRenderSentChatMessageEvent(),this.state.value.split(/\s+/).forEach(function(e){c.props.emoteMap&&c.props.emoteMap.hasOwnProperty(e)&&Object(Ge.a)(c.props.emoteMap[e])}),this.props.data&&this.props.data.currentUser?(n=Object(B.a)(this.state.messageCheers),a=Object(k.a)(),0===n.total?(this.sendRegularMessage(),this.state.messageCheers&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.ZeroBits),[2]):this.props.data.channel?this.props.data.channel.cheer?this.props.data.channel.cheer.settings?this.props.privateCalloutPrompt?(l.k.warn("[Chat Input] Bits are disabled due to a private callout prompt."),[2]):this.props.bitsConfig?(this.state.bitsCardError&&(this.onSendCheerWhenSendDisabled(),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.BitsCardDisabled)),(r=Object(B.g)({messageBits:n,balance:this.props.data.currentUser.bitsBalance||0,cheerMinimumBits:this.props.data.channel.cheer.settings.cheerMinimumBits,emoteMinimumBits:this.props.data.channel.cheer.settings.emoteMinimumBits,inputValue:this.state.value,bitsConfig:this.props.bitsConfig})).canSpend?this.props.sendCheer?(this.setState({isSendingBits:!0}),n.total>=R.q?[4,new Promise(function(e){var t=setTimeout(e,R.u.UNDO_PROMPT_DURATION),n=function(n){void 0===n&&(n=!1),clearTimeout(t),c.cancelDelayedSend=null,c.confirmDelayedSend=null,e(n)};c.cancelDelayedSend=function(){return n(!0)},c.confirmDelayedSend=function(){return n(!1)}})]:[3,8]):(l.k.warn("[Chat Input] No GraphQL mutation for sending cheers attached."),[2]):(l.k.warn("[Chat Input] Spending bits forbidden.",r),r.cheerAboveMaxBitsPerEmote&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.AboveMaxEmote),r.totalAboveBalance&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.BitsUnavailable),r.totalBelowCheerMinimum&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.BelowMin),r.totalBelowEmoteMinimum&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.BelowMinEmote),r.inputLongerThanMaxBitsMessage&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.InputAboveMaxLength),r.inputStartsWithCommand&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.InputCommandStart),r.cheerContainsInvalidDisplayOnlyCheermotes&&this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.InvalidBitsMessage),[2])):(l.k.warn("[Chat Input] Bits Config is undefined"),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.MissingBitsConfig),[2]):(l.k.warn("[Chat Input] Cheer Settings are undefined."),[2]):(l.k.warn("[Chat Input] Cheer is null."),[2]):(l.k.warn("[Chat Input] User is null."),[2])):(this.sendRegularMessage(),[2])):(l.k.debug("[ChatInput] Supressing chat message send. Input failed to pass validation.",{hasSendableInput:t,value:this.state.value}),[2]);case 7:if(i.sent())return this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.Canceled),this.setState({isSendingBits:!1}),this.chatInputRef.focus(),[2];i.label=8;case 8:return i.trys.push([8,10,,11]),o={id:a,targetID:this.props.channelID,bits:n.total,content:this.state.value,isAutoModEnabled:!0,shouldCheerAnyway:this.props.forceSendCheer,isAnonymous:this.state.isAnonymousCheer},this.props.clearBitsSendError(),[4,this.props.sendCheer({variables:{input:o}})];case 9:return(s=i.sent()).data.sendCheer&&s.data.sendCheer.validationError?(this.props.onSendCheerError&&this.props.onSendCheerError(this.state.value,s.data.sendCheer.validationError),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Object(_e.a)(s.data.sendCheer.validationError.code)),this.setState({isSendingBits:!1,showCard:Re.None,bitsCardError:s.data.sendCheer.validationError.code}),this.chatInputRef&&this.chatInputRef.focus(),[2]):[3,11];case 10:return i.sent(),this.props.onSendCheerError&&this.props.onSendCheerError(this.state.value,{code:S.Xa.UNKNOWN}),this.trackCheerErrorEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer,Ne.c.Unknown),this.setState({isSendingBits:!1,bitsCardError:S.Xa.UNKNOWN}),this.chatInputRef&&this.chatInputRef.focus(),[2];case 11:return this.props.onSendCheerSuccess(),this.trackCheerEvent(this.props.emotePickerSessionID,n.total,this.state.value,a,this.state.isAnonymousCheer),this.setState({isSendingBits:!1,bitsCardError:void 0,showCard:Re.None,value:""}),this.chatInputRef&&this.chatInputRef.focus(),this.autocompleteInputRef&&this.autocompleteInputRef.setValue(""),[2]}})})},n.shareBitsBadgeTier=function(){return i.__awaiter(n,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:if(!this.props.privateCalloutPrompt||this.props.privateCalloutPrompt.sendButtonOverride!==Ue.ShareBitsBadgeTier||!this.props.privateCalloutPrompt.calloutEvent||this.state.sharingBitsBadgeTier)return[2];this.setSharingBitsBadgeTier(),t.label=1;case 1:return t.trys.push([1,4,5,6]),this.props.authToken&&this.props.privateCalloutPrompt&&this.props.privateCalloutPrompt.calloutEvent?[4,this.props.updateBitsBadgeTierNotification(Object(f.a)({notificationID:this.props.privateCalloutPrompt.calloutEvent.id,notificationState:S.f.SHARED,message:this.state.value}))]:[3,3];case 2:t.sent(),t.label=3;case 3:return[3,6];case 4:return e=t.sent(),l.k.error(e,"Failed to post bits badge tier message"),[3,6];case 5:return this.clearSharingBitsBadgeTier(),this.trackCalloutPromptAction(W.a.Message),this.props.clearPrivateCalloutPrompt(),[7];case 6:return[2]}})})},n.handleAuthContextBalloonClose=function(){n.setState({showAuthContextBalloon:!1}),Object(_.t)({page:_.f.Bubble,source:b.a.Chat,target:_.e.Exit,action:_.d.Click})},n.onEmotePickerToggle=function(){n.setState(function(e){return e.messageCheers.length?e:{showCard:e.showCard===Re.Emotes?Re.None:Re.Emotes}})},n.onClickOut=function(){n.setState(function(e){return e.showCard===Re.Emotes?{showCard:Re.None}:e})},n.onBitsIconClick=function(){n.state.showCard===Re.Bits?n.trackBitsCardInteraction(V.c.CloseCard):n.trackBitsCardInteraction(V.c.OpenCard),n.setState({showCard:n.state.showCard===Re.Bits?Re.None:Re.Bits})},n.onShowViewersList=function(){n.state.showCard!==Re.None&&n.setState({showCard:Re.None}),n.props.showViewersList()},n.onBitsClose=function(){n.state.showCard===Re.Bits&&n.setState({showCard:Re.None}),n.trackBitsCardInteraction(V.c.CloseCard)},n.onChatRestrictionBalloonClose=function(){n.state.showCard===Re.ChatRestriction&&n.setState({showCard:Re.None})},n.onChatRestrictionBalloonOpen=function(){n.setState({showCard:Re.ChatRestriction})},n.onClickEmote=function(e){var t=n.state.value;n.state.value&&n.state.value.length>0&&!n.state.value.endsWith(" ")&&(t+=" "),t+=e+" ",n.autocompleteInputRef&&n.autocompleteInputRef.setValue(t)},n.onEmotePickerDataLoaded=function(e){e&&n.setState({showEmotePickerButton:!0})},n.closePrivateCalloutPrompt=function(){if(n.props.privateCalloutPrompt&&n.props.privateCalloutPrompt.calloutEvent){switch(n.props.privateCalloutPrompt.calloutEvent.type){case q.a.BitsBadgeTier:n.dismissShareBitsBadgeTier(n.props.privateCalloutPrompt.calloutEvent)}n.props.privateCalloutPrompt.callOnClose&&n.props.privateCalloutPrompt.callOnClose()}n.props.clearPrivateCalloutPrompt()},n.dismissShareBitsBadgeTier=function(e){return i.__awaiter(n,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),this.props.authToken&&e&&e.id?[4,this.props.updateBitsBadgeTierNotification(Object(f.a)({notificationID:e.id,notificationState:S.f.SKIPPED}))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[3,4];case 3:return t=n.sent(),l.k.error(t,"Failed to dismiss share bits tier callout"),[3,4];case 4:return[2]}})})},n.trackCheerEvent=function(e,t,i,a,r){Object(_e.d)({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,emotePickerSessionID:e,isAnonymousCheer:r,isHostMode:n.props.isHostMode,player:n.props.isPopout?Ne.a.Embed:Ne.a.Web,subOnlyMode:n.props.subsOnlyMode,viewerContext:n.props.viewerContext,bitsValue:t,cheermote:i,transactionID:a})},n.trackCheerErrorEvent=function(e,t,i,a,r,o){Object(_e.c)({channelID:n.props.channelID||"",channelLogin:n.props.channelLogin,emotePickerSessionID:e,isHostMode:n.props.isHostMode,isAnonymousCheer:r,player:n.props.isPopout?Ne.a.Embed:Ne.a.Web,subOnlyMode:n.props.subsOnlyMode,viewerContext:n.props.viewerContext,bitsValue:t,cheermote:i,transactionID:a,errorType:o})},n.trackBitsCardInteraction=function(e,t){var i={actionName:e,actionType:t&&t.actionType,emoteType:t&&t.emoteType,emoteLevel:t&&t.emoteLevel,location:t&&t.location,displayedBalance:n.props.data&&n.props.data.currentUser&&n.props.data.currentUser.bitsBalance||0,bitsCardError:t&&t.bitsCardError,channelId:n.props.data&&n.props.data.channel&&n.props.data.channel.id||"",userId:n.props.data&&n.props.data.currentUser&&n.props.data.currentUser.id||""};Object(V.k)(i)},n.resetAndUpdateRenderSentChatMessageEvent=function(){n.props.latencyTracking.resetCustomEvents(E.a.Chat);var e=n.props.latencyTracking.registerCustomEvent({benchmark:400,group:E.a.Chat,key:E.b.ChatRenderSent,label:E.c.RenderSent,start:E.d.Registration});n.props.updateRenderSentChatMessageEvent(e)},n.isCurrentUserBanned=function(){if(n.props.data&&!n.props.data.loading&&!n.props.data.error&&n.props.data.channel){var e=n.props.data.channel.self;if(e&&e.banStatus&&e.banStatus.isPermanent)return!0}return!1},n.onRestrictionsUpdate=function(){var e=null,t=0;if(n.props.chatRestrictionsAPI){var i=n.props.chatRestrictionsAPI.getRestrictions();i&&i.length>0&&(e=i[0],t=n.props.chatRestrictionsAPI.getRemainingSlowModeSeconds())}n.setState({chatRestrictedReason:e,slowModeSecondsRemaining:t})},n.isTypingCommand=function(){return"/"===n.state.value.substr(0,1)&&"/me"!==n.state.value.substr(0,3)},n.isTypingCheer=function(){return n.state.messageCheers.length>0},n.state={hasInteractedOrPageload:t.firstPageLoaded,hasSeenAndRejectedEmbedPrompt:!1,isSendingBits:!1,messageCheers:[],showAuthContextBalloon:!1,showBuyBits:!1,showCard:Re.None,showEmotePickerButton:!!t.authToken,value:"",chatRestrictedReason:null,slowModeSecondsRemaining:0,isAnonymousCheer:!1,sharingBitsBadgeTier:!1},n}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.getPendingMessage()&&this.restorePendingMessage(),this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate)},t.prototype.componentWillUpdate=function(e,t){var n=this;if(t.value!==this.state.value&&this.props.bitsConfig&&!this.props.privateCalloutPrompt){var i=[];Object(U.g)(t.value,this.props.bitsConfig,!1).forEach(function(e){e.type===Ee.a.Emote&&(i.push(e.content),e.content.alt&&Object(U.e)(e.content.alt)&&n.setState({isAnonymousCheer:!0}))}),i.length&&t.showCard===Re.Emotes&&this.setState({showCard:Re.None}),!this.isTypingCheer()&&i.length&&i.length>=1&&this.trackBitsCardInteraction(V.c.OpenCardViaCheering),this.setState({messageCheers:Object(U.b)(i,this.props.bitsConfig)})}},t.prototype.componentWillReceiveProps=function(e){this.props.chatRestrictionsAPI!==e.chatRestrictionsAPI&&(this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate),e.chatRestrictionsAPI&&e.chatRestrictionsAPI.addUpdateHandler(this.onRestrictionsUpdate)),!this.props.firstPageLoaded&&e.firstPageLoaded&&this.setState({hasInteractedOrPageload:!0})},t.prototype.componentDidUpdate=function(){this.props.forceSendCheer&&this.onMessageSend()},t.prototype.componentWillUnmount=function(){this.props.chatRestrictionsAPI&&this.props.chatRestrictionsAPI.removeUpdateHandler(this.onRestrictionsUpdate)},t.prototype.render=function(){var e=this.isCurrentUserBanned(),t=Object(l.d)("Send a message","ChatInput");if(e)return a.createElement(x.a,{padding:{bottom:2,x:2}},a.createElement(ae.a,{padding:{bottom:1,x:2},borderTop:!0}),a.createElement(x.a,{textAlign:ie.k.Center},a.createElement(j.a,{color:re.c.Alt,"data-test-selector":"current-user-banned-text",bold:!0},Object(l.d)("You are currently banned from this channel.","ChatInput"))),this.renderButtonContainer(!0,null));if(this.state.hasSeenAndRejectedEmbedPrompt)return a.createElement(x.a,{className:"chat-input",display:this.props.hidden?ie.d.Hide:ie.d.Block,padding:{x:2,bottom:2}},a.createElement(j.a,{"data-test-selector":"chat-embed-denied-text"},Object(l.d)("You rejected the prompt to send messages in this embedded version of Twitch Chat. If this was done in error, please refresh the page.","ChatInput")),this.renderButtonContainer(!0,null));var n=[];this.props.bitsConfig&&!this.props.privateCalloutPrompt&&n.push(a.createElement(L,{key:"bits",onClick:this.onBitsIconClick})),this.state.showEmotePickerButton&&n.push(a.createElement(Ve.b,{key:"emote-picker",onClick:this.onEmotePickerToggle,isActive:this.state.showCard===Re.Emotes}));var i=null;this.state.hasInteractedOrPageload&&(i=a.createElement(Ve.c,{channelOwnerID:this.props.channelID,emotePickerSource:He.a.Chat,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,toggleVisibility:this.onEmotePickerToggle,visible:this.state.showCard===Re.Emotes}));var r=null;this.state.hasInteractedOrPageload&&this.props.bitsConfig&&!this.props.privateCalloutPrompt&&(r=a.createElement(O.a,{bitsConfig:this.props.bitsConfig,channelID:this.props.channelID,channelLogin:this.props.channelLogin,currentCheers:this.state.messageCheers,isSending:this.state.isSendingBits,isStaff:this.props.isStaff,isAnonymous:this.state.isAnonymousCheer,onCancelSend:this.cancelDelayedSend,onClickCheermote:this.onClickEmote,onConfirmSend:this.confirmDelayedSend,onUserClose:this.onBitsClose,trackBitsCardInteraction:this.trackBitsCardInteraction,visible:this.state.showCard===Re.Bits,cheerMessageAutoModded:this.props.isTextInputDisabled,bitsSendErrorCode:this.props.bitsSendErrorCode,bitsSendHasError:this.props.bitsSendHasError,chatMessage:this.state.value,onCheerInvalid:this.onCheerInvalid,onAnonymousToggle:this.onAnonymousCheerToggle}));var o=null;this.props.data&&this.props.data.channel&&this.props.data.channel.cheer&&this.props.data.channel.cheer.hashtags&&this.state.messageCheers.length>0&&!this.props.privateCalloutPrompt&&(o=a.createElement(P,{hashTags:this.props.data.channel.cheer.hashtags}));var s=null;this.props.moderatedMessageParts&&this.props.moderatedMessageParts.length>0&&(s=a.createElement(Ce.a,{moderatedReason:this.props.moderatedReason,moderatedMessageParts:this.props.moderatedMessageParts}));var u=this.state.chatRestrictedReason,m=null;if(this.props.slowMode&&(t=Object(l.d)("Send a message (chat is in slow mode)","ChatInput")),u===S.v.SLOW_MODE){var p=Object(g.b)(this.state.slowModeSecondsRemaining,g.a.HumanizedShort);m=Object(l.d)("You can chat in {duration}",{duration:p},"ChatInput")}var h=!(this.isTypingCommand()||this.isTypingCheer())&&null!==u,f=null;this.state.showAuthContextBalloon&&(f=a.createElement(ge.a,{show:this.state.showAuthContextBalloon,direction:ge.b.TopLeft,size:ge.c.Medium},a.createElement(c.a,{onClickOut:this.handleAuthContextBalloonClose},a.createElement(w.a,{source:b.a.Chat,targetUserDisplayName:this.props.channelDisplayName,onCloseModal:this.clearPendingMessage,onCloseBalloon:this.handleAuthContextBalloonClose}))));var v=a.createElement(a.Fragment,null,a.createElement(D.b,{componentType:D.a.TextArea,suggestionSource:D.c.Chat,onValueUpdate:this.onMessageValueUpdate,onFocus:this.onInputFocus,onKeyDown:this.onKeyDown,componentRefDelegate:this.setChatInputRef,refDelegate:this.setAutocompleteInputRef,paddingRight:30*n.length,placeholder:t,noResize:!0,"data-a-target":"chat-input","data-test-selector":"chat-input",disabled:this.state.isSendingBits||this.props.isTextInputDisabled,containerElement:this.props.containerElement},a.createElement(D.d,{emotes:this.props.emotes}),a.createElement(ne,null),o),a.createElement(x.a,{position:ie.j.Absolute,attachRight:!0,attachTop:!0},n),this.renderSlowModeProgressBar());this.props.privateCalloutPrompt&&(v=a.createElement(oe,{title:this.props.privateCalloutPrompt.title,icon:this.props.privateCalloutPrompt.icon,description:this.props.privateCalloutPrompt.description,onClose:this.closePrivateCalloutPrompt},v));var k=a.createElement(Ke,{authToken:this.props.authToken,channelDisplayName:this.props.channelDisplayName,channelLogin:this.props.channelLogin,channelID:this.props.channelID,onPushMessage:this.props.onPushMessage}),C=a.createElement(d.a,{name:y.b.ChatPrivateCalloutRedesign,assignments:{fallback:function(){return null},control:function(){return null},variant1:function(){return k},variant2:function(){return k}}});return a.createElement(x.a,{className:"chat-input",display:this.props.hidden?ie.d.Hide:ie.d.Block,padding:{x:2,bottom:2}},s,this.props.authToken&&this.props.firstPageLoaded&&C,a.createElement(be,{channelDisplayName:this.props.channelDisplayName,channelID:this.props.channelID,channelLogin:this.props.channelLogin,closeBalloon:this.onChatRestrictionBalloonClose,openBalloon:this.onChatRestrictionBalloonOpen,showBalloon:this.state.showCard===Re.ChatRestriction}),a.createElement(c.a,{onClickOut:this.onClickOut},a.createElement(re.e,{display:this.props.moderatedMessageParts?ie.d.Hide:ie.d.Block,position:ie.j.Relative,zIndex:ie.n.Default},a.createElement("div",{onMouseEnter:this.onMouseEnterInput},i,r,f,v)),this.renderButtonContainer(h,m)))},t.prototype.renderButtonContainer=function(e,t){return void 0===e&&(e=!1),a.createElement(x.a,{className:"chat-input__buttons-container","data-test-selector":"chat-input-buttons-container",display:this.props.hideChatInputButtons?ie.d.Hide:ie.d.Flex,justifyContent:ie.h.Between,margin:{top:1}},a.createElement(x.a,{display:ie.d.Flex,flexDirection:ie.e.Row},a.createElement(x.a,{position:ie.j.Relative},a.createElement(z.a,{onToggle:this.onChatSettingsToggle,onShowChatRules:this.props.onShowChatRules,channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,authToken:this.props.authToken,isCurrentUserModerator:this.props.isCurrentUserModerator,onChatCommand:this.onChatCommand,isPopout:this.props.isPopout,isEmbedded:this.props.isEmbedded,channelID:this.props.channelID,containerElement:this.props.containerElement})),a.createElement(K,null),a.createElement(I.a,{ariaLabel:Object(l.d)("Users in Chat","ChatInput"),"data-a-target":"chat-viewer-list","data-test-selector":"chat-viewer-list",icon:T.b.ViewerList,onClick:this.onShowViewersList}),a.createElement(u.a,{name:"copo_enabled"},a.createElement(Be,{channelLogin:this.props.channelLogin}))),a.createElement(x.a,{display:ie.d.Flex,alignItems:ie.b.Center,alignContent:ie.a.Center,flexDirection:ie.e.Row},a.createElement(x.a,{margin:{right:1}},a.createElement(j.a,{color:re.c.Alt2},t)),this.renderSendButton(e)))},t.prototype.renderSendButton=function(e){var t;return void 0===e&&(e=!1),t=this.state.value&&null!==Object(we.n)(this.state.value)?Object(l.d)("Whisper","ChatInput"):!this.props.privateCalloutPrompt||this.props.privateCalloutPrompt.sendButtonOverride!==Ue.ShareBitsBadgeTier&&this.props.privateCalloutPrompt.sendButtonOverride!==Ue.ShareResub?this.props.privateCalloutPrompt&&this.props.privateCalloutPrompt.sendButtonOverride===Ue.ThankSubGifter?Object(l.d)("Send Thanks","ChatInput"):Object(l.d)("Chat","ChatInput"):Object(l.d)("Share","ChatInput"),a.createElement(he.a,{onClick:this.onMessageSend,"data-a-target":"chat-send-button","data-test-selector":"chat-send-button",disabled:this.state.isSendingBits||this.props.isTextInputDisabled||e},t)},t.prototype.sendRegularMessage=function(){var e=this;if(this.props.onSendMessage){var t=Object(we.k)(this.state.value);if(t&&Object(ye.b)())return this.setState({showCard:Re.None},function(){e.trackChatEvent(e.props.emotePickerSessionID),e.autocompleteInputRef&&e.autocompleteInputRef.setValue(""),e.props.openRaidUpsellFromHost(t.recipientLogin)});this.props.onSendMessage(this.state.value)&&(this.trackChatEvent(this.props.emotePickerSessionID),this.trackMentions(),this.autocompleteInputRef&&this.autocompleteInputRef.setValue(""),this.setState({showCard:Re.None})),this.props.privateCalloutPrompt&&(this.trackCalloutPromptAction(W.a.Message),this.props.clearPrivateCalloutPrompt())}},t.prototype.setSharingBitsBadgeTier=function(){this.setState({sharingBitsBadgeTier:!0})},t.prototype.clearSharingBitsBadgeTier=function(){this.setState({sharingBitsBadgeTier:!1})},t.prototype.handleLogin=function(){var e=Object(H.b)(),t={onClose:this.clearPendingMessage,targetChannel:this.props.channelDisplayName};e!==H.a.Balloon?(e===H.a.TwoStep?t.modalType=_.f.TwoStep:e===H.a.Split&&(t.modalType=_.f.Combined),this.login(t)):this.state.showAuthContextBalloon||(this.storePendingMessage(this.state.value),this.setState({showAuthContextBalloon:!0}),Object(_.u)({page:_.f.Bubble,source:b.a.Chat}))},t.prototype.login=function(e){Object(H.b)()!==H.a.Control&&this.storePendingMessage(this.state.value),this.props.login(e)},t.prototype.trackChatEvent=function(e){Object(_e.b)({channelID:this.props.channelID||"",channelLogin:this.props.channelLogin,emotePickerSessionID:e,isHostMode:this.props.isHostMode,player:this.props.isPopout?Ne.a.Embed:Ne.a.Web,subOnlyMode:this.props.subsOnlyMode,viewerContext:this.props.viewerContext})},t.prototype.trackCalloutPromptAction=function(e){if(this.props.privateCalloutPrompt){var t={channelID:this.props.channelID||"",userID:this.props.sessionUser&&this.props.sessionUser.id||"",userLogin:this.props.sessionUser&&this.props.sessionUser.login||"",channelLogin:this.props.channelLogin,calloutType:this.props.privateCalloutPrompt.trackingType,privateCalloutSID:this.props.privateCalloutPrompt.privateSID,action:e,uiContext:this.props.privateCalloutPrompt.trackingContext};e===W.a.Message&&(t.msgBody=this.state.value,this.props.privateCalloutPrompt.inputText&&(t.usedPrompt=this.state.value===this.props.privateCalloutPrompt.inputText)),Object(W.e)(t)}},t.prototype.trackMentions=function(){if(this.state.value&&this.props.sessionUser)for(var e=0,t=Object(v.a)(this.state.value,{mentions:{senderLogin:this.props.sessionUser.login,sessionUser:this.props.sessionUser}});e<t.length;e++){var n=t[e];n.type===Ee.a.Mention&&n.content.currentUserMentionRelation!==Se.a.Recipient&&Object(De.a)({channelLogin:this.props.channelLogin,isHostMode:this.props.isHostMode,mentionedUserDisplayName:n.content.recipient,userLogin:this.props.sessionUser.login})}else l.k.warn("[ChatInput] trackMentions was called in a nonsensical state.")},t.prototype.storePendingMessage=function(e){l.n.set("pending_chat_message",e)},t.prototype.getPendingMessage=function(){return l.n.get("pending_chat_message","")},t.prototype.clearPendingMessage=function(){l.n.set("pending_chat_message","")},t.prototype.restorePendingMessage=function(){var e=this.getPendingMessage();e&&this.autocompleteInputRef&&(this.autocompleteInputRef.setValue(e),this.clearPendingMessage())},t}(a.Component);var $e=Object(r.compose)(Object(p.a)(Qe,{name:"sendCheer"}),Object(p.a)(ze,{skip:function(e){return!e.firstPageLoaded}}),Object(p.a)(X,{name:"updateBitsBadgeTierNotification"}),le.a,Object(qe.withLatencyTracking)("ChatInput",{autoReportInteractive:!0}),Object(o.connect)(function(e){return{emotePickerSessionID:e.chat.emotePickerSessionID,sessionUser:Object(N.e)(e)}},function(e){return Object(s.bindActionCreators)({login:function(e){return Object(C.e)(b.a.Chat,e)},updateRenderSentChatMessageEvent:$.S},e)}),Object(se.b)(function(e){return{slowMode:e.slowMode,slowModeDuration:e.slowModeDuration,subsOnlyMode:e.subsOnlyMode}}),Object(Q.b)(function(e){return{hideChatInputButtons:e.hideChatInputButtons}}),Object(G.b)(function(e){return{clearPrivateCalloutPrompt:e.clearInputPrompt,privateCalloutPrompt:e.inputPrompt}}),Object(ke.b)(function(e){return e}))(Xe);n.d(t,!1,function(){return"chat-input"}),n.d(t,!1,function(){return"chat-send-button"}),n.d(t,!1,function(){return"chat-embed-denied-text"}),n.d(t,!1,function(){return"chat-input-buttons-container"}),n.d(t,!1,function(){return"current-user-banned-text"}),n.d(t,!1,function(){return"chat-viewer-list"}),n.d(t,!1,function(){return"pending_chat_message"}),n.d(t,"b",function(){return Ue}),n.d(t,!1,function(){return Xe}),n.d(t,"a",function(){return $e})},zQgx:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"g",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"f",function(){return g}),n.d(t,"k",function(){return f}),n.d(t,"h",function(){return v}),n.d(t,"e",function(){return b}),n.d(t,"l",function(){return k}),n.d(t,"i",function(){return C});var i=n("cr+I"),a=n("/7QA"),r=n("oB8h"),o=n("UWbL"),s=n("+GjP"),l=(n("vRsq"),n("DMoW")),c=(n("Q94S"),-1);function d(e){return!!e&&!(!e.hosting||!e.hosting.id)}function u(e){switch(m(e)){case r.a.WatchParty:case r.a.Premiere:case r.a.Rerun:return!0;default:return!1}}function m(e){if(e&&e.stream&&e.stream.id&&e.stream.type)return e.stream.type}function p(e){var t=Object(s.a)(e.location.search,"t");return t?Object(o.a)(t):c}function h(e,t){e&&e.owner?a.q.setPageTitle(e.owner.displayName+" - "+e.title):t&&t.broadcaster&&a.q.setPageTitle(t.broadcaster.displayName+" - "+t.title)}function g(e){return e&&e.broadcastSettings&&e.broadcastSettings.title?e.broadcastSettings.title:""}function f(e){return!(!e||!e.id)&&(!!e.campaignProperties&&!!e.campaignProperties.domains&&e.campaignProperties.domains.length>0)}function v(e){return e&&e.stream?e.stream.viewersCount:null}function b(e,t){return t&&(!function(e){return e&&""!==e.id&&e.creationState&&e.creationState===l.B.CREATED}(t)||function(e,t){return!!e&&t&&t.broadcaster&&t.broadcaster.login&&t.broadcaster.login.toLowerCase()!==e.toLowerCase()}(e,t))}function k(e,t){return!!e&&(!!t&&!!t.owner&&!!t.owner.login&&t.owner.login.toLowerCase()!==e.toLowerCase())}function C(e){var t={},n=i.parse(e.location.search),a=p(e);return a!==c&&(t.highlightTimestamp=a),n.comment&&(t.highlightedMessageID=n.comment),t}},zWFo:function(e,t,n){},zixI:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnblockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnblockUserInput"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unblockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"mutation UnblockUser($input: UnblockUserInput!) {\nunblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"zmH+":function(e,t,n){},znm4:function(e,t,n){"use strict";var i=n("mrSG"),a=n("/MKj"),r=n("yR8l"),o=n("DMoW"),s=n("kRBY"),l=n("4rCz"),c=n("0Lz3"),d=n("WytW"),u=n("ZuiC"),m=n("sf7/"),p=n("HjbF"),h=n("kVrx"),g=n("zClW"),f=n("l41m"),v=function(e,t,n){return e&&t&&!n},b=n("Sfdh"),k=n("ZUUl"),C=n("pwkZ"),y=n("pq/L");n.d(t,"a",function(){return N});var S=2;var E=Object(a.connect)(function(e,t){var n={comments:[],currentVideoTime:e.vodChat.comments.currentVideoTime,cursor:e.vodChat.comments.cursor,errorMessage:e.vodChat.comments.errorMessage,hasFetchedComments:e.vodChat.comments.hasLoadedData,hasRequestedCurrentUserBlockList:e.vodChat.comments.hasLoadedCurrentUserBlockedList,isCreationCoolDownActive:e.vodChat.comments.isPostCooldownActive,isCurrentUserModerator:!1,isLoggedIn:Object(s.f)(e),isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,isScrollingSynced:e.vodChat.comments.isScrollingSynced,offsetRange:Object(f.b)(e.vodChat.comments.comments),replyCursorMap:e.vodChat.comments.replyCursorMap,shouldSendReplayFilterError:!1,hideTimestamps:e.vodChat.comments.hideTimestamps};if(!t.data.loading&&!t.data.error&&t.data.video){var i=t.data,a=i.currentUser,r=i.video;null!==a&&a.roles&&(n.isCurrentUserModerator=Object(p.b)(a,r.owner)),n.comments=Object(f.c)(e,t.data.video.broadcastType,n.isCurrentUserModerator,t.blockedUsers),n.shouldSendReplayFilterError=v(e.vodChat.comments.isReplayFilterOn,t.data.video.broadcastType!==o.q.UPLOAD,e.vodChat.comments.hasDismissedChatReplayError)}return n},function(e,t){return{onUpdateBegan:function(n,i){if(n.videoID)if(i.videoID===n.videoID){if(!n.hasFetchedComments){var a={bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID};if(n.highlightTimestamp&&n.currentVideoTime!==n.highlightTimestamp)return;return n.highlightedMessageID&&(a.highlightedMessageID=n.highlightedMessageID),void e(Object(k.a)(g.c,a))}if(n.offsetRange!==f.a){if(Object(p.f)({cursor:n.cursor,currentVideoTime:n.currentVideoTime,offsetEndTime:n.offsetRange.endSec,offsetThreshold:S}))return void e(Object(k.a)(g.c,{bitsConfig:t.bitsConfig,cursor:n.cursor.future,videoID:n.videoID}));if(Object(p.e)(n))return void e(Object(k.a)(g.c,{bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID}))}}else e(Object(m.c)(n.videoID))},onCreate:function(t){if(Object(d.h)(t.message)){var n=Object(l.d)("Sorry, commands are not supported in Chat on Videos yet.","VideoChatPresentation");e(Object(u.u)(n))}else e(Object(k.a)(g.a,t)),e(Object(k.b)(g.e,t))},onError:function(t){e(Object(u.u)(t))},onErrorDismissClick:function(){e(Object(u.w)())},onUnmount:function(){e(Object(u.y)())},onLoadMoreReplies:function(t,n,i,a){e(Object(k.a)(g.c,Object(p.a)(t,n,i,a)))},onDisableSync:function(){e(Object(u.D)())},onEnableSync:function(){e(Object(u.E)())},onBanUser:function(t){e(Object(k.a)(h.a,t)),e(Object(k.b)(g.d,t))},onDeleteComment:function(t){e(Object(k.a)(g.b,t)),e(Object(k.b)(g.f,t))},onPlayerSeekRequest:function(n,i){t.onPlayerSeekRequest(n),void 0!==i&&e(Object(k.b)(g.h,i))},onTurnOffReplayFilter:function(){e(Object(u.C)(!1))},onWillMount:function(){e(Object(u.x)())},onDidMount:function(t){e(Object(u.C)(t))}}},function(e,t,n){var a=t.onDisableSync;e.isScrollingSynced||(a=function(){});var r=t.onCreate;return e.shouldSendReplayFilterError&&(r=function(e){t.onError(Object(b.a)().chatReplayFilterError),t.onCreate(e)}),i.__assign({},e,t,n,{onDisableSync:a,onCreate:r,data:n.data})})(C.a),N=Object(r.a)(y,{options:function(e){return{variables:{videoID:e.videoID,hasVideoID:!!e.videoID}}},props:function(e){var t=e.ownProps,n=e.data,a=n&&n.video&&n.video.owner&&n.video.owner.cheer&&n.video.owner.cheer.emotes||[],r=Object(c.a)(a),o={};return n&&!n.loading&&!n.error&&n.currentUser&&n.currentUser.blockedUsers&&(o=n.currentUser.blockedUsers.reduce(function(e,t){return t&&t.id&&(e[t.id]=!0),e},{})),i.__assign({},t,{data:n,bitsConfig:r,blockedUsers:o})}})(E)},zyUW:function(e,t,n){}}]);