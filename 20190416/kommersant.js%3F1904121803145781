/*!
 * kommersant.js
 *
 * © 2018 АО «Коммерсантъ»
 * All rights reserved
 */
"use strict";jQuery.browser||(jQuery.browser={});try{"object"!=typeof window.sessionStorage&&(window.sessionStorage={}),"object"!=typeof window.localStorage&&(window.localStorage={})}catch(e){}window.Ya||(window.Ya={}),window.Ya.adfoxCode||(window.Ya.adfoxCode={},window.Ya.adfoxCode.create=function(){},window.Ya.adfoxCode.createAdaptive=function(){},window.Ya.adfoxCode.createScroll=function(){},window.Ya.adfoxCode.reload=function(){}),window.AdFoxBanner||(window.AdFoxBanner=function(){this.createBanner=function(){}}),window.rutarget||(window.rutarget={},window.rutarget.adfox={},window.rutarget.adfox.checkAd=function(){},window.rutarget.adfox.getAdState=function(){}),window.AdFox_getCodeScript||(window.AdFox_getCodeScript=function(){}),function(){Object.defineProperty(window,"server_time",{get:function(){return kommersant.getServerDate().valueOf()},set:function(e){kommersant.setServerDateOffset(e)}})}(),function(){if(window.puidParams&&!window.puids){var e,t,n=puidParams.split("&");for(window.puids={},e=0;e<n.length;e++)n[e].length&&(t=decodeURIComponent(n[e]).split("="),2===t.length&&(window.puids[t[0]]=t[1]))}}(),function(e,$){$.extend($.expr[":"],{"really-hidden":function(e){var t=$(e),n=function(e){return 0!==e.length&&e.get(0)!==document.body&&("none"===e.css("display")||0==e.css("opacity")||n(e.parent()))};return"hidden"===t.css("visibility")||n($(e))}});var t=null,n=$(window);this.isWebView=!1,this.windowName="kommersantWindow",this.domain=window.location.hostname.split(".").slice(-2).join("."),this.iHost="https://i.kommersant.ru",this.mainHost="https://"+window.location.host,this.personalHost="https://"+window.location.host,this.serverDateOffset=0,this.lastActivity=new Date,this.media="",this.isTouch="ontouchstart"in window,this.shareCount={vk:0,fb:0,ok:0,lastUpdate:new Date},this.antiCache={},this.subscriptions={},this.bufferedCallbacks={},this.loadPromises={},this.backend={},this.utils={debugDOM:function(e){if("object"!=typeof e||!e.parentNode||e===document.body)return"";var t=this.debugDOM(e.parentNode),n=e.className.replace(/ /g,"."),i=(t?t+" > ":"")+e.nodeName+(n?"."+n:"");return i},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},comment:function(e){return"string"!=typeof e?e:(e=this.trim(e),e="<!--"+e+"-->")},uncomment:function(e){return"string"!=typeof e||""===e?e:(e=this.trim(e),e.search(/^<!--[^]*-->$/)!==-1&&e.search(/^<!--[^]*(<!--|-->)[^]*-->$/)===-1&&(e=e.replace(/^<!--/,"").replace(/-->$/,""),e=this.trim(e)),e)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},objectLength:function(e){var t,n=0;for(t in e)n++;return n},inArray:function(e,t){var n;if("object"!=typeof t||!(t instanceof Array))return!1;for(n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},removeElement:function(e,t){var n;if("object"!=typeof t)return!1;if(t instanceof Array)for(n=0;n<t.length;n++)t[n]===e&&t.splice(n--,1);else for(n in t)t[n]===e&&delete t[n]},addUniqueElement:function(e,t){this.inArray(e,t)||t.push(e)},dataBoolean:function(e){return""===e||!!e},dateAdd:function(e,t){return e.setUTCMilliseconds(e.getUTCMilliseconds()+t),e},formatNumber:function(e,t,n,i){if("string"==typeof e){var o=parseFloat(e);if(isNaN(o))return e;e=o}if("number"!=typeof e||isNaN(e))return e;if("number"==typeof t&&t>=0){t=Math.floor(t);var a=Math.pow(10,t);e=Math.round(e*a)/a}var s=e.toString(),r=s.split(".",2),c=r[0].replace(/^-/,"−"),l=r[1],d="",u=0;if(Math.abs(e)>=1e4)for(var f=c.length-1;f>=0;f--)d=c[f]+d,u++,3===u&&f>0&&(u=0,d=("string"==typeof i?i:" ")+d);else d=c;return"undefined"!=typeof r[1]&&(d+=("string"==typeof n?n:",")+l),d},formatDate:function(e){return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+("0"+e.getFullYear()).slice(-2)},formatTime:function(e){return e.getHours()+":"+("0"+e.getMinutes()).slice(-2)},plural:function(e,t,n,i){return e=Math.abs(e)%100,e>=10&&e<=19?i:(e%=10,0==e||e>=5?i:e>=2?n:t)},getCookie:function(e){return"string"!=typeof e||""===e?"":decodeURIComponent((document.cookie.match(new RegExp(e+"=([^;]*)"))||["",""])[1])},setCookie:function(e,t,n){if("string"==typeof e&&""!==e){var i=e+"="+encodeURIComponent(t);if("object"==typeof n){"object"==typeof n.expires&&(n.expires=n.expires.toUTCString());for(var o in n)i="boolean"==typeof n[o]?i+"; "+o:i+"; "+o+"="+n[o]}document.cookie=i}},deleteCookie:function(e,t){"object"!=typeof t&&(t={}),t.expires=new Date(0),this.setCookie(e,"",t)},windowOpen:function(t,n,i,o){if(window.name===n||e.isWebView)return window.location.href=t,window;var a=void 0!=window.screenLeft?window.screenLeft:screen.left,s=void 0!=window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=r/2-i/2+a,d=c/2-o/2+s,u=window.open(t,n,"scrollbars=yes, width="+i+", height="+o+", top="+d+", left="+l);return window.focus&&u.focus(),u},loadStyle:function(t){if("string"!=typeof t||""===t)return Promise.reject(new Error("Empty url"));if(t=t.toLowerCase(),e.loadPromises[t])return e.loadPromises[t];var n=new Promise(function(e,n){if("string"!=typeof t||!t.length)return void n();var i="link",o=document.createElement(i);o.onload=e,o.onerror=n,o.rel="stylesheet",o.href=t,o.charset="utf-8";var a=document.head.getElementsByTagName(i),s=a[a.length-1];s.insertAdjacentElement("afterend",o)});return e.loadPromises[t]=n},loadScript:function(t,n,i){if("string"!=typeof t||""===t)return Promise.reject(new Error("Empty url"));if(t=t.toLowerCase(),!i&&e.loadPromises[t])return e.loadPromises[t];var o=new Promise(function(e,i){if("string"!=typeof t||!t.length)return void i();var o="script",a=document.createElement(o);a.onload=e,a.onerror=i,"string"==typeof n&&""!==n&&(a.id=n),a.async=!0,a.charset="utf-8",a.src=t;var s=document.getElementsByTagName(o)[0];s.parentNode.insertBefore(a,s)});return i?o:e.loadPromises[t]=o},applyCallbacks:function(e,t){var n;for(n=0;n<e.length;n++)e[n](t)},triggerCustomEvent:function(e,t,n){var i,o;o="object"==typeof e?$(e):$document,"string"==typeof t&&0!==t.length&&("object"!=typeof n&&(n={}),o.each(function(){try{i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}),this.dispatchEvent(i)}catch(e){try{i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,n),this.dispatchEvent(i)}catch(e){$(this).trigger(t)}}}))},callBuffered:function(t,n,i,o){t in e.bufferedCallbacks||(e.bufferedCallbacks[t]=null),clearTimeout(e.bufferedCallbacks[t]),e.bufferedCallbacks[t]=setTimeout(n,i||250,o)},swapNodes:function(e,t){var n=e.parentNode,i=e.nextSibling===t?e:e.nextSibling;t.parentNode.insertBefore(e,t),n.insertBefore(t,i)},checkInViewport:function(e,t,i,o){var a="isInViewport",s=n.scrollTop(),r=n.outerHeight();$(e).each(function(e,n){var c=$(n),l=c.offset().top,d=c.outerHeight(),u=!!c.data(a),f=s+r>l&&s<l+d&&!c.is(":really-hidden");c.data(a,f),!u&&f&&t&&t&&t.call(n),u&&!f&&i&&i&&i.call(n),o&&o.call(n,f)})}},this.visitorSegment=window.adSegmentator&&parseInt(window.adSegmentator.getVisitorSegment(2),10)||1,this.getInactivityTime=function(){return new Date-this.lastActivity},this.setServerDateOffset=function(e){this.serverDateOffset=this.parseServerDate(e)-new Date},this.getServerDate=function(){return e.utils.dateAdd(new Date,this.serverDateOffset)},this.parseServerDate=function(e){return new Date("string"==typeof e?parseInt(e.slice(6),10):e)},this.checkOutdated=function(t,n,i){return"No Transport"===i&&(new e.Notification("Ваш браузер устарел. Пожалуйста, обновите его."),!0)},this.updateSocialButtons=function(t){"object"==typeof t&&$(".socials-link").each(function(){var n,i=$(this),o=i.data("socials-network"),a=["url","picture","quote","title","description"],s=!1;if(o)for(n in t)a.indexOf(n)>=0&&(t[n]?i.data("socials-"+n,t[n]):i.removeData("socials-"+n),s=!0);s&&e.utils.triggerCustomEvent(this,"kommersant:click")})},this.advReload=function(e){$(e).children('div[id!="adfox_"]').each(function(){try{window.Ya.adfoxCode.reload(this.id)}catch(e){}})},this.sendGA=function(e,t,n,i,o){if("function"==typeof ga)switch(e){case"event":ga("send",e,{eventCategory:t,eventAction:n,eventLabel:i,eventValue:o,transport:"beacon"});break;case"social":ga("send",e,{socialNetwork:t,socialAction:n,socialTarget:i});break;case"exception":ga("send",e,t)}},this.sendYa=function(e,t){if("undefined"!=typeof yaCounter153166)switch(e){case"event":"object"==typeof t&&yaCounter153166.params(t);break;case"goal":"string"==typeof t&&yaCounter153166.reachGoal(t)}},this.sendEvent=function(e,t,n,i){"undefined"!=typeof e&&(e=""+e),"undefined"!=typeof t&&(t=""+t),"undefined"!=typeof n&&(n=""+n),"undefined"!=typeof i&&(i=parseInt(i,10)||0);var o;e?t?(o={},n?(o[e]={},"undefined"!=typeof i?o[e][t]=[n,i]:o[e][t]=n):o[e]=t):o=[e]:o=[],this.sendGA("event",e,t,n,i),this.sendYa("event",o)},this.cachedAjax=function(e,t){var n="kommersantCachedAjax",i=!1,o=function(e,t){if(!i||!e)return"";var o;try{o=JSON.parse(localStorage.getItem(n)||"")}catch(e){o={}}return"object"!=typeof o||"object"!=typeof o[e]||""===o[e].revision||o[e].revision<t?"":o[e].data},a=function(e,t,o){if(i&&e){var a;try{a=JSON.parse(localStorage.getItem(n)||"")}catch(e){a={}}"string"==typeof o&&""!==o?a[e]={data:o,revision:t}:delete a[e];try{localStorage.setItem(n,JSON.stringify(a)||"")}catch(e){}}};try{i="localStorage"in window&&null!==window.localStorage}catch(e){}return"object"!=typeof t&&(t={}),"undefined"==typeof t.cache?t.cache=!0:t.cache=!!t.cache,new Promise(function(n,i){var s;if("string"!=typeof e||""===e)return void i();e=e.toLowerCase();var r=e.split("?"),c=$.md5(r[0].match(/^([^\/]*\/{2,}[^\/]+)?(.*$)/)[2]),l=r[1]||"",d=""!==l;if(t.cache&&d&&(s=o(c,l),""!==s))return void n(s);var u=$.support.cors;u||($.support.cors=!0),$.ajax({url:e,method:"GET",dataType:"html",success:function(e){d&&a(c,l,t.cache?e:""),""!==e?n(e):i()},error:function(e,t,n){i()}}),u||($.support.cors=u)})},this.templates=new function(){var t=this;t.data={},t.promises={},t.add=function(n,i){"string"==typeof n&&0!==n.length&&("string"!=typeof i&&(i=""),i=e.utils.uncomment(i),i=i.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s*\n\s*/g,"\n").replace(/\>\n\<\//g,"></").replace(/\n/g," "),t.data[n]=i)},t.load=function(n,i){return"string"==typeof n&&""!==n||(n=e.antiCache.ajaxTemplates||""),n=n.toLowerCase(),t.promises[n]||(t.promises[n]=e.cachedAjax(n,i).then(function(e){var n=document.createElement("div");n.insertAdjacentHTML("beforeend",e);for(var i=n.querySelectorAll(".template"),o=0;o<i.length;o++)t.add(i[o].dataset?i[o].dataset.templateName:i[o].getAttribute("data-template-name"),i[o].innerHTML)},function(){})),t.promises[n]},t.apply=function(e,n){if("string"!=typeof e||""===e)return"";var i,o=t.data[e];if(!o)return"";if("object"==typeof n&&!(n instanceof Array))for(i in n)o=o.replace(new RegExp("{{"+i+"}}","g"),n[i]);return o=o.replace(new RegExp("{{.*?}}","g"),"")}},this.vicons=new function(){var t=this,n=null,i=function(e,t){document.body?e():requestAnimationFrame(function(){i(e,t)})},o=function(){return n||(n=new Promise(i)),n};t.supported=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),t.loaded=[],t.add=function(n,i){if(t.supported&&"string"==typeof n&&""!==n){n=n.toLowerCase();var a=n.split("?"),s=a[0].match(/^([^\/]*\/{2,}[^\/]+)?(.*$)/)[2];t.loaded.indexOf(s)>=0||Promise.all([e.cachedAjax(n,i),o()]).then(function(e){"object"!=typeof e||"string"!=typeof e[0]||""===e[0]||t.loaded.indexOf(s)>=0||(document.body.insertAdjacentHTML("afterbegin",e[0]),t.loaded.push(s))},function(){})}}},this.prepareFixed=function(){return t||(t=new Promise(function(t,n){e.templates.load().then(function(){$(function(){if(!$(".fixed_bottom").length){var i=e.templates.apply("fixed-bottom");""!==i?$(document.body).append(i):n()}t()})},function(){n()})})),t},this.popupManager=new function(){var t=this,n=["region","push","subscriptions"],i="kommersantLastPopup",o={domain:"."+e.domain,path:"/",expires:e.utils.dateAdd(new Date,6048e5)};this.requests={},this.request=function(a,s,r){var c,l,d,u,f=0,m=0;if(n.indexOf(a)>=0){if("undefined"!=typeof t.requests[a])return;t.requests[a]=!!s&&r}for(u in t.requests)f++,t.requests[u]&&m++;if(f>=n.length&&m>0){for(c=e.utils.getCookie(i),l=""===c?-1:parseInt(e.utils.getCookie(i),10)||0,d=(l+1)%n.length;d!==l&&!t.requests[n[d]];)d=(d+1)%n.length;t.requests[n[d]](),e.utils.setCookie(i,d,o)}}},this.Notification=function(t,n){var i=this;n=$.extend({classes:"",isClosable:!0,autoClose:!0,autoCloseTimeout:3e3,onBeforeShow:function(){},onShow:function(){},onBeforeHide:function(){},onHide:function(){}},n);var o,a,s,r,c="keydown",l="click",d="is_shown",u=1e3,f=$(document),m=!1,h=function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),i.close())},p=function(e){a.hide(),a.offset(),a.show(),i.onShow.call(i)};this.isVisible=!1,this.isHovered=!1,this.isClosing=!1,this.isClosed=!1,this.message=t||"",this.onBeforeShow=n.onBeforeShow,this.onShow=n.onShow,this.onBeforeHide=n.onBeforeHide,this.onHide=n.onHide,this.show=function(){a.one("transitionend",p),a.addClass(d),i.isVisible=!0,i.onBeforeShow.call(i)},this.hide=function(){i.onBeforeHide.call(i),a.off("transitionend",p),a.removeClass(d),i.isVisible=!1},this.close=function(){if(!i.isClosing&&!i.isClosed){i.isClosing=!0;var e=function(){i.isClosed||(a.remove(),i.isClosing=!1,i.isClosed=!0,i.onHide.call(i))};f.off(c,h),a.on("transitionend",e),i.hide(),setTimeout(e,u)}},this.init=function(){o=$(".fixed_bottom__item--notifications"),o.length||(o=document.body),a=$(e.templates.apply("notification",{classes:n.classes,message:this.message,close:n.isClosable?e.templates.apply("notification-close"):""})),s=a.find(".b-notification__message_text"),r=a.find(".b-notification__close"),n.isClosable&&r.on(l,function(e){e.preventDefault(),i.close()}),n.autoClose&&setTimeout(function(){i.isHovered?m=!0:i.close()},n.autoCloseTimeout),f.on(c,h),a.on("mouseenter",function(e){i.isHovered=!0}),a.on("mouseleave",function(e){i.isHovered=!1,m&&i.close()}),s.on(l,"a",function(){i.close()}),a.prependTo(o),a.offset(),i.show()},e.templates.load().then(e.prepareFixed).then(function(){i.init()},function(){i.init()})},this.user=new function(){var t,i,o,a,s,r,c,l=this,d=e.iHost+"/user/registersocial",u=e.iHost+"/user/profileinfomycommon",f=e.iHost+"/user/logout",m=e.personalHost+"/lk/logout",h=e.personalHost+"/lk/login",p=e.personalHost+"/lk/register",g=e.personalHost+"/lk/profilestats",v=e.personalHost+"/lk/changeemail",k=e.personalHost+"/lk/changepassword",y=e.personalHost+"/lk/profilealiasdelete",w=e.personalHost+"/lk/profiledelete",b=e.personalHost+"/lk/bookmarkids",C=e.personalHost+"/lk/bookmarkmanage",x=e.personalHost+"/lk/subscriptionids",_=e.personalHost+"/lk/subscriptionmanage",j=e.personalHost+"/lk/viewhistoryadd",T=e.personalHost+"/lk/socialcallback",D="Для входа в личный кабинет включите сохранение файлов cookie",S="Не удалось подключиться к серверу",I="kommersantUserNew",E="kommersantUser",A="kommersantUserIsAuthorized",z="kommersantUserEverAuthorized",P="kommersantUserNotificationsCount",N="kommersantUserNotificationsTimestamp",O="kommersantUserFavoritesDocs",F="kommersantUserFavoritesGalleries",M="kommersantUserFavoritesLocalTime",H="kommersantUserFavoritesServerTime",K="kommersantUserSubscriptionsThemes",L="kommersantUserSubscriptionsAuthors",U="kommersantUserSubscriptionsLocalTime",R="kommersantUserSubscriptionsNotify",B=["sosh","lkuid"],q=36e5,W=31536e6,Y=6048e5,V=6048e5,G=6048e5,X=211,J=997,Q=61101,Z=577577,ee=599599,te=6e5,ne=!1,ie=null,oe=null,ae=null,se=null,re="",ce="",le="",de="",ue={domain:"."+e.domain,path:"/"},fe=function(){};this.urlLogout="/",this.urlNotAuthorized="/lk/notauthorized",this.urlProfile="/lk/profile",this.urlProfileEdit="/lk/profileedit",this.urlSubscriptionSettings="/lk/subscriptionsettings",this.urlReferrer="",this.isPagePersonal=!1,this.isPageAuthorizationRequired=!1,this.isPageNotAuthorized=!1,this.isPageUpdateProfile=!1,this.isPageNotificationsUpdate=!1,this.isAuthorized=!1,this.isLogin=!1,this.isLogout=!1,this.project=0,this.data={},this.dataString,this.alias=0,this.favoritesDocs=[],this.favoritesGalleries=[],this.favoritesLocalTime=new Date(0),this.favoritesServerTime="",this.subscriptionsThemes=[],this.subscriptionsAuthors=[],this.subscriptionsLocalTime=new Date(0),this.subscriptionsNotify=!1,this.callbacksAuthorized=[],this.callbacksAlias=[],this.callbacksNotifications=[],this.callbacksFavorites=[],this.callbacksSubscriptions=[],this.callbacksDestroy=[],this.loggedHistory=[],this.socialNetworks={0:"ko",1:"fb",2:"vk",3:"lj",4:"gp",5:"tw",6:"ok",7:"oi"},this.ready=new Promise(function(e,t){fe=e}),this.notifications=new function(){var t,i=this,o=!1,a=!1,s=function(){e.getInactivityTime()>=te||(r(),t=setTimeout(function(){i.check()},J),o=!0)},r=function(){clearTimeout(t),o=!1};this.reset=function(){r(),this.count=-1},this.clearCookies=function(){e.utils.deleteCookie(P,ue),e.utils.deleteCookie(N,ue)},this.check=function(){if(l.isAuthorized&&!a){r();var t=parseInt(e.utils.getCookie(P),10)||0;t!==this.count&&(this.count=t,this.show()),new Date>=e.utils.dateAdd(new Date(parseInt(e.utils.getCookie(N),10)||0),Q)?this.update():s()}},this.update=function(){if(l.isAuthorized&&!a){r(),a=!0;var t=$.extend({},ue,{expires:e.utils.dateAdd(new Date,Y)});e.utils.setCookie(N,(new Date).valueOf(),t),l.getProfileStats(function(){var n=parseInt(l.stats.SubscriptionNotificationsNew,10)||0;n!==i.count&&(i.count=n,i.show()),e.utils.setCookie(P,i.count,t),e.utils.setCookie(N,(new Date).valueOf(),t),s(),a=!1},function(){s(),a=!1})}},this.show=function(){e.utils.applyCallbacks(l.callbacksNotifications)},this.init=function(){"undefined"!=typeof document.hidden?$(document).on("visibilitychange",function(e){document.hidden?r():i.check()}):(n.on("focus",function(e){i.check()}),n.on("blur",function(e){r()})),$(document).on("kommersant:useractivity",function(e){o||i.check()}),l.isPageNotificationsUpdate?i.update():i.check()},this.reset()},this.getTypedArray=function(e){switch(e){case 1:return this.favoritesDocs;case 2:return this.favoritesGalleries;case 3:return this.subscriptionsThemes;case 4:return this.subscriptionsAuthors}},this.checkAuthorized=function(e){e==-50&&this.logoutLocal(function(){l.setUser()})},this.checkCookie=function(){var t,n,i=!!e.utils.getCookie(A);if(n=e.utils.getCookie(I),"undefined"!=typeof n&&""!==n){e.utils.deleteCookie(I,ue);try{t=JSON.parse(n)}catch(e){t={}}if("object"==typeof t)return void(0===t.ErrorCode?t.IsAlias?this.setAlias(t):(this.isLogin=!0,this.setUser(t)):new e.Notification(t.ErrorMessage))}if(this.isAuthorized&&!i)return void this.setUser();if(n=e.utils.getCookie(E),""===n&&i)return n=this.dataString,void this.getProfile(this.project);if(n!==this.dataString){this.dataString=n;try{t=JSON.parse(n)}catch(e){t={}}this.setUser(t,!0)}},this.getCookiesFavorites=function(){var t,n=e.utils.getCookie(O),i=e.utils.getCookie(F);if(this.favoritesLocalTime=new Date(parseInt(e.utils.getCookie(M),10)||0),this.favoritesServerTime=e.utils.getCookie(H),n!==re||i!==ce){for(this.favoritesDocs=n.length>0?n.split("!"):[],this.favoritesGalleries=i.length>0?i.split("!"):[],t=0;t<this.favoritesDocs.length;t++)this.favoritesDocs[t]=parseInt(this.favoritesDocs[t],10)||0;for(t=0;t<this.favoritesGalleries.length;t++)this.favoritesGalleries[t]=parseInt(this.favoritesGalleries[t],10)||0;re=n,ce=i,e.utils.applyCallbacks(this.callbacksFavorites)}},this.getCookiesSubscriptions=function(){var t,n=e.utils.getCookie(K),i=e.utils.getCookie(L);if(this.subscriptionsNotify=!!e.utils.getCookie(R),this.subscriptionsLocalTime=new Date(parseInt(e.utils.getCookie(U),10)||0),n!==le||i!==de){for(this.subscriptionsThemes=n.length>0?n.split("!"):[],this.subscriptionsAuthors=i.length>0?i.split("!"):[],t=0;t<this.subscriptionsThemes.length;t++)this.subscriptionsThemes[t]=parseInt(this.subscriptionsThemes[t],10)||0;for(t=0;t<this.subscriptionsAuthors.length;t++)this.subscriptionsAuthors[t]=parseInt(this.subscriptionsAuthors[t],10)||0;le=n,de=i,e.utils.applyCallbacks(this.callbacksSubscriptions)}},this.setCookiesFavorites=function(){var t=$.extend({},ue,{expires:e.utils.dateAdd(new Date,V)});e.utils.setCookie(O,this.favoritesDocs.join("!"),t),e.utils.setCookie(F,this.favoritesGalleries.join("!"),t),e.utils.setCookie(M,this.favoritesLocalTime.valueOf(),t),e.utils.setCookie(H,this.favoritesServerTime,t)},this.setCookiesSubscriptions=function(){var t=$.extend({},ue,{expires:e.utils.dateAdd(new Date,G)});e.utils.setCookie(K,this.subscriptionsThemes.join("!"),t),e.utils.setCookie(L,this.subscriptionsAuthors.join("!"),t),e.utils.setCookie(U,this.subscriptionsLocalTime.valueOf(),t),e.utils.setCookie(R,this.subscriptionsNotify?"1":"",t)},this.clearFavorites=function(){clearTimeout(ae),this.favoritesDocs=[],this.favoritesGalleries=[],this.favoritesLocalTime=new Date(0),this.favoritesServerTime="",e.utils.deleteCookie(O,ue),e.utils.deleteCookie(F,ue),e.utils.deleteCookie(M,ue),e.utils.deleteCookie(H,ue)},this.clearSubscriptions=function(){clearTimeout(se),this.subscriptionsThemes=[],this.subscriptionsAuthors=[],this.subscriptionsLocalTime=new Date(0),e.utils.deleteCookie(K,ue),e.utils.deleteCookie(L,ue),e.utils.deleteCookie(U,ue),e.utils.deleteCookie(R,ue)},this.setUser=function(t,n){var i,o;if(this.isAuthorized="object"==typeof t&&0===t.ErrorCode&&1===t.Status,this.isAuthorized?t.Rating=parseInt(t.Rating,10)||0:t={},this.data=t,!n){try{i=JSON.stringify(t)}catch(e){i="{}"}if(e.utils.setCookie(E,i,$.extend({},ue,{expires:e.utils.dateAdd(new Date,this.isAuthorized||e.utils.getCookie(z)?q:W)})),this.dataString=e.utils.getCookie(E),this.dataString!==i)return new e.Notification(D),void this.destroy();this.isAuthorized?e.utils.setCookie(z,1,$.extend({},ue,{expires:e.utils.dateAdd(new Date,W)})):(e.utils.deleteCookie(A,ue),this.notifications.clearCookies(),this.clearFavorites(),this.clearSubscriptions())}if(this.isAuthorized?(this.notifications.check(),this.favoritesUpdate(),this.subscriptionsUpdate()):(this.favoritesDocs=[],this.favoritesGalleries=[],this.subscriptionsThemes=[],this.subscriptionsAuthors=[],this.notifications.reset()),!(this.isAuthorized||null!==ie&&n))for(o=0;o<B.length;o++)e.utils.deleteCookie(B[o],ue);if(e.utils.applyCallbacks(this.callbacksAuthorized),e.utils.applyCallbacks(this.callbacksFavorites),e.utils.applyCallbacks(this.callbacksSubscriptions),this.isAuthorized){if(this.isPageNotAuthorized){if(window.name!==e.windowName||e.isWebView)return window.location.replace(this.urlReferrer||this.urlProfile),void this.destroy();window.open("","_self"),window.close()}else if(this.isPagePersonal&&ie===!1)return window.location.reload(),void this.destroy()}else{if(this.isPageAuthorizationRequired)return this.isLogout&&!e.isWebView?window.location.href=this.urlLogout:window.location.replace(this.urlNotAuthorized+"?r="+encodeURIComponent(window.location.pathname+window.location.search)),void this.destroy();if(this.isPagePersonal&&ie===!0)return window.location.reload(),void this.destroy()}ie=this.isAuthorized,this.isLogin=!1,this.isLogout=!1,fe()},this.setAlias=function(t){"object"!=typeof t||0!==t.ErrorCode||"number"!=typeof t.SocialNetworkAlias&&t.SocialNetworkAlias<=0||(this.alias=t.SocialNetworkAlias,e.utils.applyCallbacks(this.callbacksAlias),this.alias=0)},this.login=function(){e.utils.windowOpen(h,e.windowName,800,680)},this.register=function(){e.utils.windowOpen(p,e.windowName,800,680)},this.social=function(t,n,i){var o={project:t,socialNetwork:n,isAlias:i,callbackUrl:T};e.utils.windowOpen(d+"?"+$.param(o),e.windowName,800,680)},this.logout=function(){var e=2,t=function(){e--,e>0||(l.isLogout=!0,l.setUser())};this.logoutGlobal(t),this.logoutLocal(t)},this.logoutGlobal=function(e){var t={xhrFields:{withCredentials:!0},url:f,method:"POST"};"undefined"!=typeof e&&(t.complete=function(){e()}),$.ajax(t)},this.logoutLocal=function(e){var t={xhrFields:{withCredentials:!0},url:m,method:"POST"};"undefined"!=typeof e&&(t.complete=function(){e()}),$.ajax(t)},this.getProfile=function(t,n,i){n=n||function(){},i=i||function(){},$.ajax({xhrFields:{withCredentials:!0},url:u,method:"POST",data:{project:t},success:function(e){l.setUser(e),"object"==typeof e?0===e.ErrorCode?n():i(e.ErrorMessage):i(S)},error:function(t,n,o){l.setUser(),e.checkOutdated.apply(null,arguments)||i(S)}})},this.updateProfile=function(){e.utils.deleteCookie(E,ue)},this.getProfileStats=function(e,n){if(this.isAuthorized){e=e||function(){},n=n||function(){};try{t.abort()}catch(e){}t=$.ajax({xhrFields:{withCredentials:!0},url:g,method:"POST",success:function(t){"object"==typeof t?0===t.ErrorCode?(l.stats=t,l.data.Rating=parseInt(t.Rating,10)||0,e()):(n(t.ErrorMessage),l.checkAuthorized(t.ErrorCode)):n(S)},error:function(e,t,i){n(S)}})}},this.changeEmail=function(t,n,o){if(this.isAuthorized){n=n||function(){},o=o||function(){};try{i.abort()}catch(e){}i=$.ajax({xhrFields:{withCredentials:!0},url:v,method:"POST",data:{email:t},success:function(e){"object"==typeof e?0===e.ErrorCode?n():(o(e.ErrorMessage),l.checkAuthorized(e.ErrorCode)):o(S)},error:function(t,n,i){e.checkOutdated.apply(null,arguments)||o(S)}})}},this.changePassword=function(t,n,i,a){if(this.isAuthorized){i=i||function(){},a=a||function(){};try{o.abort()}catch(e){}o=$.ajax({xhrFields:{withCredentials:!0},url:k,method:"POST",data:{oldPassword:t,newPassword:n},success:function(e){"object"==typeof e?0===e.ErrorCode?i():(a(e.ErrorMessage),l.checkAuthorized(e.ErrorCode)):a(S)},error:function(t,n,i){e.checkOutdated.apply(null,arguments)||a(S)}})}},this.socialUnlink=function(t,n,i){if(this.isAuthorized){n=n||function(){},i=i||function(){};try{a.abort()}catch(e){}a=$.ajax({xhrFields:{withCredentials:!0},url:y,method:"POST",data:{socialNetwork:t},success:function(e){"object"==typeof e?0===e.ErrorCode?n():(i(e.ErrorMessage),l.checkAuthorized(e.ErrorCode)):i(S)},error:function(t,n,o){e.checkOutdated.apply(null,arguments)||i(S)}})}},this.profileDelete=function(t,n,i){if(this.isAuthorized){n=n||function(){},i=i||function(){};try{s.abort()}catch(e){}s=$.ajax({xhrFields:{withCredentials:!0},url:w,method:"POST",data:{password:t},success:function(e){"object"==typeof e?0===e.ErrorCode?(n(),l.logout()):(i(e.ErrorMessage),l.checkAuthorized(e.ErrorCode)):i(S)},error:function(t,n,o){e.checkOutdated.apply(null,arguments)||i(S)}})}},this.favoritesUpdate=function(){if(clearTimeout(ae),this.isAuthorized){var t=function(){ae=setTimeout(function(){l.favoritesUpdate()},J)};if(this.getCookiesFavorites(),this.favoritesLocalTime<e.utils.dateAdd(new Date,-Z)){this.favoritesLocalTime=new Date,this.setCookiesFavorites();try{r.abort()}catch(e){}r=$.ajax({xhrFields:{withCredentials:!0},url:b,method:"POST",data:{lastDateUpdate:l.favoritesServerTime},success:function(t){var n;if("object"==typeof t&&0===t.ErrorCode){if("object"==typeof t.Objects&&t.Objects instanceof Array)for(n=0;n<t.Objects.length;n++)t.Objects[n].Bookmark?e.utils.addUniqueElement(t.Objects[n].Id,l.getTypedArray(t.Objects[n].ObjectType)):e.utils.removeElement(t.Objects[n].Id,l.getTypedArray(t.Objects[n].ObjectType));l.favoritesLocalTime=new Date,l.favoritesServerTime=t.DateUpdate,l.setCookiesFavorites(),e.utils.applyCallbacks(l.callbacksFavorites)}},complete:function(){t()}})}else t()}},this.subscriptionsUpdate=function(t){if(clearTimeout(se),this.isAuthorized){var n=function(){se=setTimeout(function(){l.subscriptionsUpdate()},J)};if(this.getCookiesSubscriptions(),t||this.subscriptionsLocalTime<e.utils.dateAdd(new Date,-ee)){this.subscriptionsLocalTime=new Date,this.setCookiesSubscriptions();try{c.abort()}catch(e){}c=$.ajax({xhrFields:{withCredentials:!0},url:x,method:"POST",success:function(t){var n;if("object"==typeof t&&0===t.ErrorCode){if("object"==typeof t.Objects&&t.Objects instanceof Array)for(l.subscriptionsThemes=[],l.subscriptionsAuthors=[],n=0;n<t.Objects.length;n++)l.getTypedArray(t.Objects[n].ObjectType).push(t.Objects[n].Id);l.subscriptionsNotify=!!t.NotifySubscription,l.subscriptionsLocalTime=new Date,l.setCookiesSubscriptions(),e.utils.applyCallbacks(l.callbacksSubscriptions)}},complete:function(){n()}})}else n()}},this.favoritesManage=function(t,n,i,o,a){o=o||function(){},a=a||function(){},this.isAuthorized&&$.ajax({xhrFields:{withCredentials:!0},url:C,method:"POST",data:{objectIds:t,objectType:n,delete:!!i},success:function(s){"object"==typeof s?0===s.ErrorCode?(i?e.utils.removeElement(t,l.getTypedArray(n)):e.utils.addUniqueElement(t,l.getTypedArray(n)),l.setCookiesFavorites(),e.utils.applyCallbacks(l.callbacksFavorites),o()):(a(s.ErrorMessage),l.checkAuthorized(s.ErrorCode),e.utils.applyCallbacks(l.callbacksFavorites)):(a(S),e.utils.applyCallbacks(l.callbacksFavorites))},error:function(t,n,i){e.checkOutdated.apply(null,arguments)||a(S),e.utils.applyCallbacks(l.callbacksFavorites)}})},this.subscriptionsManage=function(t,n,i,o,a){o=o||function(){},a=a||function(){},this.isAuthorized&&$.ajax({xhrFields:{withCredentials:!0},url:_,method:"POST",data:{objectIds:t,objectType:n,delete:!!i},success:function(s){"object"==typeof s?0===s.ErrorCode?(l.getCookiesSubscriptions(),i?e.utils.removeElement(t,l.getTypedArray(n)):e.utils.addUniqueElement(t,l.getTypedArray(n)),l.setCookiesSubscriptions(),e.utils.applyCallbacks(l.callbacksSubscriptions),o()):(a(s.ErrorMessage),l.checkAuthorized(s.ErrorCode),e.utils.applyCallbacks(l.callbacksSubscriptions)):(a(S),e.utils.applyCallbacks(l.callbacksSubscriptions))},error:function(t,n,i){e.checkOutdated.apply(null,arguments)||a(S),e.utils.applyCallbacks(l.callbacksSubscriptions)}})},this.logHistory=function(e,t,n,i){!this.isAuthorized||this.loggedHistory.indexOf(e)>=0||"undefined"==typeof e||"undefined"==typeof t||(n=n||function(){},i=i||function(){},this.loggedHistory.push(e),$.ajax({xhrFields:{withCredentials:!0},url:j,method:"POST",data:{objectIds:e,objectType:t},success:function(e){"object"==typeof e?0===e.ErrorCode?n():(i(e.ErrorMessage),l.checkAuthorized(e.ErrorCode)):i(S)},error:function(e,t,n){i(S)}}))},this.cookiesEnabled=function(){var t,n="kommersantTest";return t=e.utils.getCookie(E),""!==t||(e.utils.setCookie(n,"1",$.extend({},ue,{expires:e.utils.dateAdd(new Date,1e4)})),t=e.utils.getCookie(n),e.utils.deleteCookie(n,ue),""!==t)},this.init=function(t){if(!ne){if(ne=!0,!this.cookiesEnabled())return new e.Notification(D),void this.destroy();this.project=t,(this.isPageNotAuthorized||this.isPageUpdateProfile)&&this.updateProfile(),oe=setInterval(function(){l.checkCookie()},X),this.checkCookie(),this.notifications.init(),this.isAuthorized&&"undefined"!=typeof objId&&"undefined"!=typeof objType&&this.logHistory(objId,objType)}},this.destroy=function(){ne&&(clearInterval(oe),this.notifications.reset(),ne=!1,e.utils.applyCallbacks(this.callbacksDestroy))}}}.call(window.kommersant={},kommersant,jQuery),function(){var e="_a_d3t6sf";kommersant.utils.getCookie(e)&&(kommersant.utils.deleteCookie(e),kommersant.utils.deleteCookie(e,{path:"/"}),kommersant.utils.deleteCookie(e,{domain:window.location.host}),kommersant.utils.deleteCookie(e,{domain:window.location.host,path:"/"}),kommersant.utils.deleteCookie(e,{domain:"www.kommersant.ru"}),kommersant.utils.deleteCookie(e,{domain:"www.kommersant.ru",path:"/"}),kommersant.utils.deleteCookie(e,{domain:"kommersant.ru"}),kommersant.utils.deleteCookie(e,{domain:"kommersant.ru",path:"/"}),kommersant.utils.deleteCookie(e,{domain:".kommersant.ru"}),kommersant.utils.deleteCookie(e,{domain:".kommersant.ru",path:"/"}))}(),function($){var e=$(window),t=$(document),n=$(document.documentElement),i=!1,o=!1,a=!1,s=function(){};n.removeClass("no-js"),"undefined"!=typeof window.isAppWebView?(kommersant.isWebView=!!window.isAppWebView,kommersant.isWebView&&n.addClass("webview")):kommersant.isWebView=n.hasClass("webview"),""==n.attr("class")&&n.removeAttr("class"),"undefined"!=typeof $.scrollTo&&$.extend($.scrollTo.defaults,{axis:"y",duration:500,interrupt:!0,
fail:function(t){e.scrollTop(t.props.scrollTop)}}),function(){var t="touch";kommersant.isTouch&&$(function(){$(document.body).addClass(t)}),e.one("mousemove",function(e){i=!0,!o&&kommersant.isTouch&&($(function(){$(document.body).removeClass(t)}),kommersant.isTouch=!1)}),e.one("touchstart",function(e){o=!0,i||kommersant.isTouch||($(function(){$(document.body).addClass(t)}),kommersant.isTouch=!0)})}(),window.canonical=[],window.kommersantInit=function(){},window.getDocsId=function(){return"number"==typeof window.docsId?window.docsId:parseInt((window.location.pathname.match(/^\/(doc|gallery)\/(\d+)/)||["","","0"])[2],10)},window.hisrcCached=function(e){var t,n="kommersantHisrc";try{return t=localStorage.getItem(n),"string"==typeof t&&t.indexOf($.md5(e))!==-1}catch(e){return!1}},window.lowsrc=function(){$(".lowsrc").each(function(){var e=$(this),t=e.hasClass("lowsrc-deferred"),n=this.src.replace(/_?(\[\d*\])?\.jpg$/i,".jpg");if(hisrcCached(n))n!=this.src&&(this.src=n);else if(a&&!t)s(n);else{var i=e.data("lowsrc")||n.replace(/_t(218|219|220)([_.])/,"_t221$2").replace(/_t222([_.])/,"_t223$1");i!=n&&(this.src=i,e.data("hisrc",n),t||e.addClass("hisrc"))}e.removeClass("lowsrc lowsrc-deferred")})},t.on("smi2Loaded",function(e){var t=$(e.target).closest(".slider");1===t.length&&(t.addClass("slider-involve"),kommersantInit())}),$(function(){var n=$(document.head),i=$(document.body),o="undefined"!=typeof window.onmousemove?e:t,r=$(),c=!1,l=function(){$("#navsearch-query").blur(),"function"==typeof $.fn.datepicker&&$(".datepicker, .datepicker-start, .datepicker-end").each(function(){var e=$(this);e.datepicker("hide"),e.is(":focus")&&e.blur()}),r.length?r.addClass("darkbox-active"):kommersant.templates.load().then(function(){r=$(kommersant.templates.apply("darkbox")),r.prependTo(i)},function(){})},d=function(){r.removeClass("darkbox-active")};s=function(e){var t,n=1e3,i="kommersantHisrc",o=" ",a=$.md5(e),s="",r=[];try{s=localStorage.getItem(i)||""}catch(e){return}"string"!=typeof s&&(s=""),""!==s&&(r=s.split(o),t=r.indexOf(a),t>=0&&r.splice(t,1)),r.unshift(a),r.length>n&&(r.length=n),s=r.join(o);try{localStorage.setItem(i,s)}catch(e){}};var u=function(e,t){var n=$(e),i=n.data(t)||"";""!=i&&(e.src=i,s(i)),n.removeData(t),n.removeClass("hisrc")},f=function(e,t){var n="data-",i="-src",o="-srcset",a=$(e),s=a.data(t+o)||"",r=a.data(t+i)||"";""!=s&&(e.srcset=s),""!=r&&(e.src=r),a.removeData([t+o,t+i]),a.removeAttr(n+t+o+" "+n+t+i)},m=function(e){kommersant.utils.checkInViewport($(".hisrc:visible",e),function(){u(this,"hisrc")})},h=null,p=function(e){function t(){var e="85687";if(window.docInfo&&docInfo.publishing&&docInfo.publishing.id){var t=docInfo.publishing.id;14==t&&(e="92293")}o.append('<div id="unit_'+e+'"></div>');var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="//news.smi2.ru/data/js/"+e+".js",n.charset="utf-8",o.append(n)}function n(){function t(){var e="dee7e2ffc551b7285e324eb4d09d3696";if(window.docInfo&&docInfo.publishing&&docInfo.publishing.id){var t=docInfo.publishing.id;284!=t&&285!=t||(e="153a0472138fd7902b467846e9e5a5ce"),14==t&&(e="7ed673dd0afa337b91f32ef3051e67e0")}return e}o.append('<div class="involve_left js-recommended-mailru"></div>');var n=$("undefined"!=typeof e?e:".js-recommended-mailru",o),i=t();if(0!==n.length){var a=function(e){return e.replace(new RegExp("^((https?:)?\\/\\/)?(www\\.)?"+kommersant.domain.replace(/\./g,"\\."),"i"),"")||"/"};n.each(function(){var e=$(this),t=function(){var e=function(){myWidget.get(i,{escaping:!1,n:8},function(e,t){if(e&&!e.error_code&&e._id&&e.list&&e.list.length&&!(e.list.length<3)){var i=[];$.each(e.list,function(e,t){if(!(e>=8)){var n=t.preview?t.preview.original_url:"",o={photo:n.replace("http://","https://").replace("_t219_","_t221_"),title:t.title.replace(/\s\/\/.*/gi,""),url:a(t.url),myWidgetId:t._id};o.photo&&o.title&&o.url&&o.myWidgetId&&i.push(o)}}),n(i,e._id),t()}})};window.myWidget?e():(window.myWidgetInit={useDomReady:!0,autoRender:!1},window.myWidgetAsyncCallbacks=window.myWidgetAsyncCallbacks||[],window.myWidgetAsyncCallbacks.push(e),document.getElementById("my-widget-script")||!function(e,t,n){var i,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(i=e.createElement(t),i.id=n,i.src="https://likemore-go.imgsmail.ru/widget.js",o.parentNode.insertBefore(i,o))}(document,"script","my-widget-script"))},n=function(t,n){if(t&&t.length&&!(t.length<3)){n&&e.attr("data-mywidget-id",n),e.append('<h3 class="title_light d-title_light--big-indent">Рекомендуем</h3>');var i=$('<ul class="involve_left__list"></ul>'),o=$('<li class="involve_left__item"><a href=""><div class="photo"><img src=""></div><h3 class="involve_left__subheader"></h3></a></li>');t.forEach(function(e,t){var n=o.clone(),a=e.photo,s=e.title,r=e.url,c=e.myWidgetId||null;n.find("a").prop("href",r).attr("data-mywidget-id",c),n.find(".photo img").prop("src",a).prop("alt",s),n.find(".involve_left__subheader").html(s),n.on("click",function(t){var n=new Image;n.src=e.clickPxl}),n.appendTo(i)}),i.appendTo(e),kommersantInit()}};t()})}}var i=$(".js-recommended-mailru");try{i&&i.length&&i.length>0&&i.hasClass("slider")&&i.parent().remove()}catch(e){}var o=$("#stickyLeft .sticky");o.html(""),h=h||Math.floor(2*Math.random())+1,1===h?t():n()};p(),window.kommersantInit=function(){var n=getDocsId();"function"==typeof $.fn.slider&&($(".slider-custom").not(".slider-ready").each(function(){var t=$(this),n=t.find(".slider-item");if(0===n.length)return void t.addClass("slider-ready");var i,o=t.find(".slider-custom-progress"),a=t.find(".slider-custom-resizable"),s=!0,r=[],c=0,l=1,d=t.data("slider-onready")||"",u=t.data("slider-onleave")||"",m=t.data("slider-onchange")||"",h=t.data("slider-oncomplete")||"",p=t.data("slider-onclick")||"",g=kommersant.utils.dataBoolean(t.data("slider-custom-hash")),v=g&&kommersant.utils.dataBoolean(t.data("slider-custom-history")),k=kommersant.utils.dataBoolean(t.data("slider-custom-counters")),y=parseInt(t.data("slider-custom-preload-backward"),10),w=parseInt(t.data("slider-custom-preload-forward"),10),b=parseInt(t.data("slider-custom-minitems"),10);isNaN(y)&&(y=1),isNaN(w)&&(w=2),isNaN(b)&&(b=2),n.length<b&&t.find(".slider-prev, .slider-next, .slider-nav").css("visibility","hidden");var C=function(e,t){var n="#id="+t;window.location.hash!=n&&(v?window.location=n:window.location.replace(n))},x=function(e,t){var n,i=function(e){var t=r[e];"undefined"!=typeof t&&(f(t,"slider"),delete r[e])};for(i(e),n=1;n<=Math.max(y,w);n++)n<=w&&i(e+n),n<=y&&i(e-n)},_=function(e,t){var n=[".js-gallery-resizable-item-current",".slider-item-current",".slider-nav-item-current"];a.each(function(){for(var e=$(this),t=$(),i=0;i<n.length&&!t.length;i++)t=e.find(n[i]);e.css("height",t.outerHeight(!0)||0)})},j={isKeyboard:!0,margin:30,onReady:function(n,o){c=n,l=o,x(n,o),a.length>0&&(e.on("kommersant:resize",function(e){_(n,o)}),document.addEventListener("load",function(e){_(n,o)},!0),_(n,o),a.css({overflow:"hidden",height:0,transition:"height 400ms ease"})),i=setTimeout(function(){t.addClass("slider-hover")},500),""!==d&&"undefined"!=typeof window[d]&&window[d].call(this,n,o)},onLeave:function(e,t){""!==u&&"undefined"!=typeof window[u]&&window[u].call(this,e,t)},onChange:function(e,t,n){""!==m&&"undefined"!=typeof window[m]&&window[m].call(this,e,t,n)},onComplete:function(t,n){if(t!=c){if(g&&C(t,n),x(t,n),_(t,n),k)try{countersUpdate()}catch(e){}c=t,l=n,setTimeout(function(){e.trigger("scroll")},100),""!==h&&"undefined"!=typeof window[h]&&window[h].call(this,t,n)}},onPseudoClick:function(e,n){clearTimeout(i),s=!s,s?t.addClass("slider-hover"):t.removeClass("slider-hover"),""!==p&&"undefined"!=typeof window[p]&&window[p].call(this,e,n)}};o.length>0&&(j.onStep=function(e,t,n,i,a){a=Math.max(.05,a),i>1&&(i=1),i<=0&&(i=0),o.css("transform","translateX("+(i*(1-a)*100).toFixed(2)+"%) scaleX("+a.toFixed(4)+")")});var T;"undefined"!=typeof(T=t.data("slider-start"))?j.start=T:g&&(j.start=window.location.hash.slice(4)||1),"undefined"!=typeof(T=t.data("slider-margin"))&&(j.margin=parseFloat(T)||0),"undefined"!=typeof(T=t.data("slider-align"))&&(j.align=parseFloat(T),isNaN(j.align)&&(j.align=.5)),"undefined"!=typeof(T=t.data("slider-duration"))&&(j.durationItem=parseInt(T,10)||0),kommersant.utils.dataBoolean(t.data("slider-nokeys"))&&(j.isKeyboard=!1),kommersant.utils.dataBoolean(t.data("slider-vertical"))&&(j.isVertical=!0),kommersant.utils.dataBoolean(t.data("slider-loop"))&&(j.isLooped=!0),kommersant.utils.dataBoolean(t.data("slider-auto"))&&(j.isAutoSlide=!0),"undefined"!=typeof(T=t.data("slider-auto-delay"))&&(j.autoSlideInterval=parseInt(T,10)||0),kommersant.utils.dataBoolean(t.data("slider-nodrag"))&&(j.isDraggable=!1),kommersant.utils.dataBoolean(t.data("slider-notransform"))&&(j.isTransform=!1),kommersant.utils.dataBoolean(t.data("slider-notransform3d"))&&(j.isTransform3d=!1),kommersant.utils.dataBoolean(t.data("slider-fit"))&&(j.isFit=!0),n.each(function(e){$(this).find("img").first().each(function(){var t=$(this),n=t.data("slider-src")||"";""!=n&&(r[e]=this)})}),t.slider(j),g&&e.on("hashchange",function(e){var n=window.location.hash.slice(4)||1;n!==l&&(e.preventDefault(),t.slider("goTo",n))})}),$(".slider-scroll").not(".slider-ready").each(function(){var e=$(this),t=e.find(".slider-item");if(t.each(function(){var e=$(this),t=e.data("docsid");t==n&&e.remove()}),0===t.length)return void e.addClass("slider-ready");var i=e.find(".slider-scroll-progress");e.slider({isFit:!0,isMomentum:!0,align:0,margin:30,onStep:function(e,t,n,o,a){a=Math.max(.05,a),o>1&&(o=1),o<=0&&(o=0),i.css("transform","translateX("+(o*(1-a)*100).toFixed(2)+"%) scaleX("+a.toFixed(4)+")")}})}),$(".slider-announce").not(".slider-ready").each(function(){var e=$(this),t=e.find(".slider-item");if(0===t.length)return void e.addClass("slider-ready");t.length<2&&e.find(".slider-prev, .slider-next, .slider-nav").css("visibility","hidden");var n=e.find(".slider-announce-progress"),i=[],o=0,a=function(e,t){var n,o=function(e){for(n=0;i[e]&&n<i[e].length;n++)"undefined"!=typeof i[e][n]&&(f(i[e][n],"slider"),delete i[e][n])};o(e),o(e+n)},s={isLooped:!0,isAutoSlide:!0,margin:20,autoSlideInterval:5e3,onReady:function(e,t){o=e,a(e,t)},onComplete:function(e,t){e!=o&&(a(e,t),o=e)}};n.length>0&&(s.onStep=function(e,t,i,o,a){a=Math.max(.05,a),n.each(function(e){$(this).css("transform","translateX("+(100*(o*(1-a)-e)).toFixed(2)+"%) scaleX("+a.toFixed(4)+")")})}),t.each(function(e){i[e]=[],$(this).find(".slider-announce-img").each(function(t){var n=/_t(221|218|219|220)([_.])/,o=this.src;if(o){var a=o.match(n);a&&($(this).data("slider-src",o.replace(n,"_t218$2")),"221"!==a[1]&&(this.src=o.replace(n,"_t221$2")),i[e][t]=this)}})}),e.slider(s)}),$(".slider-specials").each(function(){var e=$(this);e.slider({isKeyboard:!0,isLooped:!0,isAutoSlide:!0,autoSlideInterval:5e3,margin:30})}),$(".slider-doc-text").each(function(){var e=$(this);e.slider({margin:30,align:0})}),$(".slider-story").not(".slider-ready").each(function(){var e=$(this),t=e.find(".slider-item");if(0===t.length)return void e.addClass("slider-ready");var n=e.find(".slider-story-progress");e.slider({align:0,margin:51,onStep:function(e,t,i,o,a){a=Math.max(.05,a),o>1&&(o=1),o<=0&&(o=0),n.css("transform","translateX("+(o*(1-a)*100).toFixed(2)+"%) scaleX("+a.toFixed(4)+")")}})}),$(".slider-review").not(".slider-ready").each(function(){var e={margin:10},t=$(this),n=t.find(".slider-item");return 0===n.length?void t.addClass("slider-ready"):(1===n.length&&(t.find(".slider-prev, .slider-next, .review_slider-nav_lineup").css("visibility","hidden"),e.isDraggable=!1,e.isElastic=!1,e.isTransform=!1),void t.slider(e))}),$(".slider-involve").each(function(){var e=$(this);e.slider({align:0,margin:7,isLooped:!0})}),$(".js-gallery-doc").not(".js-gallery-ready").each(function(){var t,n,i=this,o=$(i),a=o.find(".js-gallery-slider-photos"),s=o.find(".js-gallery-slider-thumbs"),r=o.find(".js-gallery-progress"),c=o.find(".js-gallery-resizable"),l=!0,d=[],u=0,m=1,h=!1,p=o.data("gallery-onchange")||"",g=kommersant.utils.dataBoolean(o.data("gallery-hash")),v=g&&kommersant.utils.dataBoolean(o.data("gallery-history")),k=kommersant.utils.dataBoolean(o.data("gallery-counters")),y=kommersant.utils.dataBoolean(o.data("gallery-social")),w=function(e,t){var n="#"+t;window.location.hash!=n&&(v?window.location=n:"replaceState"in history?history.replaceState(null,null,n):window.location.replace(n))},b=function(e,t){var n,i=function(e){for(n=0;d[e]&&n<d[e].length;n++)"undefined"!=typeof d[e][n]&&(f(d[e][n],"slider"),delete d[e][n])};i(e),i(e+1)},C=function(e,t){c.each(function(){var e=$(this),t=e.find(".js-gallery-resizable-item-current");e.css("height",t.outerHeight(!0)||0)})},x=function(e,n){var i,o=t.eq(e),a=o.find(".js-gallery-description").text().replace(/\s{2,}/g," ").replace(/^\s+/g,"").replace(/\s+$/g,""),s={url:canonical[0]+"#"+n,description:a};for(i=0;d[e]&&i<d[e].length;i++)if("undefined"!=typeof d[e][i]&&"img"===d[e][i].tagName.toLowerCase()&&d[e][i].src){s.picture=d[e][i].src;break}kommersant.updateSocialButtons(s)},_=function(t,n){if(b(t,n),m=n,g&&w(t,n),y&&x(t,n),k&&t!==u)try{countersUpdate()}catch(e){}c.each(function(){var e=$(this),i=e.find(".js-gallery-resizable-item");i.each(function(e){var i=$(this);i.toggleClass("js-gallery-resizable-item-current",e===t),C(t,n)})}),setTimeout(function(){e.trigger("scroll")},100),u=t};return a.each(function(){var f=$(this);t=a.find(".slider-item"),0!==t.length&&(t.length<=1&&(s.remove(),r.remove(),o.find(".slider-prev, .slider-next, .slider-nav").css("visibility","hidden")),t.each(function(e){d[e]=[],$(this).find(".js-gallery-img").each(function(t){d[e][t]=this})}),f.slider({isKeyboard:!0,isElastic:t.length>1,start:g&&window.location.hash.slice(1)||1,margin:30,onReady:function(t,i){o.toggleClass("js-gallery-ready",!0),c.length>0&&(e.on("kommersant:resize",function(e){C(t,i)}),document.addEventListener("load",function(e){C(t,i)},!0),C(t,i),c.css({overflow:"hidden",height:0,transition:"height 400ms ease"})),n=setTimeout(function(){o.toggleClass("js-gallery-info",l)},500),_(t,i)},onChange:function(e,t,n){h||(s.slider("goTo",t),""!==p&&"undefined"!=typeof window[p]&&window[p].call(i,e,t,"method"===n?"thumbnails-click":n))},onComplete:function(e,t){e===u||h||(_(e,t),C(e,t))},onPseudoClick:function(e,t){clearTimeout(n),l=!l,o.toggleClass("js-gallery-info",l)}}))}),0===t.length?void o.addClass("js-gallery-ready"):(s.each(function(){var e=$(this);e.slider({isMomentum:!0,start:g&&window.location.hash.slice(1)||1,margin:10,onReady:function(e,t){},onDragStart:function(e,t){h=!0},onDragEnd:function(e,t){h=!1},onChange:function(e,t,n){h&&(h=!1,a.slider("goTo",t,0),_(e,t),""!==p&&"undefined"!=typeof window[p]&&window[p].call(i,e,t,"thumbnails-drag"))},onPseudoClick:function(e,t){a.slider("goTo",t,0)},onPass:function(e,t){h&&a.slider("goTo",t,0)},onStep:function(e,t,n,i,o){o=Math.max(.05,o),i>1&&(i=1),i<=0&&(i=0),r.css("transform","translateX("+(i*(1-o)*100).toFixed(2)+"%) scaleX("+o.toFixed(4)+")")}})}),void(g&&e.on("hashchange",function(e){var t=window.location.hash.slice(4)||1;t!==m&&(e.preventDefault(),a.slider("goTo",t))})))}),$(".slider-gallery").not(".slider-ready").each(function(){var t,n,i=$(this),o=i.find(".b-gallery-nav_lineup"),a=!0,s=[],r=0,c=1,l=0,d=function(e,t){var n="#id="+t;window.location.hash!=n&&window.location.replace(n)},f=function(e,t){var n=function(e){var t=s[e];"undefined"!=typeof t&&(u(t,"hisrc"),delete s[e])};n(e),n(e+1),n(e-1)},m=function(e,n){var i=t.eq(e).find(".slider-lazyload");i.length&&(i.each(function(){var e=$(this),t=e.html();t=kommersant.utils.uncomment(t.replace(/\{\{(.*?)\}\}/g,"$1")),e.replaceWith(t)}),kommersantInit())},h=function(e,n){var i=t.eq(e),o=i.find(".photo img").prop("src"),a=i.find(".b-gallery-pic_info__sign").html();kommersant.updateSocialButtons({url:canonical[0]+"#id="+n,picture:o,description:a})},p=function(){t=i.find(".slider-item")},g=function(){var e,t,n=window.location.search.slice(1).split("&"),i="",o=[];for(t=0;t<n.length;t++)if(e=n[t].split("="),"sids"===e[0]){i=decodeURIComponent(e[1]);break}return i&&(o=i.split(",")),o};if(p(),0===t.length)return void i.addClass("slider-ready");var v=g();if(v.length>0){var k=i.find(".b-gallery-nav_thumbs_item");t.each(function(e){var t=$(this),n=""+t.data("slider-id");v.indexOf(n)<0&&(t.remove(),k.eq(e).remove())}),p()}t.length<=1&&(o.not(".b-gallery-nav_thumbs").remove(),i.find(".b-gallery-nav_visual").addClass("hide3")),t.each(function(e){$(this).find(".photo").find("img").first().each(function(){var t=$(this),n=t.data("hisrc")||"";""!=n&&(s[e]=this)})}),i.slider({isKeyboard:!0,start:window.location.hash.slice(4)||1,margin:30,onReady:function(e,t){window.picsId=t,r=e,c=t,f(e,t),m(e,t),n=setTimeout(function(){i.addClass("slider-hover")},500),h(e,t)},onChange:function(e,t){window.picsId=t,h(e,t)},onComplete:function(e,t){if(e!=r){l++,d(e,t),f(e,t),m(e,t);try{countersUpdate()}catch(e){}l%4===0&&kommersant.advReload(".adv3-6_240pxx400px, .adv"),r=e,c=t}},onPseudoClick:function(e,t){clearTimeout(n),a=!a,a?i.addClass("slider-hover"):i.removeClass("slider-hover")}}),t.find(".b-gallery__item-original").on("click",function(e){e.stopPropagation()}),e.on("hashchange",function(e){var t=window.location.hash.slice(4)||1;t!==c&&(e.preventDefault(),i.slider("goTo",t))})}),$(".js-gallery-template").each(function(){var e=$(this),t=e.html();t=kommersant.utils.uncomment(t),e.prop("className",""),e.empty(),kommersant.utils.loadStyle(kommersant.antiCache.cssGallery).then(function(){e.replaceWith(t),kommersantInit()},function(){})})),"function"!=typeof $.fn.zoom||kommersant.isTouch||$(".zoom").each(function(){var e="zoom-ready",t=$(this);if(!t.hasClass(e)){var n={},i=t.data("zoom-src"),o=window.devicePixelRatio||1,a=!1,s=!1,r=function(e){s=!0},c=function(e){s=!1};"string"==typeof i&&i.length>0&&(n.url=i),n.duration=0,o>1&&(n.magnify=1/o),t.on("mouseenter",r),t.on("mouseleave",c),t.one("mouseover mousemove",function(e){a||(a=!0,s=!0,t.css({cursor:"progress"}),n.callback=function(){t.off("mouseenter",r),t.off("mouseleave",c),t.css({cursor:""}),s&&t.trigger("mouseover")},t.zoom(n))}),t.addClass(e)}}),function(){var n=".tooltip",i=250,o=500;!c&&$(n).length&&(c=!0,kommersant.templates.load().then(function(){var a,s=!1,r=!1,c="",l=$(kommersant.templates.apply("tooltip")),d=$(l),u=function(e){if(!s||c!==e){var t=function(){d.css({visibility:""}),r=!0};clearTimeout(a),d.html(e),d.css({visibility:"hidden"}),d.appendTo(document.body),r?t():a=setTimeout(t,i),s=!0,c=e}},f=function(e){s&&(clearTimeout(a),d.remove(),s=!1,e?r=!1:a=setTimeout(function(){r=!1},o))};t.on("mouseover",n,function(e){e.stopPropagation();var t=$(this),n="",i=t.data("tooltip-content"),o=t.data("tooltip-template");i?n=i.replace(/\\n/g,"<br>"):o&&(n=$(o).html()),""!==n&&u(n)}),t.on("mousemove",n,function(t){if(t.stopPropagation(),s){var n=d.outerWidth(!0),i=d.outerHeight(!0),o=t.pageX,a=t.pageY;o+n>e.width()+e.scrollLeft()&&(o=t.pageX-n,o<0&&(o=0)),a+i>e.height()+e.scrollTop()&&(a=t.pageY-i,a<0&&(a=0)),d.css({left:o,top:a})}}),t.on("mouseout",n,function(e){e.stopPropagation(),f()}),t.on("keydown",function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||f(!0)})},function(){}))}(),"function"==typeof $.fn.fitVids&&($(".fitvids, .b-article, .b-abandoned, .b-forums, .article_text_wrapper").fitVids({customSelector:'.lazyload > iframe[width][width!=""][width!="100%"][height][height!=""], iframe.fitvids, iframe[src*="platformcraft"], iframe[src*="//maps."], iframe[src*="google.com/maps/"], iframe[src*="//instagram.com"]'}),$(".col-small > .gbox").fitVids()),e.trigger("resize",!0)},function(){var e=function(e){var t,n="&";"string"!=typeof e&&(e="");var i=e.slice(1).split(n);for(t=0;t<i.length;t++)0!==i[t].indexOf("utm")&&0!==i[t].indexOf("from=")||i.splice(t--,1);return e=i.join(n),""!==e&&(e="?"+e),e},t=function(e,t){return"string"!=typeof e&&(e=""),e.replace(/(.*\/\/)/,t+"://")},i=function(e,t){"string"!=typeof e&&(e="");var n="//"+t+".";return e.indexOf(n)===-1?e:e.split(n).join("//")},o=function(e,t){"string"!=typeof e&&(e="");var n="//"+t+".";return e.indexOf(n)===-1?e.split("//").join(n):e},a=function(e){return o(e,"www")},s=function(e){return i(e,"www")},r=function(e){var n=t(e,"https"),i=t(e,"http");e&&(kommersant.utils.addUniqueElement(a(n),canonical),kommersant.utils.addUniqueElement(a(i),canonical),kommersant.utils.addUniqueElement(s(n),canonical),kommersant.utils.addUniqueElement(s(i),canonical))};n.find('link[rel="canonical"]').each(function(){r(this.href)}),n.find('meta[property="og:url"]').each(function(){r(this.content)});var c=kommersant.mainHost+window.location.pathname+e(window.location.search);c=i(c,"dev"),c=i(c,"www0"),c=i(c,"beta"),r(c)}(),function(){var t,n,i=!1,o=250,a=250;e.on("resize",function(e,s){return s?(clearTimeout(n),clearTimeout(t),i=!1,kommersant.utils.triggerCustomEvent(window,"kommersant:resizeend"),void kommersant.utils.triggerCustomEvent(window,"kommersant:resize")):(clearTimeout(n),n=setTimeout(function(){kommersant.utils.triggerCustomEvent(window,"kommersant:resizeend")},a),void(i||(clearTimeout(t),t=setTimeout(function(){kommersant.utils.triggerCustomEvent(window,"kommersant:resize"),i=!1},o),i=!0)))})}(),function(){var t,n,i=!1,o=250,a=250;e.on("scroll",function(e){clearTimeout(n),n=setTimeout(function(){kommersant.utils.triggerCustomEvent(window,"kommersant:scrollend")},a),i||(clearTimeout(t),t=setTimeout(function(){kommersant.utils.triggerCustomEvent(window,"kommersant:scroll"),i=!1},o),i=!0)})}(),function(){var t=function(e){var t=window.getComputedStyle?window.getComputedStyle(document.body,":after").getPropertyValue("content"):"",n=kommersant.media;'"'!==t[0]&&"'"!==t[0]||(t=t.slice(1,-1)),t!==n&&(kommersant.media=t,kommersant.utils.triggerCustomEvent(document,"kommersant:mediachange",{lastMedia:n,newMedia:t}))};e.on("kommersant:resize",t),t()}(),function(){var n=1e3,i=new Date,o=new Date,a=function(e){var t=new Date;kommersant.lastActivity=t,t-o>=n&&(kommersant.utils.triggerCustomEvent(document,"kommersant:useractivity",{inactivityTime:t-i}),o=t),i=t};e.on("focus",a),t.on("mousedown mousemove mouseup keydown keyup touchstart touchend visibilitychange",a)}(),function(){lowsrc();var t=$(".hisrc:visible"),n=t.length,i=0,o=0,s=function(){e.on("kommersant:resize kommersant:scroll",function(e){m()})},r=function(){a||(o++,i+o>=n&&c())},c=function(){a||(a=!0,m(),s())};t.each(function(){var e=$(this);hisrcCached(e.data("hisrc")||"")?(u(this,"hisrc"),i++):this.complete?r():e.one("load error",function(e){r()})}),i<n?e.one("load",function(e){c()}):c()}(),function(){var t=$(".resize");if(0!==t.length){var n=function(n){t.filter(":really-hidden").each(function(){var t=$(this),n=$(t.data("resize-places")||"").not(":really-hidden").first();0!==n.length&&(t.appendTo(n),e.trigger("resize"))})};e.on("kommersant:resize",n),n()}}(),function(){var n="lazyload",i=n+"-button",o=i+"-wrapper",a=i+"-content",s="lazyload-url",r="lazyload-screens-before",c="lazyload-screens-after",l="lazyload-unloadable",d="lazyload-fired",u="lazyload-loaded",f="lazyload-read",m="lazyload-content",h=function(e){kommersantInit(),kommersant.utils.triggerCustomEvent(e?e:document,"kommersant:lazyload")},p=function(){var t=$("."+n);if(0!==t.length){var i=e.scrollTop(),o=e.scrollLeft(),a=e.width(),p=e.outerHeight();t.each(function(){var t,g,v=$(this),k=v.data(s)||"",y=v.data(m)||"",w=v.data(r)||0,b=v.data(c)||0,C=""!==k,x=kommersant.utils.dataBoolean(v.data(l)),_=kommersant.utils.dataBoolean(v.data(d)),j=kommersant.utils.dataBoolean(v.data(f)),T=kommersant.utils.dataBoolean(v.data(u)),D=function(){},S=function(e){var t,n=[],i=[],o=[],a=document.createElement("div");a.insertAdjacentHTML("beforeend",e);var s=a.querySelectorAll("script");for(t=0;t<s.length;t++)s[t].src.length>0&&n.push(s[t].src);if(n.length>0){for(t=0;t<s.length;t++)0===s[t].src.length&&s[t].text.length>0&&i.push(s[t].text),s[t].parentNode.removeChild(s[t]);e=kommersant.utils.trim(a.innerHTML),v.html(e),v.find('div[id^="vk_post_"]').empty();var r=new Promise(function(e,i){for(D=i,t=0;t<n.length;t++)o.push(kommersant.utils.loadScript(n[t]));Promise.all(o).then(function(){e()},function(){i()})}),c=Promise.all(o.concat([r]));return c.then(function(){for(t=0;t<i.length;t++)v.each(function(){var e=document.createElement("script");e.text=i[t],this.insertAdjacentElement("beforeend",e)})},function(){}),c}return v.html(e),Promise.resolve()};if(!j){y=kommersant.utils.uncomment(v.html()).replace(/\{\{(.*?)\}\}/g,"$1").replace(/ data-twitter-extracted-i[0-9]+=".*?"/g,""),v.data(m,y),v.data(f,!0);var I=v.data();t=$('<div class="'+n+'"></div>'),v.replaceWith(t),v=t,v.data(I),j=!0,C&&""!==y&&S(y)}if(!_||x)var E=v.offset(),A=i>=E.top-p*(w+1)&&i<=E.top+v.outerHeight()+p*b,z=o>=E.left-a&&o<=E.left+v.outerWidth(),P=A&&z&&!v.is(":really-hidden");if(P&&!_&&(_=!0,v.data(d,_),C&&!T?g=$.ajax({url:k,method:"GET",dataType:"html",timeout:15e3,success:function(e){T=!0,y=e,v.data(u,T),v.data(m,y),S(y).then(function(){h(v.get(0))},function(){})},error:function(t,n,i){v.empty(),"error"===n&&(404===t.status?(T=!0,y="",v.data(u,T),v.data(m,y)):setTimeout(function(){_=!1,v.data(d,_)},5e3)),"timeout"===n&&(_=!1,v.data(d,_),e.trigger("scroll"))}}):S(y).then(function(){h(v.get(0))},function(){})),_&&!P&&x){if(_=!1,C)try{g.abort()}catch(e){}v.empty(),v.data(d,_),h(v.get(0))}})}};t.on("click","."+i,function(t){t.preventDefault();var n=$(this),i=n.closest("."+o),r=n.data(s)||"";1!==i.length&&(i=n),n.prop("disabled",!0),kommersant.templates.load().then(function(){var t;t=""===r?kommersant.utils.uncomment(i.find("."+a).html()).replace(/\{\{(.*?)\}\}/g,"$1"):kommersant.templates.apply("loading"),i.after(kommersant.templates.apply("lazyload",{url:r,content:t})),i.remove(),e.trigger("scroll")})}),e.on("resize scroll",function(e){p()}),p()}(),function(){t.on("click",".changeclass",function(t){var n,i,o=$(this),a=!1,s=o.data("changeclass");if("undefined"==typeof o.data("changeclass-nopreventdefault")&&t.preventDefault(),"object"==typeof s){for(n in s)if("object"==typeof s[n])for(i in s[n])switch(i){case"addClass":$(n).addClass(s[n][i]),a=!0;break;case"removeClass":$(n).removeClass(s[n][i]),a=!0;break;case"toggleClass":$(n).toggleClass(s[n][i]),a=!0}a&&e.trigger("resize",!0)}})}(),function(){var n="click",o="keydown",a="modal",s="generated",r=a,c=r+"_close",l=r+"_trigger",d="."+r,u="."+c,f="."+l,m=a+"-selector",h=a+"-template",p=function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),v())},g=function(){e.trigger("resize",!0)},v=function(){var e=!1;$(d).each(function(){e=!0;var t=$(this);"undefined"!=typeof t.data(s)?t.remove():t.removeClass(r)}),e&&(i.css({overflow:""}),document.removeEventListener(o,p,!0),g())};t.on(n,f,function(e){e.preventDefault();var t=!1,n=$(this),a=n.data(m)||"",c=n.data(h)||"";if(""!==a){var l=$(a);l.length>0&&(t=!0,l.addClass(r))}if(""!==c){var d=$(c).first().html();if(d){t=!0;var u=$(d);u.data(s,1),u.addClass(r),u.appendTo(document.body),kommersantInit()}}t&&(i.css({overflow:"hidden"}),document.addEventListener(o,p,!0),g())}),t.on(n,u,function(e){e.preventDefault(),v()})}(),function(){var n=function(e){var t=parseInt(e.data("more-duration"),10);return isNaN(t)&&(t=400),t};$(".more").each(function(){var e=$(this),t=!e.hasClass("more-expanded"),n=e.find(".more-hidden"),i=e.find(".more-trigger");n.each(function(){var e=$(this),t=e.parent(),n=e.prev(),i=e.next();e.add(t).add(n).add(i).not(".more-overflow").css("overflow","hidden")}),t||n.show(),i.each(function(){var e=$(this);e.hasClass("more-trigger-toggle")||(t===e.hasClass("more-trigger-hide")?e.addClass("hide"):e.removeClass("hide"))})}),t.on("click",".more-trigger",function(t){t.preventDefault();var i=$(this).closest(".more"),o=i.find(".more-hidden"),a=i.find(".more-trigger"),s=!i.hasClass("more-expanded"),r=n(i);o.stop(!0,!0),a.each(function(){var e=$(this);e.hasClass("more-trigger-toggle")||(s===e.hasClass("more-trigger-hide")?e.removeClass("hide"):e.addClass("hide"))}),s?(i.addClass("more-expanded"),o.slideDown(r,function(){kommersantInit()}),e.trigger("resize",!0)):(i.removeClass("more-expanded"),o.slideUp(r,function(){e.trigger("resize",!0)}))}),t.on("click",".more-all-expand",function(e){e.preventDefault(),$(this).addClass("hide"),$(".more-all-collapse").removeClass("hide"),$(".more").not(".more-expanded").each(function(){var e=$(this),t=e.find(".more-hidden"),i=e.find(".more-trigger"),o=n(e);t.stop(!0,!0),i.each(function(){var n=$(this);n.hasClass("more-trigger-toggle")||(n.hasClass("more-trigger-hide")?n.removeClass("hide"):n.addClass("hide")),e.addClass("more-expanded"),t.slideDown(o,function(){kommersantInit()})})})}),t.on("click",".more-all-collapse",function(t){t.preventDefault(),$(this).addClass("hide"),$(".more-all-expand").removeClass("hide"),$(".more.more-expanded").each(function(){var t=$(this),i=t.find(".more-hidden"),o=t.find(".more-trigger"),a=n(t);i.stop(!0,!0),o.each(function(){var n=$(this);n.hasClass("more-trigger-toggle")||(n.hasClass("more-trigger-hide")?n.addClass("hide"):n.removeClass("hide")),t.removeClass("more-expanded"),i.slideUp(a,function(){e.trigger("resize",!0)})})})})}(),$(".js-all").each(function(){var e=$(this),t=e.find(".js-all-checkbox"),n=e.find(".js-all"),i=e.find(".js-all-trigger").not(n.find(".js-all-trigger")),o=function(){var e=!0;t.each(function(){if(!this.checked)return e=!1,!1}),i.each(function(){var t=$(this),n=t.data("all-trigger-action")||"";"check"!==n&&"uncheck"!==n&&(this.checked=e)})};0!==t.length&&0!==i.length&&(i.on("click",function(e){this.type||e.preventDefault();var n,i=$(this),o=i.data("all-trigger-action")||"";switch(o){case"check":n=!0;break;case"uncheck":n=!1;break;default:n=!!this.checked}t.each(function(){this.checked=n,$(this).triggerHandler("change")})}),t.on("change",function(e){o()}),o())}),function(){var e=$(".js-additional");0!==e.length&&(e.on("change",".js-additional-button",function(e){var t,n,i=$(this).closest(".js-additional"),o=this,a=i.find(".js-additional-holder").not(i.find(".js-additional").find(".js-additional-holder"));if("undefined"!=typeof o.options)for(n=0;n<o.options.length;n++)a.eq(n).toggleClass("hide",n!==o.options.selectedIndex);else if("radio"===o.type&&"undefined"!==o.name){var s=o.form[o.name];for(n=0;n<s.length;n++)a.eq(n).toggleClass("hide",!s[n].checked)}else a.each(function(){var e=$(this);t=kommersant.utils.dataBoolean(e.data("additional-reverse")),e.toggleClass("hide",t?o.checked:!o.checked)});a.not(".hide").first().find(".js-additional-autofocus").focus().select()}),$(".js-additional-button").trigger("change"))}(),function(){t.on("click",".scrollto",function(t){t.preventDefault();var n,i=$(this),o=i.attr("href"),a=$(".fixed_panel").height()||0;n="string"==typeof o&&0===o.indexOf("#")&&o.length>1?o:i.data("scrollto-subject")||0,e.stop().scrollTo(n,{margin:!0,offset:-a})})}(),function(){var e=function(){var e=$(this),t=e.closest(".fakeelement"),n=t.find(".fakeelement-select-fake"),i=this.options[this.options.selectedIndex],o=i&&i.text||"";n.html(o),e.prop("title",o)};i.on("change",".fakeelement-select",e),$(".fakeelement-select").each(e)}(),function(){"function"==typeof $.fn.datepicker&&($.datepicker.regional.ru={closeText:"Закрыть",prevText:"Предыдущий",nextText:"Следующий",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед.",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.ru),$.datepicker.setDefaults({showAnim:!1}),$(".js-datepicker-single").each(function(){var e=$(this),t=e.find(".datepicker").addBack(".datepicker");
1===t.length&&t.datepicker({changeMonth:!0,changeYear:!0,yearRange:"1990:c",minDate:new Date(1990,0,1),maxDate:0})}),$(".js-datepicker-range").each(function(){var e=$(this),t=e.find(".datepicker-start"),n=e.find(".datepicker-end");1===t.length&&1===n.length&&(t.datepicker({changeMonth:!0,changeYear:!0,yearRange:"1990:c",minDate:new Date(1990,0,1),maxDate:0,onClose:function(e){n.datepicker("option","minDate",e)}}),n.datepicker({changeMonth:!0,changeYear:!0,yearRange:"1990:c",minDate:t.datepicker("getDate"),maxDate:0}))}))}(),function(){var t="width=1200",i="width=1200, maximum-scale=0.1",o="width=device-width, initial-scale=1.0",a="IsNonMobileViewport",s={domain:"."+kommersant.domain,path:"/",expires:kommersant.utils.dateAdd(new Date,31536e6)},r=$(".fullversion"),c=n.find('meta[name="viewport"]');kommersant.utils.getCookie(a)&&r.removeClass("hide"),$(".fullversion-link-on").on("click",function(n){n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||(n.preventDefault(),$(this).hasClass("fullversion-temporary")||kommersant.utils.setCookie(a,1,s),r.removeClass("hide"),c.attr("content",i),e.trigger("resize",!0),c.attr("content",t),e.trigger("resize",!0),setTimeout(function(){e.scrollTop(0)},100))}),$(".fullversion-link-off").on("click",function(t){t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault(),$(this).hasClass("fullversion-temporary")||kommersant.utils.deleteCookie(a,s),c.attr("content",o),e.trigger("resize",!0),setTimeout(function(){e.scrollTop(0)},100))})}(),function(){var e=500,n=100;$(".navmenu").each(function(){var i,a=$(this),s=a.find(".navmenu-toggle"),r="",c=!1,u=function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),h())},f=function(e){c&&0===e.type.indexOf("touch")&&e.preventDefault(),h()},h=function(e,n,i){var s;"string"!=typeof e&&(e=""),e!==r&&("string"!=typeof n&&(n=""),"string"!=typeof i&&(i=""),""!==e&&(s=$("#navmenu-"+e),0===s.length&&(""===i?e="":($("#navmenu-rubrics").append(kommersant.templates.apply("navmenu-item",{type:n,id:e,loading:kommersant.templates.apply("loading")})),s=$("#navmenu-"+e),$.post(i,function(t){var n=s.is(".navmenu-item-active");s.replaceWith(t),s=$("#navmenu-"+e),n&&(s.addClass("navmenu-item-active"),m(s))})))),""!==r?($("#navmenu-"+r).removeClass("navmenu-item-active"),a.find(".navmenu-toggle-active").removeClass("navmenu-toggle-active")):""!==e&&(o.on("touchstart mousedown",f),t.on("keydown",u)),""!==e?(a.addClass("navmenu-active"),a.find(".navmenu-toggle-current").addClass("navmenu-toggle-active"),c&&l(),s.length>0&&(s.addClass("navmenu-item-active"),m(s))):(o.off("touchstart mousedown",f),t.off("keydown",u),d(),a.removeClass("navmenu-active"),a.find(".navmenu-toggle-active").removeClass("navmenu-toggle-active")),r=e)};s.on("touchstart mouseenter mouseleave mousedown click",function(t){var o=$(this),s=o.data("navmenu-id")||"",l=o.data("navmenu-type")||"",d=o.data("navmenu-url")||"";if(clearTimeout(i),c="undefined"!=typeof o.data("navmenu-darkbox"),kommersant.isTouch&&0!==t.type.indexOf("touch"))return t.preventDefault(),void t.stopPropagation();switch(t.type){case"touchstart":if(t.stopPropagation(),""!==s&&s===r){h();break}case"mouseenter":if(""!==s&&s!==r){var u=function(){h(s,l,d)};a.find(".navmenu-toggle-current").removeClass("navmenu-toggle-current"),o.addClass("navmenu-toggle-current"),"touchstart"===t.type||a.find(".navmenu-toggle-active").length>0?u():i=setTimeout(u,e)}break;case"mouseleave":i=setTimeout(function(){h()},n);break;case"mousedown":clearTimeout(i),t.stopPropagation()}}),s.on("touchend",function(e){e.preventDefault(),e.stopPropagation()}),a.on("mouseenter",".navmenu-item",function(e){return kommersant.isTouch?(e.preventDefault(),void e.stopPropagation()):void clearTimeout(i)}),a.on("mouseleave",".navmenu-item",function(e){return kommersant.isTouch?(e.preventDefault(),void e.stopPropagation()):(clearTimeout(i),void(i=setTimeout(function(){h()},1)))}),a.on("touchstart touchend",".navmenu-item",function(e){e.stopPropagation()}),a.on("mousedown",".navmenu-item",function(e){kommersant.isTouch&&e.preventDefault(),e.stopPropagation()})})}(),function(){var e,i=function(e){return e=parseInt(e,10)||0,e>=1e6?""+Math.floor(e/1e6)+"M":e>=1e4?""+Math.floor(e/1e3)+"K":""+e},o=function(e){if(e){if(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)return;e.preventDefault()}var t=$(this),i="",a="",s="",r="",c="",l=t.data("socials-network"),d=t.data("socials-url"),u=t.data("socials-picture"),f=t.data("socials-quote"),m=t.data("socials-title"),h=t.data("socials-description"),p=function(e,t){return"string"==typeof e&&e.length>t&&(e=e.slice(0,t)+"..."),e},g=function(e){return p(e,150)},v=function(e){return p(e,300)},k=function(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},y=function(){return[m||s,h||r].join(" // ")};if(e&&""===l&&d+u+f+m+h!=="")$(".socials-link").each(function(){var e=$(this),t=e.data("socials-network"),n=!1;t&&("undefined"!=typeof d&&(e.data("socials-url",d),n=!0),"undefined"!=typeof u&&(e.data("socials-picture",u),n=!0),"undefined"!=typeof f&&(e.data("socials-quote",f),n=!0),"undefined"!=typeof m&&(e.data("socials-title",m),n=!0),"undefined"!=typeof h&&(e.data("socials-description",h),n=!0)),n&&o.call(this)});else if(l){switch(a=d?d:canonical[0],s=n.find('meta[property="og:title"]').prop("content")||"",r=n.find('meta[property="og:description"]').prop("content")||"",c=n.find('link[rel="image_src"]').prop("href")||"",l){case"fb":i="https://www.facebook.com/sharer.php?"+k({u:a,title:g(m||s),description:v(f||h||r)});break;case"vk":i="https://vk.com/share.php?"+k({url:a,image:u||c,title:v(f||y()),noparse:"true"});break;case"tw":i="https://twitter.com/intent/tweet?"+k({url:a,text:v(f||y())});break;case"ok":i="https://connect.ok.ru/offer?"+k({url:a,imageUrl:u,title:g(m||s),description:v(f||h||r)});break;case"gp":i="https://plus.google.com/share?"+k({url:a});break;case"tg":i="https://t.me/share/url?"+k({url:a,text:v(f||y())});break;case"wa":i="https://wa.me/?"+k({text:a+"\n"+v(f||y())});break;case"ml":i="mailto:?"+k({subject:g(m||s),body:v(f||h||r)+"\n\n"+a})}if(i&&(this.href=i),!e||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)return;(i||this.href&&"#"!==t.attr("href"))&&kommersant.utils.windowOpen(i?i:this.href,"socials",800,450)}e&&!l&&this.href&&"#"!==t.attr("href")&&kommersant.utils.windowOpen(this.href,"socials",800,450)};t.on("click",".socials-link",o),t.on("kommersant:click",".socials-link",function(){o.call(this)}),$(".socials-link").each(function(){o.call(this)}),kommersant.shareCount.vk=0;var a=$(".socials-value-vk");if(a.length>0)for(a.removeClass("hide"),"object"!=typeof window.VK&&(window.VK={}),"object"!=typeof window.VK.Share&&(window.VK.Share={}),window.VK.Share.count=function(e,t){kommersant.shareCount.vk+=parseInt(t,10)||0,kommersant.shareCount.lastUpdate=new Date,kommersant.shareCount.vk>0&&a.html(i(kommersant.shareCount.vk))},e=0;e<canonical.length;e++)$.getJSON("https://vk.com/share.php?act=count&index=1&format=json&url="+encodeURIComponent(canonical[e])+"&callback=?");kommersant.shareCount.fb=0;var s=$(".socials-value-fb");if(s.length>0){s.removeClass("hide");var r=function(e){"object"==typeof e&&"object"==typeof e.share&&"undefined"!=e.share.share_count&&(kommersant.shareCount.fb=parseInt(e.share.share_count,10)||0,kommersant.shareCount.lastUpdate=new Date),kommersant.shareCount.fb>0&&s.html(i(kommersant.shareCount.fb))};$.getJSON("https://graph.facebook.com/?id="+encodeURIComponent(canonical[0]),r)}kommersant.shareCount.ok=0;var c=$(".socials-value-ok");if(c.length>0)for(c.removeClass("hide"),"object"!=typeof window.ODKL&&(window.ODKL={}),window.ODKL.updateCount=window.ODKL.updateCountOC=window.ODKL.updateCountForVoted=function(e,t){kommersant.shareCount.ok+=parseInt(t,10)||0,kommersant.shareCount.lastUpdate=new Date,kommersant.shareCount.ok>0&&c.html(i(kommersant.shareCount.ok))},e=0;e<canonical.length;e++)$.getJSON("https://connect.ok.ru/dk?st.cmd=extLike&uid=odklcnt0&ref="+encodeURIComponent(canonical[e])+"&callback=?")}(),function(){var e="togglable",n="."+e,i="."+e+"__trigger",o="."+e+"__input",a=e+"-state",s="disabled";t.on("click",i,function(t){t.preventDefault();var i=$(this),r=i.closest(n),c=r.find(o),l=i.data(a),d="undefined"!=typeof l?!!l:r.hasClass(e+"--1");r.removeClass(e+"--"+(d?0:1)),r.addClass(e+"--"+(d?1:0)),c.prop(s,!d)}),$(n).each(function(){var t=$(this);if(t.hasClass(e+"--0")){var n=t.find(o);n.prop(s,!0)}})}(),function(){var e=$("#navsearch"),t=$("#navsearch-form"),n=$("#navsearch-query"),i=$("#navsearch-submit"),o="is_active",a="not_empty",s=function(){e.hasClass(o)||(e.addClass(o),n.select(),kommersant.sendEvent("new_header","click","search"))},r=function(){e.hasClass(o)&&(e.removeClass(o),n.blur())};return 1===e.length&&1===t.length&&1===n.length&&(t.on("submit",function(t){return e.hasClass(o)?""===n.val()?(r(),!1):void 0:(s(),n.focus(),!1)}),n.on("focus",function(e){s()}),n.on("blur",function(e){r()}),n.on("keydown",function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),r())}),n.on("input change",function(e){var t=$(this),n=t.val();""===n&&t.hasClass(a)&&t.removeClass(a),""===n||t.hasClass(a)||t.addClass(a)}),i.on("mousedown",function(e){e.preventDefault()}),void $("#frmSearch").on("submit",function(e){if("object"!=typeof this.search_query||""===this.search_query.value)return!1}))}(),$(".poll__form").each(function(){var e=this,t=$(e);t.on("submit",function(n){n.preventDefault(),0!==t.find(".poll__input:checked").length&&(t.find(".poll__answers").toggleClass("poll__answers--result",!0).offset(),$.ajax({url:"/poll/vote",method:"POST",data:t.serialize()}),$.ajax({url:"/poll/resultasync/"+(parseInt(e.QuestionId.value,10)||0),method:"GET",success:function(e){if("object"==typeof e&&"object"==typeof e.Results)for(var n=0;n<e.Results.length;n++){var i=e.Results[n].Id,o=e.Results[n].Percent,a=t.find(".poll__answer--"+i);a.find(".poll__answer_percents").html(((0===o||100===o?o.toString():o.toFixed(2))+"%").replace(/\./g,",")),a.find(".poll__answer_scale_value").css({transform:"scaleX("+(o/100).toFixed(4)+")"})}}}),kommersant.sendEvent("poll","click","vote"))})}),$(".js-search").each(function(){var e=$(this),n=e.find(".datepicker-start"),i=e.find(".datepicker-end"),o=e.find(".js-search-rules"),a=e.find(".js-search-rules-button"),s=o.find(".nano"),r=s.find(".nano-content"),c=o.find(".js-search-rules-close"),l=e.find(".js-search-more"),d=e.find(".js-search-clear"),u="search_rules_content--is_shown",f=!1,m=function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),g())},h=function(e){g()},p=function(){f||(o.addClass(u),"function"==typeof $.fn.nanoScroller&&(s.nanoScroller({preventPageScrolling:!0,iOSNativeScrolling:!0}),r.focus()),t.on("keydown",m),t.on("mousedown touchstart",h),f=!0,kommersant.sendEvent("search","click","rules"))},g=function(){f&&(t.off("keydown",m),t.off("mousedown touchstart",h),o.removeClass(u),"function"==typeof $.fn.nanoScroller&&s.nanoScroller({destroy:!0}),f=!1)},v=function(){$(".js-additional-holder.hide").each(function(){var e=$(this);e.find(".js-search-checkbox").prop("checked",!1),e.find(".datepicker-start, .datepicker-end").val("")}),d.prop("disabled",""===n.val()&&""===i.val()&&0===e.find(".js-search-checkbox:checked").length&&3===e.find(".js-search-settings").find(".js-search-radio:first:checked").length)};1===n.length&&1===i.length&&(n.datepicker({changeMonth:!0,changeYear:!0,yearRange:"1990:c",minDate:new Date(1990,0,1),maxDate:0,beforeShow:function(){kommersant.sendEvent("search","click","date.from")},onClose:function(e){i.datepicker("option","minDate",e)}}),i.datepicker({changeMonth:!0,changeYear:!0,yearRange:"1990:c",minDate:n.datepicker("getDate"),maxDate:0,beforeShow:function(){kommersant.sendEvent("search","click","date.to")}})),o.on("mousedown touchstart",function(e){e.stopPropagation()}),a.on("mousedown touchstart",function(e){f&&e.stopPropagation()}),a.on("click",function(e){e.preventDefault(),f?g():p(),e.detail&&a.blur()}),c.on("click",function(e){e.preventDefault(),g()}),l.on("click",function(e){kommersant.sendEvent("search","click","more")}),d.on("click",function(t){t.preventDefault(),e.find(".js-search-checkbox").prop("checked",!1),e.find(".js-search-settings").find(".js-search-radio:first").trigger("click"),n.val(""),i.val(""),v(),kommersant.sendEvent("search","click","clear")}),e.on("change",".js-search-radio, js-search-checkbox, .datepicker-start, .datepicker-end",function(e){v()}),e.find(".js-search-radio").on("click",function(e){e.which&&kommersant.sendEvent("search","click","options."+this.name+"."+this.value)}),v()}),function(){var e=getDocsId();if(e){var t,n,i=window.location.search.slice(1).split("&"),o="";for(n=0;n<i.length;n++)if(t=i[n].split("="),"query"===t[0]){o=decodeURIComponent(t[1]);break}if(o){$("#bankruptcyQuery").val(o);var a=!!window.docsId;kommersant.utils.loadScript(kommersant.antiCache.jsMark).catch(function(){}),$.ajax({url:a?"/search/GetDocWordForms":"/search/GetGalleryWordForms",method:"POST",data:{docsId:e,query:o},success:function(e){if(e.success&&e.WordForms.length&&e.WordForms.length){for(var t=0;t<e.WordForms.length;t++)e.WordForms[t]=e.WordForms[t].replace(/([\/.*+?|()[\]{}\\])/g,"\\$1");kommersant.utils.loadScript(kommersant.antiCache.jsMark).then(function(){"function"==typeof $.fn.mark&&$(a?".b-article > header, .article_text_wrapper":".b-gallery > header, .b-gallery .b-gallery-pic_info__sign").markRegExp(new RegExp("(^|[^A-Za-zА-Яа-я0-9])("+e.WordForms.join("|")+")([^A-Za-zА-Яа-я0-9]|$)","g"),{ignoreGroups:1})},function(){})}}})}}}(),$(".js-story").each(function(){var e=$(this),t=e.find(".js-story-digest"),n=t.find(".js-story-digest-content"),i=e.find(".js-story-more"),o=e.find(".js-story-more-pagesize"),a=e.find(".js-story-more-count"),s=$(),r=e.data("story-id")||"",c=0,l=0,d={Note:"Заметка",PhotoGallery:"Фото",Video:"Видео"},u={Note:"article",PhotoGallery:"photogallery",Video:"video"},f=function(){i.toggleClass("hide",!0),kommersant.templates.load().then(function(){s=$(kommersant.templates.apply("loading")),s.appendTo(t);var e={id:r,offset:l};c>0&&(e.pageSize=c),$.ajax({url:"/theme/storydocs",method:"GET",data:e,complete:function(){s.remove()},success:function(e){var t,s,r,f,m,h,p,g,v,k,y,w="";if(e){if(c<=0&&(c=e.pageSize),l=Math.min(e.offset+c,e.count),y=Math.min(c,e.count-l),i.toggleClass("hide",l>=e.count),o.html(y+" "+kommersant.utils.plural(y,"материал","материала","материалов")),a.html(e.count),e.data&&e.data.length){for(var b=0;b<e.data.length;b++)t=("PhotoGallery"===e.data[b].type?"/gallery/":"/doc/")+e.data[b].id,s=kommersant.parseServerDate(e.data[b].date),r=s.getTimezoneOffset(),f=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2)+"T"+("0"+s.getHours()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2)+":"+("0"+s.getSeconds()).slice(-2)+(r<=0?"+":"-")+("0"+Math.floor(Math.abs(r)/60)).slice(-2)+":"+("0"+Math.abs(r)%60).slice(-2),m=("0"+s.getDate()).slice(-2)+"."+("0"+(s.getMonth()+1)).slice(-2)+(s.getFullYear()!==(new Date).getFullYear()?"."+s.getFullYear():"")+" | "+("0"+s.getHours()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2),h=e.data[b].imgSrc&&e.data[b].imgSrc.indexOf("//")>=0&&e.data[b].imgSrc||"",p=e.data[b].imgAlt||"",g=e.data[b].title||"",v=e.data[b].subTitle||"",k=e.data[b].intro||"",w+="News"===e.data[b].type?kommersant.templates.apply("story-item-short",{href:t,time:isFinite(s)?kommersant.templates.apply("story-item-time",{datetime:f,dateStr:m}):"",photo:h.length?kommersant.templates.apply("story-item-photo",{imgSrc:h,imgAlt:p}):"",title:g.length?kommersant.templates.apply("story-item-title",{title:g}):"",intro:k.length&&!h.length?kommersant.templates.apply("story-item-intro",{intro:k}):""}):kommersant.templates.apply("story-item-full",{href:t,tag:u[e.data[b].type]?kommersant.templates.apply("story-item-tag",{iconCaption:d[e.data[b].type]||"",iconType:u[e.data[b].type]||""}):"",time:isFinite(s)?kommersant.templates.apply("story-item-time",{datetime:f,dateStr:m}):"",photo:h.length?kommersant.templates.apply("story-item-photo",{imgSrc:h,imgAlt:p}):"",title:g.length?kommersant.templates.apply("story-item-title",{title:g}):"",subtitle:v.length?kommersant.templates.apply("story-item-subtitle",{subTitle:v}):""});n.append(w)}}else i.toggleClass("hide",!1)},error:function(e,t,n){i.toggleClass("hide",!1)}})},function(){})};i.on("click",function(e){e.preventDefault(),f()}),t.length>0&&i.length>0&&f()}),function(){t.on("click",".review_slider__open, .review_slider__close",function(t){t.preventDefault();var n=$(this);n.closest(".review_slider").toggleClass("is_expanded",n.hasClass("review_slider__open")),e.trigger("resize",!0)})}(),function(){var e="fm_player",t="fm_player__controls",n="fm_player__bitrate__item",i="fm_player__bitrate__item--selected",o={domain:"."+kommersant.domain,path:"/",expires:kommersant.utils.dateAdd(new Date,6048e5)},a="fmPlayerBitrate",s=$("."+e);if(s.length){var r=kommersant.utils.getCookie(a);""!==r?s.each(function(){var e=$(this),o=e.find("."+t),a=e.find("."+n);a.each(function(){var e=$(this);if(e.text()===r)return void(e.hasClass(i)||(a.removeClass(i),e.addClass(i),o.prop("src",this.href)))})}):s.each(function(){var e=$(this),o=e.find("."+t),a=e.find("."+n),s=o.attr("src");a.each(function(){var e=$(this);if(this.href===s)return void e.addClass(i)})}),$("."+n).on("click",function(n){n.preventDefault();var s=$(this),r=s.closest("."+e),c=r.find("."+t);s.hasClass(i)||(kommersant.utils.setCookie(a,s.text(),o),r.find("."+i).removeClass(i),s.addClass(i),c.prop("autoplay",!0),c.prop("src",this.href))})}}(),function(){$(".fm_announce").length&&kommersant.utils.loadScript(kommersant.antiCache.jsFmCommon).catch(function(){})}(),t.on("click",".window-close",function(e){e.preventDefault(),window.name!==kommersant.windowName||kommersant.isWebView||(window.open("","_self"),window.close())}),t.on("click",".captcha-reload",function(e){e.preventDefault(),$.ajax({url:kommersant.personalHost+"/captcha/regenerate",method:"POST",success:function(e){$(".captcha").html(e)}})}),function(){var t="responsive_table--simplified",n=100,i=function(e){var i,o,a,s=0,r=$(e),c=r.children("tbody"),l=r.hasClass(t),d=0;if(c.length&&window.getComputedStyle){var u=window.getComputedStyle(c.get(0),":after");if(u){var f=u.getPropertyValue("content");'"'!==f[0]&&"'"!==f[0]||(f=f.slice(1,-1)),d=parseInt(f,10)||0}}if(0===d){for(o=0;o<e.rows.length;o++){for(i=0,a=0;a<e.rows[o].cells.length;a++)i+=e.rows[o].cells[a].colSpan;i>s&&(s=i)}d=n*s}r.outerWidth(!0)<d?l||r.addClass(t):l&&r.removeClass(t)},o=function(e){e&&e.target&&$(e.target).hasClass("responsive_table")?i(e.target):$(".responsive_table").not(":really-hidden").each(function(){i(this)})};e.on("kommersant:resize",o),o()}(),function(){var t=getDocsId();"object"==typeof kommersant.backend.lentaIds&&"undefined"!=typeof kommersant.backend.lentaIds.length||(kommersant.backend.lentaIds=[]);var n=kommersant.backend.lentaIds.indexOf(t);n>=0&&kommersant.backend.lentaIds.splice(n,1);var i=".adv3-9_240pxx800px",o=".adv3-16_240pxx400px",a=o;$(".js-lenta").each(function(){var t=$(this),n=t.data("lenta-type")||"",s=t.data("lenta-archive")||"/archive",r="/doc/"+("article"===n?"doclazyload":"newslazyload")+"/",c=77;"region"===n&&"object"==typeof docInfo&&"object"==typeof docInfo.region&&"number"==typeof docInfo.region.id&&isFinite(docInfo.region.id)&&docInfo.region.id>0&&(c=docInfo.region.id);var l=function(d){kommersant.templates.load().then(function(){var u,f,m=t,h=function(e){if(e!==kommersant.backend.lentaIds.length)switch(e%3){case 0:t.find(".adv2-1_100x100px, .adv1-1_100x100px, .adv3-7_870pxx240px, .adv3-420-600pxx240px").find('div[id^="adfox_"]').prop("id","").removeAttr("id"),m.append('<div class="adv1-1_100x100px adv2-1_100x100px hide3">'+kommersant.templates.apply("lazyload",{url:"/common/bannernew?placeid=103&regionid="+c,before:1,after:50})+'</div><div class="adv3-420-600pxx240px hide1 hide2">'+kommersant.templates.apply("lazyload",{url:"/common/bannernew?placeid=119&regionid="+c,before:1,after:50})+"</div>");break;case 1:t.find(".smi2_slider").prop("id","").removeAttr("id"),m.append(kommersant.templates.apply("lazyload",{url:"/common/bannernew?placeid="+("article"===n?"148":"style"===n?"158":"161")+"&regionid=77",before:1,after:50}));break;case 2:m.append(kommersant.templates.apply("lazyload",{content:kommersant.utils.comment(kommersant.templates.apply("zen")),before:1,after:50}))}};d<kommersant.backend.lentaIds.length?(f=r+kommersant.backend.lentaIds[d],u="article"!==n&&d>0&&d%4===0?kommersant.templates.apply("lenta-button-more",{url:f}):kommersant.templates.apply("lazyload",{url:f,after:50,content:kommersant.templates.apply("loading")}),0===d&&"style"!==n&&(m.append(kommersant.templates.apply("lazyload",{url:"region"===n?"/gbox/index/779/0/"+c:"/gbox/index/777/0/77",before:1,after:50})),h(d)),m=$('<div class="printable">'),m.one("kommersant:lazyload",function(e){if(kommersant.utils.applyCallbacks(kommersant.user.callbacksFavorites),kommersant.utils.applyCallbacks(kommersant.user.callbacksSubscriptions),"news"===n&&d+1===4){var t=$(i),s=$(o);1===t.length&&1===s.length&&(kommersant.utils.swapNodes(t.get(0),s.get(0)),a=i)}"region"!==n&&kommersant.advReload(a),h(d+1),l(d+1)}),m.html(u),m.appendTo(t)):"article"!==n&&t.append(kommersant.templates.apply("lenta-button-archive",{url:s})),e.trigger("scroll")})};t.on("click",".lazyload-button",function(e){if("article"!==n&&p(),"article"===n){var i=$(this).closest(".js-article"),o=t.find(".js-article");kommersant.sendEvent("lenta.doc","click.full",o.index(i)+1);var a="#full";"replaceState"in history?history.replaceState(null,null,a):window.location.replace(a)}else kommersant.sendEvent("lenta","click","more")}),t.on("kommersant:lazyload",function(e){var t=$(e.target);t.find(".js-recommended-mailru").each(function(){p($(this))}),t.closest(".js-article").find(".js-lenta-vvodka").remove()}),l(0)})}(),function(){var n,i=!1,o="js-canonical",a="js-canonical-current",s="js-canonical-favorites",r="lenta__item--current",c=.5,l=[],d=null;if($("."+o).length){history.scrollRestoration="manual";var u=function(){if(!i&&(n=e.outerHeight()*c,l=[],$("."+o).each(function(){l.push({element:this,offset:$(this).offset().top})}),l.length)){var t,u,f,m,h,p=e.scrollTop();for(t=0;t<l.length;t++)f=l[t].offset-p-n,f<=0?("undefined"==typeof m||m<f)&&(m=f,u=t):("undefined"==typeof h||h>f)&&(h=f,"undefined"==typeof u&&(u=t));if(u!==d){if($(l[u].element).each(function(){var e=$(this);"article"===e.closest(".js-lenta").data("lenta-type")?kommersant.sendEvent("lenta.doc","show.article",u+1):kommersant.sendEvent("lenta","show.article",u+1)}),null===d&&0===u)return $(l[u].element).addClass(a+" "+r),void(d=u);$("."+a).removeClass(a+" "+r),$(l[u].element).each(function(){var t=$(this),n=t.data("article-docsid")||"",i=t.data("article-daterfc822")||"",o=parseInt(t.data("article-publishing-id"),10)||0,c=t.data("article-publishing-name")||"",l=t.data("article-publishing-url")||"",d=parseInt(t.data("article-rubric-id"),10)||0,u=t.data("article-rubric-name")||"",f=t.data("article-rubric-url")||"",m=parseInt(t.data("article-section-id"),10)||0,h=t.data("article-section-name")||"",p=t.data("article-section-url")||"",g=parseInt(t.data("article-region-id"),10)||0,v=t.data("article-region-name")||"",k=t.data("article-region-url")||"",y=t.data("canonical-url")||"",w=t.data("canonical-doctitle")||"",b=t.data("canonical-title")||"",C=t.data("canonical-description")||"",x=t.data("canonical-image")||"",_=y.replace(/^(.*:)?\/\/[^\/]*/,"");document.title=w,"replaceState"in history&&history.replaceState(null,w,_),t.addClass(a+" "+r),$("."+s).data("user-favorites-id",n),kommersant.utils.applyCallbacks(kommersant.user.callbacksFavorites),kommersant.updateSocialButtons({url:y,title:b,description:C,picture:x}),kommersant.user.logHistory(n,1),"object"==typeof docInfo&&(0!==o&&""!==c&&""!==l?docInfo.publishing={id:o,name:c,url:l}:docInfo.publishing=null,0!==d&&""!==u&&""!==f?docInfo.rubric={id:d,name:u,url:f}:docInfo.rubric=null,0!==m&&""!==h&&""!==p?docInfo.section={id:m,name:h,url:p}:docInfo.section=null,0!==g&&""!==v&&""!==k?docInfo.region={id:g,name:v,url:k}:docInfo.region=null,docInfo.authors=null,docInfo.rubrics=null,docInfo.dateRFC822=i.length?i:null,docInfo.refresh=!0,e.trigger("scroll"))}),d=u}}};t.on("click",".js-article-comment",function(t){var n=$(this),i=n.closest(".js-article");if(0===i.length&&(i=$("."+a)),0!==i.length){t.preventDefault();var o=function(){if("undefined"!=typeof $.fn.comments){var t=i.find(".comments");if(0===t.length){var n=parseInt(i.data("article-docsid"),10)||getDocsId();if(!n)return;t=$('<div class="comments"></div>'),t.appendTo(i),t.comments({project:1,objectType:1,objectId:n})}var o=kommersant.utils.dataBoolean(t.data("shown"));o||(t.removeClass("hide"),t.data("shown",!0));var a=t.offset().top,s=e.scrollTop(),r=e.outerHeight(),c=$(".fixed_panel").height()||0;s+r-100<a||s>a-c?$.scrollTo(t,{margin:!0,offset:-c}):o&&(t.data("shown",!1),t.addClass("hide")),e.trigger("scroll")}};"undefined"!=typeof $.fn.comments?o():(kommersant.utils.loadStyle(kommersant.antiCache.cssComments),kommersant.utils.loadScript(kommersant.antiCache.jsComments).then(function(){o()},function(){}))}}),"#comments"===window.location.hash&&0===$("#comments").length&&$(".js-article-comment").first().trigger("click"),e.on("kommersant:resize kommersant:scroll",u),u(),e.on("beforeprint",function(e){i=!0}),e.on("afterprint",function(e){i=!1})}}(),function(){var e,t,n,i,o,a,s=1990;if("function"==typeof $.fn.datepicker){var r,c,l=function(e){return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+("0"+e.getFullYear()).slice(-4)};if("undefined"!=typeof existingDates){for(r=function(e){var t=e.getFullYear()-s,n=e.getMonth(),i=e.getDate();return[existingDates&&existingDates[t]&&existingDates[t][n]&&existingDates[t][n].indexOf(i)!==-1,""]},c=function(e){return e<=i},o=0;o<existingDates.length;o++)if(!e&&existingDates[o]&&(e=s+o),existingDates[o])for(a=0;!n&&a<existingDates[o].length;a++)existingDates[o][a]&&(n=new Date(o+s,a,existingDates[o][a][0]));o=existingDates.length-1,a=existingDates[existingDates.length-1].length-1,t=o+s,i=new Date(t,a,existingDates[o][a][existingDates[o][a].length-1])}else r=function(){return!0},c=function(){return!0},e=s,t=(new Date).getFullYear(),n=new Date(e,0,1),i=0;$(".datepicker-archive-day").each(function(){var o=$(this),a={changeMonth:!0,changeYear:!0,yearRange:e+":"+t,minDate:n,maxDate:i,onSelect:function(e,t){$(this.form).submit()}};"undefined"!=typeof existingDates&&(a.beforeShowDay=r),o.datepicker(a)}),$(".datepicker-archive-week").each(function(){var o,a,s=$(this),c=function(e){var t=e.match(/^([0-9]{2})\.([0-9]{2})\.([0-9]{4}) — ([0-9]{2})\.([0-9]{2})\.([0-9]{4})$/);if(t&&(o=new Date(parseInt(t[3],10),parseInt(t[2],10)-1,parseInt(t[1],10))),!t||isNaN(o.valueOf())){var n=new Date;o=new Date(n.getFullYear(),n.getMonth(),n.getDate())}return o.setDate(o.getDate()-(o.getDay()+6)%7),a=new Date(o),a.setDate(a.getDate()+6),l(o)+" — "+l(a)},d={changeMonth:!0,changeYear:!0,showOtherMonths:!0,yearRange:e+":"+t,minDate:n,maxDate:i,dateFormat:"dd.mm.yy — dd.mm.yy",beforeShow:function(e,t){e.value=c(e.value)},beforeShowDay:function(e){return e-o>=0&&e-a<=0?[!0,"ui-datepicker-current"]:r(e)},onSelect:function(e){$(this).val(c(e)),$(this.form).submit()}};s.datepicker(d)}),$(".datepicker-archive-month").each(function(){var o,a,s=$(this),c=function(e){var t=e.match(/^([0-9]{2})\.([0-9]{2})\.([0-9]{4}) — ([0-9]{2})\.([0-9]{2})\.([0-9]{4})$/);if(t&&(o=new Date(parseInt(t[3],10),parseInt(t[2],10)-1,parseInt(t[1],10))),!t||isNaN(o.valueOf())){var n=new Date;o=new Date(n.getFullYear(),n.getMonth(),1)}return o.setDate(1),a=new Date(o),a.setMonth(a.getMonth()+1),a.setDate(0),l(o)+" — "+l(a)},d={changeMonth:!0,changeYear:!0,yearRange:e+":"+t,minDate:n,maxDate:i,dateFormat:"dd.mm.yy — dd.mm.yy",beforeShow:function(e,t){e.value=c(e.value)},beforeShowDay:function(e){return e-o>=0&&e-a<=0?[!0,"ui-datepicker-current"]:r(e)},onSelect:function(e){$(this).val(c(e)),$(this.form).submit()}};s.datepicker(d)}),$(".js-archive-form").each(function(){var e=$(this);e.on("submit",function(t){t.preventDefault();var n=e.find(".datepicker"),i=n.val(),o=i.slice(6,10)+"-"+i.slice(3,5)+"-"+i.slice(0,2),a=parseInt(e.find("input[name=nodesid]:checked").val()||"",10)||0;o.search(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)!==-1&&(window.location.href=this.action+o+(a?"?nodesid="+a:""))}),e.find(".js-archive-next").each(function(){var e=$(this),t=e.data("href")||"",n=t.match(/(\d{4})-(\d{2})-(\d{2})/);if(n){var i=new Date(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10));c(i)&&e.attr("href",t)}})})}}(),function(){var e;t.on("click",".user-login",function(e){e.preventDefault(),kommersant.user.logout(),kommersant.user.login(),kommersant.sendEvent("user","click","login")}),t.on("click",".user-register",function(e){e.preventDefault(),kommersant.user.logout(),kommersant.user.register(),kommersant.sendEvent("user","click","register")}),t.on("click",".user-social",function(e){e.preventDefault();var t=$(this),n=parseInt(t.data("user-source"),10)||0,i="undefined"!=typeof t.data("user-alias");kommersant.user.social(1,n,i)}),t.on("click",".user-logout",function(e){e.preventDefault(),kommersant.user.logout(),kommersant.sendEvent("user","click","logout")}),t.on("click",".user-favorites",function(t){var n=this,i=$(n),o="checkbox"===n.type,a=i.data("user-favorites-action"),s=parseInt(i.data("user-favorites-id"),10)||0,r=parseInt(i.data("user-favorites-type"),10)||0;o?a=n.checked?"add":"del":t.preventDefault(),kommersant.user.isAuthorized?kommersant.user.favoritesManage(s,r,o?!n.checked:"del"===a,function(){kommersant.sendEvent("user","favorites",a)},function(e){new kommersant.Notification(e)}):(e&&!e.isClosed||(e=new kommersant.Notification('Кто Вы? <a href="#" class="user-register">Зарегистрируйтесь</a> или <a href="#" class="user-login">войдите</a>, чтобы добавить в Избранное.',{autoClose:!0,autoCloseTimeout:1e4})),kommersant.utils.applyCallbacks(kommersant.user.callbacksFavorites))}),t.on("click",".user-subscriptions",function(t){var n=this,i=$(n),o="checkbox"===n.type,a=i.data("user-subscriptions-action"),s=parseInt(i.data("user-subscriptions-id"),10)||0,r=parseInt(i.data("user-subscriptions-type"),10)||0;o?a=n.checked?"add":"del":t.preventDefault(),kommersant.user.isAuthorized?kommersant.user.subscriptionsManage(s,r,o?!n.checked:"del"===a,function(){kommersant.sendEvent("user","subscriptions",a),o&&n.checked||!o&&"add"===a?(e&&!e.isClosed||(e=kommersant.user.data.Email?kommersant.user.subscriptionsNotify?new kommersant.Notification("Вы успешно подписаны. Теперь уведомления о свежих материалах будут приходить Вам на e-mail "+kommersant.user.data.Email+'. Изменить настройки подписки Вы можете в <a href="'+kommersant.user.urlSubscriptionSettings+'" target="_blank">личном кабинете</a>'):new kommersant.Notification('Для получения уведомлений о свежих материалах в почту измените настройки e-mail уведомлений в <a href="'+kommersant.user.urlSubscriptionSettings+'" target="_blank">личном кабинете</a>'):new kommersant.Notification('Укажите в <a href="'+kommersant.user.urlProfileEdit+'" target="_blank">профиле</a> свой e-mail, чтобы получать уведомления о свежих материалах в почту. Настройками подписки Вы можете управлять в <a href="'+kommersant.user.urlSubscriptionSettings+'" target="_blank">личном кабинете</a>')),3===r&&kommersant.sendYa("goal","user_subscribe_theme"),4===r&&kommersant.sendYa("goal","user_subscribe_author")):e&&!e.isClosed&&e.close()},function(e){new kommersant.Notification(e)}):(e&&!e.isClosed||(e=new kommersant.Notification('Кто Вы? <a href="#" class="user-register">Зарегистрируйтесь</a> или <a href="#" class="user-login">войдите</a>, чтобы подписаться на уведомления.',{autoClose:!0,autoCloseTimeout:1e4})),kommersant.utils.applyCallbacks(kommersant.user.callbacksSubscriptions))}),t.on("click",".user-email-author",function(t){
kommersant.user.isAuthorized||(t.preventDefault(),e&&!e.isClosed||(e=new kommersant.Notification('Кто Вы? <a href="#" class="user-register">Зарегистрируйтесь</a> или <a href="#" class="user-login">войдите</a>, чтобы написать автору.',{autoClose:!0,autoCloseTimeout:1e4})))});var n=function(){$(".js-auth").addClass("is_active").toggleClass("is_authorized",kommersant.user.isAuthorized)},i=function(){$(".user-social").each(function(){var e=$(this),t=parseInt(e.data("user-source"),10)||0,n="undefined"!=typeof e.data("user-alias");if(n&&t===kommersant.user.alias){var i=e.closest(".togglable");i.removeClass("togglable--0"),i.addClass("togglable--1")}})},o=function(){$(".js-auth-notifications").toggleClass("hide",!kommersant.user.notifications.count).html(kommersant.user.notifications.count||"")},a=function(){$(".user-favorites").each(function(){var e=$(this),t=kommersant.user.isAuthorized;if(t){var n=parseInt(e.data("user-favorites-id"),10),i=parseInt(e.data("user-favorites-type"),10);t=kommersant.utils.inArray(n,kommersant.user.getTypedArray(i))}if("checkbox"===this.type)this.checked=t;else{var o=e.data("user-favorites-action");if("del"===o)return;var a=e.closest(".togglable");a.toggleClass("togglable--0",!t),a.toggleClass("togglable--1",t)}})},s=function(){$(".user-subscriptions").each(function(){var e=$(this),t=kommersant.user.isAuthorized;if(t){var n=parseInt(e.data("user-subscriptions-id"),10),i=parseInt(e.data("user-subscriptions-type"),10);t=kommersant.utils.inArray(n,kommersant.user.getTypedArray(i))}if("checkbox"===this.type)this.checked=t;else{var o=e.data("user-subscriptions-action");if("del"===o)return;var a=e.closest(".togglable");a.toggleClass("togglable--0",!t),a.toggleClass("togglable--1",t)}})},r=function(){$(".js-auth").removeClass("is_active is_authorized")};kommersant.user.callbacksAuthorized.push(n),kommersant.user.callbacksAlias.push(i),kommersant.user.callbacksNotifications.push(o),kommersant.user.callbacksFavorites.push(a),kommersant.user.callbacksSubscriptions.push(s),kommersant.user.callbacksDestroy.push(r),kommersant.user.init(1)}(),function(){function n(){function e(){return/^\/doc\//i.test(window.location.pathname)}var t=$(".main_header"),n=$(".b-article:first").offset(),i=t.offset(),o=t.height(),a=window.pageYOffset,s=0;return"undefined"==typeof a||"undefined"==typeof n&&("undefined"==typeof i||"undefined"==typeof o)||(n&&n.top&&n.top>0?s=n.top:i&&i.top&&i.top>0&&o&&o>0&&e()&&(s=i.top+o),!(s>0)||a<s)}var i=$(".fixed_panel"),o=$(".fixed_panel__search_input"),a=$(".search_panel__submit_button"),s=$(".popup_menu"),r=$(".popup_menu__inner"),c=$(".popup_menu__toggle"),l=$(".popup_menu__close"),d=null,u=!1,f=!1,m=!1,h=function(e){if("boolean"==typeof e){if(e===f)return}else e=!f;i.toggleClass("fixed_panel--is_shown",e),$(document.body).toggleClass("fixed_panel_shown",e),f=e,kommersant.sendEvent("fixed_menu","visibility",e?"show":"hide")},p=function(e){if("boolean"==typeof e){if(e===m)return}else e=!m;s.toggleClass("popup_menu--is_shown",e),m=e,e?(t.on("keydown",g),t.on("mousedown touchstart",v)):(r.scrollTop(0),t.off("keydown",g),t.off("mousedown touchstart",v)),kommersant.sendEvent("popup_menu","visibility",e?"show":"hide")},g=function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),p(!1))},v=function(e){p(!1)};c.length&&s.length&&(c.on("click",function(e){e.preventDefault(),p()}),l.on("click",function(e){e.preventDefault(),p(!1)}),s.on("click mousedown touchstart",function(e){e.stopPropagation()}),c.on("mousedown touchstart",function(e){e.stopPropagation()}),i.length&&(n()||h(!0),o.on("keyup",function(e){27==e.keyCode&&o.trigger("blur")}),o.on("focus",function(){o.select(),i.addClass("fixed_panel--search_active")}),o.on("blur",function(){i.removeClass("fixed_panel--search_active")}),a.on("click",function(e){o.val()&&$("#fake-search-form").submit()}),$("#fake-search-form").on("submit",function(e){e.stopPropagation(),e.preventDefault();var t=o.val(),n=$("#navsearch-query");t&&(n.val(t),$("#navsearch-form").submit())}),e.on("scroll",function(){n()?u||(h(!1),d&&clearTimeout(d)):(h(!0),d&&clearTimeout(d),u=!1)})))}(),function(){var n,o=".article_text_wrapper",a="",s=!1,r=!1,c=33;if($(o).length){var l=function(t,n,i){var o=e.width(),a=e.height(),s=t.offset(),r=t.outerWidth(!0),c=t.outerHeight(!0),l=s.top,d=e.scrollTop(),u=n+r,f=$(".fixed_panel").height(),m=d-l,h=l+c-(d+a);m+=f,m=-m;var p=o-u;p<0&&(n+=p),m<0&&(i-=m),h>0&&(i-=h),t.css({left:n,top:i})},d=function(e,t,n){kommersant.templates.load().then(function(){var o,a,s=$(kommersant.templates.apply("partialsharing",{top:n,left:t})),c=["vk","ok","tw"];for(a=0;a<c.length;a++)o=$(kommersant.templates.apply("partialsharing-item",{network:c[a]})),o.find(".socials-link").each(function(){var t=$(this);t.data("socials-network",c[a]),t.data("socials-picture","//im.kommersant.ru/contentflex/images/logos/logo_quote.jpg"),t.data("socials-description",e)}),s.append(o);i.append(s),s.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),s.find(".socials-link").each(function(){kommersant.utils.triggerCustomEvent(this,"kommersant:click")}),s.on("click",".socials-link",function(e){var t=$(this).data("socials-network")||"";requestAnimationFrame(u),kommersant.sendEvent("partialsharing","click",t)}),l(s,t,n),r=!0,kommersant.sendEvent("partialsharing","visibility","show")},function(){})},u=function(){r&&($(".partial_sharing").remove(),r=!1,kommersant.sendEvent("partialsharing","visibility","hide"))},f=function(e){var t=120,n=e.length>t,i=n?e.substr(0,t-3):e;return n?i.substr(0,i.lastIndexOf(" "))+"...":i},m=function(){if(clearTimeout(n),s)return h();var t=window.getSelection();if(!t||!t.rangeCount)return u(),h();var i=t.toString();if(i.length<5)return u(),h();if(i&&i.length){if(a===i)return h();a=i,u();var r=$(t.focusNode.parentNode),c=$(t.baseNode.parentNode);if(!r.closest(o).length||!c.closest(o).length)return h();var l=t.getRangeAt(0),m=l.getBoundingClientRect(),p=e.scrollTop();d(f(i),m.left,p+m.top)}else u();return h()},h=function(){n=setTimeout(m,c)};t.on("mousedown",function(e){1===e.which&&(s=!0,u())}),t.on("mouseup",function(e){s&&1===e.which&&(s=!1)}),t.on("mousemove",function(e){s&&1!==e.which&&(s=!1)}),t.on("keydown",function(e){if(!(27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){var t=$(".partial_sharing");t.length&&(e.stopImmediatePropagation(),u())}}),e.on("kommersant:resize",function(e){a=""}),h()}}(),function(){$(".main_header").length&&kommersant.templates.load().then(kommersant.prepareFixed).then(function(){$(".fixed_bottom__item--buttons").append(kommersant.templates.apply("upbutton"));var t=$(".up_button");if(t.length){var n,i=e.width(),o=0,a=0,s=30,r=!1,c=!1,l=function(){clearTimeout(n),c||(r||(t.addClass("is_shown"),r=!0),i<1100&&(n=setTimeout(d,3e3)))},d=function(){clearTimeout(n),!c&&r&&(t.removeClass("is_shown"),r=!1)},u=function(){requestAnimationFrame(function(){var t=e.scrollTop(),n=e.outerHeight(),i=t-o;if(0!==i){(i>0&&a<0||i<0&&a>0)&&(a=0),a+=i;var r=t>1.2*n;Math.abs(a)>=s&&(r&&a<0?l():d()),o=t}})};t.on("click",function(t){t.preventDefault(),d(),c=!0;var n=function(){c=!1};e.stop().scrollTo(0,{onAfter:function(){n()},fail:function(){e.scrollTop(0),n()}})}),e.on("resize",function(t){i=e.width(),u()}),e.on("scroll",function(e){u()})}},function(){})}(),function(){var t=$(".js-middle").closest(".col-large");if(t.length&&!$(".js-lenta").length){var n=$(".js-rightside"),i=n.children();if(n.length&&i.length){var o=function(a){var s,r,c=t.height(),l=n.height();if(c>0&&l>c&&"phone"!==kommersant.media){for(s=i.length-1;s>=0;s--)if(r=i.eq(s),!r.hasClass("js-hide")&&!r.hasClass("hide")){r.addClass("hide js-hide"),n.offset(),o(!0);break}}else if(!a){if(r=i.filter(".js-hide").first(),!r.length)return;r.removeClass("hide js-hide"),n.offset(),e.trigger("resize"),o()}};e.on("kommersant:resize",function(e){o()}),setInterval(o,2e3)}}}(),function(){function t(e){return!e.$stickyContainer||e.$stickyContainer.length<=0||!e.$asideContainer||e.$asideContainer.length<=0||!e.$centralContainer||e.$centralContainer.length<=0}function n(){var e=window.getComputedStyle?window.getComputedStyle(document.body,":after").getPropertyValue("content"):"";return/desktop/i.test(e)}function i(){$.each(a,function(e,t){o(a[e])})}function o(e){if(!t(e)){if(!n())return void e.$stickyContainer.css({height:""});var i=e.$stickyContainer.height()||0,o=e.$stickyContainer.children().height()||0,a=e.$asideContainer.height()||0,s=e.$centralContainer.height()||0,r=a-i;if(!(a<=0)){var c=s-r;if(o<=0||s<r||c<o)return e.$stickyContainer.height(0),void e.$stickyContainer.css({overflow:"hidden"});e.$stickyContainer.height(c),e.$stickyContainer.css({overflow:""})}}}var a=[{name:"left",$stickyContainer:$("#stickyLeft"),$asideContainer:$(".js-leftside").first(),$centralContainer:$(".js-middle").first(),docMinHeight:"",contentHeight:540,haveTopPadding:!0,isSticky:!1},{name:"right",$stickyContainer:$("#stickyRight"),$asideContainer:$(".js-rightside").first(),$centralContainer:$(".js-middle").parent(),docMinHeight:3250,contentHeight:400,haveTopPadding:!0,isSticky:!1},{name:"rightMain",$stickyContainer:$("#stickyRight"),$asideContainer:$(".js-rightside").first(),$centralContainer:$(".js-middleBottom").first(),docMinHeight:"",contentHeight:400,haveTopPadding:!1,isSticky:!1},{name:"left2Col",$stickyContainer:$("#stickyLeft"),$asideContainer:$(".js-leftside").first(),$centralContainer:$(".js-2col").first(),docMinHeight:"",contentHeight:540,haveTopPadding:!0,isSticky:!1}];e.on("resize",i),setInterval(i,2e3)}(),function(){e.on("resize",function(){var e=$(".sticky_priority"),t=$(".sticky_box");if(e.length&&t.length){var n=e.outerHeight(!0);if(n&&!(n<=0)){var i="sticky-right-style",o=$("#"+i),a=".sticky_low_priority { top: "+n+"px; } .fixed_panel_shown .sticky_low_priority { top: "+(n+58)+"px; }";if(o.length)o.text(a);else{var s=document.createElement("style");s.id=i,s.type="text/css",s.appendChild(document.createTextNode(a)),document.head.appendChild(s)}}}})}(),function(){var e,n={"Республика Башкортостан":"02","Республика Татарстан":"16","Удмуртская Республика":"18","Краснодарский край":"23","Красноярский край":"24","Воронежская область":"36","Нижегородская область":"52","Новосибирская область":"54","Пермский край":"59","Ростовская область":"61","Самарская область":"63","Саратовская область":"64","Свердловская область":"66","Челябинская область":"74","Санкт-Петербург и Ленинградская область":"78","Омская область":"54","Томская область":"54","Алтайский край":"54","Республика Тыва":"54","Республика Алтай":"54","Республика Хакасия":"54","Кемеровская область":"54","Иркутская область":"54","Тюменская область":"66","Ханты-Мансийский автономный округ - Югра":"66","Ямало-Ненецкий автономный округ":"66","Курганская область":"74","Ульяновская область":"63","Оренбургская область":"63","Кировская область":"52","Республика Мордовия":"52","Ставропольский край":"61","Республика Марий Эл":"16","Чувашская Республика":"16","Курская область":"36","Тамбовская область":"36","Липецкая область":"36","Белгородская область":"36","Орловская область":"36","Республика Адыгея":"23","Пензенская область":"64","Волгоградская область":"64","Астраханская область":"64","Республика Калмыкия":"64"},i="kommersantRegionPopup",o="",a=233,s="keydown",r="",c=$(),l=function(e){for(var t in n)if(n[t]===e)return t;return""},d=function(){return kommersant.utils.getCookie(i)},u=function(){d()&&h()},f=function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),v())},m=function(){var n=$(".fixed_bottom__item--subscriptions_left");n.length&&(c=$(kommersant.templates.apply("popup-region",{intRegion:parseInt(r,10)||"",strRegion:r})),n.append(c),c.find(".js-region-accept").on("click",g),c.find(".js-region-dismiss").on("click",v),t.on(s,f),e=setInterval(u,a),kommersant.sendEvent("region","show",l(r)))},h=function(){clearInterval(e),t.off(s,f),c.remove()},p=function(e){var t={domain:"."+kommersant.domain,path:"/"};switch(e){case"accept":case"none":t.expires=kommersant.utils.dateAdd(new Date,576e5);break;case"dismiss":t.expires=kommersant.utils.dateAdd(new Date,2592e6);break;default:return void kommersant.utils.deleteCookie(i,t)}kommersant.utils.setCookie(i,e,t)},g=function(){p("accept"),kommersant.sendEvent("region","accept",l(r))},v=function(){p("dismiss"),h(),kommersant.sendEvent("region","dismiss",l(r))},k=function(e){kommersant.popupManager.request("region",!!e,e||function(){})};return window.name===kommersant.windowName||"/"!==window.location.pathname||0!==kommersant.media.indexOf("desktop")?void k(!1):(o=d())?void k(!1):void kommersant.utils.loadScript("https://api-maps.yandex.ru/2.0/?load=package.standard&lang=ru-RU").then(function(){return"object"!=typeof ymaps?void k(!1):void ymaps.ready(function(){var e;if(!ymaps.geolocation||!ymaps.geolocation.region||!ymaps.geolocation.region.length)return void k(!1);for(e in n)if(e===ymaps.geolocation.region){r=""+n[e];break}return""===r?(p("none"),void k(!1)):void k(function(){kommersant.templates.load().then(kommersant.prepareFixed).then(function(){m()},function(){})})})},function(){k(!1)})}(),function(){var e,n="kommersantPush",i="",o=233,a="keydown",s=window.location.search.slice(1).split("&"),r=$(".main_header").first(),c=$(".push_subscription_holder"),l=$(),d=function(){return kommersant.utils.getCookie(n)},u=function(){d()&&h()},f=function(e){27!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.stopImmediatePropagation(),k())},m=function(){l=$(kommersant.templates.apply("push")),l.insertBefore(r),l.find(".push_main_button").on("click",g),l.find(".push_secondary_button").on("click",v),l.find(".push_close_button").on("click",k),t.on(a,f),e=setInterval(u,o)},h=function(){clearInterval(e),t.off(a,f),l.remove()},p=function(e){var t={domain:"."+kommersant.domain,path:"/"};switch(e){case"shown":t.expires=kommersant.utils.dateAdd(new Date,576e5);break;case"accepted":case"rejected":t.expires=kommersant.utils.dateAdd(new Date,31536e6);break;default:return}kommersant.utils.setCookie(n,e,t)},g=function(){p("accepted"),h(),window.open(kommersant.personalHost+"/push/manager?from=popup")},v=function(){p("rejected"),h()},k=function(){p("shown"),h()},y=function(){return!(!navigator||!navigator.userAgent)&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},w=function(){return!!(window.name!==kommersant.windowName&&navigator&&"serviceWorker"in navigator&&r.length&&c.length)&&(c.removeClass("hide"),i=d(),i?("accepted"===i&&s.indexOf("utm_campaign=push")!==-1&&s.indexOf("utm_source=kommersant")!==-1&&p("accepted"),!1):y()?void 0:function(){kommersant.templates.load().then(function(){m()},function(){})})},b=w();kommersant.popupManager.request("push",!!b,b)}(),function(){if(window.kommersant.subscriptions||(window.kommersant.subscriptions={}),window.kommersant.subscriptions.globalFunctions={},kommersant.subscriptions.production=!0,kommersant.subscriptions.fromYandex=!1,kommersant.subscriptions.skipCheckConditions=!1,kommersant.subscriptions.current_publishing=null,kommersant.subscriptions.regionId=void 0,kommersant.subscriptions.yesSubscriptionPopup=function(e){kommersant.popupManager.request("subscriptions",!0,e)},kommersant.subscriptions.noSubscriptionPopup=function(){kommersant.popupManager.request("subscriptions",!1)},!(kommersant&&kommersant.user&&kommersant.user.subscriptionTypes&&kommersant.antiCache&&kommersant.antiCache.jsSubscriptions))return void kommersant.subscriptions.noSubscriptionPopup();kommersant.subscriptions.production||(3131996===getDocsId()||0===window.location.pathname.indexOf("/weekend")||window.docInfo&&window.docInfo.publishing&&14==window.docInfo.publishing.id)&&(kommersant.subscriptions.skipCheckConditions=!0),window.publishingInfo&&(kommersant.subscriptions.current_publishing=window.publishingInfo.id),window.docInfo&&window.docInfo.publishing&&(kommersant.subscriptions.current_publishing=window.docInfo.publishing.id),window.docInfo&&window.docInfo.region&&window.docInfo.region.id&&(kommersant.subscriptions.regionId=window.docInfo.region.id),window.regionInfo&&window.regionInfo.id&&(kommersant.subscriptions.regionId=window.regionInfo.id),kommersant.subscriptions.fromYandex&&(kommersant.subscriptions.current_publishing=14),kommersant.user.subscriptionTypes.sort(function(e,t){return e.Priority<t.Priority?1:e.Priority>t.Priority?-1:0}),kommersant.subscriptions.globalFunctions.getMinutsLeftFromDateSeconds=function(e){var t=(new Date).getTime()/1e3,n=t-e;return n/60};var e=function(e){var t=document.createElement("a");return t.href=e,t},t=document.referrer,n=t,i=e(""+n);kommersant.subscriptions.fromYandex&&(i.hostname="news.yandex.ru");var o=!!$(".editorial_choice_subscription").length,a=function(e){return e.indexOf("news.yandex.ru")>-1};window.kommersant.subscriptions.checkConditions=function(e,t,n){var s=!1,r=!1,c=!1,l={ok:!1,noCache:!1};if(t&&n)for(var d=0;d<t.length;d++)if(t[d]==n.Id)return l;if(e.Referrers){var u=e.Referrers;u.indexOf(i.hostname)>-1&&(r=a(i.hostname),s=!0)}return e.Region&&void 0!==kommersant.subscriptions.regionId&&(s=!0),e.Publishing&&e.Publishing==kommersant.subscriptions.current_publishing&&(s=!0),e.Publishing==-1&&o&&(s=!0,c=!0),{ok:s,fromYandexNews:r,noCache:c}};for(var s=!1,r=!1,c=!1,l=0;l<kommersant.user.subscriptionTypes.length;l++)if(kommersant.user.subscriptionTypes[l].Conditions&&(r=!0,s=window.kommersant.subscriptions.checkConditions(kommersant.user.subscriptionTypes[l].Conditions),s.ok)){s.noCache&&(c=!0);break}if(kommersant.subscriptions.skipCheckConditions&&(s=!0),!r||s){if(!c){var d=kommersant.utils.getCookie("SubscrpCache");if(d&&kommersant.subscriptions.globalFunctions.getMinutsLeftFromDateSeconds(d)<2)return void kommersant.subscriptions.noSubscriptionPopup()}kommersant.utils.loadScript(kommersant.antiCache.jsSubscriptions).catch(function(){})}else kommersant.subscriptions.noSubscriptionPopup()}(),kommersantInit(),function(){$(".fixed_panel").length&&(t.on("click",".popup_menu__toggle",function(){kommersant.sendEvent("fixed_menu","click","menu")}),t.on("focus",".fixed_panel__search_input",function(){kommersant.sendEvent("fixed_menu","click","search")})),$(".article_sharing").length&&(t.on("click",".article_sharing .user-favorites",function(){kommersant.sendEvent("article","click","favorites")}),t.on("click",'.article_sharing a[href="#comments"]',function(){kommersant.sendEvent("article","click","comments")}),t.on("click",".article_sharing .socials-link",function(){var e=$(this).data("socials-network")||"";""!==e&&"ml"!==e&&kommersant.sendEvent("article","click",e)})),t.on("click",'.b-article__button[href="#comments"]',function(){kommersant.sendEvent("article","click","comments")}),t.on("click",".b-newsline__menu_item__more",function(){kommersant.sendEvent("news","click","more")}),$(".js-lenta").each(function(){var t=$(this),n=t.data("lenta-type")||"",i="article"===n;e.on("kommersant:resize kommersant:scroll",function(){kommersant.utils.checkInViewport(t.find(".lazyload-button"),function(){if(i){var e=$(this).closest(".js-article"),n=t.find(".js-article");kommersant.sendEvent("lenta.doc","show.full",n.index(e)+1)}else kommersant.sendEvent("lenta","show","more")})})}),$("#footer").on("click",".network a",function(){kommersant.sendEvent("footer","click",this.href)}),$(".b-gallery__socials").each(function(){var t=$(this).find(".b-socials_buttons");t.length&&(e.on("kommersant:resize kommersant:scroll",function(){kommersant.utils.checkInViewport(t,function(){kommersant.sendEvent("gallery.share","show")})}),t.on("click",".socials-link",function(){var e=$(this).data("socials-network")||"";""!==e&&kommersant.sendEvent("gallery.share","click",e)}))});var n=$(".video_digest");if(n.length>0){var i=["recommended","popular","all"];n.each(function(e){$(this).find(".slider").slider("on","change",function(t,n,o){kommersant.sendEvent("video-digest-"+i[e],"slider."+o,n)})}),e.on("kommersant:resize kommersant:scroll",function(){n.each(function(e,t){kommersant.utils.checkInViewport(t,function(){kommersant.sendEvent("video-digest-"+i[e],"show")})})})}}(),function(){var e=$(".main_header__region_logo a"),t=$(".mobile_header__info_text");if(!("undefined"!=typeof docInfo&&docInfo.publishing&&docInfo.publishing.id&&1===docInfo.publishing.id&&docInfo.rubric&&docInfo.rubric.id))return e.parent().removeClass("hide"),void t.removeClass("hide");var n=docInfo.rubric;1==kommersant.visitorSegment?(kommersant.sendEvent("trial","show","gazeta"),e.on("click",function(){kommersant.sendEvent("trial","click","gazeta")}),t.on("click",function(){kommersant.sendEvent("trial","click","gazeta")})):(kommersant.sendEvent("trial","show","rubric"),e.attr("href",n.url),e.html('<div class="main_header__region_name">'+n.name+"</div>"),t.attr("href",n.url),t.html('<div class="kbd_button__body" tabindex="-1">'+n.name+"</div>"),e.on("click",function(){kommersant.sendEvent("trial","click","rubric")}),t.on("click",function(){kommersant.sendEvent("trial","click","rubric")})),$(".main_header__region_logo").removeClass("hide"),$(".mobile_header__info_text").removeClass("hide")}()})}(jQuery);