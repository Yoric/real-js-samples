!function(e){"use strict";function a(a){var n=a.attr("data-"+t+"-parameter");if("undefined"!=typeof n){n=n.split(",");var r,l=n.length,i={};for(r=0;r<l;r++){var d=e.trim(n[r]).split(":");"true"===d[1]?d[1]=!0:"false"===d[1]?d[1]=!1:isNaN(Number(d[1]))||(d[1]=Number(d[1])),i[d[0]]=d[1]}e.extend(!0,a.data(t),i)}}var t="listRandom",n={initialize:function(r){return this.each(function(){var l=e(this);l.data(t,e.extend(!0,{id:e(this).attr("data-"+t+"-id"),$parent:l,$children:l.children(),displayCount:null,childrenArray:[],randomNumber:[],createAfter:null,appendBefore:null,appendAfter:null},r));var i=l.data(t),d=i.id;void 0===d&&(d=t+"-"+e("[data-"+t+"]").index(this),e(this).attr("data-"+t+"-id",d),i.id=d),a(l),n.registerCallback.call(l,["createAfter","appendBefore","appendAfter"]),n.createData.apply(l),n.listRandom.apply(l)})},createData:function(){var a,r,l=e(this),i=l.data(t),d=i.$children,o=[],p=[];d.each(function(a){o[a]={$child:e(this),childRandom:Math.random()},p[a]=o[a].childRandom}),p=p.sort(function(e,a){return e-a});var f=o.length;for(a=0;a<f;a++)for(r=0;r<f;r++)if(a!=r&&p[a]===p[r])return;i.childrenArray=o,i.randomNumber=p,n.applyCallback.call(l,["createAfter"])},listRandom:function(){var a,r,l=e(this),i=l.data(t),d=i.$children,o=i.$parent,p=i.childrenArray,f=i.randomNumber,c=p.length;d.detach(),n.applyCallback.call(l,["appendBefore"]);var u=0,h=[];for(a=0;a<c;a++)for(r=0;r<c;r++)if(p[a].childRandom===f[r]){if(null!==i.displayCount&&i.displayCount===u)break;h.push(p[r].$child),u++}o.append(h),n.applyCallback.call(l,["appendAfter"])},applyCallback:function(a){var n,r=e(this),l=r.data(t),i=a.length,d=function(e){var a,t=e.length;for(a=0;a<t;a++)e[a].resolve||"function"==typeof e[a].handler&&e[a].handler()};for(n=0;n<i;n++)d(l[a[n]])},updateCallback:function(a,n,r){var l,i,d,o,p,f=e(this),c=f.data(t);if(l=a.split(".")[0],i="undefined"!=typeof a.split(".")[1]?a.split(".")[1]:null,r="undefined"!=typeof r?r:"append",d=c[l],p=d.length,"resolve"===n){if(null===i)return;r="resolve"}if(null===i&&(i=p),n="function"==typeof n?n:null,"append"===r)d.push({id:i,handler:n,resolve:!1});else if("prepend"===r)d.unshift({id:i,handler:n,resolve:!1});else if("resolve"===r)for(o=0;o<p;o++)String(d[o].id)===String(i)&&(d[o].resolve=!0)},registerCallback:function(a){var n,r,l=e(this),i=l.data(t),d=a.length,o=null,p=!0;for(n=0;n<d;n++)r=a[n],o=null,p=!0,"function"==typeof i[r]&&(o=i[r],p=!1),i[r]=[{id:"initialize",handler:o,resolve:p}]},destroy:function(){var a,n=e(this),r=n.data(t),l=r.childrenArray,i=l.length,d=[];if("undefined"!=typeof r){for(r.$children.detach(),a=0;a<i;a++)d.push(l[a].$child);r.$parent.append(d),n.removeData(t)}}};e.fn[t]=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void 0:n.initialize.apply(this,arguments)}}(jQuery);