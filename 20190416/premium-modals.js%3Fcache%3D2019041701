var cacheAjaxGateway=[],welcomeCookie="undefined"!=typeof welcomeModalCookie?welcomeModalCookie:"",premiumModalContent=document.getElementById("premium-modal");if(premiumModalContent)var premiumModal=new MG_Modal({content:premiumModalContent,className:"premiumContainer",closeButton:!1});var gatewayModalContent=document.getElementById("gateway-modal");if(gatewayModalContent)var gatewayModal=new MG_Modal({content:gatewayModalContent,className:"gatewayContainer"});function triggerUpselllGatewayModal(e,t){var o="Player2160pUpsell"===e;MG_Utils.ajaxCall({type:"GET",url:"/premium/ajax_build_upgrade_url",data:{entry_code:e,segment:t},dataType:"json",success:function(e){if("PASS"==e.success){for(var t=document.querySelector('[id*="gateway-text"]').querySelectorAll("span"),a=0;a<t.length;a++)t[a].style.display="none";"undefined"!=typeof skipGatewayModal||"no_gateway"==e.gateway_modal?window.location.href=e.url:"undefined"==typeof skipGatewayModal&&"no_gateway"==e.gateway_modal||(o&&(e.url=0<=e.url.indexOf("?")?e.url+"&type=Player2160pUpsell":e.url+"?type=Player2160pUpsell"),document.querySelector('[id*="gateway-text"]').querySelector("span."+e.gateway_modal).style.display="block",document.querySelector('[id*="gateway-button"]').setAttribute("href",e.url),void 0!==gatewayModal&&gatewayModal.openModal())}}})}function triggerGatewayModal(e,t,a){MG_Utils.preventDefault(e);var o={entry_code:MG_Utils.getData(e.currentTarget,"entrycode"),segment:MG_Utils.getData(e.currentTarget,"segment")};void 0!==a&&(o.viewkey=a),MG_Utils.ajaxCall({type:"GET",url:"/premium/ajax_build_upgrade_url",data:o,dataType:"json",success:function(e){"PASS"==e.success&&(void 0!==t||"no_gateway"==e.gateway_modal?window.location.href=e.url:"undefined"!=typeof WIDGET_MODAL_PREMIUM&&WIDGET_MODAL_PREMIUM.showExpiredGift?window.location.href=e.url:void 0!==trialEndedModal?trialEndedModal.closeModal(function(){gatewayPremiumModals(e)}):gatewayPremiumModals(e))}})}function updateUSThanksgivingPromotion2017(e){if(0==e){if(void 0===WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.addedValueText){var t=document.createElement("p");t.className="addedValue-text",t.innerHTML=document.querySelector(".hasPromotion2017 .addedValue-text").innerHTML,WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.addedValueText=t}void 0===WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.ctaButtonText&&(WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.ctaButtonText=document.querySelector('[id*="gateway-button"]').innerText),null!=document.querySelector(".hasPromotion2017 .addedValue-text")&&document.querySelector(".hasPromotion2017 .addedValue-text").remove(),document.querySelector('[id*="gateway-button"]').innerText=WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.newButtonText}else document.querySelector('[id*="gateway-modal"] .hasPromotion2017').insertBefore(WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.addedValueText,document.querySelector('[id*="gateway-button"]')),document.querySelector('[id*="gateway-button"]').innerText=WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.ctaButtonText}function gatewayPremiumModals(e){if(-1!=e.gateway_modal.indexOf("gateway")){if("no_gateway"!=e.gateway_modal){for(var t=document.querySelector('[id*="gateway-text"]').children,a=0;a<t.length;a++)t[a].style.display="none";e.gateway_modal&&(document.querySelector('[id*="gateway-text"]').querySelector("span."+e.gateway_modal).style.display="inline","undefined"!=typeof WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017&&("gateway_finally"==e.gateway_modal?(updateUSThanksgivingPromotion2017(!1),WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.updated=!0):1==WIDGET_MODAL_PREMIUM_US_THANKSGIVING_2017.updated&&updateUSThanksgivingPromotion2017(!0))),document.querySelector('[id*="gateway-button"]').setAttribute("href",e.url),void 0!==gatewayModal&&gatewayModal.openModal()}}else{var o=document.querySelector('[id*="premium-text"]').querySelectorAll("section");for(a=0;a<o.length;a++)o[a].style.display="none";if(e.gateway_modal){var l=e.gateway_modal.substring(e.gateway_modal.length-2),d=document.querySelector('[id*="premium-text"]').querySelector("section."+e.gateway_modal.replace(l,"premium"));d.style.display="block",d.querySelector('[id*="premium-button"]').setAttribute("href",e.url),document.querySelector('[class*="premiumWrapper"]').querySelector('[class*="cancelButton"]').setAttribute("data-modal",e.gateway_modal.replace(e.gateway_modal.substring(6),"premium")),document.querySelector('[id*="premium-text"]').className=e.gateway_modal.replace(l,"Content"),"premiumWrapper"!=document.querySelector('[class*="premiumWrapper"]').getAttribute("class").split(" ").pop()&&MG_Utils.removeClass(document.querySelector('[class*="premiumWrapper"]'),document.querySelector('[class*="premiumWrapper"]').getAttribute("class").split(" ").pop()),"A1"==l?MG_Utils.addClass(document.querySelector('[class*="premiumWrapper"]'),"premium_a1"):MG_Utils.addClass(document.querySelector('[class*="premiumWrapper"]'),"premium_a2")}void 0!==premiumModal&&premiumModal.openModal()}}var welcomeModalContent=document.getElementById("premium-welcome-modal");if(welcomeModalContent)var welcomeModal=new MG_Modal({content:welcomeModalContent,className:"welcomeModalContainer",closeDocument:!1,closeButton:!1});function welcomeModel(e){document.getElementById("dontAsk").checked&&MG_Utils.ajaxCall({type:"POST",url:MG_Utils.getData(document.querySelector('[id*="dontAsk"]'),"cookie")}),e&&MG_Utils.ajaxCall({type:"POST",url:MG_Utils.getData(document.getElementById("go-to-pornhub"),"logout")}).always(function(){MG_Utils.ajaxCall({url:premiumRedirectCookieURL+"&do=delete",cache:!1,xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(){window.location.href=MG_Utils.getData(document.querySelector('[id*="go-to-pornhub"]'),"pornhub-redirect")})}),welcomeModal.closeModal(function(){MG_Utils.ajaxCall({type:"GET",url:"/front/cookie_kill_ajax",data:{cookie_name:"showPremiumWelcomeFromPornhub"}})})}var expiredModalContent=document.getElementById("premium-expired-modal");if(expiredModalContent)var expiredModal=new MG_Modal({content:expiredModalContent,className:"expiredModalContainer"});function setModalCookieHidden(){setCookie("expiredModalShown",1)}function triggerExpiredModal(){null==getCookie("expiredModalShown")&&void 0!==expiredModal&&expiredModal.openModal(setModalCookieHidden)}var trialEndedModalContent=document.getElementById("trial-ended-modal");if(trialEndedModalContent)var trialEndedModal=new MG_Modal({content:trialEndedModalContent,className:"trialEndedModalContainer"});var giftingEndedModalContent=document.getElementById("giftingExpired");if(giftingEndedModalContent)var giftingEndedModal=new MG_Modal({content:giftingEndedModalContent,className:"giftingEndedModalContainer"});var trialModalContent=document.getElementById("trial-step1-modal");if(trialModalContent)var trialModal=new MG_Modal({content:trialModalContent,className:"trialModalContainer"});var reactivationModalContent=document.getElementById("reactivationModal");if(reactivationModalContent)var reactivationModal=new MG_Modal({content:reactivationModalContent,className:"reactivationModalContainer"});function setModalSessionHidden(e){setCookie(e+"-shown",1)}function triggerTrialModal(e){if(null!=getCookie("showModalPremiumTry")&&"trial-step1-modal"==e)setCookieAdvanced("premiumTrialAccepted","1",1),void 0!==trialModal&&trialModal.openModal(setModalSessionHidden(e)),deleteCookieAdvanced("showModalPremiumTry");else if(null==getCookie(e+"-shown"))switch(e){case"trial-step1-modal":void 0!==trialModal&&trialModal.openModal(setModalSessionHidden(e));break;case"trial-ended-modal":void 0!==trialEndedModal&&trialEndedModal.openModal(setModalSessionHidden(e));break;case"giftingExpired":void 0!==giftingEndedModal&&giftingEndedModal.openModal(setModalSessionHidden(e))}}var yearlyModalContent=document.getElementById("yearly-modal");if(yearlyModalContent)var yearlyModal=new MG_Modal({content:yearlyModalContent,className:"yearlyModalContainer"});function triggerYearlyModal(){void 0!==yearlyModal&&yearlyModal.openModal()}MG_Utils.domReady(function(){if("undefined"!=typeof WIDGET_MODAL_PREMIUM&&("premium-free-trial-ended"===WIDGET_MODAL_PREMIUM.modalReturnName&&(WIDGET_MODAL_PREMIUM.showExpiredGift?triggerTrialModal("giftingExpired"):triggerTrialModal("trial-ended-modal")),"premium-free-trial-step-one"===WIDGET_MODAL_PREMIUM.modalReturnName&&triggerTrialModal("trial-step1-modal")),MG_Utils.addEventHandler(document,"click",function(e){var t=MG_Utils.getEventTarget(e);MG_Utils.hasClass(t,"js-notificationDone")&&MG_Utils.ajaxCall({url:isNotifiedObj.ajaxUrl,data:{token:isNotifiedObj.token,notificationId:isNotifiedObj.notificationId},type:"post",success:function(e){setCookie("notified_sponsor_"+isNotifiedObj.liuId,1,365)}})}),MG_Utils.addEventHandler(document,"click",function(e){if("js-startTrial"==MG_Utils.getEventTarget(e).id){MG_Utils.preventDefault(e);for(var t=document.querySelectorAll(".offerContent, .offerButtons, .offerLasts"),a=0;a<t.length;a++)t[a].style.display="none";var o=document.querySelectorAll(".trialStartedWrapper, .startTrialButton, .premiumPrice");for(a=0;a<o.length;a++)o[a].style.display="block"}}),null!=document.getElementById("js-trialExpireReminder")&&(null==sessionStorage.getItem("trialBottomNotificationHidden")&&MG_Utils.removeClass(document.getElementById("js-trialExpireReminder"),"hidden"),MG_Utils.addEventHandler(document.getElementById("js-closeTrialNotification"),"click",function(e){MG_Utils.preventDefault(e),sessionStorage.setItem("trialBottomNotificationHidden","1"),MG_Utils.addClass(document.getElementById("js-trialExpireReminder"),"hidden")})),welcomeCookie&&void 0!==welcomeModal&&welcomeModal.openModal(),MG_Utils.addEventHandler(document,"click",function(e){var t=MG_Utils.getEventTarget(e);if(MG_Utils.hasClass(t,"cancelButton")){MG_Utils.preventDefault(e);var a=e.target;switch(MG_Utils.getData(a,"modal")){case"trial-ended":void 0!==trialEndedModal&&trialEndedModal.closeModal();break;case"trial-step1":void 0!==trialModal&&trialModal.closeModal();break;case"gift-ended":void 0!==giftingEndedModal&&giftingEndedModal.closeModal();break;case"createPlaylist":"undefined"!=typeof createPlaylistModal&&createPlaylistModal.closeModal();break;case"friendRequestModal":"undefined"!=typeof friendRequestModal&&friendRequestModal.closeModal();break;case"info":"undefined"!=typeof infoModalHolder&&infoModalHolder.closeModal();break;case"reactivation":void 0!==reactivationModal&&reactivationModal.closeModal();break;case"Modal_premium":void 0!==premiumModal&&premiumModal.closeModal()}}}),null!=document.getElementById("js-reactivation")&&(MG_Utils.removeClass(document.getElementById("js-reactivation"),"hidden"),MG_Utils.addEventHandler(document,"click",function(e){"js-closeReactivation"==MG_Utils.getEventTarget(e).id&&(MG_Utils.preventDefault(e),MG_Utils.ajaxCall({url:"/user/dismiss_reactivate_subscription",beforeSend:function(){MG_Utils.addClass(document.getElementById("js-reactivation"),"hidden")}}))}),MG_Utils.addEventHandler(document,"click",function(e){var t=MG_Utils.getEventTarget(e);if("js-reactivate"==t.id||t.parentElement&&"js-reactivate"==t.parentElement.id){MG_Utils.preventDefault(e);var o=document.getElementById("js-reactivate");MG_Utils.ajaxCall({url:"/user/reactivate_subscription",beforeSend:function(){o.setAttribute("disabled",!0);for(var e=MG_Utils.children(o),t=0;t<e.length;t++)MG_Utils.addClass(e[t],"visuallyHidden");var a=document.createElement("span");a.className="spinner",o.appendChild(a)},success:function(e){if(e.success)MG_Utils.addClass(document.getElementById("js-reactivation"),"hidden"),void 0!==reactivationModal&&reactivationModal.openModal();else{o.removeAttribute("disabled"),o.removeChild(o.querySelector(".spinner"));for(var t=MG_Utils.children(o),a=0;a<t.length;a++)MG_Utils.removeClass(t[a],"visuallyHidden")}}})}})),triggerYearlyModal(),null!=document.querySelector(".yearlyModalContainer")){MG_Utils.addClass(document.querySelector(".yearlyModalContainer").querySelector("button"),"yearlyClose");var e=MG_Utils.children(document.querySelector(".yearlyModalContainer"));for(i=0;i<e.length;i++)MG_Utils.addEventHandler(e[i],"click",function(e){e.stopPropagation()});var t=document.querySelectorAll(".yearlyClose, #js-dismissSubscription");for(i=0;i<t.length;i++)MG_Utils.addEventHandler(t[i],"click",function(e){MG_Utils.preventDefault(e),MG_Utils.ajaxCall({url:"/user/dismiss_switch_yearly_subscription",success:function(){yearlyModal.closeModal()}})})}});