(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{"/guG":function(e,n,a){"use strict";a.d(n,"c",function(){return d}),a.d(n,"b",function(){return s}),a.d(n,"d",function(){return u}),a.d(n,"a",function(){return l});var t=a("mrSG"),i=a("/7QA"),r=a("2xye");function d(e){return t.__awaiter(this,void 0,void 0,function(){var n,a;return t.__generator(this,function(t){return n=null,e.channelID&&(n=parseInt(e.channelID,10),isNaN(n)&&(n=null)),a={squad_stream_id:e.squadStreamID||null,squad_stream_session_id:e.squadStreamSessionID||null,squad_stream_presentation_id:e.squadStreamPresentationID||null,layout:e.layout||null,channel_id:n,player_order:e.playerOrder||null,total_players:e.totalPlayers||null,chat_shown:e.chatShown},[2,i.q.tracking.track(r.SpadeEventType.SquadStreamPresentation,a)]})})}function s(e){return t.__awaiter(this,void 0,void 0,function(){var n,a,d;return t.__generator(this,function(t){return n=null,e.userID&&(n=parseInt(e.userID,10),isNaN(n)&&(n=null)),a=null,e.channelID&&(a=parseInt(e.channelID,10),isNaN(a)&&(a=null)),d={action:e.action||null,user_id:n,channel:e.channel||null,channel_id:a,time:e.time||null,squad_stream_id:e.squadStreamID||null},[2,i.q.tracking.track(r.SpadeEventType.SquadStreamBannerAction,d)]})})}function u(e){return t.__awaiter(this,void 0,void 0,function(){var n,a,d;return t.__generator(this,function(t){return n=null,e.userID&&(n=parseInt(e.userID,10),isNaN(n)&&(n=null)),a=null,e.channelID&&(a=parseInt(e.channelID,10),isNaN(a)&&(a=null)),d={element:e.element||null,type:e.type||null,location:e.location||null,user_id:n,channel_id:a,player_order:e.playerOrder||null,total_players:e.totalPlayers||null,squad_stream_id:e.squadStreamID||null,squad_stream_session_id:e.squadStreamSessionID||null,is_active:e.isActive},[2,i.q.tracking.track(r.SpadeEventType.SquadStreamViewerAction,d)]})})}function l(e){return t.__awaiter(this,void 0,void 0,function(){var n;return t.__generator(this,function(a){return n={user_id:e.userID,device_id:e.deviceID,primary_player_channel_login:e.primaryPlayerChannelLogin,ad_played_player_channel_login:e.adPlayedPlayerChannelLogin,is_server_side_ad:e.isServerSideAd,squad_stream_id:e.squadStreamID,squad_stream_session_id:e.squadStreamSessionID},[2,i.q.tracking.track(r.SpadeEventType.SquadStreamAdPlay,n)]})})}},aKsW:function(e,n,a){"use strict";var t,i,r,d;a.d(n,"a",function(){return t}),a.d(n,"b",function(){return i}),a.d(n,"d",function(){return r}),a.d(n,"c",function(){return d}),function(e){e.View="view",e.Click="click"}(t||(t={})),function(e){e.ExitSquadMode="exit_squad_mode",e.ChannelLink="channel_link",e.Player="player",e.Avatar="avatar",e.ProvideFeedback="provide_feedback"}(i||(i={})),function(e){e.Hover="hover",e.Click="click"}(r||(r={})),function(e){e.TopBar="top_bar",e.Player="player",e.ProfileCard="profile_card",e.EndedState="ended_state"}(d||(d={}))},boOy:function(e,n,a){},fnDh:function(e,n){var a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"squadStreamData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SquadStream"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"members"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"squadStreamMember"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"squadStreamMember"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"150"}}],directives:[]}]}}],loc:{start:0,end:186}};a.loc.source={body:"fragment squadStreamData on SquadStream {\nid\nstatus\nmembers {\n...squadStreamMember\n}\nowner {\nid\n}\n}\nfragment squadStreamMember on User {\nid\nlogin\ndisplayName\nprofileImageURL(width:150)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=a},"nKq/":function(e,n,a){"use strict";a.r(n);var t=a("mrSG"),i=a("q1tI"),r=a("oJmH"),d=a("yR8l"),s=a("eDVu"),u=a("0Log"),l=a("/aPz"),o=a("DMoW"),c=a("fvjX"),m=a("/7QA"),p=a("2xye"),v=a("GnwI"),S=a("HSpZ"),h=a("Ws8v"),f=a("hnjF"),k=a("X2PJ"),g=a("7uM4"),q=a("Jsra"),y=a("+80q"),_=(a("boOy"),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},n.prototype.render=function(){return i.createElement(S.a,{type:S.f.SlideInBottom,delay:S.b.Medium,duration:S.c.Medium,enabled:!0},i.createElement(h.a,{className:"live-event-banner-ui__header",display:f.d.Flex,background:k.a.AccentAlt2,alignItems:f.b.Center,flexWrap:f.f.NoWrap,padding:{x:1}},i.createElement(h.a,{display:f.d.Flex,flexShrink:0,margin:{right:1},color:k.c.Overlay},i.createElement(g.a,{asset:g.b.Events})),i.createElement(q.a,{to:{pathname:"/events/"+this.props.eventID,state:{medium:p.PageviewMedium.Channel,content:p.PageviewContent.EventLive,noRedirect:!0}}},i.createElement(y.a,{type:y.e.Span,color:k.c.Overlay,fontSize:k.d.Size5,lines:1},Object(m.d)("Event: ","LiveEventBannerComponent"),this.props.eventTitle))))},n}(i.Component)),b=Object(c.compose)(Object(v.withLatencyTracking)("LiveEventBanner",{autoReportInteractive:!0}))(_),I=a("9C/b"),D=a("aKsW"),N=a("/guG"),E=a("HH5h"),L=a("sUnt"),w=a("dEDE"),M=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.goToSquadPage=function(){n.trackBannerAction(D.a.Click),n.props.history.push("/"+n.props.channelLogin+"/squad")},n.trackBannerAction=function(e){Object(N.b)({action:e,userID:n.props.currentUserID,channel:n.props.channelLogin,channelID:n.props.channelID,time:new Date,squadStreamID:n.props.squadStreamID})},n.makeBannerText=function(e,n){var a=function(e){return e&&e.displayName?i.createElement(y.a,{bold:!0,noWrap:!0,type:y.e.Span,color:k.c.Base},e.displayName):""};switch(n.length){case 0:return Object(m.d)("{channelOwnerName} is Squad Streaming",{channelOwnerName:a(e)},"SquadStreamBanner");case 1:return Object(m.d)("{channelOwnerName} is Squad Streaming with {squadMemberIndex0}",{channelOwnerName:a(e),squadMemberIndex0:a(n[0])},"SquadStreamBanner");case 2:return Object(m.d)("{channelOwnerName} is Squad Streaming with {squadMemberIndex0}, {squadMemberIndex1}",{channelOwnerName:a(e),squadMemberIndex0:a(n[0]),squadMemberIndex1:a(n[1])},"SquadStreamBanner");default:return Object(m.d)("{channelOwnerName} is Squad Streaming with {squadMemberIndex0}, {squadMemberIndex1}, {squadMemberIndex2}",{channelOwnerName:a(e),squadMemberIndex0:a(n[0]),squadMemberIndex1:a(n[1]),squadMemberIndex2:a(n[2])},"SquadStreamBanner")}},n.trackSquadBannerAction=function(e){Object(N.b)({action:e,userID:n.props.currentUserID,channel:n.props.channelLogin,channelID:n.props.channelID,time:new Date,squadStreamID:n.props.squadStreamID})},n}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.trackSquadBannerAction(D.a.View)},n.prototype.render=function(){var e=this.props.channelID,n=this.props.squadMembers.filter(function(n){return n.id===e})[0],a=this.props.squadMembers.filter(function(n){return n.id!==e}),t=[n].concat(a).map(function(e){return e&&e.id&&e.profileImageURL?i.createElement(L.a,{key:e.id,margin:{right:1}},i.createElement(E.a,{size:30,alt:Object(m.d)("avatar","SquadStreamBanner"),src:e.profileImageURL})):null}).filter(function(e){return null!==e});return i.createElement(S.a,{type:S.f.SlideInBottom,delay:S.b.Medium,duration:S.c.Medium,enabled:!0},i.createElement(h.a,{display:f.d.Flex,background:k.a.Base,alignItems:f.b.Center,padding:1,margin:{bottom:1},borderRadius:k.b.Large,elevation:2},i.createElement(h.a,{display:f.d.Flex,color:k.c.Overlay},t),i.createElement(L.a,{ellipsis:!0},i.createElement(y.a,{noWrap:!0,type:y.e.Span,color:k.c.Alt2,fontSize:k.d.Size5},this.makeBannerText(n,a))),i.createElement(L.a,{display:f.d.Flex,alignItems:f.b.Start,flexGrow:1}),i.createElement(L.a,{margin:{left:1}},i.createElement(w.a,{onClick:this.goToSquadPage},Object(m.d)("Watch In Squad Mode","SquadStreamBanner")))))},n}(i.Component),O=Object(r.compose)(Object(v.withLatencyTracking)("SquadStreamBanner",{autoReportInteractive:!0}),I.a)(M);function F(e){switch(e){case u.SquadStatus.Pending:return o.cb.PENDING;case u.SquadStatus.Live:return o.cb.LIVE;case u.SquadStatus.Ended:default:return o.cb.ENDED}}var x=a("yMkG"),B=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.props.triggerPlayerReposition()},n.prototype.componentDidUpdate=function(){this.props.triggerPlayerReposition()},n.prototype.render=function(){if(this.shouldRenderSquadBanner(this.props))return i.createElement(O,{channelID:this.props.channelID,channelLogin:this.props.channelLogin,channelDisplayName:this.props.channelDisplayName,currentUserID:this.props.data.currentUser&&this.props.data.currentUser.id||"",squadMembers:this.props.data&&this.props.data.user&&this.props.data.user.squadStream&&this.props.data.user.squadStream.members||[],squadStreamID:this.props.data.user&&this.props.data.user.squadStream&&this.props.data.user.squadStream.id||""});var e=this.props.data&&this.props.data.user&&this.props.data.user.liveEvent;if(!e)return null;var n=e.id;if(!n)return null;var a=e.title;return e.parent&&e.parent.title&&(a=e.parent.title),a?i.createElement(b,{channelID:this.props.channelID,eventID:n,eventTitle:a}):null},n.prototype.isSquadMember=function(e){var n=e.channelID,a=e.data&&e.data.user&&e.data.user.squadStream&&e.data.user.squadStream.members||[];return!(!a||!a.some(function(e){return e.id===n}))},n.prototype.shouldRenderSquadBanner=function(e){return!!this.isSquadMember(e)&&(!e.data.loading&&!e.data.error&&(e.data.user&&e.data.user.squadStream&&e.data.user.squadStream.status===o.cb.LIVE||!1))},n}(i.Component),C=Object(r.compose)(Object(d.a)(x,{options:function(e){return{variables:{channelLogin:e.channelLogin}}}}),Object(s.a)(function(e){return{query:x,variables:{channelLogin:e.channelLogin},topic:Object(l.h)(e.channelID),type:u.PubsubMessageType.Squad,mutator:function(e,n){var a=function(e){if(!e||!e.squad)return null;for(var n=[],a=0,t=e.squad.members;a<t.length;a++){var i=t[a],r={__typename:"User",id:i.id,login:i.login,displayName:i.display_name,profileImageURL:i.profile_image_url_150};n.push(r)}return{__typename:"SquadStream",id:e.squad.id,status:F(e.squad.status),members:n,owner:{__typename:"User",id:e.squad.owner_id}}}(e);return n.user&&(n.user.squadStream=a),n}}}),Object(s.a)(function(e){return{query:x,variables:{channelLogin:e.channelLogin},topic:Object(l.f)(e.channelID),type:u.PubsubMessageType.LiveEvent,mutator:function(e,n){return n.user&&(n.user.liveEvent=function(e){if(!e||!e.current_event)return null;var n=e.current_event,a=null;n.parent&&(a={__typename:"EventCollection",id:n.parent.event_id,title:n.parent.title});return{__typename:"EventLeaf",id:n.event_id,title:n.title,parent:a}}(e)),n}}}))(B);a.d(n,"ChannelCollaborationBannerComponent",function(){return B}),a.d(n,"ChannelCollaborationBanner",function(){return C})},yMkG:function(e,n,a){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollaborationBanner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"squadStream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"squadStreamData"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"liveEvent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LiveEventBanner_EventLeaf"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"LiveEventBanner_EventLeaf"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EventLeaf"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:339}};t.loc.source={body:'#import "twilight/features/squad-stream/models/squad-stream-fragment.gql"\nquery CollaborationBanner($channelLogin: String!) {\nuser(login: $channelLogin) {\nid\nsquadStream {\n...squadStreamData\n}\nliveEvent {\n...LiveEventBanner_EventLeaf\n}\n}\ncurrentUser {\nid\n}\n}\nfragment LiveEventBanner_EventLeaf on EventLeaf {\nid\ntitle\nparent {\nid\ntitle\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};t.definitions=t.definitions.concat(a("fnDh").definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!i[n]&&(i[n]=!0,!0)})),e.exports=t}}]);