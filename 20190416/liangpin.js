function TuiguangSlide(e,t){var n=this;this.meBox=W(e);if(!this.meBox.length)return;this.config=t||{},this.btnPrev=this.meBox.query(".slide-go-left"),this.btnNext=this.meBox.query(".slide-go-right"),this.innerBox=this.meBox.query(".slide-inner"),this.items=this.meBox.query(".slide-item"),this.listBox=this.meBox.query(".slide-list"),this.itemNum=this.meBox.query(".slide-item").length,this.ctrlBox=this.meBox.query(".slide-ctrl"),this.innerBoxWidth=this.innerBox.getRect().width,this.autoRunTimer=null,this.init=function(){var e=this,t=e.items;t&&t.length&&(e.itemWidth=t.getRect().width+parseInt(t.css("margin-left"),10)+parseInt(t.css("margin-right"),10),e.listBox.css({width:e.itemWidth*t.length}),e.config.showCtrl&&e.createCtrl(),e.config.autoRun&&e.autoRun()),this.bindEvent()},this.resetBoxSize=function(){var e=this;e.items=e.meBox.query(".slide-item");var t=e.items;t&&t.length&&(e.itemWidth=t.getRect().width+parseInt(t.css("margin-left"),10)+parseInt(t.css("margin-right"),10),e.listBox.css({width:e.itemWidth*t.length}),e.config.showCtrl&&e.createCtrl(),e.config.autoRun&&e.autoRun())},this.bindEvent=function(){var e=this,t=this.config;e.btnPrev.on("click",function(n){n.preventDefault();var r=W(this);if(r.attr("data-animating"))return;r.attr("data-animating","1"),e.innerBox.animate({scrollLeft:e.innerBox[0].scrollLeft-e.innerBoxWidth},t.animTime||300,function(){setTimeout(function(){r.attr("data-animating","")},200)},QW.Easing.easeOut)}),e.btnNext.on("click",function(n){n.preventDefault();var r=W(this);if(r.attr("data-animating"))return;r.attr("data-animating","1"),e.innerBox.animate({scrollLeft:e.innerBox[0].scrollLeft+e.innerBoxWidth},t.animTime||300,function(){setTimeout(function(){r.attr("data-animating","")},200)},QW.Easing.easeOut)}),e.meBox.delegate(".ctrl-item","click",function(t){t.preventDefault(),W(this).addClass("ctrl-curr").siblings(".ctrl-curr").removeClass("ctrl-curr");var n=W(this).attr("data-sn")||0;e.go(n)}),e.meBox.on("mouseenter",function(t){clearInterval(e.autoRunTimer)}),e.meBox.on("mouseleave",function(n){t.autoRun&&e.autoRun()})},this.go=function(e){var t=this.config;e=e||0,this.innerBox.animate({scrollLeft:0+this.innerBoxWidth*e},t.animTime||300,function(){},QW.Easing.easeOut)},this.autoRun=function(){var e=this,t=this.config;e.autoRunTimer=setInterval(function(){var t=e.meBox.query(".ctrl-curr").attr("data-sn")||0,n=t-0+1;n>e.itemNum-1&&(n=0),e.meBox.query('.ctrl-item[data-sn="'+n+'"]').addClass("ctrl-curr").siblings(".ctrl-curr").removeClass("ctrl-curr"),e.go(n)},typeof t.autoRun=="number"?t.autoRun:5e3)},this.createCtrl=function(e){if(this.ctrlBox.query(".ctrl-item").length||this.items.length<2)return;str="";for(var t=0,n=this.items.length;t<n;t++)str+='<span class="ctrl-item '+(t==0?"ctrl-curr":"")+'" data-sn="'+t+'"></span>';this.ctrlBox.html(str)},this.init()}(function(){function e(){this.init.apply(this,arguments)}e.prototype=function(){return{init:function(t){var n=this;CustEvent.createEvents(this),e.prototype._documentBind||(W(window).on("resize",function(e){n.container.css("display")!="none"&&setTimeout(function(){try{W(t).fire("click")}catch(e){}},100)}),W(document).on("keydown",function(e){e.keyCode==27&&(n.container.hide(),n.fire("close"))}).on("click",function(t){var r=!1;e.prototype._triggerList.forEach(function(e){e.forEach(function(e){var n=W(e);if(n[0]==t.target||n.contains(t.target))r=!0})}),!r&&(!n.container[0]==t.target||!n.container.contains(t.target))&&(n.container.fadeOut(150),n.fire("close"))}),e.prototype._documentBind=!0),this.container=W("#city_list").delegate(".close","click",function(e){e.preventDefault(),n.container.hide(),n.fire("close")}).delegate(".filter_bar a","click",function(e){e.preventDefault();var t=W(this),r=t.html().trim();if(t.hasClass("current"))return;n.container.query(".filter_bar a").removeClass("current"),n.container.query(".city_wrap p").hide(),t.addClass("current"),n.container.query(".city_wrap p."+r).show()}),this.trigger=W(t).click(function(e){e.preventDefault();var t=W(this).getRect();W(this).attr("data-close")=="hide"?W("#city_list .city_close").hide():W("#city_list .city_close").show(),W(this).attr("x-offset")?n.container.css({left:t.left-W(this).attr("x-offset"),top:t.height+t.top+5}).fadeIn(150):W(this).attr("data-floatright")?n.container.css({left:t.left-380,top:t.height+t.top+5}).fadeIn(150):n.container.css({left:t.left,top:t.height+t.top+5}).fadeIn(150);if(W(this).attr("data-parentfixed")){var r=W(this).ancestorNode(W(this).attr("data-parentfixed")),i=W(this).attr("data-parenttop")-0||30,s=document.documentElement.scrollTop||document.body.scrollTop;r.length>0&&r.css("position")=="fixed"&&s>0&&t.top<s+i&&n.container.css("top",t.height+t.top+5+s)}n.fire("onShow"),n.container.undelegate("p a").delegate("p a","click",function(e){e.preventDefault();var t=this.innerHTML,r=this.getAttribute("data-city"),i=this.getAttribute("cityid");if(!t||!r)return;n.fire("selectCity",{name:t,city:r,cityid:i}),n.container.hide()})}),e.prototype._triggerList.push(this.trigger)},_triggerList:[],_documentBind:!1}}(),QW.provide({CityPanel:e})})(),function(){function e(t){var n={wrap:"#citySelector",data:{cityid:"",citycode:"",cityname:"",areacode:"",areaname:"",quancode:"",quanname:""},hasarea:!0,hasquan:!0,autoinit:!0,urlhost:"",onInit:function(){},onCitySelect:function(e){},onAreaSelect:function(e){},onQuanSelect:function(e){}};t=t||{},t=QW.ObjectH.mix(n,t,!0),t.urlhost=t.urlhost||"http://"+location.host+"/";var r=this;r.options=t,r.data={};var i=e.prototype;typeof i.eventBind=="undefined"&&(i.setData=function(e,t,n){var r=this;if(QW.ObjectH.isObject(e))n=t,t=null;else{if(!QW.ObjectH.isString(e))return;e={key:t}}n?r.data=e:r.data=QW.ObjectH.mix(r.data,e,!0)},i.getData=function(){var e=this;return e.data},i.deleteData=function(e){var t=this,n=t.data;QW.ObjectH.isArray(e)&&QW.ObjectH.map(e,function(e){typeof n[e]!="undefined"&&delete n[e]}),QW.ObjectH.isString(e)&&typeof n[e]!="undefined"&&delete n[e]},i.getArea=function(e){var t=this,n=t.options.urlhost+"aj/get_area/?citycode="+e;t._removeAreaTrigger(),t._removeQuanTrigger(),setTimeout(function(){QW.loadJsonp(n,function(e){var n=e.result,r="";QW.ObjectH.isObject(n)&&QW.ObjectH.map(n,function(e,t){r+='<a href="javascript:;" code="'+t+'">'+e+"</a>"});if(r){r='<a href="javascript:;">\u5168\u90e8\u533a\u53bf</a>'+r;var i=t._getAreaTrigger();i.show(),i.query(".select-list").html(r)}})},160)},i.getQuan=function(e,t){var n=this,r=n.options.urlhost+"aj/get_areaquan/?citycode="+e+"&areacode="+t;n._removeQuanTrigger(),setTimeout(function(){QW.loadJsonp(r,function(e){var t=e.result,r="";QW.ObjectH.isObject(t)&&QW.ObjectH.map(t,function(e,t){r+='<a href="javascript:;" code="'+t+'">'+e+"</a>"});if(r){r='<a href="javascript:;">\u5168\u90e8\u5546\u5708</a>'+r;var i=n._getQuanTrigger();i.show(),i.query(".select-list").html(r)}})},160)},i.getWrap=function(){var e=this;if(e.wWrap)return e.wWrap;var t=QW.ObjectH.isObject(e.options.wrap)?e.options.wrap:W(e.options.wrap);return e.wWrap=t},i._getCityTrigger=function(){var e=this;if(e.wCityTrigger)return e.wCityTrigger;var t=e.getWrap(),n=t.query(".sel-city");return e.wCityTrigger=n},i._setCityData=function(e,t,n){var r=this,i=r._getCityTrigger();i.attr("code",t),i.one(".sel-txt").html(n),r.setData({cityid:e,citycode:t,cityname:n},!0)},i._getAreaTrigger=function(){var e=this;if(e.wAreaTrigger)return e.wAreaTrigger;var t=e.getWrap(),n=t.query(".sel-quxian");if(!n.length){var r='<div class="area-sel sel-quxian mr-10" style="display:none;"><span class="sel-txt">\u9009\u62e9\u533a\u53bf</span><span class="icon icon-arrow pngfix"></span><div class="sel-quxian-pannel select-pannel" style="display:none;"><h3>\u533a\u53bf\u5217\u8868<span class="close city_close" title="\u5173\u95ed"></span></h3><div class="select-list"></div></div></div>';n=W(r),e.getWrap().appendChild(n)}return e.wAreaTrigger=n},i._setAreaData=function(e,t){var n=this,r=n._getAreaTrigger();r.attr("code",e),r.query(".sel-txt").html(t),n.setData({areacode:e,areaname:t})},i._removeAreaTrigger=function(){var e=this,t=e._getAreaTrigger();t.removeNode(),delete e.wAreaTrigger},i._getQuanTrigger=function(){var e=this;if(e.wQuanTrigger)return e.wQuanTrigger;var t=e.getWrap(),n=t.query(".sel-shangquan");if(!n.length){var r='<div class="area-sel sel-shangquan mr-10" style="display:none;"><span class="sel-txt">\u9009\u62e9\u5546\u5708</span><span class="icon icon-arrow pngfix"></span><div class="sel-shangquan-pannel select-pannel" style="display:none;"><h3>\u5546\u5708\u5217\u8868<span class="close city_close" title="\u5173\u95ed"></span></h3><div class="select-list"></div></div></div>';n=W(r),e.getWrap().appendChild(n)}return e.wQuanTrigger=n},i._setQuanData=function(e,t){var n=this,r=n._getQuanTrigger();r.attr("code",e),r.query(".sel-txt").html(t),n.setData({quancode:e,quanname:t})},i._removeQuanTrigger=function(){var e=this,t=e._getQuanTrigger();t.removeNode(),delete e.wQuanTrigger},i._selectCity=function(){var e=this,t=e._getCityTrigger(),n=new CityPanel(t);n.on("selectCity",function(t){var n=t.city.trim(),r=t.name.trim(),i=t.cityid.trim();e._setCityData(i,n,r),e.options.hasarea&&e.getArea(n);var s=e.data;typeof e.options.onCitySelect=="function"&&e.options.onCitySelect(s)})},i.eventBind=function(){var e=this,t=e.getWrap();e._selectCity(),t.on("click",function(t){var n=W(this),r=t.target,i=W(r),s=e._getAreaTrigger(),o=e._getQuanTrigger();if(s.contains(r)||s[0]===r){var u=s.query(".select-pannel");u.fadeIn(100),i.hasClass("close")&&u.hide();if(i[0].nodeName.toLowerCase()==="a"){var a=i.attr("code"),f=i.html();a?e._setAreaData(a,f):(s.attr("code",""),s.query(".sel-txt").html("\u9009\u62e9\u533a\u53bf"),e.deleteData(["areacode","areaname"])),u.hide(),e.deleteData(["quancode","quanname"]);var l=e.data;e.options.hasquan&&e.getQuan(l.citycode,a),typeof e.options.onAreaSelect=="function"&&e.options.onAreaSelect(l)}}else if(o.contains(r)||o[0]===r){var u=o.query(".select-pannel");u.fadeIn(100),i.hasClass("close")&&u.hide();if(i[0].nodeName.toLowerCase()==="a"){var a=i.attr("code"),f=i.html();a?e._setQuanData(a,f):(o.attr("code",""),o.query(".sel-txt").html("\u9009\u62e9\u5546\u5708"),e.deleteData(["quancode","quanname"])),u.hide();var l=e.data;typeof e.options.onQuanSelect=="function"&&e.options.onQuanSelect(l)}}}),W(document.body).on("click",function(t){var n=t.target,r=W(n),i=e._getAreaTrigger();!i.contains(n)&&i[0]!==n&&i.query(".select-pannel").hide();var s=e._getQuanTrigger();!s.contains(n)&&s[0]!==n&&s.query(".select-pannel").hide()})},i.init=function(){var e=this;e.eventBind();var t=e.options.data,n=e._getCityTrigger(),r=t.citycode?t.citycode:n.attr("code"),i=t.cityname?t.cityname:n.query(".sel-txt").html();e.setData({citycode:r,cityname:i}),e.options.hasarea&&e.getArea(r),t.areacode&&t.areaname&&(e._setAreaData(t.areacode,t.areaname),e.options.hasquan&&e.getQuan(r,t.areacode)),t.quancode&&t.quanname&&e._setQuanData(t.quancode,t.quanname),typeof e.options.onInit=="function"&&e.options.onInit(e.getData())}),r.options.autoinit&&r.init()}window.bang=window.bang||{},bang.AreaSelect=e}(),function(){function t(){var e=this,t=e.PriceObj;return t.origin_price}function n(e,t,n){var r=this,i=r.PriceObj;return t?i[e]=t:typeof i[e]!="undefined"&&delete i[e],n?r.calculateProductPrice():t}function r(e){var t=this,n=t.PriceObj;return n[e]||0}function i(e){var t=this;t.setProductPriceInfo(e)}function s(){var e=this,t=e.PriceObj,n=parseFloat(t.origin_price)||0;t.origin_price_promo_per&&t.origin_price_promo_per>0&&t.origin_price_promo_per<100&&(n=tcb.formatMoney(n*t.origin_price_promo_per/100,0,-1));var r=["origin_price","origin_price_promo_per","final_price_promo_per"];for(var i in t)t.hasOwnProperty(i)&&tcb.inArray(i,r)===-1&&(n+=parseFloat(t[i])||0);return t.final_price_promo_per&&t.final_price_promo_per>0&&t.final_price_promo_per<100&&(n=tcb.formatMoney(n*t.final_price_promo_per/100,1,-1)),tcb.formatMoney(n,2,1)}function o(e){var t=this;t.PriceObj=e}var e=window.Bang=window.Bang||{};o.prototype.setProductPriceInfo=n,o.prototype.getProductPriceInfoByProp=r,o.prototype.deleteProductPriceInfoByProp=i,o.prototype.calculateProductPrice=s,o.prototype.getProductOriginPrice=t,window.Bang.PriceCalculate=function(e){e=e||{};var t=tcb.mix({origin_price:0,origin_price_promo_per:0,final_price_promo_per:0},e,!0);return new o(t)}}(),function(){function e(){this.init.apply(this,arguments)}e.prototype=function(){var e=function(e,t){e=Math.min(99,e),t=parseInt(t,10)||0,t++,t=Math.min(Math.max(1,t),e);var n=[];t>5&&e>10&&n.push('<a data-pn="0" href="#" class="first">\u9996\u9875</a>&nbsp;'),t>1&&n.push('<a data-pn="',t-2,'" href="#" class="pre">&#171;\u4e0a\u4e00\u9875</span></a>&nbsp;');var r,i;t>5?(r=t-4,t>e-5&&(r=e-9)):r=1,i=r+9,r=Math.max(r,1),i=Math.min(i,e);for(var s=r;s<=i;s++)s==t?n.push("<span>",s,"</span>&nbsp;"):n.push('<a data-pn="',s-1,'" href="#">',s,"</a>&nbsp;");return t<e&&n.push('<a data-pn="',t,'" href="#" class="next">\u4e0b\u4e00\u9875&#187;</a>&nbsp;'),t<e-5&&t>10&&n.push('<a data-pn="',e-1,'" href="#" class="last">\u5c3e\u9875</a>'),n.join("")};return{init:function(t,n,r){var i=this;CustEvent.createEvents(this),W(t).undelegate("a","click"),W(t).html(e(n,r)).delegate("a","click",function(r){r.preventDefault();var s=this.getAttribute("data-pn")||0;setTimeout(function(){W(t).html(e(n,s))},50),i.fire("pageChange",{pn:s-0})})}}}(),QW.provide({Pager:e})}(),!function(){function e(e){var i={$target:"",$tpl:"",request_url:"",request_params:{pn:0,page_size:20},lazy_load:!0,col:5,list_key:"",fail:tcb.noop,complete:tcb.noop};e=tcb.mix(i,e,!0);var s=W(e.$target),o=W(e.$tpl);if(!(s&&s.length&&o&&o.length))return tcb.warn("$target\uff1a"+e.$target+"\uff0c\u6216\u8005$tpl\uff1a"+e.$tpl+"\uff0c\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u6b63\u786e\u6267\u884c");e.col=parseInt(e.col,10)||5,e.request_params=e.request_params||{},e.request_params.pn=parseInt(e.request_params.pn,10)||0,e.request_params.page_size=parseInt(e.request_params.page_size,10)||20,r(e.request_url,e.request_params,function(r){var i=null;e.list_key&&(i=r[e.list_key]),i=i?i:r.product_list||r.good_list,i.splice(e.request_params.page_size,9999);var u=t(o,{good_list:i,col:e.col});n(s,u,e.lazy_load),typeof e.complete=="function"&&e.complete(r,s)},e.fail)}function t(e,t){t=t||{},t.good_list=t.good_list||[],t.col=t.col||5,tcb.each(t.good_list,function(e,t){if(typeof t["thum_img"]=="string"){var n=tcb.imgThumbUrl2(t.thum_img,300,300,"edr");t.thum_img={big:n,mid:n,min:n,old:n},tcb.preLoadImg(n)}});var n=e.html().trim().tmpl();return n(t)}function n(e,t,n){e.html(t),n&&setTimeout(function(){tcb.lazyLoadImg(0,e)},300)}function r(e,t,n,r){if(!e)return console.error("\u8fd9\u91cc\u6709\u4e2a\u5546\u54c1\u5217\u8868\u5f02\u6b65\u8bf7\u6c42\u6ca1\u6709\u4f20\u5165url");QW.Ajax.get(e,t,function(e){e=JSON.parse(e),e.errno?typeof r=="function"&&r(e):typeof n=="function"&&n(e.result)})}window.Bang=window.Bang||{},window.Bang.renderProductList=e}(),function(){function h(e){t(this,e),this.render()}var e=function(e){var t=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script"),r=!1;n.src=e,n.charset="utf-8",n.onerror=n.onload=n.onreadystatechange=function(){!r&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&(r=!0,t.removeChild(n))},t.insertBefore(n,t.firstChild)},t=function(e,t){for(var n in t)e[n]=t[n];return e},n=function(e,n){return t(document.createElement(e),n)},r=function(e){return e=e||window.event,e.target||e.srcElement},i=function(e){return e=e||window.event,e.which||e.keyCode||e.charCode},s=function(e){e=e||window.event,e.preventDefault&&e.preventDefault()||(e.returnValue=!1)},o=function(e,t){return(new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","i")).test(e.className)},u=function(e,t){o(e,t)||(e.className=(e.className+" "+t).replace(/^\s+|\s+$/g,""))},a=function(e,t){o(e,t)&&(e.className=e.className.replace(new RegExp("(?:\\s|^)"+t+"(?:\\s|$)","i")," ").replace(/^\s+|\s+$/g,""))},f=function(e,t,n){do if(e.tagName==t)return e;while(e!=n&&(e=e.parentNode));return null},l=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},c=/msie/i.test(navigator.userAgent);h.prototype={width:0,oText:null,itemsData:null,oMenu:null,oWrap:null,selectedIndex:-1,filteredValue:"",filteringValue:"",acValue:"",closed:!1,suggestUrl:"",show:function(){this.oMenu.childNodes.length&&(this.oWrap.style.display="")},hide:function(){this.oWrap.style.display="none"},ishide:function(){return this.oWrap.style.display==="none"},refreshItems:function(e){var t=this,n=t.itemsData;if(n&&!n.__isItemsDataRendered){var r=[];for(var i=0;i<n.length;i++){var s=n[i][2]?' data-url="'+n[i][2]+'"':"";if(e=="hot"){var o=i+1;i<3?r.push('<li acValue="'+n[i][0].replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'"'+s+"><em>"+o+"</em>"+n[i][1]+"</li>"):r.push('<li acValue="'+n[i][0].replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'"'+s+'><em class="gray">'+o+"</em>"+n[i][1]+"</li>")}else r.push('<li acValue="'+n[i][0].replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'"'+s+">"+n[i][1]+"</li>")}t.oMenu.innerHTML=r.join("").replace(/(<\w+)/g,'$1 unselectable="on"'),n.length?t.show():t.hide(),t.filteredValue=t.filteringValue,t.acValue="",t.selectedIndex=-1,n.__isItemsDataRendered=!0}},setSelectedIndex:function(e,t){var n=this,r="",i=n.oMenu.childNodes;i.length?(n.selectedIndex>-1&&a(i[n.selectedIndex],"selected"),e=(e+i.length+1)%(i.length+1),e==i.length?(n.acValue=n.oText.value=n.filteringValue,e=-1):(n.acValue=n.oText.value=i[e].getAttribute("acValue"),r=i[e].getAttribute("data-url"),u(i[e],"selected"))):e=-1,n.selectedIndex=e,n.suggestUrl=r?r:""},refreshPos:function(e,t){e.style.top=t.offsetHeight+0-1+"px",e.style.left=t.offsetLeft-0+"px"},render:function(){var e=this;if(e._rendered)return;e._rendered=!0;var t="<div class=ac_wrap_inner><div class=ac_menu_ctn><ul class=ac_menu></ul></div></div>";/msie[ \/os]*6\./ig.test(navigator.userAgent)&&(t='<iframe class="ac_bgIframe"></iframe>'+t);var o=n("div",{className:"ac_wrap",innerHTML:t.replace(/(<\w+)/g,'$1 unselectable="on"')}),h=e.oText,p=e.oPos||h;p.parentNode.insertBefore(o,p);var d=e.oMenu=o.getElementsByTagName("ul")[0];h.setAttribute("autoComplete","off");var v=(e.oText.getAttribute("suggestWidth")-0||p.offsetWidth)+0+"px";c?o.style.width=v:o.style.minWidth=v,e.refreshPos(o,p),e.oWrap=o,e.hide(),l(e.oText,"keydown",function(t){if(m)return!1;var n=h.value;n?(e.acValue=e.filteringValue=e.filteredValue="",e.hide(),e.closed=!1):e.closed||(e.filteringValue=n,e.refreshData(),e.itemsData&&e.refreshItems());var r=i(t),u=0;switch(r){case 40:u=1;break;case 38:u=-1;break;case 27:e.closed||(e.hide(),e.closed=!0,s(t))}u&&h.value&&(s(t),o.style.display=="none"?(e.show(),e.closed=!1):e.setSelectedIndex(e.selectedIndex+u))}),l(e.oText,"focus",function(t){W(".searchbox .suggest-word").hide(),e.refreshPos(o,p);var n=window.location.href.indexOf("/search")>-1?!1:!0,r=e.oText.getAttribute("data-default");r==e.oText.value&&n&&(e.oText.value=""),e.oText.className=e.oText.className.replace(/\s?default\s?/g,"");if(e.oText.value.length==0){e.show();if(m)return!1;var i=h.value;i?(e.acValue=e.filteringValue=e.filteredValue="",e.hide(),e.closed=!1):e.closed||(e.filteringValue=i,e.refreshData(),e.itemsData&&e.refreshItems())}}),l(e.oText,"blur",function(t){e.oText.value.length<1&&W(".searchbox .suggest-word").show(),e.hide();var n=e.oText.getAttribute("data-default");!e.oText.value&&n&&(e.oText.value=n,e.oText.className+=" default")});var m,g;o.onmousedown=function(e){s(e),clearTimeout(g),m=!0,g=setTimeout(function(){m=!1},2e3)},d.onclick=function(t){var n=r(t),i=f(n,"LI",d);if(i){h.blur(),setTimeout(function(){h.focus()},10);var s=0,o=i;while(o=o.previousSibling)s++;e.setSelectedIndex(s,!0),e.hide(),e.onselectitem&&e.onselectitem()}},d.onmouseover=function(e){var t=r(e),n=f(t,"LI",d);n&&u(n,"hover")},d.onmouseout=function(e){var t=r(e),n=f(t,"LI",d);n&&a(n,"hover")}}},Dom.ready(function(){var e=W(".top-search .search-txt");if(e.length){window.suggest=function(e){var i=[],s=e.result||[],o=t.value;for(var u=0;u<s.length;u++){var a=s[u].word||s[u],f=a,l=s[u].url||"";o&&f.indexOf(o)==0&&(f=o+"<b>"+f.substr(o.length)+"</b>"),a&&i.push([a,f,l])}r.itemsData=i,e.query&&(n[e.query]=e)};var t=W(".top-search .search-txt")[0],n={},r=new h({oText:t,onselectitem:function(){if(this.suggestUrl){window.location.href=decodeURIComponent(this.suggestUrl);return}var e=t.form.elements;for(var n=0;n<e.length;n++)if(e[n].type=="submit"){e[n].click();return}},refreshData:function(){var e=window.HotSuggests||[],t={result:[]};e.forEach(function(e){typeof e=="string"&&(e={suggest_name:e,suggest_url:""}),t.result.push({word:e.suggest_name||"",url:e.suggest_url||""})}),t?suggest(t):QW.Ajax.get("/youpin/suggest?word="+encodeURIComponent(this.oText.value),function(e){try{suggest(e)}catch(t){}})}});t.focus(),t.blur()}W(".top-search").on("submit",function(e){e.preventDefault();var t=W(this).one('[name="keyword"]'),n=t.attr("data-default"),r=t.val().trim();n==r&&t.val(t.attr("data-defaultsearch"));if(r==""){t.shine4Error().focus();return}this.submit()})})}(),!function(){function l(e){var t={container:".block-slide",auto:!1,start:0,speed:300,nav_show:!0},n=this;n.options=tcb.mix(t,e,!0),n.options.auto=parseInt(n.options.auto,10)||0,n.options.start=parseInt(n.options.start,10)||0,n.options.speed=parseInt(n.options.speed,10)||300,n.itemWidth=0,n.itemCount=0,n.itemPos=n.options.start,n.$container=W(n.options.container),n.autoHandler=null;if(!n.$container||!n.$container.length)return tcb.warn("\u627e\u4e0d\u5230\u8f6e\u64ad\u5bb9\u5668\uff1a"+n.options.container);n.init()}window.Bang=window.Bang||{};var e=".slide-shower-wrap",t=".slide-inner",n=".slide-list",r=".slide-item",i=".slide-ctrl",s=".ctrl-item",o=".slide-go-left",u=".slide-go-right",a="ctrl-item",f="ctrl-curr";tcb.mix(l.prototype,{init:function(){var e=this,t=e.options;e.createNav(),e.resize(),e.bindEvent(),t.auto&&e.runAuto()},run:function(e,n){var r=this,i=r.options;clearTimeout(r.autoHandler);var o=r.$container;e=typeof e=="undefined"?+r.itemPos+1:e,e=r.itemCount-e<1?0:e;if(e==r.itemPos&&!n)return;o.query(t).animate({scrollLeft:e*r.itemWidth},i.speed,function(){o.query(s).removeClass(f).item(e).addClass(f),r.itemPos=e},QW.Easing.easeBoth)},runNext:function(){},runPrev:function(){},runAuto:function(){var e=this,t=e.options,n=t.auto;e.autoHandler=setTimeout(function r(){e.run(),e.autoHandler=setTimeout(r,n)},n)},resize:function(){var e=this,i=e.$container,s=i.query(t),o=i.query(n),u=i.query(r);e.itemWidth=i.query(t).getSize().width,e.itemCount=u.length,o.css("width",e.itemWidth*e.itemCount),u.css("width",e.itemWidth),s[0].scrollLeft=e.itemPos*e.itemWidth},createNav:function(){var e=this,t=e.$container,n=t.query(r),o=t.query(i),u=o.query(s);if(n&&u&&n.length==u.length)return;var l="";for(var c=0;c<n.length;c++)l+=c==this.options.start?'<span class="'+a+" "+f+'" data-sn="'+c+'"></span>':'<span class="'+a+'" data-sn="'+c+'"></span>';o.html(l),e.options.nav_show?o.show():o.hide()},bindEvent:function(){var e=this,t=e.$container,n=e.options;t.query(s).on("click",function(t){t.preventDefault();var n=W(this),r=+n.attr("data-sn");e.run(r)}),t.on("mouseenter",function(t){clearTimeout(e.autoHandler)}),t.on("mouseleave",function(t){n.auto&&e.runAuto()}),W(window).on("resize",function(){e.resize(),clearTimeout(e.autoHandler),n.auto&&e.runAuto()})}}),window.Bang.SimpleSlider=l}(),function(){function e(e){window.XYPostkey=e}function t(){return window.XYPostkey}function n(e){var t=!1;return e.length?(e.hasClass("form-disabled")&&(t=!0),t):!0}function r(e){if(!e.length)return;e.addClass("form-disabled")}function i(e){if(!e.length)return;e.removeClass("form-disabled")}function s(e){QW.Ajax.get("/youpin/doGetXyModelList",function(t){t=QW.JSON.parse(t),t.errno||typeof e=="function"&&e(t.result)})}function o(n){function o(e,t){e=+e||0,t=+t||0;var n=window.WishModelSelectList;if(!n||!n.length)return;var s=n[e],u=W("#WishModelSelectWrap");if(!u||!u.length)u=W('<ul id="WishModelSelectWrap" class="wish-model-select-wrap"></ul>'),u.appendTo(W("body"));var a="",f,l,c;if(e==0){a+='<li class="tit">\u8bf7\u9009\u62e9\u54c1\u724c\uff1a</li>';for(l=0,c=s.length;l<c;l++)f=s[l],a+='<li data-id="'+f.brand_id+'" data-step="'+e+'">'+f.brand_name+"</li>"}else{a+='<li class="tit">\u8bf7\u9009\u62e9\u578b\u53f7\uff1a</li>',s=s[t];for(l=0,c=s.length;l<c;l++)f=s[l],a+='<li data-id="'+f.model_id+'" data-step="'+e+'">'+f.model_name+"</li>"}setTimeout(function(){var e=r.ancestorNode(i).getRect();u.query("li").un(),u.html(a).css({position:"absolute",top:+e.top,left:e.left,width:e.width,height:+e.height,"z-index":10}),u.query("li").on("click",function(e){e.preventDefault();var t=W(this),i=+t.attr("data-step")+1,s=+t.attr("data-id");if(t.hasClass("tit"))return;i-n.length>-1?(r.query('[name="amount"]').val(""),r.query('[name="model_id"]').val(s),r.query(".item-other").html(t.html()).addClass("item-cur").siblings(".item-cur").removeClass("item-cur"),u.query("li").un(),u.removeNode()):o(i,s)})},0)}var r=n||W(".wish-form");if(!r.length)return;var i=".wish-cont";tcb.getXYData(function(t){t.brand&&t.model&&(window.WishModelSelectList=[t.brand,t.model]),W('[name="xy_postkey"]').val(t.xy_postkey),e(t.xy_postkey);var n=W("#JsXYHotModel").html().trim().tmpl()({list:t.hot_model});W(".wish-form .model-list").html(n),W(".wish-form .model-list span:first-child").addClass("item-cur");var i=W(".wish-form .model-list span:first-child").attr("data-wprice"),s=W(".wish-form .model-list span:first-child").attr("data-modelid");W(".wish-form .ipt-text").val(i),r.query('[name="model_id"]').val(s)}),r.on("submit",function(n){n.preventDefault();var s=this,o=W(s).query('[name="amount"]');o.blur();if(o&&o.length&&!/^\d+\.?\d*$/.test(o.val()))return o.shine4Error().focus(),!1;if(o.val()<50){var u='<div class="wish-qrcode-wrap" id="WishQrcodeWrap"><div class="row tcenter"><div class="tip mt50">\u4eb2\uff0c\u8fd9\u4e2a\u4ef7\u683c\uff0c<br/>\u81e3\u59be\u771f\u7684\u505a\u4e0d\u5230\u554a\uff01</div></div><div class="row tcenter"><a href="#" class="wish-again">\u91cd\u65b0\u8bb8\u613f</a></div></div>',a=r.ancestorNode(i).getRect(),f=W(u);f.css({position:"absolute",top:+a.top,left:a.left,width:a.width,height:+a.height,"z-index":10}),f.appendTo(W("body")),f.query(".wish-again").on("click",function(e){e.preventDefault(),W(this).un(),f.removeNode()}),setTimeout(function(){f&&f.length&&(f.query(".wish-again").un(),f.removeNode())},1e4);return}W(s).attr("action","/aj_lp/sub_xinyuan"),W('[name="xy_postkey"]').val(t()),QW.Ajax.post(s,function(t){t=QW.JSON.parse(t);if(t.errno)alert(t.errmsg+"\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5");else{e(t.result.xy_postkey);var n='<div class="wish-qrcode-wrap" id="WishQrcodeWrap"><div class="row tcenter"><img src="'+t.result.qrcode+'" alt=""/><div class="tip">\u626b\u7801\uff0c\u540c\u6b65\u81f3\u5fae\u4fe1</div></div>'+'<div class="row tcenter">\u5fc3\u4eea\u624b\u673a\u4e00\u65e6\u51fa\u73b0\uff0c\u6211\u4eec\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u60a8</div>'+"</div>",s=r.ancestorNode(i).getRect(),o=W(n);o.css({position:"absolute",top:+s.top,left:s.left,width:s.width,height:+s.height,"z-index":10}),o.appendTo(W("body")),setTimeout(function(){o&&o.length&&o.removeNode()},6e4)}})});var s=r.query(".item");tcb.bindEvent(r,{".item":function(e){var t=W(this);if(t.hasClass("item-other"))o(0);else{t.addClass("item-cur").siblings(".item-cur").removeClass("item-cur");var n=t.attr("data-modelid");r.query('[name="model_id"]').val(n),r.query('[name="amount"]').val(t.attr("data-wprice"))}}}),tcb.setUnselect(s),W(document.body).on("mousedown",function(e){var t=e.target,n=W(t);n.attr("id")!="WishModelSelectWrap"&&!n.ancestorNode("#WishModelSelectWrap").length&&(W("#WishModelSelectWrap li").un(),W("#WishModelSelectWrap").removeNode())})}Dom.ready(function(){var e={index:["_trackEvent","pc\u4f18\u54c1","\u7edf\u8ba1","\u9996\u9875","1",""],product:["_trackEvent","pc\u4f18\u54c1","\u7edf\u8ba1","\u5546\u54c1\u8be6\u60c5\u9875","1",""],tinfo:["_trackEvent","pc\u4f18\u54c1","\u7edf\u8ba1","\u4e0b\u5355\u9875","1",""],search:["_trackEvent","pc\u4f18\u54c1","\u7edf\u8ba1","\u641c\u7d22\u9875","1",""],cashier:["_trackEvent","pc\u4f18\u54c1","\u7edf\u8ba1","\u6536\u94f6\u53f0\u9875","1",""],paysuccess:["_trackEvent","pc\u4f18\u54c1","\u7edf\u8ba1","\u652f\u4ed8\u6210\u529f\u9875","1",""]};e[window.__PageSymbol]&&tcb.statistic(e[window.__PageSymbol]),tcb.bindEvent(document.body,{".search-result .p-item":{mouseenter:function(e){var t=W(this);t.addClass("p-item-hover")},mouseleave:function(e){var t=W(this);t.removeClass("p-item-hover")}},".prd-item-awrap, .prd-item .prd-buy":{mousedown:function(e){var t=$(this),n=t.attr("href");t.attr("href",tcb.setUrl(n,{from:tcb.queryUrl(window.location.href,"from")}))}},".product-detail-wuyouhuanji":function(e){e.preventDefault(),tcb.panel("",W("#JsWuYouHuanJiTipPanelTpl").html().tmpl()(),{className:"extendservice-confirm-panel-wrap wuyouhuanji-tip-panel-wrap"})},".show-wuyouhuanji-agreement":function(e){e.preventDefault(),tcb.panel("",W("#JsWuYouHuanJiAgreementPanelTpl").html().tmpl()(),{className:"wuyouhuanji-agreement-panel panel-tom01"})},".trigger-new-year-customer-gift-shower":function(e){e.preventDefault(),tcb.panel("",W("#JsNewYearCustomerGiftShowerPanelTpl").html().tmpl()(),{className:"extendservice-confirm-panel-wrap new-year-customer-gift-shower-panel-wrap"})},".btn-year-middle-promo":function(e){e.preventDefault();var t="https://p.ssl.qhimg.com/t01cd557789c534b36d.jpg",n='<h3>\u626b\u7801\u9886\u53d6618\u6d3b\u52a8\u4f18\u60e0\u7801</h3><div class="desc">\u4ec5\u96506\u670816\uff5e26\u65e5</div><div class="img"><img src="https://p.ssl.qhimg.com/t017ee3be501e423c98.gif" alt="" /></div>';tcb.panel("  ",n,{className:"panel-tom01 year-middle-promo-panel"}),setTimeout(function(){tcb.imageOnload(t,function(){W(".year-middle-promo-panel .img img").attr("src",t)})},200)},".js-ewm-unexpand":function(e){e.preventDefault();var t=W(this);W(".js-ewm-expand").css("display","block"),W(".right-service-inner").hide()},".js-ewm-expand":function(e){e.preventDefault();var t=W(this);t.hide(),W(".right-service-inner").show()},".js-trigger-go-to-top":function(e){e.preventDefault(),$(window).scrollTop(0)}})}),window.setXYPostkey=e,window.getXYPostkey=t,tcb.isFormDisabled=tcb.isFormDisabled||n,tcb.setFormDisabled=tcb.setFormDisabled||r,tcb.releaseFormDisabled=tcb.releaseFormDisabled||i,tcb.getXYData=s,tcb.lpWishFormSubmit=tcb.lpWishFormSubmit||o}(),Dom.ready(function(){var e=null;tcb.bindEvent(document.body,{".search-result .prd-item, .model-relation .prd-item":{mouseenter:function(e){W(this).addClass("prd-item-hover")},mouseleave:function(e){W(this).removeClass("prd-item-hover")}},".search-result .prd-item .prd-wish":function(e){e.preventDefault();var t=W(this),n=t.ancestorNode(".prd-item"),r="/aj_lp/sub_xinyuan",i={amount:n.attr("data-amount"),model_id:n.attr("data-mid"),xy_postkey:getXYPostkey()};QW.Ajax.post(r,i,function(e){e=QW.JSON.parse(e);if(e.errno)alert(e.errmsg+"\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5");else{setXYPostkey(e.result.xy_postkey);var t='<div class="wish-qrcode-wrap"><div class="row tcenter"><img src="'+e.result.qrcode+'" alt=""/><div class="tip">\u626b\u7801\uff0c\u540c\u6b65\u81f3\u5fae\u4fe1</div></div>'+'<div class="row tcenter">\u5fc3\u4eea\u624b\u673a\u4e00\u65e6\u51fa\u73b0\uff0c\u6211\u4eec\u7b2c\u4e00\u65f6\u95f4\u901a\u77e5\u60a8</div>'+"</div>",r=n.getRect(),i=W(t);i.css({position:"absolute",top:0,right:0,left:0,bottom:0}),i.appendTo(n),setTimeout(function(){i&&i.length&&i.removeNode()},6e4)}})},".cancel-order":function(t){t.preventDefault();var n=W(this),r=n.attr("data-type");if(r==3)var i=W("#LiangpinCancelOrderReturnPanelTpl").html().trim().tmpl(),s=i({cancel_tip:n.attr("data-tip"),cancel_type:n.attr("data-type"),orderid:n.attr("data-orderid")});else var i=W("#LiangpinCancelOrderPanelTpl").html().trim().tmpl(),s=i({cancel_tip:n.attr("data-tip"),cancel_type:n.attr("data-type"),orderid:n.attr("data-orderid")});e=tcb.panel("",s,{className:"liangpin-cancel-order-panel-wrap"})},".liangpin-cancel-order-panel .btn-confirm":function(t){t.preventDefault();var n=$(this),r=n.closest(".liangpin-cancel-order-panel"),i={1:"/liangpin_my/aj_close_order",2:"/liangpin_my/applyrefund",3:"/liangpin_my/doAfterSales"},s=i[n.attr("data-type")],o=n.attr("data-orderid");s||alert("\u975e\u6cd5\u64cd\u4f5c\uff01");var u={order_id:o};n.attr("data-type")=="3"&&(u.user_apply_handle=r.find('[name="user_apply_handle"]').val(),u.user_apply_reason=r.find('[name="user_apply_reason"]').val(),u.user_apply_memo=r.find('[name="user_apply_memo"]').val()),$.getJSON(s,u,function(t){e&&e.hide&&e.hide();if(n.attr("data-type")=="3"){t.errno!=0?alert("\u62b1\u6b49\uff0c\u7533\u8bf7\u5931\u8d25\u3002"
):alert("\u7533\u8bf7\u6210\u529f\u3002"),window.location.reload();return}var r=tcb.queryUrl(window.location.href);window.location.href=tcb.setUrl("/liangpin_my/order_detail?order_id="+o,'"from":"'+(r.from?r.from:"")+'"')})},'[name="user_apply_handle"]':{change:function(){var e=$(this).val();$('[name="user_apply_reason"] option').each(function(t,n){var r=$(n).attr("data-reason_group");r==e?$(n).addClass("show").removeClass("hide"):$(n).removeClass("show").addClass("hide")}),$('[name="user_apply_reason"] option.show').eq(0).prop("selected",!0)}},".liangpin-cancel-order-panel .btn-cancel":function(t){t.preventDefault(),e&&e.hide&&e.hide()}}),tcb.lpWishFormSubmit(W(".block-wish .wish-form")),W("#payOrderOnline").on("click",function(){var e=W(this);if(e.hasClass("btn-disabled"))return;var t=W(this).attr("data-orderid"),n="/youpin/cashier?order_id="+t;window.open(n),tcb.panel("\u8ba2\u5355\u652f\u4ed8",'<div style="padding:20px;font-size:14px; text-align:center">\u8bf7\u5728\u65b0\u7a97\u53e3\u4e2d\u5b8c\u6210\u652f\u4ed8\u3002</div>',{width:300,height:150,btn:[{txt:"\u652f\u4ed8\u6210\u529f",fn:function(){window.location.reload()},cls:"ok"},{txt:"\u652f\u4ed8\u9047\u5230\u95ee\u9898",fn:function(){window.location.reload()}}]})}),W("#confirmDeal").on("submit",function(e){e.preventDefault(),confirm("\u60a8\u8981\u786e\u8ba4\u6536\u8d27\u5417\uff1f\u786e\u8ba4\u540e\u5c06\u81ea\u52a8\u6253\u6b3e\u7ed9\u5546\u5bb6\u3002")&&QW.Ajax.post("/liangpin_my/buyerconfirm",this,function(e){e=QW.JSON.parse(e),e.errno?alert("\u62b1\u6b49\uff0c\u786e\u8ba4\u6536\u8d27\u5931\u8d25\u3002"+e.errmsg):window.location.reload()})})}),function(){function f(){return o||[]}function l(e,t){var n=o||[];typeof e=="number"?n[e]&&(n[e][1]=t):n.forEach(function(n){n[0]==e&&(n[1]=t)})}function c(){return s.loading}function h(e){s.loading=e?!0:!1}function p(){return s.max_pn}function d(e,t){e=parseInt(e,10)||0,t?s.max_pn=e:s.max_pn=e?Math.ceil(e/12):0}function v(){return s.pn||0}function m(e){s.pn=e||0,w(null,e,"pn")}function g(){m(0)}function y(){return i||[]}function b(e){var t=u||[];if(typeof e!="undefined")if(typeof e=="string"){var n=!0;t.forEach(function(r){r[0]===e&&(n=!1,t=r[1])}),n&&(t=null)}else t=t[e]||null;var r=tcb.queryUrl(window.location.search,"page");return r&&w(null,r,"page"),t}function w(e,t,n){var r=u;if(e===null&&n){var i=!0;r.forEach(function(e){e[0]==n&&(i=!1,e[1]=t.toString())}),i&&r.push([n,t.toString()])}else{r[e]instanceof Array||(r[e]=[]);if(r[e].length<2)return!1;n&&(r[e][0]=n),r[e][1]=t.toString()}return r}function E(e,t){var n=u;arguments.length||n.forEach(function(e){e[1]=""}),typeof e=="number"?n[e]&&(n[e][1]=""):n.forEach(function(n){n[0]==e&&(arguments.length>1?n[1]==t&&(n[1]=""):n[1]="")})}function S(e,t){t=t||W(".search-filter");var n=W("#LiangpinSearchFilterTpl").html().trim().tmpl(),r=n(e);t.html(r)}function x(e,t){t=t||W(".js-search-sort");var n=W("#LiangpinSearchSortTpl").html().trim().tmpl(),r=n(e);t.html(r)}function T(){var e=b(),r=f(),i=e.concat(r).toString(),o={};e.concat(r).forEach(function(e,t){var n=e[0],r=e[1];r&&(r=encodeURIComponent(r),o[n]?(o[n]instanceof Array||(o[n]=[o[n]]),o[n].indexOf(r)==-1&&o[n].push(r)):o[n]=r)}),h(!0);var u=s[i];u?(u.filter&&!u.pn&&!t&&S(u.filter),u.sort&&!u.pn&&!n&&x(u.sort),k(u.product,W(".search-result"),u.pn),u.count>0||tcb.lpWishFormSubmit(W(".block-wish .wish-form")),d(u.count),m(u.pn+1),D(u.count,u.pn,12),h(!1)):QW.Ajax.get("/youpin/aj_get_goods",o,function(r){r=JSON.parse(r);if(!r.errno){var u=r.result,f=0;o.pn&&parseInt(o.pn,10)>0&&(f=parseInt(o.pn,10));var l=null,c=null;if(!f&&!t){var p=L({attr_list:u.attr_list||[],brand_list:u.brand_list||[],search_model_ids:u.search_model_ids||[],chengse_list:u.chengse_list||[],price_list:u.price_list||[]},a),v=[],g=[];e.forEach(function(e,t){var n=e[0],r=e[1];n==="keyword"&&r&&v.push({pos:t,val:r,key:n,attr:"\u5173\u952e\u8bcd",txt:r});var i=t-a;if(i>-1&&p[i]){var s;r&&(s=p[i].list.filter(function(e){return e["attr_val_id"]==r})[0])&&s.attr_val_name?v.push({pos:t,val:r,key:n,attr:p[i].attr_name,txt:s.attr_val_name}):g.push(p[i])}}),l={count:u.goods_count,selected_attr_list:v,attr_list:g},S(l)}!f&&!n&&(c={sort:o.sort,count:u.goods_count},x(c));var y={good_list:u.good_list,col:5};k(y,W(".search-result"),f),u.goods_count>0||tcb.lpWishFormSubmit(W(".block-wish .wish-form")),s[i]={pn:f,count:u.goods_count,filter:l,sort:c,product:y},d(u.goods_count),m(f+1),D(u.goods_count,f,20)}h(!1)})}function N(e,t,n){}function C(e){var t="",n=W("#LiangpinProductItemTpl").html().trim().tmpl();return t=n(e),t}function k(e,t,n){typeof n=="undefined"&&(QW.ObjectH.isArrayLike(t)?n=0:(n=parseInt(t),n=n?n:0,t=null)),t=t||W(".search-result");var i=C(e);n?r?t.html(i):t.insertAdjacentHTML("beforeend",i):t.html(i)}function L(e,t){var n=e.attr_list,r=e.brand_list,s=e.search_model_ids,o=e.chengse_list,u=e.price_list;t=t||0;var a=[],f=A(r,t);a.push(f);var l=O(s,t+1);a.push(l);var c=_(o,t+2);a.push(c);var h=M(u,t+3);return a.push(h),n.forEach(function(e,n){a.push({pos:t+a.length,attr_var:"attr[]",attr_name:e.attr_name,list:e.list})}),i=a,a}function A(e,t){var n={pos:t,attr_var:"brand_id",attr_name:"\u54c1\u724c",list:[]};return QW.ObjectH.isArray(e)?e.forEach(function(e,t){n.list.push({attr_val_id:e.key,attr_val_name:e.name,attr_val_num:e.sums})}):QW.ObjectH.map(e,function(e,t){n.list.push({attr_val_id:t,attr_val_name:e.name,attr_val_num:e.sums})}),n}function O(e,t){var n={pos:t,attr_var:"model_id",attr_name:"\u578b\u53f7",list:[]};return e.forEach(function(e,t){n.list.push({attr_val_id:e.model_id,attr_val_name:e.model_name})}),n}function M(e,t){var n={pos:t,attr_var:"price",attr_name:"\u4ef7\u683c",list:[]};return QW.ObjectH.isArray(e)?e.forEach(function(e,t){n.list.push({attr_val_id:e.key,attr_val_name:e.name})}):QW.ObjectH.map(e,function(e,t){n.list.push({attr_val_id:t,attr_val_name:e})}),n}function _(e,t){var n={pos:t,attr_var:"chengse",attr_name:"\u6210\u8272",list:[]};return QW.ObjectH.isArray(e)?e.forEach(function(e,t){n.list.push({attr_val_id:e.key,attr_val_name:e.name})}):QW.ObjectH.map(e,function(e,t){n.list.push({attr_val_id:t,attr_val_name:e})}),n}function D(e,t,n){n=n||12,t=t||0;var r=Math.ceil(e/n),i=W(".pagination .pages");if(r==1){i.html("");return}var s=new Pager(i,r,t);s.on("pageChange",function(e){m(e.pn),T(),window.scrollTo(0,W(".search-sort").getXY()[1])})}var e=W(".page-liangpin-index");if(!e||!e.length)return;var t=window.__nofilter||!1,n=window.__nosort||!1,r=window.__pager||!1,i=[],s={pn:0,max_pn:0,loading:!1},o=[["sort",""]],u=[["keyword",""],["pn","0"],["brand_id",""],["model_id",""],["chengse",""],["price",""],["attr[]",""],["attr[]",""],["attr[]",""],["attr[]",""],["attr[]",""],["attr[]",""],["attr[]",""],["attr[]",""]],a=2;Dom.ready(function(){function e(){var e=window.location.search.queryUrl();if(e){var t=b();t.forEach(function(t,n){e[t[0]]&&w(n,e[t[0]])})}T(),tcb.bindEvent(document.body,{".js-search-filter .filter-item":function(e){e.preventDefault();var t=W(this),n=t.ancestorNode(".filter-choice");if(t.hasClass("filter-curr"))return;var r=parseInt(n.attr("data-pos"))||0,i=n.attr("data-var"),s=t.attr("data-value")||"";w(r,s),g(),t.addClass("filter-curr").siblings(".filter-curr").removeClass("filter-curr"),T()},".js-search-filter .del":function(e){e.preventDefault();var t=W(this),n=t.ancestorNode(".selected-item"),r=parseInt(n.attr("data-pos"))||0,i=n.attr("data-var"),s=n.attr("data-value");E(i,s),g(),T()},".js-search-sort .sort-item":function(e){e.preventDefault();var t=W(this);t.addClass("sort-curr").siblings(".sort-curr").removeClass("sort-curr"),t.attr("data-cursort",t.attr("data-sort")),l("sort",t.attr("data-sort")),g(),T()}})}e()})}(),Dom.ready(function(){function i(){var e=W("#LiangPinLPmaUseForm");e.length&&e.on("submit",function(t){t.preventDefault();if(s(e))return;if(!a(e))return!1;o(e),setTimeout(function(){QW.Ajax.get("/youpin/aj_ch_youhui",e[0],function(t){try{t=JSON.parse(t),t.errno?alert("\u5f53\u524dLP\u7801\u4e0d\u53ef\u7528\u3002"+t.errmsg):window.location.href=tcb.setUrl("/youpin/tinfo?product_id="+t.result+"&num=1&youhui_code="+e.query('[name="youhui_code"]').val().trim(),{from:tcb.queryUrl(location.href,"from")})}catch(n){}u(e)})},200)})}function s(e){var t=!0;return e&&e.length&&!e.hasClass("form-disabled")&&(t=!1),t}function o(e){e&&e.length&&e.addClass("form-disabled")}function u(e){e&&e.length&&e.removeClass("form-disabled")}function a(e){flag=!0;if(!e||!e.length)return;var t=e.query('[name="youhui_code"]');if(t&&t.length){var n=t.val().trim();n||(flag=!1,t.shine4Error().focus(),t.siblings(".err").css({visibility:"visible"}))}return flag&&t.siblings(".err").css({visibility:"hidden"}),flag}function f(){var e=W("#HotProductList");e&&e.length&&h(function(t){var n,r=t.time,i=t.flash_list,s=t.jingpin_list;if(!(i&&s&&i.length+s.length>4)){var o=e.ancestorNode(".tg-small");o.query(".slide-go-left").addClass("disabled"),o.query(".slide-go-right").addClass("disabled")}i&&i.length?(c(i,r,e),i.length<5&&s&&s.length&&l(s,e,!0)):s&&s.length&&l(s,e)})}function l(e,t,n){var i=e,s=W("#JsHotProductListTpl").html().trim().tmpl()({list:i});n?t.insertAdjacentHTML("beforeend",s):t.html(s),r.resetBoxSize()}function c(e,n,i){var s=e,o=W("#JsFlashProductListTpl").html().trim().tmpl()({list:s});i.html(o),r.resetBoxSize(),n=Date.parse(n.replace(/-/g,"/"))||(new Date).getTime(),i.query(".countdown").forEach(function(e,r){var i=W(e),o=s[r],u=o.flash_start_time.replace(/-/g,"/"),a=o.flash_end_time.replace(/-/g,"/");u=Date.parse(u)||0,a=Date.parse(a)||0;var f=$(e).parent().find(".seckill");!o.flash_saling&&n<u?(i.addClass("countdown-start-prev").attr("data-descbefore","\u8ddd\u5f00\u59cb"),t.startCountdown(u,n,i,{end:function(){i.ancestorNode(".slide-item").query(".p-buy-disabled").removeClass("p-buy-disabled").html("\u7acb\u5373\u62a2\u8d2d"),i.removeClass("countdown-start-prev").attr("data-descbefore"," "),t.startCountdown(a,u,i,{end:function(){i.ancestorNode(".slide-item").query(".p-buy").addClass("p-buy-disabled").html("\u5df2\u552e\u51fa"),i.html("\u5df2\u552e\u51fa").addClass("countdown-end-next"),f.hide()}})}})):o["flash_saling"]==1&&o["flash_status"]=="saling"&&n<a?(i.removeClass("countdown-start-prev").attr("data-descbefore"," "),t.startCountdown(a,n,i,{end:function(){i.ancestorNode(".slide-item").query(".p-buy").addClass("p-buy-disabled").html("\u5df2\u552e\u51fa"),i.html("\u5df2\u552e\u51fa").addClass("countdown-end-next"),f.hide()}})):(i.ancestorNode(".slide-item").query(".p-buy").addClass("p-buy-disabled").html("\u5df2\u552e\u51fa"),i.html("\u5df2\u552e\u51fa").addClass("countdown-end-next"),f.hide())})}function h(e){var t="/youpin/doGetFlashSaleGoods",n={};QW.Ajax.get(t,n,function(t){var n=[];t=JSON.parse(t),t.errno||(n=t.result),typeof e=="function"&&e(n)})}var e=W(".page-liangpin-index");if(!e||!e.length)return;var t=window.Bang=window.Bang||{},n=W(".trigger-show-video");n&&n.length&&n.on("click",function(e){e.preventDefault();var t=W("#JsVideoPlayerPanelTpl").html().trim().tmpl(),n=t();tcb.panel("",n,{className:"panel-tom01 video-player-panel"})}),new t.SimpleSlider({container:".block-top-banner-slide",auto:5e3,start:0,speed:300,nav_show:!0});var r=new TuiguangSlide(".tg-small",{animTime:500});tcb.bindEvent(document.body,{"#HotProductList .slide-item":{click:function(e){var t=W(this),n=W(e.target);!n.ancestorNode("a").length&&n[0].nodeName.toLowerCase()!="a"&&t.query(".slide-img a").click()},mouseenter:function(e){var t=W(this);t.addClass("slide-item-hover")},mouseleave:function(e){var t=W(this);t.removeClass("slide-item-hover")}},".liangpin-prevhead-close":function(e){e.preventDefault(),W(".liangpin-prevhead").slideUp(1e3,function(){W(this).removeNode()})},".liangpin-prevhead-shareweibo a, .liangpin-lpma-usepanel .share-weibo a":{click:function(e){e.preventDefault();var t="http://bang.360.cn/youpin?f=weibo",n="http://bang.360.cn/youpin?f=weibo",r="360\u4f18\u54c1\u53cc\u5341\u4e00\u6d3b\u52a8\u706b\u7206\u8fdb\u884c\u4e2d\uff01\u4e54\u5e03\u65af\u7559\u4e0b\u7684\u7ecf\u5178\u9650\u91cf\u62a2\u8d2ding\uff01iphone4\u53ea\u8981598\u5143\uff01\u6765\u665a\u5c31\u6728\u6709\u4e86\uff01\u5c0f\u4f19\u4f34\u5feb\u6765\u62a2\u5427\uff01\u2192\u2192\uff08"+t+"\uff09\u5173\u6ce8 @360\u624b\u673a\u56de\u6536 \uff0c\u8fd8\u80fd\u83b7\u5f97\u66f4\u591a\u673a\u4f1a\uff01",i="http://service.weibo.com/share/share.php?url="+encodeURIComponent(n)+"&type=button&ralateUid=3519606963&language=zh_cn&appkey=766e9&title="+encodeURIComponent(r)+"&pic="+encodeURIComponent("https://p.ssl.qhimg.com/t012d06dc09478f2449.png")+"&searchPic=false&style=simple",s=650,o=570,u=(window.screen.width-s)/2,a=(window.screen.height-o)/2;window.open(i,"_blank")},mouseenter:function(e){var t=W(this);t.ancestorNode(".liangpin-prevhead-shareweibo").addClass("liangpin-prevhead-shareweibo-hover")},mouseleave:function(e){var t=W(this);t.ancestorNode(".liangpin-prevhead-shareweibo").removeClass("liangpin-prevhead-shareweibo-hover")}},".liangpin-prevhead-shareweixin a, .liangpin-lpma-usepanel .share-weixin a":{click:function(e){e.preventDefault()},mouseenter:function(e){var t=W(this),n=t.getRect(),r=W("#LPmaWXCode");r.length||(W("body").insertAdjacentHTML("beforeend",'<div class="lpma-wxcode" id="LPmaWXCode"></div>'),r=W("#LPmaWXCode")),r.css({display:"block",left:n.left+n.width,top:n.top}),t.ancestorNode(".liangpin-prevhead-shareweixin").addClass("liangpin-prevhead-shareweixin-hover")},mouseleave:function(e){var t=W(this),n=W("#LPmaWXCode");n.length&&n.hide(),t.ancestorNode(".liangpin-prevhead-shareweixin").removeClass("liangpin-prevhead-shareweixin-hover")}},".liangpin-prevhead-useLP a":{click:function(e){e.preventDefault();var t=W("#LPmaUsepanelTpl").html().trim().tmpl(),n=t(),r={width:770,height:280,withMask:!0};tcb.panel("",n,r),i()},mouseenter:function(e){var t=W(this);t.ancestorNode(".liangpin-prevhead-useLP").addClass("liangpin-prevhead-useLP-hover")},mouseleave:function(e){var t=W(this);t.ancestorNode(".liangpin-prevhead-useLP").removeClass("liangpin-prevhead-useLP-hover")}},".show-baozhuangqingdan-btn":function(e){e.preventDefault();var t=W(this);t.hasClass("hide-baozhuangqingdan-btn")?(t.removeClass("hide-baozhuangqingdan-btn"),t.siblings(".show-baozhuangqingdan").slideUp()):(t.addClass("hide-baozhuangqingdan-btn"),t.siblings(".show-baozhuangqingdan").slideDown())}}),f(),window.Bang.renderProductList({$target:W(".recommend-model-cont-inner"),$tpl:W("#JsRecommendModelProductListTpl"),request_url:"/youpin/getRecommendProductModel",request_params:{pn:0,page_size:5},col:5,list_key:"",complete:function(e,t){var n=t.query(".p-item");n.on("mouseenter",function(e){var t=W(this);t.addClass("p-item-hover")}),n.on("mouseleave",function(e){var t=W(this);t.removeClass("p-item-hover")})}})}),Dom.ready(function(){function e(e,t){var n=W("#cmtForm"),r=n.query(".star-item");e=parseInt(e,10)?parseInt(e,10):0,r.removeClass("star-sel"),r.filter(function(t,n){return n<e}).addClass("star-sel");var t=e>0?t:"";n.query(".star-txt").html(t),n.query(".level").val(e)}function t(){var e=W("#cmtForm"),t=e.query(".star-item");t.removeClass("star-sel"),e.query(".star-txt").html(""),e.query(".level").val("")}function n(){if(typeof SWFUpload=="undefined")return;var e=null,t={fileQueued:function(e){},fileQueueError:function(e,t,n){try{switch(t){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:alert("\u4e00\u6b21\u53ea\u80fd\u4e0a\u4f20"+(n>1?n:1)+"\u4e2a\u6587\u4ef6"),this.debug("\u4e00\u6b21\u53ea\u80fd\u4e0a\u4f20"+(n>1?n:1)+"\u4e2a\u6587\u4ef6");break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:alert("\u6587\u4ef6\u8fc7\u5927!\uff0c\u8bf7\u4e0a\u4f20\u5c0f\u4e8e"+this.settings.file_size_limit+"\u7684\u6587\u4ef6"),this.debug("Error Code: File too big, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:alert("\u60a8\u4e0a\u4f20\u7684\u6587\u4ef6\u592a\u5c0f\uff0c\u65e0\u6cd5\u4e0a\u4f20"),this.debug("Error Code: Zero byte file, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:alert("\u975e\u6cd5\u7684\u6587\u4ef6\u683c\u5f0f"),this.debug("Error Code: Invalid File Type, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;default:this.debug("Error Code: "+t+", File name: "+e.name+", File size: "+e.size+", Message: "+n)}}catch(r){this.debug(r)}},fileDialogComplete:function(e,t){try{if(W(".shaitu-pic").length>=5){alert("\u6700\u591a\u53ea\u80fd\u4e0a\u4f205\u5f20");var n=this.getStats();while(n.files_queued>0)this.cancelUpload(),n=this.getStats();return}t&&this.startUpload()}catch(r){this.debug(r)}},uploadStart:function(e){try{}catch(t){}},uploadProgress:function(e,t,n){},uploadError:function(e,t,n){try{switch(t){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:this.debug("Error Code: HTTP Error, File name: "+e.name+", Message: "+n);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:this.debug("Error Code: Upload Failed, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:this.debug("Error Code: IO Error, File name: "+e.name+", Message: "+n);break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:this.debug("Error Code: Security Error, File name: "+e.name+", Message: "+n);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:this.debug("Error Code: Upload Limit Exceeded, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:this.debug("Error Code: File Validation Failed, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:this.debug("Error Code: File Cancelled, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:this.debug("Error Code: Upload Stopped, File name: "+e.name+", File size: "+e.size+", Message: "+n);break;default:this.debug("Error Code: "+t+", File name: "+e.name+", File size: "+e.size+", Message: "+n)}}catch(r){this.debug(r)}return},uploadSuccess:function(e,t){try{t=QW.JSON.parse(t);if(t["errno"]==0){W('[name="img"]').val(t.url),W(".page-liangpin-order .shaitu-pic").removeClass("shaitu-pic-cur");var n='<div class="shaitu-pic shaitu-pic-cur fl"><img style="width: 100%;" src="'+t.url+'"><input type="hidden" name="comment_img_urls[]" value="'+t.url+'"></div>';W(".page-liangpin-order .shaitu-box .btn-shaitu").insertSiblingBefore(n),W(".page-liangpin-order .pic-num b").html(W(".shaitu-box div").length-1),W(".page-liangpin-order .pic-big").show().one("img").attr("src",t.url),tcb.setImgElSize(W(".page-liangpin-order .shaitu-pic img"),90,90),tcb.setImgElSize(W(".page-liangpin-order .pic-big img"),270,270)}else W(".fapiao-upload-tips").hide(),W('[name="img"]').val(""),alert("\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u5c1d\u8bd5")}catch(r){this.debug(r)}},uploadComplete:function(e){},queueComplete:function(e){}},n={flash_url:"/resource/swf/swfupload2.5.fix.swf",upload_url:"/aj/uploadPic",file_post_name:"filedata",post_params:{T:window.T||"",Q:window.Q||""},file_size_limit:"10 MB",file_types:"*.jpg;*.jpeg;*.png",file_types_description:"Image Files",file_upload_limit:1e3,file_queue_limit:1,button_image_url:"http://",button_width:"88",button_height:"88",button_placeholder_id:"BtnShaiTuUpload",button_text:"",button_text_style:"",button_text_top_padding:0,button_text_left_padding:0,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,prevent_swf_caching:!1,file_queued_handler:t.fileQueued,file_queue_error_handler:t.fileQueueError,file_dialog_complete_handler:t.fileDialogComplete,upload_start_handler:t.uploadStart,upload_progress_handler:t.uploadProgress,upload_error_handler:t.uploadError,upload_success_handler:t.uploadSuccess,upload_complete_handler:t.uploadComplete,queue_complete_handler:t.queueComplete};W("#BtnShaiTuUpload").length&&new SWFUpload(n)}tcb.bindEvent(document.body,{"#cmtForm .star-item":{click:function(t){var n=W(this),r=n.attr("data-value"),i=n.attr("title");n.ancestorNode(".star-box").attr("data-value",r).attr("data-title",i),e(r,i)},mouseenter:function(t){var n=W(this),r=n.attr("data-value"),i=n.attr("title");e(r,i)},mouseleave:function(n){var r=W(this),i=r.ancestorNode(".star-box");val=i.attr("data-value"),txt=i.attr("data-title"),val&&txt?e(val,txt):t()}}}),tcb.bindEvent(document.body,{".comment-label span":{click:function(e){var t=W(this),n=W(".cmt-content").val();if(n.indexOf(t.html())!=-1)return;n+=t.html()+" ",W(".cmt-content").val(n),W(".cmt-content").change()}},".cmt-content":{keyup:function(e){var t=W(this);t.val().length>140&&(alert("\u8bf7\u8f93\u5165140\u5b57\u4ee5\u5185\uff01"),t.val(t.val().substring(0,140))),t.val()&&W("#cmtForm .pic-tips").hide()},change:function(e){var t=W(this);t.val().length>140&&(alert("\u8bf7\u8f93\u5165140\u5b57\u4ee5\u5185\uff01"),t.val(t.val().substring(0,140))),t.val()&&W("#cmtForm .pic-tips").hide()}}}),W("#cmtForm").on("submit",function(e){e.preventDefault();if(W(this).query(".star-sel").length==0){W(this).one(".star-box").shine4Error();return}if(W(this).one(".cmt-content").val().trim()==""){W(this).one(".cmt-content").shine4Error().focus(),W(this).query(".pic-tips").show();return}QW.Ajax.post("/liangpin_my/aj_pingjia/",this,function(e){e=QW.JSON.parse(e),e.errno?alert("\u62b1\u6b49\uff0c\u8bc4\u8bba\u5931\u8d25\u3002"+e.errmsg):window.location.reload()})}),n(),tcb.bindEvent(W(".page-liangpin-order"),{".shaitu-box .shaitu-pic":{click:function(e){var t=W(this);t.addClass("shaitu-pic-cur").siblings(".shaitu-pic-cur").removeClass("shaitu-pic-cur");var n=t.query("img").attr("src");W(".page-liangpin-order .pic-big").one("img").attr("src",n),tcb.setImgElSize(W(".page-liangpin-order .pic-big img"),270,270)}},".pic-big .del-box":{click:function(e){var t=W(this),n,r=W(".page-liangpin-order .shaitu-pic-cur"),i=r.previousSibling(".shaitu-pic"),s=r.nextSibling(".shaitu-pic"),o=confirm("\u786e\u5b9a\u5220\u9664\u56fe\u7247\u5417\uff1f");if(o&&r&&r.length){i&&i.length?n=i:n=s,r.removeNode();if(n&&n.length){n.addClass("shaitu-pic-cur");var u=n.query("img").attr("src");t.siblings("img").attr("src",u)}else t.ancestorNode(".pic-big").hide();W(".page-liangpin-order .pic-num b").html(W(".page-liangpin-order .shaitu-box div").length-1)}tcb.setImgElSize(W(".page-liangpin-order .shaitu-pic img"),90,90),tcb.setImgElSize(W(".page-liangpin-order .pic-big img"),270,270)}}})}),Dom.ready(function(){function e(){var e=W(".user-comments-list-inner");e&&e.length&&t(function(t){var n=W("#JsUserCommentsTpl").html().trim().tmpl()({list:t});e.html(n);var r=e.query(".row");if(r.length>3){var i=r.first().getRect();(function(){var t=arguments;e.animate({top:-i.height},1200,function(){e.firstChild(".row").appendTo(e),e.css({top:0}),setTimeout(t.callee,4e3)})})()}})}function t(e){var t="/youpin/aj_user_tan",n={starlevel:5,limit:20};QW.Ajax.get(t,n,function(t){var n=[];t=JSON.parse(t),t.errno||(n=t.result),typeof e=="function"&&e(n)})}e()}),function(e){"use strict";var t,n,r;e.extend({roundaboutShapes:{def:"lazySusan",lazySusan:function(e,t,n){return{x:Math.sin(e+t),y:Math.sin(e+3*Math.PI/2+t)/8*n,z:(Math.cos(e+t)+1)/2,scale:Math.sin(e+Math.PI/2+t)/2+.5}}}}),t={bearing:0,tilt:0,minZ:100,maxZ:280,minOpacity:.4,maxOpacity:1,minScale:.4,maxScale:1,duration:600,btnNext:null,btnNextCallback:function(){},btnPrev:null,btnPrevCallback:function(){},btnToggleAutoplay:null,btnStartAutoplay:null,btnStopAutoplay:null,easing:"swing",clickToFocus:!0,clickToFocusCallback:function(){},focusBearing:0,shape:"lazySusan",debug:!1,childSelector:"li",startingChild:null,reflect:!1,floatComparisonThreshold:.001,autoplay:!1,autoplayDuration:1e3,autoplayPauseOnHover:!1,autoplayCallback:function(){},autoplayInitialDelay:0,enableDrag:!1,dropDuration:600,dropEasing:"swing",dropAnimateTo:"nearest",dropCallback:function(){},dragAxis:"x",dragFactor:4,triggerFocusEvents:!0,triggerBlurEvents:!0,responsive:!1},n={autoplayInterval:null,autoplayIsRunning:!1,autoplayStartTimeout:null,animating:!1,childInFocus:-1,touchMoveStartPosition:null,stopAnimation:!1,lastAnimationStep:!1},r={init:function(i,s,o){var u,a=(new Date).getTime();return i=typeof i=="object"?i:{},s=e.isFunction(s)?s:function(){},s=e.isFunction(i)?i:s,u=e.extend({},t,i,n),this.each(function(){var t=e(this),n=t.children(u.childSelector).length,i=360/n,a=u.startingChild&&u.startingChild>n-1?n-1:u.startingChild,f=u.startingChild===null?u.bearing:360-a*i,l=t.css("position")!=="static"?t.css("position"):"relative";t.css({padding:0,position:l}).addClass("roundabout-holder").data("roundabout",e.extend({},u,{startingChild:a,bearing:f,oppositeOfFocusBearing:r.normalize.apply(null,[u.focusBearing-180]),dragBearing:f,period:i})),o?t.unbind(".roundabout").children(u.childSelector).unbind(".roundabout"):u.responsive&&e(window).bind("resize",function(){r.stopAutoplay.apply(t),r.relayoutChildren.apply(t)}),u.clickToFocus&&t.children(u.childSelector).each(function(n){e(this).bind("click.roundabout",function(){var i=r.getPlacement.apply(t,[n]);if(!r.isInFocus.apply(t,[i]))return r.stopAnimation.apply(e(this)),t.data("roundabout").animating||r.animateBearingToFocus.apply(t,[i,t.data("roundabout").clickToFocusCallback]),!1})}),u.btnNext&&e(u.btnNext).bind("click.roundabout",function(){return t.data("roundabout").animating||r.animateToNextChild.apply(t,[t.data("roundabout").btnNextCallback]),!1}),u.btnPrev&&e(u.btnPrev).bind("click.roundabout",function(){return r.animateToPreviousChild.apply(t,[t.data("roundabout").btnPrevCallback]),!1}),u.btnToggleAutoplay&&e(u.btnToggleAutoplay).bind("click.roundabout",function(){return r.toggleAutoplay.apply(t),!1}),u.btnStartAutoplay&&e(u.btnStartAutoplay).bind("click.roundabout",function(){return r.startAutoplay.apply(t),!1}),u.btnStopAutoplay&&e(u.btnStopAutoplay).bind("click.roundabout",function(){return r.stopAutoplay.apply(t),!1}),u.autoplayPauseOnHover&&t.bind("mouseenter.roundabout.autoplay",function(){r.stopAutoplay.apply(t,[!0])}).bind("mouseleave.roundabout.autoplay",function(){r.startAutoplay.apply(t)}),u.enableDrag&&(e.isFunction(t.drag)?e.isFunction(t.drop)?t.drag(function(e,n){var i=t.data("roundabout"),s=i.dragAxis.toLowerCase()==="x"?"deltaX":"deltaY";r.stopAnimation.apply(t),r.setBearing.apply(t,[i.dragBearing+n[s]/i.dragFactor])}).drop(function(e){var n=t.data("roundabout"),i=r.getAnimateToMethod(n.dropAnimateTo);r.allowAnimation.apply(t),r[i].apply(t,[n.dropDuration,n.dropEasing,n.dropCallback]),n.dragBearing=n.period*r.getNearestChild.apply(t)}):u.debug&&alert("You do not have the drop plugin loaded."):u.debug&&alert("You do not have the drag plugin loaded."),t.each(function(){var t=e(this).get(0),n=e(this).data("roundabout"),i=n.dragAxis.toLowerCase()==="x"?"pageX":"pageY",s=r.getAnimateToMethod(n.dropAnimateTo);t.addEventListener&&(t.addEventListener("touchstart",function(e){n.touchMoveStartPosition=e.touches[0][i]},!1),t.addEventListener("touchmove",function(t){var s=(t.touches[0][i]-n.touchMoveStartPosition)/n.dragFactor;t.preventDefault(),r.stopAnimation.apply(e(this)),r.setBearing.apply(e(this),[n.dragBearing+s])},!1),t.addEventListener("touchend",function(t){t.preventDefault(),r.allowAnimation.apply(e(this)),s=r.getAnimateToMethod(n.dropAnimateTo),r[s].apply(e(this),[n.dropDuration,n.dropEasing,n.dropCallback]),n.dragBearing=n.period*r.getNearestChild.apply(e(this))},!1))})),r.initChildren.apply(t,[s,o])})},initChildren:function(t,n){var i=e(this),s=i.data("roundabout");return t=t||function(){},i.children(s.childSelector).each(function(t){var s,o,u,a=r.getPlacement.apply(i,[t]);n&&e(this).data("roundabout")&&(s=e(this).data("roundabout").startWidth,o=e(this).data("roundabout").startHeight,u=e(this).data("roundabout").startFontSize),e(this).addClass("roundabout-moveable-item").css("position","absolute"),e(this).data("roundabout",{startWidth:s||e(this).width(),startHeight:o||e(this).height(),startFontSize:u||parseInt(e(this).css("font-size"),10),degrees:a,backDegrees:r.normalize.apply(null,[a-180]),childNumber:t,currentScale:1,parent:i})}),r.updateChildren.apply(i),s.autoplay&&(s.autoplayStartTimeout=setTimeout(function(){r.startAutoplay.apply(i)},s.autoplayInitialDelay)),i.trigger("ready"),t.apply(i),i},updateChildren:function(){return this.each(function(){var t=e(this),n=t.data("roundabout"),i=-1,s={bearing:n.bearing,tilt:n.tilt,stage:{width:Math.floor(e(this).width()*.9),height:Math.floor(e(this).height()*.9)},animating:n.animating,inFocus:n.childInFocus,focusBearingRadian:r.degToRad.apply(null,[n.focusBearing]),shape:e.roundaboutShapes[n.shape]||e.roundaboutShapes[e.roundaboutShapes.def]};s.midStage={width:s.stage.width/2,height:s.stage.height/2},s.nudge={width:s.midStage.width+s.stage.width*.05,height:s.midStage.height+s.stage.height*.05},s.zValues={min:n.minZ,max:n.maxZ,diff:n.maxZ-n.minZ},s.opacity={min:n.minOpacity,max:n.maxOpacity,diff:n.maxOpacity-n.minOpacity},s.scale={min:n.minScale,max:n.maxScale,diff:n.maxScale-n.minScale},t.children(n.childSelector).each(function(o){r.updateChild.apply(t,[e(this),s,o,function(){e(this).trigger("ready")}])&&(!s.animating||n.lastAnimationStep)?(i=o,e(this).addClass("roundabout-in-focus")):e(this).removeClass("roundabout-in-focus")}),i!==s.inFocus&&(n.triggerBlurEvents&&t.children(n.childSelector).eq(s.inFocus).trigger("blur"),n.childInFocus=i,n.triggerFocusEvents&&i!==-1&&t.children(n.childSelector).eq(i).trigger("focus")),t.trigger("childrenUpdated")})},updateChild:function(t,n,i,s){var o,u=this,a=e(t),f=a.data("roundabout"),l=[],c=r.degToRad.apply(null,[360-f.degrees+n.bearing]);return s=s||function(){},c=r.normalizeRad.apply(null,[c]),o=n.shape(c,n.focusBearingRadian,n.tilt),o.scale=o.scale>1?1:o.scale,o.adjustedScale=(n.scale.min+n.scale.diff*o.scale).toFixed(4),o.width=(o.adjustedScale*f.startWidth).toFixed(4),o.height=(o.adjustedScale*f.startHeight).toFixed(4),a.css({left:(o.x*n.midStage.width+n.nudge.width-o.width/2).toFixed(0)+"px",top:(o.y*n.midStage.height+n.nudge.height-o.height/2).toFixed(0)+"px",width:o.width+"px",height:o.height+"px",opacity:(n.opacity.min+n.opacity.diff*o.scale).toFixed(2),zIndex:Math.round(n.zValues.min+n.zValues.diff*o.z),fontSize:(o.adjustedScale*f.startFontSize).toFixed(1)+"px"}),f.currentScale=o.adjustedScale,u.data("roundabout").debug&&(l.push('<div style="font-weight: normal; font-size: 10px; padding: 2px; width: '+a.css("width")+'; background-color: #ffc;">'),l.push('<strong style="font-size: 12px; white-space: nowrap;">Child '+i+"</strong><br />"),l.push("<strong>left:</strong> "+a.css("left")+"<br />"),l.push("<strong>top:</strong> "+a.css("top")+"<br />"),l.push("<strong>width:</strong> "+a.css("width")+"<br />"),l.push("<strong>opacity:</strong> "+a.css("opacity")+"<br />"),l.push("<strong>height:</strong> "+a.css("height")+"<br />"),l.push("<strong>z-index:</strong> "+a.css("z-index")+"<br />"),l.push("<strong>font-size:</strong> "+a.css("font-size")+"<br />"),l.push("<strong>scale:</strong> "+a.data("roundabout").currentScale),l.push("</div>"),a.html(l.join(""))),a.trigger("reposition"),s.apply(u),r.isInFocus.apply(u,[f.degrees])},setBearing:function(t,n){return n=n||function(){},t=r.normalize.apply(null,[t]),this.each(function(){var n,i,s,o=e(this),u=o.data("roundabout"),a=u.bearing;u.bearing=t,o.trigger("bearingSet"),r.updateChildren.apply(o),n=Math.abs(a-t);if(!u.animating||n>180)return;n=Math.abs(a-t),o.children(u.childSelector).each(function(n){var i;r.isChildBackDegreesBetween.apply(e(this),[t,a])&&(i=a>t?"Clockwise":"Counterclockwise",e(this).trigger("move"+i+"ThroughBack"))})}),n.apply(this),this},adjustBearing:function(t,n){return n=n||function(){},t===0?this:(this.each(function(){r.setBearing.apply(e(this),[e(this).data("roundabout").bearing+t])}),n.apply(this),this)},setTilt:function(t,n){return n=n||function(){},this.each(function(){e(this).data("roundabout").tilt=t,r.updateChildren.apply(e(this))}),n.apply(this),this},adjustTilt:function(t,n){return n=n||function(){},this.each(function(){r.setTilt.apply(e(this),[e(this).data("roundabout").tilt+t])}),n.apply(this),this},animateToBearing:function(t,n,i,s,o){var u=(new Date).getTime();return o=o||function(){},e.isFunction(s)?(o=s,s=null):e.isFunction(i)?(o=i,i=null):e.isFunction(n)&&(o=n,n=null),this.each(function(){var a,f,l,c=e(this),h=c.data("roundabout"),p=n?n:h.duration,d=i?i:h.easing||"swing";s||(s={timerStart:u,start:h.bearing,totalTime:p}),a=u-s.timerStart;if(h.stopAnimation){r.allowAnimation.apply(c),h.animating=!1;return}a<p?(h.animating||c.trigger("animationStart"),h.animating=!0,typeof e.easing.def=="string"?(f=e.easing[d]||e.easing[e.easing.def],l=f(null,a,s.start,t-s.start,s.totalTime)):l=e.easing[d](a/s.totalTime,a,s.start,t-s.start,s.totalTime),r.compareVersions.apply(null,[e().jquery,"1.7.2"])>=0&&!e.easing.easeOutBack&&(l=s.start+(t-s.start)*l),l=r.normalize.apply(null,[l]),h.
dragBearing=l,r.setBearing.apply(c,[l,function(){setTimeout(function(){r.animateToBearing.apply(c,[t,p,d,s,o])},0)}])):(h.lastAnimationStep=!0,t=r.normalize.apply(null,[t]),r.setBearing.apply(c,[t,function(){c.trigger("animationEnd")}]),h.animating=!1,h.lastAnimationStep=!1,h.dragBearing=t,o.apply(c))}),this},animateToNearbyChild:function(t,n){var i=t[0],s=t[1],o=t[2]||function(){};return e.isFunction(s)?(o=s,s=null):e.isFunction(i)&&(o=i,i=null),this.each(function(){var t,u,a=e(this),f=a.data("roundabout"),l=f.reflect?f.bearing:f.bearing%360,c=a.children(f.childSelector).length;if(!f.animating)if(f.reflect&&n==="previous"||!f.reflect&&n==="next"){l=Math.abs(l)<f.floatComparisonThreshold?360:l;for(t=0;t<c;t+=1){u={lower:f.period*t,upper:f.period*(t+1)},u.upper=t===c-1?360:u.upper;if(l<=Math.ceil(u.upper)&&l>=Math.floor(u.lower)){c===2&&l===360?r.animateToDelta.apply(a,[-180,i,s,o]):r.animateBearingToFocus.apply(a,[u.lower,i,s,o]);break}}}else{l=Math.abs(l)<f.floatComparisonThreshold||360-Math.abs(l)<f.floatComparisonThreshold?0:l;for(t=c-1;t>=0;t-=1){u={lower:f.period*t,upper:f.period*(t+1)},u.upper=t===c-1?360:u.upper;if(l>=Math.floor(u.lower)&&l<Math.ceil(u.upper)){c===2&&l===360?r.animateToDelta.apply(a,[180,i,s,o]):r.animateBearingToFocus.apply(a,[u.upper,i,s,o]);break}}}})},animateToNearestChild:function(t,n,i){return i=i||function(){},e.isFunction(n)?(i=n,n=null):e.isFunction(t)&&(i=t,t=null),this.each(function(){var s=r.getNearestChild.apply(e(this));r.animateToChild.apply(e(this),[s,t,n,i])})},animateToChild:function(t,n,i,s){return s=s||function(){},e.isFunction(i)?(s=i,i=null):e.isFunction(n)&&(s=n,n=null),this.each(function(){var o,u=e(this),a=u.data("roundabout");a.childInFocus!==t&&!a.animating&&(o=u.children(a.childSelector).eq(t),r.animateBearingToFocus.apply(u,[o.data("roundabout").degrees,n,i,s]))})},animateToNextChild:function(e,t,n){return r.animateToNearbyChild.apply(this,[arguments,"next"])},animateToPreviousChild:function(e,t,n){return r.animateToNearbyChild.apply(this,[arguments,"previous"])},animateToDelta:function(t,n,i,s){return s=s||function(){},e.isFunction(i)?(s=i,i=null):e.isFunction(n)&&(s=n,n=null),this.each(function(){var o=e(this).data("roundabout").bearing+t;r.animateToBearing.apply(e(this),[o,n,i,s])})},animateBearingToFocus:function(t,n,i,s){return s=s||function(){},e.isFunction(i)?(s=i,i=null):e.isFunction(n)&&(s=n,n=null),this.each(function(){var o=e(this).data("roundabout").bearing-t;o=Math.abs(360-o)<Math.abs(o)?360-o:-o,o=o>180?-(360-o):o,o!==0&&r.animateToDelta.apply(e(this),[o,n,i,s])})},stopAnimation:function(){return this.each(function(){e(this).data("roundabout").stopAnimation=!0})},allowAnimation:function(){return this.each(function(){e(this).data("roundabout").stopAnimation=!1})},startAutoplay:function(t){return this.each(function(){var n=e(this),i=n.data("roundabout");t=t||i.autoplayCallback||function(){},clearInterval(i.autoplayInterval),i.autoplayInterval=setInterval(function(){r.animateToNextChild.apply(n,[t])},i.autoplayDuration),i.autoplayIsRunning=!0,n.trigger("autoplayStart")})},stopAutoplay:function(t){return this.each(function(){clearInterval(e(this).data("roundabout").autoplayInterval),e(this).data("roundabout").autoplayInterval=null,e(this).data("roundabout").autoplayIsRunning=!1,t||e(this).unbind(".autoplay"),e(this).trigger("autoplayStop")})},toggleAutoplay:function(t){return this.each(function(){var n=e(this),i=n.data("roundabout");t=t||i.autoplayCallback||function(){},r.isAutoplaying.apply(e(this))?r.stopAutoplay.apply(e(this),[t]):r.startAutoplay.apply(e(this),[t])})},isAutoplaying:function(){return this.data("roundabout").autoplayIsRunning},changeAutoplayDuration:function(t){return this.each(function(){var n=e(this),i=n.data("roundabout");i.autoplayDuration=t,r.isAutoplaying.apply(n)&&(r.stopAutoplay.apply(n),setTimeout(function(){r.startAutoplay.apply(n)},10))})},normalize:function(e){var t=e%360;return t<0?360+t:t},normalizeRad:function(e){while(e<0)e+=Math.PI*2;while(e>Math.PI*2)e-=Math.PI*2;return e},isChildBackDegreesBetween:function(t,n){var r=e(this).data("roundabout").backDegrees;return t>n?r>=n&&r<t:r<n&&r>=t},getAnimateToMethod:function(e){return e=e.toLowerCase(),e==="next"?"animateToNextChild":e==="previous"?"animateToPreviousChild":"animateToNearestChild"},relayoutChildren:function(){return this.each(function(){var t=e(this),n=e.extend({},t.data("roundabout"));n.startingChild=t.data("roundabout").childInFocus,r.init.apply(t,[n,null,!0])})},getNearestChild:function(){var t=e(this),n=t.data("roundabout"),r=t.children(n.childSelector).length;return n.reflect?Math.round(n.bearing/n.period)%r:(r-Math.round(n.bearing/n.period)%r)%r},degToRad:function(e){return r.normalize.apply(null,[e])*Math.PI/180},getPlacement:function(e){var t=this.data("roundabout");return t.reflect?t.period*e:360-t.period*e},isInFocus:function(e){var t,n=this,i=n.data("roundabout"),s=r.normalize.apply(null,[i.bearing]);return e=r.normalize.apply(null,[e]),t=Math.abs(s-e),t<=i.floatComparisonThreshold||t>=360-i.floatComparisonThreshold},getChildInFocus:function(){var t=e(this).data("roundabout");return t.childInFocus>-1?t.childInFocus:!1},compareVersions:function(e,t){var n,r=e.split(/\./i),i=t.split(/\./i),s=r.length>i.length?r.length:i.length;for(n=0;n<=s;n++){if(r[n]&&!i[n]&&parseInt(r[n],10)!==0)return 1;if(i[n]&&!r[n]&&parseInt(i[n],10)!==0)return-1;if(r[n]===i[n])continue;if(r[n]&&i[n])return parseInt(r[n],10)>parseInt(i[n],10)?1:-1}return 0}},e.fn.roundabout=function(t){if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||e.isFunction(t)||!t)return r.init.apply(this,arguments);e.error("Method "+t+" does not exist for jQuery.roundabout.")}}(jQuery),$(function(){$(".roundabout_box .roundabout-holder").roundabout({duration:500,minScale:.8,autoplay:!0,autoplayDuration:4e3,minOpacity:0,maxOpacity:1,reflect:!1,startingChild:0,autoplayInitialDelay:2e3,autoplayPauseOnHover:!0,enableDrag:!0,childSelector:".roundabout-moveable-item",btnNext:".btn-next",btnPrev:".btn-prev",triggerFocusEvents:!1}),$(".roundabout_box").hover(function(e){$(".btn-switch").show()},function(){$(".btn-switch").hide()}),$(".roundabout_box .btn-prev").hover(function(){$(this).css("background-image","url(http://p7.qhimg.com/t01086805a0b83a4018.png)")},function(){$(this).css("background-image","url(http://p2.qhimg.com/t01624e42c2b5e4a1d6.png)")}),$(".roundabout_box .btn-next").hover(function(){$(this).css("background-image","url(http://p1.qhimg.com/t011f5a197568751f88.png)")},function(){$(this).css("background-image","url(http://p1.qhimg.com/t0169c6ce3d7043d873.png)")})}),$(function(){function t(){tcb.bindEvent(document,{".block-sale .tab-list .tab-item":function(t){t.preventDefault();var n=$(this),i=n.attr("data-price");e.price=i,e.pn=0,n.addClass("cur").siblings(".cur").removeClass("cur"),r()}})}function n(t){e.productList?typeof t=="function"&&t(e.productList):$.get("/youpin/getActivityProductList",function(n){n=$.parseJSON(n),n.errno||(e.productList=n.result,typeof t=="function"&&t(e.productList))})}function r(){n(function(t){t=t[e.price];var n=e.pn,r=e.page_size,s=t&&t.length,o=t.slice(n*r,(n+1)*r),u=$.tmpl($.trim($("#JsSaleProductListTpl").html())),a=u({col:5,params:{from_page:"0-1000"},productList:o});$(".block-sale .js-sale-product-list").html(a),i(s,n,r)})}function i(t,n,i){i=i||8,n=n||0;var s=Math.ceil(t/i),o=W(".pagination .pages2");if(s==1){o.html("");return}var u=new Pager(o,s,n);u.on("pageChange",function(t){e.pn=t.pn,r(),window.scrollTo(0,$(".block-sale .tab-list").offset().top-10)})}function s(){t(),r()}var e={productList:null,price:500,pn:0,page_size:10};$(".block-sale .js-sale-product-list").length&&s()});