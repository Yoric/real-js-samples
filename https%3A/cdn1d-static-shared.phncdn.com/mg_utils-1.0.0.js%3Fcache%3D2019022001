var MG_Utils={browser:{hasTouchSupport:("createTouch" in document),version:(navigator.userAgent.toLowerCase().match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],androidversion:function(){var a=navigator.userAgent.match(/\s*Android\s*([0-9]+)\.?([0-9]+)?\.?([0-9]+)?\s*/);return(a&&a[1]&&a[2])?parseFloat(a[1]+"."+a[2]):((a&&a[1])?parseFloat(a[1]):false)},isWebkit:(navigator.userAgent.indexOf("AppleWebKit/")>-1),isMobileSafari:/(ipad|iphone|ipod|android).*apple.*mobile.*safari/.test(navigator.userAgent.toLowerCase()),isAppleChrome:/crios/.test(navigator.userAgent.toLowerCase()),isAppleMobileDevice:/(ipad|iphone|ipod)/.test(navigator.userAgent.toLowerCase()),isAndroidMobileDevice:/android/.test(navigator.userAgent.toLowerCase()),isTansoDl:navigator.userAgent.toLowerCase().match(/TansoDL/i),isWindowsPhone:function(){return(navigator.userAgent.toLowerCase().match(/Windows CE|IEMobile|Windows Phone OS/i)||"XDomainRequest" in window)?true:false},highPixelDensityDisplay:(window.devicePixelRatio>=2),iPhone4:(window.devicePixelRatio>=2&&this.isMobileSafari),currentOrientation:null,isBlackBerry:function(){return(navigator.userAgent.match(/BlackBerry/i)?!!1:!!0)},isBB10:function(){return(navigator.userAgent.match(/BB10/i)?!!1:!!0)},iOSversion:function(){var a=window.navigator.userAgent,b=a.indexOf("OS ");if((a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1)&&b>-1){return window.Number(a.substr(b+3,3).replace("_","."))}return 0}},setCookie:function(b,j,g,e){var h=new Date(),a,c,f=window.location.hostname;h.setTime(h.getTime()+(e*24*60*60*1000));a="expires="+h.toUTCString();c=b+"="+j+"; "+a;if(typeof g!="undefined"){c+="; path="+g}if(f.indexOf("www.")===0){f=f.replace("www.",".")}else{if(f.indexOf(".")!==0){f="."+f}}c+=";domain="+f;if(location.protocol==="https:"){c+=";secure"}document.cookie=c},getCookie:function(c,b){var a=document.cookie.match("(^|;) ?"+c+"=([^;]*)(;|$)");if(a){return b?a[2]:decodeURI(a[2])}else{return null}},deleteCookie:function(c,b,a){if(this.getCookie(c)===null){return}if(typeof a==="undefined"){a=window.location.hostname;if(a.indexOf("www.")===0){a=a.replace("www.",".")}else{if(a.indexOf(".")!==0){a="."+a}}}document.cookie=c+"=;path="+(b?b:"/")+";domain="+(a?a:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"},addClass:function(b,a){if(!this.hasClass(b,a)){b.className?b.className+=" "+a:b.className+=a}},addClassMultiple:function(e,d){var c,a,b=this;for(c=0,a=e.length;c<a;c++){if(!b.hasClass(e[c],d)){e[c].className?e[c].className+=" "+d:e[c].className+=d}}},addEventHandler:function(c,a,b){if(c.addEventListener){c.addEventListener(a,b,false)}else{if(c.attachEvent){c.attachEvent("on"+a,b)}else{c["on"+a]=b}}},docHeight:function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)},extendSimple:function(c,a){var b;for(b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c},extendDefaults:function(e,c,f){var d=Object.prototype.hasOwnProperty;for(var g in c){if(d.call(c,g)){if(!(g==="constructor"&&e===window)){if(c[g]===undefined){delete e[g]}else{if(!(f&&typeof e[g]!=="undefined")){e[g]=c[g]}}}}}return e},hasClass:function(b,a){return b.className&&new RegExp("(\\s|^)"+a+"(\\s|$)").test(b.className)},isElementInViewport:function(a){var b=a.getBoundingClientRect();return(b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth))},isRbga:function(){var a=null;if(document.createElement){var d="rgba(1, 1, 1, 0.5)",c=document.createElement("p"),b=/^rgba/;if(c&&c.style&&typeof b.test=="function"){try{c.style.color=d;a=b.test(c.style.color)}catch(f){a=false}}}return a},removeClass:function(b,a){var c=" "+b.className.replace(/[\t\r\n]/g," ")+" ";if(this.hasClass(b,a)){while(c.indexOf(" "+a+" ")>=0){c=c.replace(" "+a+" "," ")}b.className=c.replace(/^\s+|\s+$/g,"")}},removeMultipleClass:function(b,c){context=b.className;if(b.classList){for(var a=0;a<=c.length;a++){b.classList.remove(c[a])}}else{for(var a=0;a<=c.length;a++){context=context.replace(new RegExp("(^|\\b)"+context[a].split(" ").join("|")+"(\\b|$)","gi")," ")}}},removeClassMultiple:function(f,d){var c,a,b=this;for(c=0,a=f.length;c<a;c++){var e=" "+f[c].className.replace(/[\t\r\n]/g," ")+" ";if(b.hasClass(f[c],d)){while(e.indexOf(" "+d+" ")>=0){e=e.replace(" "+d+" "," ")}f[c].className=e.replace(/^\s+|\s+$/g,"")}}},removeEventHandler:function(c,a,b){if(c.removeEventListener){c.removeEventListener(a,b,false)}else{if(c.detachEvent){c.detachEvent("on"+a,b)}else{c["on"+a]=null}}},children:function(c){var d=c.childNodes,b=[],a=d.length;while(a--){if(d[a].nodeType==1){b.unshift(d[a])}}return b},triggerEvent:function(b,a){if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(a,true,false);b.dispatchEvent(c)}else{b.fireEvent("on"+a)}},ajaxGet:function(a){var d="";for(var b in a.data){if(d!=""){d+="&"}d+=b+"="+encodeURIComponent(a.data[b])}var c=new XMLHttpRequest();c.open("GET",a.url+"?"+d,true);c.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){if(a.success&&typeof a.success==="function"){a.success(JSON.parse(this.responseText))}}else{console.error("Ajax error occured.")}}};c.send();c=null},ajaxGetData:function(b){var e="",a;if(typeof b.data!=="undefined"){for(var c in b.data){if(e!=""){e+="&"}e+=c+"="+encodeURIComponent(b.data[c])}}a=b.url;e===""?a:a+"?"+e;var d=new XMLHttpRequest();d.open("GET",a,true);d.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){if(b.success&&typeof b.success==="function"){b.success(this.responseText)}}else{console.error("Ajax error occured.")}}};d.send();d=null},map:function(b,e){var d,a,c=[];for(d=0,a=b.length;d<a;d++){c.push(e(b[d],d))}return c},appendString:function(c,b){var a=document.createElement("div");a.innerHTML=b;while(a.firstChild){c.appendChild(a.firstChild)}},nextElementSibling:function(a){do{a=a.nextSibling}while(a&&a.nodeType!==1);return a},previousElementSibling:function(a){do{a=a.previousSibling}while(a&&a.nodeType!==1);return a},nextDivSibling:function(a){do{a=a.nextSibling}while(a&&a.nodeType!==1&&a.tagName&&a.tagName.toLowerCase()==="div");return a},closest:function(b,a){var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(d){if(typeof document.body[d]=="function"){c=d;return true}return false});while(b!==null){parent=b.parentElement;if(parent!==null&&parent[c](a)){return parent}b=parent}return null},setText:function(a,b){if(a.textContent){a.textContent=b}else{a.innerText=b}},setData:function(b,a,c){if(b.dataset){a=a.replace(/[-_]([a-z])/g,function(d){return d[1].toUpperCase()});b.dataset[a]=c}else{b.setAttribute("data-"+a,c)}},getData:function(b,a){var c=null;if(b.dataset){a=a.replace(/[-_]([a-z])/g,function(d){return d[1].toUpperCase()});c=b.dataset[a]}else{c=b.getAttribute("data-"+a)}return c},isElement:function(a){return(typeof HTMLElement==="object"?a instanceof HTMLElement:a&&typeof a==="object"&&a!==null&&a.nodeType===1&&typeof a.nodeName==="string")},domReady:function(c){var b=false;var g=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",a);window.removeEventListener("load",a)}else{document.detachEvent("onreadystatechange",a);window.detachEvent("onload",a)}};var a=function(){if(!b&&(document.addEventListener||event.type==="load"||document.readyState==="complete")){b=true;g();c()}};if(document.readyState==="complete"){c()}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",a);window.addEventListener("load",a)}else{document.attachEvent("onreadystatechange",a);window.attachEvent("onload",a);var f=false;try{f=window.frameElement==null&&document.documentElement}catch(d){}if(f&&f.doScroll){(function h(){if(b){return}try{f.doScroll("left")}catch(j){return setTimeout(h,50)}b=true;g();c()})()}}}},firstChild:function(c){if(c.children.length){if(c.firstElementChild){return c.firstElementChild}else{var b,a;for(b=0,a=c.children.length;b<=a;b++){var d=c.children[b];if(1===d.nodeType){return d}}}}else{return null}},lastChild:function(b){if(b.children.length){if(b.lastElementChild){return b.lastElementChild}else{var a;for(a=b.children.length-1;a>=0;--a){var c=b.children[a];if(1===c.nodeType){return c}}}}else{return null}},offset:function(c){var k=c.getBoundingClientRect(),g=document.body,a=document.documentElement;var b=window.pageYOffset||a.scrollTop||g.scrollTop;var e=window.pageXOffset||a.scrollLeft||g.scrollLeft;var f=a.clientTop||g.clientTop||0;var h=a.clientLeft||g.clientLeft||0;var j=k.top+b-f;var d=k.left+e-h;return{left:Math.round(d),top:Math.round(j)}},wrap:function(b,d){var a=document.createElement("div");a.innerHTML=d;while(a.firstChild){var c=a.firstChild;b.parentNode.insertBefore(c,b);c.appendChild(b)}},empty:function(a){while(a.firstChild){a.removeChild(a.firstChild)}},preventDefault:function(a){a.preventDefault?a.preventDefault():(a.returnValue=false)},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():(a.cancelBubble=true)},toggleClass:function(e,d){if(e.classList){e.classList.toggle(d)}else{var c=e.className.split(" ");var a=-1;for(var b=c.length;b--;){if(c[b]===d){a=b}}if(a>=0){c.splice(a,1)}else{c.push(d)}e.className=c.join(" ")}},hasStorage:function(){var b="storage";try{localStorage.setItem(b,b);localStorage.removeItem(b);return true}catch(a){return false}},debounce:function(c,e,a){var d=null;var b=function(){d=null};return function(){a&&a.apply(this,arguments);var f=!d;if(f){c.apply(this,arguments);d=setTimeout(b,e)}}},toggle:function(a){if(a.style.display==null||a.style.display=="none"){a.style.display="block"}else{a.style.display="none"}},areCookiesEnabled:function(){var a=(navigator.cookieEnabled)?true:false;if(typeof(navigator.cookieEnabled)=="undefined"&&!a){document.cookie="testcookie";a=(document.cookie.indexOf("testcookie")!=-1)?true:false}return(a)},isLocalStorageEnabled:function(){if(typeof localStorage=="undefined"){return false}try{localStorage.removeItem("LsAccessSuccess");localStorage.setItem("LsAccessSuccess","localStorageEnabledOk");localStorage.removeItem("LsAccessSuccess")}catch(c){return false}if(MG_Utils.areCookiesEnabled()){if(document.cookie.indexOf("local_storage")==-1){var b=new Date();b.setTime(b.getTime()+(365*24*60*60*1000));var a=" expires = "+b.toGMTString()+";";var d=" path=/;";document.cookie="local_storage = 1;"+a+d}return true}return false},storage:{hasLocalStorage:(function(){try{localStorage.enableStorage=1;localStorage.removeItem("enableStorage")}catch(a){return false}return true})(),defaultExpiry:1,saveWithExpiry:function(a,c,b){if(!this.hasLocalStorage){return undefined}if(c.expires&&!b){b=c.expires}if(!b){b=new Date();b.setDate(b.getDate()+this.defaultExpiry)}b=(b instanceof Date)?b.getTime():parseInt(b);this.saveItem(a,{val:c,expires:b})},getItem:function(a){if(!this.hasLocalStorage){return undefined}var b;try{b=JSON.parse(localStorage[a])}catch(c){return localStorage[a]}if(parseInt(b.expires)<new Date().getTime()){this.deleteItem(a);return null}return b.val||b},saveItem:function(a,b){if(!this.hasLocalStorage){return undefined}b=JSON.stringify(typeof b==="object"?b:{val:b});localStorage.setItem(a,b)},deleteItem:function(a){if(!this.hasLocalStorage){return undefined}localStorage.removeItem(a)},saveExpiry:function(d,b,a){if(typeof(Storage)=="undefined"){return false}var a=a,c={value:JSON.stringify(b),timestamp:new Date().getTime()+a};localStorage.setItem(d,JSON.stringify(c));return b},getExpiry:function(b){if(typeof(Storage)=="undefined"){return false}var a=JSON.parse(localStorage.getItem(b));if(!a){return false}return(new Date().getTime()<a.timestamp&&JSON.parse(a.value))}},ajaxCall:function(d){if(d==null||d.url==""||d.data==""||d.type==""){console.log("ajaxPost: Parameters can't be empty");return false}if(d.crossDomain==true&&typeof XDomainRequest!="undefined"){var c=new XDomainRequest()}else{var c=new XMLHttpRequest()}var b=new CustomEvent("ajaxSuccess");var f=new CustomEvent("ajaxFail");var g=(d.type)?d.type.toUpperCase():"GET";var e="";for(var a in d.data){if(e!=""){e+="&"}e+=a+"="+encodeURIComponent(d.data[a])}if(g==="GET"){if(d.cache==false){d.url+="&timestamp="+Date.now()}else{d.url=d.url+"?"+e}}c.open(g,d.url,true);if(d.dataType!=""&&typeof d.dataType=="string"){c.responseType=d.dataType}else{c.responseType="json"}if(c instanceof XMLHttpRequest){c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}if(d.headers){if(!Object.keys){Object.keys=function(k){var j=[];for(var h in k){if(k.hasOwnProperty(h)){j.push(h)}}return j}}Object.keys(d.headers).forEach(function(h){c.setRequestHeader(h,d.headers[h])})}if(d.cache=="false"&&g=="POST"){c.setRequestHeader("cache-control","no-cache")}if(d.xhrFields){for(i in d.xhrFields){c[i]=d.xhrFields[i]}}if(typeof d.beforeSend=="function"&&(d.beforeSend()===false)){return c.abort()}c.onreadystatechange=function(){var h={};if(c.readyState==4){if(c.status>=200&&c.status<400){try{h=JSON.parse(c.responseText)}catch(j){h=c.response}if(typeof d.success=="function"){if(c instanceof XMLHttpRequest){d.success(h)}else{c.onload(function(){d.success(h)})}}c.dispatchEvent(b)}else{c.dispatchEvent(f);h={error:"Error getting data from AJAX call"}}}if(h!=null&&typeof h.error!="undefined"){console.log("ajaxPost: "+h.error);return false}};c.send(e);c.done=function(h){if(typeof h=="function"){if(c instanceof XMLHttpRequest){MG_Utils.addEventHandler(c,"ajaxSuccess",h)}else{c.onload=h()}}};c.fail=function(h){if(typeof h=="function"){if(c instanceof XMLHttpRequest){MG_Utils.addEventHandler(c,"ajaxFail",h)}else{c.onerror=h()}}};c.always=function(h){if(typeof h=="function"){if(c instanceof XMLHttpRequest){MG_Utils.addEventHandler(c,"ajaxSuccess",h);MG_Utils.addEventHandler(c,"ajaxFail",h)}else{c.onload=h();c.onerror=h()}}};return c},getEventTarget:function(a){a=a||window.event;return a.target||a.srcElement}};(function(){if(typeof window.CustomEvent==="function"){return false}function a(c,d){d=d||{bubbles:false,cancelable:false,detail:undefined};var b=document.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b}a.prototype=window.Event.prototype;window.CustomEvent=a})();