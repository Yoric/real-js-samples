_.Module.define({path:"forum/widget/sign100",requires:["forum/widget/SignShai/FlashImageLoader"],sub:{_dom:null,_sign_num:null,_cvs:null,_src:null,_getTbsURL:"//tieba.baidu.com/dc/common/imgtbs",_uploadURL:"https://uploadphotos.baidu.com/upload/pic",initial:function(i,t){var e=this;this._dom=$("#"+i),this._sign_num=t,this._dom.find(".j_sign_100_shai").click(function(){e.render()})},_inputTitle:function(i){$("#edit_parent").find(".edit_title_field").val("\u5728\u672c\u5427\u5df2\u7d2f\u8ba1\u7b7e\u5230"+i+"\u5929\u4e86\uff0c\u622a\u56fe\u7559\u5ff5\u4e00\u4e0b\u4e0b")},render:function(){this.trigger("startRender"),this._createLoading();var i=this;this._inputTitle(i._sign_num),this._insertEditor()},_createLoading:function(){var i=this._dom.offset();$("body").append('<div id="shai_loading" ></div>'),$("#shai_loading").width(this._dom.width()),$("#shai_loading").height(this._dom.height()),$("#shai_loading").css({position:"absolute",left:i.left,top:i.top,"z-index":this._dom.css("z-index")+1})},_removeLoading:function(){$("#shai_loading").remove()},_getTbs:function(i){var t=this;$.ajax({url:t._getTbsURL,dataType:"json",success:function(t){t&&t.data&&t.data.tbs&&i&&_.isFunction(i)&&i(t.data.tbs)}})},_uploadImage:function(i){var t=this;t._getTbs(function(e){var o=i.toDataURL().replace(/^.*base64\,/,"");window.FlashImageLoader.bind("uploadComplete",t._uploadedHandler,t),window.FlashImageLoader.uploadBase64(t._uploadURL,o,{tbs:e})})},_uploadedHandler:function(i,t){var e=$.json.decode(t);if(0!=e.error_code)alert("\u56fe\u7247\u4e0a\u4f20\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5");else{var o=e.info.pic_id_encode;this._src="https://imgsa.baidu.com/forum/pic/item/"+o+".jpg",this._insertEditor()}window.FlashImageLoader.unbind("uploadComplete",this._uploadedHandler)},_insertEditor:function(){var i=this;this.trigger("completeRender"),this._removeLoading();var t=this._src;setTimeout(function(){window.rich_postor?(window.rich_postor._editor.execCommand("insertimage",t,6),window.rich_postor._editor.execCommand("insertlinebreak")):i.fire("insertimage",[{url:t,picType:6}])},300),$("#add_post_btn").click()}}});_.Module.define({path:"forum/widget/SignShai/FlashImageLoader",sub:{flashPath:"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/static-frs/component/sign_shai/Base64ImageLoader.swf?v=1.0",flashObj:null,isReady:!1,options:null,initial:function(e){this.options=$.extend({},e)},_createFlash:function(){var e=this;if(!this.flashObj){var t=$('<div id="flash_img_loader" style="line-height: 0; font-size: 0px;"></div>');t.appendTo("body"),this.flashObj=new $.swf(this.flashPath,{container:t,width:1,height:1,params:{quality:"high",allowScriptAccess:"always",wMode:"transparent",swLiveConnect:!0,menu:!1},callBacks:{completeHandler:function(t){e._completeHandler(t)},errorHandler:function(t){e._errorHandler(t)},isReady:function(){return e._isReady()},flashReady:function(){e._flashReady()},uploadBase64Complete:function(t){e._uploadBase64Complete(t)},uploadBase64Error:function(){e._uploadBase64Error()}}})}},_completeHandler:function(e){"onComplete"in this.options&&"function"==typeof this.options.onComplete&&this.options.onComplete(e),this.trigger("loadComplete",e)},_errorHandler:function(e){"onError"in this.options&&"function"==typeof this.options.onError&&this.options.onError(e),this.trigger("loadError")},_isReady:function(){return!0},_flashReady:function(){this.isReady=!0,"onFlashReady"in this.options&&"function"==typeof this.options.onFlashReady&&this.options.onFlashReady(),this.trigger("flashReady")},_uploadBase64Complete:function(e){this.trigger("uploadComplete",e)},_uploadBase64Error:function(){this.trigger("uploadError")},_remote:function(){var e=this,t=arguments;this._createFlash(),this.isReady?e.flashObj.remote.apply(e.flashObj,t):this.bind("flashReady",function(){e.flashObj.remote.apply(e.flashObj,t)})},load:function(e){this._remote("loadImage",e)},uploadBase64:function(e,t,n){this._remote("uploadBase64",e,t,n)}}}),_.Module.use("frs/component/SignShai/FlashImageLoader",null,function(e){window.FlashImageLoader=e}),!function(e,t,n){"use strict";function i(t){d.logging&&e.console&&e.console.log&&e.console.log(t)}function a(e){return{zindex:e,children:[]}}function o(e,t){var n=[];return{storage:n,width:e,height:t,fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){n.push({type:"variable",name:e,arguments:t})}}}var r,l,s,d={};d.Util={},d.Util.backgroundImage=function(e){return/data:image\/.*;base64,/i.test(e)||/^(-webkit|-moz|linear-gradient|-o-)/.test(e)?e:('url("'===e.toLowerCase().substr(0,5)?(e=e.substr(5),e=e.substr(0,e.length-2)):(e=e.substr(4),e=e.substr(0,e.length-1)),e)},d.Util.Bounds=function(e){var t,n={};return e.getBoundingClientRect?(t=e.getBoundingClientRect(),n.top=t.top,n.bottom=t.bottom||t.top+t.height,n.left=t.left,n.width=t.width||t.right-t.left,n.height=t.height||t.bottom-t.top,n):void 0},d.Util.getCSS=function(i,a){function o(e,t){var n,a=i.runtimeStyle&&i.runtimeStyle[e],o=i.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(t)&&/^-?\d/.test(t)&&(n=o.left,a&&(i.runtimeStyle.left=i.currentStyle.left),o.left="fontSize"===e?"1em":t||0,t=o.pixelLeft+"px",o.left=n,a&&(i.runtimeStyle.left=a)),/^(thin|medium|thick)$/i.test(t)?t:Math.round(parseFloat(t))+"px"}var s;if(e.getComputedStyle)r!==i&&(l=t.defaultView.getComputedStyle(i,null)),s=l[a],"backgroundPosition"===a&&(s=(s.split(",")[0]||"0 0").split(" "),s[0]=-1===s[0].indexOf("%")?o(a+"X",s[0]):s[0],s[1]=s[1]===n?s[0]:s[1],s[1]=-1===s[1].indexOf("%")?o(a+"Y",s[1]):s[1]);else if(i.currentStyle)if("backgroundPosition"===a)s=[o(a+"X",i.currentStyle[a+"X"]),o(a+"Y",i.currentStyle[a+"Y"])];else if(s=o(a,i.currentStyle[a]),/^(border)/i.test(a)&&/^(medium|thin|thick)$/i.test(s))switch(s){case"thin":s="1px";break;case"medium":s="0px";break;case"thick":s="5px"}return s},d.Util.BackgroundPosition=function(e,t,n){var i,a,o,r,l=d.Util.getCSS(e,"backgroundPosition");return 1===l.length&&(r=l,l=[],l[0]=r,l[1]=r),-1!==l[0].toString().indexOf("%")?(o=parseFloat(l[0])/100,a=t.width*o-n.width*o):a=parseInt(l[0],10),-1!==l[1].toString().indexOf("%")?(o=parseFloat(l[1])/100,i=t.height*o-n.height*o):i=parseInt(l[1],10),{top:i,left:a}},d.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},d.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&!function(e,t){var i=e.length,a=0;if("number"==typeof t.length)for(var o=t.length;o>a;a++)e[i++]=t[a];else for(;t[a]!==n;)e[i++]=t[a++];return e.length=i,e}(t,e),t}(e.childNodes)}catch(a){i("html2canvas.Util.Children failed with exception: "+a.message),t=[]}return t},function(){d.Generate={};var e=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z-]+)([\w\d\.\s,%\(\)]+)\)$/];d.Generate.parseGradient=function(t,n){var i,a,o,r,l,s,d,h,c=e.length;for(a=0;c>a&&!(o=t.match(e[a]));a+=1);if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(i={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},l=o[2].match(/\w+/g))for(s=l.length,a=0;s>a;a+=1)switch(l[a]){case"top":i.y0=0,i.y1=n.height;break;case"right":i.x0=n.width,i.x1=0;break;case"bottom":i.y0=n.height,i.y1=0;break;case"left":i.x0=0,i.x1=n.width}if(null===i.x0&&null===i.x1&&(i.x0=i.x1=n.width/2),null===i.y0&&null===i.y1&&(i.y0=i.y1=n.height/2),l=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,d=1/Math.max(s-1,1),a=0;s>a;a+=1)h=l[a].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),h[2]?(r=parseFloat(h[2]),r/="%"===h[3]?100:n.width):r=a*d,i.colorStops.push({color:h[1],stop:r});break;case"-webkit-gradient":if(i={type:"radial"===o[2]?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),l&&(i.x0=l[1]*n.width/100,i.y0=l[2]*n.height/100,i.x1=l[3]*n.width/100,i.y1=l[4]*n.height/100),l=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(s=l.length,a=0;s>a;a+=1)h=l[a].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),r=parseFloat(h[2]),"from"===h[1]&&(r=0),"to"===h[1]&&(r=1),i.colorStops.push({color:h[3],stop:r});break;case"-moz-linear-gradient":if(i={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(i.x0=l[1]*n.width/100,i.y0=l[2]*n.height/100,i.x1=n.width-i.x0,i.y1=n.height-i.y0),l=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(s=l.length,d=1/Math.max(s-1,1),a=0;s>a;a+=1)h=l[a].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),h[2]?(r=parseFloat(h[2]),h[3]&&(r/=100)):r=a*d,i.colorStops.push({color:h[1],stop:r});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(i={type:"circle",x0:0,y0:0,x1:n.width,y1:n.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},l=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(i.cx=l[1]*n.width/100,i.cy=l[2]*n.height/100),l=o[3].match(/\w+/),h=o[4].match(/[a-z-]*/),l&&h)switch(h[0]){case"farthest-corner":case"cover":case"":var g=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),p=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),u=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),m=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2));i.rx=i.ry=Math.max(g,p,u,m);break;case"closest-corner":var g=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),p=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),u=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),m=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2));i.rx=i.ry=Math.min(g,p,u,m);break;case"farthest-side":"circle"===l[0]?i.rx=i.ry=Math.max(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=l[0],i.rx=Math.max(i.cx,i.x1-i.cx),i.ry=Math.max(i.cy,i.y1-i.cy));break;case"closest-side":case"contain":"circle"===l[0]?i.rx=i.ry=Math.min(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=l[0],i.rx=Math.min(i.cx,i.x1-i.cx),i.ry=Math.min(i.cy,i.y1-i.cy))}if(l=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,d=1/Math.max(s-1,1),a=0;s>a;a+=1)h=l[a].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),h[2]?(r=parseFloat(h[2]),r/="%"===h[3]?100:n.width):r=a*d,i.colorStops.push({color:h[1],stop:r})}return i},d.Generate.Gradient=function(e,n){var a,o,r,l,s,h=t.createElement("canvas"),c=h.getContext("2d");if(h.width=n.width,h.height=n.height,a=d.Generate.parseGradient(e,n),s=new Image,a)if("linear"===a.type){for(o=c.createLinearGradient(a.x0,a.y0,a.x1,a.y1),r=0,l=a.colorStops.length;l>r;r+=1)try{o.addColorStop(a.colorStops[r].stop,a.colorStops[r].color)}catch(g){i(["failed to add color stop: ",g,"; tried to add: ",a.colorStops[r],"; stop: ",r,"; in: ",e])}c.fillStyle=o,c.fillRect(0,0,n.width,n.height),s.src=h.toDataURL()}else if("circle"===a.type){for(o=c.createRadialGradient(a.cx,a.cy,0,a.cx,a.cy,a.rx),r=0,l=a.colorStops.length;l>r;r+=1)try{o.addColorStop(a.colorStops[r].stop,a.colorStops[r].color)}catch(g){i(["failed to add color stop: ",g,"; tried to add: ",a.colorStops[r],"; stop: ",r,"; in: ",e])}c.fillStyle=o,c.fillRect(0,0,n.width,n.height),s.src=h.toDataURL()}else if("ellipse"===a.type){var p,u=t.createElement("canvas"),m=u.getContext("2d"),f=Math.max(a.rx,a.ry),y=2*f;for(u.width=u.height=y,o=m.createRadialGradient(a.rx,a.ry,0,a.rx,a.ry,f),r=0,l=a.colorStops.length;l>r;r+=1)try{o.addColorStop(a.colorStops[r].stop,a.colorStops[r].color)}catch(g){i(["failed to add color stop: ",g,"; tried to add: ",a.colorStops[r],"; stop: ",r,"; in: ",e])}m.fillStyle=o,m.fillRect(0,0,y,y),c.fillStyle=a.colorStops[r-1].color,c.fillRect(0,0,h.width,h.height),p=new Image,p.onload=function(){c.drawImage(p,a.cx-a.rx,a.cy-a.ry,2*a.rx,2*a.ry),s.src=h.toDataURL()},p.src=u.toDataURL()}return s},d.Generate.ListAlpha=function(e){var t,n="";do t=e%26,n=String.fromCharCode(t+64)+n,e/=26;while(26*e>26);return n},d.Generate.ListRoman=function(e){var t,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],a="",o=n.length;if(0>=e||e>=4e3)return e;for(t=0;o>t;t+=1)for(;e>=i[t];)e-=i[t],a+=n[t];return a}}(),d.Parse=function(r,l){function s(){return{width:Math.max(Math.max(q.body.scrollWidth,q.documentElement.scrollWidth),Math.max(q.body.offsetWidth,q.documentElement.offsetWidth),Math.max(q.body.clientWidth,q.documentElement.clientWidth)),height:Math.max(Math.max(q.body.scrollHeight,q.documentElement.scrollHeight),Math.max(q.body.offsetHeight,q.documentElement.offsetHeight),Math.max(q.body.clientHeight,q.documentElement.clientHeight))}}function h(e,t){var n=parseInt(X(e,t),10);return isNaN(n)?0:n}function c(e,t,n,i,a,o){"transparent"!==o&&(e.setVariable("fillStyle",o),e.fillRect(t,n,i,a),G+=1)}function g(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(e,t,n){return e.length>0?t+n.toUpperCase():void 0});case"uppercase":return e.toUpperCase();default:return e}}function p(e){return e.replace(/^\s*/g,"").replace(/\s*$/g,"")}function u(e,t){if(W[e+"-"+t]!==n)return W[e+"-"+t];var i,a,o,r=q.createElement("div"),l=q.createElement("img"),s=q.createElement("span");return r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin=0,r.style.padding=0,K.appendChild(r),l.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",l.width=1,l.height=1,l.style.margin=0,l.style.padding=0,l.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,s.appendChild(q.createTextNode("Hidden Text")),r.appendChild(s),r.appendChild(l),i=l.offsetTop-s.offsetTop+1,r.removeChild(s),r.appendChild(q.createTextNode("Hidden Text")),r.style.lineHeight="normal",l.style.verticalAlign="super",a=l.offsetTop-r.offsetTop+1,o={baseline:i,lineWidth:1,middle:a},W[e+"-"+t]=o,K.removeChild(r),o}function m(e,t,n,i){p(e).length>0&&(i.fillText(e,t,n),G+=1)}function f(e,t,n){var i,a,o,r,l,s,h,f,y,w,b,x,v,_=n.ctx,C=X(e,"fontFamily"),S=X(e,"fontSize"),R=X(e,"color"),T=X(e,"textDecoration"),M=X(e,"textAlign"),k=(X(e,"letterSpacing"),X(e,"fontWeight")),L=X(e,"fontStyle"),I=X(e,"fontVariant"),E=!1,A=0;if(t.nodeValue=g(t.nodeValue,X(e,"textTransform")),a=p(t.nodeValue),a.length>0){switch("none"!==T&&(o=u(C,S)),M=M.replace(["-webkit-auto"],["auto"]),r=t.nodeValue.split(""),parseInt(k,10)){case 401:k="bold";break;case 400:k="normal"}for(_.setVariable("fillStyle",R),_.setVariable("font",L+" "+I+" "+k+" "+S+" "+C),E?_.setVariable("textAlign","right"):_.setVariable("textAlign","left"),f=t,y=0,l=r.length;l>y;y+=1){if(h=null,P.rangeBounds)("none"!==T||0!==p(r[y]).length)&&(h=r[y],q.createRange?(w=q.createRange(),w.setStart(t,A),w.setEnd(t,A+h.length)):w=K.createTextRange(),i=w.getBoundingClientRect()?w.getBoundingClientRect():{});else{if("string"!=typeof f.nodeValue)continue;s=f.splitText(r[y].length),b=f.parentNode,x=q.createElement("wrapper"),v=f.cloneNode(!0),x.appendChild(f.cloneNode(!0)),b.replaceChild(x,f),i=d.Util.Bounds(x),h=f.nodeValue,f=s,b.replaceChild(v,x)}switch(null!==h&&m(h,i.left,i.bottom,_),T){case"underline":c(_,i.left,Math.round(i.top+o.baseline+o.lineWidth),i.width,1,R);break;case"overline":c(_,i.left,i.top,i.width,1,R);break;case"line-through":c(_,i.left,Math.ceil(i.top+o.middle+o.lineWidth),i.width,1,R)}A+=r[y].length}}}function y(e,t){var n,i,a=q.createElement("boundelement");return a.style.display="inline",n=e.style.listStyleType,e.style.listStyleType="none",a.appendChild(q.createTextNode(t)),e.insertBefore(a,e.firstChild),i=d.Util.Bounds(a),e.removeChild(a),e.style.listStyleType=n,i}function w(e){var t=-1,n=1,i=e.parentNode.childNodes;if(e.parentNode){for(;i[++t]!==e;)1===i[t].nodeType&&n++;return n}return-1}function b(e,t,n){var i,a,o,r,l,s=X(e,"listStylePosition"),h=X(e,"listStyleType"),c=X(e,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(h)){switch(o=w(e),h){case"decimal":r=o;break;case"decimal-leading-zero":r=1===o.toString().length?o="0"+o.toString():o.toString();break;case"upper-roman":r=d.Generate.ListRoman(o);break;case"lower-roman":r=d.Generate.ListRoman(o).toLowerCase();break;case"lower-alpha":r=d.Generate.ListAlpha(o).toLowerCase();break;case"upper-alpha":r=d.Generate.ListAlpha(o)}switch(r+=". ",l=y(e,r),c){case 401:c="bold";break;case 400:c="normal"}if($.setVariable("fillStyle",X(e,"color")),$.setVariable("font",X(e,"fontVariant")+" "+c+" "+X(e,"fontStyle")+" "+X(e,"fontSize")+" "+X(e,"fontFamily")),"inside"!==s)return;$.setVariable("textAlign","left"),i=n.left,a=l.bottom,m(r,i,a,$)}}function x(e){var t=r[e];return t&&t.succeeded===!0?t.img:!1}function v(e,t){var n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),a=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:i,width:a-n,height:o-i}}function _(e,t){var n;return t?"auto"!==e?(H=!0,n=a(e),t.children.push(n),n):t:n=a(0)}function C(e,t,n,i){var a,o,r,l,s,d,g,p=n.left,u=n.top,m=n.width,f=n.height,y=function(e){var t,n=[],i=["Top","Right","Bottom","Left"];for(t=0;4>t;t+=1)n.push({width:h(e,"border"+i[t]+"Width"),color:X(e,"border"+i[t]+"Color")});return n}(e);for(a=0;4>a;a+=1)if(o=y[a],o.width>0){switch(r=p,l=u,s=m,d=f-y[2].width,a){case 0:d=y[0].width;break;case 1:r=p+m-y[1].width,s=y[1].width;break;case 2:l=l+f-y[2].width,d=y[2].width;break;case 3:s=y[3].width}g={left:r,top:l,width:s,height:d},i&&(g=v(g,i)),g.width>0&&g.height>0&&c(t,r,l,g.width,g.height,o.color)}return y}function S(e,t,n){var a,o,r,l,s,d=q.createElement("valuewrap"),h=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];for(a=0,l=h.length;l>a;a+=1){s=h[a];try{d.style[s]=X(e,s)}catch(c){i("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}d.style.borderColor="black",d.style.borderStyle="solid",d.style.display="block",d.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(d.style.lineHeight=X(e,"height")),d.style.top=t.top+"px",d.style.left=t.left+"px",o="SELECT"===e.nodeName?e.options[e.selectedIndex].text:e.value,r=q.createTextNode(o),d.appendChild(r),K.appendChild(d),f(e,r,n),K.removeChild(d)}function R(e,t,n,i,a,o,r,l,s,d){e.drawImage(t,n,i,a,o,r,l,s,d),G+=1}function T(e,t,n,i,a,o,r,l){var s=0,d=0;r-n>0&&(s=r-n),l-i>0&&(d=l-i),R(e,t,s,d,a-s,o-d,n+s,i+d,a-s,o-d)}function M(e,t,n,i,a,o,r){var l,s,d=Math.min(t.width,o);for(n.top=n.top-Math.ceil(n.top/t.height)*t.height,s=a+n.top;r+a>s;)l=Math.floor(s+t.height)>r+a?r+a-s:t.height,T(e,t,i+n.left,s,d,l,i,a),s=Math.floor(s+t.height)}function k(e,t,n,i,a,o,r){var l,s,d=Math.min(t.height,r);for(n.left=n.left-Math.ceil(n.left/t.width)*t.width,s=i+n.left;o+i>s;)l=Math.floor(s+t.width)>o+i?o+i-s:t.width,T(e,t,s,a+n.top,l,d,i,a),s=Math.floor(s+t.width)}function L(e,t,n){var a,o,r,l,s,h,c,g,p,u,m,f,y=X(e,"backgroundImage"),w=X(e,"backgroundRepeat").split(",")[0];if(/data:image\/.*;base64,/i.test(y)||/^(-webkit|-moz|linear-gradient|-o-)/.test(y)||(y=y.split(",")[0]),"undefined"!=typeof y&&/^(1|none)$/.test(y)===!1)if(y=d.Util.backgroundImage(y),a=x(y),o=d.Util.BackgroundPosition(e,t,a),a)switch(w){case"repeat-x":k(n,a,o,t.left,t.top,t.width,t.height);break;case"repeat-y":M(n,a,o,t.left,t.top,t.width,t.height);break;case"no-repeat":l=t.width-o.left,p=t.height-o.top,s=o.left,h=o.top,c=o.left+t.left,g=o.top+t.top,0>s?(s=Math.abs(s),c+=s,l=Math.min(t.width,a.width-s)):(l=Math.min(l,a.width),s=0),0>h?(h=Math.abs(h),g+=h,p=Math.min(t.height,a.height-h)):(p=Math.min(p,a.height),h=0),p>0&&l>0&&R(n,a,s,h,l,p,c,g,l,p);break;default:for(o.top=o.top-Math.ceil(o.top/a.height)*a.height,r=t.top+o.top;r<t.height+t.top;)u=Math.min(a.height,t.height+t.top-r),m=Math.floor(r+a.height)>u+r?u+r-r:a.height,r<t.top?(f=t.top-r,r=t.top):f=0,k(n,a,o,t.left,r,t.width,m),f>0&&(o.top+=f),r=Math.floor(r+a.height)-f}else i("html2canvas: Error loading background:"+y)}function I(e,t){var n,a,r,g,p,u,m,f,y,w,T,M,k=d.Util.Bounds(e),I=k.left,E=k.top,A=k.width,U=k.height,F=X(e,"backgroundColor"),B=X(e,"position"),D=X(e,"opacity");switch(t?j={}:(j=s(),t={opacity:1}),a=_(X(e,"zIndex"),t.zIndex),r={ctx:o(j.width||A,j.height||U),zIndex:a,opacity:D*t.opacity,cssPosition:B},t.clip&&(r.clip=d.Util.Extend({},t.clip)),l.useOverflow===!0&&/(hidden|scroll|auto)/.test(X(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(r.clip=r.clip?v(r.clip,k):k),g=a.children.push(r),u=a.children[g-1].ctx,u.setVariable("globalAlpha",r.opacity),p=C(e,u,k,!1),r.borders=p,Q.test(e.nodeName)&&"transparent"!==l.iframeDefault&&(F="default"===l.iframeDefault?"#efefef":l.iframeDefault),m={left:I+p[3].width,top:E+p[0].width,width:A-(p[1].width+p[3].width),height:U-(p[0].width+p[2].width)},r.clip&&(m=v(m,r.clip)),m.height>0&&m.width>0&&(c(u,m.left,m.top,m.width,m.height,F),L(e,m,u)),e.nodeName){case"IMG":f=e.getAttribute("src"),n=x(f),n?(y=h(e,"paddingLeft"),w=h(e,"paddingTop"),T=h(e,"paddingRight"),M=h(e,"paddingBottom"),R(u,n,0,0,n.width,n.height,I+y+p[3].width,E+w+p[0].width,k.width-(p[1].width+p[3].width+y+T),k.height-(p[0].width+p[2].width+w+M))):i("html2canvas: Error loading <img>:"+f);break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&e.value.length>0&&S(e,k,r);break;case"TEXTAREA":e.value.length>0&&S(e,k,r);break;case"SELECT":e.options.length>0&&S(e,k,r);break;case"LI":b(e,r,m);break;case"CANVAS":y=h(e,"paddingLeft"),w=h(e,"paddingTop"),T=h(e,"paddingRight"),M=h(e,"paddingBottom"),R(u,e,0,0,e.width,e.height,I+y+p[3].width,E+w+p[0].width,k.width-(p[1].width+p[3].width+y+T),k.height-(p[0].width+p[2].width+w+M))}return a.children[g-1]}function E(e,t){if("none"!==X(e,"display")&&"hidden"!==X(e,"visibility")&&(t=I(e,t)||t,$=t.ctx,!Q.test(e.nodeName))){var n,i,a,o=d.Util.Children(e);for(n=0,a=o.length;a>n;n+=1)i=o[n],1===i.nodeType?E(i,t):3===i.nodeType&&f(e,i,t)}}e.scroll(0,0);var A,U,F,B,D,$,j,z,O,N,P={rangeBounds:!1,svgRendering:l.svgRendering&&function(){var e=new Image,a=t.createElement("canvas"),o=a.getContext===n?!1:a.getContext("2d");if(o===!1)return!1;a.width=a.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{o.drawImage(e,0,0),a.toDataURL()}catch(r){return!1}return i("html2canvas: Parse: SVG powered rendering available"),!0}()},V=l.elements===n?t.body:l.elements[0],H=!1,G=0,W={},q=V.ownerDocument,Q=new RegExp("("+l.ignoreElements+")"),K=q.body;r=r||{},q.createRange&&(A=q.createRange(),A.getBoundingClientRect&&(U=q.createElement("boundtest"),U.style.height="123px",U.style.display="block",K.appendChild(U),A.selectNode(U),F=A.getBoundingClientRect(),B=F.height,123===B&&(P.rangeBounds=!0),K.removeChild(U)));var X=d.Util.getCSS;for(D=I(V,null),P.svgRendering&&!function(e){function t(e){var n,i,o,r,l,s=d.Util.Children(e),h=s.length;for(l=0;h>l;l+=1)if(r=s[l],3===r.nodeType)a+=r.nodeValue.replace(/\</g,"&lt;").replace(/\>/g,"&gt;");else if(1===r.nodeType&&!/^(script|meta|title)$/.test(r.nodeName.toLowerCase())){if(a+="<"+r.nodeName.toLowerCase(),r.hasAttributes())for(n=r.attributes,o=n.length,i=0;o>i;i+=1)a+=" "+n[i].name+'="'+n[i].value+'"';a+=">",t(r),a+="</"+r.nodeName.toLowerCase()+">"}}var n=new Image,i=s(),a="";t(e),n.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+i.width+"' height='"+i.height+"'>","<foreignObject width='"+i.width+"' height='"+i.height+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",a.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),n.onload=function(){D.svgRender=n}}(t.documentElement),z=0,O=V.children,N=O.length;N>z;z+=1)E(O[z],D);return D.backgroundColor=X(t.documentElement,"backgroundColor"),D},d.Preload=function(a){function o(e){x.href=e,x.href=x.href;var t=x.protocol+x.host;return t===c}function r(){!m.firstRun&&m.numLoaded>=m.numTotal&&(i("Finished loading images: # "+m.numTotal+" (failed: "+m.numFailed+")"),"function"==typeof a.complete&&a.complete(m),m.numLoaded=0,m.numTotal=0,m.numFailed=0)}function l(t,n,i){d.proxyLoadQueue||(d.proxyLoadQueue={}),d.proxyLoadQueue[t]={img:n,imageObj:i},d.flashImageLoader||(d.flashImageLoader=e.FlashImageLoader,e.FlashImageLoader.bind("loadError",function(){if(d.proxyLoadQueue[imgURL]){var e=d.proxyLoadQueue[imgURL].imageObj;e.succeeded=!1,m.numLoaded++,m.numFailed++,r()}}),e.FlashImageLoader.bind("loadComplete",function(e,t){var n=t.url,i=t.data.base64,a="data:image/png;base64,"+i;if(d.proxyLoadQueue[n]){var o=d.proxyLoadQueue[n].img,r=d.proxyLoadQueue[n].imageObj;d.proxyLoadQueue[n]=null,delete d.proxyLoadQueue[n],r=m[n]={img:o},h(o,r),o.src=a.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,"")}})),e.FlashImageLoader.load(t)}function s(e){var t,a,o,l,h=d.Util.Children(e),c=!1;try{var p=h.length;for(t=0;p>t;t+=1)s(h[t])}catch(u){}try{c=e.nodeType}catch(f){c=!1,i("html2canvas: failed to access some element's nodeType - Exception: "+f.message)}if(1===c||c===n){try{a=d.Util.getCSS(e,"backgroundImage")}catch(u){i("html2canvas: failed to get background-image - Exception: "+u.message)}a&&"1"!==a&&"none"!==a&&(/^(-webkit|-o|-moz|-ms|linear)-/.test(a)?(l=d.Generate.Gradient(a,d.Util.Bounds(e)),l!==n&&(m[a]={img:l,succeeded:!0},m.numTotal++,m.numLoaded++,r())):(o=d.Util.backgroundImage(a.match(/data:image\/.*;base64,/i)?a:a.split(",")[0]),g.loadImage(o)))}}function h(t,i){t.onload=function(){i.timer!==n&&e.clearTimeout(i.timer),m.numLoaded++,i.succeeded=!0,t.onerror=t.onload=null,r()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(i.timer),a.proxy)){var n=t.src;return t=new Image,i.img=t,t.src=n,l(t.src,t,i),void 0}m.numLoaded++,m.numFailed++,i.succeeded=!1,t.onerror=t.onload=null,r()}}var c,g,p,u,m={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},f=a.elements[0]||t.body,y=f.ownerDocument,w="img"!=f.tagName.toLowerCase()?f.getElementsByTagName("img"):[f],b=w.length,x=y.createElement("a"),v=function(e){return e.crossOrigin!==n}(new Image);for(x.href=e.location.href,c=x.protocol+x.host,g={loadImage:function(t){var i,r;t&&m[t]===n&&(i=new Image,t.match(/data:image\/.*;base64,/i)?(i.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),r=m[t]={img:i},m.numTotal++,h(i,r)):o(t)||a.allowTaint===!0?(r=m[t]={img:i},m.numTotal++,h(i,r),i.src=t):v&&!a.allowTaint&&a.useCORS?(i.crossOrigin="anonymous",r=m[t]={img:i},m.numTotal++,h(i,r),i.src=t,i.customComplete=function(){this.img.complete?this.img.onerror():this.timer=e.setTimeout(this.img.customComplete,100)}.bind(r),i.customComplete()):a.proxy&&(r=m[t]={img:i},m.numTotal++,l(t,i,r)))},cleanupDOM:function(o){var l,s;if(!m.cleanupDone){o&&"string"==typeof o?i("html2canvas: Cleanup because: "+o):i("html2canvas: Cleanup after timeout: "+a.timeout+" ms.");for(s in m)if(m.hasOwnProperty(s)&&(l=m[s],"object"==typeof l&&l.callbackname&&l.succeeded===n)){e[l.callbackname]=n;try{delete e[l.callbackname]}catch(d){}l.script&&l.script.parentNode&&(l.script.setAttribute("src","about:blank"),l.script.parentNode.removeChild(l.script)),m.numLoaded++,m.numFailed++,i("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+m.numLoaded+" / "+m.numTotal)}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),m.cleanupDone=!0,o&&"string"==typeof o||r()}},renderingDone:function(){u&&e.clearTimeout(u)}},a.timeout>0&&(u=e.setTimeout(g.cleanupDOM,a.timeout)),i("html2canvas: Preload starts: finding background-images"),m.firstRun=!0,s(f),i("html2canvas: Preload: Finding images"),p=0;b>p;p+=1)g.loadImage(w[p].getAttribute("src"));return m.firstRun=!1,i("html2canvas: Preload: Done."),m.numTotal===m.numLoaded&&r(),g},d.Renderer=function(e,n){function i(e){var t,n,o,r,l,s,d,h,c=[],g=[],p=e.children;for(t=0,l=p.length;l>t;t+=1)s=p[t],s.children&&s.children.length>0?(c.push(s),g.push(s.zindex)):a.push(s);for(g.sort(function(e,t){return e-t}),n=0,o=g.length;o>n;n+=1)for(r=g[n],d=0,h=c.length;h>=d;d+=1)if(c[d].zindex===r){s=c.splice(d,1),i(s[0]);break}}var a=[];if((new Date).getTime(),i(e.zIndex),"function"!=typeof n._renderer._create)throw new Error("Invalid renderer defined");return n._renderer._create(e,n,t,a,d)},s=function(t,a){var o,r,l=((new Date).getTime(),{logging:!1,elements:t,proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,flashcanvas:n,width:null,height:null,taintTest:!0,renderer:"Canvas",clipRange:null});if(l=d.Util.Extend(a,l),"string"==typeof l.renderer&&d.Renderer[l.renderer]!==n)l._renderer=d.Renderer[l.renderer](l);else{if("function"!=typeof l.renderer)throw"Unknown renderer";l._renderer=l.renderer(l)}return d.logging=l.logging,l.complete=function(e){("function"!=typeof l.onpreloaded||l.onpreloaded(e)!==!1)&&(o=d.Parse(e,l),("function"!=typeof l.onparsed||l.onparsed(o)!==!1)&&(r=d.Renderer(o,l),"function"==typeof l.onrendered&&l.onrendered(r)))},e.setTimeout(function(){d.Preload(l)},0),{render:function(e,t){return d.Renderer(e,d.Util.Extend(t,l))},parse:function(e,t){return d.Parse(e,d.Util.Extend(t,l))},preload:function(e){return d.Preload(d.Util.Extend(e,l))},log:i}},s.log=i,s.Renderer={Canvas:n},d.Renderer.Canvas=function(a){a=a||{};var o,r=t,l=a.canvas||r.createElement("canvas"),s=!1,d=!1,h=!1,c=2880;if(l.getContext)i("html2canvas: Renderer: using canvas renderer"),h=!0;else if(a.flashcanvas!==n){s=!0,i("html2canvas: Renderer: canvas not available, using flashcanvas");var g=r.createElement("script");g.src=a.flashcanvas,g.onload=function(t,a){var o;return t.onload!==n?a:(t.onreadystatechange!==n?(o=function(){"loaded"!==t.readyState&&"complete"!==t.readyState?e.setTimeout(o,250):a()},e.setTimeout(o,250)):i("html2canvas: Renderer: Can't track when flashcanvas is loaded"),void 0)}(g,function(){"undefined"!=typeof e.FlashCanvas&&(i("html2canvas: Renderer: Flashcanvas initialized"),e.FlashCanvas.initElement(l),h=!0,d!==!1&&o._create.apply(null,d))}),r.body.appendChild(g)}return o={_create:function(e,a,o,r,g){if(!h)return d=arguments,l;var p,u,m,f,y,w,b,x,v,_=l.getContext("2d"),C=t.createElement("canvas"),S=C.getContext!==n,R=S?C.getContext("2d"):{},T=[];if(l.width=l.style.width=s?Math.min(c,a.width||e.ctx.width):a.width||e.ctx.width,l.height=l.style.height=s?Math.min(c,a.height||e.ctx.height):a.height||e.ctx.height,v=_.fillStyle,_.fillStyle=e.backgroundColor,_.fillRect(0,0,l.width,l.height),_.fillStyle=v,a.svgRendering&&e.svgRender!==n)_.drawImage(e.svgRender,0,0);else for((new Date).getTime(),u=0,m=r.length;m>u;u+=1){if(p=r.splice(0,1)[0],p.canvasPosition=p.canvasPosition||{},_.textBaseline="bottom",p.clip&&(_.save(),_.beginPath(),_.rect(p.clip.left,p.clip.top,p.clip.width,p.clip.height),_.clip()),p.ctx.storage)for(f=0,b=p.ctx.storage.length;b>f;f+=1)switch(x=p.ctx.storage[f],x.type){case"variable":_[x.name]=x.arguments;break;case"function":if("fillRect"===x.name)(!s||x.arguments[0]+x.arguments[2]<c&&x.arguments[1]+x.arguments[3]<c)&&_.fillRect.apply(_,x.arguments);else if("fillText"===x.name)(!s||x.arguments[1]<c&&x.arguments[2]<c)&&_.fillText.apply(_,x.arguments);else if("drawImage"===x.name&&x.arguments[8]>0&&x.arguments[7]){if(S&&a.taintTest&&-1===T.indexOf(x.arguments[0].src)){R.drawImage(x.arguments[0],0,0);try{R.getImageData(0,0,1,1)}catch(M){C=o.createElement("canvas"),R=C.getContext("2d");continue}T.push(x.arguments[0].src)}_.drawImage.apply(_,x.arguments)}}p.clip&&_.restore()}if(i("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),m=a.elements.length,1===m&&"object"==typeof a.elements[0]&&"BODY"!==a.elements[0].nodeName&&s===!1){var w=a.clipRange?a.clipRange:g.Util.Bounds(a.elements[0]);y=o.createElement("canvas"),y.width=w.width,y.height=w.height,_=y.getContext("2d");var k=l.getContext("2d"),L=k.getImageData(w.left,w.top,w.width,w.height);return _.putImageData(L,0,0),l=null,y}return l}}},e.html2canvas=s}(window,document),_.Module.define({path:"forum/widget/SignShai",requires:["forum/widget/SignShai/FlashImageLoader"],sub:{_dom:null,_txt:null,_cal:null,_sign_info:null,_cvs:null,_src:null,_getTbsURL:"//tieba.baidu.com/dc/common/imgtbs",_uploadURL:"https://uploadphotos.baidu.com/upload/pic",_signText:{1:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>1</span>\u4e2a\u7b7e\u5230\uff0c<br />\u4ee5\u8fc5\u96f7\u4e0d\u53ca\u63a9\u8033\u76d7\u94c3\u4e4b\u52bf\u62a2\u5f97\u5934\u7b7e\uff0c\u8d76\u7d27\u622a\u56fe\u7559\u5ff5~~",2:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>2</span>\u4e2a\u7b7e\u5230\uff0c<br />\u6162\u4e86\u90a3\u4e48\u4e00\u70b9\u70b9\u4e00\u70b9\u70b9\uff0c\u5c48\u5c45\u7b2c\u4e8c\uff0c\u660e\u5929\u6765\u62a2\u7b2c\u4e00~",3:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>3</span>\u4e2a\u7b7e\u5230\uff0c<br />\u5982\u5c0f\u674e\u98de\u5200\u822c\u7684\u901f\u5ea6\u6458\u5f97\u7b7e\u5230\u63a2\u82b1\uff0c\u597d\u8eab\u624b\u554a~",10:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>10</span>\u4e2a\u7b7e\u5230\uff0c<br />\u5341\u5168\u5341\u7f8e\u8bf4\u7684\u5c31\u662f\u6211\uff0c\u6709\u6728\u6709?\u6709\u6728\u6709\uff1f\u6709\u6728\u6709~",100:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>100</span>\u4e2a\u7b7e\u5230\uff0c<br />\u53e4\u6709\u767e\u6b65\u7a7f\u6768\uff0c\u54b1\u8fd9\u7b2c100\u4e2a\u7b7e\u5230\u4e5f\u4e0d\u5bb9\u6613\u54c8~~",222:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>222</span>\u4e2a\u7b7e\u5230\uff0c<br />\u4e00\u4e2a2\u662f\u5076\u7136\uff0c\u4e24\u4e2a2\u662f\u5076\u7136\uff0c\u4e09\u4e2a2\u5c31\u771f2\u4e86\u2026\u2026",250:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>250</span>\u4e2a\u7b7e\u5230\uff0c<br />\u676f\u4e86\u4e2a\u5177\u554a\uff0c\u8fd9\u4e2a\u6570\u5b57\u597d\u50cf\u6709\u70b9\u5c34\u5c2c\u54c8~~",2222:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>2222</span>\u4e2a\u7b7e\u5230\uff0c<br />\u8981\u4e0d\u8981\u8fd9\u4e48\u591a2\u554a\uff0c\u53c8\u4e0d\u662f\u6597\u5730\u4e3b\u51d1\u70b8\u5f39\uff0c\u4f24\u4e0d\u8d77~~",1000:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>1000</span>\u4e2a\u7b7e\u5230\uff0c<br />\u201c\u7b7e\u201d\u8f7d\u4e00\u523b\u96be\u9022\uff0c\u524d\u9762999\u4e2a\u4eba\u90fd\u6728\u6709\u62a2\u5230\u54e6~",9527:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>9527</span>\u4e2a\u7b7e\u5230\uff0c<br />\u636e\u8bf4\u8fd9\u662f\u4e2a\u5f88\u5185\u6db5\u7684\u6570\u5b57\uff0c\u5012\u8fc7\u6765\u770b\u770b\uff0c\u4f60\u61c2\u7684~",10000:"\u4eca\u65e5\u672c\u5427\u7b2c<span class='sign_index_num'>10000</span>\u4e2a\u7b7e\u5230\uff0c<br />10000\u554a\uff0c\u5c31\u51b2\u8fd9\u4e2a\u6570\uff0c\u9738\u6c14\u4fa7\u6f0f\u6709\u6728\u6709\uff01"},_signKeepText:{7:"\u8fde\u7eed\u5728\u672c\u5427\u7b7e\u52307\u5929\uff0c<br />\u4f60\u5df2\u7ecf\u8fde\u7eed\u7b7e\u52307\u5929\uff0c\u4e00\u5468\u90fd\u753b\u6ee1\u4e86\u5708\u5708\uff0c\u52a0\u6cb9\u5427~",30:"\u8fde\u7eed\u5728\u672c\u5427\u7b7e\u523030\u5929\uff0c<br />\u4f60\u5df2\u7ecf\u8fde\u7eed\u7b7e\u4e8630\u5929\uff0c\u622a\u4e2a\u56fe\u770b\u770b\u5728\u5427\u91cc\u795e\u9a6c\u6c34\u5e73~"},_titleText:"\u8fde\u7eed\u5728\u672c\u5427\u7b7e\u5230<keep>\u5929\uff0c\u6652\u4e0b\u7b7e\u5230\u6392\u540d\u7167\uff0c\u770b\u770b\u6211\u795e\u9a6c\u6c34\u5e73",initial:function(e,t){this._dom=$("#"+e),this._txt=this._dom.find(".sign_text_gray").eq(0),this._cal=this._dom.find(".j_succ_info").eq(0),this._sign_info=t,this._changeTxt()
},_changeTxt:function(){var e=this,t=this._sign_info.rank.toString(),n=this._sign_info.sign_keep.toString(),i=n in this._signKeepText||t in this._signText;n in this._signKeepText?this._txt.html(this._signKeepText[n].replace("<rank>",t.toString())):t in this._signText&&this._txt.html(this._signText[t]),i&&($.tb.Stats.sendRequest("https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/img/pv.gif",{fr:"tb0_forum",st_mod:"frs",st_type:"sign_shai_display"}),this._txt.append('&nbsp;&nbsp;<button class="j_sign_shai sign_shai_btn" >&nbsp;</button>'),this._dom.find(".j_sign_shai").click(function(){e.render()}),this.bind("startRender",function(){e._dom.find(".j_sign_shai").unbind("click")}),this.bind("completeRender",function(){e._dom.find(".j_sign_shai").click(function(){e.render()})}))},_inputTitle:function(){$("#edit_parent").find(".edit_title_field").val(this._titleText.replace("<keep>",this._sign_info.sign_keep.toString()))},render:function(){this.trigger("startRender"),this._createLoading(),$.tb.Stats.sendRequest("https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/img/pv.gif",{fr:"tb0_forum",st_mod:"frs",st_type:"sign_shai_render"});var e=this;if(this._dom.find(".signed_anime_day").removeClass("signed_anime_day").addClass("signed_day"),this._inputTitle(),e._src)this._insertEditor();else{var t=this._dom.offset(),n=this._cal.offset();$.extend(t,{right:t.left+this._dom.width(),bottom:t.top+this._dom.height()}),$.extend(n,{right:n.left+this._cal.width(),bottom:n.top+this._cal.height()});var i=Math.max(t.right,n.right)-Math.min(t.left,n.left),a=Math.max(t.bottom,n.bottom)-Math.min(t.top,n.top);html2canvas(e._dom,{onrendered:function(t){e._cvs=t,e._uploadImage(t)},clipRange:{left:Math.min(t.left,n.left)-1,top:Math.min(t.top,n.top)-1,width:i+12,height:a+2}})}},_createLoading:function(){var e=this._cal.offset();$("body").append('<div id="shai_loading" ></div>'),$("#shai_loading").width(this._cal.width()),$("#shai_loading").height(this._cal.height()),$("#shai_loading").css({position:"absolute",left:e.left,top:e.top,"z-index":this._cal.css("z-index")+1})},_removeLoading:function(){$("#shai_loading").remove()},_getTbs:function(e){var t=this;$.ajax({url:t._getTbsURL,dataType:"json",success:function(t){t&&t.data&&t.data.tbs&&e&&_.isFunction(e)&&e(t.data.tbs)}})},_uploadImage:function(e){var t=this;t._getTbs(function(n){var i=e.toDataURL().replace(/^.*base64\,/,"");window.FlashImageLoader.bind("uploadComplete",t._uploadedHandler,t),window.FlashImageLoader.uploadBase64(t._uploadURL,i,{tbs:n})})},_uploadedHandler:function(e,t){var n=$.json.decode(t);if(0!=n.error_code)alert("\u56fe\u7247\u4e0a\u4f20\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5");else{var i=n.info.pic_id_encode;this._src="https://imgsa.baidu.com/forum/pic/item/"+i+".jpg",this._insertEditor()}window.FlashImageLoader.unbind("uploadComplete",this._uploadedHandler)},_insertEditor:function(){var e=this;this.trigger("completeRender"),this._removeLoading();var t=this._src;setTimeout(function(){window.rich_postor?(window.rich_postor._editor.execCommand("insertimage",t,6),window.rich_postor._editor.execCommand("insertlinebreak")):e.fire("insertimage",[{url:t,picType:6}])},300),$("#add_post_btn").click()}}});_.Module.define({requires:["encourage-props/widget/ContSignCard","tbui/widget/LoginDialog","encourage-member/widget/join_vip_dialog","tbui/widget/bubble_tip","tbui/widget/Card","tbui/widget/CaptchaDialog","forum/widget/SignShai","forum/widget/sign100"],path:"forum/widget/sign_mod",sub:{_jq_wrap:null,_options:{},initial:function(n,i,e){this._jq_wrap=n,this._options=$.extend(this._options,i),this.signRank.options=i,this.signRank.pageUnitData=e,this.signRank.sign_init(n,this._options,this),this.signRank.pvLog()},signRank:{sign_url:"/sign/add",sign_forum:"/sign/info",get_url:"/sign/loadmonth",month_url:"/sign/month",sign_card:null,sign_year:null,sign_month:null,orign_year:null,orign_month:null,rights_tips:[null,null,null,null,null],mouseEventTimer:null,rightsTipsTimer:null,isReplenishing:!1,rplnBubble:null,resign_card_num:0,rpln_available_time:13858272e5,jq_wrap:null,_resignMap:{2280001:"\u60a8\u5c1a\u5728\u9ed1\u540d\u5355\u4e2d\uff0c\u4e0d\u80fd\u64cd\u4f5c",2280002:"\u4eb2\uff0c\u60a8\u5df2\u88ab\u5c01\u7981\uff0c\u7b7e\u5230\u6210\u529f\uff0c\u4f46\u65e0\u6cd5\u6da8\u7ecf\u9a8c\u54e6~",2280003:"\u7b7e\u5230\u592a\u9891\u7e41\u4e86\u70b9\uff0c\u4f11\u606f\u7247\u523b\u518d\u6765\u5427:)",2280004:"\u5f53\u524d\u7b7e\u5230\u4eba\u6570\u592a\u591a\uff0c\u8bf7\u7a0d\u540e\u518d\u7b7e",2280005:"\u7b7e\u5230\u592a\u9891\u7e41\u4e86\u70b9\uff0c\u4f11\u606f\u7247\u523b\u518d\u6765\u5427:)",2280006:"\u60a8\u5df2\u7ecf\u7b7e\u8fc7\u5230\u4e86\uff0c\u8bf7\u660e\u5929\u7ee7\u7eed\u7b7e\u5230^_^",2280007:"\u7b7e\u5230\u670d\u52a1\u5fd9\uff0c\u8bf7\u91cd\u65b0\u7b7e\u5230",2280008:"\u670d\u52a1\u5668\u6253\u76f9\u4e86\uff0c\u518d\u7b7e\u4e00\u6b21\u53eb\u9192\u5b83",2280009:"\u8be5\u7528\u6237\u6ca1\u6709\u7b7e\u5230",2280010:"\u670d\u52a1\u5668\u6253\u76f9\u4e86\uff0c\u518d\u7b7e\u4e00\u6b21\u53eb\u9192\u5b83",2280011:"\u670d\u52a1\u5668\u6253\u76f9\u4e86\uff0c\u518d\u7b7e\u4e00\u6b21\u53eb\u9192\u5b83",2280012:"\u8865\u7b7e\u5361\u4e0d\u8db3\uff0c\u8bf7\u5148\u8d2d\u4e70\u8865\u7b7e\u5361",2280013:"\u6570\u636e\u5e93\u8bbf\u95ee\u6210\u529f\uff0c\u4f46\u6570\u636e\u4e0d\u5b58\u5728",2280014:"\u8865\u7b7e\u5361\u4f7f\u7528\u6570\u636e\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u8bf7\u660e\u65e5\u7ee7\u7eed"},_getClientHtml:function(){return['<div class="sign_card">','<h2 class="sign_card_title">'+this.pageUnitData.sign_mod_card_title+"</h2>",'<div class="sign_card_detail">'+this.pageUnitData.sign_mod_card_detail+"</div>",'<a rel="noreferrer" href="https://tiebac.baidu.com/c/s/download/pc?src=webtb&t=2&tab=5#img5" target="_blank" class="sign_card_positive_btn">',this.pageUnitData.sign_mod_card_positive_btn+"</a>",'<a rel="noreferrer" href="/home/main?id='+PageData.user.portrait+'#scardsign" target="_blank" class="sign_card_sign_btn">'+this.pageUnitData.sign_mod_card_no_txt+"</a>","</div>"].join("")},sign_init:function(n,i,e){var s=this,t=this.jq_wrap=n;if(this.MODULE=e,"sign_rank"==$.cookie("add_sign")&&(i.isSignIn||s.showCardBeforeSign(),$.cookie("add_sign",null)),"true"==$.cookie("sign_not_now")&&(t.find(".j_signbtn").removeClass("j_cansign").addClass("signstar_ing"),setTimeout(function(){t.find(".j_signbtn").removeClass("signstar_ing").addClass("j_cansign")},1e4)),i.isSignIn)s.sign_resetdate(),s.sign_load_month(0),s.cal_mouseEnterOut(),setInterval(function(){s.refresh_sign_rank()},3e5);else{{var a=new Date;a.getDay()}t.find(".j_signbtn").addClass("j_cansign")}t.on("click",".j_cont_sign_card",function(n){n.preventDefault();var e=$(".j_sign_succ_keep").text(),t=$(".j_sign_succ_count").text();$(this).hasClass("j_need_judge")&&e==t?s.showAlreadyUsed($(this)):s.MODULE.requireInstance("encourage-props/widget/ContSignCard",[{userProp:$.getPageData("userProp",{},i)}])}),t.on("click",".j_onekey_btn",function(n){PageData.user.is_login||(n.preventDefault(),s.MODULE.requireInstance("tbui/widget/LoginDialog"))}),t.find(".j_btn_getmember").on("click",function(){var n=s.MODULE.requireInstance("encourage-member/widget/join_vip_dialog");return n.getMemberDialog(),!1}),t.on("click",".j_cansign",function(){if(PageData.user.is_login)PageData.user.is_black?s.show_block_sign_dialog():s.showCardBeforeSign();else{s.MODULE.requireInstance("tbui/widget/LoginDialog",["","",function(){$.cookie("add_sign","sign_rank",{expires:14}),$.tb.location.reload()}])}}),t.find(".j_calendar_month_prev").click(function(){var n=new Date(s.sign_year,s.sign_month-1,1),i=new Date(s.orign_year-2,s.orign_month-1,1),e=new Date(2012,6,1);n.getTime()<=i.getTime()||n.getTime()<=e.getTime()||s.set_sign_calendar("",s.sign_year,s.sign_month,-1)}),t.find(".j_calendar_month_next").click(function(){s.sign_year>s.orign_year||s.sign_year==s.orign_year&&s.sign_month>=s.orign_month||s.set_sign_calendar("",s.sign_year,s.sign_month,1)}),PageData.user.is_login&&(t.find(".j_sign_rights").show(),t.find(".j_sign_rights_icon").each(function(n,i){$(i).mouseover(function(){s.rightsTipsTimer=setTimeout(function(){s.sign_right_tips(n)},400)}).mouseout(function(){window.clearInterval(s.rightsTipsTimer),s.rightsTipsTimer=window.setTimeout(function(){null!=s.rights_tips[n]&&s.rights_tips[n].hideBubble()},10)})}));var r=PageData.user,_=r.mPaar_props&&r.mParr_props.level&&r.mParr_props.level.props_id>0&&r.mParr_props.level.end_time>+new Date/1e3,o="sign_box_bright_hover";o=i.hasClass?_?"sign_box_member_bright_hover":"sign_box_bright_hover":_?"sign_box_member_bright_noclass_hover":"sign_box_bright_noclass_hover";var g=t.find(".j_sign_box");g.hover(function(){$(this).addClass(o)},function(){$(this).removeClass(o)});var l=t.find(".j_sign_dir_tip"),d=l.html();l.html("");var c={content:d,arrow_dir:"up",bubble_css:{top:-12,left:i.hasClass?4:50,width:i.hasClass?"pb"==i.page?192:200:120,"text-align":"left"},arrow_pos:{right:i.hasClass?30:-9},attr:" id='tb_message_tip_n' ",wrap:l,closeBtn:!1},u=e.requireInstance("tbui/widget/bubble_tip",[c]),p=g.find(".j_signdir");p.bind("mouseenter",function(){l.show(),u.showBubble()}).bind("mouseleave",function(){u.hideBubble()});var h=$(".lack_sign_monthly_tip_card");t.find(".j_lack_sign_monthly_help").on("click",function(n){n.preventDefault(),h.fadeIn("fast")}).on("mouseleave",function(){h.timeout=setTimeout(function(){h.fadeOut("fast")},1e3)}),h.on("mouseenter",function(){clearTimeout(h.timeout),h.fadeIn("fast")}).on("mouseleave",function(){h.fadeOut("fast")}),t.find(".j_sign_tip_1key_icon").on("click",function(){$.stats.track("\u7b7e\u5230_\u4e00\u952e\u7b7e\u5230icon","\u7b7e\u5230\u6539\u9020",{obj_type:"\u7b7e\u5230",obj_url:$(this).tbattr("href")})})},showAlreadyUsed:function(n){this._alreadyUsedBb&&this._alreadyUsedBb.closeBubble();var i={content:"\u672c\u5427\u6240\u6709\u7b7e\u5230\u5df2\u7ecf\u8fde\u7eed\uff0c\u8bf7\u53bb\u522b\u7684\u5427\u770b\u770b",arrow_dir:"down",bubble_css:{top:-40,left:8,width:143,height:53},arrow_pos:{left:70},wrap:n.parent(),closeBtn:!0};this._alreadyUsedBb=this.MODULE.requireInstance("tbui/widget/bubble_tip",[i]),this._alreadyUsedBb.showBubble()},showCardBeforeSign:function(){var n=this,i=$(".j_signbtn");if("1"==$.cookie("showCardBeforeSign")||n.sign_card)n.sign_add();else{var e=n.MODULE.requireInstance("tbui/widget/Card",[{content:n._getClientHtml(),arrow_dir:"up",card_css:{width:197,top:i.offset().top+i.height()+11,left:i.offset().left},card_leave_hide:!0}]);n.sign_card=e,n.bindCardEvent(),e.showCard(),$.cookie("showCardBeforeSign","1",{expires:1})}},bindCardEvent:function(){var n=this;$(".sign_card_negative_btn").on("click",function(i){i.preventDefault(),n.sign_card&&n.sign_card._j_card.hide(),n.sign_add()})},sign_resetdate:function(){var n=new Date;this.sign_year=this.orign_year=n.getFullYear(),this.sign_month=this.orign_month=n.getMonth()+1},cal_mouseEnterOut:function(){var n=this,i=this.jq_wrap;i.find(".j_sign_replenish_button").off().on("click",function(e){e.preventDefault(),"none"==i.find(".j_succ_info").css("display")&&(n.orign_year!=n.sign_year||n.orign_month!=n.sign_month)&&(n.sign_resetdate(),n.sign_load_month(0)),window.clearInterval(n.mouseEventTimer),n.mouseEventTimer=setTimeout(function(){i.find(".j_succ_info").stop(!0,!0).show()},400)}),i.find(".j_signbtn,.j_succ_info").die().live({mouseout:function(){window.clearInterval(n.mouseEventTimer),n.mouseEventTimer=window.setTimeout(function(){i.find(".j_succ_info").fadeOut("slow")},200)},mouseover:function(){"none"==i.find(".j_succ_info").css("display")&&(n.orign_year!=n.sign_year||n.orign_month!=n.sign_month)&&(n.sign_resetdate(),n.sign_load_month(0)),window.clearInterval(n.mouseEventTimer),n.mouseEventTimer=setTimeout(function(){i.find(".j_succ_info").stop(!0,!0).show()},400)}})},cal_mouseEventRemove:function(){window.clearInterval(self.mouseEventTimer),this.jq_wrap.find(".j_signbtn,.j_succ_info").die()},sign_add:function(n){var i=this,e={kw:$.tb.escapeHTML(PageData.forum.name),tbs:PageData.tbs,ie:"utf-8"};$.extend(e,n),this.jq_wrap.find(".j_signbtn").removeClass("j_cansign").addClass("signstar_ing"),$.tb.post(i.sign_url,e,function(n){if(n&&1990055==n.no)i.jq_wrap.find(".j_signbtn").removeClass("signstar_ing").addClass("j_cansign"),$.tb.checkRealName();else if(!n||0!=n.no&&1104!=n.no)if(n&&2150040==n.no){var e=i.MODULE.requireInstance("tbui/widget/CaptchaDialog",[{message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\u5b8c\u6210\u7b7e\u5230",vCode:n.data.captcha_vcode_str,vCodeType:n.data.captcha_code_type,title:"\u7b7e\u5230",forumName:"",forumId:"",checkUrl:"/sign/checkVcode",vCodeUrl:"/sign/getVcode",paramsCallback:function(){return{tbs:PageData.tbs}}}]);e.bind("onaccept",function(){i.sign_add({captcha_input_str:e.getInputValue(),captcha_vcode_str:e.getVCode()})}),e.bind("onclose",function(){i.jq_wrap.find(".j_signbtn").removeClass("signstar_ing").addClass("j_cansign")}),e.show()}else{setTimeout(function(){i.jq_wrap.find(".j_signbtn").removeClass("signstar_ing").addClass("j_cansign")},1e4);var s=new Date;if(s.setTime(s.getTime()+1e4),$.cookie("sign_not_now",!0,{expires:s}),1007==n.no){var t=i.jq_wrap.find(".j_signbtn");t.removeClass().addClass("j_signbtn signstar_full")}else new $.dialog({html:"<div class='signmod_likeandsign_dialog'>"+(i._resignMap[n.no]||n.error)+"</div>",holderClassName:"passportDialog",title:"\u7b7e\u5230\u5931\u8d25",draggable:!1,width:338,height:87})}else{var a=n.data.uinfo,r=new Date(a.sign_time);i.sign_year=i.orign_year=r.getFullYear(),i.sign_month=i.orign_month=r.getMonth()+1,i.sign_load_month(1),i.options.isActivitySign&&$.tb.location.reload()}},"json")},sign_load_month:function(n,i,e){var s=this;$.tb.get(s.get_url,{kw:$.tb.escapeHTML(PageData.forum.name),ie:"utf-8",sign_y:i,sign_m:e,t:Math.random()},function(t){if(t&&0==t.no){s.jq_wrap.find(".j_signin_index").html(t.data.sign_user_info.rank),s.jq_wrap.find(".j_succ_text").html(s.succ_text(s.options.signForumInfo&&s.options.signForumInfo.current_rank_info.sign_rank,t.data.sign_user_info.rank,s.options.signForumInfo.forum_info&&s.options.signForumInfo.forum_info.level_1_dir_name,t.data.sign_user_info.sign_keep)),s.jq_wrap.find(".j_sign_succ_keep").html(t.data.sign_user_info.sign_keep),s.jq_wrap.find(".j_sign_succ_count").html(t.data.sign_user_info.sign_total),s.setReplenishInfo(t),$(".j_sign_month_lack_days").text(t.data.resign_info.mon_miss_sign_num),i&&e||(s.sign_resetdate(),s.set_sign_calendar(t)),s.signShai(t),s.check_rights_status(t.data.sign_user_info.sign_keep);var a=s.jq_wrap.find(".j_signbtn"),r=s.jq_wrap.find(".j_sign_box");if(r[0]&&r.addClass("sign_box_bright_signed"),a.removeClass().addClass("j_signbtn signstar_signed"),n){var _=t.data.sign_user_info.sign_keep;s.jq_wrap.find(".j_succ_info").show(),a.append('<span class="sign_keep_span">\u8fde\u7eed'+_+"\u5929</span>"),(30==_||100==_)&&s.sign_100({username:PageData.user.name,forumname:PageData.forum.name,memberCount:s.options.memberNumber,memberTitle:s.options.memberTitle,continueSign:_});var o={normal:[2,4],baidubrowser:[3,5],member:[8,10],seniormember:[12,14]},g=_>1?1:0,l="normal";try{l="baidubrowser.tieba"==window.external.GetVersion("version")?"baidubrowser":"normal"}catch(d){}if(PageData.user.mParr_props&&PageData.user.mParr_props.level){var c=PageData.user.mParr_props.level;1e3*c.end_time>+new Date&&(l=2==c.props_id?"seniormember":1==c.props_id?"member":"normal")}var u='<div style="position:absolute;"><div class="sign_plus_two">+'+o[l][g]+" \u7ecf\u9a8c</div></div>";s.options.isLike&&!s.options.isBlock&&(s.jq_wrap.find(".signed_day:last").append(u),setTimeout(function(){$(".sign_plus_two").show().animate({opacity:0,top:"-=20"},2500,function(){$(this).parent().remove()})},1e3)),"member"==l||"seniormember"==l?s.jq_wrap.find(".signed_day:last").removeClass("signed_day").addClass("signed_member_anime"):s.jq_wrap.find(".signed_day:last").removeClass("signed_day").addClass("signed_anime_day")}else s.jq_wrap.find(".j_sign_btn_keep").text(_);s.cal_mouseEnterOut()}},"json")},setReplenishInfo:function(n){var i=this.jq_wrap.find(".j_succ_info"),e=this.jq_wrap.find(".sign_keep_span"),s=0;e.length>0&&e.text("\u8fde\u7eed"+n.data.sign_user_info.sign_keep+"\u5929");var t=n.data.resign_info;s=this.resign_card_num=t.resign_card_num,$(".rpln_card_wrap").removeClass("rpln_card_wrap_2 rpln_card_wrap_3"),t.resign_card_num<=9||(t.resign_card_num>9&&t.resign_card_num<100?$(".rpln_card_wrap").addClass("rpln_card_wrap_2"):(s="99+",$(".rpln_card_wrap").addClass("rpln_card_wrap_3"))),i.find(".j_rpln_card_count").text(s),0==t.mon_miss_sign_num?this.jq_wrap.find(".j_need_rpln_wrap").text("\u672c\u6708\u5b8c\u7f8e\u7b7e\u5230"):this.jq_wrap.find(".j_need_rpln_wrap").html('\u672c\u6708\u6f0f\u7b7e<span class="j_lack_sign_monthly_count sign_num">'+t.mon_miss_sign_num+"</span>\u6b21")},refresh_sign_rank:function(){var n={kw:$.tb.escapeHTML(PageData.forum.name),ie:"utf-8",tbs:PageData.tbs};$.tb.get(this.sign_forum,n,function(n){var i=!1;try{var e=n}catch(s){i=!0}i||e&&0==e.no&&($(".j_today_signnum").html(e.data.forum_info.current_rank_info.sign_count),$(".j_signrank_index").html(e.data.forum_info.current_rank_info.sign_rank))})},show_block_sign_dialog:function(){var n=new $.dialog({html:"<div class='signmod_likeandsign_dialog'>\u5728\u672c\u5427\u7b7e\u5230\u9700\u8981\u5148\u6210\u4e3a\u4f1a\u5458\u54e6~\u52a0\u5165\u6211\u4eec\u5427\uff01</div><div class='signmod_likeandsign_btnzone'><input class='signmod_confirm_btn j_sign_confirm' type='button' value='\u77e5\u9053\u4e86' /></div>",holderClassName:"passportDialog",title:"\u672c\u5427\u7b7e\u5230",draggable:!1,width:338,height:87});$(n.element[0]).find(".j_sign_confirm").click(function(){n.close()})},succ_text:function(n,i,e,s){if(s){if(9==s)return"\u4fdd\u6301\u8fde\u7eed\u7b7e\u5230\u5373\u53ef\u83b7\u5f97\u53d1\u8d34\u5b57\u4f53\u52a0\u7c97\u529f\u80fd\uff0c\u660e\u5929\u4e0d\u8981\u5fd8\u4e86\u6765\u7b7e\u5230\u54e6\u3002";if(10==s)return"\u606d\u559c\u83b7\u5f97\u53d1\u8d34\u5b57\u4f53\u52a0\u7c97\u529f\u80fd\uff0c\u53d1\u8d34\u70ab\u8000\u5427\uff01\u4fdd\u6301\u8fde\u7eed\u7b7e\u5230\u54e6~";if(19==s)return"\u4fdd\u6301\u8fde\u7eed\u7b7e\u5230\u5373\u53ef\u83b7\u5f97\u53d1\u8d34\u5b57\u4f53\u53d8\u7ea2\u529f\u80fd\uff0c\u660e\u5929\u4e0d\u8981\u5fd8\u4e86\u6765\u7b7e\u5230\u54e6\u3002";if(20==s)return"\u606d\u559c\u83b7\u5f97\u53d1\u8d34\u5b57\u4f53\u53d8\u7ea2\u529f\u80fd\uff0c\u53d1\u8d34\u70ab\u8000\u5427\uff01\u4fdd\u6301\u8fde\u7eed\u7b7e\u5230\u54e6~";if(29==s)return"\u5df2\u8fde\u7eed\u7b7e\u523029\u5929\uff0c\u660e\u65e5\u7b7e\u5230\u5373\u53ef\u83b7\u5f97ID\u7ea2\u8272\u9ad8\u4eae\u6548\u679c\uff0c\u4e0d\u8981\u5fd8\u4e86\u54e6~";if(30==s)return"\u606d\u559c\u4f60\u83b7\u5f97ID\u7ea2\u8272\u9ad8\u4eae\u6548\u679c\uff0c\u8d76\u7d27\u53d1\u8d34\u70ab\u8000\u5427\u3002\u4fdd\u6301\u8fde\u7eed\u7b7e\u5230\u54e6~"}var t;if(10>=i)switch(parseInt(i)){case 1:t="\u606d\u559c\u4f60\u62a2\u5f97\u672c\u5427\u4eca\u65e5\u7b7e\u5230\u7b2c1\u540d\uff0c\u8d76\u7d27\u622a\u56fe\u7559\u5ff5\u5427~~";break;case 2:t="\u672c\u5427\u4eca\u65e5\u7b7e\u5230\u7b2c1\u4eba\u88ab\u62a2\u8d70\u4e86\u2026\u2026\u660e\u5929\u518d\u6765\u65e9\u4e00\u70b9\u5427~";break;default:t="\u606d\u559c\u4f60\u540d\u5217\u672c\u5427\u4eca\u65e5\u7b7e\u5230\u524d10\uff0c\u83b7\u5f97\u201c\u672c\u5427\u5fe0\u8bda\u5427\u53cb\u201d\u79f0\u53f7~"}else if(100==i)t="\u54a6\uff0c\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u8e29\u5230100\u4e86\uff0c\u4eca\u5929\u4f1a\u6709\u597d\u8fd0\u6c14\u5594~";else if(250==i)t="\u8bf7\u5728\u5fc3\u4e2d\u9ed8\u5ff53\u904d\uff1a\u6211\u4e0d\u662f250\u6211\u4e0d\u662f250\u6211\u4e0d\u662f250\u2026\u2026";else if(1e3==i)t="\u524d\u9762999\u4eba\u7684\u7ecf\u8fc7\uff0c\u53ea\u4e3a\u4e86\u6210\u5168\u4f60\u7684\u5706\u6ee1\u2026\u2026";else if(1e4==i)t="\u80fd\u8e29\u5230\u5982\u6b64\u5927\u6574\u5b9e\u5728\u662f\u4eba\u54c1\u7206\u68da\u554a\uff01\u53ef\u4ee5\u51fa\u95e8\u4e70\u5f69\u7968\u4e86~";else if(100>=n)switch(parseInt(n)){case 1:t="\u672c\u5427\u7b2c\u4e00\u7684\u5730\u4f4d\uff0c\u53c8\u7a33\u5b9a\u4e86\u7a33\u5b9a\u4e86\u7a33\u5b9a\u4e86\u2026\u2026";break;case 2:t="\u672c\u5427\u79bb\u7b2c\u4e00\u540d\u53c8\u8fd1\u4e86\u4e00\u70b9\u70b9\u70b9\u70b9\uff0c\u52a0\u6cb9\uff01";break;case 3:t="\u4fdd\u6301\u524d\u4e09\u540d\u4e0d\u5bb9\u6613\uff0c\u8bb0\u5f97\u660e\u5929\u8981\u6765\u7b7e\u5230\u54e6~~";break;default:t=10>=n?"\u524d\u5341\u540d\u7ade\u4e89\u6fc0\u70c8\uff0c\u8bb0\u5f97\u6bcf\u5929\u90fd\u6765\u7b7e\u5230\u54e6~":30>=n?"\u79bb\u524d\u5341\u540d\u8fd8\u6709\u4e9b\u8ddd\u79bb\uff0c\u5927\u5bb6\u6765\u5f97\u66f4\u52e4\u5feb\u4e9b\u5427~":"\u4e00\u767e\u5f3a\u7684\u5730\u4f4d\u9700\u8981\u5927\u5bb6\u7684\u5171\u540c\u52aa\u529b\uff0c\u52a0\u6cb9\uff01"}else t="\u8bb0\u5f97\u660e\u5929\u8981\u6765\u7b7e\u5230\u54e6\uff0c\u5e2e\u672c\u5427\u63d0\u5347\u6392\u540d~";return t},set_sign_calendar:function(n,i,e,s){function t(n){for(var i=n.data.sign_user_info.sign_month,e=["\uff0c\u7b7e\u5230\u7ecf\u9a8c+2\uff0c\u8fde\u7eed\u7b7e\u5230+4","\uff0c\u624b\u673a\u7b7e\u5230\u7ecf\u9a8c+3\uff0c\u8fde\u7eed\u7b7e\u5230+5","\uff0c\u767e\u5ea6\u6d4f\u89c8\u5668\u7b7e\u5230\u7ecf\u9a8c+3\uff0c\u8fde\u7eed\u7b7e\u5230+5","\uff0c\u767e\u5ea6\u624b\u673a\u6d4f\u89c8\u5668\u7b7e\u5230\u7ecf\u9a8c+4\uff0c\u8fde\u7eed\u7b7e\u5230+6","\uff0c\u7b7e\u5230\u7ecf\u9a8c+6\uff0c\u8fde\u7eed\u7b7e\u5230+8","\uff0c\u4f7f\u7528\u4f1a\u5458\u7b7e\u5230\u7ecf\u9a8c+8\uff0c\u8fde\u7eed\u7b7e\u5230+10","\uff0c\u4f7f\u7528\u9ad8\u7ea7\u4f1a\u5458\u7b7e\u5230\u7ecf\u9a8c+12\uff0c\u8fde\u7eed\u7b7e\u5230\u7ecf\u9a8c+14",""],s=0;s<i.length;s++){var t=i[s],a=t.t,g=a.substr(0,a.indexOf(":")),l=a.substr(a.indexOf(":")+1),d="\u4e8e"+g+"\u70b9"+l+"\u5206\uff0c\u7b2c"+t.rank+"\u4e2a\u7b7e\u5230";"00"==g&&"00"==l&&""==t.rank&&(d="\u989d\uff0c\u670d\u52a1\u5668\u8fd9\u5929\u6253\u76f9\u4e86\uff0c\u6ca1\u8bb0\u4f4f\u4f60\u662f\u51e0\u70b9\u7b7e\u5230\u7684\uff0c\u62b1\u6b49...");var c=parseInt(t.d);_.push(c);var u="signed_day",p=7;switch(t.sign_type){case"pc":p=0,u="signed_day";break;case"mobile":p=1,u="signed_mob_day";break;case"brs":p=2,u="signed_day";break;case"mobile_brs":p=3,u="signed_mob_day";break;case"mobile_client":p=4,u="signed_mob_day";break;case"member":p=5,u="signed_member";break;case"senior_member":p=6,u="signed_member"}var h=d+e[p];1==o.options.isBlock&&(u="",h=d+"\uff0c\u60a8\u5f53\u524d\u5df2\u88ab\u5c01\u7981\uff0c\u6682\u65e0\u7b7e\u5230\u7ecf\u9a8c"),t.is_resign&&(u="signed_rpln_day",h="\u8865\u7b7e\u6210\u529f\uff0c\u8865\u7b7e\u7ecf\u9a8c+"+t.sign_score),n.data.is_detail||(u="sign_gray",h=""),r.find(".j_d_"+c).addClass(u).tbattr({title:h})}}function a(){var n=r.find(".j_canlerdar_days"),i=n.find("td").filter(function(){return!$(this).hasClass("emptyDate")});if(i.each(function(n){var i=new Date(o.sign_year,o.sign_month-1,n+1);$.inArray(n+1,_)<0&&i<o.getEnvInitialTime()&&i>=Math.max(o.rpln_available_time,o.getEnvInitialTime()-2592e6)&&($(this).addClass("unsigned_day"),$.browser.mozilla&&$(this).children(".mozilla_td_hack").length<1&&$(this).append('<div class="mozilla_td_hack" style="position:absolute"></div>'))}),n.off().on("mouseenter",".unsigned_day",function(){$(this).addClass("unsigned_day_hover")}).on("mouseleave",".unsigned_day",function(){$(this).removeClass("unsigned_day_hover"),o.rplnBubble&&o.rplnBubble.closeBubble()}).on("click",".unsigned_day",function(){o.delReplenishSignGuide(),o.replenishSign($(this))}),"1"!==$.cookie("rpln_guide")){var e=i.filter(".unsigned_day").last();if(e.length>0){var s=parseInt(e.text()),t=new Date(o.sign_year,o.sign_month-1,s);t>=o.rpln_available_time&&(e.addClass("rpln_guide_day"),o.setReplenishSignGuide(e.parent().index()),$.cookie("rpln_guide","1",{expires:1e3}))}}}var r=this.jq_wrap,_=[],o=this;(""==i||"undefined"==typeof i)&&(i=this.sign_year),(""==e||"undefined"==typeof e)&&(e=this.sign_month),"undefined"!=typeof s&&(s=parseInt(s),0>s?(e-=1,0==e&&(i-=1,e=12)):s>0&&(e+=1,13==e&&(i+=1,e=1)));var g,l,d,c;g=new Date(i,e-1,1),l=new Date(i,e,0),d=g.getDay(),c=l.getDate(),r.find(".j_5, .j_6").css({display:"none"});for(var u=1;32>u;u++)r.find(".j_d_"+u).removeClass(function(n,i){var e=i.split(" ");return e.shift(),e.join(" ")}).tbattr({title:""});for(var p=0;7>p;p++)r.find(".j_1_"+p+", .j_5_"+p+", .j_6_"+p).html("&nbsp;").addClass("emptyDate");for(var h=1,p=d,u=1;c>0;p++,c--,u++)7==p&&(p=0,h++),5==h&&r.find(".j_5").css({display:""}),6==h&&r.find(".j_6").css({display:""}),r.find(".j_"+h+"_"+p).addClass("j_d_"+u).html(u).removeClass("emptyDate");this.sign_year=i,this.sign_month=e,"undefined"!=typeof n&&""!=n?(t(n),a(n)):$.tb.get(this.get_url,{kw:$.tb.escapeHTML(PageData.forum.name),ie:"utf-8",sign_y:i,sign_m:e},function(n){return n&&0==n.no?(t(n),o.setReplenishInfo(n),a(n),void 0):(alert(n.no),void 0)},"json"),String(e).length<2&&(e+="",e="0"+e);var m=i+"\u5e74"+e+"\u6708";if(r.find(".j_calendar_month").html(m),this.sign_month==this.orign_month&&this.sign_year==this.orign_year){var b=r.find(".j_d_"+(new Date).getDate());if(b.hasClass("signed_day")||b.hasClass("signed_mob_day")||b.hasClass("signed_member"));else{var f=$(".j_signin_index").html();b.addClass("signed_day").tbattr({title:"\u4e8e"+(new Date).getHours()+"\u70b9"+(new Date).getMinutes()+"\u5206\uff0c\u7b2c"+f+"\u4e2a\u7b7e\u5230\uff0c\u7b7e\u5230\u7ecf\u9a8c+2\uff0c\u8fde\u7eed\u7b7e\u5230+4"})}}},setReplenishSignGuide:function(n){if(!this.$guide_mask){this.$guide_mask_close=$('<div class="rpln_guide_close">X</div>'),this.$guide_mask=$('<div class="rpln_guide">'),this.$guide_text=$('<div class="rpln_guide_txt">');var i=this.jq_wrap.find(".sign_succ_calendar");this.$guide_text.css("top",26*(n+1)),i.prepend(this.$guide_text).prepend(this.$guide_mask).prepend(this.$guide_mask_close),this.$guide_mask_close.on("click",$.proxy(this.delReplenishSignGuide,this))}},delReplenishSignGuide:function(){this.$guide_mask_close&&this.$guide_mask_close.remove(),this.$guide_mask&&this.$guide_mask.remove(),this.$guide_text&&this.$guide_text.remove()},getEnvInitialTime:function(){var n=new Date;return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n},replenishSign:function(n){var i,e,s,t,a,r,_,o,g=this;if(i=parseInt(n.text()),e=new Date(this.sign_year,this.sign_month-1,i),s=g.getEnvInitialTime(),t=(s-e)/864e5,a=0,2>=t)a=1;else if(10>=t)a=2;else if(20>=t)a=3;else{if(!(30>=t))throw"\u53ef\u7b7e\u5230\u5929\u6570\u4e0d\u5e94\u5927\u4e8e30\u5929";a=4}if(g.rplnBubble&&g.rplnBubble.closeBubble(),$.isNumeric(i)&&!(e>s-864e5)){var l={arrow_dir:"down",bubble_css:{top:-50,left:-61,width:143,height:53},arrow_pos:{left:70},wrap:n,closeBtn:!1};o={top:-19,left:-34,width:110,height:20},buy_arrow_pos={left:54},r='<div class="rpln_tip">\u8865\u7b7e\u672c\u6b21\u9700\u6d88\u8017<span class="rpln_card_needed_count">'+a+'\u5f20</span>\u8865\u7b7e\u5361<br><a rel="noreferrer" class="yes_btn">\u786e\u5b9a</a><a rel="noreferrer" class="cancel_btn">\u53d6\u6d88</a></div>',_='<div class="rpln_tip">\u8fd8\u9700\u8981'+parseInt(a-this.resign_card_num)+'\u5f20\u8865\u7b7e\u5361\uff0c\u53bb<a rel="noreferrer" target="_blank" class="tbmall_link" href="/tbmall/propslist?category=108">\u5546\u57ce\u8d2d\u4e70\u5427</a>>></div>',$.browser.mozilla&&(l.wrap=n.children(".mozilla_td_hack"),l.bubble_css.top=-74,o.top=-43),this.resign_card_num>=a?l.content=r:(l.content=_,l.bubble_css=o,l.arrow_pos=buy_arrow_pos),g.rplnBubble=g.MODULE.requireInstance("tbui/widget/bubble_tip",[l]),g.rplnBubble.j_bubble.on("click",".yes_btn",function(){g.isReplenishing||(g.isReplenishing=!0,$.tb.post("/sign/resign",{kw:$.tb.escapeHTML(PageData.forum.name),tbs:PageData.tbs,ie:"utf-8",sign_y:g.sign_year,sign_m:g.sign_month,sign_d:i},function(i){g.isReplenishing=!1,n.removeClass("unsigned_day_hover"),i?0==i.no||2280002==i.no?(n.removeClass("unsigned_day unsigned_day_hover").addClass("signed_rpln_anime"),g.rplnBubble.closeBubble(),g.options.isLike&&!g.options.isBlock&&(n.append('<div style="position:absolute;"><div class="sign_plus">+'+5*a+" \u7ecf\u9a8c</div></div>"),n.find(".sign_plus").show().animate({opacity:0,top:"-=20"},2500,function(){$(this).parent().remove()})),n.tbattr("title","\u4e8e"+((new Date).getMonth()+1)+"\u6708"+(new Date).getDate()+"\u65e5\u8865\u7b7e\u6210\u529f\uff0c\u8865\u7b7e\u7ecf\u9a8c+"+5*a),g.sign_load_month(0,g.sign_year,g.sign_month)):(g.rplnBubble&&g.rplnBubble.closeBubble(),l.content=g._resignMap[i.no]||"\u54ce\u5440~\u670d\u52a1\u5668\u6253\u76f9\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5~",l.bubble_css=o,l.arrow_pos=buy_arrow_pos,g.rplnBubble=g.MODULE.requireInstance("tbui/widget/bubble_tip",[l]),g.rplnBubble.showBubble()):(g.rplnBubble&&g.rplnBubble.closeBubble(),l.content="\u54ce\u5440~\u670d\u52a1\u5668\u6253\u76f9\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5~",l.bubble_css=o,l.arrow_pos=buy_arrow_pos,g.rplnBubble=g.MODULE.requireInstance("tbui/widget/bubble_tip",[l]),g.rplnBubble.showBubble())}))}).on("click",".cancel_btn",function(){n.removeClass("unsigned_day_hover"),g.rplnBubble.closeBubble()}),g.rplnBubble.showBubble()}},pvLog:function(){$("#sign_music_rank").on("click",function(){$.stats.track("music_rank","\u7b7e\u5230")})},signShai:function(n){var i=this,e=null!=navigator.userAgent.match(/iPad/i);if(void 0!=document.createElement("canvas").getContext&&!$.browser.mozilla&&!e){var s=i.MODULE.requireInstance("forum/widget/SignShai",["sign_mod",n.data.sign_user_info]);s.bind("startRender",function(){i.cal_mouseEventRemove()}),s.bind("completeRender",function(){i.cal_mouseEnterOut()})}},sign_100:function(n){var i=this;if(n){var e=new Date,s=e.getFullYear()+"\u5e74"+(e.getMonth()+1)+"\u6708"+e.getDate()+"\u65e5",t="";t="<div class='sign_100_dlg'><div class='sign_100_"+n.continueSign+"'></div><div class='sign_100_text'><div class='sign_100_close'></div><div class='sign_100_title'>\u4eb2\u7231\u7684"+n.username+"</div>",t=100==n.continueSign?t+"<div class='sign_100_content'>\u4eca\u5929\u662f\u4f60\u5728\u54b1\u4eec<span class='sign_baname_highlight'>"+n.forumname+"</span>\u5427\u7b7e\u5230\u7684<span class='rank_number'>\u7b2c"+n.continueSign+"\u5929</span>\uff0c\u503c\u5f97\u7eaa\u5ff5\u7684\u65e5\u5b50\uff0c\u6709\u6728\u6709\uff01<br/>\u65f6\u95f4\u8fc7\u5f97\u771f\u5feb\u54c8\uff0c\u4ece\u7b2c\u4e00\u6b21\u7b7e\u5230\u5230\u73b0\u5728\uff0c\u5df2\u6709"+n.continueSign+"\u4e2a\u503c\u5f97\u56de\u5473\u7684\u65e5\u65e5\u591c\u591c\u5728\u8fd9\u91cc\u7559\u5b58\u3002<br/>\u8ba9\u6211\u4eec\u611f\u5230\u5f00\u5fc3\u7684\u662f\uff0c\u4f60\u4ecd\u7136\u662f\u54b1\u4eec<span class='sign_baname_highlight'>"+n.forumname+"</span>\u5427\u7684"+n.memberCount+"\u4e2a<span class='sign_baname_highlight'>"+n.memberTitle+"</span>\u4e2d\u575a\u5b9e\u7684\u4e00\u4efd\u5b50\u3002<br/>\u4eca\u5929\uff0c\u7b7e\u5230"+n.continueSign+"\u5929\uff1b\u6b64\u540e\uff0c\u8ba9\u6211\u4eec\u4f9d\u7136\u5171\u540c\u6210\u957f\uff0c\u5e76\u5feb\u4e50\u3002<br/></div>":t+"<div class='sign_100_content'>\u77e5\u9053\u5417\uff0c\u4eca\u5929\u662f\u4f60\u5728\u54b1\u4eec<span class='sign_baname_highlight'>"+n.forumname+"</span>\u5427\u7b7e\u5230\u7684<span class='rank_number'>\u7b2c"+n.continueSign+"\u5929</span>\uff0c\u6574\u6574\u4e00\u4e2a\u6708\u5566\uff01<br/>\u65f6\u95f4\u8fc7\u5f97\u633a\u5feb\u7684\u54c8\uff0c\u4ece\u4f60\u7b2c\u4e00\u6b21\u5230\u672c\u5427\u7b7e\u5230\uff0c\u70b9\u4e0e\u4e0d\u70b9\u95f4\uff0c\u5728\u8d34\u5427\u5ea6\u8fc7\u4e86"+n.continueSign+"\u4e2a\u7f8e\u597d\u7684\u65e5\u5b50\u3002<br/>\u4eca\u540e\u7684\u8def\u8fd8\u957f\u7740\u5462\uff0c\u8877\u5fc3\u5e0c\u671b\u4f60\u5728<span class='sign_baname_highlight'>"+n.forumname+"</span>\u5427\u7684\u6bcf\u4e00\u5929\u90fd\u80fd\u5f00\u5fc3\uff0c\u4e0e\u5168\u4f53\u5427\u53cb\u4eec\u76f8\u77e5\u76f8\u7231\u3002<br/>\u4eca\u5929\uff0c\u7b7e\u5230\u6ee1\u6708\uff1b\u6b64\u540e\uff0c\u8ba9\u6211\u4eec\u4f9d\u7136\u5171\u540c\u6210\u957f\u3002<br/></div>",t=t+"<div class='sign_100_message'><a rel='noreferrer' href='/i/sys/jump?un=%CC%F9%B0%C9%C7%A9%B5%BD%D0%A1%C3%D8%CA%E9' target='_blank'>\u8d34\u5427\u7b7e\u5230\u5c0f\u79d8\u4e66</a><img src='//tb2.bdstatic.com/tb/img/itieba_vip.gif' title='\u8d34\u5427\u5b9e\u540d\u8ba4\u8bc1' class='verified_icon'>&nbsp;&nbsp;&nbsp;&nbsp;"+s+"&nbsp;&nbsp;&nbsp;&nbsp;<button class='j_sign_100_shai sign_100_shai_btn'>&nbsp;</button></div></div></div>";var a=new $.dialog({html:t,holderClassName:"sign_100_wapper",width:"681",showTitle:!1});$(a.element[0]).find(".sign_100_close").click(function(){a.close()});var r=null!=navigator.userAgent.match(/iPad/i);if(void 0!=document.createElement("canvas").getContext&&!$.browser.mozilla&&!r){$(".j_sign_100_shai").show();var _=i.MODULE.requireInstance("forum/widget/sign100",["dialogJbody",n.continueSign]);_.bind("completeRender",function(){a.close()})}}},sign_right_tips:function(n){for(var i=[],e=[],s=[],n=0;5>n;n++)i.push(this.pageUnitData["sign_mod_tiptitle"+(n+1)]),e.push(this.pageUnitData["sign_mod_tiptext"+(n+1)]),s.push(this.pageUnitData["sign_mod_tipcondition"+(n+1)]);$(".j_sign_rights").css("position","relative").css("z-index","1");var t=[43,77,114,145,175],a=n+1,r={icon:"sign_big_icon_"+a,title:i[n],text:e[n],condition:s[n],position_right:13,arr_right:t[n]},_={content:"<div class='sign_rights_tip'><div class='sign_rights_top clearfix'><div class='sign_rights_big_icon "+r.icon+"'></div><div class='sign_rights_text_wapper'><div class='sign_rights_title'>"+r.title+"</div><div class='sign_rights_title_text'>"+r.text+"</div></div></div><div class='sign_rights_popline'></div><div class='sign_rights_condition'>"+r.condition+"</div></div>",arrow_dir:"up",bubble_css:{top:35,right:r.position_right,width:250,"z-index":9999},arrow_pos:{left:r.arr_right},attr:" ",wrap:$(".j_sign_rights"),closeBtn:!1};if(null===this.rights_tips[n]){var o=this.MODULE.requireInstance("tbui/widget/bubble_tip",[_]);o.showBubble(),this.rights_tips[n]=o}else this.rights_tips[n].showBubble()},check_rights_status:function(n){$(".j_sign_rights_icon:eq(0)").addClass("rights_get"),n>=2&&$(".j_sign_rights_icon:eq(1)").addClass("rights_get"),n>=10&&$(".j_sign_rights_icon:eq(2)").addClass("rights_get"),n>=20&&$(".j_sign_rights_icon:eq(3)").addClass("rights_get"),n>=30&&$(".j_sign_rights_icon:eq(4)").addClass("rights_get")}}}});