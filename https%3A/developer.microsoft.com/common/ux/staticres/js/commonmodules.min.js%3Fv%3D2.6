function baselineMiddle(n){var t=n,r=t.outerHeight(!0),i=parseInt(t.css("max-height"));i&&r<i?t.css("margin-top","-8px"):t.css("margin-top","")}function decideTabSizes(){var i=$("#nav-tabs-v2").outerWidth(),n=$("body").width(),r,e,o,s,h;if($(window).width()>=898&&(n=$("#common-focusNav").length?$("body").outerWidth()-$(".onedash-side-navigation").width()-300:$("body").outerWidth()-$(".onedash-side-navigation").width()),i>=n){r=1;$("#moreFlightTabButton").length>0&&(r=2);var f=$("#nav-tabs-v2 > li").size()-r,u=n-$("#newFlightTabButton").outerWidth()-69,t=u/f;t>96?$("#nav-tabs-v2 li.section-tab").css("width",t+"px"):($("#nav-tabs-v2 li.section-tab").css("width","96px"),$("#moreFlightTabButton").length===0&&(e='<li id="moreFlightTabButton"><button><span class="win-icon win-icon-DoubleChevronDown20"><\/span><\/button><div id="tabSpillover"><ul id="overflowTabs"><\/ul><\/div><\/li>',$("#nav-tabs-v2 li:last").prev().after(e)),o=Math.floor(u/96),s=$("#nav-tabs-v2 li:nth-child("+o+")").nextUntil("li#moreFlightTabButton").detach(),$(s).prependTo("#tabSpillover ul#overflowTabs"))}else if($("#moreFlightTabButton").length>0&&n-i>96)h=Math.floor((n-i)/96),$("#overflowTabs li").slice(0,h).insertBefore("#moreFlightTabButton"),$("#overflowTabs li").length===0&&$("#moreFlightTabButton").remove();else if($("#moreFlightTabButton").length===0&&n>i&&$("#nav-tabs-v2 > li").width()!==190){var f=$("#nav-tabs-v2 > li").size()-1,u=n-$("#newFlightTabButton").outerWidth()-69,t=u/f;t>=190?$("#nav-tabs-v2 li.section-tab").removeAttr("style"):t>96&&$("#nav-tabs-v2 li.section-tab").css("width",t+"px")}}function createNewTab(n,t){var i='<li role="pivot" class="section-tab active"><a href="#'+n+'" aria-controls="'+n+'" role="tab" data-toggle="tab" title="'+t+'">'+t+'<\/a><div class="section-tab-menu-button"><div class="section-tab-menu dropdown-menu-shadow"><\/div><\/div><\/li>',r='<div role="tabpanel" class="tab-pane active" id="'+n+'"><\/div>';$("#nav-tabs-v2 li.section-tab.active").removeClass("active");$("#tab-content-v2 div.tab-pane.active").removeClass("active");$("#moreFlightTabButton").length===0?$("#nav-tabs-v2 li:last").prev().after(i):$(i).appendTo("#tabSpillover ul#overflowTabs");$("#tab-content-v2").append(r);decideTabSizes()}function setPositionAndHeightOfTabSpillover(){var t=$(window).height(),n=$("#moreFlightTabButton").offset().top+31,i=t-n;$("#tabSpillover").css({height:i,top:n})}function ShouldShowCommandBarAppPicker(){return!1}function ShouldShowOfficeCommandBarAppPicker(){var n=window.location.href,t=new RegExp("/dashboard/analytics/office/","ig");return t.test(n)&&setOrGetProductIdFromSession()?!0:!1}function ShouldShowWin32AppPicker(){var n=window.location.href;return(new RegExp("/dashboard/analytics/reports/desktop/health","ig").test(n)||new RegExp("/dashboard/analytics/reports/desktop/installbase","ig").test(n)||new RegExp("/dashboard/analytics/reports/desktop/blockhits","ig").test(n))&&setOrGetProductIdFromSession()?!0:!1}function ShouldShowXdpAppPicker(){var n=window.location.href,t=new RegExp("/dashboard/analytics/reports/xdp/","ig");return t.test(n)&&!new RegExp("/dashboard/analytics/reports/xdp/overview","ig").test(n)&&setOrGetProductIdFromSession()?!0:!1}function ShouldShowLeftNavAppPicker(n){if(n!==undefined&&n||$("devcenter-nav").length>0&&$(".col-xs-6.leftMenu").is(":visible")||$("#common-focusNav").length){var t=window.location.href;if(!new RegExp("/dashboard/account/","ig").test(t)&&!new RegExp("/dashboard/accountenterprise","ig").test(t)&&!new RegExp("/dashboard/tcs","ig").test(t)&&!new RegExp("/commerce/setuppayout","ig").test(t)&&!new RegExp("/xboxdevices","ig").test(t)&&!new RegExp("/xboxtestaccounts","ig").test(t)&&!new RegExp("/xboxconfig/webservices","ig").test(t)&&!new RegExp("/xboxconfig/relyingparties","ig").test(t)&&!new RegExp("/xboxconfig/devices","ig").test(t)&&!new RegExp("/dashboard/sandboxes","ig").test(t)&&!new RegExp("/engagement/insiderprogram","ig").test(t)&&!new RegExp("/engagement/partnerdashboardpreview","ig").test(t)&&!new RegExp("/engagement/messagecenter","ig").test(t)&&!new RegExp("/engagement/preference","ig").test(t)&&!new RegExp("/engagement/insiderpreview/learnmore","ig").test(t)&&!new RegExp("/dashboard/hardware","ig").test(t)&&!new RegExp("/engagement/submittedfeedback","ig").test(t)&&!new RegExp("/analytics/office/usage","ig").test(t)&&!new RegExp("/commerce/customers/createcustomer","ig").test(t)&&!new RegExp("/pcv/","ig").test(t)&&!new RegExp("/internal/tools/storemanagement/","ig").test(t)&&setOrGetProductIdFromSession())return!0}return!1}function IsAddonPicker(){return $(".onedash-breadcrumb-container").length>0&&$(".onedash-breadcrumb-container").is(":visible")?(showBreadcrumb(),!0):!1}function showBreadcrumb(){$(".leftnav-app-picker").addClass("breadcrumb-top");$(".leftMenu.leftmenu-app-picker.focusNavWrapper").addClass("breadcrumb-top");$(document.body).css("direction")=="rtl"&&($(".onedash-breadcrumb-icon").removeClass("win-icon-Back"),$(".onedash-breadcrumb-icon").addClass("win-icon-Forward"));$(".onedash-breadcrumb-container").show()}function hideBreadcrumb(){$(".onedash-breadcrumb-container").hide();$(".leftnav-app-picker").removeClass("breadcrumb-top");$(".leftMenu.leftmenu-app-picker.focusNavWrapper").removeClass("breadcrumb-top")}function ShouldShowLeftNavHardwareAppPicker(){if($("devcenter-nav").length>0&&$(".col-xs-6.leftMenu").is(":visible")||$("#common-focusNav").length){var n=window.location.href;if((new RegExp("/dashboard/hardware/driver/","ig").test(n)||new RegExp("/dashboard/hardware/analytics","ig").test(n))&&setOrGetProductIdFromSession())return!0}return!1}function ShouldShowLeftNavHardwareIotAppPicker(){if($("devcenter-nav").length>0&&$(".col-xs-6.leftMenu").is(":visible")||$("#common-focusNav").length){var n=window.location.href;if((new RegExp("/dashboard/hardware/iot/device-overview/","ig").test(n)||new RegExp("/dashboard/hardware/iot/device/","ig").test(n)||new RegExp("/dashboard/hardware/iot/ocp/","ig").test(n))&&setOrGetProductIdFromSession())return!0}return!1}function ShouldShowLeftNavCSPCustomersAppPicker(){if($("devcenter-nav").length>0&&$(".col-xs-6.leftMenu").is(":visible")||$("#common-focusNav").length){var n=window.location.href;if((new RegExp("/commerce/customers/","ig").test(n)||new RegExp("/pcv/customers/","ig").test(n)||new RegExp("/dashboard/analytics/customeranalytics","ig").test(n))&&!new RegExp("/commerce/customers/createcustomer","ig").test(n)&&!new RegExp("/commerce/customers/newcustomercatalog","ig").test(n)&&!new RegExp("/commerce/customers/newcustomercartsubmit","ig").test(n))return sessionStorage.setItem("commonux:customerid",getCustomerIdfromUrl(window.location.href)),!0}return!1}function recalculateProductUrl(n,t){var i=window.location.href;return i&&(regexp=t?new RegExp(t,"ig"):null,t&&regexp.test(i))?$("#onedash-commandbar").length>0?i.replace(regexp,n.bigId):productOverviewUrl(n):i}function recalculateCustomerUrl(n,t){var i=window.location.href;return i&&(regexp=t?new RegExp(t,"ig"):null,t&&regexp.test(i))?CSPCustomersOverviewUrl(n):i}function productOverviewUrl(n){return overviewUrl="/"+window.commandBar.locale+"/dashboard/products/"+n.bigId+"/overview"}function hardwareProductOverviewUrl(n){return"/"+window.commandBar.locale+"/dashboard/hardware/driver/"+n.bigId}function hardwareIotDeviceOverviewUrl(n){return"/"+window.commandBar.locale+"/dashboard/hardware/iot/device-overview/"+n.bigId}function CSPCustomersOverviewUrl(n){var t=window.location.href,i;return t&&(i=/[0-9a-zA-Z]+\/analytics\/customeranalytics+\?+[a-zA-Z0-9]+/i,i.test(t))?"/"+window.commandBar.locale+"/dashboard/analytics/customeranalytics?customerId="+n.bigId:"/"+window.commandBar.locale+"/commerce/customers/"+n.bigId+"/account"}function nopProductOverviewUrl(){return"javascript:void(0)"}function InitializeAppPicker(n){var t,i,r;if(window.commandBar){if(!ShouldShowLeftNavCSPCustomersAppPicker()&&devCenterSellerAccountId==="0"){defaultLeftNavTitle();return}t="/"+window.commandBar.locale+"/dashboard/api/v1/products/base?timezoneOffsetInMinutes="+(new Date).getTimezoneOffset();i="/"+window.commandBar.locale+"/dashboard/api/v1/cache/products/base?timezoneOffsetInMinutes="+(new Date).getTimezoneOffset();ShouldShowCommandBarAppPicker()?window.commandBar.InitializeCommandBarAppPicker(i,t,null,"commonux:productlist",setOrGetProductIdFromSession,recalculateProductUrl,productOverviewUrl,!1):ShouldShowLeftNavCSPCustomersAppPicker()?(r=$("#NationalCloud").val(),i="/"+window.commandBar.locale+"/common/ux/api/leftnavapi/customers"+(r?"/"+r:""),t=null,window.commandBar.InitializeLeftNavAppPicker(i,t,null,"commonux:customerlist",setOrGetCustomerIdFromSession,recalculateCustomerUrl,CSPCustomersOverviewUrl,!0)):ShouldShowOfficeCommandBarAppPicker()?(i="/"+window.commandBar.locale+"/dashboard/api/v1/foreigncatalog/products?timezoneOffsetInMinutes="+(new Date).getTimezoneOffset()+"&typeFilter=Office",t=null,window.commandBar.InitializeCommandBarAppPicker(i,t,null,"commonux:officeProductlist",setOrGetProductIdFromSession,recalculateProductUrl,nopProductOverviewUrl,!0)):ShouldShowWin32AppPicker()?(i="/"+window.commandBar.locale+"/dashboard/api/v1/foreigncatalog/products?timezoneOffsetInMinutes="+(new Date).getTimezoneOffset()+"&typeFilter=Win32",t=null,window.commandBar.InitializeLeftNavAppPicker(i,t,null,"commonux:win32Productlist",setOrGetProductIdFromSession,recalculateProductUrl,nopProductOverviewUrl,!0)):ShouldShowXdpAppPicker()?(i="/"+window.commandBar.locale+"/dashboard/api/v1/foreigncatalog/products?timezoneOffsetInMinutes="+(new Date).getTimezoneOffset()+"&typeFilter=ERA",t=null,window.commandBar.InitializeLeftNavAppPicker(i,t,null,"commonux:xdpProductlist",setOrGetProductIdFromSession,recalculateProductUrl,nopProductOverviewUrl,!0)):ShouldShowLeftNavAppPicker(n)?IsAddonPicker()?(i="/"+window.commandBar.locale+"/dashboard/api/v1/products/"+getProductIdFromUrl($(".onedash-breadcrumb-container a:first-child").first().attr("href"))+"/addons",t=null,window.commandBar.InitializeLeftNavAppPicker(i,t,null,"commonux:addonlist",setOrGetProductIdFromSession,recalculateProductUrl,productOverviewUrl,!1)):window.commandBar.InitializeLeftNavAppPicker(i,t,null,"commonux:productlist",setOrGetProductIdFromSession,recalculateProductUrl,productOverviewUrl,!1):ShouldShowLeftNavHardwareAppPicker()?(i="/"+window.commandBar.locale+"/dashboard/hardware/driver/0/LeftNav",t=null,window.commandBar.InitializeLeftNavAppPicker(i,t,null,"commonux:hwproductlist",setOrGetProductIdFromSession,recalculateProductUrl,hardwareProductOverviewUrl,!0)):ShouldShowLeftNavHardwareIotAppPicker()?(i="/"+window.commandBar.locale+"/dashboard/hardware/iot/api/device",t=null,window.commandBar.InitializeLeftNavAppPicker(i,t,null,"commonux:hwiotproductlist",setOrGetProductIdFromSession,recalculateProductUrl,hardwareIotDeviceOverviewUrl,!0)):$(".leftMenu")[0]&&tries<maxTries?(setTimeout(InitializeAppPicker,500),++tries):defaultLeftNavTitle()}}function defaultLeftNavTitle(){$("#appInfoControl")[0]&&$("#appInfoControl").removeClass("hidden");$("#leftnav-apppicker")[0]&&$("#leftnav-apppicker").addClass("hidden");$("#commandbar-apppicker")[0]&&$("#commandbar-apppicker").addClass("hidden");$("#onedash-commandbar")[0]&&!$(".command-bar-item")[0]&&$("#onedash-commandbar").addClass("hidden")}function InitCommandBarItems(){window.commandBar.InitializeCommandBar()}function EscapeProductName(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function toggleHistoryPane(){$("#onedash-history-panel").toggleClass("is-open")}define("common-mod",["exports"],function(n){function t(){var n=i("MarketplaceSelectedLocale");return n!==null&&n!==""?n:"en-us"}function i(n){var i=new RegExp(n+"=([^;]+)"),t=i.exec(document.cookie);return t!==null?unescape(t[1]):null}function r(n,t){document.cookie=n+"="+t+"; path=/"}function u(){return $("#fdIsSignedIn").text()==="true"}function f(){var n=window.location.href.toLowerCase();return n.indexOf("dashboard/account/certificateupload")>-1||n.indexOf("dashboard/account/certificateinfo")>-1||n.indexOf("dashboard/crossplatform/web/products")>-1||n.indexOf("dashboard/registration")>-1?!0:!1}function e(n,t,i,r,u){var f=0,e=3;$.ajax({url:t,type:i,contentType:"application/json;charset=utf-8",data:JSON.stringify(n),success:function(){r&&r()},error:function(i,r,o){if(u&&u(),i.status!=null&&i.status.toString().startsWith("5")){if(f++,f<=e){$.ajax(this);return}sendError(i.status,r,o,n,t);return}sendError(i.status,r,o,n,t)}})}window.locale=t;n.locale=t;n.getCookie=i;n.setSessionCookie=r;n.userSignedIn=u;n.customFocusNavPages=f;n.sendFeedback=e});define("local-storage",function(){"use strict";function h(t,i,r){var u=n(t,i,r);return u?JSON.parse(u):null}function c(n,i,r,u){i&&(i=JSON.stringify(i));t(n,i,r,u)}function n(n,t,r){return n===null||n===""?null:u()?t&&i(n,r)?null:e(n,r):null}function t(n,t,i,e){n!==null&&n!==""&&u()&&(o(n,t,e),i&&o(f(n),r()+i,e))}function i(n,t){var o=f(n),i=e(o,t),u;return i&&(u=parseInt(i),r()>=u)?!0:!1}function r(){return Math.floor((new Date).getTime()/1e3)}function u(){return typeof Storage!="undefined"}function f(n){return s+n}function e(n,t){return t||(t=localStorage),t.getItem(n)}function o(n,t,i){i||(i=localStorage);i.removeItem(n);try{i.setItem(n,t)}catch(r){(r&&r.name==="QUOTA_EXCEEDED_ERR"||r.name==="NS_ERROR_DOM_QUOTA_REACHED"||r.name==="QuotaExceededError")&&(console.log(r),i.clear(),i.setItem(n,t),(new Image).src="/reporterror?clientError="+encodeURIComponent(r)+"&sourceUri="+encodeURIComponent(document.location.href))}}var s="expiry:";return{getJson:h,setJson:c,get:n,set:t,expired:i}});define("local-storage-helper",["local-storage"],function(n){"use strict";function s(t,i,r){var f=n.get(t),u;f&&r(f);u=i();u&&u!==f&&(n.set(t,u),r(u))}function h(n,t,r,u){i(n,t,r,u,sessionStorage)}function c(n,t,i){return r(n,t,i,sessionStorage)}function l(n,t,r,u){i(n,t,r,u,localStorage)}function a(n,t,i){return r(n,t,i,localStorage)}function i(t,i,r,u,e){t=f(u,t);n.set(t,i,r,e)}function r(t,i,r,u){return t=f(r,t),n.get(t,i,u)}function f(n,t){var i="svc";return n?i=n:$("#serviceName").length&&(i=$("#serviceName").val()),i+":"+t}function e(){var i=n.get(u,!0,sessionStorage);return i===null&&(i=t),i}function v(i){i||(i=t);n.set(u,i,3600,sessionStorage)}function y(){return n.getJson(o())}function p(t){n.setJson(o(),t)}function o(){return"fd:v2:"+e()+":user-data"}function w(){return t}function b(){localStorage.clear();sessionStorage.clear()}var u="fd:v2:user",t="anon";return{smartFetch:s,setSessionStorageItem:h,getSessionStorageItem:c,setLocalStorageItem:l,getLocalStorageItem:a,setItem:i,getItem:r,getUserIdentity:e,setUserIdentity:v,getUserData:y,setUserData:p,getAnonUser:w,clearStorage:b}});define("common-appmru",["knockout","exports","common-mod","local-storage-helper"],function(n,t,i){var u=function(t,r,u,f,e,o){var s=this;s.bigId=t;s.name=r;s.productType=u;s.productTypeText=f;s.logoUri=e;s.logoBackgroundColor=o;s.appUri=n.pureComputed(function(){return"/"+i.locale()+"/dashboard/products/"+s.bigId+"/overview"},this);s.isBlankImage=n.pureComputed(function(){return this.logoUri===""?!0:!1},this)},r={App:0,Bundle:1,Game:2,Group:3,Xdp:4},f=function(){function t(t){function s(){if(frontDoorEnabled&&devCenterSellerAccountId!=="0"){var n=(new Date).getTimezoneOffset();$.getJSON("/"+i.locale()+"/dashboard/api/v1/cache/products/base?timezoneOffsetInMinutes="+n,function(n){n.forEach(function(n){if(n.productType!==r.Group){n.productTypeText=n.productType===r.Bundle?"bundles":"apps";n.logoUri!==""&&(n.logoBackgroundColor===""||n.logoBackgroundColor==="transparent")&&(n.logoBackgroundColor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAH0lEQVQYlWPYtGnTf3R86NAhDMwwFBRiE8SmeSgoBAA3kj2k/B3URwAAAABJRU5ErkJggg==) repeat");var t=new u(n.bigId,n.name,n.productType,n.productTypeText,n.logoUri,n.logoBackgroundColor);f.applications.push(t);o.push(n.bigId)}})}).done(function(){if(f.appsLoading(!1),sessionStorage.setItem("commonux:top5Apps",JSON.stringify(f.applications().slice(0,5))),sessionStorage.setItem("accountId",e),o.length>0){var n=o.slice(0,5).toString(),r={mru:n};$.ajax({url:"/"+i.locale()+"/dashboard/engagementapi/account/preferences",method:"PUT",contentType:"application/json",data:JSON.stringify(r)})}$("#onedash-top-menus").length&&$("#onedash-bottom-menu").length&&$("#onedash-navigation-list").length&&($("#onedash-top-menus")[0].clientHeight+$("#onedash-bottom-menu")[0].clientHeight>$("#onedash-navigation-list")[0].clientHeight?$("#onedash-bottom-menu").removeClass("bottom-position"):$("#onedash-bottom-menu").addClass("bottom-position"));$("#devcenter-nav").length===0&&contentReady();typeof t!="undefined"&&t()}).fail(function(){f.appsLoading(!1)})}else f.appsLoading(!1)}function h(n){if(frontDoorEnabled&&devCenterSellerAccountId!=="0"){var o=(new Date).getTimezoneOffset();$.getJSON("/"+i.locale()+"/dashboard/api/v1/products/base?timezoneOffsetInMinutes="+o+"&bigIds="+n,function(n){n.forEach(function(n){if(n.productType!==r.Group){n.productTypeText=n.productType===r.Bundle?"bundles":"apps";n.logoUri!==""&&(n.logoBackgroundColor===""||n.logoBackgroundColor==="transparent")&&(n.logoBackgroundColor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAH0lEQVQYlWPYtGnTf3R86NAhDMwwFBRiE8SmeSgoBAA3kj2k/B3URwAAAABJRU5ErkJggg==) repeat");var t=new u(n.bigId,n.name,n.productType,n.productTypeText,n.logoUri,n.logoBackgroundColor);f.applications.push(t)}})}).done(function(){f.appsLoading(!1);sessionStorage.setItem("commonux:top5Apps",JSON.stringify(f.applications().slice(0,5)));sessionStorage.setItem("accountId",e);$("#onedash-top-menus").length&&$("#onedash-bottom-menu").length&&$("#onedash-navigation-list").length&&($("#onedash-top-menus")[0].clientHeight+$("#onedash-bottom-menu")[0].clientHeight>$("#onedash-navigation-list")[0].clientHeight?$("#onedash-bottom-menu").removeClass("bottom-position"):$("#onedash-bottom-menu").addClass("bottom-position"));$("#devcenter-nav").length===0&&contentReady();typeof t!="undefined"&&t()}).fail(function(){f.appsLoading(!1)})}else f.appsLoading(!1)}var f=this,o,e;f.appsLoading=n.observable(!0);f.applications=n.observableArray();o=[];e=$("#applicationMenuDropDownCommon").attr("data-accountid");n.bindingHandlers.img={update:function(t,i){var f=n.utils.unwrapObservable(i()),r=n.utils.unwrapObservable(f.src),u=$(t);if(document.readyState==="complete")r&&u.attr("src",r);else $(window).on("load",function(){r&&u.attr("src",r)})},init:function(n){var t=$(n);t.attr("src","/dashboard/overview/staticres/image?name=BlankProductLogo.png")}};f.topApplications=n.pureComputed(function(){var t,i,r,n,o;if(sessionStorage.getItem("commonux:top5Apps")!==null&&sessionStorage.getItem("accountId")===e){t=[];i=JSON.parse(sessionStorage.getItem("commonux:top5Apps"));for(r in i)n=i[r],o=new u(n.bigId,n.name,n.productType,n.productTypeText,n.logoUri,n.logoBackgroundColor),n.logoUri!==""&&(n.logoBackgroundColor===""||n.logoBackgroundColor==="transparent")&&(n.logoBackgroundColor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAH0lEQVQYlWPYtGnTf3R86NAhDMwwFBRiE8SmeSgoBAA3kj2k/B3URwAAAABJRU5ErkJggg==) repeat"),t.push(o);return f.appsLoading(!1),t}return f.applications().slice(0,5)});(sessionStorage.getItem("commonux:top5Apps")===null||sessionStorage.getItem("accountId")!==e)&&$.ajax({url:"/"+locale()+"/dashboard/engagementapi/account/preferences?keys=mru",method:"GET",success:function(n){n&&!jQuery.isEmptyObject(n)&&n.mru.length>0?h(n.mru):s()},fail:function(){s()}})}return t}();t.ViewModel=f});define("common-desktopProductsList",["knockout","exports","common-mod","local-storage-helper"],function(n,t,i){var r=function(t,r){var u=this;u.id=t;u.name=r;u.linkUri=n.pureComputed(function(){return"/"+i.locale()+"/dashboard/analytics/reports/desktop/health?productId="+t},this)},u=function(){function t(){var t=this,i;t.desktopProductsLoading=n.observable(!0);t.desktopProducts=n.observableArray();i=$("#applicationMenuDropDownCommon").attr("data-accountid");t.topDesktopProducts=n.pureComputed(function(){var u,n,f;if(sessionStorage.getItem("commonux:topDesktopProducts")!==null&&sessionStorage.getItem("accountId")===i){u=[];n=JSON.parse(sessionStorage.getItem("commonux:topDesktopProducts"));for(f in n)u.push(new r(n[f].id,n[f].name));return t.desktopProductsLoading(!1),u}return t.desktopProductsLoading(!1),t.desktopProducts()});(sessionStorage.getItem("commonux:topDesktopProducts")===null||sessionStorage.getItem("accountId")!==i)&&$.ajax({url:"/"+locale()+"/dashboard/api/v2/cache/products/desktop",method:"GET",success:function(n){if(n&&!jQuery.isEmptyObject(n)&&n.data&&n.data.length>0){var f=n.data.slice(0,10),u=[];f.forEach(function(n){u.push(new r(n.id,n.name))});t.desktopProducts(u);t.desktopProducts().length>0&&(sessionStorage.setItem("commonux:topDesktopProducts",JSON.stringify(t.desktopProducts())),sessionStorage.setItem("accountId",i))}else t.desktopProductsLoading(!1)},fail:function(){t.desktopProductsLoading(!1)}})}return t}();t.ViewModel=u});define("commandbar",["exports","common-mod"],function(n,t){"use strict";function rt(n,t){if(n&&!t||!n&&t)return!1;if(!n&&!t)return!0;if(n.length!==t.length)return!1;for(var i=0;i<n.length;++i)if(n[i].bigId!==t[i].bigId||n[i].isVisible!==t[i].isVisible||n[i].name!==t[i].name)return!1;return!0}function b(n){return n&&n.logoBackgroundColor&&n.logoBackgroundColor!==""&&n.logoBackgroundColor!=="transparent"?n.logoBackgroundColor:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAH0lEQVQYlWPYtGnTf3R86NAhDMwwFBRiE8SmeSgoBAA3kj2k/B3URwAAAABJRU5ErkJggg==) repeat;"}function ut(n){return"/"+window.commandBar.locale+"/dashboard/products/"+n.bigId+"/overview"}function k(n){if(n){$(".app-picker .appPickerOverviewLink").attr("href",p(n));var t=typeof n.logoUri=="string"?'<img width="24" height="24" src="/dashboard/overview/staticres/image?name=BlankProductLogo.png" style="background:'+b(n)+'">':"";if($(".app-picker .appPickerOverviewLink").html('<div class="app-picker-icon">'+t+'<\/div><div class="app-picker-name" title="'+EscapeProductName(n.name)+'"><span>'+EscapeProductName(n.name)+"<\/span><\/div>"),w&&$(".app-picker .appPickerOverviewLink .app-picker-name").append('<span class="app-picker-id">'+n.bigId+"<\/span>"),r=n.bigId,u&&u(n.bigId),document.readyState==="complete")$(".appPickerOverviewLink > div.app-picker-icon > img").attr("src",n.logoUri);else $(window).on("load",function(){$(".appPickerOverviewLink > div.app-picker-icon > img").attr("src",n.logoUri)})}}function ft(n){if(r&&$("#common-focusNav").length&&$("a",$("#common-focusNav")).each(function(){var t=$(this).attr("href"),i=new RegExp(r,"ig");t&&i.test(t)&&(t=t.replace(i,n),$(this).attr("href",t))}),n&&i)for(var t=0;t<i.length;++t)if(new RegExp(n,"ig").test(i[t].bigId)){k(i[t]);break}}function et(n){if(f){var t=new RegExp(r,"ig");if(r&&t.test(f))return f.replace(t,n.bigId)}return f}function c(n){var c=i,u,e,a,t,l,v,p;if(n&&n.length>0&&(c=s),c){for(u="",f=window.location.href,e=o,a=0;a<it&&e<c.length;++e)t=c[e],l="",t&&t.isVisible&&(v=n?new RegExp(n,"ig"):null,(!n||v.test(t.name)||v.test(t.bigId))&&(l=y(t,r),p=typeof t.logoUri=="string"?'<img width="24" height="24" src="'+t.logoUri+'" style="background:'+b(t)+'">':"",u=w?u+'<li class="app-picker-options-item'+(new RegExp(r,"ig").test(t.bigId)?" current-item":"")+'"><a href="'+l+'" onclick="window.commandBar.AppPickerOnClick(\''+t.bigId+'\')"  data-bi-id="app-picker-list-item" data-bi-name="app-picker-list-item" data-bi-slot="5.'+e+'"><div class="app-picker-icon">'+p+'<\/div><div class="app-picker-name"><span>'+EscapeProductName(t.name)+'<\/span><span class="app-picker-id">'+t.bigId+"<\/span><\/div><\/a><\/li>":u+'<li class="app-picker-options-item'+(new RegExp(r,"ig").test(t.bigId)?" current-item":"")+'"><a href="'+l+'" onclick="window.commandBar.AppPickerOnClick(\''+t.bigId+'\')"  data-bi-id="app-picker-list-item" data-bi-name="app-picker-list-item" data-bi-slot="5.'+e+'"><div class="app-picker-icon">'+p+'<\/div><div class="app-picker-name"><span>'+EscapeProductName(t.name)+"<\/span><\/div><\/a><\/li>",++a,++h)),++o;o<c.length&&(u=u+'<button class="app-picker-load-more" id="appPickerLoadMore" onclick="window.commandBar.AppPickerLoadMoreEvent(event)" data-bi-id="app-picker-list-more" data-bi-name="app-picker-list-more" data-bi-slot="6">'+appPickerLoadMoreProductsText+"<\/button>");$(".app-picker #appPickerLoadMore")[0]&&$(".app-picker #appPickerLoadMore").remove();$(".app-picker .appPickerProductList").append(u)}h<2?$(".app-picker .appPickerButtonLink").each(function(n,t){$(t).addClass("hidden")}):$(".app-picker .appPickerButtonLink").each(function(n,t){$(t).removeClass("hidden")})}function d(){var n=null;return e===v&&$("#onedash-commandbar .appPickerSearchBox")[0]?n=$("#onedash-commandbar .appPickerSearchBox").val():e===a&&$("#leftnav-apppicker .appPickerSearchBox")[0]&&(n=$("#leftnav-apppicker .appPickerSearchBox").val()),n}function ot(){!s&&i&&(s=i.slice(),s.sort(function(n,t){return n.name.localeCompare(t.name)}));$(".app-picker .appPickerProductList").html("");o=0;h=0;c(d())}function st(n){i&&(c(d()),n.stopPropagation())}function l(){var t,f,n;if(i&&(t=u?u():r,t)){for(f=new RegExp(t,"ig"),n=0;n<i.length;++n)if(f.test(i[n].bigId)){k(i[n]);break}if(o=0,h=0,$(".app-picker .appPickerProductList").html(""),document.readyState==="complete")c();else $(window).on("load",function(){c()})}}function ht(){var t,n;if(r||(r=u()),i)for(t=new RegExp(r,"ig"),n=0;n<i.length;++n)if(t.test(i[n].bigId))return!0;return!1}function ct(n,t){if(t&&n)try{sessionStorage.setItem(t,JSON.stringify(n))}catch(i){}}function lt(n){var t=sessionStorage.getItem(n);return t?JSON.parse(t):null}function g(n,t){n&&(rt(i,n)||(i=n,t&&ct(n,t),l()))}function at(n){for(var i,u,r=[],f=new RegExp("/dashboard/hardware/driver/(.[^/?#]*)","i"),t=0;t<n.Links.length;++t)n.Links[t].Name&&(i=n.Links[t].Link.match(f),u={bigId:i&&i.length>1?i[1]:"",name:n.Links[t].Name,logoBackgroundColor:null,logoUri:null,isVisible:!0},r.push(u));return r}function vt(n){var i,t,r;if(n){for(sessionStorage["commonux:iotrawdata"]=JSON.stringify(n),$(document).trigger("hardwareiotdata-loaded"),i=[],t=0;t<n.length;++t)n[t].friendlyName&&(r={bigId:n[t].productId,name:n[t].friendlyName,logoBackgroundColor:null,logoUri:null,isVisible:!0},i.push(r));return i}return null}function nt(n,t,o,s,h,c,w){var b,k;u=h;y=c?c:et;p=w?w:ut;o&&(i=o,l());s&&(b=lt(s),b&&(i=b,l()));k=setInterval(function(){if(f!==window.location.href){(e!==v&&ShouldShowOfficeCommandBarAppPicker()||e!==a&&(ShouldShowLeftNavAppPicker()||ShouldShowLeftNavHardwareAppPicker()))&&InitializeAppPicker();var n=getProductIdFromUrl();n&&r!==n&&(u(n),r=n);l()}},1e3);setTimeout(function(){clearInterval(k)},7e3);n&&$.ajax({url:n,type:"GET",dataType:"json",success:function(i){n.indexOf("hardware/iot")!=-1?i=vt(i):n.indexOf("dashboard/hardware/")!=-1&&(i=at(i));g(i,s);t&&!ht()&&$.ajax({url:t,type:"GET",dataType:"json",success:function(n){g(n,s)},error:function(){console.log("Failed to load list of applications for App picker.")}})},error:function(){console.log("Failed to load list of applications for App picker.")}})}function yt(n,t,i,r,u,f,o,s){e=a;$("#appInfoControl")[0]&&$("#appInfoControl").addClass("hidden");$("#bundleInfoControl")[0]&&$("#bundleInfoControl").addClass("hidden");$("#onedash-commandbar").addClass("hidden");$("#onedash-commandbar-placeholder").addClass("hidden");$(".leftMenu").hasClass("leftmenu-app-picker")||$(".leftMenu").addClass("leftmenu-app-picker");s&&$("#leftnav-apppicker").addClass("apppicker-no-pictures");nt(n,t,i,r,u,f,o);$("#leftnav-apppicker").removeClass("hidden")}function pt(n,t,i,r,u,f,o,s){e=v;nt(n,t,i,r,u,f,o);$("#leftnav-apppicker").addClass("hidden");$("#onedash-commandbar-placeholder").insertBefore("#onedash-focusnav").removeClass("hidden");$("#commandbar-apppicker").removeClass("hidden");$("#onedash-commandbar").removeClass("hidden");$("#onedash-focusnav").length&&$("#onedash-focusnav").removeClass("revealing");s!==undefined&&s&&$("#commandbar-apppicker").addClass("apppicker-no-pictures")}function tt(n,t,i,r,u,f,e){var o=n?'<span class="win-icon '+n+'"><\/span>':"",s=t?"<span>"+t+"<\/span>":"",r=r?'<span id="'+i+'-tooltip" style="display:none;">'+r+"<\/span>":"";return"<div "+(e?e:"")+' id="'+i+'-div" class="command-bar-item '+f+' command-bar-item-highlight">'+r+'<a href="javascript:void(0);" id="'+i+'-a" type="button" data-toggle="tooltip" data-bi-id="'+i+'" data-bi-name="'+i+'" onmouseover="$(\'#'+i+"-a').attr('title', $('#"+i+'-tooltip\').text());" onclick="'+u+'">'+o+s+"<\/a><\/div>"}function wt(n,t,i,r,u,f){return'<div class="command-bar-item '+u+'" id="'+i+'-div"><div class="form-group form-searchbox" style="margin: 0px 0px 0px 0px;"><input type="text" name="focus" class="form-control" placeholder="'+(t?t:"")+'" autocomplete="off" '+(f?f:"")+' oninput="'+(r?r:"")+'" /><span class="search-icon"><i class="win-icon '+(n?n:"")+'"><\/i><\/span><\/div><\/div>'}function bt(n){if($(n).attr("commandbar-data-type")){if($(n).attr("commandbar-data-type")==="cut")return tt("win-icon-Cut","Cut",$(n).attr("id")?$(n).attr("id"):"cut-a","Cut tooltip",$(n).attr("commandbar-data-onclick"),"command-bar-left",$(n).attr("commandbar-data-attrs"));if($(n).attr("commandbar-data-type")==="search")return wt("win-icon-Search",$(n).attr("commandbar-data-text"),$(n).attr("id")?$(n).attr("id"):"search",$(n).attr("commandbar-data-oninput"),"command-bar-right",$(n).attr("commandbar-data-attrs"))}else return $(n).attr("commandbar-data-text")||$(n).attr("commandbar-data-icon")?tt($(n).attr("commandbar-data-icon"),$(n).attr("commandbar-data-text"),$(n).attr("id"),$(n).attr("commandbar-data-tooltip"),$(n).attr("commandbar-data-onclick"),$(n).hasClass("command-bar-right")?"command-bar-right":"command-bar-left",$(n).attr("commandbar-data-attrs")):$(n).remove().removeClass("hidden")}function kt(){var i=!1,t,n;if($(".command-bar-item").each(function(){i=!0;$("#onedash-commandbar-commands").append(bt(this))}),i){if(t=$(".command-bar-control").hasClass("tabbed-command-bar"),$("#common-focusNav").length?t||$("#pageMainContent.col-xs-18").css("padding-top","48px"):t||$("body").css("padding-top","96px"),$(".command-bar-control").length===1){for(n=0;n<$(".command-bar-control")[0].attributes.length;++n)$(".command-bar-control")[0].attributes[n].nodeName!=="class"&&$(".command-bar-control")[0].attributes[n].nodeName!=="id"&&$("#onedash-commandbar").attr($(".command-bar-control")[0].attributes[n].nodeName,$(".command-bar-control")[0].attributes[n].value);$(".command-bar-control").replaceWith($("#onedash-commandbar"));t&&$("#onedash-commandbar").addClass("tabbed-command-bar")}$("#onedash-commandbar").removeClass("hidden");$("#onedash-commandbar-commands").removeClass("hidden")}else $("#onedash-commandbar-commands").addClass("hidden")}var r=null,i=null,s=null,o=0,it=20,h=0,f=window.location.href,u=null,y=null,p=null,a="leftnav",v="cmdbar",e="none",w=$("#AppPickerId").val()==="true";window.commandBar={locale:t.locale(),AppPickerOnClick:ft,SearchProducts:ot,AppPickerLoadMoreEvent:st,InitializeLeftNavAppPicker:yt,InitializeCommandBarAppPicker:pt,InitializeCommandBar:kt}});$(function(){$("#commandbar-tabs").length>0&&decideTabSizes();$(document).on("click",function(n){$(n.target).hasClass("appPickerButtonLink")||($(".app-picker-options-dropdown").hasClass("in")&&$(".app-picker-options-dropdown.in").collapse("hide"),$(".app-picker-button").hasClass("is-active")&&$(".app-picker-button.is-active").removeClass("is-active"));$(n.target).closest("#commandbar-createNewProduct-div").length||($("#commandBar-newProductDropdown").slideUp(250),$("#commandbar-createNewProduct-div").removeClass("is-open"));$(n.target).closest(".section-tab-menu-button").length||$(".section-tab-menu-button").removeClass("is-open");$(n.target).closest("#onedash-history-panel.is-open, #onedash-history-entry").length||($("#onedash-history-panel").removeClass("is-open"),$("#onedash-history-entry").parent().removeClass("is-open"))});$(".app-picker-options-dropdown").on("click",function(n){$(n.target).hasClass("appPickerSearchBox")&&n.stopPropagation()});$(document).on("click","#commandbar-createNewProduct-a",function(){$("#commandBar-newProductDropdown").slideToggle(250)});$(document).on("click",".app-picker-button",function(){var n=$(this),t=n.outerHeight(!0);n.toggleClass("is-active");n.closest(".app-picker").find(".app-picker-options-dropdown").css("top",t)});$(document).on("click",".command-bar-item-highlight",function(){$(this).toggleClass("is-open")});$(document).on("click","#moreFlightTabButton",function(){setPositionAndHeightOfTabSpillover();$(this).toggleClass("is-open")});$(document).on("click",".section-tab-menu-button",function(){$(this).hasClass("is-open")||$(".section-tab-menu-button").removeClass("is-open");$(this).toggleClass("is-open")});$(".app-picker-current .app-picker-name span").each(function(){var n=$(this);baselineMiddle(n)});$(".app-picker-name span").each(function(){var n=$(this)});$(window).resize(function(){$(".app-picker-current .app-picker-name span").each(function(){var n=$(this);baselineMiddle(n)});$(".app-picker-name span").each(function(){var n=$(this)});$("#commandbar-tabs").length>0&&decideTabSizes()});$(window).scroll(function(){var n=$(window).scrollTop();n>=96?$("#onedash-commandbar").addClass("scrolled"):$("#onedash-commandbar").removeClass("scrolled")});$('[data-toggle="tooltip"]').each(function(){var n=$(this);n&&typeof n.tooltip=="function"&&n.tooltip({placement:"auto right",delay:1e3,container:"body"})})});var tries=0,maxTries=5;define("shared-components",["exports","common-mod"],function(n,t){"use strict";function i(n,t){var r=$(n).attr("data-attr-title"),u=$(n).attr("data-attr-description"),i=$(n).attr("data-attr-id"),e=$(n).attr("data-attr-icon"),o=$(n).attr("data-attr-image"),f;return typeof r!="string"||r.length<=0||typeof u!="string"||u.length<=0||typeof i!="string"||i.length<=0||localStorage.getItem(i)!==null?"":typeof t=="object"&&(f=!1,t.forEach(function(n){n.id===i&&n.read&&(f=!0)}),f)?"":"<li>"+(e?'<div class="newfeature-icon win-icon-size-md win-icon '+e+'"><\/div>':o?'<div class="newfeature-image"><img width="48" height="48" src="'+o+'" ><\/div>':"")+'<div class="newfeature-title">'+r+'<\/div><div class="newfeature-description">'+u+"<\/div><\/li>"}function r(){$(".shared-component-newfeature-modal").length>0&&$.ajax({url:"/"+t.locale()+"/engagementapi/account/preferences?keys=CommonUXNewFeatureModal",method:"GET",success:function(n){if(n){var u=!1,r=n.CommonUXNewFeatureModal?JSON.parse(n.CommonUXNewFeatureModal):[];$(".shared-component-newfeature-modal").each(function(n,t){var f=i(t,r);typeof f=="string"&&f.length>0&&($("#new-feature-modal-dialog ul").append(f),r.push({id:$(t).attr("data-attr-id"),read:!0}),u=!0)});$("#newfeature-modal-dismiss").click(function(){$("#new-feature-modal-dialog .onedash-modal-wrapper").removeClass("animateIn");setTimeout(function(){$("#new-feature-modal-dialog").hide();$("#new-feature-modal-dialog ul").html("")},200);var n={CommonUXNewFeatureModal:JSON.stringify(r)};$.ajax({url:"/"+t.locale()+"/engagementapi/account/preferences",method:"PUT",contentType:"application/json",data:JSON.stringify(n)})});u&&(r.forEach(function(n){localStorage.setItem(n.id,!0)}),$("#new-feature-modal-dialog").show(),setTimeout(function(){$("#new-feature-modal-dialog .onedash-modal-wrapper").addClass("animateIn")},50))}}})}n.ShowWhatsNewModal=r});define("shared-components-table",["exports","common-mod"],function(n,t){function y(n,t){var i=$('[shared-component-id="shared-component-table-'+n+'"]'),h;if(!i.attr("data-no-preserve-settings")){var s=parseInt(i.attr("data-attr-rows-per-page")),f=-1,e="",o=!1,r=null;i.find("thead tr th a span.win-icon-Down").length?(e="DESC",r=i.find("thead tr th a span.win-icon-Down"),f=parseInt(r.closest("th").attr("sorting-column"))):i.find("thead tr th a span.win-icon-Up").length&&(e="ASC",r=i.find("thead tr th a span.win-icon-Up"),f=parseInt(r.closest("th").attr("sorting-column")));h=t.showAllRows?i.find("tbody > tr").length:t.rowsPerPage;h&&t.rowsPerPage!==s&&(s=h,o=!0,i.attr("data-attr-rows-per-page",s),t.showAllRows?i.attr("data-attr-show-all-rows",!0):i.attr("data-attr-show-all-rows",!1));t.sortByColumn&&t.sortByColumn!==f&&(f=parseInt(t.sortByColumn),r||(r=i.find("thead tr th:nth-child("+(f+1)+")")),o=!0);t.sortByColumnDirection&&t.sortByColumnDirection!==e&&(e=t.sortByColumnDirection,o=!0);f===-1&&(r=i.find("thead tr th:nth-child(1)"));o&&(b(r,f,e==="ASC",!1),u(i))}}function ut(n,i,r,u,f){var e={};e["CommonUXReusableTable_"+f]=JSON.stringify({rowsPerPage:r,sortByColumn:n,showAllRows:u,sortByColumnDirection:i?"ASC":"DESC"});$.ajax({url:"/"+t.locale()+"/engagementapi/account/preferences",method:"PUT",contentType:"application/json",data:JSON.stringify(e)});sessionStorage.setItem("CommonUXReusableTable_"+f,JSON.stringify(e))}function u(n){if(n){var t=n.find("tbody tr");$(t[0]).find("td.shared-component-rank").length>0&&t.each(function(n,t){$(t).find("td.shared-component-rank input").val(n+1)})}}function p(n,i){var r="CommonUXReusableTable_"+n,u=sessionStorage.getItem(r),f;u&&JSON.parse(u)&&JSON.parse(u)[r]?(f=JSON.parse(u),i(JSON.parse(f[r]))):$.ajax({url:"/"+t.locale()+"/engagementapi/account/preferences?keys=CommonUXReusableTable_"+n,method:"GET",success:function(n){n[r]&&i(JSON.parse(n[r]))}})}function w(n){var t;if(!n.attr("data-no-preserve-settings")){var u=n.attr("shared-component-id").substr(23),f=parseInt(n.attr("data-attr-rows-per-page")),e=n.attr("data-attr-show-all-rows")==="true",i=-1,r="";n.find("thead tr th a span.win-icon-Down").length?(r="DESC",t=n.find("thead tr th a span.win-icon-Down"),i=t.closest("th").attr("sorting-column")):n.find("thead tr th a span.win-icon-Up").length&&(r="ASC",t=n.find("thead tr th a span.win-icon-Up"),i=t.closest("th").attr("sorting-column"));ut(i,r==="ASC",f,e,u)}}function ft(n){var t=$(n.target).children("span").hasClass("win-icon-Down"),r=$(n.target).children("span").hasClass("win-icon-Up"),i;$(n.target).closest("thead tr").children("th.shared-component-sort").each(function(n,t){$(t).children("a").children("span").removeClass("win-icon-Up").removeClass("win-icon-Down")});i=parseInt($(n.target).closest("th").attr("sorting-column"));b($(n.target),i,t||!t&&!r,!0)}function b(n,t,i,f){var s=n.closest("table"),o=s.children("tbody").children("tr"),e;typeof o=="object"&&o.length>1&&(t>=0&&(e=n.closest("th").attr("sorting-type"),typeof e!="string"&&(e="string"),o.sort(function(n,r){var u=$($(n).children("td")[t]).text(),f=$($(r).children("td")[t]).text();return e==="string"?i?u.localeCompare(f):f.localeCompare(u):e==="number"?i?parseInt(u)-parseInt(f):parseInt(f)-parseInt(u):e==="date"?i?new Date(u).valueOf()-new Date(f).valueOf():new Date(f).valueOf()-new Date(u).valueOf():void 0}),i?n.find("span").addClass("win-icon-Up"):n.find("span").addClass("win-icon-Down"),s.children("tbody").append(o),u(s)),r(n.closest(".shared-component-table"),1),f&&w(n.closest("table")))}function et(n,t){var i={sorting:!0,visible:!0,searchable:!0,type:"string"};return typeof n=="object"&&typeof n.sorting=="boolean"&&(i.sorting=n.sorting),typeof n=="object"&&typeof n.type=="string"&&(i.type=n.type),typeof n=="object"&&typeof n.visible=="boolean"&&(i.visible=n.visible),typeof n=="object"&&typeof n.searchable=="boolean"&&(i.searchable=n.searchable),typeof t!="object"||typeof t.sorting!="boolean"||t.sorting||(i.sorting=!1),typeof t!="object"||typeof t.search!="boolean"||t.search||(i.searchable=!1),i}function f(n,t,i){var r=n.clone().attr("table-element-id",n.attr("table-element-id")+"-clone").addClass("row-clone").css("background-color",t).css("z-index",i).css("height",n.css("height")).css("top",n.offset().top).css("left",n.offset().left).css("width",n.css("width"));return r.find("td").each(function(t,i){$(i).css("position","relative").css("width",$(n.find("td")[t]).css("width"))}),r}function ot(n,t){var i=n.closest("table"),e=i.find("tbody tr").not(".hidden"),a=i.find("tbody tr").toArray().indexOf(n[0]),w=250,k,p,r;if(t!==a&&!(t<0)&&!(t>=i.find("tbody tr").length)){var s=i.find("tbody tr").toArray().indexOf(e[0]),b=i.find("tbody tr").toArray().indexOf(e[e.length-1]),v=t-s,g=a-s,h=!1,o=!1;t<s?(v=0,h=!0):t>b&&(v=e.length-1,o=!0);var y=parseInt(n.css("height")),c=t>a,nt=c?"+=":"-=",tt=c?"-=":"+=",l=[];for(r=v;r!=g;r+=c?-1:1)k=f($(e[r]),"#fff","90").attr("array-index",r).appendTo(i.find("tbody")),$(e[r]).css("opacity",0),l.push(k);for(p=f(n,"#fff",o||h?"80":"100").appendTo(i.find("tbody")),n.css("opacity",0),r=0;r<l.length;++r)l[r].animate({top:tt+y},w,"swing",function(){$(e[parseInt($(this).attr("array-index"))]).css("opacity","");$(this).remove()});var it=y*l.length,d=null;(o||h)&&(d=i.find("tbody tr:nth-child("+((o?b+1:s-1)+1)+")"),d.removeClass("hidden"),n.addClass("hidden"));p.animate({top:nt+(o||h?y:it)},w,"swing",function(){n.css("opacity","");p.remove();u(i)});c?n.insertAfter(i.find("tbody tr:nth-child("+(t+1)+")")):n.insertBefore(i.find("tbody tr:nth-child("+(t+1)+")"))}}function s(n){var t=$(n.target).closest("table").attr("shared-component-id"),r=$('[table-element-id="tempRow"]').length>0?$('[table-element-id="tempRow"]').attr("shared-component-table-drag-id"):"",i=$(".shared-component-table-drag-target").attr("table-element-id"),u=$(n.target).closest("tr").attr("table-element-id");return r&&t&&r.indexOf(t)===0||i&&t&&i.indexOf(t)===0&&i.indexOf(u)!==0?!0:!1}function st(n){if($(n.target).hasClass("shared-component-dnd-handle")&&$(n.target).closest("table").find("tbody tr.hidden-search").length===0){n.originalEvent.dataTransfer.effectAlowed="move";$(".shared-component-table-drag-target").each(function(n,t){$(t).removeClass("shared-component-table-drag-target")});var t=$(n.target).closest("tr").attr("table-element-id");n.originalEvent.dataTransfer.setData("text",t);$('[table-element-id="'+t+'"]').addClass("shared-component-table-drag-target")}else n.preventDefault()}function ht(n){return $('[table-element-id="tempRow"]').remove(),$(".shared-component-table-drag-target").removeClass("hidden"),n.preventDefault(),!1}function ct(n){if(s(n))return n.preventDefault(),n.originalEvent.dataTransfer.dropEffect="move",!1;n.originalEvent.dataTransfer.dropEffect="none"}function lt(n,t,i){var r=f(n,"#e6e6e6","100").appendTo(n.parent()),u=f(t,"#ffffff","90").appendTo(t.parent());n.css("opacity",0);t.css("opacity",0);i?(n.insertAfter(t),r.animate({top:"+="+r.css("height")},75,"swing",function(){r.remove();n.css("opacity",1)}),u.animate({top:"-="+u.css("height")},75,"swing",function(){u.remove();t.css("opacity",1)})):(n.insertBefore(t),r.animate({top:"-="+r.css("height")},75,"swing",function(){r.remove();n.css("opacity",1)}),u.animate({top:"+="+u.css("height")},75,"swing",function(){u.remove();t.css("opacity",1)}))}function at(n){var r=$(n.target).closest("tr").attr("table-element-id"),i,t,u,f;if(s(n))return n.originalEvent.dataTransfer.dropEffect="move",h!==r&&(i=$(".shared-component-table-drag-target").attr("table-element-id"),t=$('[table-element-id="tempRow"]'),h=r,(t.length<1||t.attr("shared-component-table-drag-id")!==i)&&(t.length>0&&t.attr("table-element-id","").remove(),t=$('[table-element-id="'+i+'"]').clone(),t.attr("table-element-id","tempRow").attr("shared-component-table-drag-id",i).css("background-color","#f2f2f2").css("color","#b2b2b2").removeClass("shared-component-table-drag-target"),e(t),t.insertAfter($('[table-element-id="'+i+'"]')),$('[table-element-id="'+i+'"]').addClass("hidden")),r!=="tempRow"&&(u=$('[table-element-id="tempRow"]').length>0?$('[table-element-id="tempRow"]').offset().top:$('[table-element-id="'+i+'"]').length>0?$('[table-element-id="'+i+'"]').offset().top:0,f=$('[table-element-id="'+r+'"]').offset().top,lt(t,$('[table-element-id="'+r+'"]'),u<f))),n.preventDefault(),!1}function vt(n){return n.preventDefault(),!1}function yt(n){if(s(n)){var t=$('[table-element-id="tempRow"]').closest("table");$('[table-element-id="tempRow"]').replaceWith($(".shared-component-table-drag-target").removeClass("hidden"));h="";u(t)}else return $('[table-element-id="tempRow"]').remove(),$(".shared-component-table-drag-target").removeClass("hidden"),n.preventDefault(),!1}function e(n){var t=st,i=ht,r=at,u=vt,f=ct,e=yt;n.each(function(n,o){$(o).on("dragstart",t);$(o).on("dragenter",r);$(o).on("dragleave",u);$(o).on("dragend",i);$(o).on("dragover",f);$(o).on("drop",e)})}function pt(n,t){var i=$('[shared-component-id="shared-component-table-'+n+'"]'),f,s;if(i.length===1){var c=i.find("tbody tr").length,u=$('<tr class="hidden" table-element-id="shared-component-table-'+n+"-"+c+'"><\/tr>'),o=i.find("thead tr th"),h=o.length>0&&$(i).find("tbody tr .shared-component-dnd-handle").length>0,l=o.length>0&&$(i).find(".shared-component-rank").length>0,a=o.length>0&&$(i).find(".show-hide-controller-header").length>0;for(h&&u.append($('<td class="shared-component-dnd-handle" draggable="true"><span class="win-icon win-icon-GripperBarHorizontal"><\/span><\/td>')),l&&u.append($('<td class="shared-component-rank"><input type="number" value="'+($(i).find("tbody tr").length+1)+'"><\/td>')),a&&u.append($('<td class="show-hide-controller" style="display: none;"><div class="checkbox remove-bottom-margin remove-top-margin spacer-16-left"><label><input checked type="checkbox" value="'+(f+1)+'"><span class="text-body"><\/span><\/label><\/div><\/td>')),f=0;f<t.columns.length;++f)s=$("<td><\/td>"),s.append(t.columns[f]),$(o[f]).hasClass("hidden")&&s.addClass("hidde"),$(o[f]).hasClass("shared-component-no-search")&&s.addClass("shared-component-no-search"),u.append(s);h&&e(u);i.find("tbody").append(u);u.removeClass("hidden");r(i.parent(),i.attr("data-attr-total-pages"))}}function wt(n,t){var i=n?n:1,r=[];return i>1&&(r.push("previous"),r.push("1"),i>4&&r.push("ellipses")),i-1>1&&(i-2>1&&r.push(i-2+""),r.push(i-1+"")),r.push("target:"+i),i<t&&(i+1<t&&(r.push(i+1+""),i+2<t&&(r.push(i+2+""),i+3<t&&r.push("ellipses"))),r.push(t+""),r.push("next")),r}function bt(n){var h;if(n&&n.target&&($(n.target).is("a")||$(n.target).is("a span"))){var e=$(n.target).closest(".shared-component-table"),t=e.children("table"),r=parseInt($(t).attr("data-attr-total-pages")),s=parseInt($(t).attr("data-attr-rows-per-page")),u=parseInt($(t).attr("data-attr-current-page")),f=$(t).hasClass("shared-component-pagination")||$(t).attr("data-attr-pagination")==="true",i=parseInt($(n.target).text());(typeof i!="number"||isNaN(i))&&(i=$(n.target).closest("li").hasClass("previous-pagination")?u-1:$(n.target).closest("li").hasClass("next-pagination")?u+1:u);a(t,i,r,s,f);h=l(i,r,s,f);$(n.target).closest("nav").replaceWith(h);f&&e.children("#pageXofY").replaceWith(o(i,r))}}function r(n,t){var f,s;if(n&&$(n).length===1){var i=$(n).children("table"),r=parseInt($(i).attr("data-attr-rows-per-page")),e=$(i).hasClass("shared-component-pagination")||$(i).attr("data-attr-pagination")==="true",u=0;i.children("tbody").children("tr").each(function(n,t){k(t)&&++u});r&&i.attr("data-attr-show-all-rows")!=="true"||($(i).attr("data-attr-rows-per-page",u),r=u);f=Math.ceil(u/r);a(i,t,f,r,e);s=l(t,f,r,e);$(n).children("nav").replaceWith(s);e&&($(n).children("#pageXofY").replaceWith(o(t,f)),$(n).children(".paginationDropdown").replaceWith(c($(n).children("table"))))}}function k(n){return!$(n).hasClass("hidden-search")&&(!$(n).hasClass("hidden-showhide")||$(n).closest("table").parent().find(".showHideButton").hasClass("showHideMode"))?!0:!1}function kt(n){var i=$(n.target).val().toLowerCase(),t=$(n.target).closest(".shared-component-table");t.find("table tbody tr").each(function(n,t){var r=$(t).text().toLowerCase();typeof i!="string"||i.length<1||r.indexOf(i)!==-1?$(t).removeClass("hidden-search"):$(t).addClass("hidden-search")});typeof i=="string"&&i.length>0?(t.find("table tbody tr td.shared-component-rank input").attr("disabled","disabled"),t.find("table tbody tr td.shared-component-dnd-handle").addClass("disabled")):(t.find("table tbody tr td.shared-component-rank input").removeAttr("disabled"),t.find("table tbody tr td.shared-component-dnd-handle").removeClass("disabled"));r(t,1)}function c(n){var i=function(t,i){var u=t===n.find("tbody > tr").length&&(i&&n.attr("data-attr-show-all-rows")==="false"||!i&&n.attr("data-attr-show-all-rows")==="true");i?n.attr("data-attr-show-all-rows",!0):n.attr("data-attr-show-all-rows",!1);(parseInt(n.attr("data-attr-rows-per-page"))!==t||u)&&(n.attr("data-attr-rows-per-page",t),r(n.parent(),1),w(n))},u=n.attr("data-attr-show-all-rows")==="true"?sharedComponentsStrings.showingAllRows:sharedComponentsStrings.showingXRowsPerPage.replace(/\{0\}/gi,n.attr("data-attr-rows-per-page")),t=$('<div class="dropdown paginationDropdown pull-left"><button id="paginationDropdown" class="btn btn-dropdown no-outline" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" role="button"><span>'+u+'<\/span><span class="caret"><\/span><\/button><ul class="dropdown-menu" role="menu" aria-labelledby="paginationDropdown"><li><a class="rowsPerPageOption" data-attr-rows-per-page="10" href="javascript:void(0)">'+sharedComponentsStrings.xRowsPerPage.replace(/\{0\}/gi,"10")+'<\/a><\/li><li><a class="rowsPerPageOption" data-attr-rows-per-page="25" href="javascript:void(0)">'+sharedComponentsStrings.xRowsPerPage.replace(/\{0\}/gi,"25")+'<\/a><\/li><li><a class="rowsPerPageOption" data-attr-rows-per-page="50" href="javascript:void(0)">'+sharedComponentsStrings.xRowsPerPage.replace(/\{0\}/gi,"50")+'<\/a><\/li><li><a class="rowsPerPageOption" data-attr-rows-per-page="100" href="javascript:void(0)">'+sharedComponentsStrings.xRowsPerPage.replace(/\{0\}/gi,"100")+'<\/a><\/li><li><a class="rowsPerPageOption" show-all-rows="true" data-attr-rows-per-page="'+n.find("tbody > tr").lenght+'" href="javascript:void(0)">'+sharedComponentsStrings.showAllRows+"<\/a><\/li><\/ul><\/div>");return t.find("ul li a.rowsPerPageOption").each(function(n,t){$(t).on("click",function(){i(parseInt($(t).attr("data-attr-rows-per-page")),$(t).attr("show-all-rows"))})}),t}function o(n,t){return $('<div id="pageXofY" class="pull-left" style="padding: 30px 0px 10px 0px; font-size: 14px; font-weight: 600;">'+sharedComponentsStrings.pageXofY.replace(/\{0\}/gi,n).replace(/\{1\}/gi,t)+"<\/div>")}function dt(n,t){var f=$('<nav class="pull-right" style="margin-left: 12px; margin-right: 12px;"><\/nav>'),e=bt,u,i,r;if(t){if(n){for(u=$('<ul class="pagination optional"><\/ul>'),i=0;i<n.length;++i)n[i]==="previous"?u.append('<li class="previous-pagination"><a href="javascript:void(0)" aria-label="Previous" data-bi-id="shared-component-table-pagination-prev" data-bi-name="shared-component-table-pagination-prev"><span aria-hidden="true">'+sharedComponentsStrings.previous+"<\/span><\/a><\/li>"):n[i]==="next"?u.append('<li class="next-pagination"><a href="javascript:void(0)" aria-label="Next" data-bi-id="shared-component-table-pagination-next" data-bi-name="shared-component-table-pagination-next"><span aria-hidden="true">'+sharedComponentsStrings.next+"<\/span><\/a><\/li>"):n[i]==="ellipses"?u.append('<li class="disabled"><a href="javascript:void(0)" aria-label="Previous">...<\/a><\/li>'):n[i].indexOf("target:")===0?(r=parseInt(n[i].substr(7)),typeof r!="number"||isNaN(r)||u.append('<li class="active"><a href="javascript:void(0)" data-bi-id="shared-component-table-pagination-number" data-bi-name="shared-component-table-pagination-number">'+r+"<\/a><\/li>")):(r=parseInt(n[i]),typeof r!="number"||isNaN(r)||u.append('<li><a href="javascript:void(0)" data-bi-id="shared-component-table-pagination-number" data-bi-name="shared-component-table-pagination-number">'+r+"<\/a><\/li>"));f.append(u);f.click(function(n){e(n)})}}else f.addClass("hidden");return f}function l(n,t,i,r){var r=dt(wt(n,t),r);return r}function a(n,t,i,r,u){var e=(t-1)*r,o=t*r,f;$(n).attr("data-attr-total-pages",i);$(n).attr("data-attr-rows-per-page",r);$(n).attr("data-attr-current-page",t);$(n).attr("data-attr-pagination",u);f=0;$(n).children("tbody").children("tr").each(function(n,t){k(t)?(f>=e&&f<o?$(t).removeClass("hidden"):$(t).addClass("hidden"),++f):$(t).addClass("hidden")})}function d(n,t){var i=10,f=1,o=n.find("tbody tr").length,r=n.attr("data-attr-rows-per-page"),u=n.attr("data-attr-current-page"),e;return t.rowsPerPage&&(i=t.rowsPerPage),r&&(r=parseInt(r),typeof r!="number"||isNaN(r)||(i=r)),u&&(u=parseInt(u),typeof u!="number"||isNaN(u)||(f=u)),(!t.pagination||t.showAllRows)&&(i=o),e=Math.ceil(o/i),a(n,f,e,i,t.pagination),l(f,e,i,t.pagination)}function g(){return $('<div class="search-container pull-right" style="margin: 12px;"><\/div>')}function nt(){var n=$('<div class="form-group form-searchbox"><form><input type="text" name="focus" required="" class="form-control" placeholder="'+sharedComponentsStrings.search+'" autocomplete="off"><button class="clear-icon" type="reset"><span class="win-icon win-icon-Clear"><\/span><\/button><span class="search-icon"><i class="win-icon win-icon-Search"><\/i><\/span><\/form><\/div>'),t=kt;n.on("input",function(n){t(n)});return n.children("form").children("button").click(function(n){$(n.target).closest("form").children("input").val("");$(n.target).closest("form").children("input").trigger("input")}),n}function tt(){var n=$('<div class="showHideButton search-item"><a href="javascript:void(0);" id="showHideToggle" type="button" data-toggle="tooltip" data-bi-id="ShowHideLink" data-bi-name="ShowHideLink" class="hide-focus"><span id="showHideButtonText">Show/hide products<\/span><span id="showHideButtonIcon" class="win-icon win-icon-NUIIris"><\/span><\/a><\/div>');n.on("click",function(n){gt(n)});return n}function gt(n){var t=$(n.target).closest(".shared-component-table");ti(t);r(t,$(t).children("table").attr("data-attr-current-page"))}function ni(n){$(n).find(".show-hide-controller-header .checkbox input").change(function(){$(this).is(":checked")?$(this).closest("table").find(".show-hide-controller").each(function(n,t){$(t).find(".checkbox input").prop("checked",!0);$(this).closest("tr").removeClass("hidden-showhide")}):$(this).closest("table").find(".show-hide-controller").each(function(n,t){$(t).find(".checkbox input").prop("checked",!1);$(t).closest("tr").addClass("hidden-showhide")})});$(n).find(".show-hide-controller .checkbox input").change(function(){$(this).is(":checked")?($(n).find(".show-hide-controller-header .checkbox input").is(":checked")||$(n).find("tbody tr").length===$(n).find(".show-hide-controller .checkbox input:checked").length&&$(n).find(".show-hide-controller-header .checkbox input").prop("checked",!0),$(this).closest("tr").removeClass("hidden-showhide")):($(n).find(".show-hide-controller-header .checkbox input").is(":checked")&&$(n).find(".show-hide-controller-header .checkbox input").prop("checked",!1),$(this).closest("tr").addClass("hidden-showhide"))})}function ti(n){$(n).find(".show-hide-controller").toggle(!$(".showHideButton").hasClass("showHideMode"));$(n).find(".show-hide-controller-header").toggle(!$(".showHideButton").hasClass("showHideMode"));$(n).find(".showHideButton").hasClass("showHideMode")?($(n).find(".showHideButton").removeClass("showHideMode"),$(n).find("#showHideButtonText").removeClass("filterActive"),$(n).find("#showHideButtonIcon").removeClass("filterActive"),$(n).find("table tbody tr td.shared-component-rank input").removeAttr("disabled"),$(n).find("table tbody tr td.shared-component-dnd-handle").removeClass("disabled")):(ni(n),$(n).find("table tbody tr td.shared-component-rank input").attr("disabled","disabled"),$(n).find("table tbody tr td.shared-component-dnd-handle").addClass("disabled"),$(n).find(".showHideButton").addClass("showHideMode"),$(n).find("#showHideButtonText").addClass("filterActive"),$(n).find("#showHideButtonIcon").addClass("filterActive"))}function it(n){var t=ft;n.find("th").each(function(n,i){$(i).hasClass()||($(i).wrapInner('<a href="javascript:void(0)" data-bi-id="columnHeader-'+n+'" data-bi-name="columnHeader-'+n+'"><\/a>'),$(i).hasClass("shared-component-sort")&&($(i).attr("sorting-column",n),$(i).children("a").append('<span class="win-icon"><\/span>'),$(i).click(t)))})}function ii(n,t){var o=$("<thead><\/thead>"),r,i,f,e,u;if(n&&n.header&&n.header.rows.length>0)for(r=0;r<n.header.rows.length;++r){for(i=$("<tr><\/tr>"),t.rowReordering&&i.append($("<th><\/th>")),t.showRankColumn&&i.append($("<th><\/th>")),t.showHide&&i.append($('<th class="show-hide-controller-header" style="display: none;"><div class="checkbox remove-bottom-margin remove-top-margin spacer-16-left"><label><input checked type="checkbox"><span class="text-body"><\/span><\/label><\/div><\/th>')),f=0;f<n.header.rows[r].columns.length;++f)e=et(n.header.rows[r].columns[f].config,t),u=$("<th>"+n.header.rows[r].columns[f].text+"<\/th>"),u.attr("sorting-type",e.type),e.visible||u.addClass("hidden"),e.searchable||u.addClass("shared-component-no-search"),e.sorting&&u.addClass("shared-component-sort"),i.append(u);it(i);o.append(i)}return o}function ri(n,t,i){var s=$("<tbody><\/tbody>"),r,u,f,o;if(n&&n.body&&n.body.rows.length>0)for(r=0;r<n.body.rows.length;++r){for(u=$('<tr class="hidden" table-element-id="shared-component-table-'+i+"-"+r+'"><\/tr>'),t.rowReordering&&u.append($('<td class="shared-component-dnd-handle" draggable="true"><span class="win-icon win-icon-GripperBarHorizontal"><\/span><\/td>')),t.showRankColumn&&u.append($('<td class="shared-component-rank"><input type="number" value="'+(r+1)+'"/><\/td>')),t.showHide&&u.append($('<td class="show-hide-controller" style="display: none;"><div class="checkbox remove-bottom-margin remove-top-margin spacer-16-left"><label><input checked type="checkbox" value="'+(r+1)+'"><span class="text-body"><\/span><\/label><\/div><\/td>')),f=0;f<n.body.rows[r].columns.length;++f)o=$("<td><\/td>"),o.append(n.body.rows[r].columns[f]),n.header.rows[0].columns[f].config.visible||o.addClass("hidden"),n.header.rows[0].columns[f].config.searchable||o.addClass("shared-component-no-search"),u.append(o);t.rowReordering&&e(u);s.append(u)}return s}function rt(n){n.on("dragover",function(n){return n.preventDefault(),n.originalEvent.dataTransfer.dropEffect="move",!1});n.on("dragenter",function(n){return n.originalEvent.dataTransfer.dropEffect="move",n.preventDefault(),!1});n.find("tbody tr td.shared-component-rank input").on("change",function(n){var t=parseInt($(n.target).val())-1,i;isNaN(t)||(i=$(n.target).closest("tr"),ot(i,t))})}function ui(n,t,i){var u="shared-component-table-"+t,r=$('<table class="table" data-bi-area="'+u+'" shared-component-id="'+u+'"><\/table>');return r.append(ii(n,i)),r.append(ri(n,i,t)),i.preserveUserSettings||r.attr("data-no-preserve-settings",!0),rt(r),r}function fi(n){var t={sorting:!0,pagination:!0,rowReordering:!0,search:!0,showHide:!0,rowsPerPage:10,showAllRows:!1,preserveUserSettings:!0,showRankColumn:!0};return n&&n.config&&(typeof n.config.sorting=="boolean"&&(t.sorting=n.config.sorting),typeof n.config.pagination=="boolean"&&(t.pagination=n.config.pagination),typeof n.config.rowReordering=="boolean"&&(t.rowReordering=n.config.rowReordering),typeof n.config.search=="boolean"&&(t.search=n.config.search),typeof n.config.showHide=="boolean"&&(t.showHide=n.config.showHide),typeof n.config.rowsPerPage=="number"&&(t.rowsPerPage=n.config.rowsPerPage),typeof n.config.showAllRows=="boolean"&&(t.showAllRows=n.config.showAllRows),typeof n.config.showRankColumn=="boolean"&&(t.showRankColumn=n.config.showRankColumn),typeof n.config.preserveUserSettings=="boolean"&&(t.preserveUserSettings=n.config.preserveUserSettings)),t}function ei(n){var t={sorting:!1,pagination:!1,rowReordering:!1,search:!1,showHide:!1,rowsPerPage:10,showAllRows:!1,preserveUserSettings:!1,showRankColumn:!1};return $(n).hasClass("shared-component-search")&&(t.search=!0),$(n).hasClass("shared-component-pagination")&&(t.pagination=!0),$(n).hasClass("shared-component-save-settings")&&(t.preserveUserSettings=!0),$(n).find(".shared-component-reorder").length>0&&(t.sorting=!0),$(n).find(".shared-component-dnd-handle").length>0&&(t.rowReordering=!0),$(n).find(".shared-component-rank").length>0&&(t.showRankColumn=!0),$(n).hasClass("shared-component-show-hide")&&(t.showHide=!0),t}function v(n,t){var r=fi(t),u,i;((r.showHide||r.search)&&(u=g(),$(n).append(u),r.showHide&&tt().appendTo($(n).find(".search-container")),r.search&&nt().appendTo($(n).find(".search-container"))),i=$(n).attr("data-attr-id"),$('[shared-component-id="shared-component-table-'+i+'"]').length>0)||(i||(i=""),$(n).append(ui(t,i,r)),$(n).append(d($('[shared-component-id="shared-component-table-'+i+'"]'),r)),r.pagination&&($(n).append(o($(n).children("table").attr("data-attr-current-page"),$(n).children("table").attr("data-attr-total-pages"))),$(n).append(c($(n).children("table")))),$(n).append('<div class="clear"><\/div>'),p(i,function(n){y(i,n)}))}function oi(n){var t=$(n).children("table"),r,u,s,f;t.length!==1||t.attr("shared-component-id")||(r=ei(n),t.addClass("table"),u="shared-component-table-"+$(n).attr("data-attr-id"),t.attr("shared-component-id",u),t.attr("data-bi-area",u),t.find("tbody tr").each(function(n,t){$(t).attr("table-element-id",u+"-"+n)}),r.preserveUserSettings||t.attr("data-no-preserve-settings",!0),(r.showHide||r.search)&&(s=g(),s.insertBefore(t),r.showHide&&(t.find("thead tr th.show-hide-controller-header").css("display","none"),f=!t.find("tbody tr.hidden-showhide").length>0?"checked":"",$('<div class="checkbox remove-bottom-margin remove-top-margin spacer-16-left"><label><input '+f+' type="checkbox"><span class="text-body"><\/span><\/label><\/div>').appendTo(t.find("thead tr th.show-hide-controller-header")),t.find("tbody tr td.show-hide-controller").each(function(n,t){$(t).css("display","none");f=$(t).parent().hasClass("hidden-showhide")?"":"checked";$('<div class="checkbox remove-bottom-margin remove-top-margin spacer-16-left"><label><input '+f+' type="checkbox" value="'+(i+1)+'"><span class="text-body"><\/span><\/label><\/div>').appendTo($(t))}),tt().appendTo($(n).find(".search-container"))),r.search&&nt().appendTo($(n).find(".search-container"))),r.pagination&&(d(t,r).insertAfter(t),c(t).insertAfter(t),o(t.attr("data-attr-current-page"),t.attr("data-attr-total-pages")).insertAfter(t)),it(t.find("thead tr")),r.rowReordering&&(t.find("tbody tr td.shared-component-dnd-handle").append('<span class="win-icon win-icon-GripperBarHorizontal"><\/span>'),t.find("tbody tr td.shared-component-dnd-handle").attr("draggable",!0),e(t.find("tbody tr td.shared-component-dnd-handle").parent())),r.showRankColumn&&t.find("tbody tr td.shared-component-rank").each(function(n,t){$(t).append('<input type="number" value="'+(n+1)+'"/>')}),$(n).append('<div class="clear"><\/div>'),rt(t),r.preserveUserSettings&&p($(n).attr("data-attr-id"),function(t){y($(n).attr("data-attr-id"),t)}))}function si(){$(".shared-component-table").each(function(n,t){if($(t).attr("data-attr-source-url"))$.ajax({url:$(t).attr("data-attr-source-url"),method:"GET",contentType:"application/json",success:function(n){v(t,n)}});else if($(t).attr("data-attr-source-data")){var i=window[$(t).attr("data-attr-source-data")];typeof i=="object"?v(t,i):typeof i=="function"&&v(t,i())}else oi(t)})}var h="";n.InitializeTableComponent=si;n.AppendRowToTableComponent=pt;n.ReapplyPagination=r});define("feedbackExperience",["exports","common-mod"],function(n,t){"use strict";function u(){var n={UserAgent:navigator.userAgent,Description:"buttonID: "+e+" userTextResponse: "+i+" campaignId: "+r.CampaignId,UserInfo:"",FeedbackType:"0",SourceUrl:window.location.href,Culture:t.locale(),Area:"User experience.Interface"};t.sendFeedback(n,"/"+t.locale()+"/engagementapi/submitdeveloperfeedback","POST",function(){},function(){})}function o(n){var i={CommonUXInlineFeedback:JSON.stringify(n)};sessionStorage.setItem("CommonUXInlineFeedback",JSON.stringify(n));$.ajax({url:"/"+t.locale()+"/dashboard/engagementapi/identity/preferences",method:"PUT",contentType:"application/json",data:JSON.stringify(i)})}function s(n){var i=sessionStorage.getItem("CommonUXInlineFeedback");i&&JSON.parse(i)?n({CommonUXInlineFeedback:i}):$.ajax({url:"/"+t.locale()+"/dashboard/engagementapi/identity/preferences?keys=CommonUXInlineFeedback",method:"GET",success:function(t){n(t)}})}function h(n){r=n;$("#feedbackMessage1").html(r.Question);$("#feedbackMessage4").html(r.FreeFormPrompt);$(".feedbackFrame .buttonGroup input").on("click",function(n){$(".feedbackFrame .quick-feedback-slide1").animate({left:-550});$(".feedbackFrame .quick-feedback-slide2").animate({left:0});$("#primaryIndicator").removeClass("active");$("#secondaryIndicator").addClass("active");e=$(n.target).attr("id")});$("#feedbackBackButton").on("click",function(){$(".feedbackFrame .quick-feedback-slide2").animate({left:550});$(".feedbackFrame .quick-feedback-slide1").animate({left:0});$("#secondaryIndicator").removeClass("active");$("#primaryIndicator").addClass("active")});$("#feedbackSubmitButton").on("click",function(){i=$("#feedbackUserInput").val();i.length<1&&(i="-");u();$(".quick-feedback-popover").hide();f()});$("#feedbackCancelButton").on("click",function(){i="-";u();$(".quick-feedback-popover").hide();f()});$("html").on("click",function(n){$(n.target).closest(".quick-feedback-popover").length<1&&(i="-",u(),$(".quick-feedback-popover").hide(),f())})}function c(n){setTimeout(function(){s(function(t){var i=t.CommonUXInlineFeedback?JSON.parse(t.CommonUXInlineFeedback):null,r;h(n);r=new Date;(!i||i.campaignsSeen.indexOf(n.CampaignID)===-1&&Math.abs(new Date(i.lastCampaignSeenDate)-r)>6048e5)&&($(".quick-feedback-popover").show(),i||(i={lastCampaignSeenDate:r,campaignsSeen:[]}),i.campaignsSeen.push(n.CampaignID),i.lastCampaignSeenDate=r,o(i))})},5e3)}function f(){$(".feedbackFrame .quick-feedback-slide2").animate({left:550});$(".feedbackFrame .quick-feedback-slide1").animate({left:0});$("#secondaryIndicator").removeClass("active");$("#primaryIndicator").addClass("active")}var e,i,r;n.feedbackTriggerFeedback=c});define("banner",["exports","common-mod"],function(n,t){function f(n,t,i,r,u,f){return'<div class="alert-band" id="banner-'+n+'"><div class="alert with-icon '+t+(r?" alert-dismissible":"")+' fade in" role="alert">'+(r?'<button type="button" class="close" data-dismiss="alert" aria-label="Close" data-bi-name="onedash-banner-close-'+n+'" data-bi-id="onedash-banner-close-'+n+'" onclick="if ($(\'#banner-'+n+"').length > 0 && $('#banner-"+n+" button.close').length > 0) { localStorage.setItem('banner-"+n+'\', new Date()); }"><span aria-hidden="true"><i class="win-icon win-icon-Cancel"><\/i><\/span><\/button>':"")+'<span class="alert-icon"><i class="win-icon '+i+'"><\/i><\/span>'+(u&&typeof u=="string"?'<div class="alert-title">'+u+"<\/div>":"")+'<div class="row"><div class="col-xs-24">'+(f&&typeof f=="string"?"<p>"+f+"<\/p>":"")+"<\/div><\/div><\/div><\/div>"}function e(n){var t=localStorage.getItem("banner-"+n);return t&&typeof t=="string"&&t.length>0?!1:!0}function i(n,t,i,r,u){if(t&&typeof t=="string"&&!($(".onedash-banner-notifications #banner-"+n).length>0)&&e(n)){var o=typeof u=="boolean"?u:!0,s=r==="info"?"alert-info":r==="danger"?"alert-danger":"alert-warning",h=r==="info"?"win-icon-Info":"win-icon-Warning";$(".onedash-banner-notifications").append(f(n,s,h,o,t,i))}}function o(){var f="/"+t.locale()+"/notification/api/v2/broadcastnotifications",n="url="+window.location.href;sessionStorage.getItem("navigatedFrom")&&(n=n+"&program="+sessionStorage.navigatedFrom);$.ajax({url:f+"?"+n,method:"GET",contentType:"application/json",success:function(n){if(n.length==0)u();else{for(var t=0;t<n.length;++t)n[t]&&typeof n[t]=="object"&&i(n[t].id,n[t].title,n[t].text,n[t].level,n[t].closeBtn);r()}}})}function r(){$(".onedash-banner-notifications .alert-band").length>0&&($("devcenter-nav").length>0&&$(".col-xs-6.leftMenu").is(":visible")||$("#common-focusNav").length?$(".onedash-banner-notifications").addClass("banner-focus-nav"):$(".onedash-banner-notifications").removeClass("banner-focus-nav"),$(".onedash-banner-notifications").show())}function u(){$(".onedash-banner-notifications").hide();$(".onedash-banner-notifications").html=""}function s(){o()}n.InitializeBanner=s;n.InsertNewBanner=i;n.ShowBannerDiv=r;n.HideBanners=u});define("agreements",["exports","common-mod"],function(n,t){function r(){if($("#contentWrapper").append('<div class="modal" id="onedash-agreements-modal" style="display: none;"><\/div>'),sessionStorage.getItem("navigatedFrom")){var n="/"+t.locale()+"/common/ux/api/agreementapi/agreements?program="+sessionStorage.navigatedFrom;$.ajax({url:n,method:"GET",contentType:"application/json",success:function(n){var i,t;n&&(i=n.modal,i&&(u(i),f()),t=n.banners,t&&commonRequire(["banner"],function(n){for(var i=0;i<t.length;++i)t[i]&&typeof t[i]=="object"&&n.InsertNewBanner(t[i].id,t[i].title,t[i].text,t[i].level,t[i].closeBtn);n.ShowBannerDiv()}))}})}}function u(n){$("#onedash-agreements-modal").append(e(n));$("#agreementsGenerateEmail").click(function(){c(n)});$("#agreementsAcceptAgreement").click(function(){s(n.agreementType)})}function f(){$("#contentWrapper").addClass("block-scrolling");$("#onedash-agreements-modal").show()}function e(n){return'<div class="modal-dialog"><div class="modal-content" data-bi-area="AgreementModal"><div class="modal-body"><h3>'+n.title+'<\/h3><br/><p data-bi-id="agreementModalBody" data-bi-name="agreementModalBody"> <br/>'+n.body+"<\/p>"+o(n)+"<\/div><\/div><\/div>"}function o(n){var t='<div class="btn-group">';return t+=n.canAcceptAgreements?'<button id="agreementsAcceptAgreement" type="submit" class="btn btn-primary" data-bi-id="Submit" data-bi-name="AcceptButton">'+agreementsStrings.acceptOne+"<\/button>":'<button id="agreementsGenerateEmail" type="submit" class="btn btn-primary" data-bi-id="GenerateEmail" data-bi-name="GenerateEmailButton">'+agreementsStrings.contact+"<\/button>",t+"<\/div>"}function s(n){if(sessionStorage.getItem("navigatedFrom")){var i="/"+t.locale()+"/common/ux/api/agreementapi/signAgreement?agreementType="+n+"&program="+sessionStorage.navigatedFrom;$.ajax({url:i,type:"GET",contentType:"application/json",success:function(){h()}})}}function h(){$("#onedash-agreements-modal").hide()}function c(n){n.mail?i(n.mail.subject,n.mail.body,n.mail.email):i("","","")}function i(n,t,i){document.location.href="mailto:"+i+"?subject="+encodeURIComponent(n)+"&body="+encodeURIComponent(t)}n.CheckAgreementsBanner=r});define("feedbackDialog",["common-mod"],function(n){"use strict";function t(){$("#partnerdash-feedback-details").val().length>0&&$("#partnerdash-feedback-area").val()!=""?$("#partnerdash-feedback-submit").prop("disabled",!1):$("#partnerdash-feedback-submit").prop("disabled",!0)}function u(){$("#partnerdash-feedback-area").find(":selected").hasClass("has-subareas")?$("#partnerdash-feedback-subareas").trigger("open",$("#partnerdash-feedback-area option:selected").val()):$("#partnerdash-feedback-subareas").trigger("close")}function i(){t();$("input[name=ok-to-contact]").prop("checked")===!0?($("#partnerdash-feedback-privacy").slideDown(300),$("#partnerdash-feedback-preferredEmail").prop("disabled",!1)):($("#partnerdash-feedback-privacy").slideUp(300),$("#partnerdash-feedback-preferredEmail").prop("disabled",!0))}function f(){$.ajax({url:"/dashboard/engagementapi/identity/preferences?keys=notifications",success:function(n){if(n.notifications){var t=JSON.parse(n.notifications),r="";t.classChannels&&(r=JSON.parse(t.classChannels));r.length>0&&r[0].Classification==="Feedback"?$("input[name=ok-to-contact]").prop("checked",JSON.parse(r[0].EmailChannel.toString().toLowerCase())):$("input[name=ok-to-contact]").prop("checked",!0);t.contactEmail?$("#partnerdash-feedback-preferredEmail").val(t.contactEmail):$("#partnerdash-feedback-preferredEmail").val($("#partnerdash-feedback-defaultEmail").html())}else $("input[name=ok-to-contact]").prop("checked",!0),$("#partnerdash-feedback-preferredEmail").val($("#partnerdash-feedback-defaultEmail").html());$("input[name=ok-to-contact]").is(":checked")?i():$("#partnerdash-feedback-preferredEmail").prop("disabled",!0)},error:function(n){console.log("Error getting user's notification preferences:"+n)}})}function e(){var e=$("input[name=ok-to-contact]").prop("checked"),t,i=$("#partnerdash-feedback-area option:selected").attr("key"),r=$("#partnerdash-feedback-subarea").val(),u,f;t=r!==""?i+"."+r:i;u=$("#partnerdash-feedback-details").val();f={UserAgent:navigator.userAgent,Description:u,UserInfo:"",SourceUrl:window.location.href,Culture:n.locale(),Area:t,OkToContact:e};h();n.sendFeedback(f,"/"+n.locale()+"/engagementapi/submitdeveloperfeedback","POST",function(){s()},function(){$("#partnerdash-feedback-error").show()})}function o(){u();t()}function r(){$("#partnerdash-feedback-details, #partnerdash-feedback-area, #partnerdash-feedback-subarea").val("");$("#partnerdash-feedback-area").val()==="";$("#partnerdash-feedback-subareas").hide();$('#partnerdash-feedback-subarea > option[value!=""]').appendTo($("#partnerdash-feedback-subarea-all"));$("input[name=ok-to-contact]").prop("checked",!1);i()}function s(){$("#partnerdash-feedback-form").hide();$("#partnerdash-feedback-thanks").show();r();setTimeout(function(){$("#partnerdash-feedback-panel").removeClass("is-open");$("#onedash-feedback-icon").removeClass("is-selected");$("#partnerdash-feedback-form").show();$("#partnerdash-feedback-thanks").hide()},2100)}function h(){var t=$("input[name=ok-to-contact]").prop("checked"),i=$("#partnerdash-feedback-preferredEmail").val(),r=$("#partnerdash-feedback-defaultEmail").html();$.ajax({method:"GET",url:"/"+n.locale()+"/dashboard/engagementapi/identity/preferences?keys=notifications",success:function(u){var f=[],e=[];$.ajax({method:"GET",url:"/"+n.locale()+"/dashboard/engagementapi/userpreference/classifications",success:function(n){for(var o=0;o<n.length;o++)n[o].ProgramName==="General"&&f.push({Classification:n[o].NotifClass,EmailChannel:n[o].DefaultEmailValue,WebChannel:n[o].DefaultWebValue,AppChannel:n[o].DefaultUwpValue});e=c(f,"Feedback",t);l(u,i,r,t,e)},error:function(n){console.log("Error getting user's default classification channels:"+n)}})},error:function(n){console.log("Error getting user's identity level notification preferences:"+n)}})}function c(n,t,i){for(var r=0;r<n.length;r++)n[r].Classification===t&&(n[r].EmailChannel=i);return n}function l(t,i,r,u,f){var e,s,o,h;s=u?i:r;t.notifications?(e=JSON.parse(t.notifications),o="",e.classChannels&&(o=JSON.parse(e.classChannels)),o.length>0&&o[0].Classification==="Feedback"?(o[0].EmailChannel=u,e.classChannels=JSON.stringify(o)):e={contactEmail:s,preferredEmailLanguage:n.locale().toLowerCase(),classChannels:JSON.stringify(f)},e.contactEmail?e.contactEmail=s:e={contactEmail:s,preferredEmailLanguage:n.locale().toLowerCase(),classChannels:JSON.stringify(o)}):e={contactEmail:s,preferredEmailLanguage:n.locale().toLowerCase(),classChannels:JSON.stringify(f)};h={notifications:JSON.stringify(e)};a(h)}function a(t){$.ajax({method:"PUT",contentType:"application/json",url:"/"+n.locale()+"/dashboard/engagementapi/identity/preferences",data:JSON.stringify(t),error:function(n){console.log("Error updating user's identity level notification preferences upon feedback submission:"+n)}})}$("#partnerdash-feedback-subareas").on("open",function(n,t){$('#partnerdash-feedback-subarea > option[value!=""]').length&&$('#partnerdash-feedback-subarea > option[value!=""]').appendTo($("#partnerdash-feedback-subarea-all"));$("#partnerdash-feedback-subarea-all > option."+t).appendTo($("#partnerdash-feedback-subarea"));$("#partnerdash-feedback-subarea")[0].selectedIndex=0;$("#partnerdash-feedback-subareas").slideDown()});$("#partnerdash-feedback-subareas").on("close",function(){$("#partnerdash-feedback-subareas").slideUp();$('#partnerdash-feedback-subarea > option[value!=""]').appendTo($("#partnerdash-feedback-subarea-all"))});$("#onedash-feedback-icon").click(function(){$("#onedash-feedback-icon").toggleClass("is-selected");$("#partnerdash-feedback-panel").toggleClass("is-open");$("#partnerdash-feedback-panel").hasClass("is-open")&&($("#partnerdash-feedback-area").focus(),f())});$("#partnerdash-feedback-cancel").click(function(){$("#partnerdash-feedback-panel").removeClass("is-open");$("#onedash-feedback-icon").removeClass("is-selected");setTimeout(function(){r()},200)});$("#partnerdash-feedback-submit").click(function(){$("#partnerdash-feedback-submit").prop("disabled",!0);e()});$(document).click(function(n){$(n.target).closest("#onedash-feedback-icon, #partnerdash-feedback-panel").length||$("#partnerdash-feedback-panel").hasClass("is-open")&&($("#partnerdash-feedback-panel").removeClass("is-open"),$("#onedash-feedback-icon").removeClass("is-selected"))});$("#partnerdash-feedback-details").on("keyup",t);$("#partnerdash-feedback-area").on("change",o);$("input[name=ok-to-contact]").on("click",i)});define("gleam",["common-mod"],function(n){"use strict";function h(n,t,i,r,u,f,e,o,s){return'<li class="singleNotification '+n+'"><a href="'+t+'" data-bi-id="'+i+'" data-bi-product="'+r+'" data-version="'+u+'" data-bi-name="Click" role="menuitem"><div class="notificationMessage"><div class="notificationText"><span>'+f+'<\/span><\/div><div class="timeStamp pull-right">'+e+'<\/div><\/div><div class="clear"><\/div><\/a><div class="notificationDismissal"><button tabindex="0" data-bi-id="'+i+'" data-bi-product="'+r+'" data-version="'+u+'" data-bi-name="Dismiss" data-status="'+o+'" data-channel="'+s+'"><span class="win-icon win-icon-Cancel"><\/span><\/button><\/div><\/li>'}function b(n,t,i,r,u,f,e){return'<li class="singleNotification '+n+'"><a href="'+t+'" data-bi-id="'+i+'" data-bi-product="'+r+'" data-version="'+u+'" data-bi-name="Click" role="menuitem"><div class="notificationMessage"><div class="notificationText"><span>'+f+'<\/span><\/div><div class="timeStamp pull-right">'+e+'<\/div><\/div><div class="clear"><\/div><\/a><\/li>'}function k(n){var t=document.createElement("a");return t.href=n,t.host!==window.location.host}function e(t,i,r){$.ajax({method:"PATCH",data:i,url:"/"+n.locale()+"/notification/api/v"+r+"/notifications/"+t})}function o(){$("#notificationList").hasClass("is-open")&&($("#notificationList").removeClass("is-open"),$("#notificationGleam").removeClass("is-selected"),$("#newNotificationsCount").text("0"),$(".hasNotifications").fadeOut(300),$.ajax({method:"PATCH",url:"/"+n.locale()+"/notification/api/v2/notifications/markallasread",data:{markallasread:1}}))}function c(){t===0&&($("#notificationsSection .no-notification-text").fadeIn(300),$("#notificationsDisplayNew").fadeOut(300),$("#notificationsDisplayEarlier").fadeOut(300),$(".notificationHead").fadeOut(300))}function l(){i=i-1;i>99?$("#newNotificationsCount").text("99"):$("#newNotificationsCount").text(i);i===0&&$(".hasNotifications").fadeOut(300)}function a(){$("li.singleNotification a").off("click",y);$("li.singleNotification .notificationDismissal button").off("click",v);$("li.singleNotification a").on("click",y);$("li.singleNotification .notificationDismissal button").on("click",v)}function d(n,t,i){var r,u,f;n.length>=t&&(r=n[t-1],u="",r.status==2&&(u="clicked"),f=h(u,r.destination,r.clickTagName,r.id,r.version,r.title,r.timeStamp,r.status,r.channels[0]),$(i).append(f),a())}function v(){var n=$(this).attr("data-bi-product"),i=$(this).attr("data-version"),u=$(this).attr("data-status"),o=$(this).attr("data-channel");$(this).closest("li.singleNotification").remove();f=$.grep(f,function(t){return t.id!=n});d(f,10,"#notificationsDisplay");t=t-1;u==r.New&&l();e(n,{status:r.Archived},i);c();$("#notificationGleam").focus()}function y(){var i=$(this).attr("data-bi-product"),u=$(this).attr("data-version"),n=$(this).attr("href"),t=$(this).parent();return t.hasClass("clicked")||(t.addClass("clicked"),l(),e(i,{status:r.Clicked},u)),k(n)&&$(event.currentTarget).attr("target","_blank"),typeof FdSpaHelper!="undefined"&&FdSpaHelper.isSpaEnabledRoute(n)&&o(),!0}function g(n,t,i,r,u,f,e,o,s,h,c){var l=this;l.id=u;l.title=n;l.titleId=t;l.priority=i;l.category=r;l.destination=f?f:"javascript:void(0)";l.status=e;l.version=o;l.clickTagName=s;l.channels=h;l.timeStamp=c?c:""}function p(){$.getJSON("/"+n.locale()+"/notification/api/v1/notifications?top=10&channels=Gleam&channels=Suggestion",function(n){i=n.newNotificationsCount;t=0;i>0&&(i<99?$("#newNotificationsCount").text(i):$("#newNotificationsCount").text("99"),$("#notificationGleam .hasNotifications").fadeIn(300));n.notificationsCount===0&&n.recommendationsCount===0&&$("#notificationsSection .no-notification-text").fadeIn(300);n.notifications.forEach(function(n){var i=new g(n.title,n.titleId,n.priority,n.category,n.id,n.destination,n.status,n.version,n.clickTagName,n.channels,n.localeBasedCreatedTime),o="",c,l;i.status==2&&(o="clicked");c=h(o,i.destination,i.clickTagName,i.id,i.version,i.title,i.timeStamp,i.status,i.channels[0]);l=b(o,i.destination,i.clickTagName,i.id,i.version,i.title,i.timeStamp);i.priority===0?(i.status=r.New,e(i.id,{status:r.New},i.version),s.push(i),$("#notificationsDisplayNew").append(l)):(f.push(i),i.status==r.New?$("#notificationsDisplayNew").append(c):f.length<=10&&$("#notificationsDisplayEarlier").append(c));t=t+1;u.push(i)})}).done(function(){$("#notificationsLoading").remove();u.length===0?$(".no-notification-text").fadeIn(300):($("#notificationsDisplayNew li").length>0&&($("#newNotificationHead").fadeIn(300),$("#seeAllNotificationsNew").fadeIn(300),$("#notificationsDisplayNew").fadeIn(500)),$("#notificationsDisplayEarlier li").length>0&&($("#earlierNotificationHead").fadeIn(300),$("#notificationsDisplayEarlier").fadeIn(500),$("#notificationsDisplayNew li").length<=0&&$("#seeAllNotificationsEarlier").fadeIn(300)),(t>0||w.indexOf("partnercenterchina.microsoft")==-1)&&$("#seeAllNotifications").fadeIn(300),s.length==0&&u.length>0&&$("#clearAllNotifications").fadeIn(300));a()}).fail(function(){$("#notificationsLoading").remove()})}var r={New:0,Viewed:1,Clicked:2,Archived:3},t=0,i=0,u=[],f=[],s=[],w=window.location.href.toLowerCase();if(document.readyState==="complete")p();else $(window).on("load",function(){p()});$("#notificationGleam").click(function(){var t,i;if($("#notificationList").toggleClass("is-open"),$("#notificationGleam").toggleClass("is-selected"),!$("#notificationGleam").hasClass("is-selected")){for(t=0;t<u.length;++t)i=u[t],i.status==r.New&&(i.status=r.Viewed);$("#newNotificationsCount").text("0");$(".hasNotifications").fadeOut(300);$.ajax({method:"PATCH",url:"/"+n.locale()+"/notification/api/v2/notifications/markallasread",data:{markallasread:1}})}});$("a.hideNotificationList").click(o);$("#clearAllNotifications").click(function(){u=[];$.ajax({method:"PATCH",url:"/"+n.locale()+"/notification/api/v2/notifications/clearall",data:{clearall:1}});t=0;$("#newNotificationsCount").text(t);$(".hasNotifications").fadeOut(300);$("#clearAllNotifications").fadeOut(300);$("#notificationGleam").focus();c()});$(document).click(function(n){$(n.target).closest("#notificationGleam, #notificationList, .notificationDismissal").length||o()})});