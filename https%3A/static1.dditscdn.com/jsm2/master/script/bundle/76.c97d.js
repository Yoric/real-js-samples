(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{64979:function(e,t,i){"use strict";i.r(t);var s=i("1029"),n=i.n(s),r=i("71fb"),a=i("d869"),o=i.n(a),l=function e(t,i){e.superclass.constructor.call(this,t,i)};Ext.extend(l,n.a.Page,{init:function(e,t){l.superclass.init.call(this,e,t);try{var i=n.a.Storage.get(o.a.HTML5ChatPageComponent.APPLET_SIZE_STORAGE_LABEL)||o.a.HTML5ChatPageComponent.SIZE_FIX;Ext.fly("armageddonClient").data("size-type",i)}catch(e){}this.HTML5ChatPageComponent=new r.default("armageddonClient",{})}}),t.default=l},"83cb":function(e,t,i){var n=i("1029"),r=i("d869"),s=i("989a"),a=i("a5f8").default,o=function(e,t){o.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(o,n.Controller,{name:"ChatPageControllerAbstract",init:function(e,t){var i;o.superclass.init.call(this,e,t),this._isFirstPerfShown=this.model.isChatPage,i=this._getNormalizeAppletVars(),this._saveToHistory(i)},onPrivateStartClick:function(){this.model.setIsOnPrivate(!0)},onPrivateEnd:function(){this.model.setIsOnPrivate(!1)},registerHistory:function(){this.nextPerformerHistoryEntry="next-performer",n.History.registerActions(this.nextPerformerHistoryEntry,this.nextPerformerHistoryEntry,this.setNextModel,this),n.History.registerComponent(this,{state:this.nextPerformerHistoryEntry}),this.replaceState()},_saveToHistory:function(e){var t=e.p_id||e.pid,i=e.performer_id||e.performerid,s=e.status;a.instance.add({nick:i,id:t,status:s})},_getNormalizeAppletVars:function(){return n.Config.get("memberAppletFlashvars")?n.Config.get("memberAppletFlashvars"):n.Config.get("HTMLAppletVars")},replaceState:function(){throw"This method must be implemented."},setNextModel:function(e){if(!n.Config.get("isOnPrivate")){var t={performerId:e.name};this.model.getCurrentModelName()!==e.name&&(this.onGetPerformerDetails(t,!0),this.fireEvent(r.ChatPageController.HISTORY_CHANGE,e.name))}},getModelData:function(e){var t={};return"string"==typeof e?(t.performerId=e,t):e},onGetPerformerDetails:function(e){var t=this.getModelData(e),i=t.performerId;n.Config.set("performerChannelType",t.channelType),this._callPerformerDetailsService(i),this.model.setCurrentModelName(i);var s=this._getNormalizeAppletVars();this.fireEvent(r.ChatPageControllerAbstract.EVENT_MODEL_CHANGE,{modelData:t,flashVars:s,isFirstPerfShown:this._isFirstPerfShown}),this._isFirstPerfShown=!0},_callPerformerDetailsService:function(e){s.get(e).then(n.bind(this.onPerformerDetailsReady,this)).catch(n.bind(function(){s.get(e).then(n.bind(this.onPerformerDetailsReady,this)).catch(function(e){console.error(e)})},this))},onPerformerDetailsReady:function(e){var t=n.getPath(e,"json.data");this._performerData=e.responseText,this._refreshFlashVars(t),this._saveToHistory(t),this.setPerformerDetailsOnApplet()},_refreshFlashVars:function(e){n.Config.set("memberAppletFlashvars",e)},setPerformerDetailsOnApplet:function(){throw"You must implement setPerformerDetailsOnApplet method"}})},b441:function(e,t,i){var s=i("1029"),n=i("d869"),r=function(e){r.superclass.constructor.call(this,e)};e.exports=Ext.extend(r,s.View,{name:"FlashChatPageViewAbstract",windowResizeDebounceTime:300,mainContainerId:"chatblock",footerTopLinkSel:".footer_link",headerTopLinkClass:"header_top_link",chatAppletId:"chatapplet",headerId:"header",footerId:"footer",freechatId:"freechat",_memberAppletEl:null,_mainContainerEl:null,showHTMLClass:"show-html",showFlashClass:"show-flash",init:function(){this.addEvents(n.FlashChatPageViewAbstract.EVENT_WINDOW_RESIZE,n.FlashChatPageViewAbstract.EVENT_APPLET_MINIMIZE),this._selectElements(),r.superclass.init.call(this)},_selectElements:function(){this._freechatEl=Ext.get(this.freechatId),this._mainContainerEl=Ext.get(this.mainContainerId)},minimizeMemberApplet:function(){},setFreeChatBlock:function(){this._freechatEl.display("block")},_showChatBlock:function(){switch(Ext.getBody().addClass("chat-opened"),this._mainContainerEl.removeClass("hidden"),this.name){case"HTML5ChatPageModalView":this._mainContainerEl.removeClass(this.showFlashClass);break;case"FlashChatPageModalView":this._mainContainerEl.removeClass(this.showHTMLClass)}},createMemberAppletContainer:function(){this._freechatEl.createChild('<div id="'+this.chatAppletId+'"></div>'),this._freechatEl.display("block")},getAppletEl:function(){return this._memberAppletEl||(this._memberAppletEl=Ext.get(this.chatAppletId)),this._memberAppletEl},onAppletSizeChange:function(){this.getAppletEl(),this._memberAppletEl.dom.width="",this._memberAppletEl.dom.height=this.model.getAppletSize().height,this.element.setStyle({width:"",height:this.model.getAppletSize().height+"px"}),this._memberAppletEl.dom.removeAttribute("style")},minimizeApplet:function(){this.element.setStyle({width:"1px",height:"1px"}),this.fireEvent(n.FlashChatPageViewAbstract.EVENT_APPLET_MINIMIZE,this)},resetAppletSize:function(){this.element.setStyle({width:"",height:""}),this.getAppletEl().dom.removeAttribute("style")},onWindowResize:function(){this.fireEvent(n.FlashChatPageViewAbstract.EVENT_WINDOW_RESIZE,{scope:this})},removeMemberApplet:function(){this.getAppletEl().remove(),this._memberAppletEl=null},onLayoutModeChange:function(){this.model.isCurrentLayoutMode(n.FlashChatPageControllerAbstract.LAYOUT_MODE_NORMAL)||this.model.isCurrentLayoutMode(n.FlashChatPageControllerAbstract.LAYOUT_MODE_FULLSCREEN)?this._mainContainerEl.removeClass(n.FlashChatPageControllerAbstract.LAYOUT_MODE_FULL):this._mainContainerEl.addClass(n.FlashChatPageControllerAbstract.LAYOUT_MODE_FULL)},updateScrollPosition:function(e){var t=window.scrollX||window.pageXOffset||document.documentElement.scrollLeft,i=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;window.scrollTo(t,i+e)},bind:function(){r.superclass.bind.call(this),s.on([{element:Ext.fly(window),event:"resize",handler:s.debounce(this.onWindowResize,this.windowResizeDebounceTime)},{element:this.model,event:n.ChatPageModel.EVENT_LAYOUT_MODE_CHANGE,handler:this.onLayoutModeChange},{element:this.model,event:n.ChatPageModel.EVENT_APPLET_SIZE_CHANGE,handler:this.onAppletSizeChange}],this)}})}}]);