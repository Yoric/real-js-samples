KISSY.add("jbc/lazyload/1.1.7/index",function(t,e,a,n,o,r){function i(a,n,o){a.style.display=b,a.className="";var r=e.create("<div>");a.parentNode.insertBefore(r,a);var i=a.value;if(t.isFunction(o)){var s=o({type:"textarea",elem:a,value:i});s&&(i=s)}e.html(r,i,n)}function s(e,a){var n,o;return(n=e.id)||(n=e.id=t.guid("ks-lazyload")),(o=a.ksLazyloadId)||(o=a.ksLazyloadId=t.guid("ks-lazyload")),n+o}function c(t){return t._ks_lazy_width?t._ks_lazy_width:t._ks_lazy_width=e.outerWidth(t)}function l(t){return t._ks_lazy_height?t._ks_lazy_height:t._ks_lazy_height=e.outerHeight(t)}function u(t,a,n){if(!t.offsetWidth)return!1;var o,r=e.offset(t),i=!0,s=r.left,u=r.top,f={left:s,top:u,right:s+c(t),bottom:u+l(t)};return o=d(a,f),o&&n&&(i=d(n,f)),i&&o}function d(t,e){var a={};return a.top=Math.max(t.top,e.top),a.bottom=Math.min(t.bottom,e.bottom),a.left=Math.max(t.left,e.left),a.right=Math.min(t.right,e.right),a.bottom>=a.top&&a.right>=a.left}function f(e,a){var n=this;if(!(n instanceof f))return new f(e,a);var o=e;t.isPlainObject(o)||(o=a||{},e&&(o.container=e)),f.superclass.constructor.call(n,o),n._callbacks={},n._containerIsNotDocument=9!=n.get("container").nodeType,n._images=[],n._textareas=[],n._initLoadEvent()}function g(a,n,o,r){"img-src"===n&&(n="img"),t.isArray(a)||(a=[e.get(a)]);var s=o||h+p,c=o||v+p;t.each(a,function(t){var a=e.nodeName(t);"img"==n?"img"==a?z(t,s,r):e.query("img",t).each(function(t){z(t,s,r)}):"textarea"==a?e.hasClass(t,c)&&i(t,!0,r):e.query("textarea."+c,t).each(function(t){i(t,!0,r)})})}var m=t.Env.host,_=m.document,h="data-ks-lazyload",v="ks-datalazyload",p="-custom",y="default",b="none",w="scroll",A="touchmove",x="resize",k=100,I=this.name,S=function(t){return(~t.indexOf("alicdn.com")||~t.indexOf("taobaocdn.com"))&&(~t.indexOf(".jpg")||~t.indexOf(".png"))&&(t+="_.webp"),t},z=function(e,a,n){function o(t){e.src!=t&&(e.src=t),e.removeAttribute(a)}a=a||h;var r=e.getAttribute(a),i={type:"img",elem:e,src:r},s=!t.isFunction(n)||n(i)!==!1;s&&i.src&&(f.webp?t.use(new t.Uri(I).resolve("./plugin/webp").toString(),function(){WebP.isSupport(function(t){o(t?S(i.src):i.src)})}):o(i.src))};return f.ATTRS={diff:{value:y},placeholder:{value:"//g.alicdn.com/s.gif"},execScript:{value:!0},container:{setter:function(a){return a=a||_,t.isWindow(a)?a=a.document:(a=e.get(a),"body"==e.nodeName(a)&&(a=a.ownerDocument)),a},valueFn:function(){return _}},autoDestroy:{value:!0},onStart:{vaule:null},scrollBuffer:{value:!0}},t.extend(f,n,{_filterItems:function(){var a=this,n=a.userConfig,o=a.get("container"),r=[],i=[],s=[o];t.isArray(n.container)&&(a._backCompact=1,s=n.container),t.each(s,function(n){r=r.concat(t.filter(e.query("img",n),a._filterImg,a)),i=i.concat(e.query("textarea."+v,n))}),a._images=r,a._textareas=i},_filterImg:function(t){var e=this,a=e.get("placeholder");return t.getAttribute(h)?(t.src||(t.src=a),!0):r},_initLoadEvent:function(){function e(){a._filterItems(),a._isLoadAllLazyElements()||t.ready(i),a.resume()}var a=this,n=new Image,o=a.get("placeholder"),r=a.get("autoDestroy"),i=function(){a._loadItems(),r&&a._isLoadAllLazyElements()&&a.destroy()},s=k;a._loadFn=this.get("scrollBuffer")?t.buffer(i,s,a):i,n.complete?e():n.onload=e,n.src=o},refresh:function(){this._loadFn()},_loadItems:function(){var t,e,a=this,n=a.get("container");(!a._containerIsNotDocument||n.offsetWidth)&&(e=a._getBoundingRect(),!a._backCompact&&a._containerIsNotDocument&&(t=a._getBoundingRect(a.get("container"))),a._loadImgs(e,t),a._loadTextAreas(e,t),a._fireCallbacks(e,t))},_loadImgs:function(e,a){var n=this;n._images=t.filter(n._images,function(t){return u(t,e,a)?z(t,r,n.get("onStart")):!0},n)},_loadTextAreas:function(e,a){var n=this,o=n.get("execScript");n._textareas=t.filter(n._textareas,function(t){return u(t,e,a)?i(t,o,n.get("onStart")):!0},n)},_fireCallbacks:function(e,a){var n=this,o=n._callbacks;t.each(o,function(t,n){var r=t.el,i=!1,s=t.fn;u(r,e,a)&&(i=s.call(r)),i!==!1&&delete o[n]})},addCallback:function(t,a){var n=this,o=n._callbacks;t=e.get(t),o[s(t,a)]={el:e.get(t),fn:a},n._loadFn()},removeCallback:function(t,a){var n=this._callbacks;t=e.get(t),delete n[s(t,a)]},getElements:function(){return{images:this._images,textareas:this._textareas}},addElements:function(a){"string"==typeof a?a=e.query(a):t.isArray(a)||(a=[a]);var n=this,o=n._images||[],r=n._textareas||[];t.each(a,function(e){var a=e.nodeName.toLowerCase();"img"==a?t.inArray(e,o)||o.push(e):"textarea"==a&&(t.inArray(e,r)||r.push(e))}),n._images=o,n._textareas=r},removeElements:function(a){"string"==typeof a?a=e.query(a):t.isArray(a)||(a=[a]);var n=this,o=[],r=[];t.each(n._images,function(e){t.inArray(e,a)||o.push(e)}),t.each(n._textareas,function(e){t.inArray(e,a)||r.push(e)}),n._images=o,n._textareas=r},_getBoundingRect:function(a){var n,o,i,s;if(a!==r){n=e.outerHeight(a),o=e.outerWidth(a);var c=e.offset(a);i=c.left,s=c.top}else n=e.viewportHeight(),o=e.viewportWidth(),i=e.scrollLeft(),s=e.scrollTop();var l=this.get("diff"),u=l===y?o:l,d=0,f=u,g=l===y?n:l,m=0,_=g,h=i+o,v=s+n;return t.isObject(l)&&(d=l.left||0,f=l.right||0,m=l.top||0,_=l.bottom||0),i-=d,h+=f,s-=m,v+=_,{left:i,top:s,right:h,bottom:v}},_isLoadAllLazyElements:function(){var e=this;return e._images.length+e._textareas.length+(t.isEmptyObject(e._callbacks)?0:1)==0},pause:function(){var t=this,e=t._loadFn;if(!t._destroyed&&(a.remove(m,w,e),a.remove(m,A,e),a.remove(m,x,e),e.stop&&e.stop(),t._containerIsNotDocument)){var n=t.get("container");a.remove(n,w,e),a.remove(n,A,e)}},resume:function(){var t=this,e=t._loadFn;if(!t._destroyed&&(a.on(m,w,e),a.on(m,A,e),a.on(m,x,e),t._containerIsNotDocument)){var n=t.get("container");a.on(n,w,e),a.on(n,A,e)}},destroy:function(){var e=this;e.pause(),e._callbacks={},e._images=[],e._textareas=[],t.log("datalazyload is destroyed!"),e.fire("destroy"),e._destroyed=1}}),f.loadCustomLazyData=g,f.webp=!0,t.DataLazyload=f,f},{requires:["dom","event","base","./plugin/webp"]}),KISSY.add("jbc/lazyload/1.1.7/plugin/webp",function(){return function(){function t(t){if(!window.chrome&&!window.opera)return void t(!1);var a=window.localStorage&&window.localStorage.getItem("webpsupport");return null!==a?void t("true"===a):void e(function(e){window.localStorage&&window.localStorage.setItem("webpsupport",e),t(e)})}function e(t){var e=new Image;e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",e.onload=e.onerror=function(){t(2===e.width&&2===e.height)}}this.WebP||(this.WebP={},WebP.isSupport=function(e){return e?void 0===WebP._isSupport?void t(function(t){e(WebP._isSupport=t)}):void e(WebP._isSupport):void 0})}(),window.WebP},{attach:!1,requires:[]}),KISSY.config("modules",{"jbc/lazyload/1.1.7/index":{requires:["dom","event","base","./plugin/webp"]}});KISSY.add("jbc/julog/1.0.14/index",function(e,n,t){function o(e,n,t,o){l[t]=l[t]?l[t]+1:1;var a=1;if(-1!=n){var c=13;n=Math.max(n,c+4);var i=Math.floor((+new Date+288e5)/(864e5/p.length))%p.length;if(a=Math.round(Math.pow(2,n-c)*p[i])||1,Math.floor(Math.random()*a)>0)return}var m=["[uhttp://ju.taobao.com/track/"+e+"/]","[t"+(+new Date-(window.g_config&&g_config.startTime||0))+"]","[c"+t+"]","[r"+a+"]"].join("")+(o||"");r(e,m,a)}function a(e,n,t,o){l[n]=l[n]?l[n]+1:1;var a=1;if(-1!=o){var r=13;o=Math.max(o,r+4);var i=Math.floor((+new Date+288e5)/(864e5/p.length))%p.length;if(a=Math.round(Math.pow(2,o-r)*p[i])||1,Math.floor(Math.random()*a)>0)return}var m="//gm.mmstat.com/jhs.1.9?"+["type="+e,"id="+n,"value="+t,"rate="+a].join("&");c(m)}function r(e,t,o){var a,r="";try{a=n.get("_nk_")||n.get("lgc")||n.get("tracknick"),a&&(r=decodeURIComponent(a))}catch(i){}var m="//gm.mmstat.com/jstracker.2?"+["type=9","id=jstracker","v=0.01","nick="+encodeURIComponent(r),"islogin=0","msg="+encodeURIComponent(t),"file="+encodeURIComponent("http://ju.taobao.com/track/"+e+"/"),"line="+o,"scrolltop="+(document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0),"screen="+screen.width+"x"+screen.height,"t="+(new Date).valueOf()].join("&");c(m)}function c(e){var n=new Image,t="_img_"+Math.random();return window[t]=n,n.onload=n.onerror=function(){window[t]=null},n.src=e,n=null,e}function i(n,t){var o="//gm.mmstat.com/",a={};if(o+=t?t+"?":"jhs.318.1.1?",h&&n.spmid){a["spm-cnt"]=h+"."+n.spmid+".0";var r=n._expose?n._expose.split(","):[];e.each(r,function(e){n[e]&&(a[e]=n[e])}),r.length&&((new Image).src=decodeURIComponent(o+e.param(a)))}}function m(n,t){var o="",a=t||"_detailExpose";if(n&&n[a]){var r=n[a].split(",");return e.each(r,function(e){"undefined"!=typeof n[e]&&(o+="&"+e+"="+encodeURIComponent(n[e]))}),o}}function d(n,t){var o="//gm.mmstat.com/";if(o+=t?t+"?":"jhs.318.1.2?",h&&n.spmid){var a={};a["spm-cnt"]=h+"."+n.spmid+".0";var r=n._expose?n._expose.split(","):[];e.each(r,function(e){n[e]&&(a[e]=n[e])}),f[n.spmid]?f[n.spmid].push(a):f[n.spmid]=[a],clearTimeout(s),s=setTimeout(function(){e.each(f,function(n){var t=[],a=[],r=n[0];e.each(n,function(e){e.itemIds&&t.push(e.itemIds),e.brandIds&&a.push(e.brandIds)}),t.length&&(r.itemIds=t.join("^")),a.length&&(r.brandIds=a.join("^")),(new Image).src=decodeURIComponent(o+e.param(r))}),f={}},500)}}var s,u=t.all,l={},p=[.39,.34,.3,.26,.22,.2,.17,.15,.13,.11,.1,.09,.08,.07,.06,.05,.05,.04,.04,.04,.03,.03,.03,.03,.03,.03,.02,.02,.02,.02,.02,.02,.02,.02,.03,.03,.03,.03,.04,.04,.05,.06,.06,.07,.09,.11,.14,.22,.41,.51,.7,.91,1.13,1.32,1.44,1.54,1.62,1.72,1.77,1.87,2.06,2.01,1.99,1.98,1.96,1.93,1.89,1.84,1.73,1.58,1.49,1.39,1.24,1.26,1.33,1.4,1.44,1.52,1.73,1.44,1.39,1.38,1.39,1.4,1.4,1.41,1.42,1.44,1.47,1.49,1.49,1.48,1.48,1.48,1.48,1.49,1.47,1.46,1.45,1.43,1.41,1.37,1.28,1.24,1.16,1.04,1.01,1.04,1.21,.93,.93,.94,.97,1.05,1.11,1.16,1.21,1.24,1.24,1.27,1.28,1.3,1.33,1.33,1.32,1.34,1.32,1.3,1.29,1.26,1.25,1.22,1.16,1.09,1.04,.99,.94,.87,.8,.73,.66,.6,.55,.5],h=u('meta[name="spm-id"]').attr("content"),f={};return{getDetailExposeParam:m,track:o,log:a,exposure:i,exact:d}},{requires:["cookie","node"]}),KISSY.config("modules",{"jbc/julog/1.0.14/index":{requires:["cookie","node"]}});KISSY.add("jbc/julogin/1.1.4/index",function(i,o){function t(i,t){o.check()?i.apply(t):o.show({type:"m"},function(){i.apply(t)})}return t.isLogin=o.check,t.login=o.show,t},{requires:["./login"]}),KISSY.add("jbc/julogin/1.1.4/login",function(i,o,t,e,n){function r(){var i='<div id="J_LoginContainer" class="login-container" style="width:'+k.width+"px;height:"+(k.height+40)+'px"><div class="login-bg"></div><div class="login-wrapper"><div class="login-hd">淘宝会员</div><div class="login-bd"><iframe data-status="0" frameborder="0" width="'+k.width+'" height="'+k.height+'" scrolling="no" id="J_LoginFrame" name="LoginFrame" src="about:blank" onload="_TBC_MiniLogin_Check(this.id, this.name)"></iframe></div><div class="login-ft"><a class="login-close J_LoginClose" target="_self" title="关闭此窗口" href="javascript:void(0)">×</a></div></div></div>',t=o.create(i);return o.addStyleSheet(C),o.append(t,document.body),a(t),t}function a(i){t.on(i,"click",function(i){var t=i.target;o.hasClass(t,"J_LoginClose")&&p()})}function c(i){i=i||"m";var o=n.get("_l_g_"),t=n.get("lgc");return"m"===i?!!o:"l"==i?!!t:void 0}function l(i,o){return y&&!c(i)?(o&&s(),!1):void e.getScript(w,function(){"undefined"!=typeof loginIndicator&&(loginIndicator.hasLoggedIn?f():o&&s())})}function s(){var i,t,e=o.get("#J_LoginContainer");e||(e=r()),i=o.get("#J_LoginFrame"),t=b.build(_,{redirect_url:k.redirect_url,from:k.from}),o.css(e,"display","block"),g(),o.attr(i,"data-status","0"),i.src=L}function g(){d(),t.on(window,I,d)}function d(){var t,e,n=o.get("#J_LoginContainer");i.isObject(m)?(t=m.left||0,e=m.top||0):(t=parseInt(o.viewportWidth()/2)-parseInt(n.offsetWidth/2)+"px",e=(F?o.scrollTop():0)+parseInt(o.viewportHeight()/2)-parseInt(n.offsetHeight/2)+"px"),o.css(n,{top:e,left:t})}function p(){var i=o.get("#J_LoginContainer");return i?(o.css(i,"display","none"),void t.remove(window,I,d)):!1}function f(){p(),u&&u()}var u,h,m,v=i.unparam(location.search.slice(1))._login_daily_,x=v||-1!==location.host.indexOf(".daily."),b={getServer:function(i){var o,t,e=/\{(.+?)Server\}/i,n=e.exec(i);return n&&n[1]?(o=n[1],t=x?i.replace(e,"daily."+o+".net"):i.replace(e,o+".com")):t=i,t},build:function(o,t){var e=-1!==o.indexOf("?"),n=e?"&":"?";return i.isObject(t)?o+n+i.param(t):o+n+t}},y=/taobao|tmall/.test(location.host),_=b.getServer("https://login.{taobaoServer}/member/login.jhtml?style=mini&is_ignore=false&newMini2=true"),w=b.getServer("//buy.{taobaoServer}/auction/buy.htm?from=itemDetail"),j=window.g_config?g_config.loginCfg:{},S="https:"===location.protocol?"https:":"http:",k=i.merge({width:350,height:478,redirect_url:S+"//tms.alicdn.com/go/act/loginsuccess/taobao.php"},j||{}),L=b.build(_,{redirect_url:k.redirect_url,from:k.from}),C=".login-container{display:none;opacity:1;position:fixed;_position:absolute;z-index:100000000;background-color:#fafafa;}.login-container .login-bg{position:absolute;z-index:0;width:100%;height:100%;border:5px solid #999;left: -5px;top: -5px;opacity: 0.2;}.login-container .login-wrapper{position:relative;z-index:1;}.login-container .login-hd{height:40px;line-height:40px;padding-right:14px;font-weight:700;font-size:14px;background-color:#f40;color:#fff;text-align:right;}.login-container .login-ft{background-color:#F5F5F5;}.login-container .login-close{position:absolute;top:8px;left:5px;width:24px;height:24px;text-align:center;line-height:24px;color:#fff;font-family:Tahoma,sans;font-size:22px;text-decoration:none;opacity:0.8;}.login-container .login-close:hover{opacity: 1;border-radius: 12px;background: #FFF;color: #f40;text-decoration: none;}",F=6===i.UA.ie,I=F?"scroll resize":"resize";return window._TBC_MiniLogin_Check=function(i,t){var e=o.get("#"+i),n=!1;if("0"===o.attr(e,"data-status"))o.attr(e,"data-status","1");else{try{href=win.frames[t].location.host,href?-1===href.indexOf("login")&&f():n=!0}catch(r){n=!0}n&&("m"==h?l():c(h)&&f())}},{check:c,show:function(o,t){i.isFunction(o)?(t=o,type="m"):(o=i.isObject(o)?o:{type:i.isString(o)?o:"m"},type=o.type||"m",m=o.position),h=type,u=t,"m"===type?l(type,!0):c(type)?u&&u():s()},hide:function(){p()},ajax:function(i,o,t){var n=this,r=i.success,a=function(){e(i)};return r?(t=t||"m",i.success=function(i){o(i)?r(i):n.show(t,a)},y&&!c(t)?n.show(t,a):void a()):!1}}},{requires:["dom","event","ajax","cookie"]}),KISSY.config("modules",{"jbc/julogin/1.1.4/index":{requires:["./login"]},"jbc/julogin/1.1.4/login":{requires:["dom","event","ajax","cookie"]}});