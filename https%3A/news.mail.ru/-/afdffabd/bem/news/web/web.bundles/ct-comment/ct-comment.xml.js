!function(e){e.fest||(e.fest={}),e.fest["ct-comment.xml"]=e.fest["bem/news/web/web.bundles/ct-comment"]=function(e){"use strict";var t,x,y,d,a,v,b,f,s,c=this,r="",m=[],n=[],i="",k={},o="",l="",h="",u=[],p={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,wbr:!0},_=/[&<>"]/g,g=/[&<>"]/,P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},C=function(e){return"string"==typeof e&&g.test(e)?e.replace(_,j):null==e?"":e},j=function(e){return P[e]},M=function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},T=function(e){return e.param=!0,e};c&&"function"==typeof c.i18n&&c.i18n;function w(e){s(e+'\nin block "'+h+'" at line: '+l+"\nfile: "+o)}function N(e,t,a){if(a)for(var s in t)"function"==typeof t[s]&&t[s].param&&(t[s]=t[s]());return e.call(c,t)}s="undefined"==typeof __fest_error?"undefined"!=typeof console&&console.error?function(){return Function.prototype.apply.call(console.error,console,arguments)}:function(){}:__fest_error;var S;if(k.ajax=function(e){var t="";try{y=e.html}catch(e){y=!1,w(e.message)}if(y)try{t+=e.html}catch(e){w(e.message+"5")}return t},k.element=function(e){var t,a,s,c,r="";try{var m=e.baseParams||e.forParams||e,n=m.attrs||{},i=e.baseClass||e.forClass||"",o=e.elem,l=e.htmlDeep;o&&l&&!o.htmlDeep?o.htmlDeep=l:!o&&l&&(e.html=l),e.href&&(n.href=e.href)}catch(e){w(e.message)}try{"string"!=typeof(f=(n.href?"a":e.tagName)||"div")&&(w("Element name must be a string"),f="div")}catch(e){f="div",w(e.message)}u.push(f),r+="<"+f,r+=' class="';try{x=fest._helpers.classNamesFor(i,m)}catch(e){x="",w(e.message)}r+=x,r+='"';try{t=n||{}}catch(e){d={},w(e.message)}for(a in t){s=t[a];try{x=a}catch(e){x="",w(e.message)}if(""!==x){r+=" "+x+'="';try{r+=C(s)}catch(e){w(e.message+"25")}r+='"'}}try{c=e.attrsNoEscape||{}}catch(e){d={},w(e.message)}for(a in c){s=c[a];try{x=a}catch(e){x="",w(e.message)}if(""!==x){r+=" "+x+'="';try{r+=s}catch(e){w(e.message+"30")}r+='"'}}r+=(f=u[u.length-1])in p?"/>":">";try{y=e.htmlPrepend}catch(e){y=!1,w(e.message)}if(y)try{r+=e.htmlPrepend}catch(e){w(e.message+"36")}try{y=e.html}catch(e){y=!1,w(e.message)}if(y)try{r+=e.html}catch(e){w(e.message+"39")}try{y=e.elem}catch(e){y=!1,w(e.message)}if(y){x="element",b={};try{b=e.elem}catch(e){w(e.message)}(v=k[x])&&(r+=N(v,b,!1))}try{y=e.elems}catch(e){y=!1,w(e.message)}if(y){var h,_,g;try{_=(g=e.elems||[]).length}catch(e){g=[],_=0,w(e.message)}for(h=0;h<_;h++){o=g[h];try{y=o}catch(e){y=!1,w(e.message)}if(y){x="element",b={};try{b=o}catch(e){w(e.message)}(v=k[x])&&(r+=N(v,b,!1))}}}try{y=e.htmlAppend}catch(e){y=!1,w(e.message)}if(y)try{r+=e.htmlAppend}catch(e){w(e.message+"52")}return(f=u[u.length-1])in p||(r+="</"+f+">"),u.pop(),r},k.share=function(r){var e="";try{y=r.name}catch(e){y=!1,w(e.message)}if(y){try{r.innerParams||r.innerMix,r.countParams||r.countMix}catch(e){w(e.message)}x="element",b={};try{M(b,r)}catch(e){w(e.message)}try{M(b,{baseClass:"share"})}catch(e){w(e.message)}try{M(b,fest._helpers.mergeTopParams(r,{mods:[r.name],attrs:{"data-share":r.name}}))}catch(e){w(e.message)}b.html=T(function(){var e,t,a="";t={};try{M(t,r.buttonParams)}catch(e){w(e.message)}try{M(t,{baseClass:"share__button"})}catch(e){w(e.message)}return t.html=T(function(){var e,t,a,s,c="";e="icon",s={};try{M(s,{name:r.name})}catch(e){w(e.message)}try{M(s,r.iconParams)}catch(e){w(e.message)}try{M(s,fest._helpers.mergeTopParams({mods:["social","social_"+r.name]},r.iconParams))}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1));try{t=r.text}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,r.textParams)}catch(e){w(e.message)}try{M(s,{tagName:"span",baseClass:"share__text",html:r.text})}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}return c}),(e=k.element)&&(a+=N(e,t,!0)),a}),(v=k[x])&&(e+=N(v,b,!0))}return e},k.icon=function(r){var e="";try{var m=r.svg}catch(e){w(e.message)}x="element",b={};try{M(b,r)}catch(e){w(e.message)}try{M(b,fest._helpers.mergeTopParams(r,{mods:m?["svg"]:[],attrs:r.title&&{title:r.title}}))}catch(e){w(e.message)}try{M(b,{tagName:r.tagName||r.tag||"span",baseClass:"icon"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s,c="";try{t=m&&m.name}catch(e){t=!1,w(e.message)}if(t){e="icon__svg_defs",s={};try{s=m}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t=r.icon}catch(e){t=!1,w(e.message)}if(t){e="icon",s={};try{s=r.icon}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t=r.html}catch(e){t=!1,w(e.message)}if(t)try{c+=r.html}catch(e){w(e.message+"35")}return c}),(v=k[x])&&(e+=N(v,b,!0)),e},k.icon__svg_defs=function(a){var e="";x="element",b={};try{M(b,a)}catch(e){w(e.message)}try{M(b,fest._helpers.mergeTopParams(a,{mods:[a.name],attrs:a.viewbox&&{viewbox:a.viewbox}}))}catch(e){w(e.message)}try{M(b,{tagName:"svg",baseClass:"icon__svg"})}catch(e){w(e.message)}return b.html=T(function(){var t,e="";e+='<use xlink:href="';try{t="#icon__svg_"+a.name}catch(e){t="",w(e.message)}return e+=t,e+='"></use>'}),(v=k[x])&&(e+=N(v,b,!0)),e},k.link=function(r){var e="";try{var m,n=r.textParams||{mods:r.textMods||[],mix:r.textMix||[]},i=r.endingParams||{mods:r.endingMods||[],mix:r.endingMix||[]},o=r.icon;o&&(m=o.position||"left",o.mix=o.mix||[],o.mix.push("link__icon"),o.mix.push("margin_"+("left"==m?"right":"left")+"_"+(o.marginSize||5)),r.mods=r.mods||[],r.mods.push("icon")),r.ending&&(n.mix=["margin_right_5"].concat(n.mix||[]))}catch(e){w(e.message)}x="element",b={};try{M(b,r)}catch(e){w(e.message)}try{M(b,{baseClass:"link",tagName:"span"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s,c="";try{t="left"==m}catch(e){t=!1,w(e.message)}if(t){e="icon",s={};try{s=o}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t=r.beginning||r.beginningParams}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,{baseClass:"link__beginning",tagName:"span",html:r.beginning})}catch(e){w(e.message)}try{M(s,r.beginningParams)}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t="text"in r}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,n)}catch(e){w(e.message)}try{M(s,{baseClass:"link__text",tagName:"span",html:r.text})}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t=r.ending}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,i)}catch(e){w(e.message)}try{M(s,{baseClass:"link__ending",tagName:"span",html:r.ending})}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t="right"==m}catch(e){t=!1,w(e.message)}if(t){e="icon",s={};try{s=o}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}return c}),(v=k[x])&&(e+=N(v,b,!0)),e},k.avatar=function(e){var t="";try{var a={32:90,45:90},s=e.user,c=e.avatarSize,r=e.src;!r&&s&&(c||(c=90),r=fest._helpers.avatar({email:s.email,name:s.name,domain:s.domain,filin_domain:s.filin_domain,filin_d:s.filin_d,width:c in a?a[c]:180}))}catch(e){w(e.message)}x="element",b={};try{M(b,e)}catch(e){w(e.message)}try{M(b,fest._helpers.mergeTopParams(e,c&&{mods:["size_"+c]},r&&{attrs:{style:"background-image: url('"+r+"');"}}))}catch(e){w(e.message)}try{M(b,{baseClass:"avatar",tagName:"span"})}catch(e){w(e.message)}return(v=k[x])&&(t+=N(v,b,!1)),t},k.like=function(i){var e="";try{var o,t=i.data||{},c=parseInt(t.count,10)||0}catch(e){w(e.message)}x="element",b={};try{M(b,i)}catch(e){w(e.message)}try{M(b,fest._helpers.mergeTopParams({mods:0!==c?["count"]:[]},i))}catch(e){w(e.message)}try{M(b,{baseClass:"like"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s="";e="element",a={};try{M(a,i.countParams)}catch(e){w(e.message)}try{M(a,{baseClass:"like__count",html:0<c?"+"+c:String(c)})}catch(e){w(e.message)}(t=k[e])&&(s+=N(t,a,!1)),e="element",a={};try{M(a,i.controlsParams)}catch(e){w(e.message)}try{M(a,{baseClass:"like__controls"})}catch(e){w(e.message)}return a.html=T(function(){var t,e,a,s,c,r,m,n="";try{r=(m=["like","dislike"]).length}catch(e){m=[],r=0,w(e.message)}for(s=0;s<r;s++){c=m[s];try{o=i[c+"Params"]}catch(e){w(e.message)}try{t=o}catch(e){t=!1,w(e.message)}if(t){a={};try{M(a,o)}catch(e){w(e.message)}try{M(a,fest._helpers.mergeTopParams(o,{mods:[c]}))}catch(e){w(e.message)}try{M(a,{baseClass:"like__control"})}catch(e){w(e.message)}a.html=T(function(){var t,e,a,s="";try{t=o.icon}catch(e){t=!1,w(e.message)}if(t){a={};try{M(a,o.icon)}catch(e){w(e.message)}try{M(a,fest._helpers.mergeTopParams(o.icon,{mix:["like__icon"]}))}catch(e){w(e.message)}(e=k.icon)&&(s+=N(e,a,!1))}return s}),(e=k.element)&&(n+=N(e,a,!0))}}return n}),(t=k[e])&&(s+=N(t,a,!0)),s}),(v=k[x])&&(e+=N(v,b,!0)),e},k.comment=function(r){var e="";try{var m=fest._helpers.mergeTopParams,n=!!r.is_hidden,t=!!r.is_current_user,a=!n&&"complaints_cnt"in r&&parseInt(r.complaints_cnt,10)>s,s=r.complaintsCountMax||0,i=r.author||{},o=r.like;r.mix=r.mix||["js-comments_comment"],r.mods=o&&o.tooltip&&["tooltip"]||[],r.attrs=r.attrs||{"data-id":r.id,id:"comment-"+r.id}}catch(e){w(e.message)}x="element",b={};try{M(b,r)}catch(e){w(e.message)}try{M(b,m(r,n?{mods:["deleted"]}:null,a?{mods:["bad"]}:null,t?{mods:["current"]}:null,r.clbScroll?{attrs:{"data-counter":r.clbScroll},mix:["js-track_scroll"]}:null))}catch(e){w(e.message)}try{M(b,{baseClass:"comment",href:null})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s,c="";try{t=n}catch(e){t=!1,w(e.message)}if(t){e="link",s={};try{s={mix:["margin_left_10"],icon:{mods:["delete_rect"],mix:["color_red_normal"]},text:"Комментарий удален."}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),e="link",s={};try{M(s,m(r.removedParams,{mods:["dashed"],mix:["margin_left_5","js-comments_rules"]}))}catch(e){w(e.message)}try{M(s,{href:"#rules",text:"Почему?"})}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}else{c+='\x3c!--noindex--\x3e<div class="comment__left">',e="avatar",s={};try{s={src:i.src,user:{name:i.nick,email:i.email,domain:i.domain,filin_domain:i.filin_domain,filin_d:i.filin_d},avatarSize:r.avatarSize||45,mix:r.avatarMix||["comment__avatar"],href:i.href}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),c+='</div>\x3c!--/noindex--\x3e<div class="comment__body">';try{t=o}catch(e){t=!1,w(e.message)}if(t){e="comment__like",s={};try{s=o}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}e="comment__info",s={};try{s=r}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1));try{t=r.parent_reply}catch(e){t=!1,w(e.message)}if(t){e="comment__history",s={};try{s=r}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t=r.content_to_web}catch(e){t=!1,w(e.message)}if(t){c+='<div class="comment__text">';try{c+=r.content_to_web}catch(e){w(e.message+"116")}c+="</div>"}e="comment__actions",s={};try{s=r}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1));try{t=r.bans_cnt}catch(e){t=!1,w(e.message)}if(t){e="comment__bans",s={};try{s=r}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}e="element",s={};try{s={baseClass:"comment__form",mix:r.formMix||["js-comments_form_cont"]}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),c+="</div>"}return c}),(v=k[x])&&(e+=N(v,b,!0)),e},k.scroll=function(e){var t="";try{e.type=e.type||"vertical";var a=e.trackParams||{},s=e.trackBoxParams||{},c=e.dragParams||{},r=e.dragWrapParams||{};e.mix=e.mix||["js-scrollbar"],s.mix=s.mix||["js-scrollbar__track"],r.mix=r.mix||["js-scrollbar__track__drag__point"],c.mix=c.mix||["js-scrollbar__track__drag"]}catch(e){w(e.message)}try{n[0]=C(fest._helpers.classNamesFor("scroll",e))}catch(e){n[0]="",w(e.message)}try{n[1]=C(e.type)}catch(e){n[1]="",w(e.message)}t+='<div class="'+n[0]+'" data-type="'+n[1]+'">';try{n[0]=C(fest._helpers.classNamesFor("scroll__track",a))}catch(e){n[0]="",w(e.message)}t+='<div class="'+n[0]+'">';try{n[0]=C(fest._helpers.classNamesFor("scroll__track__box",s))}catch(e){n[0]="",w(e.message)}t+='<div class="'+n[0]+'">';try{n[0]=C(fest._helpers.classNamesFor("scroll__track__drag-wrap",r))}catch(e){n[0]="",w(e.message)}t+='<div class="'+n[0]+'">';try{n[0]=C(fest._helpers.classNamesFor("scroll__track__drag",c))}catch(e){n[0]="",w(e.message)}return t+='<div class="'+n[0]+'"></div></div></div></div></div>'},k.tooltip__box=function(r){var e="";x="element",b={};try{M(b,r)}catch(e){w(e.message)}try{M(b,{baseClass:"tooltip__box"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a="";t={};try{M(t,r.innerParams)}catch(e){w(e.message)}try{M(t,{baseClass:"tooltip__inner"})}catch(e){w(e.message)}return t.html=T(function(){var e,t,a,s,c="";try{t=r.close}catch(e){t=!1,w(e.message)}if(t){e="icon",s={};try{M(s,r.close)}catch(e){w(e.message)}try{M(s,fest._helpers.mergeTopParams(r.close,{mix:["tooltip__close"]}))}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}try{t=r.scrollParams}catch(e){t=!1,w(e.message)}if(t){e="scroll",s={};try{s=fest._helpers.mergeParams(r.scrollParams,{mix:["tooltip__scroll"]})}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}e="element",s={};try{M(s,r.contentParams)}catch(e){w(e.message)}try{M(s,{baseClass:"tooltip__content"})}catch(e){w(e.message)}return s.html=T(function(){var t,e="";try{t=r.html}catch(e){t=!1,w(e.message)}if(t)try{e+=r.html}catch(e){w(e.message+"50")}return e}),(a=k[e])&&(c+=N(a,s,!0)),c}),(e=k.element)&&(a+=N(e,t,!0)),a}),(v=k[x])&&(e+=N(v,b,!0)),e},k.tooltip=function(r){var e="";try{var m=r.scrollParams;m&&(r.mods=["scroll"].concat(r.mods||[]))}catch(e){w(e.message)}x="element",b={};try{M(b,r)}catch(e){w(e.message)}try{M(b,{baseClass:"tooltip"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s,c="";try{t=r.html}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,{baseClass:"tooltip__wrapper"})}catch(e){w(e.message)}s.html=T(function(){var e="";try{e+=r.html}catch(e){w(e.message+"28")}return e}),(a=k[e])&&(c+=N(a,s,!0))}try{t=r.boxHtml||r.boxParams||r.innerParams}catch(e){t=!1,w(e.message)}if(t){e="tooltip__box",s={};try{M(s,r.boxParams)}catch(e){w(e.message)}try{M(s,{scrollParams:m,innerParams:r.innerParams,contentParams:r.contentParams,html:r.boxHtml,close:r.close})}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}return c}),(v=k[x])&&(e+=N(v,b,!0)),e},k.comment__info=function(o){var e="";try{var l,h,_=fest._helpers.mergeTopParams,g=o.isTopic,y=o.author,d=o.created_at,f=o.afterAuthorHtml,u=g&&o.parent_reply,p=u&&u.author;d&&("string"==typeof d?l=(h=d).replace(" ","T")+"+03:00":"rfc3339"in d&&"display"in d&&(h=d.display,l=d.rfc3339))}catch(e){w(e.message)}e+="\x3c!--noindex--\x3e",x="element",b={};try{M(b,o.info)}catch(e){w(e.message)}try{M(b,{baseClass:"comment__info"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s,c,r,m,n,i="";try{t=y&&y.nick}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,{baseClass:"comment__info-item",tagName:"span",html:y.nick})}catch(e){w(e.message)}try{M(s,y)}catch(e){w(e.message)}try{M(s,_(y,{mods:["author"]}))}catch(e){w(e.message)}(a=k[e])&&(i+=N(a,s,!1))}try{t=y.is_official}catch(e){t=!1,w(e.message)}if(t){e="tooltip",s={};try{M(s,{contentParams:{mix:["color_black"]},boxHtml:"Официальный аккаунт"})}catch(e){w(e.message)}try{M(s,o.iconTooltip)}catch(e){w(e.message)}try{M(s,fest._helpers.mergeTopParams(o.iconTooltip,{mods:["width_medium","hover","arrow_left-center"]}))}catch(e){w(e.message)}s.html=T(function(){var e,t,a="";t={};try{M(t,o.iconOfficial)}catch(e){w(e.message)}try{M(t,fest._helpers.mergeTopParams(o.iconOfficial,{mix:["margin_left_10"],mods:["check","size_10","primary"]}))}catch(e){w(e.message)}return(e=k.icon)&&(a+=N(e,t,!1)),a}),(a=k[e])&&(i+=N(a,s,!0))}try{t=f}catch(e){t=!1,w(e.message)}if(t)try{i+=f}catch(e){w(e.message+"93")}try{t=p}catch(e){t=!1,w(e.message)}if(t){e="link",s={};try{s={mods:["dotted","black","pointer"],text:"В ответ на "+p.nick,mix:["margin_left_10"].concat(o.historyParentLinkMix||["js-comments_parent"]),href:u.href}}catch(e){w(e.message)}(a=k[e])&&(i+=N(a,s,!1))}try{t=d&&h}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,{baseClass:"comment__info-item",tagName:"time",html:h})}catch(e){w(e.message)}try{M(s,_({mix:["js-ago","js-ago-wrapper"],attrs:{datetime:l},mods:g?["date"]:[]},o.timeParams))}catch(e){w(e.message)}(a=k[e])&&(i+=N(a,s,!1))}try{m=(n=o.info_items||[]).length}catch(e){n=[],m=0,w(e.message)}for(c=0;c<m;c++){r=n[c],e="element",s={};try{M(s,r)}catch(e){w(e.message)}try{M(s,{baseClass:"comment__info-item",tagName:"span",html:r.text,href:r.href})}catch(e){w(e.message)}(a=k[e])&&(i+=N(a,s,!1))}return i}),(v=k[x])&&(e+=N(v,b,!0)),e+="\x3c!--/noindex--\x3e"},k.comment__history=function(r){var e="";try{var m=r.parent_reply,n=r.depth_level-1,i=m&&m.author,t={mods:r.historyMods||[],mix:r.historyMix||[]};m.bansLink=r.bansLink,m.bansParams=r.bansParams,m.removedParams=r.removedParams,m.avatarSize=45,m.attrs={"data-id":r.id,id:"parent-comment-"+r.id}}catch(e){w(e.message)}x="element",b={};try{M(b,t)}catch(e){w(e.message)}try{M(b,{baseClass:"comment__history"})}catch(e){w(e.message)}b.html=T(function(){var e,t,a,s,c="";c+='<span class="comment__history-text">В ответ на</span> ',e="link",s={};try{s={mods:["dotted","black","pointer"],text:"комментарий",mix:r.historyParentLinkMix||["js-comments_parent"],href:m.href}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),c+=' <span class="comment__history-text">от ',e="element",s={};try{s={baseClass:"comment__for",tagName:"span",href:i.href,html:i.nick}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),c+="</span>";try{t=1<n}catch(e){t=!1,w(e.message)}if(t){c+=" ",e="link",s={};try{s={mods:["dotted","black","pointer"],mix:r.historyTreeLinkMix||["js-comments_history"],text:"История переписки",icon:{position:"right",mods:["count"],mix:["comment__count"],html:n}}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}return c}),(v=k[x])&&(e+=N(v,b,!0));try{y=m}catch(e){y=!1,w(e.message)}if(y){x="element",b={};try{M(b,{baseClass:"comment__parent",mix:r.historyParentMix||["js-comments_parent_cont"]})}catch(e){w(e.message)}b.html=T(function(){var e,t,a="";t={};try{t=m}catch(e){w(e.message)}return(e=k.comment)&&(a+=N(e,t,!1)),a}),(v=k[x])&&(e+=N(v,b,!0))}try{y=0<n}catch(e){y=!1,w(e.message)}if(y){x="element",b={};try{b={baseClass:"comment__tree",mix:r.historyTreeMix||["js-comments_history_cont"]}}catch(e){w(e.message)}(v=k[x])&&(e+=N(v,b,!1))}return e},k.comment__bans=function(s){var e="";try{var c=s.bansLink||{}}catch(e){w(e.message)}e+="\x3c!--noindex--\x3e",x="element",b={};try{M(b,s.bansParams)}catch(e){w(e.message)}try{M(b,{baseClass:"comment__bans"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a="";t={};try{M(t,c)}catch(e){w(e.message)}try{M(t,{text:(c.text||"Список банов")+" ("+s.bans_cnt+")"})}catch(e){w(e.message)}try{M(t,fest._helpers.mergeTopParams({mods:["dotted","black","pointer"],attrs:{"data-email":s.author.email}},c))}catch(e){w(e.message)}return(e=k.link)&&(a+=N(e,t,!1)),a}),(v=k[x])&&(e+=N(v,b,!0)),e+="\x3c!--/noindex--\x3e"},k.comment__actions=function(e){var t="";try{var a=fest._helpers.mergeTopParams,s=e.permissions||{},c=[{type:"reply",text:"Ответить",icon:{mods:["comment"],name:"icon_actions_comments"},mix:["js-comments_reply","comment__action_visibled"]},{type:"link",text:"Ссылка",icon:{mods:["link"],name:"icon_status_link"},href:e.href},{type:"abuse",text:"Пожаловаться",icon:{mods:["abuse"],name:"icon_status_warning-triangle"},mix:["js-comments_complaint","comment__action_complaint"],textMix:["js-comments_complaint_text"]},{type:"delete",text:"Удалить",icon:{mods:["delete_round"],name:"icon_actions_delete"},mix:["js-comments_delete","comment__action_delete"],textMix:["js-comments_complaint_text"]},{type:"delete_admin",text:"Удалить",icon:{mods:["delete_round"],name:"icon_actions_delete"},ending:"(модератор)",mix:["js-comments_admin_delete","comment__action_delete","comment__action_delete_admin"],endingMix:["comment__action-ending"],textMix:["js-comments_complaint_text"]},{type:"ban",text:"Забанить пользователя",icon:{mods:["ban"]},mix:["js-show_form"],attrs:{"data-module":"AsyncForms.BanUser","data-email":e.author.email,"data-reply-id":e.id},textMix:["js-comments_complaint_text"]},{type:"goto_admin_panel",text:"Перейти в админку",href:e.moder_url,ending:"(модератор)"}].filter(function(e){switch(e.type){case"reply":return(t=s.post_reply)&&!!t.status;case"delete":return(t=s.hide_reply_by_self)&&!!t.status;case"delete_admin":return(t=s.hide_reply)&&!!t.status;case"ban":return(t=s.ban_user)&&!!t.status;case"goto_admin_panel":var t;return(t=s.hide_reply)&&!!t.status;default:return!0}}),r=e.actions||c||[],m=e.callbackParams}catch(e){w(e.message)}try{y=r.length}catch(e){y=!1,w(e.message)}if(y){var n,i,o,l;t+='\x3c!--noindex--\x3e<div class="comment__actions">';try{o=(l=r||[]).length}catch(e){l=[],o=0,w(e.message)}for(n=0;n<o;n++){i=l[n],x="link",b={};try{M(b,i)}catch(e){w(e.message)}try{M(b,a(i,{mods:i.mods||["dotted","black","pointer"],mix:["comment__action"]}))}catch(e){w(e.message)}try{M(b,{endingParams:{mix:["comment__action-ending"]}})}catch(e){w(e.message)}(v=k[x])&&(t+=N(v,b,!1))}t+="</div>\x3c!--/noindex--\x3e"}try{y=m&&m.actionsOther&&m.actionsOtherTemplate}catch(e){y=!1,w(e.message)}if(y){try{x=m.actionsOtherTemplate}catch(e){x="",w(e.message)}b={};try{M(b,m.actionsOther)}catch(e){w(e.message)}(v=k[x])&&(t+=N(v,b,!1))}return t},k.text=function(e){var t="";x="element",b={};try{M(b,e)}catch(e){w(e.message)}try{M(b,{baseClass:"text",tagName:e.tag||"span",html:e.text||e.html})}catch(e){w(e.message)}return(v=k[x])&&(t+=N(v,b,!1)),t},k.comment__like=function(e){var t="";try{var r=e,m=r.tooltip,n=fest._helpers.mergeTopParams}catch(e){w(e.message)}x="element",b={};try{M(b,r)}catch(e){w(e.message)}try{M(b,{baseClass:"comment__like"})}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s,c="";try{t=m}catch(e){t=!1,w(e.message)}if(t){e="tooltip",s={};try{M(s,m)}catch(e){w(e.message)}s.html=T(function(){var e,t,a="";t={};try{M(t,r.like)}catch(e){w(e.message)}try{M(t,{controlsParams:n(r.like.controlsParams,{mix:["comment__like-controls"]}),countParams:n(r.like.countParams,{mix:["comment__like-count"]})})}catch(e){w(e.message)}return(e=k.like)&&(a+=N(e,t,!1)),a}),s.boxHtml=T(function(){var e,t,a="";t={};try{M(t,n(m.textParams,{mods:["light_small"]}))}catch(e){w(e.message)}return t.html=T(function(){var t,e="";try{t=m.text}catch(e){t=!1,w(e.message)}if(t)try{e+=C(m.text)}catch(e){w(e.message+"55")}return e}),(e=k.text)&&(a+=N(e,t,!0)),a}),(a=k[e])&&(c+=N(a,s,!0))}else{e="like",s={};try{M(s,r.like)}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}return c}),(v=k[x])&&(t+=N(v,b,!0)),t},k.comment_topic=function(n){var e="";try{var t=fest._helpers.mergeTopParams,i=!!n.is_hidden,a=!!n.is_current_user,o=n.depth_level,l=n.author||{},h=n.parent_reply,_=n.like,s=n.permissions||{},g=s.hide_reply&&!!s.hide_reply.status}catch(e){w(e.message)}x="element",b={};try{M(b,n)}catch(e){w(e.message)}try{M(b,{baseClass:"comment",href:null})}catch(e){w(e.message)}try{M(b,t(n,{mix:n.mix||["js-comments_comment"],mods:["topic"].concat(_&&_.tooltip&&["tooltip"]||[]),attrs:n.attrs||{"data-id":n.id,id:"comment-"+n.id}},i?{mods:["deleted"]}:null,i&&g?{mods:["hidden-moder"]}:null,a?{mods:["current"]}:null,o?{mods:["topic_level_"+Math.min(o,3)]}:null,n.clbScroll?{attrs:{"data-counter":n.clbScroll},mix:["js-track_scroll"]}:null))}catch(e){w(e.message)}return b.html=T(function(){var e,t,a,s,c="";try{t=i&&!g}catch(e){t=!1,w(e.message)}if(t){e="link",s={};try{s={mix:["margin_left_10"],icon:{mods:["delete_rect"],mix:["color_red_normal"]},text:"Комментарий удален."}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),e="link",s={};try{s={mods:["dashed"],mix:["margin_left_5","js-comments_rules"],href:"#rules",text:"Почему?"}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}else{c+='\x3c!--noindex--\x3e<div class="comment__left">',e="avatar",s={};try{s={src:l.src,user:{name:l.nick,email:l.email,domain:l.domain,filin_domain:l.filin_domain,filin_d:l.filin_d},avatarSize:n.avatarSize||(1<o?32:45),mix:n.avatarMix||["comment__avatar"],href:l.href}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),c+='</div>\x3c!--/noindex--\x3e<div class="comment__body">';try{t=_}catch(e){t=!1,w(e.message)}if(t){e="comment__like",s={};try{M(s,_)}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}e="comment__info",s={};try{M(s,n)}catch(e){w(e.message)}try{M(s,{isTopic:!0})}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1));try{t=h}catch(e){t=!1,w(e.message)}if(t){try{var r=o-1,m={mods:n.historyMods||[],mix:n.historyMix||[]};h.avatarSize=32,h.history=!0,h.attrs={"data-id":n.id,id:"parent-comment-"+n.id}}catch(e){w(e.message)}e="element",s={};try{M(s,{baseClass:"comment__parent",mix:n.historyParentMix||["js-comments_parent_cont"]})}catch(e){w(e.message)}s.html=T(function(){var e,t,a,s,c="";e="comment_topic",s={};try{s=h}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1));try{t=1<r}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{M(s,m)}catch(e){w(e.message)}try{M(s,{baseClass:"comment__history"})}catch(e){w(e.message)}s.html=T(function(){var e,t,a="";t={};try{t={mods:["dotted","black","pointer"],mix:n.historyTreeLinkMix||["js-comments_history"],text:"История переписки",icon:{position:"right",mods:["count"],mix:["comment__count"],html:r}}}catch(e){w(e.message)}return(e=k.link)&&(a+=N(e,t,!1)),a}),(a=k[e])&&(c+=N(a,s,!0))}return c}),(a=k[e])&&(c+=N(a,s,!0));try{t=r}catch(e){t=!1,w(e.message)}if(t){e="element",s={};try{s={baseClass:"comment__tree",mix:n.historyTreeMix||["js-comments_history_cont"]}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}}try{t=n.content_to_web}catch(e){t=!1,w(e.message)}if(t){c+='<div class="comment__text">';try{c+=n.content_to_web}catch(e){w(e.message+"178")}c+="</div>"}e="comment__actions",s={};try{s=n}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1));try{t=n.bans_cnt}catch(e){t=!1,w(e.message)}if(t){e="comment__bans",s={};try{s=n}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1))}e="element",s={};try{s={baseClass:"comment__form",mix:n.formMix||["js-comments_form_cont"]}}catch(e){w(e.message)}(a=k[e])&&(c+=N(a,s,!1)),c+="</div>"}return c}),(v=k[x])&&(e+=N(v,b,!0)),e},S=e,x="ajax",(b={}).html=T(function(){var e,t,a="";t={};try{M(t,S)}catch(e){w(e.message)}try{M(t,{removedParams:{mix:["js-module"],attrs:{"data-module":"ShowPopupModel","data-view":"ShowPopup.Comments.Rules"}},like:{mix:["js-comments-likes"],attrs:{"data-author-email":(S.author||{}).email},tooltip:{mix:["valign_middle"],mods:["arrow_left-center","hover","width_medium"],boxParams:{mix:["js-like__tooltip","hidden_all"]},text:"",textParams:{mix:["js-like__message"]}},like:{mods:["solid","comment"],mix:["js-like__cont","margin_bottom_5"],attrs:{"data-like-count":S.rating_cnt,"data-like-id":S.id},countParams:{mix:["js-like__count"],mods:["like"]},likeParams:{mix:["js-like__control"],attrs:{"data-like-type":"like"},icon:{mods:["like"]}},data:{count:S.rating_cnt}}}})}catch(e){w(e.message)}return(e=k.comment)&&(a+=N(e,t,!1)),a}),m.push(r,{name:x,params:b,cp:!0}),r="",a=m.length){for(d=0;d<a;d++)"string"==typeof(t=m[d])?i+=t:(v=k[t.name])&&(i+=N(v,t.params,t.cp));return i+r}return r}}(Function("return this")());