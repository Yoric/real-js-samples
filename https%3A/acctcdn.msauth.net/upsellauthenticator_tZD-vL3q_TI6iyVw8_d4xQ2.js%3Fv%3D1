!function(){function t(t,n,e){function i(){S=new c.Controls.PageDialogControl(I,n,e)}function r(t){function n(){T.triggerHandler(u,{"actionName":t,"control":y})}var e={"notificationType":A,"notificationAction":m},o=new a(null,w,e,n,n,l);o.start()}function s(t,n){("action"===n.actionName||"cancel"===n.actionName)&&(r(n.actionName),"action"===n.actionName&&window.open(h,"_blank")),t.preventDefault(),t.stopPropagation()}function E(t,n){T.triggerHandler(f,{"content":n.content,"control":y})}function $(t,n){T.triggerHandler(p,{"content":n.content,"control":y})
}function C(t,n){T.triggerHandler(v,{"content":n.content,"control":y})}function D(t,n){T.triggerHandler(d,{"content":n.content,"control":y})}function H(){S&&(S.$.on(S.events.action,s),S.$.on(S.events.setupEvents,E),S.$.on(S.events.removeEvents,$),S.$.on(S.events.show,C),S.$.on(S.events.hide,D))}function N(){S&&(S.$.off(S.events.action),S.$.off(S.events.setupEvents),S.$.off(S.events.removeEvents),S.$.off(S.events.show),S.$.off(S.events.hide))}var y=this,T=o(y),L=!1,I=t,P=n,S=null;y.show=function(){H(),S&&S.show()
},y.hide=function(){S&&S.hide(),N()},y.setEnabled=function(t){S&&S.setEnabled(t)},y.dispose=function(){L||(T.triggerHandler(g,{"control":y}),N(),S&&(S.dispose(),S=null)),I=null,P=null,_formOptions=null,y=null,T=null,L=!0},i()}var n=window,e=n.wLive,o=n.jQuery,i=$Config.WLXAccount,r=e.Core,a=r.DataRequest;registerNamespace("wLive.Account.Controls");var c=e.Account,s=c.Controls,l=1e4,u="onAction",v="onShow",d="onHide",f="onSetupEvents",p="onRemoveEvents",g="onDispose",h=i.upsellAuthenticator.authenticatorLink,w=i.upsellAuthenticator.consumeNotificationsApiUrl,A=i.upsellAuthenticator.consumeNotificationsType,m=i.upsellAuthenticator.consumeNotificationsAction;
t.prototype.events={"action":u,"show":v,"hide":d,"setupEvents":f,"removeEvents":p,"dispose":g},t.__class=!0,s.UpsellAuthenticatorLandingControl=t}(),function(){function t(t,n,e){function l(){G=new c.Controls.PageDialogControl(F,n,e)}function $(t){if(t&&A[t]){return GetString("live.accounts.strings."+A[t])}var n=GetString(m+t);return n||(n=GetString("live.accounts.strings."+t)),n||(n=GetString("live.accounts.strings."+w)),n}function C(t){if(U){var n=r("#iTOTPVerificationErr",t);s.deleteFromListFast(n),U=!1}}function D(t,n){var e=r("#iTOTPVerificationErr",t);
return n?(e&&(e.text(n),U||(s.addToList(e),U=!0)),!1):(C(t),!0)}function H(t){function n(){B&&(B.data=B.data||{},B.data.totpApp=!0),C(t),B.data.totpDeviceType===E&&$ReportEvent.Fire({"pageId":a.addProof.options.viewDefs.androidDevice.pageId,"userAction":a.androidDevice.added}),_.triggerHandler(v,{"actionName":"action","control":R})}function e(n){if(B.data.totpDeviceType===E&&$ReportEvent.Fire({"pageId":a.addProof.options.viewDefs.androidDevice.pageId,"userAction":a.androidDevice.notAdded}),n&&n.error){switch(n.error.code){case i.AuthFailure:$Utility.navigateTo(window.location.href)
}}B&&B.data&&delete B.data.totpApp,D(t,$(n.error.code)),R.setEnabled(!0),G.getButton("action").focus()}R.setEnabled(!1);var r=new o(null,O.verifyTotpAppPath,{},n,e,u);r.start()}function N(t,n){if("action"===n.actionName){var e=n.control,o=e.content();H(o)}else{"cancel"===n.actionName&&B.data.totpDeviceType===E&&$ReportEvent.Fire({"pageId":a.addProof.options.viewDefs.androidDevice.pageId,"userAction":a.androidDevice.addCancelled}),_.triggerHandler(v,{"actionName":n.actionName,"control":R})}t.preventDefault(),t.stopPropagation()
}function y(t,n){_.triggerHandler(p,{"content":n.content,"control":R})}function T(t,n){_.triggerHandler(g,{"content":n.content,"control":R})}function L(t,n){_.triggerHandler(d,{"content":n.content,"control":R})}function I(t,n){_.triggerHandler(f,{"content":n.content,"control":R})}function P(){G&&(G.$.on(G.events.action,N),G.$.on(G.events.setupEvents,y),G.$.on(G.events.removeEvents,T),G.$.on(G.events.show,L),G.$.on(G.events.hide,I))}function S(){G&&(G.$.off(G.events.action),G.$.off(G.events.setupEvents),G.$.off(G.events.removeEvents),G.$.off(G.events.show),G.$.off(G.events.hide))
}{var R=this,_=r(R),b=!1,F=t,B=n,U=!1,G=null,O=(a.canDisplayQR,a.urls);a.strings.authenticator,a.strings.errors}R.show=function(){P(),G&&G.show()},R.hide=function(){G&&G.hide(),S()},R.setEnabled=function(t){G&&G.setEnabled(t)},R.dispose=function(){b||(_.triggerHandler(h,{"control":R}),S(),G&&(G.dispose(),G=null)),F=null,B=null,_formOptions=null,R=null,_=null,b=!0},l()}{var n=window,e=n.wLive,o=(e.Core,e.Core.DataRequest),i=o.ApiErrorCodes,r=n.jQuery,a=$Config.WLXAccount;a.urls}registerNamespace("wLive.Account.Controls");
var c=e.Account,s=c.AnimationHelper,l=e.Account.Controls,u=1e4,v="onAction",d="onShow",f="onHide",p="onSetupEvents",g="onRemoveEvents",h="onDispose",w="error_500",A={"1253":"error_noAuthenticatorApp"},m="live.accounts.strings.error_",E="android";t.prototype.events={"action":v,"show":d,"hide":f,"setupEvents":p,"removeEvents":g,"dispose":h},t.__class=!0,l.AuthenticatorAppControl=t}(),function(){function t(t,n){var e=c.options.viewDefs[t];if(e){var o=e.sectionId,i=null;o&&(i=r("#"+o,n),i.detach()),e.options.viewTemplate=i;
var a=e.actionButtonId||o+"Action",s=e.cancelButtonId||o+"Cancel",l=e.alternateButtonId||o+"Alternate",u=e.revertButtonId||o+"Revert",v={"action":a};e.hasCancel&&(v.cancel=s),e.hasAlternate&&(v.alternate=l),e.hasRevert&&(v.revert=u),e.options.buttons=v}}function n(){var n=r("#upsellAuthTemplates");t(l,n),t(v,n),t(u,n)}function e(){n();var t=c.viewContext||{};t.data=t.data||{};var e=new s.FlowController(r("#pageControlHost"),t,c.options);e.show(c.startState)}var o=window,i=o.wLive,r=(i.Core,o.jQuery),a=o.$Config.WLXAccount,c=a.upsellAuthenticator,s=i.Account.Controls,l="authenticatorIntro",u="verifySetup",v="finishSetup";
registerNamespace("wLive.Account.Page"),i.Account.Page.UpsellAuthenticator=e,$Do.register("UpsellAuthenticator")}();