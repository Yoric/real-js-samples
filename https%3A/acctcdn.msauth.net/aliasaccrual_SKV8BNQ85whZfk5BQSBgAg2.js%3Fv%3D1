function exists(e){return e?!0:0==e||0==e||""==e}function isString(e){return"string"==typeof e}function isFunction(e){return"function"==typeof e}function isArray(e){return e instanceof Array}function isDefined(e){return"undefined"!=typeof e}function valOrEmpty(e){return e?e:""}function valOrDefault(e,r){return exists(e)?e:r}function getQSValue(e,r){var t="&"+r.toLowerCase()+"=",n=e.toLowerCase().indexOf(t);if(-1==n&&(t="?"+r.toLowerCase()+"=",n=e.toLowerCase().indexOf(t),-1==n)){return null}var o=e.indexOf("&",n+1);
return-1==o&&(o=e.length),e.substring(n+t.length,o)}function strEquals(e,r,t){return isString(e)&&isString(r)?t?e.toLowerCase()==r.toLowerCase():e===r:!1}function arrExists(e,r){if(!exists(e)){return!1}for(var t=isArray(r)?r:arguments,n=isArray(r)?0:1,o=n;o<t.length;o++){if(!exists(t[o])||!exists(e[t[o]])){return!1}e=e[t[o]]}return!0}function Derive(e,r){function t(){}var n=r.prototype;t.prototype=e.prototype,r.prototype=new t;for(var o in n){r.prototype[o]=n[o]}}function FormatString(e){for(var r=1;r<arguments.length;r++){e=e.replace(new RegExp("\\{"+(r-1)+"\\}","g"),arguments[r])
}return e}function DoTestDelay(e){return e(),null}function PrintRecoveryCode(e){var r=PrintRecoveryCodeTemplate.format(e.dir.encodeHtml(),e.title.encodeHtml(),e.desc1.encodeHtml(),e.desc2.encodeHtml(),e.rcHeader.encodeHtml(),e.rcValue.encodeHtml(),e.ctHeader.encodeHtml(),e.ctValue.encodeHtml(),e.mnHeader.encodeHtml(),e.mnValue.encodeHtml()),t=window.open();t.document.write(r),t.document.close(),t.print(),t.focus()}function Encrypt(e,r,t,n){var o=[];switch(t.toLowerCase()){case"chgsqsa":if(null==e||null==r){return null
}o=PackageSAData(e,r);break;case"chgpwd":if(null==e||null==n){return null}o=PackageNewAndOldPwd(e,n);break;case"pwd":if(null==e){return null}o=PackagePwdOnly(e);break;case"pin":if(null==e){return null}o=PackagePinOnly(e);break;case"proof":if(null==e&&null==r){return null}o=PackageLoginIntData(null!=e?e:r);break;case"saproof":if(null==r){return null}o=PackageSADataForProof(r);break;case"newpwd":if(null==n){return null}o=PackageNewPwdOnly(n)}if(null==o||"undefined"==typeof o){return o}if("undefined"!=typeof Key&&void 0!==parseRSAKeyFromString){var a=parseRSAKeyFromString(Key)
}var i=RSAEncrypt(o,a,randomNum);return i}function PackageSAData(e,r){var t=[],n=0;t[n++]=1,t[n++]=1,t[n++]=0;var o,a=r.length;for(t[n++]=2*a,o=0;a>o;o++){t[n++]=255&r.charCodeAt(o),t[n++]=(65280&r.charCodeAt(o))>>8}var i=e.length;for(t[n++]=i,o=0;i>o;o++){t[n++]=127&e.charCodeAt(o)}return t}function PackagePwdOnly(e){var r=[],t=0;r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=0;var n,o=e.length;for(r[t++]=o,n=0;o>n;n++){r[t++]=127&e.charCodeAt(n)}return r}function PackagePinOnly(e){var r=[],t=0;r[t++]=1,r[t++]=2,r[t++]=0,r[t++]=0,r[t++]=0;
var n,o=e.length;for(r[t++]=o,n=0;o>n;n++){r[t++]=127&e.charCodeAt(n)}return r}function PackageLoginIntData(e){var r,t=[],n=0;for(r=0;r<e.length;r++){t[n++]=255&e.charCodeAt(r),t[n++]=(65280&e.charCodeAt(r))>>8}return t}function PackageSADataForProof(e){var r,t=[],n=0;for(r=0;r<e.length;r++){t[n++]=127&e.charCodeAt(r),t[n++]=(65280&e.charCodeAt(r))>>8}return t}function PackageNewPwdOnly(e){var r=[],t=0;r[t++]=1,r[t++]=1;var n,o=e.length;for(r[t++]=o,n=0;o>n;n++){r[t++]=127&e.charCodeAt(n)}return r[t++]=0,r[t++]=0,r
}function PackageNewAndOldPwd(e,r){var t=[],n=0;t[n++]=1,t[n++]=1;var o,a=r.length;for(t[n++]=a,o=0;a>o;o++){t[n++]=127&r.charCodeAt(o)}for(t[n++]=0,a=e.length,t[n++]=a,o=0;a>o;o++){t[n++]=127&e.charCodeAt(o)}return t}function mapByteToBase64(e){return e>=0&&26>e?String.fromCharCode(65+e):e>=26&&52>e?String.fromCharCode(97+e-26):e>=52&&62>e?String.fromCharCode(48+e-52):62==e?"+":"/"}function base64Encode(e,r){var t,n="";for(t=r;4>t;t++){e>>=6}for(t=0;r>t;t++){n=mapByteToBase64(63&e)+n,e>>=6}return n}function byteArrayToBase64(e){var r,t,n=e.length,o="";
for(r=n-3;r>=0;r-=3){t=e[r]|e[r+1]<<8|e[r+2]<<16,o+=base64Encode(t,4)}var a=n%3;for(t=0,r+=2;r>=0;r--){t=t<<8|e[r]}return 1==a?o=o+base64Encode(t<<16,2)+"==":2==a&&(o=o+base64Encode(t<<8,3)+"="),o}function parseRSAKeyFromString(e){var r=e.indexOf(";");if(0>r){return null}var t=e.substr(0,r),n=e.substr(r+1),o=t.indexOf("=");if(0>o){return null}var a=t.substr(o+1);if(o=n.indexOf("="),0>o){return null}var i=n.substr(o+1),s=new Object;return s.n=hexStringToMP(i),s.e=parseInt(a,16),s}function RSAEncrypt(e,r){for(var t=[],n=42,o=2*r.n.size-n,a=0;a<e.length;a+=o){if(a+o>=e.length){var i=RSAEncryptBlock(e.slice(a),r,randomNum);
i&&(t=i.concat(t))}else{var i=RSAEncryptBlock(e.slice(a,a+o),r,randomNum);i&&(t=i.concat(t))}}var s=byteArrayToBase64(t);return s}function RSAEncryptBlock(e,r,t){var n=r.n,o=r.e,a=e.length,i=2*n.size,s=42;if(a+s>i){return null}applyPKCSv2Padding(e,i,t),e=e.reverse();var l=byteArrayToMP(e),c=modularExp(l,o,n);c.size=n.size;var u=mpToByteArray(c);return u=u.reverse()}function JSMPnumber(){this.size=1,this.data=[],this.data[0]=0}function duplicateMP(e){var r=new JSMPnumber;return r.size=e.size,r.data=e.data.slice(0),r
}function byteArrayToMP(e){var r=new JSMPnumber,t=0,n=e.length,o=n>>1;for(t=0;o>t;t++){r.data[t]=e[2*t]+(e[1+2*t]<<8)}return n%2&&(r.data[t++]=e[n-1]),r.size=t,r}function mpToByteArray(e){var r=[],t=0,n=e.size;for(t=0;n>t;t++){r[2*t]=255&e.data[t];var o=e.data[t]>>>8;r[2*t+1]=o}return r}function modularExp(e,r,t){for(var n=[],o=0;r>0;){n[o]=1&r,r>>>=1,o++}for(var a=duplicateMP(e),i=o-2;i>=0;i--){a=modularMultiply(a,a,t),1==n[i]&&(a=modularMultiply(a,e,t))}return a}function modularMultiply(e,r,t){var n=multiplyMP(e,r),o=divideMP(n,t);
return o.r}function multiplyMP(e,r){var t=new JSMPnumber;t.size=e.size+r.size;var n,o;for(n=0;n<t.size;n++){t.data[n]=0}var a=e.data,i=r.data,s=t.data;if(e==r){for(n=0;n<e.size;n++){s[2*n]+=a[n]*a[n]}for(n=1;n<e.size;n++){for(o=0;n>o;o++){s[n+o]+=2*a[n]*a[o]}}}else{for(n=0;n<e.size;n++){for(o=0;o<r.size;o++){s[n+o]+=a[n]*i[o]}}}return normalizeJSMP(t),t}function normalizeJSMP(e){var r,t,n,o,a;for(n=e.size,t=0,r=0;n>r;r++){o=e.data[r],o+=t,a=o,t=Math.floor(o/65536),o-=65536*t,e.data[r]=o}}function removeLeadingZeroes(e){for(var r=e.size-1;r>0&&0==e.data[r--];){e.size--
}}function divideMP(e,r){var t=e.size,n=r.size,o=r.data[n-1],a=r.data[n-1]+r.data[n-2]/65536,i=new JSMPnumber;i.size=t-n+1,e.data[t]=0;for(var s=t-1;s>=n-1;s--){var l=s-n+1,c=Math.floor((65536*e.data[s+1]+e.data[s])/a);if(c>0){var u=multiplyAndSubtract(e,c,r,l);for(0>u&&(c--,multiplyAndSubtract(e,c,r,l));u>0&&e.data[s]>=o;){u=multiplyAndSubtract(e,1,r,l),u>0&&c++}}i.data[l]=c}removeLeadingZeroes(e);var d={"q":i,"r":e};return d}function multiplyAndSubtract(e,r,t,n){var o,a=e.data.slice(0),i=0,s=e.data;for(o=0;o<t.size;o++){var l=i+t.data[o]*r;
i=l>>>16,l-=65536*i,l>s[o+n]?(s[o+n]+=65536-l,i++):s[o+n]-=l}return i>0&&(s[o+n]-=i),s[o+n]<0?(e.data=a.slice(0),-1):1}function applyPKCSv2Padding(e,r,t){var n,o=e.length,a=[218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9],i=r-o-40-2,s=[];for(n=0;i>n;n++){s[n]=0}s[i]=1;var l=a.concat(s,e),c=[];for(n=0;20>n;n++){c[n]=Math.floor(256*Math.random())}c=SHA1(c.concat(t));var u=MGF(c,r-21),d=XORarrays(l,u),f=MGF(d,20),v=XORarrays(c,f),m=[];for(m[0]=0,m=m.concat(v,d),n=0;n<m.length;n++){e[n]=m[n]
}}function MGF(e,r){if(r>4096){return null}var t=e.slice(0),n=t.length;t[n++]=0,t[n++]=0,t[n++]=0,t[n]=0;for(var o=0,a=[];a.length<r;){t[n]=o++,a=a.concat(SHA1(t))}return a.slice(0,r)}function XORarrays(e,r){if(e.length!=r.length){return null}for(var t=[],n=e.length,o=0;n>o;o++){t[o]=e[o]^r[o]}return t}function SHA1(e){var r,t=e.slice(0);PadSHA1Input(t);var n={"A":1732584193,"B":4023233417,"C":2562383102,"D":271733878,"E":3285377520};for(r=0;r<t.length;r+=64){SHA1RoundFunction(n,t,r)}var o=[];return wordToBytes(n.A,o,0),wordToBytes(n.B,o,4),wordToBytes(n.C,o,8),wordToBytes(n.D,o,12),wordToBytes(n.E,o,16),o
}function wordToBytes(e,r,t){var n;for(n=3;n>=0;n--){r[t+n]=255&e,e>>>=8}}function PadSHA1Input(e){var r,t=e.length,n=t,o=t%64,a=55>o?56:120;for(e[n++]=128,r=o+1;a>r;r++){e[n++]=0}var i=8*t;for(r=1;8>r;r++){e[n+8-r]=255&i,i>>>=8}}function SHA1RoundFunction(e,r,t){var n,o,a,i=1518500249,s=1859775393,l=2400959708,c=3395469782,u=[],d=e.A,f=e.B,v=e.C,m=e.D,p=e.E;for(o=0,a=t;16>o;o++,a+=4){u[o]=r[a]<<24|r[a+1]<<16|r[a+2]<<8|r[a+3]<<0}for(o=16;80>o;o++){u[o]=rotateLeft(u[o-3]^u[o-8]^u[o-14]^u[o-16],1)}var y;for(n=0;20>n;n++){y=rotateLeft(d,5)+(f&v|~f&m)+p+u[n]+i&4294967295,p=m,m=v,v=rotateLeft(f,30),f=d,d=y
}for(n=20;40>n;n++){y=rotateLeft(d,5)+(f^v^m)+p+u[n]+s&4294967295,p=m,m=v,v=rotateLeft(f,30),f=d,d=y}for(n=40;60>n;n++){y=rotateLeft(d,5)+(f&v|f&m|v&m)+p+u[n]+l&4294967295,p=m,m=v,v=rotateLeft(f,30),f=d,d=y}for(n=60;80>n;n++){y=rotateLeft(d,5)+(f^v^m)+p+u[n]+c&4294967295,p=m,m=v,v=rotateLeft(f,30),f=d,d=y}e.A=e.A+d&4294967295,e.B=e.B+f&4294967295,e.C=e.C+v&4294967295,e.D=e.D+m&4294967295,e.E=e.E+p&4294967295}function rotateLeft(e,r){var t=e>>>32-r,n=(1<<32-r)-1,o=e&n;return o<<r|t}function hexStringToMP(e){var r,t,n=Math.ceil(e.length/4),o=new JSMPnumber;
for(o.size=n,r=0;n>r;r++){t=e.substr(4*r,4),o.data[n-1-r]=parseInt(t,16)}return o}var DOM={"create":function(e,r){var t=null;if(exists(r)&&(r.name||r.type)){if(strEquals(e,"input",!0)&&!strEquals(r.type,"password",!0)){var n=DOM.create("div");n.innerHTML='<input type="'+(exists(r.type)?r.type:"")+'" name="'+(exists(r.name)?r.name:"")+'" />',t=n.childNodes[0],r.type=null,r.name=null}else{try{var o="<"+e;r.type&&(o+=' type="'+r.type+'"'),r.name&&(o+=' name="'+r.name+'"'),o+=">",t=document.createElement(o),r.type=null,r.name=null
}catch(a){t=null}}}return exists(t)||(t=document.createElement(e)),DOM.update(t,r)},"update":function(e,r){if(exists(e)&&exists(r)){for(var t in r){if(strEquals("attr",t,!0)){for(var n in r[t]){exists(r[t][n])&&e.setAttribute(n,""+r[t][n])}}else{exists(r[t])&&(e[t]=r[t])}}}return e},"text":function(e){return document.createTextNode(e)},"clear":function(e){for(;exists(e)&&e.hasChildNodes();){e.removeChild(e.firstChild)}},"isElement":function(e,r){return exists(e)&&e.nodeType==NodeType.Element&&(!isString(r)||strEquals(e.tagName,r,!0))
},"isSelectable":function(e){return DOM.isElement(e,"input")&&e.value.length>0},"visible":function(e,r){return DOM.isElement(e)&&(e.style.visibility=r[1],"none"==r[0]?DOM.hide(e):DOM.display(e)),e},"display":function(e){DOM.isElement(e)&&(e.style.display="block",e.setAttribute("aria-hidden","false"))},"displayInline":function(e){DOM.isElement(e)&&(e.style.display="inline",e.setAttribute("aria-hidden","false"))},"hide":function(e){DOM.isElement(e)&&(e.style.display="none",e.setAttribute("aria-hidden","true"))
},"addClass":function(e,r){for(var t=e.className.split(" "),n=0;n<t.length;n++){if(strEquals(t[n],r,!0)){return}}t.push(r),e.className=t.join(" ")},"removeClass":function(e,r){for(var t=e.className.split(" "),n=[],o=0;o<t.length;o++){strEquals(t[o],r,!0)||n.push(t[o])}e.className=n.join(" ")}},Visibility={"Visible":["block","visible"],"Hidden":["","hidden"],"Removed":["none",""],"Default":["",""]},NodeType={"Element":1,"Attribute":2,"Text":3,"CDATA":4,"EntityRef":5,"Entity":6,"ProcInst":7,"Comment":8,"Doc":9,"DocType":10,"DocFrag":11,"Notation":12},PrintRecoveryCodeTemplate="<body dir='{0}'><h1>{1}</h1><p>{2}</p><p>{3}</p><p>{4} <b>{5}</b></p><p>{6} {7} (UTC)</p><p>{8} {9}</p></body>";
JSMPnumber.prototype={"size":1,"data":[0]},function(e){var r;!function(e){var r;!function(e){var r;!function(e){function r(e,r){var t=jQuery(document.body),n=t.css("backgroundColor").toLowerCase().replace(new RegExp(" ","g"),"");return!r.forBlackBackground||"rgb(0,0,0)"!==n&&"#000000"!==n&&"#000"!==n?!r.forWhiteBackground||"rgb(255,255,255)"!==n&&"#ffffff"!==n&&"#fff"!==n?e:r.forWhiteBackground:r.forBlackBackground}e.getHighContrastImage=r}(r=e.HighContrast||(e.HighContrast={}))}(r=e.Util||(e.Util={}))}(r=e.Account||(e.Account={}))
}(wLive||(wLive={})),function(e){var r;!function(e){var r;!function(r){var t;!function(r){function t(){if(a&&c){var e=c.baseUrl+c.dropdownCaret,r=c.baseUrl+c.dropdownCaretWhite;return a.getHighContrastImage(e,{"forBlackBackground":r})}return""}function n(){if(a&&c){var e=c.baseUrl+c.arrow,r=c.baseUrl+c.arrowWhite;return a.getHighContrastImage(e,{"forBlackBackground":r})}return""}function o(e){e?jQuery("#lightbox-cover").addClass("disable-lightbox"):jQuery("#lightbox-cover").removeClass("disable-lightbox")}var a=e.Util.HighContrast,i=$Config.WLXAccount,s=i.convergedFrameConfig||i.signup,l=s&&s.page,c=l&&l.imgs;
r.getDropDownCaretImage=t,r.getArrowImage=n,r.disableLightbox=o}(t=r.ConvergedUxUtil||(r.ConvergedUxUtil={}))}(r=e.Util||(e.Util={}))}(r=e.Account||(e.Account={}))}(wLive||(wLive={})),function(){function e(){function e(){d.$.on(d.next,v),d.$.on(d.back,S.onBack)}function t(){d.$.off(d.next),d.$.off(d.back)}function v(){S.doSubmit(!0)}function p(e){if(S.memberNameSuggestions([]),e&&e.suggestions){var r=n.grep(e.suggestions,function(e){return e.indexOf(S.selectedDomain())>-1});S.memberNameSuggestions(r)}S.memberNameSuggestions().length>0?S.view("Suggestions"):(S.fullAliasName.serverError(u.generic),S.fullAliasName.isModified(!1),w(!0,S.view()))
}function y(){S.fullAliasName.serverError(u.generic),S.fullAliasName.isModified(!1),w(!0,S.view())}function g(){"Verify"===S.view()?S.setCodeFocus():"CollectPassword"===S.view()?S.setPasswordFocus():S.setAliasNameFocus()}function h(){var e=[];if(i.countryCodeListJson){E=n.parseJSON(i.countryCodeListJson).List;for(var r in E){e.push({"iso":r,"label":E[r]})}}return e}function b(e){function r(){S.verifyChannel(e),S.code(""),delete i.verificationCodeSlt,delete i.cipherValue,S.verificationCodeSlt(""),S.password(""),S.view("Verify"),S.showErrors(!1)
}function t(e){var r=u.generic,t=S.view();if(e&&e.error){switch(e.error.code){case"1204":case"1211":r=u.ottLimitReached;break;case"6001":r=u.expiredCreds}}var n="Verify"===t?S.code:S.fullAliasName;n.serverError(r),n.isModified(!1),w(!0,t)}var n={"netId":i.netId,"channel":e,"action":"VerifyNewAlias","cxt":"ALS","autoVerification":!1};S.phoneDetails()?n.proofId=S.phoneDetails().CountryCode+S.phoneDetails().PhoneNumber:(n.proofId=S.aliasName(),n.proofCountryIso=S.countryCode());var a=new o(null,l.sendOtt,n,r,t);
a.start(),w(!1)}function w(e,r){"undefined"!=typeof P&&P.ready&&(e?P.ready({"fKeyboardEnabled":"Suggestions"!==r}):P.notReady())}function A(){var e={"signInName":S.fullAliasName()},r=new o(null,l.checkAvailable,e,k,C);r.start(),w(!1)}function k(e){e&&e.isAvailable&&(e.possibleEviction&&!e.nopaAllowed&&S.collectPassword(!0),b(S.verifyChannel()))}function C(){b(S.verifyChannel())}var S=this,P=r.WIZARDUI,E=null,L=ko.observable(!1);S.pageVisible=ko.observable(!1),S.doSubmit=ko.observable(!1),S.addAliasType=ko.observable(i.addAliasType),S.domainList=ko.observableArray(i.domainList),S.multipleDomains=ko.observable(i.domainList.length>1),S.selectedDomain=ko.observable(i.selectedDomain),S.aliasName=ko.observable(i.aliasName),S.showErrors=ko.observable(!1),S.countryCode=ko.observable(i.countryCode),S.countryCodeList=h(),S.view=ko.observable(i.view),S.phoneDetails=ko.observable(),S.verifyChannel=ko.observable(i.channel),S.memberNameSuggestions=ko.observableArray([]),S.aliasNameHasFocus=ko.observable(!1),S.codeHasFocus=ko.observable(!1),S.passwordHasFocus=ko.observable(!1),S.isHostMobileFlavor=ko.observable("true"===i.isHostMobileFlavor),S.showEmailMarketingPrivacyLink=ko.observable("true"===i.showEmailMarketingPrivacyLink),S.marketingPreferenceOptInState=ko.observable("true"===i.marketingPreferenceOptInState),S.supportInlineAgreementsFooter=ko.observable("true"===i.supportInlineAgreementsFooter),S.useInputGroup=ko.computed(function(){return!S.multipleDomains()&&"Live"===S.addAliasType()
}),S.allowSkip=ko.observable(i.allowSkip),S.isCountryCodeDropDownFocused=ko.observable(!1),S.collectPassword=ko.observable(!1),S.verificationCodeSlt=ko.observable(i.verificationCodeSlt),S.ski=SKI||"",S.dropdownCaretImg=m.getDropDownCaretImage(),S.fullAliasName=ko.computed(function(){var e=null;return S.aliasName()&&(e=S.aliasName().trim(),"Live"===S.addAliasType()&&(e+="@"+S.selectedDomain())),e}),S.fullAliasName.serverError=ko.observable("Collect"===i.view?i.serverError:null),S.maxLength=ko.computed(function(){return"EASI"===S.addAliasType()?113:"Phone"===S.addAliasType()?50:113-S.selectedDomain().length-1
}),S.showAliasError=ko.computed(function(){return S.showErrors()&&!S.fullAliasName.isValid()||S.fullAliasName.serverError()}),S.code=ko.observable(),S.code.serverError=ko.observable("Verify"===i.view?i.serverError:null),S.password=ko.observable(),S.password.serverError=ko.observable("CollectPassword"===i.view?i.serverError:null),S.showCodeError=ko.computed(function(){return S.showErrors()&&!S.code.isValid()||S.code.serverError()}),S.showPasswordError=ko.computed(function(){return S.showErrors()&&!S.password.isValid()||S.password.serverError()
}),S.encryptedPwd=ko.computed(function(){var e=i.cipherValue;return S.password()&&(e=Encrypt("","","newpwd",S.password())),e}),S.titleText=ko.computed(function(){return"Verify"===S.view()?c.verifyTitleVoice&&"Voice"===S.verifyChannel()?c.verifyTitleVoice:c.verifyTitle:"CollectPassword"===S.view()?c.collectPasswordTitle:c.collectTitle}),S.introText=ko.computed(function(){return"Verify"===S.view()?c.verifyIntroVoice&&"Voice"===S.verifyChannel()?c.verifyIntroVoice.format(S.aliasName()):c.verifyIntro.format(S.aliasName()):"CollectPassword"===S.view()?c.collectPasswordIntro:c.collectIntro
}),S.outlookEasiSwitchText=ko.computed(function(){return"Live"===S.addAliasType()?c.easiSwitch:c.outlookSwitch}),S.aliasNamePlaceholder=ko.computed(function(){return"Live"===S.addAliasType()?c.outlookPlaceholder:"EASI"===S.addAliasType()?c.easiPlaceholder:c.phonePlaceholder}),S.aliasNameType=ko.computed(function(){return"Live"===S.addAliasType()?"text":"EASI"===S.addAliasType()?"email":"tel"}),S.aliasNameLabel=ko.computed(function(){return"Live"===S.addAliasType()?c.outlookLabel:"EASI"===S.addAliasType()?c.easiLabel:c.phoneLabel
}),S.verifyOptionText=ko.computed(function(){return"SMS"===S.verifyChannel()?c.voiceSwitch:c.smsSwitch}),S.backButtonText=ko.computed(function(){return"Verify"===S.view()?c.buttons.back:c.buttons.cancel}),S.showMarketingPreference=ko.computed(function(){return"Collect"===S.view()&&"Phone"!==S.addAliasType()}),S.toggleShowEmailDomainOptions=function(){L(!L())},S.emailDomainOptionsShowHideAriaLabel=ko.computed(function(){return L()?c.hideEmailDomainOptions:c.showEmailDomainOptions}),S.dispose=function(){t()},S.onPickSuggestion=function(e){return e&&e.split("@").length>1&&S.aliasName(e.split("@")[0]),S.view("Collect"),!1
},S.domainSelected=function(e){S.selectedDomain(e)},S.onSubmit=function(){switch(S.view()){case"Collect":if(!S.fullAliasName.isValid()||S.fullAliasName.serverError()){return S.showErrors(!0),!1}if(a.isXbox&&S.showMarketingPreference()){return S.view("EmailMarketing"),!1}if("Phone"===S.addAliasType()){return i.isEvictionEnabled?A():b(S.verifyChannel()),!1}break;case"Suggestions":return!1;case"Verify":if(!S.code.isValid()||S.code.serverError()){return S.showErrors(!0),!1}if(S.collectPassword()){return S.view("CollectPassword"),S.showErrors(!1),!1
}break;case"CollectPassword":if(!S.password.isValid()||S.password.serverError()){return S.showErrors(!0),!1}}return!0},S.onSkip=function(){n("#skipAccrual").val("1"),n("#fAccrualForm").submit()},S.onOutlookEasiSwitchClick=function(){return S.aliasName(""),S.addAliasType("Live"===S.addAliasType()?"EASI":"Live"),"Live"===S.addAliasType()?S.selectedDomain(S.domainList()[0]):S.selectedDomain(),!1},S.onSendOptionClick=function(){return b("SMS"===S.verifyChannel()?"Voice":"SMS"),!1},S.onClickSuggestionsLink=function(){var e={"signInName":S.fullAliasName(),"includeSuggestions":!0},r=new o(null,l.checkAvailable,e,p,y);
return r.start(),w(!1),!1},S.onBack=function(){switch(S.view()){case"EmailMarketing":S.view("Collect"),S.showErrors(!1);break;case"Verify":S.view("Collect"),S.showErrors(!1),S.verifyChannel("SMS");break;case"CollectPassword":S.view("Collect"),S.showErrors(!1);break;case"Suggestions":S.view("Collect");break;case"Collect":$Utility.navigateTo(i.urlCancel)}return!1},S.getCountryCode=ko.pureComputed(function(){return E?"‎+"+E[S.countryCode()].replace(/[^0-9]/g,""):void 0}),S.setAliasNameFocus=function(){S.aliasNameHasFocus(!0)
},S.setCodeFocus=function(){S.codeHasFocus(!0)},S.setPasswordFocus=function(){S.passwordHasFocus(!0)},function(){e(),a.isWin10InclusiveOOBE&&f&&(f.speakAsync(c.cortana),f.showBackButton(!1));var r=ko.computed(function(){return"Collect"===S.view()});S.fullAliasName.extend({"required":{"onlyIf":r,"params":!0,"message":u.required}}).extend({"allPatterns":{"onlyIf":function(){return"EASI"===S.addAliasType()&&r()},"params":[s.MembernameRegex],"message":u.emailFormatInvalid}}).extend({"memberNameValidForFl":{"onlyIf":function(){return"EASI"===S.addAliasType()&&r()
},"params":{"fl":"EASI","domains":i.domainList},"message":u.domainReserved}}).extend({"userNamePattern":{"onlyIf":function(){return"Live"===S.addAliasType()&&r()},"params":[s.LiveMembernameRegex],"message":u.emailFormatInvalid}}).extend({"pattern":{"onlyIf":function(){return"Live"===S.addAliasType()&&r()},"params":"^[a-zA-Z]","message":u.emailMustStartWithLetter}}).extend({"getPhoneDetails":{"onlyIf":function(){return"Phone"===S.addAliasType()&&r()},"params":{"url":l.getPhoneDetails,"country":S.countryCode,"phoneDetails":S.phoneDetails,"onError":function(){S.fullAliasName.serverError(u.generic),S.fullAliasName.isModified(!1)
}},"message":u.phoneNumberInvalid}}),S.fullAliasName.subscribe(function(){S.fullAliasName.serverError(null)});var t=ko.computed(function(){return"Verify"===S.view()&&!S.code.serverError()});S.code.extend({"required":{"onlyIf":t,"params":!0,"message":u.required}}),S.code.subscribe(function(){S.code.serverError(null)});var o=ko.computed(function(){return"CollectPassword"===S.view()&&!S.password.serverError()});if(S.password.extend({"required":{"onlyIf":o,"params":!0,"message":u.required},"minLength":{"params":8,"message":u.passwordTooSimple},"pattern":{"params":s.PwdValidInput,"message":u.passwordInvalidChar}}),S.password.subscribe(function(){S.password.serverError(null)
}),S.view.subscribe(function(){setTimeout(g,0)}),S.memberNameSuggestions.extend({"rateLimit":300}),ko.applyBindingsWithValidation(S),S.showEmailMarketingPrivacyLink()&&!S.supportInlineAgreementsFooter()&&("undefined"!=typeof HOSTUI&&(n.post(i.urlAJAXPath,{"command":"privacy"},function(e){n("#iHostInlinePrivacy").html(e)},"html"),a.isWin10||a.isWin10InclusiveOOBE?n("#msprivacy").on("click",{"toShow":"#iPrivacyContainer"},HOSTUI.onInlineAgreementClick):S.isHostMobileFlavor()?n(".tou,#msprivacy").on("click",{"toShow":["#iHostInlinePrivacy"]},HOSTUI.evt_inlineLink_onclick):n(".privacy,#msprivacy").on("click",{"toShow":"#iPrivacyContainer"},HOSTUI.evt_inlineLink_onclick)),"undefined"!=typeof P&&(a.isXbox?(n.post(i.urlAJAXPath,{"command":"privacy"},function(e){n("#iHostInlinePrivacy").html(e)
},"html"),n("#msprivacy").on("click",{"toShow":"#iPrivacyContainer"},P.evt_inlineLink_onclick)):(n.post(i.urlAJAXPath,{"command":"privacy"},function(e){n("#iPriv").html(e)},"html"),n(".privacy,#msprivacy").on("click",{"toShow":["#iPriv"]},P.evt_inlineLink_onclick)))),P&&(P.fBackEnabled=!0,P.fNextEnabled=!0,S.view.subscribe(function(e){w(!0,e),P.setHeaderText(S.titleText()),P.setButtonState&&P.setButtonState(!0,"Suggestions"!==e,!1)})),S.supportInlineAgreementsFooter()&&(P||HOSTUI)){var d=P;(S.isHostMobileFlavor()||a.isWin10Host)&&(d=HOSTUI),n.post(i.urlAJAXPath,{"command":"tou"},function(e){n("#iTOU").html(e)
},"html"),n(".tou,#msterms").on("click",{"toShow":["#iTOU"]},d.evt_inlineLink_onclick),n.post(i.urlAJAXPath,{"command":"privacy"},function(e){n("#iPriv").html(e)},"html"),n(".privacy,#msprivacy").on("click",{"toShow":["#iPriv"]},d.evt_inlineLink_onclick),"true"===i.showImpressum&&(n.post(i.urlAJAXPath,{"command":"impressum"},function(e){n("#iImpressum").html(e)},"html"),n("#impressumLink,#ftrImpressum").on("click",{"toShow":["#iImpressum"]},d.evt_inlineLink_onclick))}S.pageVisible(!0),w(!0,S.view()),g()}()}var r=window,t=r.wLive,n=r.jQuery,o=t.Core.DataRequest,a=r.$Config.WLXAccount,i=a.aliasAccrual,s=i.regex,l=i.urls.dataRequest,c=r.$Config.WLXAccount.strings.aliasAccrual,u=c.errors,d=t.Account.PageEvents,f=r.MSA&&r.MSA.CXH,v=r&&r.wLive&&r.wLive.Account,m=v&&v.Util&&v.Util.ConvergedUxUtil;
registerNamespace("wLive.Account.Page"),t.Account.Page.AliasAccrual=e}();