registerNamespace("$UI"),$UI.Dialog=function(e,t,n,i,o,r){function s(){if(f){var e=f.style,t=$B.IE&&7==$B.V?h.offsetLeft/100:1;0==t&&(t=1),$Debug.trace("zoomAmount: ",t),$Debug.trace("scrollLeft: ",C.scrollLeft),e.height=y.clientHeight/t+"px",e.width=y.clientWidth/t+"px"}}function a(e){var t;t=e.target==p?$UI.Dialog.findFocusableElement(k,m,!1):$UI.Dialog.findFocusableElement(k,p,!0),t&&setTimeout(function(){try{t.focus()}catch(e){}},0)}function u(){$Debug.assert(!v,"UI.Dialog: wireWindow: already disposed"),jQuery(window).bind({"resize.ext":l,"scroll.ext":l})
}function l(){$Debug.assert(!v,"UI.Dialog: windowChanged: already disposed"),jQuery(window).unbind(".ext",l),T.recalc(!1),u()}function d(){if($B.IE&&$B.V<7){g=b.getElementsByTagName("select");for(var e=k.getElementsByTagName("select"),t=0;t<g.length;t++){for(var n=!1,i=0;i<e.length;i++){if(g[t]==e[i]){n=!0;break}}n||(g[t].wlppHide=g[t].style.visibility,g[t].style.visibility="hidden")}}}var c=window;o&&(c=o);var f,h,p,m,g,v,b=c.document||c.ownerDocument,w=b.body,y=b.documentElement,C=$B.RE_WebKit?w:b.documentElement,x=w.className.indexOf("rtl")>-1,T=this,E=jQuery(),O=jQuery(),k=null,B=null;
this.dock=new $UI.Dialog.Rect(0,0,0,0),t&&5>t&&(t=5),i=i?" "+i:"",this.dispose=function(){$Debug.assert(!v,"UI.Dialog.dispose: already disposed"),v=!0,E.remove(),E=jQuery(),O.remove(),O=jQuery(),g=null,f=null,h=null,p=null,m=null,jQuery(window).unbind(".ext",l)},this.setContents=function(t){E.remove(),E=jQuery(),k=t;var n=k.parentNode;(null==n||null==n.tagName)&&(w.appendChild(k),E=E.add(jQuery(k)));var o=$B.RE_WebKit?"input":"a";p=b.createElement(o),m=b.createElement(o);var s=jQuery(p).attr("href","#").css("position","absolute"),l=jQuery(m).attr("href","#").css("position","absolute");
if((void 0===r||r)&&(s.bind("focus",a),l.bind("focus",a)),E=E.add(s),E=E.add(l),jQuery(k).prepend(s).append(l),$B.RE_WebKit){var d="-10000px";x?m.style.right=p.style.right=d:m.style.left=p.style.left=d}return k.style.position="absolute",k.className+=i,!e&&$B.IE&&$B.V<7&&(B=new $UI.FramePopup),u(),k},this.recalc=function(e){if(k){s();var i=jQuery(k);if(!n){var o=$UI.Dialog.getLocation(k);if(!o||o.isEmpty()){var r={"visibility":i.css("visibility")||"visible","display":i.css("display")||"auto"};i.css({"visibility":"hidden","display":"block"}),o=$UI.Dialog.getLocation(k),i.css(r)
}$Debug.trace("recalc",JSON.stringify(o)),T.dock||(T.dock=new $UI.Dialog.Rect(0,0,0,0));var a=y.clientWidth/2-o.width/2;if(x?(T.dock.x=Math.min(a,0-(o.width-y.clientWidth)-25),$B.RE_WebKit&&(T.dock.x+=C.scrollWidth-y.clientWidth)):T.dock.x=Math.max(a,25),e){var u=y.clientHeight-o.height-3;T.dock.y=C.scrollTop+Math.min(Math.max(u>200?u:(y.clientHeight-o.height)/2,0),100)}$Debug.trace("dockbefore",JSON.stringify(T.dock)),T.dock.height=o.height,T.dock.width=o.width}var l=null;null!==T.dock.y&&(l={"top":T.dock.y}),null!==T.dock.x&&(l=l||{},l.left=T.dock.x),l&&i.css(l),B&&B.positionAt(T.dock,t?1e3:t-2)
}},this.show=function(n,o){function u(){try{(n?n:$UI.Dialog.findFocusableElement(k)).focus()}catch(e){}}T.recalc(!0);var l=jQuery(k);if(l.show(),t&&l.css("z-index",t),e){$Debug.trace("Creating Modal Dialog"),f=b.createElement("div"),d(),h=b.createElement("div");var c=jQuery(h).addClass("UI_Dialog_ZoomTest"+i),p=function(e){return e.stopImmediatePropagation(),!1},m=jQuery(f).attr("id","UI_Dialog_BG").addClass("UI_Dialog_BG"+i).bind({"click":p,"mousedown":p,"keydown":p,"keypress":p,"dblclick":p});(void 0===r||r)&&m.bind("focus",a),t&&m.css("z-index",t-1),m.width(jQuery(window).width()).height(jQuery(window).height()),w.appendChild(f),w.appendChild(h),jQuery(window).bind({"resize":function(){setTimeout(s,0)
},"focus":p}),O=O.add(m),O=O.add(c),s()}o||setTimeout(u,10)},this.hide=function(){if(O.remove(),O=jQuery(),$B.IE&&$B.V<7&&g){for(var e=0;e<g.length;e++){"undefined"!=typeof g[e].wlppHide&&(g[e].style.visibility=g[e].wlppHide)}g=null}},this.minimize=function(){if(B&&B.minimize(),k.style.visibility="hidden",e){if(f.style.display="none",g){for(var t=0;t<g.length;t++){g[t].style.visibility=g[t].wlppHide}}s()}},this.restore=function(){k.style.visibility="visible",B&&B.restore(),T.recalc(!0),e&&(f.style.display="block",d(),s())
}},$UI.Dialog.Rect=function(e,t,n,i){return new function(){var o=this;this.x=e,this.y=t,this.width=n,this.height=i,this.isEmpty=function(){return o.width<=0||o.height<=0}}},$UI.Dialog.findFocusableElement=function(e,t,n){function i(e){$el=jQuery(e);var t=$el.attr("tabindex");if("-1"===t){return!1}if($el.is(".CloseX")&&$el.is(":visible")&&0===$el.parents(":hidden").length){return!0}var n="|BUTTON|TEXTAREA|FIELDSET|IFRAME|SELECT|";return e.tagName&&!e.disabled&&(n.indexOf("|"+e.tagName+"|")>-1||"A"==e.tagName&&e.href&&-1==e.className.indexOf("CloseX")||"INPUT"==e.tagName&&"hidden"!=e.type.toLowerCase()&&(!$B.Firefox||"file"!=e.type.toLowerCase()))&&jQuery(e).is(":visible")
}function o(e){if(!e){return null}for(var t=n?e.nextSibling:e.previousSibling;t&&1!=t.nodeType;){t=n?t.nextSibling:t.previousSibling}return t?t:o(e.parentNode)}function r(e,t){var r=t;if(r&&(r==e||jQuery.contains(e,r))){for(;null!=r;){if(i(r)){return r}r=n&&r.firstChild?r.firstChild:!n&&r.lastChild?r.lastChild:o(r)}}return null}t=t?o(t):e;var s=r(e,t);return!s&&t&&t!=e?r(e,e):s},$UI.Dialog.getLocation=function(e){if(!e){return new $UI.Dialog.Rect(0,0,0,0)}for(var t=0,n=0,i=e;i;){t+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent
}return new $UI.Dialog.Rect(t,n,e.offsetWidth,e.offsetHeight)},$UI.Popover=function(){function e(){try{T.focus()}catch(e){}}function t(){var e=jQuery(b.modal?$B.IE?"body":window:g);$B.IE?e.bind("keypress.showhide",o):e.bind("keydown.showhide",o),y=y.add(e)}function n(){var e=jQuery(b.modal?$B.IE?"body":window:g);e.unbind(".showhide",o)}function i(e,t,n,i){jQuery("<span />").text(" ").appendTo(jQuery(h));var o=_ce("div");jQuery(o).html('<button id="popover_btn_{0}" type="{1}" />'.format(e,n?"submit":"button"));
var s=jQuery(o.firstChild).toggleClass("Default",n).html("<nobr>"+t+"</nobr>").bind("click",function(t){r(e),t.stopPropagation()});w=w.add(jQuery(s)),!n&&i&&(p=e),m[e]=s,jQuery(s).appendTo(jQuery(h))}function o(e){switch(e.which){case 27:r(p?p:"$cancel"),e.stopPropagation()}}function r(e){var t=!0;x&&(t=x(b,e)),t&&b.hide()}function s(){function e(e,t){if(e){var n=jQuery(t);"string"==typeof e?n.html(e):n.html("").append(e)}}if(jQuery(u).toggle(b.showHeader),jQuery(d).toggle(b.showFooter),jQuery(c).toggle(b.showCloseX).bind("click",function(){return r(p?p:"$cancel"),!1
}),b.showCloseX){$Debug.assert(window.GetString,"Popover Show Close X: Missing get string helper function.");var t=GetString("live.shared.skydrive.pc.Sharing.Close");$Debug.assert(t,"Popover Show Close X: Missing close text.")}b.bodyPadding||jQuery(l).css("padding","0px"),e(b.header,f),e(b.body,l)}this.header=null,this.body=null,this.footerText=null,this.width=300,this.bodyPadding=!0,this.showHeader=!0,this.showFooter=!0,this.modal=!1,this.showCloseX=!1,this.zIndex=null,this.dispose=function(){a&&(a.dispose(),a=null)
},this.addButton=function(e,t,n,i){C.push({"name":e,"value":t,"isDefault":n,"isCancel":i})},this.show=function(e,n,o,r){if(!v){if(x=e,T=n,!a){a=new $UI.Dialog(b.modal,b.zIndex),g=_ce("div");var w=jQuery(g).hide().html('<a href="#"></a><div><h3></h3></div><div></div><div><nobr></nobr></div>');a.setContents(g),t(),w.addClass("UI_Popover");var y=g.childNodes;if(c=y[1],u=y[2],l=y[3],d=y[4],f=u.firstChild,h=d.firstChild,jQuery(c).addClass("CloseX"),jQuery(u).addClass("Header"),jQuery(l).addClass("Body"),jQuery(d).addClass("Footer"),null!=b.width){var E=b.width;
w.css("width",parseInt(E,10)==E?E+"px":E)}p=null,m=new Array;for(var O=0;O<C.length;O++){i(C[O].name,C[O].value,C[O].isDefault,C[O].isCancel)}0==C.length&&(b.showFooter=!1),s()}a.show(o?m[o]:null,r),v=!0}},this.hide=function(){if(v){T&&setTimeout(e,10);try{jQuery(c).unbind("click"),y.unbind(".showhide",o),y=jQuery(),w.remove(),w=jQuery(),a.hide(),this.dispose()}catch(t){}v=!1,g=c=u=d=l=f=h=m=null}},this.enableButton=function(e){jQuery(m[e]).attr("disabled",!1)},this.disableButton=function(e){jQuery(m[e]).attr("disabled",!0)
},this.recalc=function(){v&&a&&a.recalc(!1)},this.minimize=function(){a&&v&&(a.minimize(),n())},this.restore=function(){a&&v&&(a.restore(),t())};var a,u,l,d,c,f,h,p,m,g,v=!1,b=this,w=jQuery(),y=jQuery(),C=new Array,x=null,T=null},$UI.MsgBoxEx=function(e,t,n,i,o,r,s,a,u){var l="ok",d="cancel",c=new $UI.Popover,f=_ce("div"),h=function(e,t){var n=!0;return t==l?0==o({"Popover":e})&&(n=!1):t==d&&r&&r(),n&&(c=null),n};if(s){for(var p=temp=s,m=0;10>m&&temp;m++){var g=temp.tagName&&temp.tagName.toLowerCase();if("a"==g||"button"==g||"input"==g){p=temp;
break}if(temp=temp.parentElement,!temp){p=null;break}}}return t&&(f.innerHTML='<div style="margin-bottom:10px">'+t+"</div>"),c.width=a?a:"416px",c.header=e,c.body=f,c.modal=!0,0!=n&&c.addButton(l,n,!0,!1),0!=i&&c.addButton(d,i,!1,!0),c.show(h,p,u?d:l),c},$UI.MsgBox=function(e,t,n,i,o,r){$UI.MsgBoxEx(e,t,n,i,r,null,o,null,!1)},function(){"use strict";var e=window.jQuery,t=wLive.Controls.Notifications=wLive.Controls.Notifications||{},n=new function(){var t=this,n={},i=[];t.showDelay=600,t.start=function(){if(i){var e=i,t=e.length;
i=null;for(var n=0;t>n;n++){e[n]()}}},t.addNotification=function(e,o,r){if(i){i.push(function(){t.addNotification(e,o,r),t.showNextNotification(r.queueGroup)})}else{var s=r.queueGroup||"default",a=r.queueMode||"fifo",u=r.queueTrumpLowPriOnScreen||{},l=!!r.queueIsPriorityHigh,d=n[s]=n[s]||{"current":null,"items":[]},c=d.items.length;if(0!==c&&l){for(c=0;c<d.items.length&&d.items[c].queueIsPriorityHigh;c++){}}d.items.splice(c,0,{"mode":a,"notification":e,"queueTrumpLowPriOnScreen":u,"queueIsPriorityHigh":l,"callback":o})
}},t.showNextNotification=function(e){var t,i,o=n[e],r=function(e){var t,n,i,o=e.length,r={"mode":null,"item":null};for(t=0;o>t&&(n=e[t],i=r.mode=n.mode,r.item=n,"fifo"!==i);t++){}return r.item};o&&o.items.length>0&&(t=o.current,i=o.items,t&&"filo"===t.mode&&i.length>1&&t.queueTrumpLowPriOnScreen&&(t.notification.hide(),t=null),t||(t=o.current=r(i),t.callback()))},t.removeNotification=function(i){e.each(n,function(e,n){for(var o=n.items,r=!1,s=o.length-1;s>=0;s--){if(o[s].notification===i){o[s]===n.current&&(n.current=null),o.splice(s,1),r=!0;
break}}r&&setTimeout(function(){t.showNextNotification(e)},t.showDelay)})},t.reset=function(){e.each(n,function(e,t){for(var n,i=t.items,o=i.length-1;o>=0;o--){n=i[o],n===t.current?n.notification.dismiss():i.splice(o,1)}})},t.registerSearchApi=function(i,o){t[i]=function(t){var i,r,s,a,u,l,d,c=[];for(t=t||function(){return!0},i=o&&0!==o.length?e.map(o,function(e){return n[e]}):n,r=i.length,l=0;r>l;l++){for(a=i[l].items,u=a.length,d=0;u>d;d++){s=a[d].notification,t(s)&&c.push(s)}}return c}}};t.getQueue=function(){return n
},t.dispose=function(){n&&(n.reset(),n=null)}}(),function(){"use strict";var e=27,t=9,n=window.jQuery,i=wLive.Animations,o=wLive.Controls.Notifications,r=n(o),s=o.InternalTools=o.InternalTools||{},a=n(window),u=n("BODY"),l=u[0],d={"fadein":"fadeIn","fadeout":"fadeOut","slidein":"showEdgeUI","slideout":"hideEdgeUI","slidefadein":"enterContent","slidefadeout":"exitContent"},c=s.Toolkit={"isEmptyString":function(e){return"undefined"==typeof e||null==e||""==e},"checkEmptyArgument":function(e,t){if(c.isEmptyString(e)){throw new Error(t)
}},"getExtraDimensions":function(e){var t={},n=function(e){return parseInt(e)||0};return t.left=n(e.css("marginLeft"))+n(e.css("borderLeftWidth"))+n(e.css("paddingLeft")),t.right=n(e.css("marginRight"))+n(e.css("borderRightWidth"))+n(e.css("paddingRight")),t.width=t.left+t.right,t.top=n(e.css("marginTop"))+n(e.css("borderTopWidth"))+n(e.css("paddingTop")),t.bottom=n(e.css("marginBottom"))+n(e.css("borderBottomWidth"))+n(e.css("paddingBottom")),t.height=t.top+t.bottom,t},"sanitizeOptions":function(e,t){var i=null;
if(e){var o={};n.each(e,function(e,i){n.inArray(e,t)>=0&&(o[e]=i)}),i=o}return i},"registerChangeUserOptionsApi":function(e,t,i){var r=function(e){n.extend(t,c.sanitizeOptions(e,i))};o["set"+e+"DefaultOptions"]=r},"isLtr":function(){return"ltr"===n("BODY").css("direction")}},f=s.ButtonHelper=function(e,t){var i=this,o=[],r=n.extend({"action":!1,"close":!1,"alternate":!1},t&&t.excludes?t.excludes:{}),s=t&&t.renderOrder?t.renderOrder.split(","):f.buttonNames;!function(){var t,n,i,a;if(e){for(a=s.length,i=0;a>i;i++){t=s[i],n=e[t],!r[t]&&n&&"string"==typeof n&&""!==n&&o.push({"name":t,"title":n})
}}}(),i.getNamesAndTitles=function(){return o}};f.buttonNames=["action","close","alternate"],s.DeferredManager=function(e,t){function i(){r=t?t():{}}var o=this,r=null,s=null;i(),o.getDeferred=function(){return s=s||n.Deferred()},o.updateState=function(e){e&&"object"==typeof e&&(r=n.extend({},r,e))},o.resolve=function(){s&&(s.resolveWith(e,[r]),s=null),i()}};var h=s.TemplateHelper={"basicContainer":'<div><div id="OuterContainer" class="OuterContainer modal fade in"><div class="InnerContainer modal-dialog modal-{1}" role="dialog" tabindex="0"><div class="Content modal-content">{0}</div></div></div></div>',"defaultPartialTemplate":'<div class="UserArea"><div class="Clipper"><div class="modal-header"><h4 id="DialogUserTitle" class="UserTitle"></h4></div><div id="DialogUserContent" class="modal-body UserContent"></div></div></div><div class="modal-footer btn-group ButtonArea"></div>',"buttonTemplate":'<button id="iBtn_{0}" name="{0}" type="button" class="btn {2}">{1}</button>',"notificationAreaTemplate":'<div class="NotificationArea"></div>',"templates":{},"registerTemplate":function(e){var t=h.defaultPartialTemplate;
t=h.basicContainer.format(t,e.size||"lg"),h.templates[e.id]=t},"render":function(e,t,i,o,r){var s=n.extend({"showNotificationArea":!1,"buttons":n.map(r.getNamesAndTitles(),function(e){return e})},e.options),a=n(h.templates[e.id]);t?a.find(".UserTitle").append(t):a.find(".UserTitle").hide(),a.find(".UserContent").append(i);var u=a.find(".ButtonArea");s.showNotificationArea&&!c.isEmptyString(o)&&(u.append(h.notificationAreaTemplate),a.find(".NotificationArea").append(o));var l=s.buttons;if(l&&l.length>0){for(var d=0,f=l.length;f>d;d++){var p=l[d],m=p.name,g="action"===m?"default c_nobdr btn-primary":"",v=h.buttonTemplate.format(m,p.title,g);
u.append(v)}}return a}},p=s.TimerHelper=function(e,t,n){var i,o,r,s=this,a=function(){i=null,t()},u=function(){r||(r=new Date,clearTimeout(i),i=null)},l=function(){if(r&&o){var t=e-(r-o);r=null,o=new Date,i=setTimeout(a,t)}},d={"mouseenter":u,"mouseout":l};s.start=function(){e&&(e=parseInt(e))>0&&n&&n.length>0&&(n.bind(d),o=new Date,i=setTimeout(a,e))},s.stop=function(){i&&(n.unbind(d),clearTimeout(i),i=null)}},m=s.NotificationBase=function(c){function f(e){var t=e?"show":"hide";tt&&(tt[t](),null!=nt&&nt[t]())
}function g(e,t,n){return n=n||[ot],r.triggerHandler(e+c.name+t,n)}function v(e,t){return t=t||[ot],rt.triggerHandler(e,t)}function b(e,t,n){var i=e?e[t]:null;i&&"function"==typeof i&&i.apply({},n||[])}function w(){lt.timeoutInMsecs&&(dt=new p(lt.timeoutInMsecs,lt.callback,lt.getElements()),dt.start())}function y(){dt&&(dt.stop(),dt=null)}function C(){if(Z&&et&&!J&&c.positioner){c.positioner(Z.dock,et,at.anchorElement,at,st);var e=Z.dock,t=null;null!==e.y&&(t={"top":e.y}),null!==e.x&&(t=t||{},t.left=e.x),t&&tt.css(t)
}}function x(e){var t,o,r,s,a=at.animation||{},u=a.type||"none",l=a.entranceType||u+"in",c=a.exitType||u+"out",f=[et];if(nt&&nt.length>0&&f.push(nt[0]),e?(t=l,a.entranceArguments&&(o=n.isArray(a.entranceArguments)?n.extend(!0,[],a.entranceArguments):n.extend(!0,{},a.entranceArguments))):(t=c,a.exitArguments&&(o=n.isArray(a.exitArguments)?n.extend(!0,[],a.exitArguments):n.extend(!0,{},a.exitArguments))),r=d[t]){var h=[f];"undefined"!=typeof o&&h.push(o),h.push(!1),s=i[r].apply({},h)}else{s=n.Deferred().resolve()
}return s}function T(){var e=$UI.Dialog.findFocusableElement(et,et,!0);e&&setTimeout(function(){try{e.focus()}catch(t){}},0)}function E(e){mt||!e||L(e,et)||T(),mt=!1}function O(n){var i=n.which;if(!J){if(i===e){if(V.changeAnimation(!1,"none"),n.stopImmediatePropagation(),tt.find(".ButtonArea button[name=close]").length>0){var o="close";ct.updateState({"buttonClicked":o}),v("buttonclick",[ot,o])}}else{i===t?(E(n.srcElement),pt||(tt.find("BUTTON.default.c_nobdr").removeClass("c_nobdr"),pt=!0)):mt=!0}}}function k(e){E(e.srcElement)
}function B(){at.dismissOnEsc&&tt.keydown(O),at.isModal&&(u.keyup(O),u.focusin(k))}function D(){at.dismissOnEsc&&tt.unbind("keydown",O),at.isModal&&(u.unbind("keyup",O),u.unbind("focusin",k))}function I(e){var t,i=e&&e.srcElement&&e.srcElement.name||n(this).attr("name");V.changeAnimation(!1,"none"),e.stopPropagation(),ct.updateState({"buttonClicked":i}),t=n(ot).triggerHandler("buttonclick",[ot,i]),t!==!1&&st.dismissOnButtonClick&&ot.dismiss()}function N(){tt.find(".ButtonArea button").bind("click.notification",I)
}function A(){tt.find(".ButtonArea button").unbind("click.notification",I)}function U(){a.bind({"resize.nbwindowchanged":$,"scroll.nbwindowchanged":$})}function Q(){a.unbind(".nbwindowchanged",$)}function $(){J||(Q(),C(),U())}function j(){return _ge("UI_Dialog_BG")||l}function M(){if(at.dismissOnOutsideClick){var e=j(),t=(n(e),function(){e.addEventListener?e.addEventListener("click",H,!0):(e.attachEvent("onclick",H),!_ge("UI_Dialog_BG")&&l.setCapture&&(l._capturingClicks=!0,l.attachEvent("onlosecapture",S),F())),ht=null
});at.delayOutsideClickDetectionByMsecs<=0?t():ht=setTimeout(t,at.delayOutsideClickDetectionByMsecs)}}function _(){{var e=j();n(e)}at.dismissOnOutsideClick&&(null!=ht&&(clearTimeout(ht),ht=null),e.removeEventListener?e.removeEventListener("click",H,!0):(e.detachEvent("onclick",H),!_ge("UI_Dialog_BG")&&e.releaseCapture&&(e._capturingClicks=!1,e.detachEvent("onlosecapture",S),e.releaseCapture())))}function L(e,t){for(var n=!1;e;){e===t?(e=null,n=!0):e=e.parentElement}return n}function H(e){J||e._alreadyCaptured||(L(e.srcElement,et)||ot.dismiss(),!l.addEventListener&&l.setCapture&&(e._alreadyCaptured=!0,e.srcElement.click(),l._capturingClicks&&F()),e._alreadyCaptured&&(e._alreadyCaptured=!1))
}function S(){u&&(u.mousemove(P),it=!1)}function F(){u&&(u[0].setCapture(!0),it=!0)}function P(){u&&(F(),u.mousemove(P))}function W(){T()}function z(){at.insideClickFocus&&tt&&tt.click(W)}function q(){at.insideClickFocus&&tt&&tt.unbind("click",W)}function R(e){e.stopImmediatePropagation(),e.preventDefault(),at.dismissOnOutsideClick&&G(e)}function G(e){e&&e.srcElement&&!L(e.srcElement,et)&&ot.dismiss()}function X(){nt&&at.isModal&&nt.bind("contextmenu",R),u&&at.dismissOnOutsideClick&&u.bind("contextmenu",G)}function K(){nt&&at.isModal&&nt.unbind("contextmenu",R),u&&at.dismissOnOutsideClick&&u.unbind("contextmenu",G)
}var V=this,Y=(n(V),!1),J=!1,Z=null,et=null,tt=null,nt=null,it=!1,ot=c.instance,rt=n(ot),st=n.extend({},m.defaultUserOptions,c.userOptions),at=n.extend({},m.defaultControlOptions,c.controlOptions),ut=c.render=c.render||{},lt=c.timer=c.timer||{},dt=null,ct=new s.DeferredManager(ot),ft=new s.ButtonHelper(ut.buttons,ut.buttonOptions),ht=null,pt=!1,mt=!1;ut.template=ut.template||{},ut.template.options=ut.template.options||{},V.changeAnimation=function(e,t,n){if(at.changeAnimationOnUserInteraction){var i=e?"entrance":"exit";
at.animation[i+"Type"]=t,"undefined"!=typeof n&&(at.animation[i+"Arguments"]=n)}},V.popoverElement=function(){return et},V.isCurrentlyShown=function(){return Y&&!J},V.isHidden=function(){return J},V.getButton=function(e){var t,n=null;if(!e||""==(t=e.buttonName+"")){throw new Error("buttonName was not supplied.")}return tt&&(n=tt.find(".ButtonArea BUTTON[name="+t+"]")),n},V.getDeferredManager=function(){return ct},V.reposition=function(){Z&&(C(),Z.recalc())},V.hide=function(){Z&&!J&&(g("before","hide"),v("beforehide"),J=!0,Z.minimize(),g("after","hide"),v("afterhide"))
},V.dismiss=function(e){var t,n=function(){o.getQueue().removeNotification(ot)};if(Z){if(t=g("before","dismiss"),t===!1){return}if(t=v("beforedismiss"),t===!1){return}b(e,"beforeDismiss"),D(),A(),q(),_(),Q(),K(),y(),x(!1).then(function(){if(Z){if(Z.hide(),tt.remove(),et=null,tt=null,Z.dispose(),Z=null,nt=null,t=g("after","dismiss"),t===!1){return}if(t=v("afterdismiss"),t===!1){return}ct.resolve(),n(),Y=!1;var e;st.returnFocusTo&&(e=st.returnFocusTo.focus)&&"function"==typeof e&&st.returnFocusTo.focus()}})}else{n()
}},V.show=function(e){var t,i=o.getQueue(),r=ct.getDeferred(),s=!1;return Z?J&&Z.restore():(i.addNotification(ot,function(){if(Z&&J){Z.restore(),J=!1}else{if(!Z&&(t=g("before","render"),t!==!1&&(t=v("beforerender"),t!==!1))){var i=h.render(ut.template,ut.title,ut.content,ut.notificationArea,ft);st.focusFirstButton&&ft.getNamesAndTitles().length>0&&(at.focusElement=i.find(".ButtonArea BUTTON").first()[0]),b(e,"afterRendering",[i]),at.anchorElement=at.anchorElement||window,Z=new $UI.Dialog(!!at.isModal,at.dialogZindex,!!c.positioner,"NotificationBase "+(at.controlCss||"")+" "+(st.moreCss||""),at.anchorElement,at.trapTab),i.appendTo(st.notificationContainer||"#notificationContainer"),et=Z.setContents(i[0]),tt=n(et),C(),b(e,"beforeShow"),t=g("before","show"),t!==!1&&(t=v("beforeshow"),t!==!1&&(B(),N(),w(),Z.show(at.focusElement,!at.setFocus),at.isModal&&(nt=n("#UI_Dialog_BG")),f(!1),x(!0).then(function(){s||(s=!0,f(!0),b(e,"afterShow"),setTimeout(function(){M(),z(),X()
},0),v("aftershow"),t=g("after","show"),Y=!0)})))}}},at),i.showNextNotification(at.queueGroup)),r.promise()},ot.content=V.popoverElement,ot.isCurrentlyShown=V.isCurrentlyShown,ot.isHidden=V.isHidden,ot.getButton=V.getButton,ot.show=function(){return V.show()},ot.dismiss=function(){V.dismiss()},ot.hide=V.hide,ot.reposition=V.reposition};m.defaultControlOptions={"anchorElement":null,"ariaOptions":null,"changeAnimationOnUserInteraction":!0,"controlCss":null,"dismissOnEsc":!0,"dismissOnOutsideClick":!1,"delayOutsideClickDetectionByMsecs":0,"focusElement":null,"insideClickFocus":!1,"isModal":!1,"returnFocusTo":null,"setFocus":!1,"trapTab":!0,"queueGroup":null,"queueMode":"fifo","queueTrumpLowPriOnScreen":!1},m.defaultUserOptions={"dismissOnButtonClick":!0,"focusFirstButton":!0,"moreCss":null}
}(),function(){"use strict";var e=window,t=e.jQuery,n=e.wLive,i=n.Controls.Notifications,o=i.InternalTools,r=o.Toolkit,s=e.$Debug,a="Notifications_Flyout";o.TemplateHelper.registerTemplate({"id":a,"size":"lg"});var u=50,l=1,d=2,c=4,f=25,h="5px",p="2px",m=["left","right","left","right","top","top","bottom","bottom"],g=["top","top","bottom","bottom","left","right","left","right"],v=function(e,n,i,b,w){function y(e,n,i,o,r){for(var s,a=D(i),u=t(n),l=u.find(".OuterContainer"),d=I(u),c=t(i),f=3;f-->0&&(N(e,d,o),s=r.offset||I(c),x(e,d,s,a),A(e,u,d,s,!!r.offset,c,l));){}var h=C(e,o,r,s,c);
U(e,h,a)}function C(e,t,n,i,o){var s=n.offset?i.width:o.outerWidth(!0),a=n.offset?i.height:o.outerHeight(!0),l=parseInt(s/2+i.left),d=parseInt(a/2+i.top),c=parseInt(e.width/2+e.x),f=parseInt(e.height/2+e.y),h=0,p=0;p=$(f,d,u),h=$(c,l,r.isLtr()?u:-u);var m=t.animation.entranceArguments[0];return m.left=h,m.top=p,m}function x(e,t,n,i){var o=e.width,r=e.height,s=r/2,a=n.top,u=n.left,l=n.height,d=n.width,c=l/2;e.x=u+d/2-o/2,e.y=a-r,e.y<0&&(e.y=a+l),e.x<0?(e.x=u+d,e.y=a+c-s):e.x+o>i.width&&(e.x=u-o,e.y=a+c-s)}function T(e,n,i,o,a){var u=r.isLtr()?a.bubble:a.bubble^l;
s.assert(!isNaN(u),"Recieved a non-Number for bubblePosition"),s.assert(u>=0&&7>=u,"Received an out of bounds setting for bubblePosition");for(var d,c=D(i),f=t(n),v=f.find(".OuterContainer").addClass("Bubble{0}".format(u)),b=t("<div/>",{"class":"BubbleBeak"}).appendTo(f),w=t("<div/>",{"class":"InnerBeak"}).appendTo(f),y=I(f),C=t(i),x=3;x-->0&&(N(e,y,o),d=a.offset||I(C),u=E(e,y,c,d,u,v,f,o),A(e,f,y,d,!!a.offset,C,v));){}b.addClass("Beak{0}".format(u)),w.addClass("Beak{0}".format(u)).css("margin-{0}".format(m[u]),h).css("margin-{0}".format(g[u]),p);
var T=B(u,o);U(e,T,c)}function E(e,n,i,o,r,s,a,u){var l=r,d=2;do{r!==l&&(s.removeClass("Bubble{0}".format(r)).addClass("Bubble{0}".format(l)),t.extend(n,I(a)),N(e,n,u)),r=l,O(e,r,o),l=k(e,r,i)}while(l!=r&&d-->0);return r}function O(e,t,n){var i=e.width,o=e.height,r=n.top,s=n.left,a=n.width,u=n.height,h=u/2,p=a/2,m=t&l,g=t&d;t&c?(e.x=m?s-i+p+f:s+p-f,e.y=g?r-o:r+u):(e.x=m?s-i:s+a,e.y=g?r-o+h+f:r+h-f)}function k(e,t,n){var i=t&l,o=t&d,r=t&c;return e.y<0?t=o?t^d:r?t:t^c:e.y+e.height>n.height&&(t=o?r?t:t^c:t^d),e.x<0?t=i?t^l:r?t^c:t:e.x+e.width>n.width&&(t=i?r?t^c:t:t^l),t
}function B(e,t){var n=e&c?e&d?-1:1:0,i=e&c?0:e&l?-1:1,o=t.animation.entranceArguments[0];return o.left=u*i,o.top=u*n,o}function D(e){s.assert(e,"No anchor was passed.");var t=null,n=null,i=0,o=0;return e&&(t=e.document||e.ownerDocument)&&(n=t.documentElement,i=n.clientWidth,o=n.clientHeight),{"width":i,"height":o}}function I(e){var t=e.offset();return t.width=e.outerWidth(),t.height=e.outerHeight(),t}function N(e,t,n){e.width=Math.max(Math.min(t.width,n.maxWidth),n.minWidth),e.height=Math.max(Math.min(t.height,n.maxHeight),n.minHeight)
}function A(e,n,i,o,r,s,a){var u=!0,l=e.width,d=e.height,c=o.top,f=o.left,h=a.outerWidth(),p=a.outerHeight(),m={"top":e.y,"left":e.x};l!=i.width&&(m.width=l),d!=i.height&&(m.height=d),n.css(m);var g=a.outerWidth(),v=a.outerHeight();if(r||t.extend(o,s.offset()),h!==g||p!==v){var b=v-p,w=g-h;i.width+=w,i.height+=b}else{c===o.top&&f===o.left&&(u=!1)}return u}function U(e,t,n){var i=e.y+e.height-n.height;i>0&&(0!==t.top&&(i+=u,t.top-=i),e.y-=i),e.y=Math.max(0,e.y)}function Q(e,t,n){var i=0,o=e-t,r=Math.abs(o)>n;
return r&&(i=o>0?1:-1),i}function $(e,t,n){var i=0,o=Q(e,t,5);return o>0?i=-n:0>o&&(i=n),i}if(r.checkEmptyArgument(n,"No content was supplied"),null==i){throw new Error("No anchor was supplied.")}var j=this,M=t.extend({},v.defaultUserOptions,w),_=t.extend({"anchorElement":i},v.defaultControlOptions),L=null!==M.bubble;L&&(_.controlCss+=" Bubble");var H=new o.NotificationBase({"name":"flyout","instance":j,"controlOptions":_,"userOptions":M,"positioner":L?T:y,"render":{"title":e,"content":n,"buttons":b,"buttonOptions":{"excludes":{"dismiss":!0}},"template":{"id":a}}});
j.show=function(){return H.show({"beforeShow":function(){_.width&&t(H.popoverElement()).find(".UserContent").css({"width":_.width})}})}};v.defaultUserOptions={"bubble":null},v.defaultControlOptions={"animation":{"entranceType":"slidefadein","entranceArguments":[{"left":0,"top":0}],"exitType":"fadeout"},"changeAnimationOnUserInteraction":!1,"controlCss":"Flyout","dismissOnOutsideClick":!0,"isModal":!0,"maxHeight":758,"maxWidth":510,"minHeight":54,"minWidth":70,"queueGroup":"Flyout","setFocus":!0,"trapTab":!1,"width":null},i.createFlyout=function(e){if(!e){throw new Error("No parameters were supplied.")
}return new v(e.title,e.content,e.anchor,e.buttons,e.options)},r.registerChangeUserOptionsApi("Flyout",v.defaultUserOptions,["moreCss","notificationContainer"]),i.getQueue().registerSearchApi("getFlyouts",[v.defaultControlOptions.queueGroup])}(),function(){"use strict";var e=window,t=e.jQuery,n=e.wLive,i=n.Controls.Notifications,o=i.InternalTools,r=o.Toolkit,s="Notifications_ModalDialog";o.TemplateHelper.registerTemplate({"id":s+"_lg","size":"lg"}),o.TemplateHelper.registerTemplate({"id":s+"_sm","size":"sm"});
var a=function(n,i,u,l,d,c,f){r.checkEmptyArgument(i,"No content was supplied");var h=this,p=null,m=t.extend({},a.defaultUserOptions,d),g=t.extend({},a.defaultControlOptions,f),v=new o.NotificationBase({"name":"dialog","instance":h,"controlOptions":g,"userOptions":m,"positioner":function(n,i){var o=t("HTML"),s=t("BODY"),a=t(i),u=a.find(".InnerContainer"),l=t(e).innerHeight(),d=a.height(),c=(l-d)/2;n.y=c;var f=a.find(".NotificationArea");if(0!==f.contents().length){var h=a.find(".ButtonArea"),p=0;h.find("BUTTON").each(function(){var e=t(this);
p+=r.getExtraDimensions(e).width+e.outerWidth(!0)});var m=r.getExtraDimensions(f);a.find(".NotificationArea").width(h.width()-m.width-p),f.show()}else{f.hide()}u.css("left",-(o.scrollLeft()+s.scrollLeft()))},"render":{"title":n,"content":i,"notificationArea":u,"buttons":l,"buttonOptions":c,"template":{"id":s+"_"+g.size,"options":{"showNotificationArea":!0}}}});h.show=function(){return v.show({"beforeShow":function(){p=t(v.popoverElement()).find(".NotificationArea")}})},h.dismiss=function(){v.dismiss({"beforeDismiss":function(){p=null
}})},h.notificationArea=function(){return p}};a.defaultUserOptions={},a.defaultControlOptions={"animation":{"type":"fade"},"changeAnimationOnUserInteraction":!1,"controlCss":"ModalDialog","isModal":!0,"setFocus":!0,"queueGroup":"ModalDialog","size":"lg"},i.createModalDialog=function(e){return new a(e.title,e.content,e.notificationArea,e.buttons,e.options,e.buttonOptions,e.controlOptions)},r.registerChangeUserOptionsApi("ModalDialog",a.defaultUserOptions,["moreCss","notificationContainer"]),i.getQueue().registerSearchApi("getModalDialogs",[a.defaultControlOptions.queueGroup])
}(),function(){var e=wLive.Controls.Notifications;e.enableAriaSupport=function(){if(0===jQuery("#notificationContainer").length){var e={"position":"absolute","padding":"0","margin":"0","height":"100%","width":"100%","top":"0"};e[wLive.Controls.Notifications.InternalTools.Toolkit.isLtr()?"left":"right"]="0",jQuery('<div id="notificationContainer" class="NotificationContainer" persist="1" aria-live="polite" aria-atomic="false"></div>').css(e).prependTo("BODY")}}}(),function(){$Do.register("NotificationControls")
}();