/*
 Nielsen SDK package v6.0.0.158-3.16 
 (c) 2018 The Nielsen Company 
*/
/*CryptoJS v3.1.2 License Info code.google.com / p / crypto - js - (c) 2009-2013 by Jeff Mott. All rights reserved. code.google.com / p / crypto - js / wiki / License Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/ or other materials provided with the distribution.3.Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
!function(e){function t(e){n&&console&&console.log&&console.log(e)}var a=!0,n=!1;try{t("BSDK check: Checking for ES5 array functions that BSDK uses");var r=new Array("test1","test2","test3");r.forEach(function(e){}),r.indexOf("test"),t("BSDK check: Array functionality passed"),t("BSDK check: Checking for ES5 JSON functions that BSDK uses");var i={fname:"Bob",lname:"Lee",address:{street:"123 test",city:"NY",state:"NY"}},o=JSON.stringify(i);i=JSON.parse(o),t("BSDK check: JSON object functionality passed"),t("BSDK check: Checking for image tag functionality");(new Image).src="",t("BSDK check: Image tag functionality passed"),t("BSDK check: Checking for window.addEventListener functionality"),e.addEventListener||(a=!1),t("BSDK check: window.addEventListener functionality passed"),t("BSDK check: Checking for postMessage functionality"),e.postMessage||(a=!1),t("BSDK check: postMessage functionality passed"),t("BSDK check: Checking for date functionality"),t("DATE "+Date.now()),t("BSDK check: date functionality passed");var s=/(ANTGalio\/3.3)|(ANTGalio\/3.4)|(HbbTV\/1\.1\.1(;Samsung;SmartTV2012;;;)\s+WebKit)/i;t("BSDK check: Checking device useragent"),e.navigator.userAgent.match(s)&&(a=!1,t("BSDK check: Unsupported useragent"))}catch(e){t("ERROR: "+e.message),a=!1}t("****** RESULTS: JS support check "+(a?"PASSED":"FAILED")+" ******");try{a?(!function(e,t){function a(e){return void 0!==s&&void 0!==d&&void 0!==l?s+"//cdn-gl"+d:"https://sdk.imrworldwide.com/"}function n(e){e&&e.hasOwnProperty("target")&&(O="true"===String(e.target).toLowerCase())}function r(){S=Date.now(),T=Math.ceil((S-P)/1e3)}function i(e){if(e&&e.hasOwnProperty("target")&&!isNaN(e.target))for(var t in _)!function(t){var a=_[t];if(void 0!==a&&a.hasOwnProperty("staticPage")&&a.staticPage.hasOwnProperty("evtParams")){"static"===a.staticPage.evtParams.param1.type&&a.ggPM("48",e.target,"","","")}}(t)}function o(o,f){function g(e){j.staticPage.hasOwnProperty("evtParams")&&j.ggPM("56",j.staticPage.evtParams.param1,j.staticPage.evtParams.param2,j.staticPage.evtParams.param3,j.staticPage.evtParams.param4)}function _(e,t){if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(A[e.type]instanceof Array)for(var a=A[e.type],n=0,r=a.length;n<r;n++)a[n].call(j,t)}function y(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var a in e.cmsMap)e.cmsMap.hasOwnProperty(a)&&-1!==e.cmsMap[a].indexOf("nol_")&&t.push(e.cmsMap[a].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function y(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var a in e.cmsMap)e.cmsMap.hasOwnProperty(a)&&-1!==e.cmsMap[a].indexOf("nol_")&&t.push(e.cmsMap[a].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function h(t){try{var a="Error in retrieveMeta";if(t&&t.hasOwnProperty("fData")&&t.hasOwnProperty("ad")&&t.hasOwnProperty("content")&&t.hasOwnProperty("plid")){var n=y({cmsMap:e.GLCFG.PLDPR.getCmsMap(t.plid)});for(var r in t.fData)if(t.fData.hasOwnProperty(r)){var i=t.fData[r][Object.keys(t.fData[r]).splice(-1,1)];if(void 0!==i)for(var o in i){var s=String(o);-1!==s.indexOf("nol_")&&-1===n.indexOf(s)||(t[r][o]=i[o])}}return t}return t&&t.hasOwnProperty("err")?(t.err=a+": Missing passedFdata, Ad, content or static properties",t):{err:a}}catch(e){}}function P(t){t&&(t.registerListener("ggPM",j),t._listeners&&(t._listeners.addListener("updateCmbStaticPage",j.handleUpdateOfStatic),t._listeners.addListener("removeCmbAssetId",j.removeAsset),t._listeners.addListener("tick",function(){r(),U=!1,_("globalTick",{time:S,seconds:T})}),t._listeners.addListener("dcrHeartbeat",i),t._listeners.addListener("flushQueue",j.emptyQueue),t._listeners.addListener("handleSessionReset",j.handleSessionReset),t._listeners.addListener("flushPauseEventQueue",j.flushPauseEventQueue),t._listeners.addListener("sendOptOutStatus",n)),e.GLCFG=t)}function b(e,t){D&&D.ggParams&&D.ggParams.nol_sdkDebug&&D.ggParams.nol_sdkDebug.toLowerCase().indexOf("debug","info","warn","true")>-1&&console&&console.log&&console.log("Nielsen Log: "+e,t||"")}function L(e,a){if(b("Firing ping "+e.url),void 0!==e&&(!e||e.hasOwnProperty("url")&&0!==e.url.length)&&e.hasOwnProperty("retryDelay")&&e.hasOwnProperty("currRetry")&&e.hasOwnProperty("maxRetry")){({requestUrl:function(){var t=this;try{++e.currRetry>e.maxRetry?(t.logErr("maxRetry reached"),a&&a()):t.sendUrlRequest(e.url)}catch(e){t.logErr("Error in fireToUrl requestUrl: "+e),a&&a()}},sendUrlRequest:function(n){var r=this;try{if(void 0===n)return;var i=new Image;i.onerror=function(a){t.setTimeout(function(){r.requestUrl()},e.retryDelay)},i.onload=function(e){a&&a()},i.src=n+"&retry="+e.currRetry}catch(e){r.logErr("Error in fireToUrl sendUrlRequest: "+e),a&&a()}},logErr:function(e){e&&t.console&&t.console.log&&console.log("Error: ",e)}}).requestUrl()}}function E(t){!U&&("blur"===t.type||"blur"!==t.type&&e.GLCFG.browser.hidden())&&(j.ggPM("flush","0"),U=!0,b("Data flushed on "+t.type+" event"))}var I,D,A={},M=[],N=[],R={},B=String(Date.now())+Math.round(1e4*Math.random()),F,V=5,x=-1,G,U=!1,j=f||{};if(j.id=B,j.name=o,j.initialized=!1,j.staticPage={},j.modules={allModInit:!1},j.configLoaded=!1,j.apid="",j.sdkv=u,j.sdkvForConfig=w,j.useCachedConfig=void 0!==f&&null!==f,j.sessionId="",j.sivt=null,j.state=null,j._pauseTimeoutEnabled=!0,j.isAdobe=!1,f){if(f.q){for(var z=null,K=0;K<f.q.length;K++)(z=f.q[K])&&z.length>0&&M.push({eventType:z[0],param1:z.length>1?z[1]:void 0,param2:z.length>2?z[2]:void 0,param3:z.length>3?z[3]:void 0,param4:z.length>4?z[4]:void 0});delete f.q}else f.getEventQue&&(M=f.getEventQue());N=f.te||[]}var q={_queueEventLog:!1,_eventLog:[],init:function(){try{var t=e.controllers.util.queryParam("nol_eventHookDelay");if(q._queueEventLog=!1,t){var a=parseInt(t);"NaN"!==a.toString()&&(q._queueEventLog=!0,setTimeout(function(){q._queueEventLog=!1},1e3*(a<=20?a:20)))}}catch(e){q._queueEventLog=!1}},trigger:function(t,a){try{if(a){var n=JSON.parse(JSON.stringify(a));n.name=t.name,n.sdkv=w,q._queueEventLog?q._eventLog.push(n):(q._eventLog&&q._eventLog.length>0&&(e.controllers.util.fireCustomEvent("NSDK_EventHook",q._eventLog),q._eventLog=[]),e.controllers.util.fireCustomEvent("NSDK_EventHook",[n]))}}catch(e){}}},Q=function(e,a){return function(n,r){try{a.browserSafeAddEventListener({element:t,eventType:"NSDK_Initialized",func:function(t){try{t.detail.instanceName===e&&n(t.detail.instance)}catch(e){r&&r(e.message)}}})}catch(e){r&&r(e.message)}}}(j.name,e);return j.getOptOutStatus=function(){return O},j.getId=function(){return B},j.GetName=function(){return j.name},j.Initialized=function(e){if(void 0===e)return j.initialized;j.initialized=e},j.getPauseQueueCount=function(){return Object&&Object.keys?Object.keys(R).length:0},j.disablePauseTimeout=function(){j._pauseTimeoutEnabled&&(j._pauseTimeoutEnabled=!1,b("Player "+j.id+" pause timeout disabled"))},j.enablePauseTimeout=function(){j._pauseTimeoutEnabled||(j._pauseTimeoutEnabled=!0,b("Player "+j.id+" pause timeout enabled"))},j.removeAsset=function(e){void 0!==e&&e.target.param1.hasOwnProperty("assetid")&&(j.staticPage={})},j.handleUpdateOfStatic=function(t){if(t&&t.target){var a=t.target.evtInfo;if(e.GLCFG&&e.GLCFG.PLDCR&&void 0!==a&&a.param1.hasOwnProperty("assetid")&&j.getId()===t.target.plid){var n=e.GLCFG.PLDCR.latestDcrTick();0!==Object.keys(j.staticPage).length&&j.staticPage.hasOwnProperty("id")&&j.staticPage.id===a.param1.assetid&&j.staticPage.hasOwnProperty("lastTimeStamp")?j.staticPage.lastTimeStamp=n:j.staticPage={id:a.param1.assetid,evtParams:a,startTimeStamp:n,lastTimeStamp:n}}}},j.addListener=function(e,t){t&&(void 0===A[e]&&(A[e]=[]),A[e].push(t))},j.removeListener=function(e,t){if(j._listeners[e]instanceof Array)for(var a=A[e],n=0,r=a.length;n<r;n++)if(a[n]===t){a.splice(n,1);break}},j.handleSessionReset=function(e){if(e&&e.target&&e.target.hasOwnProperty("plid")&&B===e.target.plid&&e.target.hasOwnProperty("passedFdata")&&e.target.passedFdata.hasOwnProperty("_dataArrObj")&&e.target.passedFdata._dataArrObj){var t={plid:e.target.plid,fData:e.target.passedFdata._dataArrObj,content:{},ad:{},err:0};if(0===h(t).err&&e.target.passedFdata.hasOwnProperty("_currVidType")){var a=e.target.passedFdata._currVidType,n=Object.keys(t.content).length>0,r=Object.keys(t.ad).length>0;(n||r)&&("sessionreset"!==e.target.passedFdata.get("nolPriv_prevEventState")&&j.ggPM("57","1","sessionReset","",""),n&&!R.hasOwnProperty("content")&&(R.content={evt:"pauseloadmeta",meta:t.content,plid:e.target.plid}))}}j._listeners&&j._listeners.fireEvent&&j._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},j.flushPauseEventQueue=function(){if(!(Object.keys(R).length<=0)){if(j.modules.PLDPR){var e;for(e in R)_("ggPM",{evtInfo:{eventType:R[e].evt,param1:R[e].meta},id:B});R={}}j._listeners&&j._listeners.fireEvent&&j._listeners.fireEvent("debug",{type:"debug",msg:"Fired flushPauseEventQueue from ggcmb."})}},j.cloneObj=function(e){return e&&"object"==typeof e?JSON.parse(JSON.stringify(e)):e},j.ggPM=function(t,a,n,r,i){if(j.initialized)if(void 0!==t&&null!==t&&""!==t){var o={};o.eventType=t,o.param1=j.cloneObj(a),o.param2=j.cloneObj(n),o.param3=j.cloneObj(r),o.param4=j.cloneObj(i),!j.modules.allModInit||2!=j.modules.PLCMB&&2!=j.modules.PLDPR?M.push(o):(j.emptyQueue(),_("ggPM",{evtInfo:o,id:B}),q.trigger(j,o))}else e&&e.GLCFG&&e.GLCFG._listeners&&e.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in ggPM() - Missing event type param in ggPM"},id:B,timeStamp:Date.now()})},j.trackEvent=function(t){if(t&&"object"==typeof t){if(!j.initialized||!j.state)return;j.state.transition(t,function(e,t,a,n,r){var i={};i.eventType=e,i.param1=j.cloneObj(t),i.param2=j.cloneObj(a),i.param3=j.cloneObj(n),i.param4=j.cloneObj(r),_("ggPM",{evtInfo:i,id:B}),q.trigger(j,i)})}else e&&e.GLCFG&&e.GLCFG._listeners&&e.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Missing trackEvent metadata object"},id:B,timeStamp:Date.now()})},j.getConfigParams=function(){return D},j.emptyQueue=function(){if(!(M.length<=0&&N.length<=0)&&j.modules.allModInit&&(j.modules.PLCMB||j.modules.PLDPR)){for(var e=0,t=M.length;e<t;e+=1)_("ggPM",{evtInfo:M[e],id:B}),q.trigger(j,M[e]);M=[];for(var a=0;a<N.length;a++)N[a]&&j.trackEvent(N[a]),N.splice(0,1)}},j.getContainer=function(){return F},j.getClientConfig=function(){return e.configs?e.configs[j.apid]:null},j.ggInitialize=function(t,n,r,i,o,f){if(j.initialized)return k.Promise(function(e,t){e(j)});q.init();var g,_,y,h="us",S="cdn-gl";if(F=f,D={ggParams:t,uid:r,oldFlashDetect:i,detectBrowser:o,nol_playerId:B},typeof t==typeof String()){for(g=e.loadXmlString("<vi>"+t+"</vi>"),_=g.firstChild.firstChild,y=0,t={};_&&void 0!==_&&y<20;)null!==_.firstChild&&(t[_.nodeName]=_.firstChild.nodeValue),_=_.nextSibling,y++;D.ggParams=t}D.ggParams.nol_sdkDebug=e.controllers.util.queryParam("nol_sdkDebug")||D.ggParams.nol_sdkDebug,j.Initialized(!0),u=(t.nsdkv?t.nsdkv.toString():"")||u,p=(t.nsdkvOverride?t.nsdkvOverride.toString():"")||p,h=t.sfcode||h,m=t.coreaddress?s+"//"+t.coreaddress+"/":a(t),w=t.sdkconfigver||w,j.apid=D.ggParams.apid,j.sdkv=u,j.sdkvForConfig=j.useCachedConfig&&j.sdkv&&3===j.sdkv.length?"bj."+j.sdkv[0]+"."+j.sdkv[1]+"."+j.sdkv[2]:w;var T=j.getClientConfig();v=e.GLCFG.getPrefProtocol(T)+":"+(t.coreaddress?l+h:"//secure-"+h)+d,j.state=e.PLSTM?new e.PLSTM.stateMachine(j.id,T):null,j.sessionId=e.GLCFG&&e.GLCFG.generateGUID?e.GLCFG.generateGUID():j.id;var b=v+C+(T&&T.nol_GLOBALS&&T.nol_GLOBALS.nol_dfltAppid?T.nol_GLOBALS.nol_dfltAppid:D.ggParams.apid)+"&sessionId="+j.sessionId+"&C16=sdkv,"+j.sdkvForConfig;return j.useCachedConfig&&e.getLib("GLCFG")?e.GLCFG&&e.GLCFG.browser.ready(function(){P(e.getLib("GLCFG")),e.GLCFG.loadChildren(j.sdkv),e.GLCFG.waitForLS(function(){if(e.GLCFG.lsController.maskedRequestWithRetry(b),e.GLCFG.queryCookies(),e.GLCFG.PLDPR){var t=e.GLCFG.PLDPR.initFromConfig(T,j.id,!0);e.PLSIVT&&(j.sivt=new e.PLSIVT(j,t))}})}):(L({url:b,currRetry:-1,maxRetry:5,retryDelay:1e3}),e.loadLib("GLCFG",m+"novms/js/2/configs/"+c,e,P)),k.Promise(Q)},j.isViewable=function(){return!1},e.browserSafeAddEventListener({element:t,eventType:"beforeunload",useCapture:!1,func:function(e){j&&j.staticPage&&g(j.staticPage)}}),e.GLCFG.browser.addEventListener({element:t,eventType:"blur",useCapture:!1,func:E}),e.GLCFG.browser.addEventListener({element:t,eventType:e.GLCFG.browser.visibilityEvent,useCapture:!1,func:E}),e.GLCFG.browser.addEventListener({element:t,eventType:"pagehide",useCapture:!1,func:E}),j}if(!e.isBuilt||!e.isBuilt()){var s=-1!==t.location.protocol.indexOf("https")?"https:":"http:",l="//secure-",d=".imrworldwide.com/",c="glcfg510.js",u="600",p="600",m=a(),v=s+"//secure-us.imrworldwide.com/",f="imrworldwide.com",g=864e5,_=e.getInstances?e.getInstances():{},y=1,h=5,P=0,S=0,T=0,b=!1,O=!1,C="cgi-bin/gn?prd=session&c9=devid,&c13=asid,",w="bj.6.0.0",L={},E="6.0.0.16";Date.now=Date.now||function(){return+new Date};var k={Promise:function(e){try{var t=new Promise(function(e,t){});return new Promise(e)}catch(e){}return new function(e){var t=function(e){n&&n(e)},a=function(e){r&&r(e)},n=null,r=null;return{then:function(i,o){n=i,r=o,e(t,a)}}}(e)}};if(e.sdkvForConfig=function(){return w},e.isBuilt=function(){return b},e.getInstance=function(a,n){var r=void 0!==a&&("string"==typeof a||"object"==typeof a&&a.constructor===String)?a:"default";return _.hasOwnProperty(r)||(_[r]=n?o(r,e[r]||t[r]):o(r)),_[r]},e.setTotalNumAssetsAllowed=function(e){y=isNaN(e)?e:parseInt(e,10)},e.getAddress=function(){return m},e.getConfigAddress=function(){return v},e.getInstances=function(){return _},e.loadXmlString=function(e){var t=null;try{return t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e),t}catch(n){try{var a=new DOMParser;return t=a.parseFromString(e,"text/xml")}catch(e){}}return null},e.isNielsenTag=function(e){var t=!1;if(void 0!==e){var a=e.indexOf("?"),n=e.indexOf("imrworldwide.com");n>-1&&n<a&&(t=!0)}return t},e.getVersion=function(){return u},e.getVersionOverride=function(){return p},e.send=function(e){e&&t.console&&t.console.log&&console.log(e.parentNode)},e.browserSafeAddEventListener=function(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))},e.browserSafeRemoveEventListener=function(e){void 0!==e&&null!==e&&null!==e.element&&void 0!==e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))},e.controllers={util:function(e){return function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}if("function"==typeof t.CustomEvent)return!1;e.prototype=t.Event.prototype,t.CustomEvent=e}(),{fireCustomEvent:{fireCustomEvent:function(a,n,r){try{r=r||t,a&&r&&r.dispatchEvent(new CustomEvent(a,{detail:n}))}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to call element.dispatchEvent()."})}}}.fireCustomEvent,queryParam:{queryParam:function(a){try{a=a.toString().toLowerCase();var n=t.location.search.substr(1).split("&"),r="";if(n.find)r=n.find(function(e){return 0===e.toLowerCase().indexOf(a+"=")});else for(var i=0,o=n.length;i<o;i++)if(0===n[i].toLowerCase().indexOf(a+"=")){r=n[i];break}if(r){var s=r.split("=");if(s&&s.length>1)return s[1]}}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to retrieve query string parameter."})}return""}}.queryParam,Promise:k.Promise}}(e)},function(){var t={};e.loadLib=function(a,n,r,i){if(void 0!==a&&null!==a&&"string"==typeof a&&void 0!==n&&null!==n&&"string"==typeof n)if(t[a]){if(t[a].body)return void i(t[a].body(r));t[a].callbacks.push({func:i,arg:r})}else t[a]={callbacks:[]},t[a].callbacks.push({func:i,arg:r});else void 0!==n&&null!==n||e.initLib(a,r)},e.registerLib=function(a,n){try{if(t){t.hasOwnProperty(a)||e.initLib(a,e,n);var r=t[a];r.body=n;for(var i=r.callbacks.shift();i;)i.func(r.body(i.arg)),i=r.callbacks.shift()}}catch(e){}},e.initLib=function(e,a,n){if(t[e]||(t[e]={handle:null,callbacks:[]}),t[e].body=n,t[e].body){var r=t[e].body(a);return a[e]=r,void(t[e].handle=r)}},e.getLib=function(e){return t[e]?t[e].handle:null}}(),t.gg_nol_FlashCallBack){for(var I=0,D,A=t.gg_nol_FlashCallBack.length;I<A;I+=1)t.gg_nol_FlashCallBack[I].hasOwnProperty("callBack")&&(D=document.getElementById(t.gg_nol_FlashCallBack[I].swfId))&&D[t.gg_nol_FlashCallBack[I].callBack]();t.gg_nol_FlashCallBack=void 0}b||(b=!0,P=S=Date.now(),e.BUILDVERSION="6.0.0.16")}}(e.NOLBUNDLE=e.NOLBUNDLE||{},e),e.NOLBUNDLE.registerLib("GLCFG",function(t){function a(t,a){if(t&&a){var n=a.path;e.NOLBUNDLE.loadLib(t,n,f,function(){a.status=1})}}function n(e){return L[e]||L[w]||{}}function r(e){try{if(!e.modules.allModInit){var t=!0,a=n(e.sdkv);for(_ in E)if(E.hasOwnProperty(_)&&a.hasOwnProperty(_)&&!f[_]){if("PLLOG"!==_&&2!==e.modules[_]){t=!1;break}}else;t&&(e.modules.allModInit=!0,f._listeners.fireEvent("flushQueue"))}}catch(e){}}function i(e){if(e){var t,a;for(t in f.availModules)f.availModules.hasOwnProperty(t)&&1==e.init&&(e.modules[t]||(e[t]=new f.availModules[t].init(e),e.modules[t]=1));var n=e.getConfigParams().nol_playerId;f._players[n]=e,f._listeners.addListener("tick",function(){r(f._players[n])})}}function o(){void 0!==e.document.referrer&&e.document.referrer.length>0&&f.postMsgAvail&&e.parent.postMessage("nolInit",0===e.location.protocol.indexOf("http")?e.document.referrer:"*"),P<S?e.clearInterval(h):S+=1}function s(){if(!(this instanceof s))return new s;f._listeners={},this.addListener=function(e,t,a){var n=a||!1;void 0===f._listeners[e]&&(f._listeners[e]=[]),f._listeners[e].push({cb:t,remove:n})},this.fireEvent=function(e,t){if(e){var a,n,r;if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(f._listeners[e.type]instanceof Array){for(a=f._listeners[e.type],n=0,r=a.length;n<r;n++)a[n]&&a[n].cb.call(this,e);for(n=0;n<a.length;n++)a[n]&&a[n].remove&&(a.splice(n,1),n--)}}},this.removeListener=function(e,t){var a,n,r;if(f._listeners[e]instanceof Array)for(a=f._listeners[e],n=0,r=a.length;n<r;n++)if(a[n]&&a[n].cb===t){a[n].remove=!0;break}}}function l(e){var t,r=n(e||w);for(t in E)E.hasOwnProperty(t)&&r.hasOwnProperty(t)&&!f[t]&&a(t,E[t])}function d(e){e&&f._listeners.fireEvent(e.eventTrigger,e)}function c(){for(var e=0;e<f.onLSReady.length;e++)f.onLSReady[e]();f.onLSReady=[]}function u(t,a,n){try{a=a||1,f.gIframe||(f.gIframe=e.document.createElement("iframe"),f.gIframe.src=C+"novms/html/ls.html",f.gIframe.height=0,f.gIframe.width=0,f.gIframe.style.display="none",f.gIframe.id="lsframe",f.gIframe.onload=function(){p(),f.getEmmUrl(),v(),f.queryCookies(),f.gIframeReady=!0,f.thirdPartyData.cookiesEnabled=navigator.cookieEnabled,n&&n(),f.browser.localStorageSupported()||(f.thirdPartyData.localStorageEnabled=!1,c())}),e&&e.document&&e.document.body?e.document.body.appendChild(f.gIframe):a<=15&&setTimeout(function(){f._listeners.fireEvent("debug",{type:"debug",msg:"document.body not ready - delaying to add ls.html"}),u(t,a++,n)},a<=1?0:300)}catch(t){e.console&&e.console.error&&e.console.error("Unable to register ls.html - "+t.message)}}function p(e){if(void 0!==f.gIframe&&f.postMsgAvail)return void 0===e?void f.lsController.store.get(I):void f.lsController.store.set(I,e)}function m(e){if(void 0!==f.gIframe&&f.postMsgAvail)return void 0===e?void f.lsController.store.get(emmUrlKey):void f.lsController.store.set(emmUrlKey,e)}function v(){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:optoutCookieKey,eventType:"get",storageType:"cookie"}),f.gIframe.src)}var f=t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{},g,_,y,h=0,P=30,S=0,T=!0,b=864e5,O=e.NOLBUNDLE,C=O.getAddress(),w=O.getVersion();f.localStorageId=f.localStorageId||"-1",f.EMMURL=f.EMMURL||"",f.optoutCookie=f.optoutCookie||"",f.gotLSID=f.gotLSID||!1,f.gotEMMURL=f.gotEMMURL||!1,f.gotOptoutCookie=f.gotOptoutCookie||!1,f.gotCookies=f.gotCookies||!1;var L={600:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0",LSID:!0},"600_rc":{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0.rc",LSID:!0},601:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1",LSID:!0},501:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1",LSID:!1,FORCEFOCUS:!0}},E={PLDPR:{path:C+"novms/js/2/pldpr"+L[w].PLDPR+".js",status:0},PLDCR:{path:C+"novms/js/2/pldcr"+L[w].PLDCR+".js",status:0},PLVBL:{path:C+"novms/js/2/plvbl"+L[w].PLVBL+".js",status:0},PLSIVT:{path:C+"novms/js/2/plsivt"+L[w].PLSIVT+".js",status:0},PLCMB:{path:C+"novms/js/2/plcmb"+L[w].PLCMB+".js",status:0},PLLOG:{path:C+"novms/js/2/pllog"+L[w].PLLOG+".js",status:0},PLSTM:{path:C+"novms/js/2/plstm"+L[w].PLSTM+".js",status:0}},k="6.0.0.17",I="nol_lsid";if(emmUrlKey="nol_emmURL",optoutCookieKey="OPT_OUT",f.gIframe=f.gIframe||f.getLS?f.getLS():null,f.gIframeReady=f.gIframeReady||!1,f.onLSReady=f.onLSReady||[],f.thirdPartyData=f.thirdPartyData||{cookiesEnabled:!0,localStorageEnabled:!0},f.postMsgAvail=f.postMsgAvail||"function"==typeof e.postMessage,f.availModules=f.availModules||{},f._players=f._players||{},f.id=f.id||"0",f.childGlobal=f.childGlobal||!!e&&e.top!==e.self,f.parentFound=f.parentFound||!1,f.CryptoJS=f.CryptoJS||function(e,t){var a={},n=a.lib={},r=function(){},i=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=i.extend({init:function(e,a){e=this.words=e||[],this.sigBytes=a!=t?a:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,a=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(a[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<a.length)for(r=0;r<e;r+=4)t[n+r>>>2]=a[r>>>2];else t.push.apply(t,a);return this.sigBytes+=e,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var a=[],n=0;n<t;n+=4)a.push(4294967296*e.random()|0);return new o.init(a,t)}}),s=a.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;a.push((r>>>4).toString(16)),a.push((15&r).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n+=2)a[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(a,t/2)}},d=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],n=0;n<e;n++)a.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return a.join("")},parse:function(e){for(var t=e.length,a=[],n=0;n<t;n++)a[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(a,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a=this._data,n=a.words,r=a.sigBytes,i=this.blockSize,s=r/(4*i),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,r=e.min(4*t,r),t){for(var l=0;l<t;l+=i)this._doProcessBlock(n,l);l=n.splice(0,t),a.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new p.HMAC.init(e,a).finalize(t)}}});var p=a.algo={};return a}(Math),f.checkUserAgent=function(t){var a=e?e.navigator.userAgent.toLowerCase():null;return void 0!==t&&t.length>0&&(a=-1!==a.search(t)),a},f.userAgent=function(e){var t=null,a="";try{t=e&&e.navigator?e.navigator.userAgent:null,a=t?t.toLowerCase():""}catch(e){}return{get:function(){return t},isFB:function(){return-1!==a.search(/(?=.*\[fb).*/)},isChrome:function(){return-1!==a.search(/(?=.*chrome).*/)||-1!==a.search(/(?=.*crios).*/)},isMac:function(){return-1!==a.search(/(?=.*macintosh).*/)},isIOS:function(){return-1!==a.search(/(?=.*iphone).*/)||-1!==a.search(/(?=.*ipad).*/)},iosVersion:function(){var e=new RegExp(/os\s([0-9_]*?)\s/gi),t=e.exec(a),n=t&&t.length>1?t[1].split("_"):[];return{version:t&&t.length>0?t[1].replace(/_/gi,"."):"",major:n&&n.length>0?parseInt(n[0]):0,minor:n&&n.length>1?parseInt(n[1]):0,patch:n&&n.length>2?parseInt(n[2]):0}},isAndroid:function(){return-1!==a.search(/(?=.*android).*/)},androidVersion:function(){var e=new RegExp(/android (.*?);/gi),t=e.exec(a),n=t&&t.length>1?t[1].split("."):[];return{version:t&&t.length>0?t[1]:"",major:n&&n.length>0?parseInt(n[0]):0,minor:n&&n.length>1?parseInt(n[1]):0,patch:n&&n.length>2?parseInt(n[2]):0}}}}(e),f.getBaseBuildVer=function(){var e=n(w);if(e.hasOwnProperty("BASEVER"))return e.BASEVER+"."},f.getConfigVer=function(){var e=n(w);if(e.hasOwnProperty("CONFIG"))return e.CONFIG},f.getIfLsidShouldSend=function(){var e=n(w);if(e.hasOwnProperty("LSID"))return e.LSID},f.globalHasFocus=function(){var t=O.getVersionOverride(),a=n(t);if(a&&a.hasOwnProperty("FORCEFOCUS"))return a.FORCEFOCUS;if(e.top!=e.self)return!1;var r=!1;try{r=e.top.document.hasFocus()}catch(e){r=!0}return r},f.bindPlayers=function(e,t){if(t){var a;f.availModules[t]=e;for(a in f._players)f._players.hasOwnProperty(a)&&1==f._players[a].init&&(f._players[a].modules[t]||(f._players[a][t]=new e.init(f._players[a]),f._players[a].modules[t]=2))}},f.enablePlayer=function(e,t){e&&t&&(f._players[e].modules[t]=2)},f.registerListener=function(e,t){t&&(t.addListener(e,function(t){f._listeners.fireEvent(e,t)}),t.init||(t.init=1,i(t)))},f._listeners=f._listeners||new s,f.lsReady=function(){return f.gIframeReady},f.lsController={store:{get:function(t){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:t,eventType:"get",storageType:"local"}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},set:function(t,a){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:t,eventType:"set",storageType:"local",data:a}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")}},request:function(t){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"reqUsingFrame",data:{url:t}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},maskedRequest:function(t){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:t}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},maskedRequestWithRetry:function(t){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskrefretry",data:{url:t}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")}},f.configController={_keys:{cmsKey:"nol_clientCMSmap"},getGlobal:function(e,t){return e&&t&&t.nol_GLOBALS?t.nol_GLOBALS[e]||"":""},cmsMap:function(e,t){var a=this.getGlobal(this._keys.cmsKey,t);return a?a[e]:""}},f.scriptController={inject:function(e,t,a,n){if(e){var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.async=!0,r.onload=a,r.onerror=n,r.src=e;var i=null,t=t||"";if("script"===t){if((i=document.getElementsByTagName("script"))&&i.length>0)return void(t=i[0].parentNode.insertBefore(r,i[0]))}else if("head"===t){if((i=document.getElementsByTagName("header"))&&i.length>0)return void(t=i[0].appendChild(r))}else if(t&&"string"==typeof t){if((t=document.getElementById(t))&&"function"==typeof t.insertBefore)return void t.parentNode.insertBefore(r,t)}else if(t&&"object"==typeof t&&t.appendChild&&"function"==typeof t.appendChild)return void t.appendChild(r);document.body.appendChild(r)}}},f.getLS=function(){return f.gIframe},f.waitForLS=function(e){f.thirdPartyData.localStorageEnabled?e&&(f.gIframeReady&&"-1"!==f.localStorageId?e():f.onLSReady.push(e)):e&&e()},f.browser=function(){function t(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))}function a(e){void 0!=e&&null!=e&&null!=e.element&&void 0!=e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))}function n(n){function r(){a({element:document,eventType:"DOMContentLoaded",func:i}),a({element:e,eventType:"load",func:i})}function i(){r(),o.ready=!0,n&&n()}if(o.ready)return void(n&&n());"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e.setTimeout(i):(t({element:document,eventType:"DOMContentLoaded",func:i}),t({element:e,eventType:"load",func:i}))}function r(){try{var t=e.localStorage;if(null!==t&&void 0!==t)return!0}catch(e){return!1}return!1}function i(){return document[l]||"hidden"===document[c]}var o={ready:!1},s=["webkit","moz","ms","o"],l="hidden",d="visibilitychange",c="visibilityState";if(!document[l])for(var u=0;u<s.length;u++)if(s[u]+"Hidden"in document){l=s[u]+"Hidden",d=s[u]+"visibilitychange",c=s[u]+"visibilityState";break}return{addEventListener:t,removeEventListener:a,ready:n,localStorageSupported:r,hidden:i,visibilityEvent:d}}(),f.updateReceiver=function(e){d(e)},f.generateGUID=function(){function e(){var e;do{e=Math.floor(992*Math.random())}while(e>61);return e}for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=29,n="",r=0;r<29;r++)n+=t.charAt(e());return n+=Math.floor((new Date).getTime()/1e3)},f.queryCookies=function(){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:"cookieall",eventType:"get",storageType:"cookie"}),f.gIframe.src)},f.getLsId=function(){return"string"!=typeof f.localStorageId?f.localStorageId.toString():f.localStorageId},f.getEmmUrl=function(){return m()},f.getOptoutCookie=function(){return f.optoutCookie},f.isOptout=function(){return f.optoutCookie&&"true"===f.optoutCookie.toLowerCase()||"OPTOUT"===f.localStorageId},f.cookie=f.cookie||function(){var e={cookie:""},t={setCache:function(t){e.cookie=t},getCookies:function(){if(e.cookie)try{var t=e.cookie.split(";"),a=null,n={};return t.forEach(function(e){a=e.trim().split("="),n[a[0].trim()]=a[1].trim()}),n}catch(e){}return{}},get:function(e){if(e){return t.getCookies()[e]}return""}};return{cache:t.setCache,get:t.get,all:t.getCookies}}(),f.setLsId=function(e,t,a){if(null!==e&&void 0!==e&&e!==f.getLsId()&&(f.localStorageId=e,p(f.localStorageId)),t&&f.postMsgAvail)if(f.userAgent.isAndroid()&&f.userAgent.androidVersion().major<6){var n="";f.userAgent.isChrome()?(n="intent://nuid/"+a+"/#Intent;action=android.intent.action.VIEW;scheme=nielsenwebid;component=com.nielsen.odm/.NielsenMobileMeter;end",f.lsController.request(n),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM intent "+n
})):(n="nielsenwebid://nuid/"+a,f.lsController.request(n),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM deep link "+n})),f.setEmmUrl(n)}else f.lsController.maskedRequest(t),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM link "+t}),f.setEmmUrl(t)},f.setEmmUrl=function(e){e&&(f.EMMURL=e,m(f.EMMURL))},f.isValidJson=function(e){var t;try{t=JSON.parse(e)}catch(e){return!1}return"Object"==typeof t},f.getPrefProtocol=function(t){try{return f.userAgent.isIOS()&&f.userAgent.iosVersion().major>=9?"https":0===e.location.protocol.indexOf("https")?"https":t.nol_GLOBALS.hasOwnProperty("nol_prefProtocol")&&-1!==["http","https"].indexOf(t.nol_GLOBALS.nol_prefProtocol)?t.nol_GLOBALS.nol_prefProtocol:t.nol_GLOBALS.nol_tagMap&&t.nol_GLOBALS.nol_tagMap.nol_defaults&&t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol&&-1!==["http","https"].indexOf(t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol)?t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol:"https"}catch(e){return"https"}},f.loadChildren=l,!f.built){try{u(),O.browserSafeAddEventListener({element:e,eventType:"message",func:function(t){var a,n,r;if(t.data&&"nolInit"==t.data&&e.self===e.top)for(a=e.document.getElementsByTagName("iframe"),n=a.length-1;n>=0;n--)a[n].contentWindow==t.source&&f.postMsgAvail&&t.source.postMessage({nolSentFromBsdk:!0,key:"nolChildReg",parentID:f.id},0===e.location.protocol.indexOf("http")?t.origin:"*");else t.data&&t.data.key&&"nolChildReg"==t.data.key&&(f.parentFound=!0,e.clearInterval(h));if(t.origin&&t.origin.indexOf("imrworldwide.com")>-1&&t.data||t.data&&t.data.nolSentFromLs){var i=""!==t.data.val&&f.isValidJson(t.data.val)?JSON.parse(t.data.val):t.data.val,o=""!==t.data.key&&f.isValidJson(t.data.key)?JSON.parse(t.data.key):t.data.key;if(t.data&&"lsget"===t.data.type)switch(o){case I:var s="OPTOUT"===String(i).toUpperCase();f.setLsId(i),f.gotLSID=!0,f._listeners.fireEvent("sendOptOutStatus",s);break;case emmUrlKey:f.EMMURL=i,f.gotEMMURL=!0}else if(t.data&&"lsbroadcast"===t.data.type){var l=String(t.data.newValue).toUpperCase().replace(/"/gi,"");switch(o){case I:l&&"-1"!==l||(l=f.generateGUID(),p(l)),f.localStorageId=l,f._listeners.fireEvent("sendOptOutStatus","OPTOUT"===l);break;case emmUrlKey:f.EMMURL=i}}else if(t.data&&"cookieget"===t.data.type)switch(o){case optoutCookieKey:f.optoutCookie=i,f.gotOptoutCookie=!0;break;case"cookieall":f.cookie.cache(i),f.gotCookies=!0,f._listeners.fireEvent("debug",{type:"debug",msg:"Got cookie value ='"+i+"'"})}else if(t.data&&"lsdisabled"===t.data.type&&1==t.data.val)switch(f.thirdPartyData.localStorageEnabled=!1,t.data.key){case I:f.gotLSID=!0;break;case emmUrlKey:f.gotEMMURL=!0}else t.data&&"cookiedisabled"===t.data.type&&1==t.data.val&&(f.thirdPartyData.cookiesEnabled=!1,t.data.key===optoutCookieKey&&(f.gotOptoutCookie=!0,f.gotCookies=!0));f.gotLSID&&f.gotEMMURL&&f.gotOptoutCookie&&f.gotCookies&&c()}},useCapture:!1}),void 0===g&&(g=e.setInterval(function(e){f._listeners.fireEvent("tick",e)},1e3)),f.childGlobal&&(h=e.setInterval(function(){o()},500))}catch(e){}!function(){var e=f.CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<a;r+=3)for(var i=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;4>o&&r+.75*o<a;o++)e.push(n.charAt(i>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var a=e.length,n=this._map,r=n.charAt(64);r&&-1!=(r=e.indexOf(r))&&(a=r);for(var r=[],i=0,o=0;o<a;o++)if(o%4){var s=n.indexOf(e.charAt(o-1))<<o%4*2,l=n.indexOf(e.charAt(o))>>>6-o%4*2;r[i>>>2]|=(s|l)<<24-i%4*8,i++}return t.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,a,n,r,i,o){return((e=e+(t&a|~t&n)+r+o)<<i|e>>>32-i)+t}function a(e,t,a,n,r,i,o){return((e=e+(t&n|a&~n)+r+o)<<i|e>>>32-i)+t}function n(e,t,a,n,r,i,o){return((e=e+(t^a^n)+r+o)<<i|e>>>32-i)+t}function r(e,t,a,n,r,i,o){return((e=e+(a^(t|~n))+r+o)<<i|e>>>32-i)+t}for(var i=f.CryptoJS,o=i.lib,s=o.WordArray,l=o.Hasher,o=i.algo,d=[],c=0;64>c;c++)d[c]=4294967296*e.abs(e.sin(c+1))|0;o=o.MD5=l.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var o=0;16>o;o++){var s=i+o,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var o=this._hash.words,s=e[i+0],l=e[i+1],c=e[i+2],u=e[i+3],p=e[i+4],m=e[i+5],v=e[i+6],f=e[i+7],g=e[i+8],_=e[i+9],y=e[i+10],h=e[i+11],P=e[i+12],S=e[i+13],T=e[i+14],b=e[i+15],O=o[0],C=o[1],w=o[2],L=o[3],O=t(O,C,w,L,s,7,d[0]),L=t(L,O,C,w,l,12,d[1]),w=t(w,L,O,C,c,17,d[2]),C=t(C,w,L,O,u,22,d[3]),O=t(O,C,w,L,p,7,d[4]),L=t(L,O,C,w,m,12,d[5]),w=t(w,L,O,C,v,17,d[6]),C=t(C,w,L,O,f,22,d[7]),O=t(O,C,w,L,g,7,d[8]),L=t(L,O,C,w,_,12,d[9]),w=t(w,L,O,C,y,17,d[10]),C=t(C,w,L,O,h,22,d[11]),O=t(O,C,w,L,P,7,d[12]),L=t(L,O,C,w,S,12,d[13]),w=t(w,L,O,C,T,17,d[14]),C=t(C,w,L,O,b,22,d[15]),O=a(O,C,w,L,l,5,d[16]),L=a(L,O,C,w,v,9,d[17]),w=a(w,L,O,C,h,14,d[18]),C=a(C,w,L,O,s,20,d[19]),O=a(O,C,w,L,m,5,d[20]),L=a(L,O,C,w,y,9,d[21]),w=a(w,L,O,C,b,14,d[22]),C=a(C,w,L,O,p,20,d[23]),O=a(O,C,w,L,_,5,d[24]),L=a(L,O,C,w,T,9,d[25]),w=a(w,L,O,C,u,14,d[26]),C=a(C,w,L,O,g,20,d[27]),O=a(O,C,w,L,S,5,d[28]),L=a(L,O,C,w,c,9,d[29]),w=a(w,L,O,C,f,14,d[30]),C=a(C,w,L,O,P,20,d[31]),O=n(O,C,w,L,m,4,d[32]),L=n(L,O,C,w,g,11,d[33]),w=n(w,L,O,C,h,16,d[34]),C=n(C,w,L,O,T,23,d[35]),O=n(O,C,w,L,l,4,d[36]),L=n(L,O,C,w,p,11,d[37]),w=n(w,L,O,C,f,16,d[38]),C=n(C,w,L,O,y,23,d[39]),O=n(O,C,w,L,S,4,d[40]),L=n(L,O,C,w,s,11,d[41]),w=n(w,L,O,C,u,16,d[42]),C=n(C,w,L,O,v,23,d[43]),O=n(O,C,w,L,_,4,d[44]),L=n(L,O,C,w,P,11,d[45]),w=n(w,L,O,C,b,16,d[46]),C=n(C,w,L,O,c,23,d[47]),O=r(O,C,w,L,s,6,d[48]),L=r(L,O,C,w,f,10,d[49]),w=r(w,L,O,C,T,15,d[50]),C=r(C,w,L,O,m,21,d[51]),O=r(O,C,w,L,P,6,d[52]),L=r(L,O,C,w,u,10,d[53]),w=r(w,L,O,C,y,15,d[54]),C=r(C,w,L,O,l,21,d[55]),O=r(O,C,w,L,g,6,d[56]),L=r(L,O,C,w,b,10,d[57]),w=r(w,L,O,C,v,15,d[58]),C=r(C,w,L,O,S,21,d[59]),O=r(O,C,w,L,p,6,d[60]),L=r(L,O,C,w,h,10,d[61]),w=r(w,L,O,C,c,15,d[62]),C=r(C,w,L,O,_,21,d[63]);o[0]=o[0]+O|0,o[1]=o[1]+C|0,o[2]=o[2]+w|0,o[3]=o[3]+L|0},_doFinalize:function(){var t=this._data,a=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;a[r>>>5]|=128<<24-r%32;var i=e.floor(n/4294967296);for(a[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(a.length+1),this._process(),t=this._hash,a=t.words,n=0;4>n;n++)r=a[n],a[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=l._createHelper(o),i.HmacMD5=l._createHmacHelper(o)}(Math),function(){var e=f.CryptoJS,t=e.lib,a=t.Base,n=t.WordArray,t=e.algo,r=t.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,r=a.hasher.create(),i=n.create(),o=i.words,s=a.keySize,a=a.iterations;o.length<s;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var d=1;d<a;d++)l=r.finalize(l),r.reset();i.concat(l)}return i.sigBytes=4*s,i}});e.EvpKDF=function(e,t,a){return r.create(a).compute(e,t)}}(),f.CryptoJS.lib.Cipher||function(e){var t=f.CryptoJS,a=t.lib,n=a.Base,r=a.WordArray,i=a.BufferedBlockAlgorithm,o=t.enc.Base64,s=t.algo.EvpKDF,l=a.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,a,n){return("string"==typeof a?v:m).encrypt(e,t,a,n)},decrypt:function(t,a,n){return("string"==typeof a?v:m).decrypt(e,t,a,n)}}}});a.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=t.mode={},c=function(t,a,n){var r=this._iv;r?this._iv=e:r=this._prevBlock;for(var i=0;i<n;i++)t[a+i]^=r[i]},u=(a.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize;c.call(this,e,t,n),a.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),u.Decryptor=u.extend({processBlock:function(e,t){var a=this._cipher,n=a.blockSize,r=e.slice(t,t+n);a.decryptBlock(e,t),c.call(this,e,t,n),this._prevBlock=r}}),d=d.CBC=u,u=(t.pad={}).Pkcs7={pad:function(e,t){for(var a=4*t,a=a-e.sigBytes%a,n=a<<24|a<<16|a<<8|a,i=[],o=0;o<a;o+=4)i.push(n);a=r.create(i,a),e.concat(a)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},a.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:u}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var a=e.createEncryptor;else a=e.createDecryptor,this._minBufferSize=1;this._mode=a.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=a.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(o)},parse:function(e){e=o.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var a=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:a})}},m=a.SerializableCipher=n.extend({cfg:n.extend({format:d}),encrypt:function(e,t,a,n){n=this.cfg.extend(n);var r=e.createEncryptor(a,n);return t=r.finalize(t),r=r.cfg,p.create({ciphertext:t,key:a,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,a,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(a,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,a,n){return n||(n=r.random(8)),e=s.create({keySize:t+a}).compute(e,n),a=r.create(e.words.slice(t),4*a),e.sigBytes=4*t,p.create({key:e,iv:a,salt:n})}},v=a.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:t}),encrypt:function(e,t,a,n){return n=this.cfg.extend(n),a=n.kdf.execute(a,e.keySize,e.ivSize),n.iv=a.iv,e=m.encrypt.call(this,e,t,a.key,n),e.mixIn(a),e},decrypt:function(e,t,a,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),a=n.kdf.execute(a,e.keySize,e.ivSize,t.salt),n.iv=a.iv,m.decrypt.call(this,e,t,a.key,n)}})}(),function(){for(var e=f.CryptoJS,t=e.lib.BlockCipher,a=e.algo,n=[],r=[],i=[],o=[],s=[],l=[],d=[],c=[],u=[],p=[],m=[],v=0;256>v;v++)m[v]=128>v?v<<1:v<<1^283;for(var g=0,_=0,v=0;256>v;v++){var y=_^_<<1^_<<2^_<<3^_<<4,y=y>>>8^255&y^99;n[g]=y,r[y]=g;var h=m[g],P=m[h],S=m[P],T=257*m[y]^16843008*y;i[g]=T<<24|T>>>8,o[g]=T<<16|T>>>16,s[g]=T<<8|T>>>24,l[g]=T,T=16843009*S^65537*P^257*h^16843008*g,d[y]=T<<24|T>>>8,c[y]=T<<16|T>>>16,u[y]=T<<8|T>>>24,p[y]=T,g?(g=h^m[m[m[S^h]]],_^=m[m[_]]):g=_=1}var b=[0,1,2,4,8,16,32,64,128,27,54],a=a.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,a=e.sigBytes/4,e=4*((this._nRounds=a+6)+1),r=this._keySchedule=[],i=0;i<e;i++)if(i<a)r[i]=t[i];else{var o=r[i-1];i%a?6<a&&4==i%a&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=o<<8|o>>>24,o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=b[i/a|0]<<24),r[i]=r[i-a]^o}for(t=this._invKeySchedule=[],a=0;a<e;a++)i=e-a,o=a%4?r[i]:r[i-4],t[a]=4>a||4>=i?o:d[n[o>>>24]]^c[n[o>>>16&255]]^u[n[o>>>8&255]]^p[n[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,o,s,l,n)},decryptBlock:function(e,t){var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,d,c,u,p,r),a=e[t+1],e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,n,r,i,o,s){for(var l=this._nRounds,d=e[t]^a[0],c=e[t+1]^a[1],u=e[t+2]^a[2],p=e[t+3]^a[3],m=4,v=1;v<l;v++)var f=n[d>>>24]^r[c>>>16&255]^i[u>>>8&255]^o[255&p]^a[m++],g=n[c>>>24]^r[u>>>16&255]^i[p>>>8&255]^o[255&d]^a[m++],_=n[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^o[255&c]^a[m++],p=n[p>>>24]^r[d>>>16&255]^i[c>>>8&255]^o[255&u]^a[m++],d=f,c=g,u=_;f=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^a[m++],g=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^a[m++],_=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^a[m++],p=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^a[m++],e[t]=f,e[t+1]=g,e[t+2]=_,e[t+3]=p},keySize:8});e.AES=t._createHelper(a)}(),f.built=!0}if(e.gg_nol_CallBack)for(_=0,y=e.gg_nol_CallBack.length;_<y;_+=1)e.gg_nol_CallBack[_]&&e.gg_nol_CallBack[_].callBack&&e.gg_nol_CallBack[_].callBack(f);return f}),e.NOLBUNDLE.registerLib("PLSTM",function(t){if(!t.PLSTM){var a=t.GLCFG||t;t.PLSTM={},ns=e.NOLBUNDLE,paramsPassed={},stateObject={current:null,static:null,content:null,state:null},BUILDVERSION="6.0.0.4",stateEvents={playhead:["playhead","loadmetadata"],pause:["pause","6"],complete:["complete","56","57","staticend","end"],adstop:["adstop"]};var n={clone:function(e){return JSON.parse(JSON.stringify(e))},parseType:function(e){return e&&"string"==typeof e.type.toString()?(e.type||"").toLowerCase():""},parseEvent:function(e){if(e&&e.event&&"string"==typeof e.event.toString())for(var t=Object.keys(stateEvents),a=0,n=t.length;a<n;a++)if(stateEvents[t[a]].indexOf(e.event.toLowerCase())>-1)return t[a];return null},hasData:function(e,t){if(e&&e.metadata&&t){var a=e.metadata[t];return!(!a||null===a||void 0===a||"{}"===JSON.stringify(a))}return!1},copyData:function(e,t,a){return a&&!a.metadata&&(a.metadata={}),e&&t&&n.hasData(t,e)&&a&&(a.metadata[e]=JSON.parse(JSON.stringify(t.metadata[e]))),a},objDiff:function(e,t){var a=Object.keys(e).sort(),n=Object.keys(t).sort();if(JSON.stringify(a)!==JSON.stringify(n))return!0;for(var r=0,i=n.length;r<i;r++)if(e[n[r]]!==t[n[r]])return!0;return!1},getDataKey:function(e,t,a){return e&&t&&e.metadata&&e.metadata[t]?e.metadata[t][a]||"":""},getData:function(e,t){return e&&e.metadata&&t?e.metadata[t]:null},isValid:function(e){return null!==e&&void 0!==e&&""!==e},isSame:function(e,t){var a=Object.keys(e).sort();if(a!==Object.keys(t).sort())return!1;for(var n=0,r=a.length,i="";n<r;n++)if(e[a[n]]!==t[a[n]])return!1;return!0},mergeState:function(e,t){var a=JSON.parse(JSON.stringify(t));return e&&(n.hasData(a,"content")||n.copyData("content",e,a),n.hasData(a,"ad")||n.copyData("ad",e,a),n.hasData(a,"static")||n.copyData("static",e,a)),a},evalMiddlewares:function(e,t,a){var n=Object.keys(e),r=t.state;return n.forEach(function(n){r=e[n](r,t.prevStateEvent,t.curStateEvent,t.config,a)}),t.state=r,t}},r=function(e,t){var a=n.clone(t);delete a.prevState;var r={isState:function(e){if(this.state&&e){if("string"==typeof e)return this.state.toLowerCase()===e.toLowerCase();if("object"==typeof e)return e.indexOf(this.state)>-1}return!1}};return{transitionType:e,event:"",state:a.state||"idle",prevState:a,hasPrevStatic:a.hasNewStatic||!1,hasNewStatic:!1,isNewStatic:!1,hasPrevContent:a.hasNewContent||!1,hasNewContent:!1,isNewContentAsset:!1,hasPrevAd:a.hasNewAd||!1,hasNewAd:!1,isNewAdAsset:!1,hasId3:!1,scroll:!1,isVA:!1,lastPh:a.lastPh,isState:r.isState}},i={start:function(e,t,i,s){try{var l=new r(n.parseType(i),e),d=Object.keys(o),c=e,u=t,p=i;l.isVA=s&&s.nol_GLOBALS&&"601"===s.nol_GLOBALS.nol_nsdkv,l.transitionType=n.parseType(i),l.event=n.parseEvent(i);var m=d.map(function(e){l[e]=o[e]&&o[e](l,u,p,s)||!1}).filter(function(e){return!(""===e||null===e||void 0===e)});return l}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition start error - "+e.message})}return e},preTransitionEvents:function(e,t,r,i,o){try{var s=e.lastPh;(e.isStaticChange||e.isStaticComplete)&&o("staticend",n.getData(t||{},"static")||0),(e.isAdChange||e.isAdComplete)&&o("stop",s),e.isContentChange||e.isContentComplete?o("end",s):(e.contentToAdTransition||e.adToContentTransition)&&o("pause",s)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pre-transition error - "+e.message})}return e},transition:function(e,t,n,r){try{"static"!==e.transitionType&&("pause"===e.event?e.state="ad"===e.transitionType?"adpaused":"contentpaused":"ad"===e.transitionType&&["adstop","complete"].indexOf(e.event)>-1?e.state="adcomplete":"content"===e.transitionType&&"complete"===e.event?e.state="contentcomplete":"playhead"===e.event&&(e.state="ad"===e.transitionType?"ad":"content"))}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition error - "+e.message})}return e},postTransitionEvents:function(e,t,r,i,o){try{var s=n.getData(r,"content")||n.getData(t,"content"),l=n.getData(r,"static")||n.getData(t,"static"),d=e.lastPh;e.isNewStaticAsset&&o("staticstart",n.getData(r,"static")),e.scroll&&(e.hasPrevStatic||e.hasNewStatic)&&o("onpaginate",l),e.inAdContentMetaUpdate&&"playhead"===e.event&&r.playheadPosition&&o("setplayheadposition",r.playheadPosition),(e.isNewContentAsset||e.inAdContentMetaUpdate||e.adToContentTransition)&&o("loadmetadata",s),e.contentMetaChanged&&o("updatemetadata",s),e.isNewAdAsset||e.contentToAdTransition?o("loadmetadata",n.getData(r,"ad")):e.inAdContentMetaUpdate&&o("changecontext","ad"),e.hasId3&&o("sendid3",r.id3Data),null!==r.volume&&void 0!==r.volume&&o("volume",r.volume),e.isOptout&&o("optout",r.optout),e.isOtt&&o("updateott",r.ottData),e.isBuffering&&o("buffering",d),r.buttonEvent&&o("buttonevent",r.buttonEvent),"playhead"===e.event&&r.playheadPosition&&!e.inAdContentMetaUpdate&&("content"===e.transitionType&&(e.hasNewContent||e.hasPrevContent)||"ad"===e.transitionType&&(e.hasNewAd||e.hasPrevAd))&&o("setplayheadposition",r.playheadPosition)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent post-transition error - "+e.message})}return e},end:function(e,t,r,i){try{r.metadata||(r.metadata={}),e.isNewAdAsset||!e.isAdComplete&&!e.isContentChange?!e.hasNewAd&&e.hasPrevAd&&n.copyData("ad",t,r):r.metadata.ad={},!e.isNewContentAsset&&e.isContentComplete?r.metadata.content={}:!e.hasNewContent&&e.hasPrevContent&&n.copyData("content",t,r),e.isStaticComplete?r.metadata.static={}:!e.hasNewStatic&&e.hasPrevStatic&&n.copyData("static",t,r)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition end error - "+e.message})}return e}},o={hasPrevStatic:function(e,t,a,r){return n.hasData(t,"static")},hasPrevContent:function(e,t,a,r){return n.hasData(t,"content")},hasPrevAd:function(e,t,a,r){return n.hasData(t,"ad")},hasNewStatic:function(e,t,a,r){return n.hasData(a,"static")},hasNewContent:function(e,t,a,r){return n.hasData(a,"content")},hasNewAd:function(e,t,a,r){return n.hasData(a,"ad")},isNewStaticAsset:function(e,t,r,i){if(!1===e.hasNewStatic)return!1;var o=a.configController.cmsMap("nol_assetid",i),s=n.getDataKey(t,"static",o),l=n.getDataKey(r,"static",o);return void 0!==l&&null!==l&&""!==l&&(!e.hasPrevStatic||l!==s)},isNewContentAsset:function(e,t,r,i){if(!1===e.hasNewContent)return!1;var o=a.configController.cmsMap("nol_assetid",i),s=n.getDataKey(t,"content",o),l=n.getDataKey(r,"content",o);return void 0!==l&&null!==l&&""!==l&&(!e.hasPrevContent||l!==s)},isNewAdAsset:function(e,t,r,i){if(!1===e.hasNewAd)return!1;var o=a.configController.cmsMap("nol_assetid",i),s=n.getDataKey(t,"ad",o),l=n.getDataKey(r,"ad",o),d=a.configController.cmsMap("nol_adIdx",i)||"adIdx",c=n.getDataKey(t,"ad",d),u=n.getDataKey(r,"ad",d);return void 0!==l&&null!==l&&""!==l&&(!e.hasPrevAd||l!==s)||e.hasPrevAd&&u!==c||n.getDataKey(t,"ad","type")!==n.getDataKey(r,"ad","type")},contentMetaChanged:function(e,t,a,r){return!1!==e.hasNewContent&&!1!==e.hasPrevContent&&n.objDiff(n.getData(t,"content"),n.getData(a,"content"))},adMetaChanged:function(e,t,a,r){return!1!==e.hasNewAd&&!1!==e.hasPrevAd&&n.objDiff(n.getData(t,"ad"),n.getData(a,"ad"))},hasId3:function(e,t,a,n){return"content"===e.transitionType&&null!==a.id3Data&&void 0!==a.id3Data&&""!==a},scroll:function(e,t,a,n){return"static"===e.transitionType&&a.scroll&&["true","1","y","yes"].indexOf(a.scroll.toString().toLowerCase())>-1},isStaticChange:function(e){return e.isNewStaticAsset&&e.hasPrevStatic},isStaticComplete:function(e){return"static"===e.transitionType&&"complete"===e.event},isContentChange:function(e){return e.isNewContentAsset&&e.hasPrevContent&&!e.isState("contentcomplete")&&"playhead"===e.event},adToContentTransition:function(e){return e.isState(["ad","adpaused","adcomplete"])&&"content"===e.transitionType&&"playhead"===e.event&&(e.hasPrevContent||e.hasNewContent)},contentToAdTransition:function(e,t,a){return e.isState(["content","contentpaused"])&&"ad"===e.transitionType&&"playhead"===e.event&&e.hasNewAd},isContentComplete:function(e,t,a){return"content"===e.transitionType&&e.isState(["content","contentpaused"])&&"complete"===e.event||e.contentToAdTransition&&"postroll"===n.getData(a,"ad").type},isAdChange:function(e){return e.isNewAdAsset&&e.hasPrevAd&&e.isState(["ad","adpaused"])&&!e.isState("adcomplete")&&"playhead"===e.event},isAdComplete:function(e){return e.isState(["ad","adpaused"])&&("complete"===e.event||e.isAdChange)||"adstop"===e.event&&e.hasPrevAd},inAdContentMetaUpdate:function(e){return(e.contentMetaChanged||e.isNewContentAsset)&&"ad"===e.transitionType},isOtt:function(e,t,a){return null!==a.ottData&&void 0!==a.ottData&&""!==a.ottData},isOptout:function(e,t,a){return null!==a.optout&&void 0!==a.optout&&""!==a.optout&&["1","true","t","y","yes"].indexOf(a.optout.toString().toLowerCase())},isBuffering:function(e,t,a){return null!==a.buffering&&void 0!==a.buffering&&""!==a.buffering&&["1","true","t","y","yes"].indexOf(a.buffering.toString().toLowerCase())},lastPh:function(e,t,a){return n.isValid(t.playheadPosition)?t.playheadPosition:e.lastPh||0}};return t.PLSTM.stateMachine=function(e,t){var r={config:t,curStateEvent:{metadata:{}},prevStateEvent:{medata:{}},state:{}};return{transition:function(t,o){try{if(a._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent called pli="+e+" transitioning type "+t.type+" for event "+t.event+" state object: "+JSON.stringify(t)}),t&&"object"==typeof t){var s=n.parseType(t),l=n.parseEvent(t);s&&l?(r.prevStateEvent=r.curStateEvent?n.clone(r.curStateEvent):{metadata:{content:null,ad:null,static:null}},r.curStateEvent=n.clone(t),r=n.evalMiddlewares(i,r,function(t,n){a._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent pli="+e+' firing event "'+t+'"'}),o&&"function"==typeof o&&o(t,n)})):(s||a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "type" parameter in trackEvent metadata object'},id:e,timeStamp:Date.now()}),l||a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "event" parameter in trackEvent metadata object'},id:e,timeStamp:Date.now()}))}}catch(t){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pli="+e+" error - "+t.message})}},getState:function(){return r.state}}},t.PLSTM}}),e.NOLBUNDLE.registerLib("PLVBL",function(t){if(!t.PLVBL){var a="6.0.1",n={viewRatioKey:"nol_viewability",vizuURLKey:"nol_vizuURL",viewabilityKey:"nol_vsData",screenSizeKey:"nol_scrnSize",videoSizeKey:"nol_vidSize",windowSizeKey:"nol_winSize",nodeKey:"nol_nodeId",auThresholdKey:"nol_auThreshold",volumeKey:"nol_volume",audibilityKey:"nol_auData",id3GapKey:"nol_id3IntrvlGp",tickOffsetKey:"nol_viTickOffset"},r={screenSize:function(){return[e.screen.width,e.screen.height]},nodeSize:function(e,t){return e?"width"===t?e.clientWidth:"height"===t?e.clientHeight:[e.clientWidth,e.clientHeight]:""},browserSize:function(){return[e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight]}},i=t.GLCFG||t;return t.PLVBL=function(e,a,o){var s={initialized:!1,_defaults:{nol_viewability:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_auThreshold:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_volume:t.configController.getGlobal(n.volumeKey,a.getClientConfig())||"100",nol_viTickOffset:2},viReadyQueue:[],clientConfig:a.getClientConfig(),globals:a.getConfigParams().ggParams,cmsMap:null,nodeId:"",node:null,viewAPI:null,viewRatios:null,vizuURL:"",viewParams:null,volume:null,auThresholds:[],intervalGap:2,state:"idle",queueTicks:o||!1,ticker:null,tickerInterval:1e3,screenSeries:"",viewSeries:[],elementSeries:"",viewportSeries:"",audibilitySeries:[]},l={log:function(t,a){i._listeners.fireEvent(t,{type:t,msg:e.get("nol_comment")+" - "+a})},incrementSeries:function(e,t){var a=null;e?a=e[e.length-1]:e=[],a&&2===a.length&&a[0]===t?a[1]++:e.push([t,1])},clearSeries:function(e){s.viewSeries=[],s.screenSeries="",s.elementSeries=[],s.viewportSeries=[],s.audibilitySeries=[],e?l.registerVIDataReady(function(){s.viewAPI&&s.viewAPI.resetMeasurement()},"clear"):s.viewAPI&&s.viewAPI.resetMeasurement()},setDataSeries:function(e,t){e&&"function"==typeof e.set&&(e.set(n.viewabilityKey,t?"[]":JSON.stringify(s.viewSeries)),e.set(n.windowSizeKey,t?"[]":JSON.stringify(s.viewportSeries)),e.set(n.videoSizeKey,t?"[]":JSON.stringify(s.elementSeries)),e.set(n.screenSizeKey,t?"":s.screenSeries),e.set(n.audibilityKey,t?"[]":JSON.stringify(s.audibilitySeries)))},getDataSeries:function(){var e={};return e[n.viewabilityKey]=s.viewSeries,e[n.windowSizeKey]=s.viewportSeries,e[n.videoSizeKey]=s.elementSeries,e[n.screenSizeKey]=s.screenSeries,e[n.audibilityKey]=s.audibilitySeries,e},getNodeId:function(){var e=i.configController.cmsMap(n.nodeKey,s.clientConfig);return s.globals?s.globals[e]:""},getVolumeParam:function(){var e=i.configController.cmsMap(n.volumeKey,s.clientConfig)||n.volumeKey;return s.globals?s.globals[e]:""},evalUpperThreshold:function(e,t){if(null!==e&&void 0!==e&&""!==e&&e>=0&&t&&t.length>0)for(var a=0,n=t.length;a<n;a++){if(e<t[a]&&0==a)return 0;if(a==n-1&&e>=t[a])return parseFloat(t[a]);if(e<t[a])return parseFloat(t[a-1])}return 0},evalVolume:function(e){if(void 0!==e&&null!==e&&e.toString().match(/^\d*\.?\d*$/gi)&&"NaN"!==parseFloat(e).toString()&&"NaN"!==parseInt(e).toString()){var t=e;return!t.toString().match(/\d*\.\d+/i)&&(parseFloat(t)>1||"1"===t.toString())&&(t=parseFloat(t)/100),t=Math.round(100*l.evalUpperThreshold(parseFloat(t),s.auThresholds))}return null},getThreshold:function(e,a){if(e&&a){try{var n=t.configController.getGlobal(e,a.clientConfig),r="string"==typeof n?JSON.parse(n):n,i=!0;if(r&&"object"==typeof r&&r.length>0){for(var o=null,s=0,d=r.length;s<d;s++)if(!r[s].toString().match(/^\d*\.?\d*$/gi)){i=!1;break}if(i)return r}}catch(t){l.log("warn","Viewabilty config theshold for "+e+" is invalid. Default threshold will be used")}var c=a._defaults?a._defaults[e]:[];return"string"==typeof c?JSON.parse(c):c}return[]},registerVIDataReady:function(e,t){e&&"function"==typeof e&&(s.viReadyQueue||(s.viReadyQueue=[]),s.viReadyQueue.push({name:t,cb:e}))},flushVIDataReadyQueue:function(){if(s.viReadyQueue&&s.viReadyQueue.length>0)for(var e=null,t=0;t<s.viReadyQueue.length;t++)if("function"==typeof(e=s.viReadyQueue[t].cb))try{e(),s.viReadyQueue.splice(0,1)}catch(e){}}},d={init:function(a){try{if(a){l.log("debug","Initializing viewability module"),s.nodeId=a,s.node=document.getElementById(a),s.viewRatios=l.getThreshold(n.viewRatioKey,s),s.vizuURL=i.PLDPR.resolveExpression(i.configController.getGlobal(n.vizuURLKey,s.clientConfig),e),s.auThresholds=l.getThreshold(n.auThresholdKey,s);var o=t.configController.getGlobal(n.volumeKey,s.clientConfig);s._defaults[n.volumeKey]=o&&"NaN"!==parseInt(o).toString()?o:s._defaults[n.volumeKey],s.volume=l.evalVolume(l.getVolumeParam()||parseInt(s._defaults[n.volumeKey])),s.intervalGap=e.isProductOf("mtvr")?t.configController.getGlobal(n.id3GapKey,s.clientConfig):t.configController.getGlobal(n.tickOffsetKey,s.clientConfig)||s._defaults[n.tickOffsetKey],s.viewParams={externalTick:1,instantOn:0,node:s.node,width:r.nodeSize(s.node,"width"),height:r.nodeSize(s.node,"height"),ratio:s.viewRatios,tickOffset:parseInt(s.intervalGap),ffThreshold:parseInt(s.intervalGap)},s.vizuURL&&s.node?(i.scriptController.inject(s.vizuURL,s.nodeId,function(){if("function"==typeof getVIAPI){if(s.viewAPI=getVIAPI(),!s.viewAPI)return void l.log("warn","Viewability API not instantiated by viewability library. Unable to initialize viewability module.");s.viewAPI.initVI(s.viewParams),s.initialized=!0,s.viewAPI.subscribe(l.flushVIDataReadyQueue,"VIExternalDataReady",this),l.log("debug","Viewability module successfully initialized")}}),l.log("info","Viewabilty module injected")):l.log("warn","Viewabilty library URL not defined in config. Unable to initialize viewability module.")}}catch(e){l.log("warn","Failed to initialize viewability module."),s.initialized=!1}},start:function(e){"running"!==s.state&&s.initialized&&(s.viewAPI.startVI(),s.state="running")},stop:function(){"stopped"!==s.state&&s.initialized&&(s.viewAPI.stopVI(),s.state="stopped")},tick:function(e,t,a){s.initialized&&null!==e&&void 0!==e&&""!==e&&"NaN"!==Math.floor(e).toString()&&("running"!==s.state&&d.start(),s.viewAPI&&s.viewAPI.updateTick(Math.floor(e),s.volume),s.screenSeries=r.screenSize().join("x")),l.registerVIDataReady(a,"tick_"+e)},setData:function(e){s.initialized&&(s.viewSeries=s.viewAPI&&s.viewAPI.getVideoSeries?s.viewAPI.getVideoSeries():[],s.audibilitySeries=s.viewAPI&&s.viewAPI.getAudioSeries?s.viewAPI.getAudioSeries():[],s.viewportSeries=s.viewAPI&&s.viewAPI.getViewportSeries?s.viewAPI.getViewportSeries():[],s.elementSeries=s.viewAPI&&s.viewAPI.getElementSizeSeries?s.viewAPI.getElementSizeSeries():[],s.screenSeries=r.screenSize().join("x"),l.setDataSeries(e))},setVolume:function(e){if(s.initialized&&e){var t=l.evalVolume(e);void 0!==t&&null!==t&&""!==t&&"NaN"!==parseInt(e).toString()?(s.volume=t,l.log("debug","Audibiliy volume set to "+t)):l.log("debug",'Volume "'+e+'" is invalid. Volume set will be ignored.')}},clear:function(e,t){s.initialized&&l.clearSeries(t),e&&(l.log("debug","Viewability resetting"),l.setDataSeries(e,!0),setTimeout(function(){l.setDataSeries(e,!0)}))}};return e.get("nol_url").indexOf(n.viewabilityKey)>-1&&(l.log("debug","Viewability module loaded"),d.init(l.getNodeId())),{initialized:function(){return s.initialized},start:d.start,stop:d.stop,tick:d.tick,setData:d.setData,getData:l.getDataSeries,setVolume:d.setVolume,clear:d.clear}},t.PLVBL}}),e.NOLBUNDLE.registerLib("PLSIVT",function(e){if(!e.PLSIVT){var t={sivtURLKey:"nol_sivtURL"},a=e.GLCFG||e;return e.PLSIVT=function(e,n){var r={initialized:!1,sivtURL:"",clientConfig:e.getClientConfig(),globals:e.getConfigParams().ggParams,uaid:e.sessionId,apid:e.apid,dataObj:n};return{init:function(){if(r.sivtURL=a.configController.getGlobal(t.sivtURLKey,r.clientConfig),r.sivtURL){var e=a.PLDPR.resolveExpression(r.sivtURL,r.dataObj);a.scriptController.inject(e,document.body)}else a._listeners.fireEvent("debug",{type:"debug",msg:"SIVT library URL not defined in config. Unable to initialize SIVT module."});r.initialized=!0}}.init(),{initialized:function(){return r.initialized}}},e.PLSIVT}}),e.NOLBUNDLE.registerLib("PLDPR",function(t){"use strict";function a(e,t){var a=[],n=e.split("&"),r,i;for(r=0,i=n.length;r<i;r+=1)0!==n[r].indexOf(t)&&a.push(n[r]);return a.join("&")}function n(t,a){var n=t.split("||"),r=n[0]||t;if(e)for(var i=0,o=n.length;i<o;i+=1)r=n[i],void 0!==e["on"+r]&&(e.addEventListener?e.addEventListener(r,a,!1):e.attachEvent&&e.attachEvent("on"+r,a))}function r(e,t){var a;if("num"==t)a=parseInt(e,10),
e=isNaN(a)?0:a;else if("bin"==t)e=isNaN(Number(e))?"0":Number(e).toString(2);else if("bool"==t)switch(e.toString().toLowerCase()){case"false":case"no":case"0":case"":e=!1;break;default:e=!0}else"b2n"==t&&(a=parseInt(e,2),e=isNaN(a)?0:a);return e}function i(e){var t,a=[];for(t=0;t<r(e,"num");t+=1)a.push({tsv:0,save:!1,updated:!1});return a}function o(e){return{tags:[],eventQueue:e&&e.eventQueue?e.eventQueue:[],tagSize:1,bReInit:!1,debug:Le,eventQueueIndex:0}}function s(t){var n;void 0!==t&&0!==t.length&&(n=e.document.createElement("script"),n.type="text/javascript",n.src=a(t,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),n.onerror=function(t){var a=t.target.src;e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target),he<Pe&&(he+=1,e.setTimeout(function(){s(a)},5e3))},n.onload=function(t){he=0,e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target)},e.document.head?e.document.head.appendChild(n):e.document.getElementsByTagName("head")[0].appendChild(n))}function l(){var e=Array.prototype.slice.call(arguments);t._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function d(e){return encodeURIComponent(e).replace("'","%27")}function c(e){var t=0===se.indexOf("https")?"https":"http",a,n,r,i=e.url,o=e.hasOwnProperty("maskRef")?e.maskRef:-1,l=e.method||"GET";if("__sendIt"!==i&&"https"===t&&-1===i.indexOf("https")&&(i=t+i.substr(i.indexOf("://"))),e.prod&&"ocr"===e.prod&&-1!==i.indexOf("&ty=js"))return void s(i);if(be||"__sendIt"===i)if(i&&be&&Ce)we.push(i);else if("__sendIt"!==i||Ce)i&&be&&!Ce&&Te.push(i);else{for(Ce=!0,a=0,n=Te.length;a<n;a+=1)Be.setup({pingSendTime:T(e.serverTimeOffset),url:Te.shift(),maskRefUrl:o,method:l});Te=Te.concat(we),Ce=!1,we=[]}else Be.setup({pingSendTime:T(e.serverTimeOffset),url:i,maskRefUrl:o,method:l})}function u(e,t){var a="",n,r,i,o;if(!e||!t)return e;for(o=t.length,r=0,i=e.length;r<i;r+=1)n=e.charCodeAt(r)^t.charCodeAt(r%o),a+=0===n?e.charAt(r):String.fromCharCode(n);return a}function p(e,a,n,r,i){var o,s;-1===n.indexOf("[")&&-1===n.indexOf("]")&&(!r.val||r.val.length<=0)?i||(g(e,{type:"100",msg:n+" missing -- "+B({data:e,param:"nol_comment"})}),r.state=!1,r.val=""):"{"===a||"}"===a?r.val=t.CryptoJS.MD5(r.val.toString()).toString():"<"===a||">"===a?(o=n.match(me["<"].end),o?(s=o[0].match(/[\d]+/g),r.val=String(r.val).substr(s[0],s[1])):r.val=u(String(r.val),B({data:e,param:"nol_xorSeed"}))):"("!==a&&")"!==a||(r.val=d(r.val))}function m(e,t,a,n){var r="";return a&&a.clientField!==t&&!0!==n.end&&(r=Ge.cms.parse(a,e,n))?r:B({data:e,param:t,vidType:n?n.vidType:""})}function v(e,t,a){var n=t.match(/[\[\{<\(]/g),r,i,o,s,l,d,c,u,v,f,_,y,h=B({data:e,param:"nol_xorSeed"})||"",P,S;n=n?n.reverse():[],i=t.match(/[\}\]\>\)]/g)||[],s={start:n.length?t.lastIndexOf(String(n[0])):-1,end:i.length?t.indexOf(String(i[0])):t.length},i&&">"===i[0]&&(s.end=t.search(me["<"].end)||t.indexOf(">")),d=t.substring(s.start+1,s.end),v=d.split("||");var T=ge.exec(d),b=T&&T.length>1?T[1]:lookup,O=null,C="",w=Ie[e.get("nol_playerId")]||{};for(f=0,_=v.length;f<_&&(d=v[f],O=ge.exec(v[f]),C=O&&O.length>2&&O[2]?O[2].replace("_",""):"",!((y=m(e,d,w[b],{vidType:(a?a.vidType:null)||C,silent:!0,noClone:!0,end:!!a&&a.end,noEncode:!0}))&&y.length>0));f+=1);if(y&&y.length>0&&(S="string"==typeof d?d.split("_"):d,P=S[0]?S.splice(0,2).join("_"):S,(l=w[P]?w[P].encoding:"")&&(n=n.reverse().concat(l.match(/[\[\{<\(]/g)).reverse(),i=i.reverse().concat(l.match(/[\}\]>\)]/g)).reverse())),r={val:y,state:B({data:e,param:"nolPriv_sendData"})},c=n?n.length:0,u=i?i.length:0,(o=Math.min(c,u))>0)for(f=0,_=o;f<_;f+=1)p(e,n[0]||i[0],t,r,h),n.shift(),i.shift();else!0!==(!!a&&a.silent)&&(!r.val||r.val&&r.val.length<=0)&&(r.state=!1,r.val="",g(e,{type:100,msg:d+" missing "+B({data:e,param:"nol_comment"})}));return{val:r.val,strManipulate:n,strManiEnd:i}}function f(e,t,a,n){var r,i,o={val:"",state:B({data:e,param:"nolPriv_sendData"})},s=B({data:e,param:"nol_md5Seed"}),l,d,c,u=[],m,f=[],g=[],_,y="",h,P,S,T,b,O,C=B({data:e,param:"nol_xorSeed"});if(n=n||{},t=t||B({data:e,param:"nol_url"})||"",null!==(i=t.match(ve.regex)))for(P=0,S=i.length;P<S;P+=1){if(r=i[P],l=r.substr(ve.length,r.length-2*ve.length),d=l.split("+"),u=[],y="",c=0,d&&d.length>1){for(T=0,b=d.length;T<b;T+=1)if(y=d[T],n.silent=!0,m=v(e,y,n),m.strManipulate.length>0&&(c=u.length,f=[].concat(m.strManipulate,f)),u[c]=u[c]?u[c]+m.val:m.val,m.strManiEnd.length>0&&m.strManiEnd.length!==f.length){for(g=[].concat(g,m.strManiEnd),o={val:u[c],state:B({data:e,param:"nolPriv_sendData"})},_=0,O=m.strManiEnd.length;_<O;_+=1)p(e,f[0],y,o,C),f.shift(),g.shift();u[c]=o.val}for(o.val=u.join(""),h=f.length>=g.length?f:g,_=0,O=h.length;_<O;_+=1)p(e,h[0],y,o,C),f.shift(),g.shift()}else m=v(e,l,n),o={val:m.val,state:B({data:e,param:"nolPriv_sendData"})};t=t.replace(r,o.val)}return t}function g(e,a,n,r){var i,o,s=B({data:e,param:"nolPriv_errorSent"});return!0!==r&&B({data:e,param:"nolPriv_sendData",val:!1}),!(!n&&-1!==(!a||s.indexOf(a.type.toString())))&&(!!Ge.isInitialized(e)&&(i=a.type+","+d(a.msg),B({data:e,param:"nol_errorMessage",val:i}),t._listeners.fireEvent("error",{type:"error",msg:i}),o=f(e,B({data:e,param:"nol_errorURL"})),c({serverTimeOffset:B({data:e,param:"nolPriv_serverTimeOffset"}),url:o,maskRef:B({data:e,param:"nol_rfrmsk"}),method:Ge.getRequestMethod(e)}),s+=a.type.toString()+",",B({data:e,param:"nolPriv_errorSent",val:s}),!0))}function _(e){var t=!1}function y(){try{ze.length&&(ze.forEach(function(e){e&&e()}),ze=[])}catch(e){}}function h(e,a,n,r){n&&!n.serviceSending[a]?(n.serviceSending[a]=!0,je.request(e.replace("fmt=jsonp","fmt=json"),{method:"GET"}).then(function(e){if(200===parseInt(e.status)){var a={};try{a=JSON.parse(e.response)}catch(e){}a.nol_playerId=n.id,t._listeners.fireEvent("tsvupdate",a)}r&&r&&r(),y()})):r&&ze.push(r)}function P(e,t){var a=e||6;return Math.ceil(t/a)*a||"0"}function S(e,t,a){var n=!1,i=0,o=!1,s=r(B({data:e,param:"nol_unQualSegmentValue"}),"num"),l=B({data:e,param:"nol_minutes"}),d=[],c=!!t&&t.save,u,p,m,v=r(B({data:e,param:"nol_segmentTimeSpent"}),"num"),f=r(B({data:e,param:"nol_sendQual"}),"num"),g=B({data:e,param:"nol_cadence"});for(u=0,p=l.length;u<p;u+=1)m=Math.floor(l[u].tsv/B({data:e,param:"nol_creditValue"})),m>=1?(l[u].save&&"daypart"!==B({data:e,param:"nol_cadence"})?d.push(0):(d.push(B({data:e,param:"nol_creditFlag"})),i+=1,n=!0),o=!0):(d.push(0),o=!1),!0!==a&&(c?l[u].save=o:(l[u].tsv=0,l[u].save=!1,l[u].updated=!1));return f&&(n=i>=f),!0===r(B({data:e,param:"nol_minWonOverride"}),"bool")&&(n=!0),!0===a?n:(B({data:e,param:"nol_duration",val:d.join("")}),n||"interval"!==g&&"streamduration"!==g||c||("S"===B({data:e,param:"nol_segmentPrefix"})&&s&&B({data:e,param:"nol_duration",val:P(s,v)}),n=v>1),n)}function T(e){return void 0!==e?(Fe()/1e3>>0)+e:Fe()/1e3>>0}function b(t){Number(t)===t&&t%1!=0&&e.console&&e.console.warn&&e.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function O(e){try{if(null===e||"object"!=typeof e||"isActiveClone"in e)return e;if(e instanceof Date)var t=new e.constructor;else var t=e.constructor();for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(e.isActiveClone=null,t[a]=O(e[a]),delete e.isActiveClone);return t}catch(e){return!1}}function C(e,t,a,n){var o=!1;if(!n){var s=Ge.findPlayer(e),d=""===e.get("nol_fdcid")||Ge.mtvr.isNullFDCid(e)?e.get("nol_pccid"):e.get("nol_fdcid");if(e.isProductOf("mtvr")&&["true","1"].indexOf(e.get("nol_rtvodEnabled").toString().toLowerCase())>-1&&"interval"===e.get("nol_cadence")&&""===e.get("nol_rtvod")&&"true"!==e.get("nol_disabled")){if(S(e,null,!0)){var u=O(e);u&&(!function(e,t,a,n){function r(){C(n,t,a,!0)}function i(){}F(n,{service:"tsv",key:d,url:n.get("nol_tsvURL")},r),F(e,{service:"tsv",key:d,url:e.get("nol_tsvURL")},i)}(e,t,a,u),o=!0)}}}var p=B({data:e,param:"nol_url"})||"",m,v,g,y,h=0,P,w=B({data:e,param:"nol_playerId"}),L=r(B({data:e,param:"nol_maxPingCount"}),"num"),E=r(B({data:e,param:"nol_pingCount"}),"num"),k=!!t&&t.returnLength,I=B({data:e,param:"nol_cadence"}),D=B({data:e,param:"nol_eventFilter"}),A=r(B({data:e,param:"nol_maxLength"}),"num");if(B({data:e,param:"nol_pingCreationTime",val:T(B({data:e,param:"nolPriv_serverTimeOffset"}))}),v=B({data:e,param:"nol_timeSpentViewing"}).content,g=B({data:e,param:"nol_timeSpentViewing"}).ad,y=B({data:e,param:"nol_timeSpentViewing"}).static,b(B({data:e,param:"nol_segmentTimeSpent"})),(!e.isProductOf(["dcrvideo","vrivideo"])||"1"===B({data:e,param:"nol_forceFireOnClose_content"})||!(e.isProductOf(["dcrvideo","vrivideo"])&&0===v.nol_segmentTimeSpent||"dcrstatic"===B({data:e,param:"nol_product"})&&0===y.nol_segmentTimeSpent)||"interval"!==I&&"streamduration"!==I||0!==g.nol_count||0!==g.nol_segmentTimeSpent)&&"false"===B({data:e,param:"nol_disabled"})&&(0===L||L>E)){if(xe.setNextTick(e,null,"content"),m=S(e,t)||"stream"===I||"impression"===I||"id3"===B({data:e,param:"nol_product"}),B({data:e,param:"nol_random",val:Math.round(1e9*Math.random())}),p=f(e,p),h=p.length,B({data:e,param:"nolPriv_sendData"})&&m&&!k||A>0&&A<h){if(B({data:e,param:"nol_id3Data"})&&B({data:e,param:"nol_id3Data",val:!1}),l(B({data:e,param:"nol_comment"})," -queued @"+Math.floor(Fe()/1e3)+", timeOffset == "+B({data:e,param:"nolPriv_serverTimeOffset"})+", DU == "+B({data:e,param:"nol_segmentTimeSpent"})+" -- ",p),D.onSendPing&&(N(e,D.onSendPing),"true"===B({data:e,param:"nol_disabled"})))return;o||c({serverTimeOffset:B({data:e,param:"nolPriv_serverTimeOffset"}),url:p,prod:B({data:e,param:"nol_product"}),maskRef:B({data:e,param:"nol_rfrmsk"}),method:Ge.getRequestMethod(e)}),a&&a(e),B({data:e,param:"nol_viewCount_"+e._currVidType.toLowerCase(),val:"0"}),xe.clear(e),_e&&_e.hasOwnProperty(w)&&_e[w].hasOwnProperty("debug")&&"logging"===_e[w].debug&&(P=B({data:e,param:"nol_debugUrl"}),P||(P=B({data:e,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),P+="pli="+w+"&sendPing="+B({data:e,param:"nol_product"})+"&"+p.substring(p.indexOf("?")+1),_(P)),E+=1,v.nol_segmentTimeSpent=0,v.nol_count=0,g.nol_segmentTimeSpent=0,g.nol_count=0,y.nol_segmentTimeSpent=0,y.nol_count=0,B({data:e,param:"nol_pingStartTimeUTC",val:Math.round(Fe()/1e3)}),B({data:e,param:"nolPriv_priority",val:0}),B({data:e,param:"nol_pingCount",val:E.toString()}),B({data:e,param:"nol_forceFireOnClose_content",val:"0"});var M=i(B({data:e,param:"nol_segmentLength"}));B({data:e,param:"nol_duration",val:new Array(M.length+1).join("0")})}else if(k)return{len:h,fData:p};return null}}function w(e){try{if(void 0===e)return;var a=i(B({data:e,param:"nol_segmentLength"}));B({data:e,param:"nol_minutes",val:a}),B({data:e,param:"nol_duration",val:new Array(a.length+1).join("0")})}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function L(e,t){var a=r(B({data:e,param:"nol_segmentLength"}),"num")*r(B({data:e,param:"nol_segmentValue"}),"num");return{segment:Math.floor(t/a+1),minute:Math.floor(t%a/B({data:e,param:"nol_segmentValue"})),seconds:t%B({data:e,param:"nol_segmentValue"})}}function E(e,a,n){function o(){for(m=0;m<g;m+=1){if((p+m)%B({data:a,param:"nol_segmentValue"})!=0){if("daypart"!==B({data:a,param:"nol_cadence"})&&c[x].tsv>=B({data:a,param:"nol_segmentValue"})&&(c[x].save?(c[x].tsv=0,c[x].save=!1,c[x].updated=!1):C(a,null,n&&n.onPingFired?n.onPingFired:null)),c[x].tsv+=1,ee.nol_cumeTimeSpent+=1,ee.nol_segmentTimeSpent+=1,c[x].tsv>=q&&y){for(c[x].updated||(B({data:a,param:"nolPriv_priority",val:Fe()}),c[x].updated=!0),v=0,f=0;v<c.length;v+=1)if((f+=c[v].tsv>=q?1:0)>=y){y="send";break}"send"===y&&B({data:a,param:"nol_sendQual"})&&(d.onViewWon&&N(a,d.onViewWon),C(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),y=0,"daypart"!==B({data:a,param:"nol_cadence"})&&B({data:a,param:"nol_sendQual",val:"0"}))}}else 0!==m&&(x+=1),c.length<=x?(C(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),x=0,Y+=1,B({data:a,param:"nol_currSeg",val:Y}),B({data:a,param:"nol_pingCount",val:0}),c=i(B({data:a,param:"nol_segmentLength"})),B({data:a,param:"nol_minutes",val:c}),b&&b!==k&&(B({data:a,param:"nol_dayQhr",val:k}),B({data:a,param:"nol_weekQhr",val:E}),T&&T!==w&&B({data:a,param:"nol_localDay",val:w})),D&&D!==M&&B({data:a,param:"nol_wmDayQhr",val:M}),I&&I!==A&&B({data:a,param:"nol_wmDay",val:A})):"daypart"!==B({data:a,param:"nol_cadence"})&&!c[x].save&&c[x].tsv>=q?C(a,null,n&&n.onPingFired?n.onPingFired:null):c[x].save||(c[x].tsv=1,c[x].updated=!1),ee.nol_cumeTimeSpent+=1,ee.nol_segmentTimeSpent+=1;B({data:a,param:"nolPriv_currMin",val:x}),n&&n.onTick&&n.onTick(Q-(g-m)+1,ee.nol_cumeTimeSpent)}}var s,l=B({data:a,param:"nol_tagSrc"}),e=""!==e?e:"id3"===l&&B({data:a,param:"nol_fdcid"})!==B({data:a,param:"nol_cidNull"})?B({data:a,param:"nol_fdoffset"}):"id3"===l&&B({data:a,param:"nol_pccid"})!==B({data:a,param:"nol_cidNull"})?B({data:a,param:"nol_pcoffset"}):e,d=B({data:a,param:"nol_eventFilter"}),c=B({data:a,param:"nol_minutes"}),u=r(B({data:a,param:"nol_pingCount"}),"num"),p,m,v,f,g,_,y,h,P=B({data:a,param:"nol_playerId"}),S=t._players&&t._players.hasOwnProperty(P)?t._players[P]:-1,T=B({data:a,param:"nol_localDay"}),b=B({data:a,param:"nol_dayQhr"}),O=B({data:a,param:"nol_weekQhr"}),w,E,k,I=B({data:a,param:"nol_wmDay"}),D=B({data:a,param:"nol_wmDayQhr"}),A,M,R=r(B({data:a,param:"nol_weekEndUTC"}),"num"),F=r(B({data:a,param:"nol_weekStartUTC"}),"num"),V=R-F,x,G=r(B({data:a,param:"nolPriv_serverTimeOffset"}),"num"),U,j=B({data:a,param:"nol_timer"})||"nol_fdoffset",z=r(B({data:a,param:"nolPriv_currMin"}),"num"),K=r(B({data:a,param:"nol_maxPingCount"}),"num"),q=r(B({data:a,param:"nol_creditValue"}),"num"),Q=r(e,"num"),J=r(B({data:a,param:"nol_intrvlThrshld"}),"num")||86400,H="nol_cmsoffset"===j||"nol_pageoffset"===j?r(B({data:a,param:"nol_cmsIntrvlGp"}),"num")||2:r(B({data:a,param:"nol_id3IntrvlGp"}),"num"),X=r(B({data:a,param:"nol_segmentLength"}),"num")*r(B({data:a,param:"nol_segmentValue"}),"num"),Y=r(B({data:a,param:"nol_currSeg"}),"num"),$=r(B({data:a,param:"nolPriv_now"}),"num"),Z,ee=B({data:a,param:"nol_timeSpentViewing"})[a._currVidType],te=r(B({data:a,param:"nolPriv_currPos"}),"num");if(a.set("nolPriv_prevPos",a.get("nol_currPos")),1===e?a.set("nol_currPos","0"):a.set("nol_currPos",e),"modcadence"===a.get("nol_cadence"))e%a.get("nol_segmentValue")==0&&(e<a.get("nol_length")||!a.get("nol_length"))&&C(a,null,n&&n.onPingFired?n.onPingFired:null);else{if(A=Math.floor(Q/86400)+1,I||B({data:a,param:"nol_wmDay",val:A}),M=Math.floor(Q%86400/900)+1,D||B({data:a,param:"nol_wmDayQhr",val:M}),Q>86400&&"nol_cmsoffset"===j?(Q+=G,h=Q+r(B({data:a,param:"nol_startDayTimeOffset"}),"num"),_=h+r(B({data:a,param:"nol_GMTOffset"}),"num")):h=_=Q,w=Math.floor(_/86400)+1,T&&T!=w&&C(a,null,n&&n.onPingFired?n.onPingFired:null),T||B({data:a,param:"nol_localDay",val:w}),Q>R&&(d.onWeekEndUTC?N(a,d.onWeekEndUTC):(B({data:a,param:"nol_week",val:B({data:a,param:"nol_nextWeek"})}),B({data:a,param:"nol_period",val:B({data:a,param:"nol_nextPeriod"})}),B({data:a,param:"nol_weekStartUTC",val:R+1}),B({data:a,param:"nol_weekEndUTC",val:R+1+V}))),E=Math.floor((Q-r(B({data:a,param:"nol_weekStartUTC"}),"num"))/900)+1,O&&E===O||B({data:a,param:"nol_weekQhr",val:E}),"nol_cmsoffset"===j&&(Q=_%86400),k=Math.floor(Q/900)+1,b||B({data:a,param:"nol_dayQhr",val:k}),Q=Math.floor(Q),"1"===B({data:a,param:"nol_applyViewInc"})&&(W(a),B({data:a,param:"nol_applyViewInc",val:"0"})),"true"===B({data:a,param:"nol_disabled"})||void 0===Q||K>0&&K<=u&&"daypart"!==B({data:a,param:"nol_cadence"}))return;"stream"!==B({data:a,param:"nol_cadence"})&&"impression"!==B({data:a,param:"nol_cadence"})?(te=""===te?Q:r(te,"num"),$||($=Fe()),U=Math.ceil((Fe()-$)/1e3)||1,Z=L(a,te),s=Z.segment,x=Z.minute,p=Z.seconds,g=Q-te,B({data:a,param:"nolPriv_currPos",val:Q}),Y&&void 0!==s&&Y!==s&&(("dcrvideo"!==B({data:a,param:"nol_product"})||"dcrvideo"===B({data:a,param:"nol_product"})&&B({data:a,param:"nol_segmentTimeSpent"})>0)&&C(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),"episode"!==B({data:a,param:"nol_cadence"})&&B({data:a,param:"nol_pingCount",val:0}),c=i(B({data:a,param:"nol_segmentLength"})),B({data:a,param:"nol_minutes",val:c}),b&&b!==k&&(B({data:a,param:"nol_dayQhr",val:k}),B({data:a,param:"nol_weekQhr",val:E}),T&&T!==w&&B({data:a,param:"nol_localDay",val:w})),D&&D!==M&&B({data:a,param:"nol_wmDayQhr",val:M}),I&&I!==A&&B({data:a,param:"nol_wmDay",val:A})),Y=s,void 0!==x&&g>0&&(z!==x&&(c[x].save||"daypart"===B({data:a,param:"nol_cadence"})||(c[x].tsv>=q?C(a,null,n&&n.onPingFired?n.onPingFired:null):(c[x].tsv=0,c[x].updated=!1))),g<H||g<=Math.ceil(1.5*U)&&g<J?(y=r(B({data:a,param:"nol_sendQual"}),"num"),n&&n.onCalcStart&&"function"==typeof n.onCalcStart?n.onCalcStart(Q,o):o()):(ee.nol_cumeTimeSpent+=1,ee.nol_segmentTimeSpent+=1),B({data:a,param:"nolPriv_now",val:Fe()}),-1!==S&&"dcrstatic"!==B({data:a,param:"nol_product"})&&(S.pauseObj.pauseTime=0))):(s=Math.floor(Q/X+1),"content"===B({data:a,param:"nol_ac"})&&(Y=s,B({data:a,param:"nol_currSeg",val:Y})),C(a,null,n&&n.onPingFired?n.onPingFired:null)),B({data:a,param:"nol_currSeg",val:Y})}}function k(e,t,a){var n=B({data:e,param:"iag_"+t});return void 0!==n&&""!==n?a="&pr=iag."+t+","+d(n):a&&a.length>0&&-1===a.indexOf("&pr=iag")?a="&pr=iag."+t+","+d(a):void 0!==a&&null!==a||(a=""),a}function I(e,t){var a,n,i,o,s,l,c,u,p,m,v,f,g,_,y,h,P=B({data:e,param:"nol_vidtype"});B({data:e,param:"nol_prod"}).indexOf("iag")>=0&&(a="",n=k(e,"sid",B({data:e,param:"nol_sid",vidType:"content"})),i=k(e,"tfid",B({data:e,param:"nol_tfid",vidType:"content"})),o=k(e,"bcr",B({data:e,param:"nol_clientid",vidType:"content"})),l=k(e,"epi",B({data:e,param:"nol_title"})||B({data:e,param:"nol_title",vidType:"content"})),s=k(e,"pgm",B({data:e,param:"nol_censuscategory"})||B({data:e,param:"nol_category"})||B({data:e,param:"nol_iagcategory"})),s||(s=k(e,"pgm",B({data:e,param:"nol_censuscategory",vidType:"content"})||B({data:e,param:"nol_category",vidType:"content"})||B({data:e,param:"nol_iagcategory",vidType:"content"})))||(s="&pr=iag.pgm,general"),c="&pr=iag.seg,",r(B({data:e,param:"nol_chapter",vidType:"content"}),"num")>1?c+=B({data:e,param:"iag_seg"})||B({data:e,param:"nol_chapter",vidType:"content"}):c+="1",u=k(e,"pd",u),p=k(e,"oad",p),g=k(e,"fp",g),h=k(e,"cust1",h),"ad"===t?(m="&pr=iag.brn,"+B({data:e,param:"nol_clientid"}),v="&pr=iag.cte,"+d(B({data:e,param:"nol_adURL"})),f="midroll"===P?"&pr=iag.ap,mid":"postroll"===P?"&pr=iag.ap,post":"&pr=iag.ap,pre",n=k(e,"sid",n),i=k(e,"tfid",i),o=k(e,"bcr",o),m=k(e,"brn",m),v=k(e,"cte",v),s=k(e,"pgm",s),l=k(e,"epi",l),c=k(e,"seg",c),u=k(e,"pd",u),p=k(e,"oad",p),_=k(e,"pod",_),y=k(e,"apt",y),a=n+i+o+s+l+c+u+m+f+v+p+g+_+y+h):a=n+i+o+s+l+c+u+p+g+h,a+="&pr=iag.cp,soc",B({data:e,param:"nol_iagData",val:a}))}function D(e){var a;if(_e[e.id]&&_e[e.id].tags.length===_e[e.id].tagSize){if(t._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),_e[e.id].debug!==Le&&"logging"===_e[e.id].debug){if(a=_e[e.id].nol_debugUrl,a||(a=_e[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),_e[e.id].eventQueue.length>_e[e.id].eventQueueIndex+1)for(var n=_e[e.id].eventQueueIndex;n<_e[e.id].eventQueue.length;n++)_(a+"pli="+e.id+"&ggpm="+JSON.stringify(_e[e.id].eventQueue[n])),_e[e.id].eventQueueIndex=n;a+="pli="+e.id+"&ggpm="+JSON.stringify(e),_(a)}e.timeStamp=Fe();for(var n=0,r=_e[e.id].tags.length;n<r;n+=1)_e.hasOwnProperty(e.id)&&_e[e.id].tags[n].eventListener(e)}else _e[e.id]&&_e[e.id].eventQueue||(_e[e.id]=o(_e[e.id])),_e[e.id].eventQueue.push(e)}function A(e,t){var a,n;_e[t].bReInit||(_e[t].bReInit=!0,_e[t].eventQueue=[],e&&_e[t].eventQueue.push(e),s(ke))}function M(e,t,a){var n=!1,r=a.toString().toLowerCase().indexOf(t.toString().toLowerCase());return"-"===e&&-1===r?n=!0:"+"===e&&(a===t||-1!==r&&a&&t)?n=!0:"--"===e&&-1===t.toString().toLowerCase().indexOf(a.toString().toLowerCase())?n=!0:"++"===e&&-1!==t.toString().toLowerCase().indexOf(a.toString().toLowerCase())&&(n=!0),n}function N(e,t,a,n){var r=t||e.get("nol_finalFilter",n),i,o,s,l,d,c,u,p,m,v,f,g=a||{};if(r&&void 0!==r)for(i=0,o=r.length;i<o;i+=1){if(p=r[i],p.tagVar.length)for(var s=0,l=p.tagVar.length;s<l&&(v=e.get(p.tagVar[s].name,n));s++);else v=e.get(p.tagVar.name,n);if(v&&p.tagVar.value===v){for(s=0,l=p.cond.length;s<l;s+=1){if(u=g[p.cond[s]]||e.get(p.cond[s],n),c=0===p.is.value.indexOf("nol_")&&e.get(p.is.value,n)?e.get(p.is.value,n):p.is.value,void 0===u||void 0===c||!M(p.is.type,u,c)){m=!1;break}m=!0}if(void 0!==m&&void 0!==(f=m?p.then:p.else))for(d in f)f.hasOwnProperty(d)&&(void 0!==g.nol_vidtype?g[d]=f[d]:e.set(d,f[d],n))}}}function R(e,t){var a,n=e.data._settings,r=e.param;return void 0===t||null===t?void 0===(a=n.hasOwnProperty(r)&&_e[n.nol_playerId].nol_tagMap.hasOwnProperty(r)&&("object"==typeof _e[n.nol_playerId].nol_tagMap[r]||"array"==typeof _e[n.nol_playerId].nol_tagMap[r])?_e[n.nol_playerId].nol_tagMap[r][n[r]]:n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]:_e[n.nol_playerId].nol_tagMap.nol_defaults[r]||_e[n.nol_playerId][r])&&(a=n.hasOwnProperty(r)?n[r]:_e[n.nol_playerId].nol_tagMap[r]):n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]=t:n[r]=t,a}function B(a){try{if(a){if("string"==typeof a.param&&-1===a.param.indexOf("nol_")&&-1===a.param.indexOf("nolPriv_")&&a.param.split("_").length-1>1)return;var n="string"==typeof a.param?a.param.split("_"):a.param,r,i=n[0]?n.splice(0,2).join("_"):n,o=a.vidType||n[0]||a.data._currVidType,s=a.data._currAssetid?String(a.data._currAssetid):"0",l=void 0!==a.data._dataArrObj[o][s]?a.data._dataArrObj[o][s]:a.data._dataArrObj[o][Object.keys(a.data._dataArrObj[o]).splice(-1,1)],d=Ie[a.data._settings.nol_playerId]||{},c=d&&d[i]?d[i].clientField:i;if("object"==typeof c)r=l;else if("nol_segmentTimeSpent"===c||"nol_cumeTimeSpent"===c||"nol_count"===c){var u=B({data:a.data,param:"nol_timeSpentViewing"});r=u[o][c]}else void 0===a.val||null===a.val?void 0!==(r=l&&l.hasOwnProperty(c)?l[c]:_e[a.data._settings.nol_playerId][c])&&""!==r||void 0!==(r=R(a)||"")&&""!==r||(0===c.indexOf("nol_")?a.param=c:a.param=i,r=R(a)||""):l&&(l[c]=a.val);return r}return null}catch(a){e.console&&e.console.error&&e.console.error("Error in Data(): "+a.message+" __param: "+n),t._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+a.message})}}function F(a,n,r){var i=Ge.findPlayer(a),o=i.oServiceCall[n.service],s=n.url,l=n.key,d;if(n.evntCB=B({data:a,param:a.serviceFlag[n.service].callback}),n.callBack=function(e){V(a,e,n)},r)return t._listeners.addListener(n.evntCB,n.callBack,!0),void h(f(a,s),n.service,i,r);if(!o&&l&&s&&s.length>0)"stnupdate"===n.evntCB&&(void 0===i.oServiceCall[n.service]||void 0===i.oServiceCall[n.service].status||"init"!==i.oServiceCall[n.service].status&&"complete"!==i.oServiceCall[n.service].status)&&(i.oServiceCall[n.service]={status:"init",station:null,data:null}),t._listeners.addListener(n.evntCB,n.callBack,!0),h(f(a,s),n.service,i);else if(o&&"init"===o.status);else if(o&&"complete"===o.status&&l!==o.station)t._listeners.addListener(n.evntCB,n.callBack,!0),h(f(a,s),n.service,i);else if(o&&"complete"===o.status&&l===o.station){for(d in o.data)o.data.hasOwnProperty(d)&&B({data:a,param:d,val:o.data[d]});if(Ae?N(a,Ae[n.service]):N(a,De),"true"===B({data:a,param:"nol_disabled"}))return;a.serviceFlag[n.service].need&&(B({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[n.service].need=!1,E(B({data:a,param:"nol_queueTime"}),a))}else t._listeners.fireEvent(n.evntCB,n),e.setTimeout(function(){F(a,n)},1e3)}function V(e,t,a){var n={},i,o=0,s;if(B({data:e,param:"nol_playerId"})===t.target.nol_playerId){for(s in t.target)t.target.hasOwnProperty(s)&&(B({data:e,param:s,val:t.target[s]}),n[s]=t.target[s]);var l=Ge.findPlayer(e);if(l){var d=void 0!==l.oServiceCall[a.service]&&l.oServiceCall[a.service].hasOwnProperty("status")?l.oServiceCall[a.service].status:"undefined";l.oServiceCall[a.service]={status:"complete",prevStatus:d,station:a.key,data:n},l.serviceSending[a.service]=!1}if(Ae?N(e,Ae[a.service]):N(e,De),"true"===B({data:e,param:"nol_disabled"}))return;e.serviceFlag[a.service].need&&(B({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[a.service].need=!1,t.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===B({data:e,param:"nol_cadence"})&&(o=r(t.target.nol_fdTimeCode,"num"),i=r(B({data:e,param:"nol_queueTime"}),"num"),B({data:e,param:"nol_queueTime",val:i+o})),E(B({data:e,param:"nol_queueTime"}),e))}}function x(e,t,a){if("id3"===B({data:e,param:"nol_product"})&&B({data:e,param:"nol_id3Data"}))return void C(e,null,t||null,a);e.isProductOf("vrivideo")&&"ended"!==e.set("nol_vriEvent")||"true"!==B({data:e,param:"nol_disabled"})&&("1"!==B({data:e,param:"nol_davState"})&&"1"!==e.get("nol_davState","ad")||(B({data:e,param:"nol_davState",val:"2"}),"daypart"===B({data:e,param:"nol_cadence"})?C(e,{save:!0},t||null,a):C(e,null,t||null,a),w(e),B({data:e,param:"nol_disabled",val:"true"})))}function G(e,t,a){(t&&!0===t.flush||!("dcrstatic"===B({data:e,param:"nol_product"})&&"stream"!==B({data:e,param:"nol_cadence"})||e.isProductOf("vrivideo")))&&("content"===B({data:e,param:"nol_ac"})&&B({data:e,param:"nol_segmentTimeSpent"})>0||"streamduration"===B({data:e,param:"nol_cadence"})&&B({data:e,param:"nol_segmentTimeSpent"})>0||"dcrstatic"===B({data:e,param:"nol_product"})&&"stream"===B({data:e,param:"nol_cadence"})||"postroll"===B({data:e,param:"nol_vidtype"})&&"interval"===B({data:e,param:"nol_cadence"})||e.isProductOf(["dcrvideo","dcrstatic"])&&t&&!0===t.flush&&"interval"===e.get("nol_cadence")&&e.get("nol_segmentTimeSpent")>0||"streamduration"===e.get("nol_cadence")&&"ad"===e.get("nol_ac")&&e.get("nol_segmentTimeSpent","ad")>0)&&("content"===B({data:e,param:"nol_ac"})||t&&!0===t.save?C(e,{save:!0},a&&a.onPingFired?a.onPingFired:null):C(e,null,a&&a.onPingFired?a.onPingFired:null),B({data:e,param:"nolPriv_now",val:0}))}function U(e,a,n,r,i){var o=null,s=Math.round(Fe(e)/1e3);try{if(e){xe.isEnabled(e)&&(o=Ue.inferEvent(a.currEvtType,e,a._param1,s,a._param3))&&(o.event!==Ue.events.play&&Ge.state.set(e,o),xe.preProcess(e,o)),a.currEvtType&&("5"===a.currEvtType.toString()&&"6"===e.get("nolPriv_prevEvent")&&"st,a"===e.get("nol_c3")&&"false"===e.get("nol_disabled")&&"dcrvideo"===e.get("nol_product")&&"streamduration"===e.get("nol_cadence")&&(Ve[n.timeStamp]=g(e,{type:18,msg:"Event 6 -> 5 detected in ad."},!0,!0)),e.set("nolPriv_prevEvent",a.currEvtType.toString().toLowerCase()),e.set("nolPriv_prevEventState",a.eventState?a.eventState.toString().toLowerCase():""));var l=""!==Ge.cms.parse(i.nol_adobeId,e,{metadata:a._param1,defaultKey:"nol_adobeId",silent:!0})||""!==Ge.cms.parse(i.nol_adobeSessionId,e,{metadata:a._param1,defaultKey:"nol_adobeSessionId",silent:!0})||r.isAdobe,d=["15","3","loadmetadata","pauseloadmeta","5","play","55","sendid3","35","updatemetadata","49","setplayheadposition","playheadposition","30","onpaginate"];l?(r.disablePauseTimeout(),r.isAdobe=!0):!l&&!r.isAdobe&&d.indexOf(a.currEvtType.toString())>-1&&r.enablePauseTimeout()}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:o,timestamp:s}}function j(e,a){try{e&&a.inferredEvent&&(a.inferredEvent.event===Ue.events.play&&Ge.state.set(e,a.inferredEvent),xe.postProcess(e,a.inferredEvent))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function z(e,a){try{var n=B({data:e,param:"nol_playerId"});_e&&_e.hasOwnProperty(n)&&(!_e[n].hasOwnProperty("nol_sessionId")||_e[n].hasOwnProperty("forceStreamRegen")&&!0===_e[n].forceStreamRegen)&&(a=a||t.generateGUID(),_e[n].nol_sessionId=a,_e[n].forceStreamRegen=!1)}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function K(a,n,o){var s=B({data:a,param:"nol_playerId"});if(s===n.id){if(!n.evtInfo||void 0===n.evtInfo.eventType||null===n.evtInfo.eventType||""===n.evtInfo.eventType||n.evtInfo.hasOwnProperty("param1")&&(null===n.evtInfo.param1||void 0===n.evtInfo.param1))return void(n.timeStamp&&!Ve[n.timeStamp]&&"true"!==a.get("nol_disabled")&&(n.evtInfo&&!n.evtInfo.eventType&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid event type param"}),Ve[n.timeStamp]=g(a,{type:17,msg:"Missing event type param in ggPM"},!0,!0)),!n.evtInfo||null!==n.evtInfo.param1&&void 0!==n.evtInfo.param1||(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"}),Ve[n.timeStamp]=g(a,{type:17,msg:"Missing param1 detected on event "+n.evtInfo.eventType},!0,!0))));var l=n.evtInfo,d=l.param1,c=l.param3?l.param3:d.hasOwnProperty("param3")?d.param3:d,u=l.param2||"",p,m,v,f,_=r(B({data:a,param:"nolPriv_id3Count"}),"num"),y,h,P,S=B({data:a,param:"nol_segmentSpentViewing"}),T=B({data:a,param:"nol_enableFilterMap"}),b="|mtvr|,|dprid3|,|id3|",O,w,L={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},k,D,M,R=B({data:a,param:"nol_prod"}),V,K={},q=l.eventType.toString(),J,X="content",Y,$,Z,ee=B({data:a,param:"nolPriv_serverTimeOffset"}),te=Ie[s]||{},ae=te.nol_vidtype?te.nol_vidtype.clientField:"nol_vidtype",ne=te.nol_tagSrc?te.nol_tagSrc.clientField:"nol_tagSrc",re=te.nol_ac?te.nol_ac.clientField:"nol_ac",ie=te.nol_linearAdLoadFlag?te.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",oe=c[ae]?c[ae].toString().toLowerCase():"",se=Math.round(Fe()/1e3),le="nol_assetid",de=Ge.findPlayer(a),ce={},ue=[],pe={onTick:function(e,t){!a.isProductOf(["mtvr","id3"])&&o&&o.tickViewability&&"function"==typeof o.tickViewability&&o.tickViewability(a,e)},onCalcStart:function(e,t){a.isProductOf(["mtvr","id3"])&&o&&o.tickViewability&&"function"==typeof o.tickViewability?o.tickViewability(a,e,t):t&&t()},onPingFired:function(e,t){o&&o.resetViewability&&o.resetViewability(e),e.isProductOf(["mtvr","id3"])&&o&&o.tickViewability&&"function"==typeof o.tickViewability&&o.tickViewability(e,e.get("nolPriv_currPos"))}};q=q.toLowerCase();var me=U(a,{currEvtType:q,_param1:d,eventState:u,_param3:c},n,de,te);switch(q=q.toLowerCase()){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if(("14"===q||"staticstart"===q)&&"dcrstatic"!==B({data:a,param:"nol_product"}))return;if("14"!==q&&"staticstart"!==q&&"dcrstatic"===B({data:a,param:"nol_product"}))return;if("pauseloadmeta"===q&&a.isProductOf("vrivideo"))return;var ve=","+B({data:a,param:"nol_contentType"}),fe=a._currVidType;a._currVidType=oe&&-1!==ve.indexOf(","+oe)?"content":"dcrstatic"===B({data:a,param:"nol_product"})?"static":"ad",(fe!==a._currVidType||a.get("nolPriv_forcedContent"))&&(o&&o.resetViewability(a),a.set("nolPriv_forcedContent",!1));var ge=null,ye=null,he=String(Ge.cms.parse(te.nol_assetid,a,{metadata:c,defaultKey:"nol_assetid",silent:!0}));if(("ad"===B({data:a,param:"nol_ac"})&&B({data:a,param:"nol_segmentTimeSpent"})>0&&"streamduration"===B({data:a,param:"nol_cadence"})||"stream"===B({data:a,param:"nol_cadence"})&&"dcrstatic"===B({data:a,param:"nol_product"})||"dcrstatic"===B({data:a,param:"nol_product"})&&String(a._currAssetid)!==he)&&x(a,pe.onPingFired),!0===B({data:a,param:"nol_onCompleteFired"})?("content"!==a._currVidType&&"static"!==a._currVidType||("content"===a._currVidType.toLowerCase()&&_e[s].hasOwnProperty("forceStreamRegen")&&!0===_e[s].forceStreamRegen&&z(a),B({data:a,param:le,val:-1}),"content"===a._currVidType?(ge=Ge.state.clone(a),ye=xe.clone(a),Q({data:a,savedVals:["nol_nielsenAdSupportFlg"],savedReplayParams:ce},o)):Q({data:a,resetStatic:!0},o)),B({data:a,param:"nol_onCompleteFired",val:!1})):"14"!==q&&"staticstart"!==q||"stream"!==B({data:a,param:"nol_cadence"})||(B({data:a,param:le,val:-1}),Q({data:a},o)),"ad"===a._currVidType&&a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){var Pe=i(B({data:a,param:"nol_segmentLength"}));B({data:a,param:"nol_minutes",val:Pe}),B({data:a,param:le,val:-1}),B({data:a,param:ae,
val:oe}),"1"!==B({data:a,param:"nol_nielsenAdSupportFlg",vidType:"content"})&&B({data:a,param:"nol_nielsenAdSupportFlg",val:"1",vidType:"content"})}if(a._currAssetid=he&&"daypart"===B({data:a,param:"nol_cadence"})||"stream"!==B({data:a,param:"nol_cadence"})&&"dcrstatic"===B({data:a,param:"nol_product"})?he:a._currAssetid,c.nol_ac=a._currVidType,r(B({data:a,param:"nol_serverTime"}),"num")+86400<Math.round(Fe()/1e3)+ee)return x(a,pe.onPingFired),void A(n,B({data:a,param:"nol_playerId"}));for(J=0,Y=T.length;J<Y;J+=1)p=te[T[J]]?te[T[J]].clientField:T[J],K[T[J]]=String(c[p]||"");if(y=he||B({data:a,param:"nolPriv_assetid"}),N(a,De.onCmsDetected,K),"false"!==K.nol_disabled||!c)return void("cms"!==a._currTagSrc&&(H(a,"loadMetadata",c,o),B({data:a,param:"nol_disabled",val:"true"})));if("static"===a._currVidType&&"dcrstatic"===B({data:a,param:"nol_product"})?(t._listeners.fireEvent("updateCmbStaticPage",{evtInfo:l,plid:s}),X="static"):X="content",y!==B({data:a,param:le})){if("ad"!==B({data:a,param:"nol_ac"})&&x(a,pe.onPingFired),H(a,"loadMetadata",c,o),Object.keys(ce).length>0){for(var Se in ce)ce.hasOwnProperty(Se)&&""!==ce[Se]&&B({data:a,param:Se,val:ce[Se]});ce={}}if(B({data:a,param:"nolPriv_assetid",val:B({data:a,param:le})}),"15"!==q&&"loadmetadata"!==q||"id3"!==B({data:a,param:ne,vidType:"content"})||!1!==B({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||B({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),N(a,De.onAssetIdChanged),"true"===B({data:a,param:"nol_disabled"}))return;if("drm"===B({data:a,param:"nol_product"}))a.serviceFlag.stn.need=!0;else if(a.serviceFlag.stn.need=!1,"true"===B({data:a,param:"nol_disabled"}))return;if(N(a,De.onComplete),ge&&Ge.state.bind(a,ge),ye&&xe.bind(a,ye),"true"===B({data:a,param:"nol_disabled"}))return}if("ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"!==B({data:a,param:"nol_cadence"})){B({data:a,param:"nol_timeSpentViewing"})[a._currVidType].nol_count++}a.isProductOf("vrivideo")&&"impression"===a.get("nol_cadence")&&(a.set("nol_vriEvent","start"),a.set("nol_startPos","")),B({data:a,param:"nol_pingStartTimeUTC",val:Math.round(Fe()/1e3)}),-1!==R.indexOf("iag")&&I(a,a._currVidType,te),("ad"===a._currVidType&&!a.isProductOf(["dcrvideo","vrivideo"])||"stream"===B({data:a,param:"nol_cadence"}))&&(B({data:a,param:"nol_pingCount",val:0}),B({data:a,param:"nolPriv_sendData",val:!0}),B({data:a,param:"nol_davState",val:"0"}),a.serviceFlag.stn.need||"content"===a._currVidType||"nol_cmsoffset"!==B({data:a,param:"nol_timer"})&&"nol_pageoffset"!==B({data:a,param:"nol_timer"})||E(0,a,pe)),"14"!==q&&"staticstart"!==q||"dcrstatic"!==B({data:a,param:"nol_product"})||!0===de.static.started||(t.PLDCR.start(!0),de.static.started=!0);break;case"5":case"play":if("mtvr"===B({data:a,param:"nol_product"})){if(M=te.nol_channelName?te.nol_channelName.clientField:"nol_channelName",c[M]&&c[M].length>0)for($ in c)c.hasOwnProperty($)&&B({data:a,param:$,val:c[$]})}else a.isProductOf(["dcrvideo","vrivideo"])&&1==a.get("nolPriv_adStop")&&(a.set("nolPriv_adStop",!1),a._currVidType="content",K={nol_vidtype:B({data:a,param:ae,vidType:a._currVidType}),nol_tagSrc:B({data:a,param:ne,vidType:a._currVidType}),nol_linearAdLoadFlag:B({data:a,param:ie,vidType:a._currVidType}),nol_ac:B({data:a,param:re,vidType:a._currVidType})},N(a,De.onCmsDetected,K));break;case"6":case"pause":G(a,null,pe);break;case"7":case"stop":G(a,null,pe),"ad"===a._currVidType&&(a.set("nolPriv_adStop",!0),de.disablePauseTimeout());break;case"flush":var Te=a.get("nol_cadence");!a.isProductOf(["dcrvideo","dcrstatic"])||"interval"!==Te&&"streamduration"!==Te||(G(a,{flush:!0,save:!0},pe),a.isProductOf("dcrstatic")&&de.static.started&&(t.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0")));break;case"changecontext":d&&["content","ad"].indexOf(d)>-1&&(a._currVidType=d);break;case"updateott":if(G(a,null,pe),d&&d.hasOwnProperty("ottStatus")&&d.ottStatus.length>0){if(d.hasOwnProperty("kGCKMetadataNlsKeyOptout")&&d.hasOwnProperty("kGCKMetadataNlsKeyDeviceID")){var be=d.kGCKMetadataNlsKeyOptout.toString().toLowerCase();B({data:a,param:"nol_userSessionId",val:d.kGCKMetadataNlsKeyDeviceID,vidType:"content"}),B({data:a,param:"nol_useroptout",val:"1"===be||"true"===be?"true":"false",vidType:"content"}),-1===[1,"1","true",0,"0","false"].indexOf(be)&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: Invalid kGCKMetadataNlsKeyOptout value."})}for(var le in d)d.hasOwnProperty(le)&&(B({data:a,param:le,val:d[le],vidType:"content"}),de.ottStatusObj[le]=d[le]);De.onOTTDetected&&N(a,De.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===q||"staticend"===q)&&"dcrstatic"!==B({data:a,param:"nol_product"}))return;if("56"!==q&&"staticend"!==q&&"dcrstatic"===B({data:a,param:"nol_product"}))return;if(a.isProductOf("vrivideo")&&("57"===q||"end"===q)&&("sessionReset"===u||"modcadence"!=a.get("nol_cadence")))return;if(!("57"!==q&&"oncomplete"!==q||"mtvr"!==B({data:a,param:"nol_product"})&&"id3"!==B({data:a,param:ne,vidType:"content"})||!0===B({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})))return;if("ad"===a._currVidType&&("streamduration"===B({data:a,param:"nol_cadence"})?C(a,null,pe.onPingFired):a.isProductOf(["dcrvideo"])&&"interval"===B({data:a,param:"nol_cadence"})&&(""===B({data:a,param:"nol_dataDate",vidType:"content"})&&""!==B({data:a,param:"nol_dataDate"})&&(B({data:a,param:"nol_dataDate",val:B({data:a,param:"nol_dataDate"}),vidType:"content"}),B({data:a,param:"nol_hourCode",val:B({data:a,param:"nol_hourCode"}),vidType:"content"}),B({data:a,param:"nol_dayId",val:B({data:a,param:"nol_dayId"}),vidType:"content"})),a._currVidType="content",De.onEndDetected&&N(a,De.onEndDetected),C(a,null,pe.onPingFired))),a.isProductOf("vrivideo")&&"modcadence"===a.get("nol_cadence")){if("NaN"===parseInt(a.get("nol_length")).toString())return;if(!(a.get("nol_currPos")>=a.get("nol_length")))return;a.set("nol_vriEvent","ended")}"static"!==B({data:a,param:"nol_ac"})&&(a._currVidType="content"),De.onEndDetected&&N(a,De.onEndDetected),B({data:a,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==B({data:a,param:"nol_disabled"})&&"id3"!==B({data:a,param:"nol_product"})||("static"===B({data:a,param:"nol_ac"})&&t._listeners.fireEvent("removeCmbAssetId",l),x(a,pe.onPingFired)),B({data:a,param:"nol_onCompleteFired",val:!0}),_e[s].forceStreamRegen=!0,"56"!=q&&"staticend"!=q||"dcrstatic"!==B({data:a,param:"nol_product"})||(t.PLDCR.stop(),de.static.started=!1),"57"!==q&&"oncomplete"!==q||B({data:a,param:"nolPriv_dtvrHybrid",val:!1,vidType:"content"}),"sessionReset"!==u&&de.disablePauseTimeout();break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===B({data:a,param:"nol_disabled"})||!d||"nol_pageoffset"!==B({data:a,param:"nol_timer"}))return;"1"===B({data:a,param:"nol_onPaginateFired_static"})&&(B({data:a,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==B({data:a,param:"nol_cadence"})&&W(a,{vidType:"static"})),Z=r(B({data:a,param:"nol_highWM"}),"num"),Z<r(d,"num")&&B({data:a,param:"nol_highWM",val:d}),E(d,a,pe),B({data:a,param:"nol_davState",val:"1"});break;case"49":case"setplayheadposition":case"playheadposition":if(d>-1){if(!0===B({data:a,param:"nol_onCompleteFired"})&&t._listeners.fireEvent("flushPauseEventQueue"),"true"===B({data:a,param:"nol_disabled"})||!d||"nol_cmsoffset"!==B({data:a,param:"nol_timer"})||"ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"===B({data:a,param:"nol_cadence"}))return;if("number"!=typeof d){if("string"!=typeof d)return;d=r(d,"num")}if(a.isProductOf("vrivideo")){var Oe=Math.floor(d);"impression"===a.get("nol_cadence")&&1===Oe&&Oe<a.get("nolPriv_prevPos")&&(a.set("nol_pingCount",0),a.set("nol_currPos","")),"modcadence"===a.get("nol_cadence")&&a.set("nol_vriEvent","loop")}B({data:a,param:"nol_isLive",val:(d>86400).toString()}),Z=r(B({data:a,param:"nol_highWM"}),"num"),Z<d&&B({data:a,param:"nol_highWM",val:d}),a.serviceFlag.stn.need?(B({data:a,param:"nol_queueTime",val:d}),F(a,{service:"stn",key:B({data:a,param:"nol_assetid"}),url:B({data:a,param:"nol_stationURL"}),nol_playerId:B({data:a,param:"nol_playerId"})})):E(d,a,pe),B({data:a,param:"nol_davState",val:"1"})}else n.timeStamp&&!Ve[n.timeStamp]&&(Ve[n.timeStamp]=g(a,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),Ve[n.timeStamp]&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":var Ce=!1,we=!1;if(("object"==typeof d&&Object.keys(d).length>0||"string"==typeof d&&d.length>0)&&(!0===B({data:a,param:"nol_onCompleteFired"})&&de&&de.getPauseQueueCount&&de.getPauseQueueCount()>0?t._listeners.fireEvent("flushPauseEventQueue"):!0===B({data:a,param:"nol_onCompleteFired"})&&de&&!de.getPauseQueueCount&&t._listeners.fireEvent("flushPauseEventQueue"),"object"==typeof d))for(Y=0;Y<d.length;Y+=1)if(d[Y].key&&"PRIV"===d[Y].key){d=d[Y].info;break}if(w=d.toString(),249!==w.length&&n.timeStamp&&!Ve[n.timeStamp]&&(Ve[n.timeStamp]=!0,e.console&&e.console.warn&&e.console.warn("Warning: ID3 tag length is not 249."),t._listeners.fireEvent("warn",{type:"warn",msg:"ID3 tag length is not 249."})),O=w.split("/"),d={},O.length<r(Re.nol_breakout,"num"))return;for($ in Re)Re.hasOwnProperty($)&&(d[$]=O[Re[$]],"nol_breakout"===$&&(d[$]=O[r(Re[$],"num")].substr(0,2)),K[$]=d[$]);if(!d||B({data:a,param:"nol_tsvBreakoutMap"})&&-1===B({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(d.nol_breakout)||-1===d.nol_nWebAddress.indexOf("nielsen.com")||d.nol_fdcid===B({data:a,param:"nol_cidNull"})&&d.nol_pccid===B({data:a,param:"nol_cidNull"}))return;for(a._currVidType="content",J=0,Y=T.length;J<Y;J+=1)p=te[T[J]]?te[T[J]].clientField:T[J],K[T[J]]=d[p]||B({data:a,param:T[J]});if(K.nol_vidtype="content",N(a,De.onId3Detected,K),"false"!==K.nol_disabled||"nol_cmsoffset"===B({data:a,param:"nol_timer"}))return;if("daypart"===B({data:a,param:"nol_cadence"})){var Le=B({data:a,param:"nol_assetid"})||a._currAssetid;!Le&&d.nol_fdcid&&d.nol_fdcid!==B({data:a,param:"nol_cidNull"})?a._currAssetid=d.nol_fdcid:!a._currAssetid&&Le&&(a._currAssetid=Le)}d.nol_ac=a._currVidType,d.nol_assetid=B({data:a,param:"nol_assetid"})||a._currAssetid,_>0&&(-1!==B({data:a,param:"nol_product"}).indexOf("id3")||-1!==B({data:a,param:"nol_product"}).indexOf("mtvr"))&&(d.nol_pccid!==B({data:a,param:"nol_cidNull"})&&d.nol_pccid!==B({data:a,param:"nol_pccid"})||d.nol_fdcid!==B({data:a,param:"nol_cidNull"})&&d.nol_fdcid!==B({data:a,param:"nol_fdcid"}))&&C(a,null,pe.onPingFired,!0);var Ee=Ge.mtvr.pcChanged(a,d.nol_pccid),ke=Ge.mtvr.fdChanged(a,d.nol_fdcid);if(Ee&&(Ge.mtvr.isPCTag(a)||Ge.mtvr.isTransPing(a))&&(L.filters.onId3PcCidChanged=!0,L.count+=1,o&&o.startViewability(a),(ke||Ge.mtvr.isNullFDCid(a))&&a.set("nol_id3Seq",0)),ke&&(Ge.mtvr.isFDTag(a)||Ge.mtvr.isTransPing(a))&&(L.filters.onId3FdCidChanged=!0,L.count+=1,o&&o.startViewability(a),a.set("nol_id3Seq",0)),ke&&Ge.mtvr.isPCTag(a)&&(Ce=!0),""===a.get("nol_fdrtvod")||"0"===a.get("nol_fdrtvod")||!Ge.mtvr.isPCTag(a)&&!Ge.mtvr.isFDTag(a)||Ge.mtvr.isNullPCCid(a)||""===a.get("nol_pccid")||Ge.mtvr.isNullFDCid(a)||""===a.get("nol_fdcid")||!Ee||(we=!0,Ge.mtvr.isFDTag(a)&&De&&De.onId3FdCidChanged&&N(a,De.onId3FdCidChanged)),L.count){if(H(a,"sendID3",d,o),!L.filters.onId3FdCidChanged&&B({data:a,param:"nol_fdcid"})!=B({data:a,param:"nol_cidNull"})||-1===B({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(d.nol_breakout)||(a.serviceFlag.tsv.need=!0),L.count>0)for($ in L.filters)if(L.filters[$]&&(N(a,De[$]),"true"===B({data:a,param:"nol_disabled"})))return;if(De.onComplete&&(N(a,De.onComplete),"true"===B({data:a,param:"nol_disabled"})))return}else for($ in d)d.hasOwnProperty($)&&B({data:a,param:$,val:d[$]});if((ke&&Ge.mtvr.isFDTag(a)||Ee&&Ge.mtvr.isPCTag(a))&&a.isProductOf("mtvr")&&"impression"===a.get("nol_cadence")&&"false"===a.get("nol_disabled")){var Ae=_e[s].nolPriv_newMTVRStreamId;_e[s].nolPriv_newMTVRStreamId=Ae&&_e[s].restEvtTimestamp==n.timeStamp?Ae:t.generateGUID(),Ge.mtvr.resetTagSession(a,_e[s].nolPriv_newMTVRStreamId),_e[s].restEvtTimestamp=n.timeStamp}if((a.isProductOf("mtvr")||a.isProductOf("id3"))&&"false"===a.get("nol_disabled")&&_e[s].restEvtTimestamp!=n.timeStamp){var Me=_e[s].nolPriv_newMTVRStreamId;Me&&Me!==a.get("nol_sessionId","content")&&Ge.mtvr.resetTagSession(a,Me)}if(B({data:a,param:"nol_id3Raw",val:w}),(a.serviceFlag.tsv.need||Ce||we)&&-1!==b.indexOf("|"+B({data:a,param:"nol_product"})+"|")&&"false"===a.get("nol_disabled")&&(["true","1"].indexOf(a.get("nol_rtvodEnabled").toString().toLowerCase())>-1&&a.set("nol_rtvod",""),D=B(we?{data:a,param:"nol_pccid"}:Ce?{data:a,param:"nol_fdcid"}:!0!==L.filters.onId3PcCidChanged||Ge.mtvr.isNullPCCid(a)?{data:a,param:"nol_fdcid"}:{data:a,param:"nol_pccid"}),F(a,{service:"tsv",key:D,url:B({data:a,param:"nol_tsvURL"})})),(a.isProductOf("id3")||a.isProductOf("mtvr")&&"interval"===a.get("nol_cadence")&&"false"===a.get("nol_disabled"))&&d.nol_watermark&&String(d.nol_watermark).length>0&&(h=B({data:a,param:"nol_id3Data"}),P=Math.round(Fe()/1e3+ee),V=B({data:a,param:"nol_id3Seq"})||0,h?B({data:a,param:"nol_id3Data",val:h+="|"+P+","+B({data:a,param:"nol_id3Raw"})}):(B({data:a,param:"nol_id3Data",val:V+":"+B({data:a,param:"nol_clocksrc"})+":"+B({data:a,param:"nol_tsvFlag"})+":"+P+","+B({data:a,param:"nol_id3Raw"})}),B({data:a,param:"nol_id3Seq",val:r(V,"num")+1,vidType:"content"})),a.isProductOf("id3")))return _>0&&C(a,{returnLength:!0},pe.onPingFired),_+=1,B({data:a,param:"nolPriv_id3Count",val:_}),void B({data:a,param:"nol_davState",val:"1"});if(_+=1,B({data:a,param:"nolPriv_id3Count",val:_}),k=B({data:a,param:B({data:a,param:"nol_timer"})})||B({data:a,param:"nol_fdoffset"}),"daypart"===B({data:a,param:"nol_cadence"})&&(k=r(k,"num"),k+="nol_pcoffset"==B({data:a,param:"nol_timer"})?r(B({data:a,param:"nol_pcTimeCode"}),"num"):r(B({data:a,param:"nol_fdTimeCode"}),"num")),a.serviceFlag.tsv.need)B({data:a,param:"nol_queueTime",val:k});else{if("true"===B({data:a,param:"nol_disabled"}))return;E(k,a,pe),B({data:a,param:"nol_davState",val:"1"})}(ke&&Ge.mtvr.isFDTag(a)||Ee&&Ge.mtvr.isPCTag(a))&&(Ge.mtvr.isPCTag(a)&&"false"===a.get("nol_disabled")?o&&o.tickViewability(a,d.nol_pcoffset):Ge.mtvr.isFDTag(a)&&"false"===a.get("nol_disabled")&&o&&o.tickViewability(a,d.nol_fdoffset));break;case"60":case"mute":break;case"61":case"volume":o&&o.viewability&&o.viewability.setVolume(d);break;case"30":case"onpaginate":"dcrstatic"===B({data:a,param:"nol_product"})&&De.onPaginateDetected&&"stream"!==B({data:a,param:"nol_cadence"})&&N(a,De.onPaginateDetected),B({data:a,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":if(a.isProductOf(["dcrvideo","vrivideo"])){Ge.updateMetadata(a,c,te);var Ne=B({data:a,param:"nol_adLoadType",vidType:"content"});""!==Ne&&void 0!==Ne&&null!==Ne&&N(a,De.onAdLoadFlag)}break;case"optout":void 0!==d&&null!==d&&""!==d&&a.set("nol_useroptout",["true","1","t","y","yes"].indexOf(d.toString().toLowerCase())?"true":"false")}j(a,me)}}function q(e){var t,a=null,n="content"==e._currVidType?r(B({data:e,param:"nol_chnlCountThrshld"}),"num")||pe:r(B({data:e,param:"nol_staticCountThrshld"}),"num")||pe,i=e._dataArrObj[e._currVidType],o,s=0,l=e._dataArrObj.count;if(!e._dataArrObj[e._currVidType].hasOwnProperty(e._currAssetid)){if(l[e._currVidType]>=n){for(o in i)if(i.hasOwnProperty(o)){if((s=i[o].nolPriv_priority)<=0){t=o;break}(null===a||a>s)&&(a=s,t=o)}i.hasOwnProperty(t)&&(delete i[t],l[e._currVidType]-=1)}e._dataArrObj[e._currVidType][e._currAssetid]={nolPriv_priority:0},l[e._currVidType]+=1}}function Q(e,a){try{if(!e||!e.hasOwnProperty("data"))return;if(e.hasOwnProperty("savedVals")&&e.hasOwnProperty("savedReplayParams"))if(Array.isArray(e.savedVals))for(var n in e.savedVals)e.savedVals.hasOwnProperty(n)&&(e.savedReplayParams[e.savedVals[n]]=B({data:e.data,param:e.savedVals[n]}));else"string"==typeof e.savedVals&&(e.savedReplayParams[e.savedVals]=B({data:e.data,param:e.savedVals}));e.hasOwnProperty("resetStatic")&&!0===e.resetStatic&&(e.data._dataArrObj.static={}),e.data._dataArrObj.ad={},e.data._dataArrObj.content={},e.data._dataArrObj.count={content:0,ad:0,static:0},e.data._currAssetid="0"}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetDataObj"+e})}}function J(e){try{var a=B({data:e,param:"nol_playerId"});if(a&&t._players&&t._players.hasOwnProperty(a)){var n=t._players[a];if(n&&Object.keys(n.ottStatusObj).length>0){var r;for(r in n.ottStatusObj)B({data:e,param:r,val:n.ottStatusObj[r],vidType:"content"})}}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function W(e,a){try{if("1"===B({data:e,param:"nol_unifiedEnabled"})){var n=a&&a.hasOwnProperty("vidType")?a.vidType:e._currVidType.toLowerCase(),i=r(B({data:e,param:"nol_viewCount_"+n}),"num");B({data:e,param:"nol_viewCount_"+n,val:i+=1}),"1"===B({data:e,param:"nol_applyViewInc"})&&B({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function H(e,t,a,n,r){Ge.extendfData(e);var i="",o,s,l="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count",d=B({data:e,param:{}}),c,u,p=B({data:e,param:"nol_playerId"});if(q(e),"ad"===e._currVidType.toLowerCase()&&(i="st,a",B({data:e,param:"nol_currSeg",val:"0"})),""===B({data:e,param:"nol_errorURL"})&&B({data:e,param:"nol_errorURL",val:se+oe+de+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===t)for(o in d)d.hasOwnProperty(o)&&-1===l.indexOf(o)&&B({data:e,param:o,val:R({data:e,param:o})||""});for(o in a)a.hasOwnProperty(o)&&B({data:e,param:String(o),val:String(a[o])});if(B({data:e,param:"nolPriv_sendData",val:!0}),B({data:e,param:"nol_davState",val:"0"}),B({data:e,param:"nol_highWM",val:"0"}),B({data:e,param:"nol_iagData",val:""}),B({data:e,param:"nol_disabled",val:"false"}),B({data:e,param:"nol_sendQual",val:R({data:e,param:"nol_sendQual"})||""}),B({data:e,param:"nolPriv_assetid",val:""}),e.set("nolPriv_prevEvent",""),"S"===R({data:e,param:"nol_segmentPrefix"})&&B({data:e,param:"nol_segmentPrefix",val:"S"}),B({data:e,param:"nol_c3"})||B({data:e,param:"nol_c3",val:i}),!r){"content"===e._currVidType.toLowerCase()&&z(e),B({data:e,param:"nol_applyViewInc",val:"1"}),(!B({data:e,param:"nol_minutes"})||"daypart"!==B({data:e,param:"nol_cadence"})&&"dcrstatic"!==B({data:e,param:"nol_product"})||"dcrstatic"===B({data:e,param:"nol_product"})&&"stream"===B({data:e,param:"nol_cadence"}))&&(w(e),B({data:e,param:"nol_pingCount",val:0}));var m=B({data:e,param:"nol_adLoadType",vidType:"content"});""!==m&&void 0!==m&&null!==m&&N(e,De.onAdLoadFlag),J(e),n&&n.resetViewability&&n.resetViewability(e)}}function X(a,r){var i=r.id||r.getId?r.getId():"0",o=_e[i].nol_tagMap.nol_url,s,l,d,u=0,p=o?o[a.nol_url]||a.nol_url||"":a.nol_url||"",m={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},v={ad:{},content:{},static:{},count:{content:0,static:0}},f={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:e.location.href,nol_sendTime:"0",nol_pageURL:e.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:e.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_random:Math.round(1e9*Math.random()),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0",nol_viVersion:"",nol_omidsdkVersion:""},_=a;_.nol_playerId=i;var y=this,h={_dataArrObj:v,_settings:_,_currVidType:"ad",_currAssetid:"0",serviceFlag:m};Ge.extendfData(h),this.name=h.get("nol_comment"),this.playerId=i,this.resetViewability=function(e,t){y&&y.viewability&&y.viewability.initialized&&y.viewability.initialized()&&y.viewability.clear(e,t)},this.startViewability=function(e){y&&y.viewability&&y.viewability.initialized&&y.viewability.initialized()&&"function"==typeof y.viewability.start&&y.viewability.start(e)},this.stopViewability=function(){y&&y.viewability&&y.viewability.initialized&&y.viewability.initialized()&&"function"==typeof y.viewability.stop&&y.viewability.stop()},this.tickViewability=function(e,t,a){y&&y.viewability&&y.viewability.initialized&&y.viewability.initialized()?y.viewability.tick(t,e,function(){y.viewability.setData(e),a&&a()}):a&&a()},t._listeners.addListener("tick",function(){if(r.pauseObj.eventPauseTime>=r.pauseObj.cmsPauseTime&&Ge.state.status.current(h)!==Ge.states.stopped&&Ge.state.status.current(h)!==Ge.states.paused&&xe.isEnabled(h)){var e={event:Ue.events.pause,curPos:Ge.state.position.current(h),prevPos:null,timestamp:Ge.state.timeStamp.current(h)};Ge.state.set(h,e),xe.preProcess(h,e),r.pauseObj.eventPauseTime=0}r.pauseObj.pauseTime>r.pauseObj.maxPauseTime&&"dcrstatic"!==B({data:h,param:"nol_product"})&&"vrivideo"!==B({data:h,param:"nol_product"})&&(r.pauseObj.pauseTime=0,t._listeners.fireEvent("handleSessionReset",{plid:i,passedFdata:h}),t._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),Q({data:h},y);for(d in f)a.hasOwnProperty(d)?_[d]=a[d]:_[d]=_e[i][d]||f[d];if(_.nol_customExtension&&p){for(s=0,l=_.nol_customExtension.length;s<l;s+=1)p=p.replace("|!["+_.nol_customExtension[s]+"]!|",_e[i][_.nol_customExtension[s]]||"");_.nol_url=p}if(t.PLVBL&&h.get("nol_vizuURL")&&("interval"===h.get("nol_cadence")||"streamduration"===h.get("nol_cadence"))&&(this.viewability=new t.PLVBL(h,r)),"true"!==B({data:h,param:"nol_fireStop"})&&-1==="interval,episode,streamduration".indexOf(B({data:h,param:"nol_cadence"}))||n("pagehide||beforeunload",function(t){be&&(e.clearInterval(be),be=0,c({serverTimeOffset:B({data:h,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:B({data:h,param:"nol_rfrmsk"}),method:Ge.getRequestMethod(h)})),"sendBeacon"in navigator&&(Ne=!0),B({data:h,param:"nol_forceFireOnClose_content",val:"1"}),De.onEndDetected&&(N(h,De.onEndDetected,null,"ad"),N(h,De.onEndDetected,null,"content")),xe.setNextTick(h,null,"content"),x(h,!1,!0)}),this.eventListener=function(e){K(h,e,y)},_e[i].eventQueue.length>u)for(s=0;s<_e[i].eventQueue.length;s+=1)_e[i]&&_e[i].eventQueue&&(_e[i].eventQueue[s].timeStamp="queued"+s),K(h,_e[i].eventQueue[s]),u=s;t._listeners.addListener("sendError",function(e){if(!e.target||i===e.target.id){var a=e.target.id+"_"+e.target.timeStamp;Ve[a]||(t._listeners.fireEvent("error",{type:"error",msg:e.target.data?e.target.data.msg:""}),Ve[a]=g(h,e.target.data,!0,!0))}})}function Y(a){a&&a.hasOwnProperty("configReq")&&a.hasOwnProperty("player")&&a.configReq.length>0&&void 0!==a.player?(s(a.configReq),e.clearInterval(a.player.lsPopulatedInterval),a.player.lsPopulatedInterval=0):t._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}function $(e,t){if(e&&t)for(var a=e.match(ve.regex),n="",r=0;r<a.length;r++)(n=a[r].match(/\w+/gi))&&n.length>0&&(e=e.replace(a[r],t[n[0]]||""));return e}function Z(e,t){return t?(t._dataArrObj||(t={_dataArrObj:{content:{0:t}},_settings:t,_currVidType:"content"}),Ge.extendfData(t),f(t,e,null,{vidType:"content",silent:!0,noClone:!0})):e}var ee=t.PLDPR=t.PLDPR||{},te=e.NOLBUNDLE,ae=te.sdkvForConfig?te.sdkvForConfig():"bj.6.0.0",ne="6.0.0.",re="158-3",ie=t.getBaseBuildVer?t.getBaseBuildVer()+"158-3":"6.0.0.158-3",oe="cgi-bin/",se=te.getConfigAddress?te.getConfigAddress():te.getAddress(),le="cfg",de="error",ce=t.getLS(),ue=t.getConfigVer?t.getConfigVer():300,pe=5,me={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},ve={regex:/\|\![\w\W]*?(\!\|)/g,length:2},fe=/[\[\{<\(\}\]>\)]/g,ge=new RegExp(/(.*?)(_content|_ad|_static)?$/i),_e=ee.dataObj||{},ye=0,he=0,Pe=5,Se=5,Te=[],be,Oe=2,Ce=!1,we=[],Le="false",Ee=Le,ke,Ie={},De={},Ae={},Me=!1,Ne=!1,Re,Be={send:function(e,n,r){var i=e,o=-1!==i.url.indexOf("&c62=")?a(i.url,"c62=")+"&c62=sendTime,"+(void 0!==n?n:Fe()/1e3>>0):i.url,s=this,l=a(o,"rnd=")+"&rnd="+Math.round(1e6*Math.random());if(r=r||"GET",t.postMsgAvail&&i.hasOwnProperty("maskRefUrl")&&-1!==i.maskRefUrl&&"true"===i.maskRefUrl)je.sendMaskedPing(l);else if("POST"===r){var d=l.indexOf("?"),c=t.cookie.all(),u=l.substr(0,d)+(c.IMRID?"?"+je.param({IMRID:c.IMRID},"ckk"):""),p=l.substr(d+1);delete c.IMRID,c&&Object.keys(c).length>0&&(p+="&"+je.param(c,"ckk")),p=Ge.optoutOverride(p),je.request(u,{method:"POST",data:p},!Ne).then(function(e){parseInt(e.status)>400&&s.onError({target:{src:o}},i)})}else if(Ne)navigator.sendBeacon(l);else{var m=new Image;m.onerror=function(e){s.onError(e,i)},m.onload=function(){t.queryCookies()},m.src=l}},setup:function(e){var t=this,a=e.hasOwnProperty("url")?e.url:"",n=e.params||{url:a,errorDelay:1e3*(e.delay||Se),retry:0,maskRefUrl:e.hasOwnProperty("maskRefUrl")&&String(e.maskRefUrl).length>0?e.maskRefUrl:-1};a&&a.length>0&&t.send(n,e.pingSendTime,e.method)},onError:function(t,a){var n=this,r=t.target.src;a&&a.retry<Pe&&r&&r.length>0&&(a.retry+=1,a.url=r,e.setTimeout(function(){n.send(a,null,method)},a.errorDelay))}},Fe=te.getTIme||function(){return(new Date).getTime()},Ve={},xe=function(){var e="nol_eventData",t="nol_eventDataDelimiter",a="nol_eventDataEvents",n="nol_eventDataEnabled",r=":",i={delimiter:"",eventsList:[]},o=function(){return{play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}}}(),s={get:function(t,a){var n="";return t&&(n=B({data:t,param:e,vidType:a||t._currVidType})),n},set:function(t,a,n){return t&&B({data:t,param:e,val:a,vidType:n||t._currVidType}),t},clear:function(t){t&&(B({data:t,param:e,val:"",vidType:"ad"}),B({data:t,param:e,val:"",vidType:"content"}))},clone:function(e){try{return{content:s.get(e,"content"),ad:s.get(e,"ad")}}catch(e){return null}},bind:function(e,t){try{if(e&&t)for(var a in t)s.set(e,t[a],a)}catch(e){}},append:function(e,t){if(e&&t){var a=s.get(e),n=s.delimiter(e),r=s.parseEventData(t);s.set(e,a?[a,r].join(n):r)}},delimiter:function(e){return e?(i.delimiter||(i.delimiter=B({data:e,param:t})),i.delimiter):""},isEnabled:function(e){return!!e&&"true"===B({data:e,param:n})},isEventEnabled:function(e,t){if(t&&e){var a=s.lookupEvent(e.toLowerCase());if(a)return s.eventsList(t).indexOf(a.name)>-1}return!1},eventsList:function(e){if(e){if(!i.eventsList||0==i.eventsList.length){var t=B({data:e,param:a});t&&(i.eventsList=t.split(","))}return i.eventsList}},clearCache:function(){i.delimiter="",i.eventsList=[]},lookupEvent:function(e){return e?o[e.toLowerCase()]:null},parseEventData:function(e){var t="";if(e){var a=s.lookupEvent(e.event);if(a){var n=[a.abbrv,e.timestamp,e.curPos];void 0!==e.prevPos&&null!==e.prevPos&&e.curPos!=e.prevPos&&n.push(e.prevPos),void 0!==e.p1&&null!==e.p1&&n.push(e.p1),t=n.join(":")}}return t},handleEvent:function(e,t){e&&t&&s.isEventEnabled(t.event,e)&&s.append(e,t)},setNextTick:function(e,t,a){var n=s.get(e,a);if(n&&n.indexOf("{{nextTick}}")>-1)if(t&&t.event===Ue.events.playhead)e=s.set(e,n.replace(/{{nextTick}}/gi,1==t.curPos?"0":t.curPos),a);else{var r=Ge.state.position.current(e,a)||"0";e=s.set(e,n.replace(/{{nextTick}}/gi,r),a)}return e},preProcess:function(e,t){try{e&&t&&t.event&&t.event!==Ue.events.play&&-1===t.event.indexOf("event_")&&(s.setNextTick(e,t),t.event===Ue.events.stop&&"content"!==Ge.type.current(e)&&s.setNextTick(e,t,"content"),s.handleEvent(e,t))}catch(e){}},postProcess:function(e,t){try{e&&t&&t.event&&t.event===Ue.events.play&&s.handleEvent(e,t)}catch(e){}}};return{get:s.get,set:s.set,clone:s.clone,bind:s.bind,clear:s.clear,append:s.append,isEnabled:s.isEnabled,isEventEnabled:s.isEventEnabled,preProcess:s.preProcess,postProcess:s.postProcess,setNextTick:s.setNextTick}}(),Ge={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",assetId:"nol_assetid"},_params:{optout:"uoo",nuid:"c1"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function(e){if(e){if("string"==typeof e)return t._players[e];var a=B({data:e,param:"nol_playerId"});return Ge.findPlayer(a)}return null},currentPosition:function(e){return r(B({data:e,param:Ge._keys.currentPosition}),"num")},currentTimestamp:function(e){return r(B({data:e,param:Ge._keys.currentTimestamp}),"num")},asset:{current:function(e){return e?e._currAssetid:null},parse:function(e,t){var a=Ie[e.get("nol_playerId")]&&Ie[e.get("nol_playerId")].nol_assetid?Ie[e.get("nol_playerId")].nol_assetid.clientField:"nol_assetid";return t?t[a]:null}},type:{isCurrentlyContent:function(e){return"content"===e._currVidType},isCurrentlyAd:function(e){return"ad"===e._currVidType},isCurrentlyStatic:function(e){return"static"===e._currVidType},current:function(e){return e._currVidType},parse:function(e,t){var a=Ie[e.get("nol_playerId")]||{},n=a.nol_vidtype?a.nol_vidtype.clientField:"nol_vidtype",r=t[n]?t[n].toString().toLowerCase():"",i=","+B({data:e,param:"nol_contentType"});return r&&-1!==i.indexOf(","+r)?"content":"dcrstatic"===B({data:e,param:"nol_product"})?"static":"ad"}},tagName:function(e,t){return B({data:e,param:Ge._keys.tagName,vidType:t||e._currVidType})},localTimer:function(e,t){return B({data:e,param:Ge._keys.localTimer,vidType:t||e._currVidType})||"nol_fdoffset"},isInitialized:function(e,t){try{return t=t||e._currVidType,"{}"!==JSON.stringify(e._dataArrObj[t])}catch(e){return!1}},updateMetadata:function(e,a,n){try{var r={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype","nol_adLoadType"]},n=Ie[e.get("nol_playerId")]||{},i=function(e){var t=!0;for(var a in r.nolParams)if(n&&n.hasOwnProperty(r.nolParams[a])&&e===n[r.nolParams[a]].clientField){t=!1;break}return t};if(!e||!a)return;var o=void 0!==n&&"object"==typeof n&&n;for(var s in a)a.hasOwnProperty(s)&&(o&&i(s)?B({data:e,param:String(s),val:String(a[s])}):t._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+s+" is not allowed. Please remove "+s+" from your metadata parameter."}))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},extendfData:function(e){"function"!=typeof e.get&&(e.isProductOf=function(e){return!!e&&("object"==typeof e?e.indexOf(B({data:this,param:"nol_product"}))>-1:B({data:this,param:"nol_product"})===e)},e.get=function(e,t){return B({data:this,param:e,vidType:t})},e.set=function(e,t,a){return B({data:this,param:e,val:t,vidType:a})},e.del=function(e,t){
e&&t&&this&&this._dataArrObj&&this._dataArrObj[t]&&delete this._dataArrObj[t][e]})},state:{position:{current:function(e,t){return r(B({data:e,param:Ge._keys.stateCurrentPosition,vidType:t||e._currVidType}),"num")},previous:function(e,t){return r(B({data:e,param:Ge._keys.statePreviousPosition,vidType:t||e._currVidType}),"num")},set:function(e,t,a){var n=Ge.state.position.current(e);B({data:e,param:Ge._keys.statePreviousPosition,val:n,vidType:a||e._currVidType}),B({data:e,param:Ge._keys.stateCurrentPosition,val:t,vidType:a||e._currVidType})}},timeStamp:{current:function(e,t){return r(B({data:e,param:Ge._keys.stateCurrentTimestamp,vidType:t||e._currVidType}),"num")},previous:function(e,t){return r(B({data:e,param:Ge._keys.statePreviousTimestamp,vidType:t||e._currVidType}),"num")},set:function(e,t,a){var n=Ge.state.timeStamp.current(e);B({data:e,param:Ge._keys.statePreviousTimestamp,val:n,vidType:a||e._currVidType}),B({data:e,param:Ge._keys.stateCurrentTimestamp,val:t,vidType:a||e._currVidType})}},asset:{current:function(e,t){return B({data:e,param:Ge._keys.stateCurrentAsset,vidType:t||e._currVidType})},previous:function(e,t){return B({data:e,param:Ge._keys.statePreviousAsset,vidType:t||e._currVidType})},set:function(e,t,a){var n=Ge.state.asset.current(e);B({data:e,param:Ge._keys.statePreviousAsset,val:n,vidType:a||e._currVidType}),B({data:e,param:Ge._keys.stateCurrentAsset,val:t,vidType:a||e._currVidType})}},status:{current:function(e,t){return B({data:e,param:Ge._keys.stateCurrentStatus,vidType:t||e._currVidType})},previous:function(e,t){return B({data:e,param:Ge._keys.statePreviousStatus,vidType:t||e._currVidType})},set:function(e,t,a){var n=Ge.state.status.current(e,a);B({data:e,param:Ge._keys.statePreviousStatus,val:n,vidType:a||e._currVidType}),B({data:e,param:Ge._keys.stateCurrentStatus,val:t,vidType:a||e._currVidType})}},type:{current:function(e,t){return B({data:e,param:Ge._keys.stateCurrentType,vidType:t||e._currVidType})},previous:function(e,t){return B({data:e,param:Ge._keys.statePreviousType,vidType:t||e._currVidType})},set:function(e,t,a){var n=Ge.state.type.current(e,a);B({data:e,param:Ge._keys.statePreviousType,val:n,vidType:a||e._currVidType}),B({data:e,param:Ge._keys.stateCurrentType,val:t,vidType:a||e._currVidType})}},set:function(e,t){var a=Ge.findPlayer(e);switch(t.event){case"LOAD":Ge.state.asset.set(e,t.assetId),Ge.state.type.set(e,t.contentType),Ge.state.timeStamp.set(e,t.timestamp);break;case"PLAY":case"RESUME":Ge.state.status.set(e,Ge.states.playing),Ge.state.asset.set(e,t.assetId),Ge.state.type.set(e,t.contentType),Ge.state.timeStamp.set(e,t.timestamp),"PLAY"===t.event&&Ge.state.position.set(e,0),"RESUME"===t.event&&void 0!=t.currentPos&&null!=t.currentPos&&"{{nextTick}}"!=t.currentPos&&(Ge.state.position.set(e,t.curPos),Ge.state.timeStamp.set(e,t.timestamp)),a.pauseObj.eventPauseTime=0;break;case"PAUSE":Ge.state.status.set(e,Ge.states.paused);break;case"STOP":Ge.state.resetAsset(e),Ge.state.status.set(e,Ge.states.stopped);break;case"PLAYHEAD":Ge.state.position.set(e,t.curPos),Ge.state.timeStamp.set(e,t.timestamp),a.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":Ge.state.position.set(e,t.curPos),Ge.state.timeStamp.set(e,t.timestamp),a.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":a.pauseObj.eventPauseTime=0}},get:function(e,t){try{if(e){return{position:{current:Ge.state.position.current(e,t),previous:Ge.state.position.previous(e,t)},timeStamp:{current:Ge.state.timeStamp.current(e,t),previous:Ge.state.timeStamp.previous(e,t)},asset:{current:Ge.state.asset.current(e,t),previous:Ge.state.asset.previous(e,t)},status:{current:Ge.state.status.current(e,t),previous:Ge.state.status.previous(e,t)},type:{current:Ge.state.type.current(e,t),previous:Ge.state.type.previous(e,t)}}}}catch(e){}return null},resetAsset:function(e){Ge.state.position.set(e,null),Ge.state.timeStamp.set(e,null),Ge.state.asset.set(e,null)},bind:function(e,t){try{if(e&&t)for(var a in t)B({data:e,param:Ge._keys.statePreviousPosition,val:t[a].position?t[a].position.previous:null,vidType:a}),B({data:e,param:Ge._keys.stateCurrentPosition,val:t[a].position?t[a].position.current:null,vidType:a}),B({data:e,param:Ge._keys.statePreviousTimestamp,val:t[a].timeStamp?t[a].timeStamp.current:null,vidType:a}),B({data:e,param:Ge._keys.stateCurrentTimestamp,val:t[a].timeStamp?t[a].timeStamp.current:null,vidType:a}),B({data:e,param:Ge._keys.statePreviousAsset,val:t[a].asset?t[a].asset.current:null,vidType:a}),B({data:e,param:Ge._keys.stateCurrentAsset,val:t[a].asset?t[a].asset.current:null,vidType:a}),B({data:e,param:Ge._keys.statePreviousStatus,val:t[a].status?t[a].status.current:null,vidType:a}),B({data:e,param:Ge._keys.stateCurrentStatus,val:t[a].status?t[a].status.current:null,vidType:a}),B({data:e,param:Ge._keys.statePreviousType,val:t[a].type?t[a].type.current:null,vidType:a}),B({data:e,param:Ge._keys.stateCurrentType,val:t[a].type?t[a].type.current:null,vidType:a})}catch(e){}},clone:function(e){try{return{content:Ge.state.get(e,"content"),ad:Ge.state.get(e,"ad")}}catch(e){}}},cms:{parse:function(e,t,a){var n={metadata:(a?a.metadata:null)||{},defaultKey:(a?a.defaultKey:"")||"",silent:(a?a.silent:null)||!1,noClone:(a?a.noClone:null)||!1,vidType:a?a.vidType:"",noEncode:!(!a||!0!==a.noEncode)},r=e&&e.clientField?e.clientField:n.defaultKey;if(r&&t){if(n.metadata&&n.metadata.hasOwnProperty(r)&&n.metadata[r])return n.metadata[r];if(e&&e.clientField){if(n.end)return t.get(e.clientField,a?a.vidType:"");var i=t;!0!==n.noClone&&(i=JSON.parse(JSON.stringify(t)),H(i,"loadmetadata",n.metadata,null,!0));var o=[];return!0===n.noEncode?o=[r]:(o=(e.encoding||"").split(""),o.splice(o.length/2,0,r)),n.end=!0,f(i,"|!"+o.join("")+"!|",null,n)}}return""}},getRequestMethod:function(e){return e&&e.hasOwnProperty("get")&&"function"==typeof e.get?e.get("nol_prefRequestMethod")||e.get("nol_requestMethod"):"GET"},mtvr:{isTransPing:function(e){return!!e&&"id3"===B({data:e,param:"nol_product"})},isPCTag:function(e){return!!e&&(e.isProductOf("mtvr")&&""!==B({data:e,param:"nol_subTag"}))},pcChanged:function(e,t){return!!e&&t!==B({data:e,param:"nol_pccid"})},isFDTag:function(e){return!!e&&(e.isProductOf("mtvr")&&""===B({data:e,param:"nol_subTag"}))},fdChanged:function(e,t){return!!e&&t!==B({data:e,param:"nol_fdcid"})},resetTagSession:function(e,a){e&&e.set("nol_sessionId",a||t.generateGUID(),"content")},clearTagSession:function(e){if(e)return e.del("nol_sessionId","content")},isNullPCCid:function(e){return e.get("nol_pccid")===e.get("nol_cidNull")},isNullFDCid:function(e){return e.get("nol_fdcid")===e.get("nol_cidNull")}},optoutOverride:function(e){return e&&(e=a(e,Ge._params.optout+"=")+(t.isOptout()?"&"+Ge._params.optout+"=1":""),e=je.paramOverride(e,Ge._params.nuid,"nuid,"+t.getLsId())),e}},Ue=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},a={checkRewind:function(e,t){if(e&&void 0!==t&&null!==t&&"stream"!==B({data:e,param:"nol_cadence"})&&"impression"!==B({data:e,param:"nol_cadence"})){var a=Math.floor(r(t,"num")),n=Ge.state.position.current(e);return{match:a-n<0,currentPos:a,previousPos:n}}return!1},checkForward:function(e,t){if(e&&void 0!==t&&null!==t&&"stream"!==B({data:e,param:"nol_cadence"})&&"impression"!==B({data:e,param:"nol_cadence"})){var a=Math.floor(r(t,"num")),n=Ge.state.position.current(e),i=Ge.state.timeStamp.current(e),o=r(B({data:e,param:"nol_cmsIntrvlGp"}),"num")||2,s=Math.ceil(Fe()/1e3-i)||1;if(0==n&&a>86400&&"nol_cmsoffset"===Ge.localTimer(e)){var l=Math.round(Fe()/1e3).toString().substr(0,t.toString().length);l&&(n=parseInt(l))}var d=a-n;return{match:d>o&&d>Math.ceil(1.5*s),currentPos:a,previousPos:n}}return!1}},n={checkRewind:function(e,t){var a=Ge.currentPosition(e),n=Ge.currentTimestamp(e),i=r(B({data:e,param:"nol_id3IntrvlGp"}),"num");return!1},checkForward:function(e,t){var a=Ge.currentPosition(e),n=Ge.currentTimestamp(e),i=r(B({data:e,param:"nol_id3IntrvlGp"}),"num");return!1}};return{events:e,inferEvent:{inferEvent:function(n,i,o,s,l){var d=null;try{if(d={event:"event_"+n,curPos:Ge.state.position.current(i),prevPos:null,timestamp:s},n&&i)switch(n.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var c=Ge.asset.parse(i,l),u=Ge.state.asset.current(i),p=Ge.state.asset.previous(i),m=Ge.state.type.current(i),v=Ge.type.parse(i,l);if(d.event=e.load,d.assetId=c,d.contentType=v,Ge.state.status.current(i,v)==Ge.states.paused&&(u==c&&null!==c||m!==v)){d.event=e.resume,d.assetId=c,d.contentType=v,d.curPos="{{nextTick}}";break}if(Ge.state.status.current(i,v)!==Ge.states.playing&&u!=c||Ge.state.status.current(i,v)===Ge.states.stopped&&p==c&&null!==c||null===u){d.event=e.play,d.curPos="{{nextTick}}";break}break;case"5":case"play":d.event="event_play";break;case"7":case"stop":d.event="event_stop";break;case"57":case"end":case"oncomplete":d.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(o>-1){var f=a.checkRewind(i,o);if(f.match){d.event=e.rewind,d.curPos=f.currentPos,d.prevPos=f.previousPos,d.p1=d.prevPos-d.curPos;break}if(-1===xe.get(i).indexOf("{{nextTick}}")){var g=a.checkForward(i,o);if(g.match){d.event=e.forward,d.curPos=g.currentPos,d.prevPos=g.previousPos,d.p1=d.curPos-d.prevPos;break}}if(Ge.state.status.current(i)===Ge.states.paused){d.event=e.resume,d.assetId=Ge.state.asset.current(i),d.contentType=Ge.type.current(i),d.curPos=o;break}d.event=e.playhead,d.curPos=o}break;case"55":var _=B({data:i,param:B({data:i,param:"nol_timer"})})||B({data:i,param:"nol_fdoffset"});"daypart"===B({data:i,param:"nol_cadence"})&&(_=r(_,"num"),_+="nol_pcoffset"==B({data:i,param:"nol_timer"})?r(B({data:i,param:"nol_pcTimeCode"}),"num"):r(B({data:i,param:"nol_fdTimeCode"}),"num")),d.event=e.playhead;break;case"9":case"mute":d.event=e.mute,d.p1=o}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+n})}return d}}.inferEvent}}(),je=function(t,a,n){var r={sendMaskedPing:function(e,i){t.lsReady()?a.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:e}}),a.src):(i=i||0)<n.maxRetry&&setTimeout(function(){r.sendMaskedPing(e,i+1)},300)},request:function(t,a,n){return e.NOLBUNDLE.controllers.util.Promise(function(e,r){a=a||{},a.method=a.method||"GET",a.data=a.data||"";var i=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");i.open(a.method,t,void 0===n||null===n||n),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){i.readyState>3&&e&&e(i)},i.send(a.data)})}},i={param:function(e,t){var a="";if(e&&"object"==typeof e&&Object.keys(e).length>0){t=t||"";for(var n in e)e.hasOwnProperty(n)&&(a+=(""!==a?"&":"")+(t?t+"-":"")+n+"="+e[n])}return a},paramOverride:function(e,t,a){if(e&&t){var n=new RegExp("([&?]+"+t+"=)([^&$]*)","gi"),r=e.match(n);if(r)for(var i="",o=0,s=r.length;o<s;o++)i=r[o].substr(0,r[o].indexOf("=")+1)+(a||""),e=e.replace(r[o],i)}return e}};return{sendMaskedPing:r.sendMaskedPing,request:r.request,param:i.param,paramOverride:i.paramOverride}}(t,ce,{maxRetry:Pe}),ze=[];return ee.initFromConfig=function(a,n,r){t._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(a&&a.nol_GLOBALS){var i,s,l=Fe(),d,u,p,m,v="localhost",f=a.nol_GLOBALS.debugSfcode||"uat-cert",g=a.nol_GLOBALS.nol_appid||"",_=a.nol_GLOBALS.nol_lsid||"",y=a.nol_GLOBALS.nol_emmURL||(a.nol_GLOBALS.nol_tagMap&&a.nol_GLOBALS.nol_tagMap.nol_defaults?a.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",h,P,S,T,b,O,C,w;if(r&&(t.optoutCookie&&"TOTAL"===t.optoutCookie&&"OPTOUT"!==t.localStorageId&&(_="OPTOUT",t._listeners.fireEvent("debug",{type:"debug",msg:'Optout cookie was set but lsid was "'+t.localStorageId+'". Setting lsid to OPTOUT'})),""===_&&("-1"===t.localStorageId?_="999":""===t.localStorageId?_=t.generateGUID():t.localStorageId&&(_=t.localStorageId))),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+t.localStorageId+"; config lsid: "+_}),t._listeners.fireEvent("sendOptOutStatus","OPTOUT"==_),void 0!==a.nol_GLOBALS.nol_maxRetry&&null!==a.nol_GLOBALS.nol_maxRetry&&""!==a.nol_GLOBALS.nol_maxRetry){var L=parseInt(a.nol_GLOBALS.nol_maxRetry);L>-1&&(Pe=L)}if(a&&a.hasOwnProperty("nol_GLOBALS")){var E=n||a.nol_GLOBALS.nol_playerId||0;if(!(s=t._players[E]))return;v=a.nol_GLOBALS.nol_sfcode||v,t._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+s.name+'" initialized with globals '+JSON.stringify(s.getConfigParams().ggParams)}),s.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(a.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(a.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},r&&(a.nol_GLOBALS.nol_serverTime=Fe()/1e3>>0),w=t.localStorage?_e[E]?_e[E].nol_serverTime||t.localStorage.getItem("nol_serverTime"):t.localStorage.getItem("nol_serverTime")||0:_e[E]?_e[E].nol_serverTime:0,w===a.nol_GLOBALS.nol_serverTime?ye=_e[E]?_e[E].nolPriv_serverTimeOffset:a.nol_GLOBALS.nol_serverTime-Math.round(l/1e3):(ye=a.nol_GLOBALS.nol_serverTime-Math.round(l/1e3),t.localStorage&&t.localStorage.setItem("nol_serverTime",a.nol_GLOBALS.nol_serverTime)),Se=a.nol_GLOBALS.nol_errorWait||Se,i=s.getConfigParams().ggParams||{},_e[E]=o(_e[E]),_e[E].nolPriv_serverTimeOffset=ye,_e&&_e.hasOwnProperty(E)?_e[E].nol_nielsenAdSupportFlg=0:t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),be&&(e.clearInterval(be),be=0),a.nol_GLOBALS.nol_sendTimer&&(be=e.setInterval(function(){c({serverTimeOffset:_e[E].nolPriv_serverTimeOffset,url:"__sendIt",method:_e[E].nol_requestMethod})},1e3*a.nol_GLOBALS.nol_sendTimer));for(d in i)i.hasOwnProperty(d)&&(_e[E][d]=i[d]);for(d in a.nol_GLOBALS)a.nol_GLOBALS.hasOwnProperty(d)&&(_e[E][d]=a.nol_GLOBALS[d]);De=_e[E].nol_eventFilter||{},Ae=_e[E].nol_serviceFilter||{},Re=_e[E].nol_id3Map||{},Ie[E]=Ie[E]||{};for(d in _e[E].nol_clientCMSmap)_e[E].nol_clientCMSmap.hasOwnProperty(d)&&(P=_e[E].nol_clientCMSmap[d].toString()||"",S=P.replace(fe,""),b=P.match(fe)||[],T={clientField:S.toString(),encoding:b.join("")},Ie[E][d]=T);if(i&&i.hasOwnProperty("nol_override")&&Object.keys(i.nol_override).length>0)for(d in i.nol_override)i.nol_override[d].length>0&&(_e[E][d]=i.nol_override[d]);a.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&te.hasOwnProperty("setTotalNumAssetsAllowed")&&te.setTotalNumAssetsAllowed(a.nol_GLOBALS.nol_maxStaticInstances),s.configLoaded=!0,r&&(_e[E].nol_prefProtocol=t.getPrefProtocol(a),_e[E].nol_playerId=E,_e[E].nol_nuid=_,_e[E].nol_lsid=_,_e[E].nol_bldv=ie,_e[E].nol_sdkv=s.sdkvForConfig,_e[E].nol_assetName=a.nol_GLOBALS.hasOwnProperty("nol_assetName")&&a.nol_GLOBALS.nol_assetName.length>0?a.nol_GLOBALS.nol_assetName:"defChnAsset",_e[E].nol_sfcode=i.sfcode,_e[E].nol_dcrsfcode=i.sfcode,_e[E].nol_apn=i.apn||(a.nol_GLOBALS.hasOwnProperty("nol_apn")&&a.nol_GLOBALS.nol_apn.length>0?a.nol_GLOBALS.nol_apn:""),_e[E].nol_nmspc="NOLBUNDLE"),_e[E].nol_lstrg="",_e[E].nol_userSessionId=s.sessionId,_e[E].nol_useroptout="",t.userAgent.isAndroid()?_e[E].nol_vriDeviceTypeId="0003":t.userAgent.isIOS()?_e[E].nol_vriDeviceTypeId="0002":_e[E].nol_vriDeviceTypeId="0001",_&&"999"!==_&&!t.userAgent.isFB()&&(_e[E].nol_lstrg="lstrg-"+_),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+t.EMMURL+"; config emm: "+y}),y=$(y,_e[E]),_e[E].nol_emmURL=y,t.setLsId(_,y,s.sessionId)}if(a&&a.hasOwnProperty("nol_TAGS"))for(_e[E].tagSize=a.nol_TAGS.length,_e[E].tags=[],t._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),d=0;d<_e[E].tagSize;d+=1)t._listeners.fireEvent("debug",{type:"debug",msg:String(a.nol_TAGS[d].nol_comment)}),_e[E].tags.push(new X(JSON.parse(JSON.stringify(a.nol_TAGS[d])),s));void 0!==t.enablePlayer&&t.enablePlayer(E,"PLDPR"),_e[E].bReInit=!1,i.nol_hybridCfg&&e&&e.JSON&&(h=e.document.createElement("script"),h.text="(function() {if (typeof "+i.nol_hybridCfg+" === 'function'){"+i.nol_hybridCfg+"('"+JSON.stringify(a)+"')}}())",e.document.head?(e.document.head.appendChild(h),e.document.head.removeChild(h)):(e.document.getElementsByTagName("head")[0].appendChild(h),e.document.getElementsByTagName("head")[0].removeChild(h))),_e[E].forceStreamRegen=!1,t._listeners.addListener("tick",function(){s&&s.hasOwnProperty("pauseObj")&&s.pauseObj.hasOwnProperty("pauseTime")&&(!0===s._pauseTimeoutEnabled?s.pauseObj.pauseTime+=1:s.pauseObj.pauseTime=0,s.pauseObj.eventPauseTime+=1)}),s&&s.configLoaded&&e.NOLBUNDLE&&e.NOLBUNDLE.controllers&&e.NOLBUNDLE.controllers.util&&e.NOLBUNDLE.controllers.util.fireCustomEvent&&e.NOLBUNDLE.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:s.name,instance:s}),t._listeners.fireEvent("flushQueue")}else e.console&&e.console.warn&&e.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),t._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."});return _e[E]}catch(a){e.console&&e.console.error&&e.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct. "+a.message),t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response. "+a.message})}},ee.getCmsMap=function(e){try{if(void 0!==e&&"string"==typeof e||t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),_e&&_e.hasOwnProperty(e)&&void 0!==_e[e].nol_clientCMSmap)return _e[e].nol_clientCMSmap}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},ee.resolveExpression=Z,ee.init=function(a){var n=a.getConfigParams()||{},r,i,o=t.getIfLsidShouldSend()?t.getLsId():void 0,s,l="",c=0===se.indexOf("https")?"https":"http";s={pli:{val:n.nol_playerId||0,protect:!0},nmspc:{val:"NOLBUNDLE",protect:!0},sdkv:{val:ae,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:ue,protect:!0},bldv:{val:ie,protect:!0},prefprotocol:{val:c,protect:!1}},a.addListener("ggPM",function(e){D(e)}),a.lsPopulatedInterval=0,a.lsCurrentRetry=0,a.serviceSending={tsv:!1,stn:!1},a.ottStatusObj={},a.oServiceCall={},a.static={started:!1};for(r in n.ggParams)!n.ggParams.hasOwnProperty(r)||s[r]&&s[r].protect||0==r.indexOf("nol_")||(s[r]={val:d(n.ggParams[r])});for(r in s)s.hasOwnProperty(r)&&(l+=r+"="+s[r].val+"&");l=l.substr(0,l.length-1),i=se.replace(/[\w\W]*?:\/\//g,""),a.useCachedConfig||(void 0===o||a.lsPopulatedInterval?void 0===o&&(ke=c+"://"+i+oe+"cfg?"+l+"&sendTime="+Math.floor(Fe()/1e3),Y({configReq:ke,player:a})):a.lsPopulatedInterval=e.setInterval(function(){o=t.getLsId(),"-1"!==o?(ke=c+"://"+i+oe+"cfg?"+l+"&lsid="+o+"&sendTime="+Math.floor(Fe()/1e3),Y({configReq:ke,player:a})):2===a.lsCurrentRetry?(ke=c+"://"+i+oe+"cfg?"+l+"&lsid=999&sendTime="+Math.floor(Fe()/1e3),Y({configReq:ke,player:a})):a.lsCurrentRetry+=1},1e3))},ee.built||(ee.built=!0,ee.BUILDVERSION=ie,ee.dataObj=_e,t.bindPlayers(ee,"PLDPR"),t._listeners.fireEvent("flushQueue")),ee}),e.NOLBUNDLE.registerLib("PLDCR",function(t){"use strict";function a(t,a){var n={};return n.set=function(e,t){return n.init=!0,n.elapsed=0,n.startTimeStamp=0,"function"==typeof e&&(n.funcCall=e),isNaN(t)||(n.intervalTime=t),n},n.play=function(e){return n.isActive||(e?(n.startTimeStamp=0,n.elapsed=0,n.setTimer()):n.setTimer(n.remaining),n.isActive=!0),n},n.pause=function(){return n.isActive&&(n.isActive=!1,n.remaining-=Date.now()-n.last,n.clearTimer()),n},n.stop=function(){return n.isActive=!1,n.remaining=n.intervalTime,n.clearTimer(),n},n.clearTimer=function(){e.clearTimeout(n.timeoutObject)},n.setTimer=function(t){var a=n;"function"==typeof n.funcCall&&(isNaN(t)&&(t=n.intervalTime),n.remaining=t,n.last=Date.now(),n.clearTimer(),n.timeoutObject=e.setTimeout(function(){a.tick()},t))},n.tick=function(){n.isActive&&(n.elapsed++,n.funcCall(),n.setTimer())},n.reset=function(){n.startTimeStamp=0,n.elapsed=0,n.remaining=n.intervalTime},n.init?n:(n.set(t,a),n)}function n(){l.dcrTimer&&(l.latestDcrTickVal=l.dcrTimer.elapsed,t._listeners.fireEvent("dcrHeartbeat",l.dcrTimer.elapsed))}function r(e){(self===top||self!==top&&t.globalHasFocus&&!t.globalHasFocus())&&(t._listeners.fireEvent("info",{type:"info",msg:"Page onBlur fired and stopped static timer: "+JSON.stringify(e,function(e,t){if("string"==typeof t)return t})}),l.dcrTimer&&l.dcrTimer.pause())}function i(e){t._listeners.fireEvent("info",{type:"info",msg:"Page onFocus fired and playing static timer: "+JSON.stringify(e,function(e,t){if("string"==typeof t)return t})}),l.dcrTimer&&l.dcrTimer.play(l._reset),l._reset=!1}function o(e){!document.hidden&&t.globalHasFocus&&t.globalHasFocus()?(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - VISIBLE"}),l.dcrTimer&&l.dcrTimer.play(l._reset),l._reset=!1):(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - HIDDEN"}),l.dcrTimer&&l.dcrTimer.pause())}function s(e){l.dcrTimer&&l.dcrTimer.stop()}var l=t.PLDCR=t.PLDCR||{dcrTimer:void 0,startDcrTime:0,latestDcrTickVal:0,_reset:!1},d="6.0.0",c="1",u=e.NOLBUNDLE,p=t.getBaseBuildVer?t.getBaseBuildVer()+"1":"6.0.01";return l.startDcrTick=function(){},l.latestDcrTick=function(){return l.latestDcrTickVal},l.start=function(e){var r=!t.globalHasFocus||t.globalHasFocus();l._reset=e,(null===l.dcrTimer||void 0===l.dcrTimer||e)&&(r?(l.dcrTimer=a(n,1e3).play(!0),l._reset=!1):l.dcrTimer=a(n,1e3))},l.stop=function(){l.dcrTimer&&l.dcrTimer.stop()},l.init=function(t){u.browserSafeAddEventListener({element:e,eventType:"blur",func:r,useCapture:!1}),u.browserSafeAddEventListener({element:e,eventType:"focus",func:i,useCapture:!1}),u.browserSafeAddEventListener({element:e,eventType:"beforeunload",func:s,useCapture:!1}),u.browserSafeAddEventListener({element:e,eventType:"pagehide",func:s,useCapture:!1}),document.addEventListener&&document.addEventListener("visibilitychange",o)},l.built||(l.built=!0,l.BUILDVERSION=p,t.bindPlayers(l,"PLDCR")),l}),e.NOLBUNDLE.registerLib("PLLOG",function(t){"use strict";function a(e){if(e){var a=String(e).toUpperCase();if(v.hasOwnProperty(a))for(var n in v[a]){var r=String(n).toLowerCase();t._listeners.addListener(r,v[a][r])}}}function n(e){return e&&e.target&&e.target.hasOwnProperty("msg")?e.target.msg:""}function r(t){e.console&&console.info("Nielsen Log: Info - ",n(t))}function i(t){e.console&&console.log("Nielsen Log: Debug - ",n(t))}function o(t){e.console&&console.log("Nielsen Log: Logger - ",n(t))}function s(t){e.console&&console.warn("Nielsen Log: Warn - ",n(t))}function l(t){e.console&&console.error("Nielsen Log: Error - ",n(t))}var d=t.PLLOG=t.PLLOG||{},c=e.NOLBUNDLE,u="6.0.0",p="0",m=t.getBaseBuildVer?t.getBaseBuildVer()+"0":"6.0.0"+_localBuildVer,v={INFO:{info:r},DEBUG:{info:r,debug:i,warn:s,error:l},WARN:{info:r,warn:s},ERROR:{info:r,error:l},CONSOLE:{info:r},TRUE:{info:r},LOGGER:{logger:o}};return d.init=function(e){if(e&&e.getConfigParams){var t=e.getConfigParams();t.hasOwnProperty("ggParams")&&t.ggParams.hasOwnProperty("nol_sdkDebug")&&a(t.ggParams.nol_sdkDebug)}},d.built||(d.built=!0,d.BUILDVERSION=m,t.bindPlayers(d,"PLLOG")),d})):console&&console.warn&&console.warn("Warning: Your current browser environment does not sufficiently support ECMA5 standards. Nielsen SDK will not be initialized.")}catch(e){t("ERROR: "+e.message)}}(window);