YAHOO=YAHOO||{};YAHOO.JP=YAHOO.JP||{};YAHOO.JP.srch=YAHOO.JP.srch||{};YAHOO.JP.srch.ss=YAHOO.JP.srch.ss||{};YAHOO.JP.srch.ss.pc=YAHOO.JP.srch.ss.pc||{};(function(a){var d="searchbox-advancedSearch";var c;a.srchbox=function(){this.initialize.apply(this,arguments)};a.srchbox.prototype.initialize=function(f,e){this.$root=f;this.$form=this.$root.find("[data-"+d+"-form]");this.$textfield=this.$root.find("[data-"+d+"-textfield]");this.$button=this.$root.find("[data-"+d+"-button]");this.$closer=this.$root.find("[data-"+d+"-closer]");this.$reset=this.$root.find("[data-"+d+"-reset]");c=(!this.$form.find('select[name="cid"]').is(":disabled"))?this.$form.find('select[name="cid"]').val():"";for(idx in e.methods){if(e.methods.hasOwnProperty(idx)){this[e.methods[idx]].apply(this,arguments)}}};a.srchbox.prototype.resetPulldown=function(){var g=this;var e=null;var f=this.$textfield.val().length;this.$textfield.on("focus."+d,function(){e=setInterval(function(){if(f){if(!g.$textfield.val().length){g.$form.find('select[name="cid"] option:first').prop("selected",true);clearInterval(e);e=null;f=0}}else{f=g.$textfield.val().length}},10)}).on("blur."+d,function(){setTimeout(function(){if(e){clearInterval(e);e=null}},100)})};a.srchbox.prototype.submitSearch=function(){var k=this;var f=k.$textfield.val();var j=f.trim().replace("　"," ").split(" ");this.$button.on("click."+d,function(n){n.preventDefault();i("top");var m=k.$textfield.val();var o=m.trim().replace("　"," ").split(" ");var l=(!k.$form.find('select[name="cid"]').is(":disabled"))?k.$form.find('select[name="cid"]').val():"";if(j[0]!==o[0]&&c===l){$('<input type="hidden" name="sretry" value=0 >').appendTo(k.$form);if(o[0]!==""){k.$form.find("select[name=cid]").prop("disabled",true)}}else{$('<input type="hidden" name="sretry" value=1 >').appendTo(k.$form)}k.$form.submit()});function i(l){if(k.$root.hasClass("elDetailDropDownShow")){k.$closer.trigger("click")}g();e();h(l)}function g(){k.$form.find("input[name=aq][type=hidden]").val("");k.$form.find("input[name=oq][type=hidden]").val("")}function e(){var m=k.$form.find('input[name="p"]').val().length;var s=location.host;var l="";if((s==="search.adult.shopping.yahoo.co.jp"||s==="adult.shopping.yahoo.co.jp")){l="adult."}if(!m){k.$form.find('input[name="di"]').prop("checked",false);var q=(!k.$form.find('select[name="cid"]').is(":disabled"))?k.$form.find('select[name="cid"]').val():"";if(q){var t=["2494","2495","2496"],n="";if($.inArray(q,t)!==-1){n="12357/"}var p=["2499"],o="";if($.inArray(q,p)!==-1){o="2498/"}var r=n?n:o;k.$form.attr("action","//"+l+"shopping.yahoo.co.jp/category/"+r+q+"/list");k.$form.find('input[name="p"]').val("")}}}function h(o){var p=k.$form.find("input[name=sc_i]");var n=p.val();if(!p.attr("data-sc_i")){p.attr("data-sc_i",n)}var s=p.data("sc_i");var q=p.data("sc_i");if(o==="top"){var t=location.host;var l=false;if((t==="search.adult.shopping.yahoo.co.jp"||t==="adult.shopping.search.yahoo.co.jp")){l=true}if(l){s+="Adult"}}var r=false;$("#rich_srchbox").find("select,input[type=checkbox],input[type=radio]").each(function(){var u=$(this).attr("type");if(u=="radio"||u=="checkbox"){if($(this).prop("checked")){r=true}}else{var v=$(this).find("option:selected").val();if(v){r=true}}});var m=k.$form.find('input[name="p"]').val().length;if(!m){k.$form.find("select[name=cid]").prop("disabled",true)}if(r){s+="_2"}if(p.length){p.remove()}$('<input type="hidden" name="sc_i" value="'+s+'" data-sc_i="'+q+'">').appendTo(k.$form)}};a.srchbox.prototype.takeoverParams=function(){if(this.$reset[0]){if(this.$root.hasClass("elDetailDropDownShow")){this.$closer.trigger("click")}this.$reset.trigger("click")}};a.srchbox.prototype.clickReset=function(){var e=this;this.$reset.on("click."+d,function(f){f.preventDefault();$(this).closest("form").get(0).reset();e.$form.find("input[name=ship]").prop("checked",false);e.$form.find("input[name=ship2]").prop("checked",false);e.$form.find("input[name=used]").prop("checked",false);e.$form.find("input[name=shipd]").prop("checked",false);e.$form.find("select[name=cid]").val("");e.$form.find("select[name=pf]").val("");e.$form.find("select[name=pt]").val("")})};a.srchbox.prototype.richSrchBoxControle=function(){$("tr.elPrice select").change(function(){var g=$(this).attr("name");var f=$("tr.elPrice select[name=pf] option:selected").val();var h=$("tr.elPrice select[name=pt] option:selected").val();if(f==""||h==""){return}if(parseInt(f)>parseInt(h)){if(g=="pf"){$("tr.elPrice select[name=pt]").val(f)}else{$("tr.elPrice select[name=pf]").val(h)}}});e();$("#srchbox_clear").on("click",function(){var f=document.getElementById("rich_srchbox_button");f.classList.remove("isSelected")});$("#rich_srchbox").change(function(){e()});function e(){var g=false;$("#rich_srchbox").find("select,input[type=checkbox],input[type=radio]").each(function(){var h=$(this).attr("type");if(h=="radio"||h=="checkbox"){if($(this).prop("checked")){g=true;return false}}else{var i=$(this).find("option:selected").val();if(i){g=true;return false}}});var f=document.getElementById("rich_srchbox_button");if(g){f.classList.add("isSelected")}else{f.classList.remove("isSelected")}}};var b={methods:["submitSearch","clickReset","richSrchBoxControle"]};$("[data-"+d+"]").each(function(){var e=$(this);new a.srchbox(e,b)})})(YAHOO.JP.srch.ss.pc);