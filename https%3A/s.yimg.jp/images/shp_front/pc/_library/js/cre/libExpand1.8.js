!function(e){"use strict";function t(t){var a=t.attr("data-"+s+"-parameter");if("undefined"!=typeof a){a=a.split(",");var o,n=a.length,l={};for(o=0;o<n;o++){var i=e.trim(a[o]).split(":");"true"===i[1]&&(i[1]=!0),"false"===i[1]&&(i[1]=!1),isNaN(Number(i[1]))||(i[1]=Number(i[1])),l[i[0]]=i[1]}e.extend(!0,t.data(s),l)}}function a(t){var a=t.data(s.toLowerCase()+"-options");"undefined"!=typeof a&&"object"==typeof a&&e.extend(!0,t.data(s),a)}var s="libExpand",o=navigator.userAgent.toLowerCase(),n=document.body.style,l=function(){var e=o.split("/").reverse()[0];return!(o.match("android")&&e<534)&&("transition"in n||"webkitTransition"in n||"msTransition"in n)}(),i=function(){return""!==location.hash&&(i=!0),!1}(),r="transitionend."+s+" webkitTransitionEnd."+s+" msTransitionEnd."+s,g={initialize:function(o){return this.each(function(){e(this).data(s,e.extend(!0,{openClass:"elOpen",closeClass:"elClose",showClass:"elShow",trigger:"[data-"+s+'-parts="trigger"]',delayTrigger:"[data-"+s+'-parts="trigger-delay"]',triggerInterval:600,$hashShow:null,$expand:e(this).find(".elExpand"),openHeight:0,closeHeight:0,durationMin:140,durationMax:400,duration:0,forceToggle:null,isTouch:!1,expandID:e(this).attr("data-"+s+"-id"),existsDelayTrigger:!1,showText:null,defaultText:[],showBefore:null,showAfter:null,closeBefore:null,closeAfter:null},o)),t(e(this)),a(e(this));var n=e(this),l=n.data(s);l.$hashShow=e("[data-"+s+'-hashshow="'+l.expandID+'"]'),i&&g.hashShow.apply(n),null!==l.showText&&n.find(l.trigger).each(function(){l.defaultText.push({$trigger:e(this),text:e.trim(e(this).text())})});var r=l.closeHeight;l.closeHeight=l.$expand.innerHeight(),null===l.forceToggle||"close"===l.forceToggle?n.toggleClass(l.showClass,!1):(n.is("."+l.showClass)?l.closeHeight=r:n.toggleClass(l.showClass,!0),g.replaceText.apply(n)),n.find(l.delayTrigger).length>0&&l.$expand.length>0&&(l.existsDelayTrigger=!0),g.autoHeight.apply(n),g.action.apply(n)})},action:function(){var t=e(this),a=t.data(s),o=null;t.on("click."+s,a.trigger,function(){clearInterval(o),o=null,null===a.forceToggle||"close"===a.forceToggle?(t.toggleClass(a.showClass,!1),g.showExpand.apply(t)):(t.toggleClass(a.showClass,!0),g.closeExpand.apply(t))}),a.existsDelayTrigger?(t.on("mouseenter."+s,a.delayTrigger+", "+a.trigger,function(){null==o&&(o=setInterval(function(){clearInterval(o),g.showExpand.apply(t)},a.triggerInterval))}),t.on("mousemove."+s,function(){a.isTouch=!0}).on("mouseleave."+s,function(){clearInterval(o),o=null,a.isTouch=!1,setTimeout(function(){a.isTouch||g.closeExpand.apply(t)},400)})):a.isTouch=!0},showExpand:function(){var t=e(this),a=t.data(s);a.forceToggle="open",g.toggle.apply(t),g.applyCallback.apply([t,"showBefore"])},closeExpand:function(){var t=e(this),a=t.data(s);a.forceToggle="close",g.toggle.apply(t),g.applyCallback.apply([t,"closeBefore"])},toggle:function(){var t=e(this),a=t.data(s);if(l)if(g.autoHeight.apply(t),"open"===a.forceToggle){if(a.closeHeight=a.$expand.innerHeight(),t.hasClass(a.showClass))return;a.$expand.css({height:a.closeHeight,"-ms-transition-duration":a.duration/1e3+"s","-webkit-transition-duration":a.duration/1e3+"s","transition-duration":a.duration/1e3+"s"}).on(r,function(){a.$expand.off(r),a.$expand.css({height:"","-ms-transition-duration":"","-webkit-transition-duration":"","transition-duration":""}),a.isTouch?t.toggleClass(a.openClass,!1).toggleClass(a.showClass,!0):t.toggleClass(a.openClass,!1).toggleClass(a.closeClass,!1).toggleClass(a.showClass,!1),g.replaceText.apply(t),g.applyCallback.apply([t,"showAfter"])}),t.toggleClass(a.openClass,!0).toggleClass(a.closeClass,!1).toggleClass(a.showClass,!1),setTimeout(function(){a.$expand.css({height:a.openHeight})},50)}else{if(!t.hasClass(a.openClass)&&!t.hasClass(a.showClass))return;a.$expand.css({height:a.openHeight,"-ms-transition-duration":a.duration/1e3+"s","-webkit-transition-duration":a.duration/1e3+"s","transition-duration":a.duration/1e3+"s"}).delay(50).queue(function(){t.toggleClass(a.openClass,!1).toggleClass(a.closeClass,!0).toggleClass(a.showClass,!1),a.$expand.css({height:a.closeHeight}).on(r,function(){a.$expand.off(r),a.$expand.css({height:"","-ms-transition-duration":"","-webkit-transition-duration":"","transition-duration":""}),a.isTouch?t.toggleClass(a.closeClass,!1):t.toggleClass(a.openClass,!1).toggleClass(a.closeClass,!1).toggleClass(a.showClass,!1),g.replaceText.apply(t),g.applyCallback.apply([t,"closeAfter"])}).dequeue()})}else"open"===a.forceToggle?(t.toggleClass(a.openClass,!1).toggleClass(a.closeClass,!1).toggleClass(a.showClass,!0),g.replaceText.apply(t),g.applyCallback.apply([t,"showAfter"])):"close"===a.forceToggle&&(t.toggleClass(a.openClass,!1).toggleClass(a.closeClass,!1).toggleClass(a.showClass,!1),g.replaceText.apply(t),g.applyCallback.apply([t,"closeAfter"]))},replaceText:function(){var t,a,o=e(this),n=o.data(s),l=n.defaultText,i=o.find(n.trigger);if(null!==n.showText){for(t=0,t=0;t<10&&0!==i.find("*").length;t++)i=i.find("*");"open"===n.forceToggle?i.text(n.showText):(a=i.length,i.each(function(){var o;for(t=0;t<a;t++)if(o=e(this).closest("[data-"+s+'-parts="trigger"]'),o.get(0)===l[t].$trigger.get(0)){e(this).text(l[t].text);break}}))}},autoHeight:function(){var t=e(this),a=t.data(s),o=0;a.$expand.children().each(function(){o+=e(this).outerHeight(!0)}),a.openHeight=o,"open"!==a.forceToggle&&(o=.7*o),a.duration=o,a.duration=a.duration<a.durationMin?a.durationMin:a.duration,a.duration=a.duration>a.durationMax?a.durationMax:a.duration},hashShow:function(){var t=e(this),a=t.data(s),o=location.hash,n=a.$hashShow;o=o.slice(o.indexOf("#")+1),n.length>0&&(n.attr("id")===o?a.forceToggle="open":a.forceToggle="close")},applyCallback:function(){var e=this[0],t=e.data(s),a=this[1];"function"==typeof t[a]&&t[a]()},destroy:function(){var t=e(this),a=t.data(s);"undefined"!=typeof a&&(a.$expand.off(r).css({height:"","-ms-transition-duration":"","-webkit-transition-duration":"","transition-duration":""}),t.toggleClass(a.showClass,!1).off("."+s))}};e.fn[s]=function(e){return g[e]?g[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void 0:g.initialize.apply(this,arguments)}}(jQuery);