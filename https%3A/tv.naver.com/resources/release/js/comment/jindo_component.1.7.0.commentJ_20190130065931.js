!function(_namespace){var jsTags=document.getElementsByTagName("script"),jsTag=jsTags[jsTags.length-1];jsTag&&/[\?&]jindo=([^&]+)/.test(jsTag.src)&&(_namespace=RegExp.$1);var a,jindo=window[_namespace];jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this.constructor.getInstance().push(this),this._htEventHandler={},this._htOption={},this._htOption._htSetter={}},option:function(a,b){switch(typeof a){case"undefined":var c={};for(var d in this._htOption)"htCustomEventHandler"!=d&&"_htSetter"!=d&&(c[d]=this._htOption[d]);return c;case"string":if(void 0===b)return this._htOption[a];if("htCustomEventHandler"==a){if(void 0!==this._htOption[a])return this;this.attach(b)}this._htOption[a]=b,"function"==typeof this._htOption._htSetter[a]&&this._htOption._htSetter[a](b);break;case"object":for(var e in a){if("htCustomEventHandler"==e){if(void 0!==this._htOption[e])continue;this.attach(a[e])}"_htSetter"!==e&&(this._htOption[e]=a[e]),"function"==typeof this._htOption._htSetter[e]&&this._htOption._htSetter[e](a[e])}}return this},optionSetter:function(a,b){switch(typeof a){case"undefined":return this._htOption._htSetter;case"string":if(void 0===b)return this._htOption._htSetter[a];this._htOption._htSetter[a]=jindo.$Fn(b,this).bind();break;case"object":for(var c in a)this._htOption._htSetter[c]=jindo.$Fn(a[c],this).bind()}return this},fireEvent:function(a,b){b=b||{};var c=this["on"+a],d=this._htEventHandler[a]||[],e="function"==typeof c,f=0<d.length;if(!e&&!f)return!0;d=d.concat(),b.sType=a,void 0===b._aExtend&&(b._aExtend=[],b.stop=function(){0<b._aExtend.length&&(b._aExtend[b._aExtend.length-1].bCanceled=!0)}),b._aExtend.push({sType:a,bCanceled:!1});var h,i,j,g=[b];for(h=2,i=arguments.length;h<i;h++)g.push(arguments[h]);if(e&&c.apply(this,g),f)for(h=0;j=d[h];h++)j.apply(this,g);return!b._aExtend.pop().bCanceled},attach:function(a,b){if(1==arguments.length)return jindo.$H(a).forEach(jindo.$Fn(function(a,b){this.attach(b,a)},this).bind()),this;var c=this._htEventHandler[a];return void 0===c&&(c=this._htEventHandler[a]=[]),c.push(b),this},detach:function(a,b){if(1==arguments.length)return jindo.$H(a).forEach(jindo.$Fn(function(a,b){this.detach(b,a)},this).bind()),this;var c=this._htEventHandler[a];if(c)for(var e,d=0;e=c[d];d++)if(e===b){c=c.splice(d,1);break}return this},detachAll:function(a){var b=this._htEventHandler;if(arguments.length)return void 0===b[a]||delete b[a],this;for(var c in b)delete b[c];return this}}),jindo.Component.factory=function(a,b){var d,c=[];void 0===b&&(b={});for(var f,e=0;f=a[e];e++)d=new this(f,b),c[c.length]=d;return c},jindo.Component.getInstance=function(){return void 0===this._aInstance&&(this._aInstance=[]),this._aInstance},jindo.Component.VERSION="1.7.0",jindo.Effect=function(a){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var b=/^(\-?[0-9\.]+)(%|\w+)?$/,c=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,d=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,e=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,f=function(a){var g,f=a;if(b.test(a))f=parseFloat(a),g=RegExp.$2||"";else if(c.test(a))f=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],g="color";else{if(!d.test(a=a.replace(e,"#$1$1$2$2$3$3")))throw new Error("unit error");f=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)],g="color"}return{nValue:f,sUnit:g}};return function(b,c){var d;if(d=(1<arguments.length?(b=f(b),c=f(c)):(c=f(b),b=null),c.sUnit),b&&0===b.nValue&&!b.sUnit?d=b.sUnit=c.sUnit:b&&0===c.nValue&&!c.sUnit&&(d=c.sUnit=b.sUnit),b&&c&&b.sUnit!=c.sUnit)throw new Error("unit error");b=b&&b.nValue,c=c&&c.nValue;var e=function(e){var f=a(e),g=function(a,b){return(b-a)*f+a+d};if("color"!=d)return g(b,c);var h=Math.max(0,Math.min(255,parseInt(g(b[0],c[0]),10)))<<16;h|=Math.max(0,Math.min(255,parseInt(g(b[1],c[1]),10)))<<8,h=(h|=Math.max(0,Math.min(255,parseInt(g(b[2],c[2]),10)))).toString(16).toUpperCase();for(var i=0;6-h.length;i++)h="0"+h;return"#"+h};return null===b&&(e.setStart=function(a){if(0!==(a=f(a)).nValue&&a.sUnit!=d)throw new Error("unit error");b=a.nValue}),e}},jindo.Effect.linear=jindo.Effect(function(a){return a}),jindo.Effect.easeInSine=jindo.Effect(function(a){return 1==a?1:1-Math.cos(a*(Math.PI/2))}),jindo.Effect.easeOutSine=jindo.Effect(function(a){return Math.sin(a*(Math.PI/2))}),jindo.Effect.easeInOutSine=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInSine(0,1)(2*a):.5*jindo.Effect.easeOutSine(0,1)(2*a-1)+.5}),jindo.Effect.easeOutInSine=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeOutSine(0,1)(2*a):.5*jindo.Effect.easeInSine(0,1)(2*a-1)+.5}),jindo.Effect.easeInQuad=jindo.Effect(function(a){return a*a}),jindo.Effect.easeOutQuad=jindo.Effect(function(a){return-a*(a-2)}),jindo.Effect.easeInOutQuad=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInQuad(0,1)(2*a):.5*jindo.Effect.easeOutQuad(0,1)(2*a-1)+.5}),jindo.Effect.easeOutInQuad=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeOutQuad(0,1)(2*a):.5*jindo.Effect.easeInQuad(0,1)(2*a-1)+.5}),jindo.Effect.easeInCubic=jindo.Effect(function(a){return Math.pow(a,3)}),jindo.Effect.easeOutCubic=jindo.Effect(function(a){return Math.pow(a-1,3)+1}),jindo.Effect.easeInOutCubic=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeIn(0,1)(2*a):.5*jindo.Effect.easeOut(0,1)(2*a-1)+.5}),jindo.Effect.easeOutInCubic=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeOut(0,1)(2*a):.5*jindo.Effect.easeIn(0,1)(2*a-1)+.5}),jindo.Effect.easeInQuart=jindo.Effect(function(a){return Math.pow(a,4)}),jindo.Effect.easeOutQuart=jindo.Effect(function(a){return-(Math.pow(a-1,4)-1)}),jindo.Effect.easeInOutQuart=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInQuart(0,1)(2*a):.5*jindo.Effect.easeOutQuart(0,1)(2*a-1)+.5}),jindo.Effect.easeOutInQuart=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeOutQuart(0,1)(2*a):.5*jindo.Effect.easeInQuart(0,1)(2*a-1)+.5}),jindo.Effect.easeInQuint=jindo.Effect(function(a){return Math.pow(a,5)}),jindo.Effect.easeOutQuint=jindo.Effect(function(a){return Math.pow(a-1,5)+1}),jindo.Effect.easeInOutQuint=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInQuint(0,1)(2*a):.5*jindo.Effect.easeOutQuint(0,1)(2*a-1)+.5}),jindo.Effect.easeOutInQuint=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeOutQuint(0,1)(2*a):.5*jindo.Effect.easeInQuint(0,1)(2*a-1)+.5}),jindo.Effect.easeInCircle=jindo.Effect(function(a){return-(Math.sqrt(1-a*a)-1)}),jindo.Effect.easeOutCircle=jindo.Effect(function(a){return Math.sqrt(1-(a-1)*(a-1))}),jindo.Effect.easeInOutCircle=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInCircle(0,1)(2*a):.5*jindo.Effect.easeOutCircle(0,1)(2*a-1)+.5}),jindo.Effect.easeOutInCircle=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeOutCircle(0,1)(2*a):.5*jindo.Effect.easeInCircle(0,1)(2*a-1)+.5}),jindo.Effect.easeInBack=jindo.Effect(function(a){var b=1.70158;return 1==a?1:a/1*(a/1)*((1+b)*a-b)}),jindo.Effect.easeOutBack=jindo.Effect(function(a){var b=1.70158;return 0===a?0:(a=a/1-1)*a*((b+1)*a+b)+1}),jindo.Effect.easeInOutBack=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInBack(0,1)(2*a):.5*jindo.Effect.easeOutBack(0,1)(2*a-1)+.5}),jindo.Effect.easeInElastic=jindo.Effect(function(a){var b=0,c=0;return 0===a?0:1==(a/=1)?1:(b||(b=.3),!c||c<1?(c=1,b/4):b/(2*Math.PI)*Math.asin(1/c),-c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-1)*Math.PI/b))}),jindo.Effect.easeOutElastic=jindo.Effect(function(a){var d,b=0,c=0;return 0===a?0:1==(a/=1)?1:(b||(b=.3),d=!c||c<1?(c=1,b/4):b/(2*Math.PI)*Math.asin(1/c),c*Math.pow(2,-10*a)*Math.sin(2*(a-d)*Math.PI/b)+1)}),jindo.Effect.easeInOutElastic=jindo.Effect(function(a){var d,b=0,c=0;return 0===a?0:2==(a/=.5)?1:(b||(b=.3*1.5),d=!c||c<1?(c=1,b/4):b/(2*Math.PI)*Math.asin(1/c),a<1?-.5*c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-d)*Math.PI/b):c*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-d)*Math.PI/b)*.5+1)}),jindo.Effect.easeOutBounce=jindo.Effect(function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),jindo.Effect.easeInBounce=jindo.Effect(function(a){return 1-jindo.Effect.easeOutBounce(0,1)(1-a)}),jindo.Effect.easeInOutBounce=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInBounce(0,1)(2*a):.5*jindo.Effect.easeOutBounce(0,1)(2*a-1)+.5}),jindo.Effect.easeInExpo=jindo.Effect(function(a){return 0===a?0:Math.pow(2,10*(a-1))}),jindo.Effect.easeOutExpo=jindo.Effect(function(a){return 1==a?1:1-Math.pow(2,-10*a/1)}),jindo.Effect.easeInOutExpo=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeInExpo(0,1)(2*a):.5*jindo.Effect.easeOutExpo(0,1)(2*a-1)+.5}),jindo.Effect.easeOutInExpo=jindo.Effect(function(a){return a<.5?.5*jindo.Effect.easeOutExpo(0,1)(2*a):.5*jindo.Effect.easeInExpo(0,1)(2*a-1)+.5}),jindo.Effect._cubicBezier=function(a,b,c,d){return function(e){function l(a){return((h*a+g)*a+f)*a}function n(a){return(3*h*a+2*g)*a+f}var f=3*a,g=3*(c-a)-f,h=1-f-g,i=3*b,j=3*(d-b)-i,k=1-i-j;return function(a){return((k*a+j)*a+i)*a}(function(a,b){var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){if(f=l(e)-a,Math.abs(f)<b)return e;if(g=n(e),Math.abs(g)<1e-6)break;e-=f/g}if((e=a)<(c=0))return c;if((d=1)<e)return d;for(;c<d;){if(f=l(e),Math.abs(f-a)<b)return e;f<a?c=e:d=e,e=.5*(d-c)+c}return e}(e,.005))}},jindo.Effect.cubicBezier=function(a,b,c,d){var e=jindo.Effect(jindo.Effect._cubicBezier(a,b,c,d));return e.cubicBezier=[a,b,c,d],e},jindo.Effect.cubicEase=jindo.Effect.cubicBezier(.25,.1,.25,1),jindo.Effect.cubicEaseIn=jindo.Effect.cubicBezier(.42,0,1,1),jindo.Effect.cubicEaseOut=jindo.Effect.cubicBezier(0,0,.58,1),jindo.Effect.cubicEaseInOut=jindo.Effect.cubicBezier(.42,0,.58,1),jindo.Effect.cubicEaseOutIn=jindo.Effect.cubicBezier(0,.42,1,.58),jindo.Effect.overphase=jindo.Effect(function(a){return a/=.652785,(Math.sqrt((2-a)*a)+.1*a).toFixed(5)}),jindo.Effect.sinusoidal=jindo.Effect(function(a){return-Math.cos(a*Math.PI)/2+.5}),jindo.Effect.mirror=jindo.Effect(function(a){return a<.5?jindo.Effect.sinusoidal(0,1)(2*a):jindo.Effect.sinusoidal(0,1)(1-2*(a-.5))}),jindo.Effect.pulse=function(a){return jindo.Effect(function(b){return-Math.cos(b*(a-.5)*2*Math.PI)/2+.5})},jindo.Effect.wave=function(a,b){return jindo.Effect(function(c){return(b||1)*Math.sin(a*c*360*Math.PI/180).toFixed(5)})},jindo.Effect.easeIn=jindo.Effect.easeInCubic,jindo.Effect.easeOut=jindo.Effect.easeOutCubic,jindo.Effect.easeInOut=jindo.Effect.easeInOutCubic,jindo.Effect.easeOutIn=jindo.Effect.easeOutInCubic,jindo.Effect.bounce=jindo.Effect.easeOutBounce,jindo.Effect.elastic=jindo.Effect.easeInElastic,jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()||(this._bIsActivating=!0,0<arguments.length?this._onActivate.apply(this,arguments):this._onActivate()),this},deactivate:function(){return this.isActivating()&&(this._bIsActivating=!1,0<arguments.length?this._onDeactivate.apply(this,arguments):this._onDeactivate()),this}}).extend(jindo.Component),jindo.HTMLComponent=jindo.$Class({sTagName:"",$init:function(){},paint:function(){return this._onPaint(),this},_onActivate:function(){(this.constructor._aInstances=this.constructor._aInstances||[]).push(this)},_onDeactivate:function(){var a=this.constructor._aInstances||[],b=jindo.$A(a).indexOf(this);-1<b&&a.splice(b,1)}}).extend(jindo.UIComponent),jindo.HTMLComponent.paint=function(){for(var c,a=this._aInstances||[],b=0;c=a[b];b++)c.paint()},jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null,this._nLatest=null,this._nRemained=0,this._nDelay=null,this._fRun=null,this._bIsRunning=!1},start:function(a,b){return this.abort(),this._nRemained=0,this._nDelay=b,this._fRun=a,this._bIsRunning=!0,this._nLatest=this._getTime(),this.fireEvent("wait"),this._excute(this._nDelay,!1),!0},isRunning:function(){return this._bIsRunning},_getTime:function(){return(new Date).getTime()},_clearTimer:function(){var a=!1;return this._nTimer&&(clearTimeout(this._nTimer),a=!(this._bIsRunning=!1)),this._nTimer=null,a},abort:function(){return this._clearTimer(),!!this._fRun&&(this.fireEvent("abort"),!(this._fRun=null))},pause:function(){var a=this._getTime()-this._nLatest;return this._nRemained=Math.max(this._nDelay-a,0),this._clearTimer()},_excute:function(a,b){var c=this;this._clearTimer(),this._bIsRunning=!0;var d=function(a){if(c._fRun&&(c._nTimer||a)){c.fireEvent("run");var b=c._fRun();if(c._nLatest=c._getTime(),!b)return a||clearTimeout(c._nTimer),c._nTimer=null,c._bIsRunning=!1,void c.fireEvent("end");c.fireEvent("wait"),c._excute(c._nDelay,!1)}};-1<a?this._nTimer=setTimeout(d,a):d(!0)},resume:function(){return!(!this._fRun||this.isRunning())&&(this._bIsRunning=!0,this.fireEvent("wait"),this._excute(this._nRemained,!0),!(this._nRemained=0))}}).extend(jindo.Component),jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:!0,_bIsPlaying:!1,$init:function(a){this._aTaskQueue=[],this._oTimer=new jindo.Timer,this._oSleepTimer=new jindo.Timer,this.option({fEffect:jindo.Effect.linear,bCorrection:!1}),this.option(a||{})},fps:function(a){return 0<arguments.length?(this._nFPS=a,this):this._nFPS},isPlaying:function(){return this._bIsPlaying},abort:function(){return this._aTaskQueue=[],this._oTimer.abort(),this._oSleepTimer.abort(),this._bIsPlaying&&this.fireEvent("abort"),this._bIsWaiting=!0,this._bIsPlaying=!1,this._htTaskToDo=null,this},start:function(a,b,c){return 0<arguments.length&&this.queue.apply(this,arguments),this._prepareNextTask(),this},queue:function(a,b){var c;if("function"==typeof a)c={sType:"function",fTask:a};else{var d=[];if(b instanceof Array)d=b;else{var e=[];jindo.$A(arguments).forEach(function(a,b){0<b&&(e.push(a),b%2==0&&(d.push(e.concat()),e=[]))})}c={sType:"task",nDuration:a,aList:[]};for(var f=0,g=d.length;f<g;f++){var j,h=[],i=d[f][1];for(var k in i)j=i[k],/^(@|style\.)(\w+)/i.test(k)?h.push(["style",RegExp.$2,j]):h.push(["attr",k,j]);c.aList.push({elTarget:d[f][0],aValue:h})}}return this._queueTask(c),this},pause:function(){return this._oTimer.abort()&&this.fireEvent("pause"),this},resume:function(){if(this._htTaskToDo){!1===this._bIsWaiting&&!0===this._bIsPlaying&&this.fireEvent("resume"),this._doTask(),this._bIsWaiting=!1,this._bIsPlaying=!0;var a=this;this._oTimer.start(function(){var b=!a._doTask();return b&&(a._bIsWaiting=!0,setTimeout(function(){a._prepareNextTask()},0)),!b},this._htTaskToDo.nInterval)}return this},precede:function(a,b,c){return this.start.apply(this,arguments),this},sleep:function(a,b){return void 0===b&&(b=function(){}),this._queueTask({sType:"sleep",nDuration:a,fCallback:b}),this._prepareNextTask(),this},_queueTask:function(a){this._aTaskQueue.push(a)},_dequeueTask:function(){var a=this._aTaskQueue.shift();if(a){if("task"==a.sType)for(var b=a.aList,c=0,d=b.length;c<d;c++)for(var e=b[c].elTarget,f=null,g=0,h=b[c].aValue,i=h.length;g<i;g++){var j=h[g][0],k=h[g][1],l=h[g][2];if("function"!=typeof l){var m=this.option("fEffect");l=l instanceof Array?m(l[0],l[1]):m(l),h[g][2]=l}if(l.setStart)if(this._isHTMLElement(e))switch(f=f||jindo.$Element(e),j){case"style":l.setStart(f.css(k));break;case"attr":l.setStart(f.$value()[k])}else l.setStart(e.getter(k))}return a}return null},_prepareNextTask:function(){if(this._bIsWaiting){var a=this._dequeueTask();if(a)switch(a.sType){case"task":this._bIsPlaying||this.fireEvent("start");var b=1e3/this._nFPS,c=b/a.nDuration;this._htTaskToDo={aList:a.aList,nRatio:0,nInterval:b,nGap:c,nStep:0,nTotalStep:Math.ceil(a.nDuration/b)},this.resume();break;case"function":this._bIsPlaying||this.fireEvent("start"),a.fTask(),this._prepareNextTask();break;case"sleep":this._bIsPlaying&&(this.fireEvent("sleep",{nDuration:a.nDuration}),a.fCallback());var d=this;this._oSleepTimer.start(function(){d.fireEvent("awake"),d._prepareNextTask()},a.nDuration)}else this._bIsPlaying&&(this._bIsPlaying=!1,this.abort(),this.fireEvent("end"))}},_isHTMLElement:function(a){return"tagName"in a},_doTask:function(){for(var a=this._htTaskToDo,b=parseFloat(a.nRatio.toFixed(5),1),c=a.nStep,d=a.nTotalStep,e=a.aList,f={},g=this.option("bCorrection"),h=0,i=e.length;h<i;h++)for(var j=e[h].elTarget,k=null,l=0,m=e[h].aValue,n=m.length;l<n;l++){var o=m[l][0],p=m[l][1],q=m[l][2](b);if(this._isHTMLElement(j)){if(g){var r=/^\-?[0-9\.]+(%|[\w]+)?$/.test(q)&&RegExp.$1||"";if(r){var s=parseFloat(q);s+=f[p]||0,s=parseFloat(s.toFixed(5)),q=h==i-1?Math.round(s)+r:(f[p]=s-Math.floor(s),parseInt(s,10)+r)}}switch(k=k||jindo.$Element(j),o){case"style":k.css(p,q);break;case"attr":k.$value()[p]=q}}else j.setter(p,q);this._bIsPlaying&&this.fireEvent("playing",{element:j,sKey:p,sValue:q,nStep:c,nTotalStep:d})}return a.nRatio=Math.min(a.nRatio+a.nGap,1),a.nStep+=1,1!=b}}).extend(jindo.Component),jindo.RolloverArea=jindo.$Class({$init:function(el,htOption){this.option({sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:!0,bActivateOnload:!0,htStatus:{sOver:"over",sDown:"down"}}),this.option(htOption||{}),this._elArea=jindo.$(el),this._aOveredElements=[],this._aDownedElements=[],this._wfMouseOver=jindo.$Fn(this._onMouseOver,this),this._wfMouseOut=jindo.$Fn(this._onMouseOut,this),this._wfMouseDown=jindo.$Fn(this._onMouseDown,this),this._wfMouseUp=jindo.$Fn(this._onMouseUp,this),this.option("bActivateOnload")&&this.activate()},_addOvered:function(el){this._aOveredElements.push(el)},_removeOvered:function(el){this._aOveredElements.splice(jindo.$A(this._aOveredElements).indexOf(el),1)},_addStatus:function(el,sStatus){jindo.$Element(el).addClass(this.option("sClassPrefix")+sStatus)},_removeStatus:function(el,sStatus){jindo.$Element(el).removeClass(this.option("sClassPrefix")+sStatus)},_isInnerElement:function(elParent,elChild){return elParent===elChild||jindo.$Element(elParent).isParentOf(elChild)},_onActivate:function(){jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._elArea).preventTapHighlight(!0),this._wfMouseOver.attach(this._elArea,"mouseover"),this._wfMouseOut.attach(this._elArea,"mouseout"),this.option("bCheckMouseDown")&&(this._wfMouseDown.attach(this._elArea,"mousedown"),this._wfMouseUp.attach(document,"mouseup"))},_onDeactivate:function(){jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this._elArea).preventTapHighlight(!1),this._wfMouseOver.detach(this._elArea,"mouseover"),this._wfMouseOut.detach(this._elArea,"mouseout"),this._wfMouseDown.detach(this._elArea,"mousedown"),this._wfMouseUp.detach(document,"mouseup"),this._aOveredElements.length=0,this._aDownedElements.length=0},_findRollover:function(el){var sClassName=this.option("sClassName");return jindo.$$.test(el,"."+sClassName)?el:jindo.$$.getSingle("! ."+sClassName,el)},_onMouseOver:function(we){for(var htParam,el=we.element,elRelated=we.relatedElement;el=this._findRollover(el);el=el.parentNode)elRelated&&this._isInnerElement(el,elRelated)||(this._addOvered(el),htParam={element:el,htStatus:this.option("htStatus"),weEvent:we},this.fireEvent("over",htParam)&&this._addStatus(htParam.element,htParam.htStatus.sOver))},_onMouseOut:function(we){for(var htParam,el=we.element,elRelated=we.relatedElement;el=this._findRollover(el);el=el.parentNode)elRelated&&this._isInnerElement(el,elRelated)||(this._removeOvered(el),htParam={element:el,htStatus:this.option("htStatus"),weEvent:we},this.fireEvent("out",htParam)&&this._removeStatus(htParam.element,htParam.htStatus.sOver))},_onMouseDown:function(we){for(var htParam,el=we.element;el=this._findRollover(el);)htParam={element:el,htStatus:this.option("htStatus"),weEvent:we},this._aDownedElements.push(el),this.fireEvent("down",htParam)&&this._addStatus(htParam.element,htParam.htStatus.sDown),el=el.parentNode},_onMouseUp:function(we){var htParam,elMouseDown,i,el=we.element,aTargetElementDatas=[],aDownedElements=this._aDownedElements;for(i=0;elMouseDown=aDownedElements[i];i++)aTargetElementDatas.push({element:elMouseDown,htStatus:this.option("htStatus"),weEvent:we});for(;el=this._findRollover(el);el=el.parentNode)-1<jindo.$A(aDownedElements).indexOf(el)||aTargetElementDatas.push({element:el,htStatus:this.option("htStatus"),weEvent:we});for(i=0;htParam=aTargetElementDatas[i];i++)this.fireEvent("up",htParam)&&this._removeStatus(htParam.element,htParam.htStatus.sDown);this._aDownedElements=[]}}).extend(jindo.UIComponent),jindo.LayerManager=jindo.$Class({_bIsActivating:!1,_bIsHiding:!1,_bIsShowing:!1,_aLink:null,$init:function(el,htOption){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100}),this.option(htOption||{}),this.setLayer(el),this._aLink=[],this._oShowTimer=new jindo.Timer,this._oHideTimer=new jindo.Timer,this._oEventTimer=new jindo.Timer,this._wfOnEvent=jindo.$Fn(this._onEvent,this),this.getVisible(),this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._wel.visible()},_check:function(el){for(var elLink,welLink,wel=jindo.$Element(el),i=0;elLink=this._aLink[i];i++)if((welLink=jindo.$Element(elLink))&&(elLink=welLink.$value())&&(el==elLink||wel.isChildOf(elLink)))return!0;return!1},_find:function(el){for(var elLink,i=0;elLink=this._aLink[i];i++)if(elLink==el)return i;return-1},getLayer:function(){return this._el},setLayer:function(el){return this._el=jindo.$(el),this._wel=jindo.$Element(el),this},getLinks:function(){return this._aLink},setLinks:function(a){return this._aLink=jindo.$A(a).unique().$value(),this},link:function(vElement){if(1<arguments.length){for(var i=0,len=arguments.length;i<len;i++)this.link(arguments[i]);return this}return-1!=this._find(vElement)||this._aLink.push(vElement),this},unlink:function(vElement){if(1<arguments.length){for(var i=0,len=arguments.length;i<len;i++)this.unlink(arguments[i]);return this}var nIndex=this._find(vElement);return-1<nIndex&&this._aLink.splice(nIndex,1),this},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this._bIsShowing=!1,this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventBeforeHide:function(){var bRet=this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()});return bRet||(this._bIsHiding=!1),bRet},_fireEventHide:function(){this._bIsHiding=!1,this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_show:function(fShow,nDelay){this._oEventTimer.abort(),this._bIsShowing=!0,this._bIsHiding=!1,0<nDelay?this._oShowTimer.start(fShow,nDelay):(this._oHideTimer.abort(),fShow())},_hide:function(fHide,nDelay){this._bIsShowing=!1,this._bIsHiding=!0,0<nDelay?this._oHideTimer.start(fHide,nDelay):(this._oShowTimer.abort(),fHide())},show:function(nDelay){void 0===nDelay&&(nDelay=this.option("nShowDelay"));var self=this;return this._show(function(){self.getVisible()||self._fireEventBeforeShow()&&(self._wel.show(),self._fireEventShow())},nDelay),this},hide:function(nDelay){void 0===nDelay&&(nDelay=this.option("nHideDelay"));var self=this;return this._hide(function(){self.getVisible()&&self._fireEventBeforeHide()&&(self._wel.hide(),self._fireEventHide())},nDelay),this},toggle:function(nDelay){return!this.getVisible()||this._bIsHiding?this.show(nDelay||this.option("nShowDelay")):this.hide(nDelay||this.option("nHideDelay")),this},_onEvent:function(we){var el=we.element,self=this;this._oEventTimer.start(function(){!self._bIsHiding&&self.getVisible()&&(self._check(el)?self._bIsShowing||(self.fireEvent("ignore",{sCheckEvent:self.option("sCheckEvent")}),self._oHideTimer.abort(),self._bIsHiding=!1):void 0!==el.tagName&&self.hide())},this.option("nCheckDelay"))}}).extend(jindo.UIComponent),jindo.LayerPosition=jindo.$Class({$init:function(el,elLayer,htOption){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:!1}),this.option(htOption||{}),this.setElement(el),elLayer&&this.setLayer(elLayer),el&&elLayer&&this.setPosition(),this._wfSetPosition=jindo.$Fn(function(){var el=this._elLayer;el&&this._welLayer.visible()&&this.fireEvent("beforeAdjust",{elLayer:el,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})&&(this.setPosition(),this.fireEvent("adjust",{elLayer:el,htCurrentPosition:this.getCurrentPosition()}))},this),this.option("bAuto")&&this._wfSetPosition.attach(window,"scroll").attach(window,"resize")},getElement:function(){return this._el},setElement:function(el){return this._wel=this._el=jindo.$(el),this._el&&(this._wel=jindo.$Element(el)),this},getLayer:function(){return this._elLayer},setLayer:function(elLayer){return this._elLayer=jindo.$(elLayer),this._welLayer=jindo.$Element(elLayer),this._elLayer.parentNode!=document.body&&document.body.appendChild(this._elLayer),this},_isPosition:function(htOption,sWord){return-1<htOption.sPosition.indexOf(sWord)},_setLeftRight:function(htOption,htPosition){var el=this.getElement(),elLayer=this.getLayer(),nWidth=el.offsetWidth,nLayerWidth=elLayer.offsetWidth;el==document.body&&(nWidth=jindo.$Document().clientSize().width);var bLeft=this._isPosition(htOption,"left"),bRight=this._isPosition(htOption,"right"),bInside=this._isPosition(htOption,"inside");return bLeft?bInside?htPosition.nLeft+=htOption.nLeft:(htPosition.nLeft-=nLayerWidth,htPosition.nLeft-=htOption.nLeft):bRight?(htPosition.nLeft+=nWidth,bInside?(htPosition.nLeft-=nLayerWidth,htPosition.nLeft-=htOption.nLeft):htPosition.nLeft+=htOption.nLeft):("left"==htOption.sAlign&&(htPosition.nLeft+=htOption.nLeft),"center"==htOption.sAlign&&(htPosition.nLeft+=(nWidth-nLayerWidth)/2),"right"==htOption.sAlign&&(htPosition.nLeft+=nWidth-nLayerWidth,htPosition.nLeft-=htOption.nLeft)),htPosition},_setVerticalAlign:function(htOption,htPosition){var el=this.getElement(),elLayer=this.getLayer(),nHeight=el.offsetHeight,nLayerHeight=elLayer.offsetHeight;switch(el==document.body&&(nHeight=jindo.$Document().clientSize().height),htOption.sValign){case"top":htPosition.nTop+=htOption.nTop;break;case"middle":htPosition.nTop+=(nHeight-nLayerHeight)/2;break;case"bottom":htPosition.nTop+=nHeight-nLayerHeight-htOption.nTop}return htPosition},_adjustScrollPosition:function(htPosition){if(this.getElement()==document.body){var htScrollPosition=jindo.$Document().scrollPosition();htPosition.nTop+=htScrollPosition.top,htPosition.nLeft+=htScrollPosition.left}return htPosition},getPosition:function(htOption){"object"!=typeof htOption&&(htOption=this.option()),void 0===htOption.nTop&&(htOption.nTop=0),void 0===htOption.nLeft&&(htOption.nLeft=0);var sArea,bCenter=this._isPosition(htOption,"center"),bInside=this._isPosition(htOption,"inside"),bTop=this._isPosition(htOption,"top"),bBottom=this._isPosition(htOption,"bottom");this._isPosition(htOption,"left")&&(sArea="left"),this._isPosition(htOption,"right")&&(sArea="right"),bTop&&(sArea="top"),bBottom&&(sArea="bottom"),bCenter&&(sArea="center");var oClientSize,el=this.getElement(),wel=jindo.$Element(el),elLayer=this.getLayer(),welLayer=jindo.$Element(elLayer),htElementPosition=wel.offset(),nWidth=el.offsetWidth,nHeight=el.offsetHeight,nLayerWidth=elLayer.offsetWidth,nLayerHeight=elLayer.offsetHeight,htPosition={nTop:htElementPosition.top,nLeft:htElementPosition.left};switch(el==document.body&&(nWidth=(oClientSize=jindo.$Document().clientSize()).width,nHeight=oClientSize.height),nLayerWidth+=parseInt(welLayer.css("marginLeft"),10)+parseInt(welLayer.css("marginRight"),10)||0,nLayerHeight+=parseInt(welLayer.css("marginTop"),10)+parseInt(welLayer.css("marginBottom"),10)||0,sArea){case"center":htPosition.nTop+=(nHeight-nLayerHeight)/2,htPosition.nTop+=htOption.nTop,htPosition.nLeft+=(nWidth-nLayerWidth)/2,htPosition.nLeft+=htOption.nLeft;break;case"top":bInside?htPosition.nTop+=htOption.nTop:htPosition.nTop-=htOption.nTop+nLayerHeight,htPosition=this._setLeftRight(htOption,htPosition);break;case"bottom":htPosition.nTop+=nHeight,bInside?htPosition.nTop-=htOption.nTop+nLayerHeight:htPosition.nTop+=htOption.nTop,htPosition=this._setLeftRight(htOption,htPosition);break;case"left":bInside?htPosition.nLeft+=htOption.nLeft:htPosition.nLeft-=htOption.nLeft+nLayerWidth,htPosition=this._setVerticalAlign(htOption,htPosition);break;case"right":htPosition.nLeft+=nWidth,bInside?htPosition.nLeft-=htOption.nLeft+nLayerWidth:htPosition.nLeft+=htOption.nLeft,htPosition=this._setVerticalAlign(htOption,htPosition)}if(htPosition=this._adjustScrollPosition(htPosition),jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version<8&&window.external)try{window!=top&&window.frameElement&&!window.frameElement.frameBorder&&(htPosition.nLeft-=2,htPosition.nTop-=2)}catch(e){}return htPosition},setPosition:function(htPosition){var welLayer=jindo.$Element(this.getLayer()),bVisible=welLayer.visible();return bVisible||welLayer.show(),welLayer.css("left","-9999px").css("top","0px"),void 0===htPosition&&(htPosition=this.getPosition()),this.option("bAuto")&&(htPosition=this._adjustPosition(htPosition)),welLayer.css("left",htPosition.nLeft+"px").css("top",htPosition.nTop+"px"),bVisible||welLayer.hide(),this},getCurrentPosition:function(){var welLayer=jindo.$Element(this.getLayer());return{nTop:parseInt(welLayer.css("top"),10),nLeft:parseInt(welLayer.css("left"),10)}},_isFullyVisible:function(htPosition){var elLayer=this.getLayer(),welLayer=jindo.$Element(elLayer),oScrollPosition=jindo.$Document().scrollPosition(),nScrollTop=oScrollPosition.top,nScrollLeft=oScrollPosition.left,oClientSize=jindo.$Document().clientSize(),nLayerWidth=elLayer.offsetWidth+(parseInt(welLayer.css("marginLeft"),10)+parseInt(welLayer.css("marginRight"),10)||0),nLayerHeight=elLayer.offsetHeight+(parseInt(welLayer.css("marginTop"),10)+parseInt(welLayer.css("marginBottom"),10)||0);return 0<=htPosition.nLeft&&0<=htPosition.nTop&&oClientSize.width>=htPosition.nLeft-nScrollLeft+nLayerWidth&&oClientSize.height>=htPosition.nTop-nScrollTop+nLayerHeight},_mirrorHorizontal:function(htOption){if("center"==htOption.sAlign||"inside-center"==htOption.sPosition)return htOption;var htConvertedOption={};for(var i in htOption)htConvertedOption[i]=htOption[i];return this._isPosition(htConvertedOption,"right")?htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/right/,"left"):this._isPosition(htConvertedOption,"left")?htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/left/,"right"):"right"==htConvertedOption.sAlign?htConvertedOption.sAlign="left":"left"==htConvertedOption.sAlign&&(htConvertedOption.sAlign="right"),htConvertedOption},_mirrorVertical:function(htOption){if("middle"==htOption.sValign||"inside-center"==htOption.sPosition)return htOption;var htConvertedOption={};for(var i in htOption)htConvertedOption[i]=htOption[i];return this._isPosition(htConvertedOption,"top")?htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/top/,"bottom"):this._isPosition(htConvertedOption,"bottom")?htConvertedOption.sPosition=htConvertedOption.sPosition.replace(/bottom/,"top"):"top"==htConvertedOption.sValign?htConvertedOption.sValign="bottom":"bottom"==htConvertedOption.sValign&&(htConvertedOption.sValign="top"),htConvertedOption},_adjustPosition:function(htPosition){var htOption=this.option(),aCandidatePosition=[];aCandidatePosition.push(htPosition),aCandidatePosition.push(this.getPosition(this._mirrorHorizontal(htOption))),aCandidatePosition.push(this.getPosition(this._mirrorVertical(htOption))),aCandidatePosition.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(htOption))));for(var htCandidatePosition,i=0;htCandidatePosition=aCandidatePosition[i];i++)if(this._isFullyVisible(htCandidatePosition)){htPosition=htCandidatePosition;break}return htPosition}}).extend(jindo.Component),jindo.RolloverClick=jindo.$Class({$init:function(el,htOption){this.option({bActivateOnload:!0,sCheckEvent:"click",bCheckDblClick:!1,RolloverArea:{sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:!1,bActivateOnload:!1,htStatus:{sOver:"over",sDown:"down"}}}),this.option(htOption||{});var self=this;this._oRolloverArea=new jindo.RolloverArea(el,this.option("RolloverArea")).attach({over:function(oCustomEvent){self.fireEvent("over",oCustomEvent)||oCustomEvent.stop()},out:function(oCustomEvent){self.fireEvent("out",oCustomEvent)||oCustomEvent.stop()}}),this._wfClick=jindo.$Fn(this._onClick,this),this._wfDblClick=jindo.$Fn(this._onClick,this),this.option("bActivateOnload")&&this.activate()},_onClick:function(we){var elRollover=we.element,sType="click";for("dblclick"==we.type&&(sType=we.type);elRollover=this._oRolloverArea._findRollover(elRollover);)this.fireEvent(sType,{element:elRollover,htStatus:this._oRolloverArea.option("htStatus"),weEvent:we}),elRollover=elRollover.parentNode},_onActivate:function(){this._wfClick.attach(this._oRolloverArea._elArea,this.option("sCheckEvent")),this.option("bCheckDblClick")&&this._wfDblClick.attach(this._oRolloverArea._elArea,"dblclick"),this._oRolloverArea.activate()},_onDeactivate:function(){this._wfClick.detach(this._oRolloverArea._elArea,this.option("sCheckEvent")),this._wfDblClick.detach(this._oRolloverArea._elArea,"dblclick"),this._oRolloverArea.deactivate()}}).extend(jindo.UIComponent),jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:!0,_bIsPlaying:!1,$init:function(htOption){this._aTaskQueue=[],this._oTimer=new jindo.Timer,this._oSleepTimer=new jindo.Timer,this.option({fEffect:jindo.Effect.linear,bCorrection:!1}),this.option(htOption||{})},fps:function(nFPS){return 0<arguments.length?(this._nFPS=nFPS,this):this._nFPS},isPlaying:function(){return this._bIsPlaying},abort:function(){return this._aTaskQueue=[],this._oTimer.abort(),this._oSleepTimer.abort(),this._bIsPlaying&&this.fireEvent("abort"),this._bIsWaiting=!0,this._bIsPlaying=!1,this._htTaskToDo=null,this},start:function(nDuration,elTarget,htInfo){return 0<arguments.length&&this.queue.apply(this,arguments),this._prepareNextTask(),this},queue:function(nDuration,aCommand){var htTask;if("function"==typeof nDuration)htTask={sType:"function",fTask:nDuration};else{var a=[];if(aCommand instanceof Array)a=aCommand;else{var aInner=[];jindo.$A(arguments).forEach(function(v,i){0<i&&(aInner.push(v),i%2==0&&(a.push(aInner.concat()),aInner=[]))})}htTask={sType:"task",nDuration:nDuration,aList:[]};for(var i=0,nLen=a.length;i<nLen;i++){var sEnd,aValue=[],htArg=a[i][1];for(var sKey in htArg)sEnd=htArg[sKey],/^(@|style\.)(\w+)/i.test(sKey)?aValue.push(["style",RegExp.$2,sEnd]):aValue.push(["attr",sKey,sEnd]);htTask.aList.push({elTarget:a[i][0],aValue:aValue})}}return this._queueTask(htTask),this},pause:function(){return this._oTimer.abort()&&this.fireEvent("pause"),this},resume:function(){if(this._htTaskToDo){!1===this._bIsWaiting&&!0===this._bIsPlaying&&this.fireEvent("resume"),this._doTask(),this._bIsWaiting=!1,this._bIsPlaying=!0;var self=this;this._oTimer.start(function(){var bEnd=!self._doTask();return bEnd&&(self._bIsWaiting=!0,setTimeout(function(){self._prepareNextTask()},0)),!bEnd},this._htTaskToDo.nInterval)}return this},precede:function(nDuration,elTarget,htInfo){return this.start.apply(this,arguments),this},sleep:function(nDuration,fCallback){return void 0===fCallback&&(fCallback=function(){}),this._queueTask({sType:"sleep",nDuration:nDuration,fCallback:fCallback}),this._prepareNextTask(),this},_queueTask:function(v){this._aTaskQueue.push(v)},_dequeueTask:function(){var htTask=this._aTaskQueue.shift();if(htTask){if("task"==htTask.sType)for(var aList=htTask.aList,i=0,nLength=aList.length;i<nLength;i++)for(var elTarget=aList[i].elTarget,welTarget=null,j=0,aValue=aList[i].aValue,nJLen=aValue.length;j<nJLen;j++){var sType=aValue[j][0],sKey=aValue[j][1],fFunc=aValue[j][2];if("function"!=typeof fFunc){var fEffect=this.option("fEffect");fFunc=fFunc instanceof Array?fEffect(fFunc[0],fFunc[1]):fEffect(fFunc),aValue[j][2]=fFunc}if(fFunc.setStart)if(this._isHTMLElement(elTarget))switch(welTarget=welTarget||jindo.$Element(elTarget),sType){case"style":fFunc.setStart(welTarget.css(sKey));break;case"attr":fFunc.setStart(welTarget.$value()[sKey])}else fFunc.setStart(elTarget.getter(sKey))}return htTask}return null},_prepareNextTask:function(){if(this._bIsWaiting){var htTask=this._dequeueTask();if(htTask)switch(htTask.sType){case"task":this._bIsPlaying||this.fireEvent("start");var nInterval=1e3/this._nFPS,nGap=nInterval/htTask.nDuration;this._htTaskToDo={aList:htTask.aList,nRatio:0,nInterval:nInterval,nGap:nGap,nStep:0,nTotalStep:Math.ceil(htTask.nDuration/nInterval)},this.resume();break;case"function":this._bIsPlaying||this.fireEvent("start"),htTask.fTask(),this._prepareNextTask();break;case"sleep":this._bIsPlaying&&(this.fireEvent("sleep",{nDuration:htTask.nDuration}),htTask.fCallback());var self=this;this._oSleepTimer.start(function(){self.fireEvent("awake"),self._prepareNextTask()},htTask.nDuration)}else this._bIsPlaying&&(this._bIsPlaying=!1,this.abort(),this.fireEvent("end"))}},_isHTMLElement:function(el){return"tagName"in el},_doTask:function(){for(var htTaskToDo=this._htTaskToDo,nRatio=parseFloat(htTaskToDo.nRatio.toFixed(5),1),nStep=htTaskToDo.nStep,nTotalStep=htTaskToDo.nTotalStep,aList=htTaskToDo.aList,htCorrection={},bCorrection=this.option("bCorrection"),i=0,nLength=aList.length;i<nLength;i++)for(var elTarget=aList[i].elTarget,welTarget=null,j=0,aValue=aList[i].aValue,nJLen=aValue.length;j<nJLen;j++){var sType=aValue[j][0],sKey=aValue[j][1],sValue=aValue[j][2](nRatio);if(this._isHTMLElement(elTarget)){if(bCorrection){var sUnit=/^\-?[0-9\.]+(%|px|pt|em)?$/.test(sValue)&&RegExp.$1||"";if(sUnit){var nValue=parseFloat(sValue);nValue+=htCorrection[sKey]||0,nValue=parseFloat(nValue.toFixed(5)),sValue=i==nLength-1?Math.round(nValue)+sUnit:(htCorrection[sKey]=nValue-Math.floor(nValue),parseInt(nValue,10)+sUnit)}}switch(welTarget=welTarget||jindo.$Element(elTarget),sType){case"style":welTarget.css(sKey,sValue);break;case"attr":welTarget.$value()[sKey]=sValue}}else elTarget.setter(sKey,sValue);this._bIsPlaying&&this.fireEvent("playing",{element:elTarget,sKey:sKey,sValue:sValue,nStep:nStep,nTotalStep:nTotalStep})}return htTaskToDo.nRatio=Math.min(htTaskToDo.nRatio+htTaskToDo.nGap,1),htTaskToDo.nStep+=1,1!=nRatio}}).extend(jindo.Component),jindo.SelectBox=jindo.$Class({sTagName:"select",_bDisabled:!1,_sPrevValue:null,_nSelectedIndex:0,_bRealFocused:!1,$init:function(el,htOption){this._aItemData=[],this._aListItem=[],this._aOptions=[],this.option({sClassPrefix:"selectbox-",nWidth:null,nHeight:null,bUseLayerPosition:!0,aOptionHTML:[],aOptionLabel:[],LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0},LayerManager:{sCheckEvent:"mousedown",nShowDelay:20,nHideDelay:0}}),this.option(htOption||{}),this._el=jindo.$(el),this._assignHTMLElements(),this.option("bUseLayerPosition")&&this._initLayerPosition(),this._initLayerManager(),this._initRolloverClick(),this._oTimer=new jindo.Timer,this._wfOnFocusSelect=jindo.$Fn(this._onFocusSelect,this),this._wfOnBlurSelect=jindo.$Fn(this._onBlurSelect,this),this._wfOnMouseDownBox=jindo.$Fn(this._onMouseDownBox,this),this._wfOnMouseDownList=jindo.$Fn(this._onMouseDownList,this),this._wfOnKeyDown=jindo.$Fn(this._onKeyDown,this),this._wfOnMouseWheel=jindo.$Fn(function(e){e.stop(jindo.$Event.CANCEL_DEFAULT),this._elLayer.scrollTop-=16*e.mouse().delta},this),this._oAgent=jindo.$Agent(),this.activate()},_assignHTMLElements:function(){var sPrefix=this.option("sClassPrefix"),el=this._el;this._wel=jindo.$Element(el),this._elSelect=jindo.$$.getSingle("select."+sPrefix+"source",el),this._sSelectInnerHTML=this._elSelect.innerHTML,this._elOptionDefault=jindo.$$.getSingle("option."+sPrefix+"default",el),this._elSelectOptionGroup=jindo.$$.getSingle("select."+sPrefix+"source-option-group",el),this._elBox=jindo.$$.getSingle("."+sPrefix+"box",el),this._elLabel=jindo.$$.getSingle("."+sPrefix+"label",el),this._elLayer=jindo.$$.getSingle("."+sPrefix+"layer",el),this._elList=jindo.$$.getSingle("."+sPrefix+"list",el),this._elList.innerHTML="",this._elSelectList=jindo.$("<ul>"),this._elList.insertBefore(this._elSelectList,this._elList.firstChild)},getSelectElement:function(){return this._elSelect},getBoxElement:function(){return this._elBox},getLabelElement:function(){return this._elLabel},getLayerElement:function(){return this._elLayer},getListElement:function(){return this._elList},getSelectListElement:function(){return this._elSelectList},_limitWidth:function(){var nWidth=this.option("nWidth");nWidth&&(jindo.$Element(this.getBoxElement()).css({width:nWidth+"px",overflowX:"hidden"}),jindo.$Element(this.getLayerElement()).css({width:nWidth+"px",overflowX:"hidden",overflowY:"auto"}))},_limitHeight:function(){var nHeight=this.option("nHeight");if(nHeight){var nLayerHeight,welLayer=jindo.$Element(this.getLayerElement()),elToMeasure=welLayer.$value().cloneNode(!0),welToMeasure=jindo.$Element(elToMeasure);welToMeasure.opacity(0),welLayer.after(welToMeasure),welToMeasure.show(),nLayerHeight=welToMeasure.height(),welToMeasure.leave(),nHeight<nLayerHeight&&welLayer.css({height:nHeight+"px",overflowX:"hidden",overflowY:"auto"})}},_initLayerManager:function(){var self=this,sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._oLayerManager=new jindo.LayerManager(this.getLayerElement(),this.option("LayerManager")).attach({beforeShow:function(oCustomEvent){self.fireEvent("open")?(self._limitWidth(),self._limitHeight(),setTimeout(function(){try{elSelect.focus()}catch(e){}},10),self._wel.addClass(sPrefix+"open"),self.option("bUseLayerPosition")&&self.getLayerPosition().setPosition()):oCustomEvent.stop()},show:function(oCustomEvent){self._paintSelected()},beforeHide:function(oCustomEvent){self.fireEvent("close")?(self._wel.removeClass(sPrefix+"open").removeClass(sPrefix+"focused"),setTimeout(function(){self.getSelectElement().blur()},10)):(oCustomEvent.stop(),setTimeout(function(){try{elSelect.focus()}catch(e){}},10))}}).link(this.getBoxElement()).link(this.getLayerElement())},getLayerManager:function(){return this._oLayerManager},_initRolloverClick:function(){var self=this,sPrefix=this.option("sClassPrefix");this._oRolloverClick=new jindo.RolloverClick(this.getSelectListElement(),{sCheckEvent:"mouseup",RolloverArea:{sClassName:sPrefix+"item",sClassPrefix:sPrefix+"item-"}}).attach({over:function(oCustomEvent){self._welOvered&&self._welOvered.removeClass(sPrefix+"item-over");var wel=jindo.$Element(oCustomEvent.element);wel.addClass(sPrefix+"item-over"),self._welOvered=wel},out:function(oCustomEvent){oCustomEvent.stop()},click:function(oCustomEvent){var nLastSelectedIndex=self._nSelectedIndex,nSelectedIndex=-1;jindo.$A(self._aItemData).forEach(function(htData,nIndex){htData.elItem===oCustomEvent.element&&(nSelectedIndex=nIndex,jindo.$A.Break())}),self.fireEvent("click",{nIndex:nSelectedIndex,weEvent:oCustomEvent.weEvent})&&(-1!==nSelectedIndex&&self.setValue(self._aItemData[nSelectedIndex].sValue),(nSelectedIndex=self.getSelectedIndex())!=nLastSelectedIndex&&(jindo.$Element(self.getSelectElement()).fireEvent("change"),self.fireEvent("change",{nIndex:nSelectedIndex,nLastIndex:nLastSelectedIndex})),jindo.$Element(oCustomEvent.element).hasClass(sPrefix+"notclose")||self.getLayerManager().hide())}})},getRolloverClick:function(){return this._oRolloverClick},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(this.getBoxElement(),this.getLayerElement(),this.option("LayerPosition"))},getLayerPosition:function(){return this._oLayerPosition},_onActivate:function(){var sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._limitWidth(),this._wel.removeClass(sPrefix+"noscript"),jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this.getListElement()).preventTapHighlight(!0),this._wfOnFocusSelect.attach(elSelect,"focus"),this._wfOnBlurSelect.attach(elSelect,"blur"),this._wfOnMouseDownBox.attach(this.getBoxElement(),"mousedown"),this._wfOnMouseDownList.attach(this.getListElement(),"mousedown"),this._wfOnKeyDown.attach(elSelect,"keydown"),this._wfOnMouseWheel.attach(elSelect,"mousewheel"),this.paint(),this._sPrevValue=this.getValue()},_onDeactivate:function(){this.getLayerManager().hide();var sPrefix=this.option("sClassPrefix"),elSelect=this.getSelectElement();this._wel.addClass(sPrefix+"noscript"),jindo.$Element.prototype.preventTapHighlight&&jindo.$Element(this.getListElement()).preventTapHighlight(!1),this._wfOnFocusSelect.detach(elSelect,"focus"),this._wfOnBlurSelect.detach(elSelect,"blur"),this._wfOnMouseDownBox.detach(this.getBoxElement(),"mousedown"),this._wfOnMouseDownList.detach(this.getListElement(),"mousedown"),this._wfOnKeyDown.detach(elSelect,"keydown"),this._wfOnMouseWheel.detach(elSelect,"mousewheel")},getValueOf:function(sText){for(var oItemData,i=0;oItemData=this._aItemData[i];i++)if(oItemData.sText==sText)return oItemData.sValue;return null},getValue:function(){return this.getSelectElement().value},getText:function(){return this._aItemData[this._nSelectedIndex].sText},getHTML:function(){return this.getLabelElement().innerHTML},setValue:function(sValue){this.getSelectElement().value=sValue,this._sPrevValue=this.getValue(),this._paint()},getSelectedIndex:function(){return this.getSelectElement().selectedIndex},setSelectedIndex:function(nIndex,bFireEvent){if(void 0===bFireEvent&&(bFireEvent=!0),this._isSelectable(nIndex)){var nLastSelectedIndex=this.getSelectedIndex();return this._setSelectedIndex(nIndex),this._paint(),bFireEvent&&nLastSelectedIndex!=nIndex&&this.fireEvent("change",{nIndex:nIndex,nLastIndex:nLastSelectedIndex}),!0}return!1},_setSelectedIndex:function(nIndex){this.getSelectElement().selectedIndex=nIndex},_isSelectable:function(nIndex){var htItem=this._aItemData[nIndex];return!(!htItem||htItem.bDisabled||htItem.bDefault)},getOptions:function(){return this._aOptions},getListItems:function(){return this._aListItem},getDisabled:function(){return this._bDisabled},setOptionGroup:function(sName){if(!this._elSelectOptionGroup||!this._elOptionDefault)return!1;var elSelect=this.getSelectElement(),sPrefix=this.option("sClassPrefix"),aGroupOption=jindo.$$("."+sPrefix+"option-group-"+sName,this._elSelectOptionGroup),elOptionDefault=this._elOptionDefault=this._elOptionDefault.cloneNode(!0);elSelect.innerHTML="",elSelect.appendChild(elOptionDefault);for(var i=this._nSelectedIndex=0;i<aGroupOption.length;i++)elSelect.appendChild(aGroupOption[i].cloneNode(!0));return this._sPrevValue=this.getValue(),this.paint(),!0},isSelected:function(){return!this._aItemData[this.getSelectedIndex()].bDefault},setDefault:function(){var nDefaultOption=-1;jindo.$A(this._aItemData).forEach(function(o,i){(o.bDefault||o.bSelected)&&(nDefaultOption=i)}),nDefaultOption<0&&(nDefaultOption=0),this._nSelectedIndex=nDefaultOption,this._setSelectedIndex(nDefaultOption),this._sPrevValue=this.getValue(),this._paint()},paint:function(){this._paintList(),this._paintSelected(),this._paintLabel(),this.getLayerManager().setLayer(this.getLayerElement())},_paint:function(){this._paintSelected(),this._paintLabel()},_paintLabel:function(){var welLabel=jindo.$Element(this.getLabelElement()),sHTML=this.option("aOptionHTML")[this._nSelectedIndex]||"",sLabel=this.option("aOptionLabel")[this._nSelectedIndex]||"",sText=this.getText();sHTML?sLabel?welLabel.html(sLabel):welLabel.html(sHTML):welLabel.text(sText),welLabel.attr("unselectable","on")},_paintList:function(){var sPrefix=this.option("sClassPrefix");this._aOptions=jindo.$$("option",this.getSelectElement());var aOptions=this._aOptions;this._aItemData=[],this._aListItem=[],this._nSelectedIndex=0;var elList=this.getSelectListElement();elList.innerHTML="",this.option("nHeight")&&jindo.$Element(this.getLayerElement()).css("height","auto");for(var elOption,i=0;elOption=aOptions[i];i++){var welOption=jindo.$Element(elOption),bDefault=welOption.hasClass(sPrefix+"default"),bSelected="selected"==welOption.attr("selected"),bDisabled=bDefault||elOption.disabled,sHTML=this.option("aOptionHTML")[i]||"",sText=welOption.text()||"",sValue=welOption.attr("value");sValue||(welOption.attr("value",sText),sValue=sText),this._aItemData[i]={elOption:elOption,elItem:null,sHTML:sHTML,sText:sText,sValue:sValue,bDisabled:bDisabled,bSelected:bSelected,bDefault:bDefault};var elItem=null,htItem=this._aItemData[i];if(!htItem.bDefault){(elItem=jindo.$("<li>")).style.cssText=htItem.elOption.style.cssText,elItem.className=htItem.elOption.className;var welItem=jindo.$Element(elItem);htItem.sHTML?welItem.html(htItem.sHTML):welItem.text(htItem.sText),welItem.attr("unselectable","on"),htItem.bDisabled?welItem.addClass(sPrefix+"item-disabled"):welItem.addClass(sPrefix+"item"),elList.appendChild(elItem),this._aListItem.push(elItem),this._aItemData[i].elItem=elItem}}0!==this._aListItem.length?this.enable():this.disable()},_paintSelected:function(){var htItem,sPrefix=this.option("sClassPrefix"),n=this.getSelectedIndex(),nPrevSelectedIndex=this._nSelectedIndex;if(this._welSelected&&(this._welSelected.removeClass(sPrefix+"item-selected"),this._welSelected=null),this._welOvered&&(this._welOvered.removeClass(sPrefix+"item-over"),this._welOvered=null),this._nSelectedIndex=n,(htItem=this._aItemData[n]).elItem){var elSelected=htItem.elItem,welSelected=jindo.$Element(elSelected);if(this._welSelected=this._welOvered=welSelected,welSelected.addClass(sPrefix+"item-selected").addClass(sPrefix+"item-over"),this.isLayerOpened()){var bDown,elLayerElement=this.getLayerElement(),nHeight=parseInt(jindo.$Element(elLayerElement).css("height"),10),nOffsetTop=elSelected.offsetTop,nOffsetHeight=elSelected.offsetHeight,nScrollTop=elLayerElement.scrollTop;bDown=nPrevSelectedIndex<n,(nOffsetTop<nScrollTop||nScrollTop+nHeight<nOffsetTop)&&(elLayerElement.scrollTop=nOffsetTop),bDown?nHeight+nScrollTop<nOffsetTop+nOffsetHeight&&(elLayerElement.scrollTop=nOffsetTop+nOffsetHeight-nHeight):nOffsetTop<nScrollTop&&(elLayerElement.scrollTop=nOffsetTop)}}},isLayerOpened:function(){return this.getLayerManager().getVisible()},disable:function(){this.getLayerManager().hide();var sPrefix=this.option("sClassPrefix");this._wel.addClass(sPrefix+"disabled"),this.getSelectElement().disabled=!0,this._bDisabled=!0},enable:function(){var sPrefix=this.option("sClassPrefix");this._wel.removeClass(sPrefix+"disabled"),this.getSelectElement().disabled=!1,this._bDisabled=!1},open:function(){return this._bDisabled||this.getLayerManager().show(),this},close:function(){return this.getLayerManager().hide(),this},_onMouseDownBox:function(we){we.stop(jindo.$Event.CANCEL_DEFAULT),this._bDisabled||this.getLayerManager().toggle()},_onMouseDownList:function(we){jindo.$$.getSingle("! ."+this.option("sClassPrefix")+"notclose",we.element)||we.stop(jindo.$Event.CANCEL_DEFAULT)},_getSelectableIndex:function(nIndex,nDirection,nTargetIndex){var i,nFirst=-1,nLast=this._aItemData.length-1;for(i=0;i<this._aItemData.length;i++)this._isSelectable(i)&&(nFirst<0?nFirst=i:nLast=i);switch(nDirection){case-1:if(nIndex==nFirst)return nIndex;for(i=nIndex-1;nFirst<i;i--)if(this._isSelectable(i))return i;return nFirst;case 1:if(nIndex==nLast)return nIndex;for(i=nIndex+1;i<nLast;i++)if(this._isSelectable(i))return i;return nLast;case 1/0:return nLast;case-1/0:return nFirst}},_onKeyDown:function(we){var htKey=we.key();if(this._oAgent.os().mac&&this._oAgent.navigator().safari||this._oAgent.navigator().ie&&6==this._oAgent.navigator().version){var nKeyCode=htKey.keyCode;9!=nKeyCode&&we.stop(jindo.$Event.CANCEL_DEFAULT);var nSelectedIndex=this.getSelectedIndex(),nTargetIndex=nSelectedIndex;switch(nKeyCode){case 37:case 38:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-1);break;case 39:case 40:nTargetIndex=this._getSelectableIndex(nSelectedIndex,1);break;case 33:nTargetIndex=this._getSelectableIndex(nSelectedIndex,-1/0);break;case 34:nTargetIndex=this._getSelectableIndex(nSelectedIndex,1/0);break;case 13:case 9:this.getLayerManager().hide()}var oParam={nIndex:nTargetIndex,nLastIndex:parseInt(this._nSelectedIndex,10)};this._setSelectedIndex(nTargetIndex),this._paint(),oParam.nIndex!=oParam.nLastIndex&&this.fireEvent("change",oParam)}else this.isLayerOpened()&&(htKey.enter||9==htKey.keyCode)&&this.getLayerManager().hide()},_onFocusSelect:function(we){var sPrefix=this.option("sClassPrefix"),wel=this._wel;if(!this.isLayerOpened()){if(!this.fireEvent("focus"))return void this.getSelectElement().blur();this._bRealFocused=!0}if(wel.addClass(sPrefix+"focused"),!this._oAgent.os().mac||!this._oAgent.navigator().safari){var self=this;this._oTimer.start(function(){var sValue=self.getValue();if(self._sPrevValue&&self._sPrevValue!=sValue){var nSelectedIndex=self.getSelectElement().selectedIndex;if(!self._isSelectable(nSelectedIndex)){var nDiff=-(self._nSelectedIndex-nSelectedIndex);return nDiff=0<nDiff?1:-1,self._setSelectedIndex(self._getSelectableIndex(self._nSelectedIndex,nDiff,nSelectedIndex)),!0}var oParam={nIndex:nSelectedIndex,nLastIndex:parseInt(self._nSelectedIndex,10)};self._paint(),oParam.nIndex!=oParam.nLastIndex&&self.fireEvent("change",oParam),self._sPrevValue=sValue}return!0},10)}},_onBlurSelect:function(we){var self=this,sPrefix=this.option("sClassPrefix");this._bRealFocused&&(this.fireEvent("blur"),this._wel.removeClass(sPrefix+"focused"),this._bRealFocused=!1),setTimeout(function(){self._oTimer.abort()},10)}}).extend(jindo.HTMLComponent),a=jindo.$Element.prototype.css,jindo.$Element.prototype.css=function(c,d){return"opacity"==c?void 0!==d?this.opacity(parseFloat(d)):this.opacity():void 0!==d?a.call(this,c,d):a.call(this,c)}}("commentJ");