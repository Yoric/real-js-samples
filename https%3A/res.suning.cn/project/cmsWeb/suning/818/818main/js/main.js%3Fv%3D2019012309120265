(function(){Util={turn:function(a,c,b){a.find("a").hover(function(){$(this).find(".image1").stop().animate(b[0],c,function(){$(this).hide().next().show();$(this).next().animate(b[1],c)})},function(){$(this).find(".info").animate(b[0],c,function(){$(this).hide().prev().show();$(this).prev().animate(b[1],c)})})},getEnv:function(d){var f=/^(\w*)(pre)(.*)(\.cnsuning\.com)$/;var e=/^(\w*)(sit)(.*)(\.cnsuning\.com)$/;if(f.test(d)){return"pre"}else{if(e.test(d)){return"sit"}}return"prd"},setCookie:function(h,g,f){var e=new Date();e.setTime(e.getTime()+f*24*60*60*1000);document.cookie=h+"="+escape(g)+";expires="+e},getCookie:function(a){var b;return(b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)")))?decodeURIComponent(b[2].replace(/\+/g,"%20")):null},getAjax:function(d,e){var c=$.Deferred();$.ajax({cache:false,type:"GET",url:d,dataType:"jsonp",jsonpCallback:e,success:function(b){c.resolve(b)},error:function(){c.reject()}});var a=c.promise();return a},loadScript:function(b,c){var a=document.createElement("script");a.type="text/javascript";if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;c()}}}else{a.onload=function(){c()}}a.src=b;document.getElementsByTagName("head")[0].appendChild(a)},baoguangFun:function(a){if(typeof _analyseExpoTags=="function"){_analyseExpoTags("a",a)}else{setTimeout(function(){Util.baoguangFun(a)},2000)}},judgeProType:function(a){if(a.productType&&(a.productType==3||a.productType==5)){return a.supplierCode}else{return a.vendorCode}},getUrl:function(c,e){var a="";if(c.trickPoint&&c.trickPoint.length>0){a="?srcPoint="+c.trickPoint}if(c.linkUrl&&c.linkUrl!==""){if(c.linkUrl.indexOf("//")!=-1){return c.linkUrl+a}else{return"//"+c.linkUrl+a}}else{var b=Util.judgeProType(c),d=c.partNumber,f=sn.productDomain;if(f.substring(f.length-1)!="/"){f=f+"/"}if(e!==null){if(b&&b.length>0){return f+b+"/"+d+".html?src="+e}else{return f+d+".html?src="+e}}else{if(b&&b.length>0){return f+b+"/"+d+".html"+a}else{return f+d+".html"+a}}}},getPic:function(d){var e=sn.imgHost;if(e.substring(e.length-1)!="/"){e=e+"/"}if(d.picUrl&&d.picUrl!==""){return e+d.picUrl}else{var b="",a="1",c="200x200";if(e){b="uimg/b2c/newcatentries/"}if(d.vendorCode&&d.vendorCode.length>0){return e+b+d.vendorCode+"-"+d.partNumber+"_"+a+"_"+c+".jpg"}return e+"/b2c/catentries/"+d.partNumber+"_"+a+"_"+c+".jpg"}},getPicQrqm:function(c,b){var a=sn.imgHost;if(a.substring(a.length-1)!="/"){a=a+"/"}if(c.picUrl&&c.picUrl!==""){return a+c.picUrl}else{if(a){j="uimg/b2c/qrqm/"}if(c.vendorCode&&c.vendorCode.length>0){return a+j+c.vendorCode+c.partNumber+"_"+b+".jpg?ver="+c.ver}return a+"/b2c/qrqm/"+c.partNumber+"_"+b+".jpg?ver="+c.ver}},getSku:function(i,h){var l=i.partNumber+"|1|";var k="";var f=i.linkType;var g=i.vendorCode;if(f&&f!="1"){if(f=="2"){k="4|"}else{if(f=="3"){k="5|"}else{if(f=="4"){k="6|"}else{if(f=="5"){k="7|"}else{if(f=="6"){k="8|"}else{if(f=="7"){k="9|"}}}}}}}else{if(g&&g!==""){if(g=="0000000000"){k="3|"}else{k="2|"+i.vendorCode}}else{k="|"}}if(h){return l+k}else{return'data-sku="'+l+k+'"'}}};main={priceDOM:[],refPrice:[],juDom:[],timeOffset:0,getPriceFlag:false,getCurrent:false,getJuFlag:false,isRollOver:false,yuyueIndex:0,yudingIndex:0,judgeDomain:function(){var a=SFE.base.getEnv();switch(a){case"PRD":sn.tuijianDomain="//tuijian.suning.com";break;case"PREXG":sn.tuijianDomain="//tuijianxgpre.cnsuning.com";break;default:sn.tuijianDomain="//tuijian.suning.com";break}},cookieGet:function(){var c=Util.getCookie("custno");if(typeof c!==undefined&&c){main.userId=c}main.userId=main.userId!==undefined?main.userId:"";var d=Util.getCookie("_snma");if(typeof d!==undefined&&d){main.cookieId=d.split("|")[1]}main.cookieId=main.cookieId?main.cookieId:"";main.cityId=Util.getCookie("SN_CITY")?Util.getCookie("SN_CITY").split("_")[1]:"025";main.provinceId=Util.getCookie("SN_CITY")?Util.getCookie("SN_CITY").split("_")[0]:"100";main.districtId=Util.getCookie("districtId")?Util.getCookie("districtId"):""},floatBar:function(){var f={contents:null,align:"right",vertical:"middle",zIndex:7500,css:null,id:null,ieFixed:true};var h=($.browser.msie)?parseInt($.browser.version):false;if(arguments.length<1||!(arguments[0] instanceof Object)){return $.error("ECode.floatBar: 参数必须为JSON对象")}$.extend(f,arguments[0]);var b={position:"fixed",top:"-9999em",left:"-9999em"};if(h&&h<=6){b.position="absolute"}$('<div class="ECode-floatBar"></div>').css(b).appendTo("body");var i=$("body").find(".ECode-floatBar:last");i.append(f.contents);var e=i.width(),a=i.height(),g={zIndex:f.zIndex};var c=screen.width;if(f.id!==null){i.attr("id",f.id)}switch(f.align){case"right":g.left="auto";g.right="5px";break;case"left":g.left="auto";break;case"center":g.right="auto";g.left="50%";break}switch(f.vertical){case"top":g.top=0;break;case"bottom":g.top="auto";g.bottom=0;break;case"middle":g.top="50px";if(h&&h<=6){g.marginTop=0}break}i.css($.extend(g,f.css));var d=function(){var m=$(document).scrollTop(),n=$(window).height(),o=$(document).width();switch(f.vertical){case"top":i.stop().animate({top:m});break;case"bottom":var l=n+m-a;if(f.css.marginBottom!==null){var k=parseInt(f.css.marginBottom);if(k>=0){l-=k}}i.css({marginTop:0}).stop().animate({top:l});break;case"middle":i.stop().animate({top:n/2+m-a/2});break}};if(f.ieFixed&&h&&h<=6){d();$(window).scroll(function(){d()});$(window).resize(function(){d()})}},floatBarFunc:function(){var b=$(".ECode-floatBar");if(b.length===0){return}function a(){var c=parseInt($(document).scrollTop());if(c>300){b.show()}else{b.hide()}}a();$(window).scroll(function(){a()}).resize(function(){a()})},getpricecallback:function(e){for(var b=0;b<e.length;b++){if(e[b]){var o=0;var c=0;var g=0;var a=0;var q=0;var f=0;var d=e[b].priceType.substr(0,1);var p=e[b].status;if(e[b].price){c=e[b].price}if(e[b].snPrice){g=e[b].snPrice}if(e[b].refPrice){o=e[b].refPrice}if(e[b].vipPrice||e[b].marketVipPrice){a=e[b].marketVipPrice||e[b].vipPrice}if(e[b].bookPrice){q=parseFloat(e[b].bookPrice).toString()}if(e[b].bookPriceSwell){f=parseFloat(e[b].bookPriceSwell).toString()}if(a&&a!==""&&main.priceDOM[0].hasClass("v-good")){main.priceDOM[0].find(".member-price").children("em").html(a);if(parseInt(a)>=parseInt(c)){main.priceDOM[0].find(".price").hide()}}else{main.priceDOM[0].find(".member-price").html("SUPER活动已结束")}if(q&&main.priceDOM[0].parents(".g-book")){if(f){main.priceDOM[0].find(".good-tip").html("定金"+q+"抵"+f)}else{main.priceDOM[0].find(".good-tip").html("定金"+q)}}if(parseFloat(c)<=0){main.priceDOM[0].find(".price").children("em").html("售罄");main.priceDOM[0].find(".price").children("i").remove();if(main.priceDOM[0].find(".price-high")){main.priceDOM[0].find(".price-high").remove()}if(main.priceDOM[0].find(".layer")){main.priceDOM[0].addClass("sale-out");main.priceDOM[0].find(".qiang").html("已抢光")}if(main.priceDOM[0].hasClass("v-good")){main.priceDOM[0].find(".member-price").html("售罄");main.priceDOM[0].find(".price").hide()}}else{if(parseFloat(o)<=0){if(c!=g&&parseFloat(c)<parseFloat(g)){o=g;if(o.indexOf(".")==-1){o+=".00"}}else{o=0}}else{if(o==g&&c==g){o=0}else{if(o.indexOf(".")==-1){o+=".00"}}}if((parseFloat(o)!==0||parseFloat(o)!=="")&&parseFloat(o)>parseFloat(c)){main.priceDOM[0].find(".price-high").children("em").html(o)}else{main.priceDOM[0].find(".price-high").remove()}if(c.indexOf(".")==-1){c+=".00"}main.priceDOM[0].find(".price").children("em").html(c)}}else{main.priceDOM[0].find(".price").children("em").html("售罄");main.priceDOM[0].find(".price").children("i").remove();if(main.priceDOM[0].find(".price-high")){main.priceDOM[0].find(".price-high").remove()}if(main.priceDOM[0].find(".layer")){main.priceDOM[0].addClass("sale-out");main.priceDOM[0].find(".qiang").html("已抢光")}if(main.priceDOM[0].hasClass("v-good")){main.priceDOM[0].find(".member-price").html("售罄");main.priceDOM[0].find(".price").hide()}}main.priceDOM.shift()}if(main.priceDOM.length>0){GetPrice.queryprice(main.priceDOM,"1",main.getpricecallback)}else{main.getPriceFlag=false}},yuyueGet:function(a){var c=$(a),b=c.find(".comm-item");lazyelem.listen($(a).find("li[data-sku]"),"fn",function(d){main.priceDOM.push(d);if(main.getPriceFlag){return}main.getPriceFlag=true;GetPrice.queryprice(main.priceDOM,"1",main.getpricecallback);lazyelem.detect()});if(c.hasClass("col-4")){if(!c.hasClass("g-book")){main.yuyueIndex+=1;b.each(function(){var h="",g="",m="",k="",n="",q=$(this),f=parseInt(q.index(c.find(".comm-item"))/5),d=q.index(c.find(".comm-item"))%5,l=b.size(),z,p;if(d===0){z=f*5+5>l?l:f*5+5;for(var o=f*5;o<z;o++){p=$(b[o]);if(p.attr("data-activityId")&&p.attr("data-activityId")!==""){if(o==f){for(var e=p.attr("data-partNumber").length;e<18;e++){m+="0"}m+=p.attr("data-partNumber");h+=p.attr("data-activityId");g+=p.attr("data-vendorId");k+="0";n+="P0"+o}else{m+=",";for(var e=p.attr("data-partNumber").length;e<18;e++){m+="0"}m+=p.attr("data-partNumber");h+=","+p.attr("data-activityId");g+=","+p.attr("data-vendorId");k+=",0";n+=",P0"+o}}}$.ajax({cache:false,url:sn.yushouDomain+"/jsonp/appoint/queryBatchActionInfo-"+m+"-"+g+"-"+h+"-main.getYuYueInfor.htm",type:"get",dataType:"jsonp",jsonpCallback:"getyuyue"+main.yuyueIndex,success:function(i){}});$.ajax({cache:false,url:sn.yushouDomain+"/jsonp/appoint/getGoodsPropList-"+m+"-"+g+"-"+h+"-"+k+"-"+n+"-main.getYuYueNumber.htm",type:"get",dataType:"jsonp",jsonpCallback:"getyuyue"+main.yuyueIndex,success:function(i){}})}})}else{main.yudingIndex+=1;b.each(function(){var h="",g="",m="",k="",n="",q=$(this),f=parseInt(q.index(c.find(".comm-item"))/5),d=q.index(c.find(".comm-item"))%5,l=b.size(),z,p;if(d===0){z=f*5+5>l?l:f*5+5;for(var o=f*5;o<z;o++){p=$(b[o]);if(p.attr("data-activityId")&&p.attr("data-activityId")!==""){if(o==f*5){for(var e=p.attr("data-partNumber").length;e<18;e++){m+="0"}m+=p.attr("data-partNumber");h+=p.attr("data-activityId");g+=p.attr("data-vendorId");k+="0";n+="P0"+o}else{m+=",";for(var e=p.attr("data-partNumber").length;e<18;e++){m+="0"}m+=p.attr("data-partNumber");h+=","+p.attr("data-activityId");g+=","+p.attr("data-vendorId");k+=",0";n+=",P0"+o}}}$.ajax({cache:false,url:sn.yushouDomain+"/book/outerIntf/getBatchBookActionPrice-"+h+"-"+m+"-"+g+"-main.getYuDingInfor.htm",type:"get",dataType:"jsonp",jsonpCallback:"getyuding"+main.yudingIndex,success:function(i){}});$.ajax({cache:false,url:sn.yushouDomain+"/book/outerIntf/getBatchBookedNumber-"+m+"-"+g+"-main.getYuDingNumber.htm",type:"get",dataType:"jsonp",jsonpCallback:"getyuding"+main.yudingIndex,success:function(i){}})}})}}else{return}},getYuYueInfor:function(a){var b=a;$.ajax({cache:false,url:"//f.m.suning.com/api/ct.do",type:"get",dataType:"jsonp",success:function(d){var c=d.currentTime;if(d!==""&&b[0]){var f=b[0].partNumber;var e=b.length;$(".g-appoint .comm-item").each(function(){var g=$(this),m=("000000000"+g.attr("data-partNumber")).slice(-18),l=d.currentTime,k=g.index(".g-appoint .comm-item"),h;if(m==f){h=k+e;for(var q=k;q<h;q++){main.yuyueWrite(b[q-k],l,q)}}})}}})},yuyueWrite:function(a,b,e){var f=$(".g-appoint .comm-item").eq(e),c=a.scheduleEndTime,d=(c-b)/1000;if(!a||!a.adapteTerminal||a.adapteTerminal==2){f.find(".price").html("");f.find(".good-txt").html("");f.find(".order-btn").addClass("grey").html("预约结束")}else{f.find(".bottom").html(main.formatTime(a.purchaseStartTime))}if(d<1){f.find(".price").html("");f.find(".good-txt").html("");f.find(".order-btn").addClass("grey").html("预约结束")}},formatTime:function(a){var b=new Date(a);var e=b.getMonth()+1;var c=b.getDate();return e+"月"+c+"日开抢"},formatTime1:function(a){var b=new Date(a);var e=b.getMonth()+1;var c=b.getDate();return e+"月"+c+"日付尾款"},getYuYueNumber:function(a){var b=$(".g-appoint .comm-item"),d=a.length,c=a[0].partnumber;b.each(function(){var e=$(this),h=("000000000"+e.attr("data-partNumber")).slice(-18),g=e.index(".g-appoint .comm-item"),f;if(h==c){f=g+d;for(var k=g;k<f;k++){b.eq(k).find(".good-txt").html("已预约"+a[k-g].appointNum+"人")}return false}})},getYuDingInfor:function(a){var b=a;$.ajax({cache:false,url:"//f.m.suning.com/api/ct.do",type:"get",dataType:"jsonp",success:function(d){var c=d.currentTime;if(d&&d!==""&&d!==null&&b){var g=b.actionInfos.length,f;for(var e=0;e<g;e++){if(b.actionInfos[e]){f=b.actionInfos[e].bookActionId;$(".floor-buy .comm-item").each(function(){var q=$(this),m=q.attr("data-activityId"),l=d.currentTime,k=q.index(".floor-buy .comm-item"),h=$(".floor-buy .comm-item").size(),i;if(m==f){main.yudingWrite(b,l,e,k)}})}}}}})},yudingWrite:function(c,h,g,d){var e=$(".floor-buy .comm-item").eq(d),f=c.actionInfos[g],a=f.depositEndTime,b=(a-h)/1000;if(!f||!f.adapteTerminal||f.adapteTerminal==2){e.find(".price").html("");e.find(".good-txt").html("");e.find(".order-btn").addClass("grey").html("预定结束")}else{e.find(".bottom").html(main.formatTime1(f.balanceStartTime))}if(b<1){e.find(".price").html("");e.find(".good-txt").html("");e.find(".order-btn").addClass("grey").html("预定结束")}},getYuDingNumber:function(a){if(!a){return}var b=$(".floor-buy .comm-item"),e=a.length,c;for(var d=0;d<e;d++){if(a[d]!==null){c=a[d].actionId;b.each(function(){var g=$(this),f=g.attr("data-activityId");if(f==c){g.find(".good-txt").html("已预定"+a[d].bookedNum+"件")}})}}},boom:function(b){switch(Util.getEnv(document.location.hostname)){case"pre":boomDomain="//pcsslabelpre.cnsuning.com";break;case"sit":boomDomain="//pcsssit.service.cnsuning.com";break;case"prd":boomDomain="//plmslabel.suning.cn";break;default:boomDomain="//plmslabel.suning.cn"}var a=[];var c=b.find(".comm-item");c.each(function(h,n){var m=$(n).attr("data-partnumber"),g=$(n).attr("data-vendorid"),l="";for(var k=m.length;k<18;k++){l+="0"}m=l+m;var o=g+"-"+m+"-PC-"+main.cityId+"-15";a.push(o)});var e=a.join(",");var f="labelsCallback"+new Date().getTime(),d=boomDomain+"/pcss-web/label/poplabels/"+e+"_"+f+".jsonp";$.ajax({url:d,dataType:"JSONP",cache:true,jsonpCallback:f,success:function(k){for(var h=0;h<k.length;h++){var i=k[h].labelList,m="";if(k[h]&&k[h].labelList){for(var g=0;g<k[h].labelList.length;g++){var l=k[h].labelList[g].labelPath;if(l.indexOf("http")==0){l=l.substring(5)}else{if(l.indexOf("https")==0){l=l.substring(6)}}m+='<img src="'+l+'" class="boom-tag'+k[h].labelList[g].labelPlace+'"/>'}}c.eq(h).find("a").append(m)}}})},picError:function(b){var a=$(b).attr("data-part"),c=$(b).attr("data-vendor");if(c!=""&&a!=""){$(b).attr("src","//image.suning.cn/uimg/b2c/newcatentries/"+c+"-"+a+"_1_200x200.jpg")}},sideInit:function(){if($(".side-bar")&&$(".side-bar").find(".cate-wrap").length>0){var c=$(".side-bar").height();$(".side-bar").css({top:"50%",marginTop:-(c/2)});main.renderColor();$(window).scroll(function(){if($(window).scrollTop()>300){$(".side-bar").show()}else{$(".side-bar").hide()}})}else{if(($(".side-bar").find("div").length==0)&&$("#leftSide")&&$("#leftSide").length>0&&$("#leftSide").attr("name")&&$("#leftSide").attr("name").length>0){var a=$("#leftSide").attr("name"),e="cmsCallback111",d="//lib.suning.com/api/jsonp/cb/"+a+"-"+e+".jsonp";Util.getAjax(d,e).done(function(f){if(f&&f.length>0){$.each(f,function(l,o){if(o.img_top||o.mid_words||o.img_bot){var n="";if(o.img_top&&o.img_top.tag&&o.img_top.tag.length>0){n+='<div class="top-img"><a href="'+o.img_top.tag[0].linkUrl+'" title="" target="_blank"><img src="'+(sn.imgHost+o.img_top.tag[0].picUrl)+'" alt=""></a></div>'}if(o.mid_words&&o.mid_words.nodes.length>0){for(var m=0;m<o.mid_words.nodes.length;m++){if(o.mid_words.nodes[m].tag&&o.mid_words.nodes[m].tag.length>0){n+='<div class="cate-wrap"><ul class="clearfix">';for(var k=0;k<o.mid_words.nodes[m].tag.length;k++){var h=o.mid_words.nodes[m].tag[k].linkUrl;if(k==0){if(h!=""){n+='<li class="first" data-color="'+o.mid_words.nodes[m].tag[k].color+'"><a name="'+o.mid_words.nodes[m].tag[k].trickPoint+'" href="'+h+'" title="" target="_blank">'+o.mid_words.nodes[m].tag[k].elementName+"</a></li>"}else{n+='<li class="first" data-color="'+o.mid_words.nodes[m].tag[k].color+'"><a name="'+o.mid_words.nodes[m].tag[k].trickPoint+'"  title="" target="_blank">'+o.mid_words.nodes[m].tag[k].elementName+"</a></li>"}}else{if(h!=""){n+='<li><a name="'+o.mid_words.nodes[m].tag[k].trickPoint+'" href="'+h+'" title="" target="_blank">'+o.mid_words.nodes[m].tag[k].elementName+"</a></li>"}else{n+='<li><a name="'+o.mid_words.nodes[m].tag[k].trickPoint+'" title="" target="_blank">'+o.mid_words.nodes[m].tag[k].elementName+"</a></li>"}}}n+="</ul></div>"}}}if(o.img_bot&&o.img_bot.tag&&o.img_bot.tag.length>0){n+='<div class="bot-img"><img src="'+(sn.imgHost+o.img_bot.tag[0].picUrl)+'" alt=""></div>'}$(".side-bar").append(n);$(window).scroll(function(){if($(window).scrollTop()>300){$(".side-bar").show()}else{$(".side-bar").hide()}});main.renderColor();var g=$(".side-bar").height();$(".side-bar").css({top:"50%",marginTop:-(g/2)})}})}}).fail(function(f){console.log(f)})}}var b=true;$(".bot-img").live("click",function(){$(this).parent(".side-bar").animate({marginLeft:"-128px"});$(".more-activity").animate({marginLeft:"0"})});$(".more-activity").find("p").live("click",function(){$(".side-bar").animate({marginLeft:"0"});$(".more-activity").animate({marginLeft:"-40px"})})},rank:function(){$(".rank-floor li").each(function(){var a=$(this);main.priceDOM.push(a);if(main.getPriceFlag){return}main.getPriceFlag=true;GetPrice.queryprice(main.priceDOM,"1",main.getpricecallback)})},currentTimeOffset:function(b){var c="//f.m.suning.com/api/ct.do";var a=$.Deferred();if(!main.getCurrent){main.getCurrent=true;$.ajax({url:c,type:"get",dataType:"jsonp",timeout:2000,success:function(d){var e=new Date().getTime();main.timeOffset=e-d.currentTime;a.resolve(main.timeOffset)},error:function(){var d=0;a.reject(d)}})}else{a.resolve(main.timeOffset)}return a.promise()},countDown:function(a){main.currentTimeOffset().done(function(k){var l=k;if(a.hasClass("timedown-wrap")){var i=a.find(".day"),g=a.find(".hour"),e=a.find(".min"),n=a.find(".sec");var c=new Date(a.find(".time-panel2").attr("data-start")).getTime(),f=new Date(a.find(".time-panel2").attr("data-end")).getTime(),b;setInterval(function(){var m=new Date(new Date().getTime()+l).getTime();if(m<c){b=(c-m)/1000;a.find("span").html("距活动开始还剩")}else{if(c<=m&&m<=f){b=(f-m)/1000;a.find("span").html("距活动结束还剩")}else{if(m>f){b=0}}}if(b>0){var h=Math.floor(b/(24*3600))<10?"0"+Math.floor(b/(24*3600)):Math.floor(b/(24*3600)),d=parseInt(b/3600%24)<10?"0"+parseInt(b/3600%24):parseInt(b/3600%24),o=parseInt(b/60%60)<10?"0"+parseInt(b/60%60):parseInt(b/60%60),p=parseInt(b%60)<10?"0"+parseInt(b%60):parseInt(b%60);if(h>0){i.html("").html(h)}else{i.siblings("i").hide();i.hide()}g.html("").html(d);e.html("").html(o);n.html("").html(p)}else{a.hide()}},1000)}else{a.find(".time-panel").each(function(t,v){var u=$(v),t=t,r=u.find(".hour"),p=u.find(".min"),w=u.find(".sec");var o=new Date(a.find(".tab-nav li").eq(t).find("a").attr("data-start")).getTime(),q=new Date(a.find(".tab-nav li").eq(t).find("a").attr("data-end")).getTime(),d;setInterval(function(){var s=new Date(new Date().getTime()+l).getTime();if(s<o){d=(o-s)/1000;u.find("span").html("距离开始还剩")}else{if(o<=s&&s<=q){d=(q-s)/1000;u.find("span").html("距离结束还剩")}else{if(s>q){d=0}}}if(d>0){var m=Math.floor(d/(24*3600))<10?"0"+Math.floor(d/(24*3600)):Math.floor(d/(24*3600)),h=parseInt(d/3600%24)<10?"0"+parseInt(d/3600%24):parseInt(d/3600%24),x=parseInt(d/60%60)<10?"0"+parseInt(d/60%60):parseInt(d/60%60),y=parseInt(d%60)<10?"0"+parseInt(d%60):parseInt(d%60);r.html("").html(h);p.html("").html(x);w.html("").html(y)}else{u.find(".time-info").html("已结束")}},1000)})}}).fail(function(){a.hide()})},tabSwitch:function(c,i){var b,l=c.container,d=c.tabNav,a=c.tabCont,k=c.contClassName,g=c.index||0;d.eq(g).addClass("current");d.eq(g).find("img")?d.eq(g).find("img").attr("src",d.eq(g).find("img").attr("d-src")):"";a.eq(g).show().siblings("."+k).hide();if(l.hasClass("quan-tab")){a.eq(0).attr("getState",true);main.getQuanState(a.eq(0));main.getQuan(a.eq(0))}if(l.hasClass("tab-switch2")&&(!d.eq(0).attr("data-get"))){var f=d.eq(0).attr("data-param");if(f){i(l,0,f)}}if(l.hasClass("tab-switch3")){var h=l.find("input").attr("value"),e=l.find("input").attr("name")}if(l.hasClass("rec-twenty-tab")&&(!d.eq(0).attr("data-get"))){i(l,0)}d.on("mouseenter",function(){var n=$(this),m=n.index();b=setTimeout(function(){if(n.hasClass("current")){return}else{for(var o=0;o<d.length;o++){if(o==m){d.eq(o).addClass("current");d.eq(o).find("img")?d.eq(o).find("img").attr("src",d.eq(o).find("img").attr("d-src")):"";a.eq(o).show().siblings("."+k).hide();if(l.hasClass("quan-tab")){if(!a.eq(o).attr("getState")||a.eq(o).attr("getState")!="true"){main.getQuanState(a.eq(o));a.eq(o).attr("getState",true)}main.getQuan(a.eq(o))}if(l.hasClass("tab-switch2")&&(!d.eq(o).attr("data-get"))){var p=d.eq(o).attr("data-param");if(p){i(l,o,p)}}if(l.hasClass("tab-switch3")){d.eq(o).find(".txt").css("background",e);d.eq(o).find(".txt").css("color",h)}if(l.hasClass("rec-twenty-tab")&&(!d.eq(o).attr("data-get"))){var q=d.eq(o).attr("data-catalogueid");i(l,o,q)}}else{d.eq(o).removeClass("current");d.eq(o).find("img")?d.eq(o).find("img").attr("src",d.eq(o).find("img").attr("c-src")):"";if(l.hasClass("tab-switch3")){d.eq(o).find(".txt").css("background",h);d.eq(o).find(".txt").css("color",e)}}}lazyelem.detect()}},200)});d.on("mouseleave",function(){clearTimeout(b)})},getClosest:function(b){var h=b,g=parseInt(new Date().getHours()*60+new Date().getMinutes());var d;if(b.hasClass("quan-tab")){d=h.find(".tab-nav")}else{d=h.find(".tab-nav2")}var c=d.find("a"),a=c.length;var k=g-(parseInt($(c[0]).attr("data-time").split(":")[0]*60)+parseInt($(c[0]).attr("data-time").split(":")[1]))>0?g-(parseInt($(c[0]).attr("data-time").split(":")[0]*60)+parseInt($(c[0]).attr("data-time").split(":")[1])):(parseInt($(c[0]).attr("data-time").split(":")[0]*60)+parseInt($(c[0]).attr("data-time").split(":")[1]))-g;$timeIndex=0;for(var e=1;e<a;e++){var f=g-(parseInt($(c[e]).attr("data-time").split(":")[0]*60)+parseInt($(c[e]).attr("data-time").split(":")[1]))>0?g-(parseInt($(c[e]).attr("data-time").split(":")[0]*60)+parseInt($(c[e]).attr("data-time").split(":")[1])):(parseInt($(c[e]).attr("data-time").split(":")[0]*60)+parseInt($(c[e]).attr("data-time").split(":")[1]))-g;if(f<k){k=f;$timeIndex=e}}return $timeIndex},chooseTab:function(g){var n=g,d=n.find(".tab-nav li"),a=d.length;var f=0,s=false,l=[],k;var t=new Date().getTime()+main.timeOffset;for(var p=0;p<a;p++){var b=d.eq(p),c=b.find("a").attr("data-start"),m=b.find("a").attr("data-end");var e=new Date(t).getHours()*3600+new Date(t).getMinutes()*60+new Date(t).getSeconds();var q=parseInt(c.split(":")[0])*3600+parseInt(c.split(":")[1])*60;var h=parseInt(m.split(":")[0])*3600+parseInt(m.split(":")[1])*60;l.push(h);k=e;if(e<q){n.find(".tab-content").eq(p).find(".time-info span").html("距离开始还剩：");d.eq(p).find(".txt").html("即将开始")}else{if((e>=q)&&(e<=h)){n.find(".tab-content").eq(p).find(".time-info span").html("距离结束还剩：");d.eq(p).find(".txt").html("秒杀中");f=p;s=true}else{if(e>h){n.find(".tab-content").eq(p).find(".time-info").html("已结束");d.eq(p).find(".txt").html("已结束")}}}}if(!s){var r=0;for(var o=0;o<l.length;o++){if(l[o]<k){r=o}}s=true;f=r}return f},paintColor:function(c){var e=c.find("input").attr("value"),b=c.find("input").attr("name");var a=c.find(".tab-nav li");c.find(".tab-content").css("background",e);c.find(".tab-nav li").css("borderColor",e);c.find(".time-panel").css("color",b);c.find(".txt").css("background",e);c.find(".txt").css("color",b);for(var d=0;d<a.length;d++){if(a.eq(d).hasClass("current")){a.eq(d).find(".txt").css("background",b);a.eq(d).find(".txt").css("color",e)}}},proFormat:function(a){var c=a,b=a.find(".tab-content");b.each(function(){var g=$(this),e=g.find("li"),d=e.length;if(d>5&&d<10){for(var f=5;f<d;f++){e.eq(f).hide()}}else{if(d>10){for(var f=10;f<d;f++){e.eq(f).hide()}}}})},timeLine:function(){var c=$(".time-line"),b=c.find(".btn"),a=c.find(".alert-box");b.on("click",function(){a.show()});a.on("mouseleave",function(){a.fadeOut()})},renderColor:function(){$(".cate-wrap").find("li:first").each(function(b,c){var a=$(c).attr("data-color");if(a){$(c).css("background",a)}$(c).siblings().hover(function(){$(this).css("background",a)},function(){$(this).css("background","#333")})});$(".cate-wrap").each(function(a,b){if($(b).find("li").length%2==0){$(b).find("li:last").css({width:"117px",height:"25px"})}})},wuhuoHandle:function(b){var b=b,c=b.find('input[type="hidden"]').attr("data-pageid"),e=b.find('input[type="hidden"]').attr("data-templatefullid"),h=b.find('input[type="hidden"]').attr("data-modelfullid"),a=b.find('input[type="hidden"]').attr("data-plid"),d="//f.m.suning.com/api/polId.json?cityId="+main.cityId+"&pid="+c+"&fid="+e+"&mid="+h+"&plId="+a,g="cmsCallback"+c+e+h;if(c&&e&&h&&a){Util.getAjax(d,g).done(function(t){if(t&&t.length>0){for(var q=0;q<t.length;q++){var u=t[q],y=u.partnumber,m=u.vendorCode,z=u.elementName,x=u.picVersion,o=u.trickPoint,r="",s="",l=$(b).find('li[data-sku]:not(".seen")').eq(q);var k="";for(var n=y.length;n<18;n++){k+="0"}k+=y;var p={partNumber:k,vendorCode:m};r=Util.getPic(p);s=Util.getUrl(p,o);l.attr("data-vendorid",m);l.attr("data-partnumber",y);l.find(".good-name").html(z);l.find("a").attr("name",o);l.find("a").attr("href",s);l.find(".wh-img").attr("lazy-src",r);var w=Util.getSku(p,true);l.attr("data-sku",w)}main.boom(b);if(b.hasClass("rank-floor")){var v=b.parents(".roll-coat");UU.roll(v,{itemWidth:323,itemHeight:140,speed:30,step:1,auto:true,direction:"bottom-to-top",itemCount:10});main.rank()}else{main.priceHandle($(b))}}else{main.boom(b);if(b.hasClass("rank-floor")){var v=b.parents(".roll-coat");UU.roll(v,{itemWidth:323,itemHeight:140,speed:30,step:1,auto:true,direction:"bottom-to-top",itemCount:10});main.rank()}else{main.priceHandle($(b))}}}).fail(function(){main.boom(b);main.priceHandle(b)})}else{main.boom(b);if(b.hasClass("rank-floor")){var f=b.parents(".roll-coat");UU.roll(f,{itemWidth:323,itemHeight:140,speed:30,step:1,auto:true,direction:"bottom-to-top",itemCount:10});main.rank()}else{main.priceHandle(b)}}b.find("li[data-sku]").show()},priceHandle:function(a){lazyelem.listen(a.find("li[data-sku]"),"fn",function(b){main.priceDOM.push(b);if(main.getPriceFlag){return}main.getPriceFlag=true;GetPrice.queryprice(main.priceDOM,"1",main.getpricecallback);lazyelem.detect()})},asseen:function(a){var n=a,c=SFE.base.getQueryString();if(c&&c.productCode&&c.productCode!=""){var m=c.productCode?c.productCode:"",d=c.shopId?c.shopId:c.vendorId,i=c.supplierCode?c.supplierCode:"",f=c.productType?c.productType:"",g=c.pictureUrl?decodeURIComponent(c.pictureUrl):"";var e={partNumber:m,vendorCode:d,supplierCode:i,productType:f};var h=Util.getUrl(e),k=Util.getSku(e),o="";if(g!=""){o=g+"_200w_200h_4e"}else{o=Util.getPic(e)}$.ajax({url:"//iss.suning.com/iss/product/ajaxGetItemName_"+m+"_"+d+"_0_callback.htm",type:"get",dataType:"jsonp",jsonpCallback:"callback",success:function(q){if(q&&q[0]){var p=q[0].itemName;b(p,m,d)}else{l()}},error:function(){l()}})}else{l()}function b(r,s,p){var q='<li data-partnumber="'+s+'" data-vendorid="'+p+'" class="good-box tran comm-item"'+k+'><a name="" target="_blank" href="'+h+'" title=""><img alt="" width="190" height="190" src="'+o+'"><p class="good-name">'+r+'</p><p class="price"><span>任性价</span><i>¥</i><em></em></p><p class="price-high"><span>参考价：</span><i>¥</i><em></em></p><p class="enter-btn">立即进入</p></a></li>';n.find("ul").prepend(q).show();main.boom(n);main.priceHandle(n)}function l(){lazyelem.listen(n.find("img[lazy-src]"));n.find(".good-box").length==6?n.find(".good-box").last().remove():""}},tabSeen:function(a){var b=SFE.base.getQueryString();if(b&&b.productCode&&b.productCode!=""){var l=b.productCode?b.productCode:"",c=b.shopId?b.shopId:"",i=b.supplierCode?b.supplierCode:"",d=b.productType?b.productType:"",f=b.pictureUrl?b.pictureUrl:"";var e={partNumber:l,vendorCode:c,supplierCode:i,productType:d};var h=Util.getUrl(e),k=Util.getSku(e),n="",g="";if(f!=""){n=f+"_200w_200h_4e"}else{n=Util.getPic(e)}$.ajax({url:"//iss.suning.com/iss/product/ajaxGetItemName_"+l+"_"+c+"_0_callback.htm",type:"get",dataType:"jsonp",jsonpCallback:"callback",success:function(q){if(q&&q[0]){var p=q[0].itemName,o="dacu_tab_sjsd_sjsdsp1";g+='<li class="good-box comm-item tran seen" style="display: block;" data-partNumber="'+l+'" data-vendorid="'+c+'" '+k+'><div class="layer"><em></em></div><a target="_blank" name="'+o+'" href="'+h+'"><img class="wh-img" alt="" src="'+n+'"><p class="good-name">'+p+'</p><p class="price"><span>任性价</span><i>¥</i><em></em></p><span class="enter-btn"><i class="qiang">立即进入</i><em></em></span></a></li>';a.find(".tab-content").eq(0).find("ul").prepend(g);main.proFormat(a);main.priceHandle(a);main.boom(a)}else{m(a)}},error:function(){m(a)}})}else{m(a)}function m(o){var p=sn.tuijianDomain+"/recommend-portal/recommendv2/biz.jsonp?&u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&sceneIds=28-49&count=1",q="tabRecCallback";Util.getAjax(p,q).done(function(B){if(B&&B.sugGoods&&B.sugGoods[0]&&B.sugGoods[0].skus[0]){var G=B.sugGoods[0].skus[0],F=G.sugGoodsCode?G.sugGoodsCode:"",x=G.shopCode?G.shopCode:"",A=G.supplierCode?G.supplierCode:"",u=G.productType?G.productType:"",v=G.pictureUrl?G.pictureUrl:"",s=G.sugGoodsName?G.sugGoodsName:"",y=G.price?G.price:"",E=G.handwork?G.handwork:"",w="",D="plhc_none_recddbk_1-1_p_"+x+"_"+F+"_"+E,r="baoguang_recddbk_1-1_"+x+"_"+F+"_"+E;var t={partNumber:F,vendorCode:x,supplierCode:A,productType:u};var z=Util.getUrl(t,D),C=Util.getSku(t),H="",w="";if(v!=""){H=v+"_200w_200h_4e"}else{H=Util.getPic(t)}w+='<li class="good-box comm-item tran seen" style="display: block;" data-partNumber="'+F+'" data-vendorid="'+x+'" '+C+'><div class="layer"><em></em></div><a id="'+r+'" target="_blank" name="'+D+'" href="'+z+'"><img class="wh-img" alt="" src="'+H+'"><p class="good-name">'+s+'</p><p class="price"><span>任性价</span><i>¥</i><em>'+y+'</em></p><span class="enter-btn"><i class="qiang">立即进入</i><em></em></span></a></li>';o.find(".tab-content").eq(0).find("ul").prepend(w);Util.baoguangFun("baoguang_recddbk_");main.proFormat(o);main.boom(o)}else{return}},function(){return})}},getJuhui:function(){if(main.juDom[0]&&main.juDom[0].attr("data-djhid")){$.ajax({cache:false,url:"//ju.suning.com/ajax/batchCommsStatusByDjh_"+main.juDom[0].attr("data-djhid")+"_"+main.juDom[0].attr("data-partnumber")+"_"+main.juDom[0].attr("data-vendorid")+"_gbcallback0.html",type:"get",dataType:"jsonp",jsonpCallback:"gbcallback0",success:function(a){main.getJuhuiInfor(a)}})}},getJuhuiInfor:function(a){if(a.commStatusList&&a.commStatusList[0].status&&a.commStatusList[0].status==3){if(main.juDom[0].find(".layer")){main.juDom[0].addClass("sale-out");main.juDom[0].find(".qiang").html("已抢光")}}main.juDom.shift();if(main.juDom.length>0){main.getJuhui(main.juDom)}else{main.getJuFlag=true}},getNewBanner:function(b){var f=b.find(".banner-id"),h=b.find(".rec-id").attr("name"),e=[];f.each(function(i,k){e.push($(k).attr("name")+"_"+$(k).attr("data-num"))});var a=e.join(","),d=h,c="//f.m.suning.com/wapIndex/getNewBanner.do?u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&bSceneIds="+a+"&sceneIds="+d,g="newBannerCallback"+new Date().getTime();Util.getAjax(c,g).done(function(t){if(t&&t.data&&t.data&&t.data.length>4){var r=t.data,p=r.length,m=b.find("a");for(var n=0;n<p;n++){var y=r[n].skus[0],s=m.eq(n),l=y.bannerUrl,v=y.sugGoodsCode,o=y.shopCode,x=y.handwork||"",q=JSON.stringify({recvalue:x}),u="plhc_none_rechcba_1-"+(n+1)+"_c_"+o+"_"+v+"_"+x,k="baoguang_rechcba_1-"+(n+1)+"_"+o+"_"+v+"_"+x,w=y.jumpUrl+"?src="+u;if(l.indexOf("http:")==0){l=l.substring(5)}else{if(l.indexOf("https:")==0){l=l.substring(6)}}s.find("img").attr("lazy-src",l);s.attr("href",w);s.attr("name",u);s.attr("id",k);s.attr("sa-data",q);Util.baoguangFun("baoguang_rechcba_")}b.find("img").show()}else{b.find("img").show()}})},getNewBanner2:function(b,f){var i=b.find("li"),d=b.find(".rec-id").attr("name"),g=[];i.each(function(k,l){if(k!=0&&$(l).attr("data-banners")!=""&&$(l).attr("data-num")!=""){g.push($(l).attr("data-banners")+"_"+$(l).attr("data-num"))}});if(g.length>0){var e=g.join(","),c=d,a="//f.m.suning.com/wapIndex/getNewBanner.do?u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&bSceneIds="+e+"&sceneIds="+c,h="newBannerCallback"+new Date().getTime();Util.getAjax(a,h).done(function(s){if(s&&s.data&&s.data&&s.data.length>0){var q=s.data,p=q.length;for(var n=0;n<p;n++){var x=q[n].skus[0],y=q[n].bSceneIds,l=x.bannerUrl,u=x.sugGoodsCode,o=x.shopCode,w=x.handwork,r=b.find('li[data-banners="'+y+'"]'),m=r.index(),t="plhc_none_recplhcba_"+f+"-"+(m+1)+"_c_"+o+"_"+u+"_"+w,k="baoguang_recplhcba_"+f+"-"+(m+1)+"_"+o+"_"+u+"_"+w,v=x.jumpUrl+"?src="+t;if(l.indexOf("http:")==0){l=l.substring(5)}else{if(l.indexOf("https:")==0){l=l.substring(6)}}r.find("img").attr("src",l);r.find("a").attr({href:v,name:t,id:k,target:"_blank"});Util.baoguangFun("baoguang_recplhcba_")}}else{return}}).fail(function(){return})}else{return}},getCpmAd:function(a){var b="//th.suning.com/cpm/getMCpmCuxiaoDatas",f=[],d=(screen.width>1200)?"w":"n";var c=a.find("li");c.each(function(){if($(this).attr("data-cpmId").length==9){f.push($(this).attr("data-cpmId"))}});var e=$.param({pid:f,screen:d,clt:"pc"},true);if(f.length>0){$.ajax({url:b,type:"GET",dataType:"jsonp",data:e,timeout:3000,jsonpCallback:"getMCpmCuxiaoDatas"+new Date().getTime(),success:function(p){if(p&&p.data.cpm.length>4){var l=p.data.cpm,n=l.length%5==0?l.length:l.length-(l.length%5);for(var m=0;m<n;m++){if(l[m].adSrc&&l[m].apsClickUrl){var g=l[m].adSrc,h=l[m].tid,q=l[m].apsClickUrl,u=l[m].pid;if(g.indexOf("http:")==0){g=g.substring(5)}else{if(g.indexOf("https:")==0){g=g.substring(6)}}if(q.indexOf("http:")==0){q=q.substring(5)+"&tid="+h}else{if(q.indexOf("https:")==0){q=q.substring(6)+"&tid="+h}}var o=JSON.stringify({recvalue:"rec"});var s=a.find('li[data-cpmId="'+u+'"]'),r=s.find("a").attr("name").split("_")[1],t=s.attr("data-modeCode"),k="dacu_"+r+"_"+t+"_cpm0"+(m+1);s.find("img").attr("src",g);s.find("a").attr({href:q,name:k,target:"_blank"})}else{return}}}else{a.hide()}},error:function(){a.hide()}})}},getCpmAd2:function(a){var b="//th.suning.com/cpm/getMCpmCuxiaoDatas",f=[],d=(screen.width>1200)?"w":"n";var c=a.find("li");c.each(function(){if($(this).attr("data-cpmId").length==9){f.push($(this).attr("data-cpmId"))}});var e=$.param({pid:f,screen:d,clt:"pc"},true);if(f.length>0){$.ajax({url:b,data:e,type:"GET",dataType:"jsonp",timeout:3000,jsonpCallback:"getMCpmCuxiaoDatas"+new Date().getTime(),success:function(p){if(p&&p.data.cpm.length>=0){var l=p.data.cpm,n=l.length;for(var m=0;m<n;m++){if(l[m].adSrc&&l[m].apsClickUrl&&l[m].pid){var g=l[m].adSrc,h=l[m].tid,o=l[m].apsClickUrl,t=l[m].pid;if(g.indexOf("http:")==0){g=g.substring(5)}else{if(g.indexOf("https:")==0){g=g.substring(6)}}if(o.indexOf("http:")==0){o=o.substring(5)+"&tid="+h}else{if(o.indexOf("https:")==0){o=o.substring(6)+"&tid="+h}}var r=a.find('li[data-cpmId="'+t+'"]'),q=r.find("a").attr("name").split("_")[1],s=r.attr("data-modeCode"),k="dacu_"+q+"_"+s+"_plcpm0"+(m+1);r.find("img").attr("src",g);r.find("a").attr({href:o,name:k,target:"_blank"})}else{return}}}else{return}},error:function(){return}})}},getFourPic:function(){var b,d=[],c=[];if($(".pid")){$(".pid").each(function(){d.push($(this).attr("value"));c.push($(this).attr("data-trick"))})}if(d.length>0){var a={pid:d};b="//th.suning.com/cpm/getMCpmCuxiaoDatas?clt=pc";$.ajax({url:b,type:"get",data:$.param(a,true),dataType:"jsonp",jsonpCallback:"getMCpmCuxiaoDatas"+new Date().getTime(),success:function(h){var g={list:h.data.cpm};var f=template("fourPic",g);$(".line-fourPic").html("").html(f);for(var e=0;e<c.length;e++){$(".line-fourPic li").eq(e).find("a").attr("name",c[e])}},error:function(){$(".line-fourPic").remove()}})}else{$(".line-fourPic").remove()}},getFhc:function(a){var b=sn.tuijianDomain+"/recommend-portal/recommend/paramsBiz.jsonp?u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&sceneIds=16-30&count=4",c="getFHCCb";Util.getAjax(b,c).done(function(m){if(m&&m.sugGoods&&m.sugGoods[0].skus){var n=m.sugGoods[0].skus,l=n.length>4?4:n.length,h="",o="",k,q,f,e;if(l<4){$(".fhc-floor").remove();return}if(window.location.href.indexOf("sc11zc")!=-1){e="cuxiao_sc11zc_dctj_lm"}else{if(window.location.href.indexOf("sc11bf")!=-1){e="cuxiao_sc11bf_dctj_lm"}}for(var g=0;g<l;g++){o=n[g]["sugGoodsCode"];k=n[g]["shopId"];q=n[g]["handwork"];f=e+(g+1);var d={picUrl:"",partNumber:o,shopPicUrl:"/uimg/b2c/newcatentries/",vendorCode:k,linkType:"",trickPoint:f,linkUrl:""};h+='<li><a name="'+f+'" target="_blank" href="//cuxiao.suning.com/recommend.html?catalogueId='+n[g].labelCode+'" title=""><p class="name">'+n[g].labelName+'</p><p class="desc">'+n[g].labelDesc+'</p><p class="go">GO></p><img alt="" style="height: 110px;width: 110px" src="'+Util.getPic(d)+'"></a></li>'}a.find("ul").append(h);Util.baoguangFun("tjpcdb_recpcdb_1-")}}).fail(function(){$(".fhc-floor").remove()})},getNewOrder:function(a){if(a.find('input[type="hidden"]')&&a.find('input[type="hidden"]').attr("name")!=""){var c="callback"+new Date().getTime(),b=a.find('input[type="hidden"]').attr("name");Util.getAjax("//gwsmem.suning.com/gws-front/floor/BA-JSONP-"+b+"-"+c+".do",c).done(function(m){var k="";if(m&&m.data.floorList&&m.data.floorList.length>0){var g=m.data.floorList[0].pits;for(var h=0;h<g.length;h++){if(g[h].modelType==0&&a.find(".left-wrap")){a.find(".left-wrap a").attr("href",g[h].jumpLink);a.find(".left-wrap img").attr("src",g[h].pictureUrl)}else{if(g[h].modelType==0&&a.find(".img-box")){a.find(".img-box a").attr("href",g[h].jumpLink);a.find(".img-box img").attr("src",g[h].pictureUrl)}else{if(g[h].modelType==1){var d={partNumber:g[h].productCode,vendorCode:g[h].supplierCode};var f={partNumber:g[h].productCode.substr(9),vendorCode:g[h].supplierCode};var e=Util.getUrl(d),l=Util.getPic(d),n=Util.getSku(f);if(a.hasClass("floor-buy")){k+='<li class="good-box tran comm-item" data-activityid="'+g[h].activityId+'" data-partnumber="'+g[h].productCode.substr(9)+'" data-vendorid="'+g[h].supplierCode+'"'+n+'><a href="'+e+'" class="good-link" target="_blank" name=""><div class="pic-show"><img alt="" src="'+l+'"></div><p class="good-name">'+g[h].productName+'</p><p class="good-tip">'+g[h].sellPoint+'</p><p class="price"><i>¥</i><em>'+g[h].activityPrice+'</em></p><span class="good-txt" style="display: none"></span><p class="order-btn">立即预定</p><p class="bottom" style="display: none"></p></li>'}else{k+='<li class="good-box tran comm-item" data-activityid="'+g[h].activityId+'" data-partnumber="'+g[h].productCode.substr(9)+'" data-vendorid="'+g[h].supplierCode+'"'+n+'><a href="'+e+'" class="good-link" target="_blank" name=""><div class="pic-show"><img alt="" src="'+l+'"></div><p class="good-name">'+g[h].productName+'</p><p class="good-tip">'+g[h].sellPoint+'</p><p class="price"><i>¥</i><em>'+g[h].activityPrice+'</em></p><span class="good-txt" style="display: none"></span><p class="order-btn">立即预约</p><p class="bottom" style="display: none"></p></li>'}}}}}}else{return}if(a.find("ul .img-box").length>0){a.find("ul").prepend(k);if(a.find("li[data-sku]").length>3){for(var h=3;h<a.find("li[data-sku]").length;h++){a.find("li[data-sku]").eq(h).hide()}}}else{a.find("ul").prepend(k);if(a.find("li[data-sku]").length>5){for(var h=5;h<a.find("li[data-sku]").length;h++){a.find("li[data-sku]").eq(h).hide()}}}if(a.hasClass("new-order")){main.boom(a.find("ul"));main.yuyueGet(a.find("ul"))}})}},getPreSale:function(b){var c="",a=b.find(".param").attr("name");if(b.hasClass("rec-presale")){c=sn.tuijianDomain+"/recommend-portal/dyBase.jsonp?u="+main.userId+"&c="+main.cookieId+"&flag="+a+"&cityId="+main.cityId+"&sceneIds=28-6&count=10"}else{if(b.hasClass("rec-qiang")){c=sn.tuijianDomain+"/recommend-portal/dyBase.jsonp?u="+main.userId+"&c="+main.cookieId+"&flag="+a+"&cityId="+main.cityId+"&sceneIds=28-9&count=10"}}Util.getAjax(c).done(function(w){if(w&&w.sugGoods&&w.sugGoods[0]&&w.sugGoods[0].skus&&w.sugGoods[0].skus.length>2){var p=w.sugGoods[0].skus,s=p.length>3?3:p.length,k="";for(var r=0;r<s;r++){var h=p[r].sugGoodsCode,f=p[r].shopCode,g=p[r].supplierCode,v=p[r].handwork,t=p[r].pictureUrl,l=p[r].productType;if(l==3||l==5){var o=g}else{var o=f}var m={partNumber:h,vendorCode:o,linkType:""};var q="",u="",n="",e="",d="";if(b.hasClass("rec-presale")){e="baoguang_recyy_1-"+(r+1)+"_"+o+"_"+h+"_"+v;d="yyyd_none_recyy_1-"+(r+1)+"_p_"+o+"_"+h+"_"+v;n=Util.getSku(m);q=Util.getUrl(m,d);if(t!=""){u=t+"_100w_100h_4e"}else{u=Util.getPic(m)}k+="<li "+n+'><a id="'+e+'" name="'+d+'" href="'+q+'" title="" target="_blank"><img lazy-src="'+u+'" alt=""><p class="name">'+p[r].sugGoodsName+'</p><p class="price">预售价：<i>&yen;</i><em>'+p[r].price+"</em></p></a></li>"}else{if(b.hasClass("rec-qiang")){e="baoguang_recptlcs_1-"+(r+1)+"_"+o+"_"+h+"_"+v;d="yyyd_none_recptlcs_1-"+(r+1)+"_p_"+o+"_"+h+"_"+v;n=Util.getSku(m);q=Util.getUrl(m,d);if(t!=""){u=t+"_100w_100h_4e"}else{u=Util.getPic(m)}k+="<li "+n+'><a id="'+e+'" name="'+d+'" href="'+q+'" title="" target="_blank"><img lazy-src="'+u+'" alt=""><p class="name">'+p[r].sugGoodsName+'</p><p class="price">抢购价：<i>&yen;</i><em>'+p[r].price+"</em></p></a></li>"}}}b.find("ul").prepend(k);Util.baoguangFun("baoguang_recyy_");Util.baoguangFun("baoguang_recptlcs_");lazyelem.listen(b.find("img[lazy-src]"));main.priceHandle(b)}else{main.priceHandle(b);lazyelem.listen(b.find("img[lazy-src]"));lazyelem.detect();b.find(".cms-good").show()}})},getRecEntry:function(a){var e=$("#shopCode2").attr("name"),d=$("#shopCode2").val(),c=10;var b="//f.m.suning.com/api/getHwgThem.do?u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&sceneIds1=28-33&parameter1="+e+"&count1=10&sceneIds2=16-66&count2=1&parameter2="+d+"&displayCount="+c,f="getEntry";Util.getAjax(b,f).done(function(u){if(u&&u.data&&u.data.sugGoods&&u.data.sugGoods[0].skus.length>0){var y=u.data.sugGoods[0].skus,w=y.length,o='<ul class="clearfix">';if(w<10){$(".rec-entry").remove()}else{if(w==10){w=10}else{if(w>10){if(y[10]&&y[10].list&&y[10].list.length>0){y.splice(9,(w-10));w=10}else{$(".rec-entry").remove();return}}}}for(var v=0;v<w;v++){var k=parseInt(Math.random()*(y[v].list.length));var n=y[v].list[k].sugGoodsCode,g=y[v].list[k].sugGoodsCode.substring(9),p=y[v].list[k].productType,q=y[v].list[k].shopId,l=y[v].list[k].supplierCode,i=y[v].handwork,h=y[v].list[k].picVersion,z="dacu_"+window.location.pathname.split(".")[0].substr("1")+"_zttj_zt"+(v+1),B=y[v].labelPic,s=y[v].list[k].pictureUrl,t="",A="";if(p==3||p==5){t=l}else{t=q}var x={picUrl:"",partNumber:n,shopPicUrl:"/uimg/b2c/newcatentries/",vendorCode:t,linkType:"",trickPoint:z,linkUrl:"",ver:h};if(B.indexOf("http")==0){B=B.substring(5)}else{if(B.indexOf("https")==0){B=B.substring(6)}}if(h.indexOf("//")!=-1){if(h.indexOf("http")==0){A=h.substring(5)}else{if($ver.indexOf("https")==0){A=h.substring(6)}else{A=h}}}else{if(n&&t&&h){A=Util.getPicQrqm(x,"200x200")}else{A=B}}if(i&&i.split("_")[1]=="16-66"){o+='<li><a name="'+z+'" target="_blank" href="//cuxiao.suning.com/recommendpc.html?labelCode='+y[v].labelCode+"&supplierCode="+t+"&sugGoodsCode="+y[v].list[k].sugGoodsCode+"&shopCode=&ver="+h+"&shopId="+d+'&haiwaigou=1"><img data-vendor="'+t+'" data-part="'+n+'" width="190" height="190" lazy-src="'+A+'" onerror="main.picError(this)"><p class="name">'+y[v].labelName+'</p><p class="desc">'+y[v].labelDesc+"</p></a></li>"}else{o+='<li><a name="'+z+'" target="_blank" href="//cuxiao.suning.com/recommendpc.html?labelCode='+y[v].labelCode+"&supplierCode="+t+"&sugGoodsCode="+y[v].list[k].sugGoodsCode+"&shopCode=&ver="+h+"&shopId="+e+'"><img data-vendor="'+t+'" data-part="'+n+'" width="190" height="190" lazy-src="'+A+'" onerror="main.picError(this)"><p class="name">'+y[v].labelName+'</p><p class="desc">'+y[v].labelDesc+"</p></a></li>"}}o+="</ul>";a.find(".entry-wrap").append(o);Util.baoguangFun("tjpcdb_recpcdb_1-");lazyelem.listen($(".rec-entry").find("img[lazy-src]"));lazyelem.detect()}else{$(".rec-entry").remove()}}).fail(function(){$(".rec-entry").remove()})},getRecEntry2:function(a){var e=$("#shopCode3").attr("name"),d=$("#shopCode3").val(),c=10;var b=sn.tuijianDomain+"/recommend-portal/recommend/paramsBiz.jsonp?u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&sceneIds=34-4&parameter="+e+"&count=11",f="getEntry2";Util.getAjax(b,f).done(function(t){if(t&&t.sugGoods&&t.sugGoods[0].skus.length>0){var u=t.sugGoods[0].skus,w=u.length,n='<ul class="clearfix">';if(w<10){$(".rec-entry2").remove()}else{if(w>=10){if(u[10]&&u[10].list&&u[10].list.length>0){u.splice(9,(w-10));w=10}else{w=10}}}for(var v=0;v<w;v++){var i=parseInt(Math.random()*(u[v].list.length)),l=u[v].list[i].sugGoodsCode,o=u[v].list[i].productType,p=u[v].list[i].shopId,k=u[v].list[i].supplierCode,h=u[v].handwork,g=u[v].list[i].picVersion,y="dacu_"+window.location.pathname.split(".")[0].substr("1")+"_zttj_zt"+(v+1),A=u[v].labelPic,q=u[v].list[i].pictureUrl,s="",z="";if(o==3||o==5){s=k}else{s=p}var x={picUrl:"",partNumber:l,shopPicUrl:"/uimg/b2c/newcatentries/",vendorCode:s,linkType:"",trickPoint:y,linkUrl:"",ver:g};if(A.indexOf("http")==0){A=A.substring(5)}else{if(A.indexOf("https")==0){A=A.substring(6)}}if(l&&s&&g){z=Util.getPicQrqm(x,"200x200")}else{z=A}if(h&&h.split("_")[1]=="16-66"){n+='<li><a name="'+y+'" target="_blank" href="//cuxiao.suning.com/recommendpc.html?labelCode='+u[v].labelCode+"&supplierCode="+s+"&sugGoodsCode="+u[v].list[i].sugGoodsCode+"&shopCode=&ver="+g+"&shopId="+d+'&haiwaigou=1"><img data-vendor="'+s+'" data-part="'+l+'" width="190" height="190" lazy-src="'+z+'" onerror="main.picError(this)"><p class="name">'+u[v].labelName+'</p><p class="desc">'+u[v].labelDesc+"</p></a></li>"}else{n+='<li><a name="'+y+'" target="_blank" href="//cuxiao.suning.com/recommendpc.html?labelCode='+u[v].labelCode+"&supplierCode="+s+"&sugGoodsCode="+u[v].list[i].sugGoodsCode+"&shopCode=&ver="+g+"&shopId="+e+'"><img data-vendor="'+s+'" data-part="'+l+'" width="190" height="190" lazy-src="'+z+'" onerror="main.picError(this)"><p class="name">'+u[v].labelName+'</p><p class="desc">'+u[v].labelDesc+"</p></a></li>"}}n+="</ul>";a.find(".entry-wrap").append(n);Util.baoguangFun("tjpcdb_recpcdb_1-");lazyelem.listen($(".rec-entry2").find("img[lazy-src]"));lazyelem.detect()}else{$(".rec-entry2").remove()}}).fail(function(){$(".rec-entry2").remove()})},getRecItems:function(){var a=$("#cu_label").attr("name")?$("#cu_label").attr("name"):"";var c=$("#shopCode").attr("name"),b=sn.tuijianDomain+"/recommend-portal/recommendv2/biz.jsonp?u="+main.userId+"&c="+main.cityId+"&cityId="+main.cityId+"&sceneIds=16-44&count=20";$.ajax({url:b,type:"GET",dataType:"jsonp",jsonpCallback:"callback",success:function(u){var h='<ul class="clearfix main-rec lazy-dom commodity-floor">';if(u&&u.sugGoods&&u.sugGoods[0].skus.length>=20){for(var q=0;q<20;q++){var r=u.sugGoods[0].skus[q].sugGoodsName,p=u.sugGoods[0].skus[q].price,t=u.sugGoods[0].skus[q].refPrice,g=u.sugGoods[0].skus[q].sugGoodsCode,w=u.sugGoods[0].skus[q].vendorId,e=u.sugGoods[0].skus[q].supplierCode,k=u.sugGoods[0].skus[q].productType,y=u.sugGoods[0].skus[q].handwork,s=u.sugGoods[0].skus[q].pictureUrl;if(t==""||t==p){main.refPrice.push(q)}if(k==3||k==5){var m=e}else{var m=w}var n="baoguang_recpcnxh_1-"+(q+1)+"_"+m+"_"+g+"_"+y;var v="plhc_none_recpcnxh_1-"+(q+1)+"_p_"+m+"_"+g+"_"+y;var l={partNumber:g,vendorCode:m};var o=Util.getUrl(l,v);if(s!=""){var x=s+"_200w_200h_4e"}else{var x=Util.getPic(l)}h+='<li class="good-box comm-item" data-partnumber="'+g+'" data-vendorid="'+m+'"><a id="'+n+'" name="'+v+'" target="_blank" href="'+o+'" title=""><img alt="" class="lazy-loading" lazy-src="'+x+'" width="190" height="190"><p class="good-name">'+r+'</p><p class="price"><span>任性价：</span><i>¥</i><em>'+p+'</em></p><p class="price-high"><span>参考价：</span><i>¥</i><em>'+t+'</em></p><p class="preBuy"><span class="pre">'+a+'</span><span class="buy">立即抢购</span></p></a></li>'}h+="</ul>";$(".rec-twenty").append(h);lazyelem.listen($(".rec-twenty").find("img[lazy-src]"),"img");Util.baoguangFun("baoguang_");var f=function(){var d=main.refPrice[0];$(".rec-twenty .main-rec li").eq(d).find(".price-high").hide();main.refPrice.shift();if(main.refPrice.length>0){f()}};f()}else{$(".rec-twenty").find(".pre").html(a);$(".rec-twenty").find(".sub").show()}},error:function(e){$(".rec-twenty").find(".pre").html(a);$(".rec-twenty").find(".sub").show()}})},getRecItems2:function(){var a=$("#shopCode4").attr("name"),c=$("#shopCode4").val();var b=sn.tuijianDomain+"/recommend-portal/dyBase.jsonp?u="+main.userId+"&c="+main.cookieId+"&parameter="+c+"&shopCode="+a+"&cityId="+main.cityId+"&sceneIds=34-6&count=20";$.ajax({url:b,type:"GET",dataType:"jsonp",jsonpCallback:"callback",success:function(v){var h='<ul class="clearfix main-rec lazy-dom commodity-floor">';if(v&&v.sugGoods&&v.sugGoods[0].skus.length>=20){for(var r=0;r<20;r++){var s=v.sugGoods[0].skus[r].sugGoodsName,q=v.sugGoods[0].skus[r].price,u=v.sugGoods[0].skus[r].refPrice,g=v.sugGoods[0].skus[r].sugGoodsCode,x=v.sugGoods[0].skus[r].vendorId,e=v.sugGoods[0].skus[r].supplierCode,k=v.sugGoods[0].skus[r].productType,z=v.sugGoods[0].skus[r].handwork,t=v.sugGoods[0].skus[r].pictureUrl;if(u==""||u==q){main.refPrice.push(r)}if(k==3||k==5){var m=e}else{var m=x}var o="baoguang_recpcnxh_1-"+(r+1)+"_"+m+"_"+g+"_"+z;var w="plhc_none_recpcnxh_1-"+(r+1)+"_p_"+m+"_"+g+"_"+z;var l={partNumber:g,vendorCode:m};var p=Util.getUrl(l,w);if(t!=""){var y=t+"_200w_200h_4e"}else{var y=Util.getPic(l)}var n=$("#cu_label").attr("name")?$("#cu_label").attr("name"):"";h+='<li class="good-box comm-item" data-partnumber="'+g+'" data-vendorid="'+m+'"><a id="'+o+'" name="'+w+'" target="_blank" href="'+p+'" title=""><img alt="" class="lazy-loading" lazy-src="'+y+'" width="190" height="190"><p class="good-name">'+s+'</p><p class="price"><span>任性价：</span><i>¥</i><em>'+q+'</em></p><p class="price-high"><span>参考价：</span><i>¥</i><em>'+u+'</em></p><p class="preBuy"><span class="pre">'+n+'</span><span class="buy">立即抢购</span></p></a></li>'}h+="</ul>";$(".rec-twenty2").append(h);main.boom($(".rec-twenty2"));lazyelem.listen($(".rec-twenty2").find("img[lazy-src]"),"img");Util.baoguangFun("baoguang_");var f=function(){var d=main.refPrice[0];$(".rec-twenty2 .main-rec li").eq(d).find(".price-high").hide();main.refPrice.shift();if(main.refPrice.length>0){f()}};f()}else{$(".rec-twenty2").find(".sub").show()}},error:function(e){$(".rec-twenty2").find(".sub").show()}})},getRecItemsTab:function(a,c,e){var d=$("#cu_label").attr("name")?$("#cu_label").attr("name"):"";var b="";if(c==0){b=sn.tuijianDomain+"/recommend-portal/dyBase.jsonp?u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&sceneIds=28-43&count=20&&viewCount=4&parameter=2843",callback="recTabCallback"}else{b=sn.tuijianDomain+"/recommend-portal/dyBase.jsonp?u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&sceneIds=28-43&count=20&&viewCount=4&parameter=2843&catalogueId="+e,callback="recTabCallback"+c}Util.getAjax(b,callback).done(function(z){a.find(".tab-nav li").eq(c).attr("data-get",true);if(c==0){if(z&&z.sugGoods[0]&&z.sugGoods[0].list){a.find(".tab-nav li").eq(0).find("a").append('<em class="nav-name">精选推荐</em>');var u=z.sugGoods[0].list;$(u).each(function(i,A){a.find(".tab-nav li").eq(i+1).attr("data-catalogueId",$(A)[0].catalogueId);a.find(".tab-nav li").eq(i+1).find("a").append('<em class="nav-name">'+$(A)[0].categoryName+"</em>")})}}if(z&&z.sugGoods[0]&&z.sugGoods[0].skus&&z.sugGoods[0].skus.length>0){var l='<ul class="clearfix main-rec lazy-dom commodity-floor">';for(var r=0;r<20;r++){var s=z.sugGoods[0].skus[r].sugGoodsName,q=z.sugGoods[0].skus[r].price,v=z.sugGoods[0].skus[r].refPrice,k=z.sugGoods[0].skus[r].sugGoodsCode,n=z.sugGoods[0].skus[r].shopCode,g=z.sugGoods[0].skus[r].supplierCode,m=z.sugGoods[0].skus[r].productType,y=z.sugGoods[0].skus[r].handwork,t=z.sugGoods[0].skus[r].pictureUrl;if(v&&v>q){refprice=""}if(v==""||v==q){main.refPrice.push(r)}var o="baoguang_recpcnxh_"+(c+1)+"-"+(r+1)+"_"+n+"_"+k+"_"+y;var w="plhc_none_recpcnxh_"+(c+1)+"-"+(r+1)+"_p_"+n+"_"+k+"_"+y;var f={partNumber:k,vendorCode:n,supplierCode:g,productType:m};var p=Util.getUrl(f,w);if(t!=""){var x=t+"_200w_200h_4e"}else{var x=Util.getPic(f)}if(!!v){l+='<li class="good-box comm-item" data-partnumber="'+k+'" data-vendorid="'+n+'"><a id="'+o+'" name="'+w+'" target="_blank" href="'+p+'" title=""><img alt="" class="lazy-loading" lazy-src="'+x+'" width="190" height="190"><p class="good-name">'+s+'</p><p class="price"><span>任性价：</span><i>&yen;</i><em>'+q+'</em></p><p class="price-high"><span>参考价：</span><i>&yen;</i><em>'+v+'</em></p><p class="preBuy"><span class="pre">'+d+'</span><span class="buy">立即抢购</span></p></a></li>'}else{l+='<li class="good-box comm-item" data-partnumber="'+k+'" data-vendorid="'+n+'"><a id="'+o+'" name="'+w+'" target="_blank" href="'+p+'" title=""><img alt="" class="lazy-loading" lazy-src="'+x+'" width="190" height="190"><p class="good-name">'+s+'</p><p class="price"><span>任性价：</span><i>&yen;</i><em>'+q+'</em></p><p class="preBuy"><span class="pre">'+d+'</span><span class="buy">立即抢购</span></p></a></li>'}}l+="</ul>";a.find(".tab-content").eq(c).append(l);lazyelem.listen(a.find("img[lazy-src]"),"img");main.boom(a.find(".tab-content").eq(c));Util.baoguangFun("baoguang_recpcnxh_"+(c+1));var h=function(){var i=main.refPrice[0];$(".rec-twenty .main-rec li").eq(i).find(".price-high").hide();main.refPrice.shift();if(main.refPrice.length>0){h()}};h()}else{a.find(".pre").html(d)}}).fail(function(){a.find(".pre").html(d)})},getQuan:function(a){var b=a.find(".quan-btn");b.click(function(){var h=$(this),i=h.attr("data-id"),g=h.attr("data-key"),e=h.attr("data-type");var f={actId:i,actKey:g,cityId:main.cityId,sourceId:""};var d={base:"//quan.suning.com/",loginTheme:"b2c_pop"};if(e==0){ensureLogin(function(){coupon.receive.receiveCoupon(f,c)},d)}else{if(e==1){var k=h.attr("data-cloudid");coupon2.receive.receiveCloudCoupon(i,k,"","","",e,h)}else{if(e==2){coupon2.receive.receiveFinancialCoupon(i,g,e,h)}}}function c(l){main.getQuanStateNew(a,l,h)}})},getQuanState:function(c,b,e){var g=c.find("li"),f=g.length,d=[],m="";for(var h=0;h<f;h++){d.push(g.eq(h).find("p").attr("data-id"))}m=d.join(",");var l=new Date().getTime();$.ajax({url:"//quan.suning.com/getPromFourPageNew_"+m+"_1_getQuanState"+l+".do",type:"get",dataType:"jsonp",jsonpCallback:"getQuanState"+l,success:function(a){k(a.activityList)},error:function(){console.log("error")}});function k(i){if(i&&i.length>0){if(b&&b.resultCode){if(parseInt(b.resultCode)==5||parseInt(b.resultCode)==6){e.siblings(".layer").show();if(e.parents("ul").find("li").length==3||e.parents("ul").find("li").length==4){e.siblings(".layer").find("em").addClass("lin2")}else{e.siblings(".layer").find("em").addClass("lin1")}return}else{if(parseInt(b.resultCode)==10||parseInt(b.resultCode)==12||parseInt(b.resultCode)==34||parseInt(b.resultCode)==38){e.siblings(".layer").show();if(e.parents("ul").find("li").length==3||e.parents("ul").find("li").length==4){e.siblings(".layer").find("em").addClass("wan2")}else{e.siblings(".layer").find("em").addClass("wan1")}return}}for(var a=0;a<i.length;a++){var n=i[a];if(parseInt(n.timePeriodsRemainCount)==0&&n.nextStartTime!=""){if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("over2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("over1")}}else{if(parseInt(n.remainCount)!=0&&parseInt(n.dayRemainCount)!=0&&parseInt(n.remainAmt)!=0){if(parseInt(n.receiveTimes)>0){if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin1")}}if(parseInt(n.memberRemainCount)==0||parseInt(n.memberDayRemainCount)==0){if(parseInt(n.receiveTimes)>0){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin1")}}else{if(n.receiveTimes==""){return}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan1")}}}}}else{if(parseInt(n.receiveTimes)>0){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin1")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin1")}}else{if(n.receiveTimes==""){c.find('p[data-id="'+n.activityId+'"]').find(".quan-state").html("立即领取")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan1")}}}}}}}else{for(var a=0;a<i.length;a++){var n=i[a];if(parseInt(n.timePeriodsRemainCount)==0&&n.nextStartTime!=""){if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("over2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("over1")}}else{if(parseInt(n.remainCount)!=0&&parseInt(n.dayRemainCount)!=0&&parseInt(n.remainAmt)!=0){if(parseInt(n.memberRemainCount)==0||parseInt(n.memberDayRemainCount)==0){if(parseInt(n.receiveTimes)>0){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin1")}}else{if(n.receiveTimes==""){return}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan1")}}}}}else{if(parseInt(n.receiveTimes)>0){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin1")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("lin1")}}else{if(n.receiveTimes==""){c.find('p[data-id="'+n.activityId+'"]').find(".quan-state").html("立即领取")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer").show();if(c.find("li").length==3||c.find("li").length==4){c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan2")}else{c.find('p[data-id="'+n.activityId+'"]').parent().find(".layer em").addClass("wan1")}}}}}}}}else{if(b&&b.resultCode){if(parseInt(b.resultCode)==5||parseInt(b.resultCode)==6){e.siblings(".layer").show();if(e.parents("ul").find("li").length==3||e.parents("ul").find("li").length==4){e.siblings(".layer").find("em").addClass("lin2")}else{e.siblings(".layer").find("em").addClass("lin1")}}else{if(parseInt(b.resultCode)==10||parseInt(b.resultCode)==12||parseInt(b.resultCode)==34||parseInt(b.resultCode)==38){e.siblings(".layer").show();if(e.parents("ul").find("li").length==3||e.parents("ul").find("li").length==4){e.siblings(".layer").find("em").addClass("wan2")}else{e.siblings(".layer").find("em").addClass("wan1")}}}}else{return}}}},getQuanStateNew:function(b,k,d){var f=b.find(".tab-content li"),e=f.length,c=[],m="";for(var g=0;g<e;g++){c.push(f.eq(g).attr("data-id"))}m=c.join(",");var l=new Date().getTime();$.ajax({url:"//quan.suning.com/getPromFourPageNew_"+m+"_1_getQuanState"+l+".do",type:"get",dataType:"jsonp",jsonpCallback:"getQuanState"+l,success:function(a){h(a.activityList)},error:function(){console.log("error")}});function h(i){if(i&&i.length>0){for(var a=0;a<i.length;a++){var n=i[a];if(parseInt(n.timePeriodsRemainCount)==0&&n.nextStartTime!=""){b.find('li[data-id="'+n.activityId+'"]').find(".quan-btn").hide().siblings(".state").html("已抢光").show();b.find('li[data-id="'+n.activityId+'"]').find(".quan-label").css("background","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-price").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-name").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-desc").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-price i").css("backgroundPosition","0 0")}else{if(parseInt(n.remainCount)!=0&&parseInt(n.dayRemainCount)!=0&&parseInt(n.remainAmt)!=0){if(parseInt(n.receiveTimes)>0){b.find('li[data-id="'+n.activityId+'"]').find(".quan-btn").hide().siblings().show()}if(parseInt(n.memberRemainCount)==0||parseInt(n.memberDayRemainCount)==0){if(parseInt(n.receiveTimes)>0){b.find('li[data-id="'+n.activityId+'"]').find(".quan-btn").hide().siblings().show()}else{if(n.receiveTimes==""){return}else{b.find('li[data-id="'+n.activityId+'"]').find(".quan-btn").hide().siblings(".state").html("已抢完").show();b.find('li[data-id="'+n.activityId+'"]').find(".quan-label").css("background","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-price").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-name").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-desc").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-price i").css("backgroundPosition","0 0")}}}}else{if(parseInt(n.receiveTimes)>0){b.find('li[data-id="'+n.activityId+'"]').find(".quan-btn").hide().siblings().show()}else{if(n.receiveTimes==""){return}else{b.find('li[data-id="'+n.activityId+'"]').find(".quan-btn").hide().siblings(".state").html("已抢完").show();b.find('li[data-id="'+n.activityId+'"]').find(".quan-label").css("background","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-price").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-name").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-desc").css("color","#999");b.find('li[data-id="'+n.activityId+'"]').find(".quan-price i").css("backgroundPosition","0 0")}}}}}}else{return}}},clickFunc:function(){$("a[name^=cuxiao_]").live("click",function(){if(typeof sa!="undefined"){sa.click.sendDatasIndex(this)}});$("a[name^=utf-8_]").live("click",function(){if(typeof sa!="undefined"){sa.click.sendDatasIndex(this)}});$("a[name^=plhc_]").live("click",function(){if(typeof sa!="undefined"){sa.click.sendDatasIndex(this)}});$("a[name^=yyyd_]").live("click",function(){if(typeof sa!="undefined"){sa.click.sendDatasIndex(this)}});$("a[name^=dacu_]").live("click",function(){if(typeof sa!="undefined"){sa.click.sendDatasIndex(this)}});$("area[name^='dacu']").live("click",function(){sa.click.sendDatasIndex(this)})},lazyDom:function(){lazyelem.listen(".lazy-dom","dom",function(a){lazyelem.listen($(a).find("img[lazy-src]"));if($(a).hasClass("commodity-floor")){if($(a).hasClass("wh")){main.wuhuoHandle($(a))}else{main.priceHandle($(a));main.boom(a)}}if($(a).attr("tuling")=="true"){ProductObj.lazyLoadInit($(a))}if($(a).hasClass("g-app")){main.yuyueGet(a)}lazyelem.detect()});lazyelem.listen(".good-show","dom",function(b){lazyelem.listen($(b).find("img[lazy-src]"));if($(b).find('input[type="hidden"]')&&$(b).find('input[type="hidden"]').attr("name")!=""){var a=$(b).find('input[type="hidden"]').attr("name");$(b).find("li").css("height",a);$(b).find("li a").css("height",a);$(b).find("li img").css("height",a)}});lazyelem.listen(".floor-appoint","dom",function(a){if(!$(a).hasClass("four")){main.getNewOrder($(a));main.boom($(a).find("ul"))}});lazyelem.listen(".time-line","dom",function(a){lazyelem.listen($(a).find("img[lazy-src]"));main.timeLine()});lazyelem.listen(".timedown-wrap","dom",function(a){lazyelem.listen($(a).find("img[lazy-src]"));main.countDown($(a))});lazyelem.listen(".new-userFloor","dom",function(e){lazyelem.listen($(e).find("img[lazy-src]"));if($(e).find(".floor-height")&&$(e).find(".floor-height").attr("name")!==""){var a=$(e).find(".floor-height").attr("name")+"px";$(e).find("li").css("height",a)}var d=$(e).find("li"),c=d.length;if(SFE.base.isLogin()){if($(e).find(".floor-switch")&&$(e).find(".floor-switch").attr("name")!==""){var g=$(e).find(".floor-switch").attr("name"),b="",f="newUser"+new Date().getTime();if(g){b="//lark.suning.com/lark-web/paidLevel/info.do?memberId="+main.userId}else{b="//lark.suning.com/lark-web/babyMother/mutiOrderInfo.do?channelType=1&memberId="+main.userId+"&deptId=ALL"}Util.getAjax(b,f).done(function(h){if(g){if(h&&h.data&&h.data.paidFlag&&h.data.paidFlag=="A9200010"&&h.data.newSuperFlag&&h.data.newSuperFlag=="A9200010"){$(e).find("li").show()}else{return}}else{if(h&&h.responseObject&&h.responseObject.ALL){$(e).find("li").show()}else{return}}})}}else{return}if(c==2){d.css({width:"490px"})}else{if(c==3){d.css({width:"324px",marginRight:"9px"})}else{if(c==4){d.css({width:"243px",marginRight:"6px"})}else{if(c==5){d.css({width:"194px",marginRight:"5px"})}}}}});lazyelem.listen(".line-fourPic","dom",function(a){main.getFourPic()});lazyelem.listen(".smad-five","dom",function(a){main.getCpmAd($(a))});lazyelem.listen(".gg-box","dom",function(a){main.getCpmAd2($(a))});lazyelem.listen(".nfive-entry","dom",function(a){main.getNewBanner($(a))});lazyelem.listen(".bn-box","dom",function(b){var a=$(b).attr("data-bnnum");main.getNewBanner2($(b),a)});lazyelem.listen(".four-good","dom",function(d){if($(d).find(".tab-nav")&&$(d).find(".tab-nav li").length>1){var b=$(d).find(".tab-nav li"),a=b.length;if(a==2){b.css({width:"492px",marginRight:"6px"}).show()}else{if(a==3){b.css({width:"326px",marginRight:"6px"}).show()}else{if(a==4){b.css({width:"243px",marginRight:"6px"}).show()}else{if(a==5){b.css({width:"194px",marginRight:"5px"}).show()}else{if(a==6){b.css({width:"160px",marginRight:"6px"}).show()}else{if(tabNavLeobj==7){b.css({width:"138px",marginRight:"4px"}).show()}}}}}}if(a>0){var c={container:$(d),tabNav:$(d).find(".tab-nav li"),tabCont:$(d).find(".tab-content"),contClassName:"tab-content"};main.tabSwitch(c)}}else{return}});lazyelem.listen(".tab-switch","dom",function(b){var a={container:$(b),tabNav:$(b).find(".tab-nav li"),tabCont:$(b).find(".tab-content"),contClassName:"tab-content"};main.tabSwitch(a)});lazyelem.listen(".tab-switch2","dom",function(d){var a=$(d).find(".tab-nav li"),c=a.length;if(c==2){a.css({width:"493px",marginRight:"6px"})}else{if(c==3){a.css({width:"326px",marginRight:"6px"})}else{if(c==4){a.css({width:"243px",marginRight:"6px"})}else{if(c==5){a.css({width:"194px",marginRight:"5px"})}else{if(c==6){a.css({width:"160px",marginRight:"6px"})}else{if(c==7){a.css({width:"137px",marginRight:"5px"})}}}}}}var b={container:$(d),tabNav:$(d).find(".tab-nav li"),tabCont:$(d).find(".tab-content"),contClassName:"tab-content"};main.tabSwitch(b,e);function e(f,h,i){var g=sn.tuijianDomain+"/recommend-portal/dyBase.jsonp?&u="+main.userId+"&c="+main.cookieId+"&cityId="+main.cityId+"&sceneIds=28-63&count=10&parameter="+i,k="newrec"+new Date().getTime();Util.getAjax(g,k).done(function(E){f.find(".tab-nav li").eq(h).attr("data-get",true);if(E&&E.sugGoods[0]&&E.sugGoods[0].skus&&E.sugGoods[0].skus.length>0){var p="";var y=E.sugGoods[0].skus,x=y.length;for(var w=0;w<x;w++){var A=y[w],C=A.sugGoodsCode?A.sugGoodsCode:"",n=A.shopCode?A.shopCode:"",o=A.supplierCode?A.supplierCode:"",q=A.productType?A.productType:"",t=A.pictureUrl?A.pictureUrl:"",z=A.sugGoodsName?A.sugGoodsName:"",v=A.price?A.price:"",D=A.handwork?A.handwork:"",l="plhc_none_reczhcxsms_"+(h+1)+"-"+(w+1)+"_p_"+n+"_"+C+"_"+D,m="baoguang_reczhcxsms_"+(h+1)+"-"+(w+1)+"_"+n+"_"+C+"_"+D+"_none";var r={partNumber:C,vendorCode:n,supplierCode:o,productType:q};var u=Util.getUrl(r,l),s=Util.getSku(r),B="";if(t!=""){B=t+"_200w_200h_4e"}else{B=Util.getPic(r)}p+='<li class="good-box comm-item tran" style="display: block;" data-partNumber="'+C+'" data-vendorid="'+n+'" '+s+'><div class="layer"><em></em></div><a id="'+m+'" target="_blank" name="'+l+'" href="'+u+'"><img alt="" src="'+B+'"><p class="good-name">'+z+'</p><p class="price"><span>任性价</span><i>¥</i><em>'+v+'</em></p><span class="enter-btn"><i class="qiang">立即进入</i><em></em></span></a></li>'}f.find(".tab-content").eq(h).find("ul").prepend(p);main.proFormat(f);main.boom(f);Util.baoguangFun("baoguang_reczhcxsms_"+(h+1))}else{return}}).fail(function(){return})}if($(d).find(".seen-btn")&&$(d).find(".seen-btn").attr("name")=="true"){main.tabSeen($(d))}});lazyelem.listen(".tab-switch3","dom",function(c){var a=main.chooseTab($(c))?main.chooseTab($(c)):0;var b={container:$(c),tabNav:$(c).find(".tab-nav li"),tabCont:$(c).find(".tab-content"),contClassName:"tab-content",index:a};main.tabSwitch(b);main.countDown($(c));main.paintColor($(c));main.proFormat($(c));$(c).find("li[data-djhid]").each(function(){if($(this).attr("data-djhid")!=""){main.juDom.push($(this))}if(main.getJuFlag){return}main.getJuFlag=true;main.getJuhui(main.juDom)})});lazyelem.listen(".new-tabSwitch","dom",function(c){var a=main.getClosest($(c))?main.getClosest($(c)):0;var b={container:$(c),tabNav:$(c).find(".tab-nav2 li"),tabCont:$(c).find(".tab-content"),contClassName:"tab-content",defaultIndex:a};main.tabSwitch(b)});lazyelem.listen(".asseen","dom",function(a){main.asseen($(a))});lazyelem.listen(".vip-floor","dom",function(a){if($(a).find("li[data-sku]").length<5){$(a).remove()}});lazyelem.listen(".rank-floor","dom",function(a){main.wuhuoHandle($(a))});lazyelem.listen(".bian-four-sm","dom",function(b){if($(b).find('input[type="hidden"]')&&$(b).find('input[type="hidden"]').attr("name")!=""){var a=$(b).find('input[type="hidden"]').attr("name");$(b).find("img").css("height",a)}});lazyelem.listen(".rec-comm","dom",function(b){lazyelem.listen($(b).find("img[lazy-src]"));main.getPreSale($(b));if($(b).find(".words-color")){var c=$(b).find(".words-color").attr("name");$(b).find(".name").css("color",c)}if($(b).find(".price-color")){var c=$(b).find(".price-color").attr("name");$(b).find(".price").css("color",c)}if($(b).find(".btn-color")){var c=$(b).find(".btn-color").attr("name"),a=$(b).find(".btn-color").val();$(b).find(".btn").css({color:c,background:a})}});lazyelem.listen(".fhc-floor","fn",function(a){main.getFhc($(a))});lazyelem.listen(".rec-entry","fn",function(a){lazyelem.listen($(a).find("img[lazy-src]"));main.getRecEntry($(a))});lazyelem.listen(".rec-entry2","fn",function(a){lazyelem.listen($(a).find("img[lazy-src]"));main.getRecEntry2($(a))});lazyelem.listen(".rec-twenty","dom",function(a){main.getRecItems($(a))});lazyelem.listen(".rec-twenty2","dom",function(a){main.getRecItems2()});lazyelem.listen(".rec-twenty-tab","dom",function(b){var a={container:$(b),tabNav:$(b).find(".tab-nav li"),tabCont:$(b).find(".tab-content"),contClassName:"tab-content"};main.tabSwitch(a,main.getRecItemsTab)});lazyelem.listen(".jintie","dom",function(a){$(a).click(function(){var b={appId:"",actId:"",cityId:main.cityId};ShoppingCouponApi.base.openDialog(b,null,null,null)})});lazyelem.listen(".quan-tab","dom",function(g){var c=main.getClosest($(g))?main.getClosest($(g)):0;var e={container:$(g),tabNav:$(g).find(".tab-nav li"),tabCont:$(g).find(".tab-content"),contClassName:"tab-content",defaultIndex:c};main.tabSwitch(e);if($(g).find('input[type="hidden"]')&&$(g).find('input[type="hidden"]').attr("name")!=""){var d=$(g).find('input[type="hidden"]').attr("name");$(g).find(".tab-content li").css("height",d+"px")}var b=$(g).find(".tab-nav li"),h=b.find("img"),f=b.length,a=$(g).find(".tab-content");if(f==2){b.css({width:"493px",marginRight:"6px"})}else{if(f==3){b.css({width:"326px",marginRight:"6px"})}else{if(f==4){b.css({width:"243px",marginRight:"6px"})}else{if(f==5){b.css({width:"194px",marginRight:"5px"})}else{if(f==6){b.css({width:"160px",marginRight:"6px"})}else{if(f==7){b.css({width:"137px",marginRight:"5px"})}}}}}}a.each(function(i,k){var l=$(k).find("li"),m=l.length;if(m==2){l.css({width:"495px"})}else{if(m==3){l.css({width:"330px"})}else{if(m==4){l.css({width:"247.5px"})}else{if(m==5){l.css({width:"198px"})}}}}});main.getQuanState($(g));main.getQuan($(g))});lazyelem.listen(".quan-floor","dom",function(a){var b=$("#quancolor")?$("#quancolor").attr("name"):"";$(".quan-floor").css("background",b);if($(a).find("li").length==3){$(a).find("img").css("height","132px");$(a).find("li").css({width:"270px",height:"112px",marginBottom:0});$(a).find("li img").css({width:"270px",height:"112px"});$(a).find(".layer").css({width:"270px",height:"112px"})}else{if($(a).find("li").length==4){$(a).find("img").css("height","150px");$(a).find("li").css({width:"206px",height:"130px",marginBottom:0});$(a).find("li img").css({width:"206px",height:"130px"});$(a).find(".layer").css({width:"206px",height:"130px"})}}main.getQuanState($(a));main.getQuan($(a))});lazyelem.listen(".new-quanFloor","dom",function(g){lazyelem.listen($(g).find("img[lazy-src]"));var a=$(g).find(".tab-nav li");if(a.length==3){a.css({width:"324px",marginRight:"9px"}).show()}else{if(a.length==4){a.css({width:"240px"}).show()}else{if(a.length==5){a.css({width:"190px"}).show()}}}var b=$(g).find(".tab-content");b.each(function(k,l){var i=$(l).find("li"),h=i.length;if(h==3){i.addClass("three")}else{if(h==4){i.addClass("four")}else{if(h==5){i.addClass("five")}else{if(h==1){i.addClass("one")}}}}i.each(function(m,n){!!$(n).attr("data-color")?$(n).css("background",$(n).attr("data-color")):""})});var f=$(g).find(".quan-bgColor");!!f.attr("name")?$(g).css("background",f.attr("name")):"";if($(g).find(".word-color")){var c=$(g).find(".word-color").attr("name"),e=$(g).find(".word-color").attr("data-bg");$(g).find(".quan-label").css({color:c,background:e})}if($(g).find(".word-color2")){var c=$(g).find(".word-color2").attr("name");$(g).find(".quan-price").css({color:c})}if($(g).find(".word-color3")){var c=$(g).find(".word-color3").attr("name");$(g).find(".quan-name").css({color:c})}if($(g).find(".word-color4")){var c=$(g).find(".word-color4").attr("name");$(g).find(".quan-desc").css({color:c})}if($(g).find(".word-color5")){var c=$(g).find(".word-color5").attr("name"),e=$(g).find(".word-color5").attr("data-bg");$(g).find(".quan-state a").css({color:c,background:e})}var d={container:$(g),tabNav:$(g).find(".tab-nav li"),tabCont:$(g).find(".tab-content"),contClassName:"tab-content"};main.tabSwitch(d);main.getQuanStateNew($(g));main.getQuan($(g))})},init:function(){main.judgeDomain();lazyelem.listen();lazyelem.detect();$(".bn-box").each(function(b,c){$(c).attr("data-bnnum",b+1)});main.cookieGet();main.lazyDom();UU.roll(".roll4",{itemWidth:400,itemHeight:33,speed:30,step:1,auto:true,direction:"right-to-left",itemCount:14});var a=[{width:0},{width:"123px"}];Util.turn($(".vertical"),300,a);main.floatBar({zIndex:7800,contents:$("#left_floatBar"),align:"left",vertical:"top"});main.floatBar({zIndex:7800,contents:$("#right_floatBar"),align:"right",vertical:"middle"});main.floatBarFunc();main.sideInit();main.clickFunc();if(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)){$(".side-bar").remove()}$("body").append("<style>.m-lion-dialog .container{display: block;}</style>")}};main.init()})(window.main=window.main||{},window.Util=window.Util||{});