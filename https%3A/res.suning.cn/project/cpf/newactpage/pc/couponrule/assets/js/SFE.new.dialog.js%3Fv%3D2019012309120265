var SFELion=SFELion||{};SFELion.dialog=SFELion.dialog||(function(WIN,DOC,$,undefined){if(!jQuery){throw new Error("The plugin requires jQuery")}var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var flag=true;$.fn.snfadeIn=function(speed,callback){return this.animate({opacity:"show"},speed,function(){if(!!msie){this.style.removeAttribute("filter")}if($.isFunction(callback)){callback()}})};var overlay='<div class="m-lion-dialog-overlay"><div class="close lay overlay" ></div><!--[if IE 6]><iframe class="close lay frame"  src="about:blank" frameborder="0" ></iframe><![endif]--></div>';var dialog='<div class="m-lion-dialog"><div class="container"><div class="title"><h3>温馨提示</h3></div><a href="javascript:;" class="btn close" title="关闭"></a><div class="content"></div></div></div>';function setup($){$.mLionDialog=function(opts){if(flag){install(opts);flag=false}};$.unmLionDialogNew=function(opts,cb){uninstall(opts);if($.isFunction(cb)){cb()}flag=true};$.mLionDialog.defaults={css:{width:"450px",position:"fixed",_position:"absolute"},overlayCss:{},title:"温馨提示",message:"",callback:null,http:null,fadeIn:0,fadeOut:0,overlay:true,overlayClick:false,timeout:null,draggable:true,closeFn:$.noop,iframeSrc:/^https/i.test(window.location.href||"")?"https://res.suning.cn/images/ShoppingArea/Common/blankbg.gif":"about:blank"};var t,inopts,store,defs;function install(opts){opts=$.extend({},$.mLionDialog.defaults,opts||{});if(t){clearTimeout(t)}$("body").append(dialog).append(overlay);close(opts);render(opts);inopts=opts}function uninstall(opts){if(!!opts){opts=$.extend({},$.mLionDialog.defaults,opts||{})}else{opts=inopts}var fadeOut=typeof opts.fadeOut=="number"?opts.fadeOut:0;$(".m-lion-dialog").children().fadeOut(0,function(){$(".m-lion-dialog").remove()});$(".m-lion-dialog-overlay").children().fadeOut(fadeOut,function(){$(".m-lion-dialog-overlay").remove()});opts.closeFn();if(store!==undefined){opts.message.html(defs)}store=undefined}function render(opts){if(!!opts.message&&!opts.http){if(typeof opts.message=="object"){store=opts.message.children().size()?opts.message.children():opts.message.html();defs=opts.message.children().size()?store.clone():opts.message.html();$(".m-lion-dialog").find(".content").append(store)}else{if(typeof opts.message=="string"){$(".m-lion-dialog").find(".content").html(opts.message)}}}else{if(!opts.message&&!!opts.http&&typeof opts.http=="function"){opts.http($(".m-lion-dialog"),opts)}else{if(!opts.message&&!opts.http){throw new Error("至少,必须设置其中一个参数")}}}if(typeof opts.css=="object"){$(".m-lion-dialog").css(opts.css);if(ie6){$(".m-lion-dialog").css("position","absolute")}}var $dialog=$(".m-lion-dialog");var $overlay=$(".m-lion-dialog-overlay");var $lay=$(".m-lion-dialog-overlay .lay");var fadeIn=typeof opts.fadeIn=="number"?opts.fadeIn:0;var css=$.extend({},$.mLionDialog.defaults.css,opts.css||{});$dialog.find(".container").snfadeIn(0,function(){if(typeof opts.callback=="function"){opts.callback(this,opts)}});if(typeof opts.title=="string"){$(".m-lion-dialog .title h3").html(opts.title)}function resize(){var $m=$(".m-lion-dialog").height();var $w=$(WIN).height();var $b=$("body").height();if(ie6){$dialog.css({marginLeft:-$dialog.width()/2,marginTop:($m>$w?0:($(document).scrollTop()-$(".m-lion-dialog").height()/2)),top:($m>$w?0:"50%")})}else{$dialog.css(css).css({marginLeft:-$dialog.width()/2,marginTop:($m>$w?0:-$m/2),top:($m>$w?0:"50%")})}$lay.height(Math.max($b,$w))}resize();if(ie6){$(WIN).scroll(function(){$dialog.css({marginTop:($(".m-lion-dialog").height()>$(WIN).height()?$(document).scrollTop():($(document).scrollTop()-$(".m-lion-dialog").height()/2))})})}$(WIN).resize(function(){resize()});var overlayCss=$.extend({},$.mLionDialog.defaults.overlayCss,opts.overlayCss||{});if(opts.overlay===true){$lay.css(overlayCss).snfadeIn(fadeIn)}}function close(opts){var closeArr=[".close"];if(typeof opts.timeout=="number"){t=setTimeout(function(){$.unmLionDialogNew()},opts.timeout)}if(!!opts.overlayClick){closeArr.push(".m-lion-dialog-overlay")}for(var i=0;i<closeArr.length;i++){$(".m-lion-dialog").on("click.addedClose",closeArr[i],function(){$.unmLionDialogNew()})}}$.resizeLionDialog=function(){var $dialog=$(".m-lion-dialog");var $m=$(".m-lion-dialog").height();var $w=$(WIN).height();var $b=$("body").height();var $lay=$(".m-lion-dialog-overlay .lay");if(ie6){$dialog.css({marginLeft:-$dialog.width()/2,marginTop:($m>$w?0:($(document).scrollTop()-$(".m-lion-dialog").height()/2)),top:($m>$w?0:"50%")})}else{$dialog.css({marginLeft:-$dialog.width()/2,marginTop:($m>$w?0:-$m/2),top:($m>$w?0:"50%")})}$lay.height(Math.max($b,$w))}}setup(jQuery)})(window,document,jQuery);if(typeof define==="function"){define("SFELion.dialog.dev",["jquery"],function(require,exports,module){module.exports=SFELion.dialog})};