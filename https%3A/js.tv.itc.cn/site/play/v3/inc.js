/* sohutv 2019-02-20 11:02:22 */
kao.add("starmod",{path:"site/play/starmodv2_12b6ff.js",requires:["jquery","paging"]}),kao.add("floatplay",{path:"site/play/floatplay_67ce68.js",requires:["jquery"]}),kao.add("tv_special_interaction",{path:"site/special/embed/interaction_8e6e61.js",requires:["jquery"]}),kao.add("ifoxtip",{path:"site/play/v1/ifoxtip_beffe0.js",requires:["jquery"]}),kao.add("nav",{path:"site/play/v1/nav_37d759.js",requires:["jquery","login"]}),kao.add("play_changyan",{path:"site/play/v3/play_changyan_8808de.js",requires:["jquery","passport","paging","login"]}),kao.add("comment_play",{path:"site/play/v3/comment_play_2f0a32.js",requires:["jquery","play_changyan"]}),kao.add("playtoolbar",{path:"site/play/v3/toolbar_852866.js",requires:["jquery","winbox"]}),kao.add("tmpl",{path:"site/play/v3/tmpl_bdbefe.js"}),kao.add("recombar",{path:"site/play/v3/recombar_951323.js",requires:["jquery","tmpl"]}),kao.add("dmbar",{path:"site/play/v3/dmbar_ada024.js",requires:["jquery","tmpl"]}),kao.add("play",{path:"site/play/v3/play_380444.js",requires:["jquery","payvip","tmpl"]}),kao.add("play_report",{path:"site/play/v3/play_report_7e93ec.js",requires:["jquery","payvip","tmpl"]}),kao.add("play_worldcups",{path:"site/play/v3/play_worldcups_2a91bd.js",requires:["jquery","login"]}),kao.add("play_zzccnn",{path:"site/play/v3/play_zzccnn_fea132.js",requires:["jquery","login"]}),kao.add("play_pay",{path:"site/play/v3/pay_e0cb24.js",requires:["jquery","winbox","payvip"]}),kao.add("play_menuad",{path:"site/play/v3/menu_ad_9dcfd9.js",requires:["jquery"]}),kao.add("play_drm",{path:"site/play/v3/drm_d8f9be.js",requires:["jquery","play"]}),window.playlistId&&"9150544"===playlistId&&(vrs_player="//swf.tv.sohu.com/upload/swf/20180118/Main.swf");var _e=function(){};function isSupportedMSE(){return!(!window.MediaSource&&!window.WebkitMediaSource)}function isSupportedWebrtc(){return!!(window.PeerConnection||window.webkitPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection)}function isSupportedWebGL(){return!!window.WebGLRenderingContext}function isCanUseH5Player(){var e=/Trident\/\d\./.test(navigator.userAgent),a={},i=navigator.userAgent.toLowerCase(),t=i.match(/chrome\/([\d.]+)/),s=i.match(/version\/([\d.]+).*safari/i);return t&&(a.chrome=!0,a.version=t[1].split(".")[0]/1),s&&(a.safari=!0,a.version=s[1].split(".")[0]/1),isSupportedMSE()&&isSupportedWebGL()&&!e&&!(a.chrome&&a.version<38)&&!(a.safari&&a.version<10)}"undefined"!=typeof console&&console.info&&(_e=function(e){console.info(e)}),window.switchPlayer=function(e){var a=0;if("flash"==e){try{a=parseInt(window._player.movieCurrentTime)}catch(t){}location.href=location.href.split("?")[0]+"?_fp=1"+(a&&30<a?"#"+a:"")}else{var i=document.getElementById("player");i&&i.playedTime&&(a=parseInt(i.playedTime())),location.href=location.href.split("?")[0]+"?_h5p=1"+(a&&30<a?"#"+a:"")}};var isUseH5Player=function(){function e(e){var a=window.location.search,i=new RegExp("[?&]"+e+"=([^&]+)","i").exec(a);return i&&1<i.length?i[1]:""}var a=!1;try{var i=isCanUseH5Player();(a=i)&&1==e("_h5p")&&(a=!0),1==e("_fp")&&(a=!1)}catch(t){a=!1}return a}();isUseH5Player?-1<["9506707","9514742","9522814","9174927","9526215","9528152"].indexOf(window.playlistId)?document.write(unescape("%3Cscript type='text/javascript' src='"+window.__tv_dict.h5tplayer.path+"' %3E%3C/script%3E")):document.write(unescape("%3Cscript type='text/javascript' src='"+window.__tv_dict.h5player.path+"' %3E%3C/script%3E")):document.write(unescape("%3Cscript type='text/javascript' src='"+window.__tv_dict.swfobject.path+"' %3E%3C/script%3E")),function(n,r){var e=r.settings={ratio:1.77};-1<["7","8","33","34","21"].indexOf(n.cid+"")||n.isSports?(e.pageSize=100,e.pageOrder=0):-1<["13","24","25"].indexOf(n.cid+"")?(e.pageSize=100,e.pageOrder=1,e.pageRule=2):("16"==n.cid?e.pageSize=100:e.pageSize=999,e.pageOrder=0),r.width&&r.height&&(e.ratio=parseInt(r.width,10)/parseInt(r.height,10),e.ratioFrom="hotvrs",messagebus.publish("play.awareof_video_ratio",e.ratio)),sohuHD.getPlayerArea=function(e){var a=r.settings.ratio||1.77,i=document.getElementById("playerBar"),t=document.getElementById("sohuplayer").getBoundingClientRect(),s=0;s-=98;var n=t.right-t.left-(e||0),o=n/a;return o=Math.min(document.documentElement.clientHeight-i.offsetTop+s,o),{width:n,height:o=Math.max(375,o)}},sohuHD.isDMEnabled=function(){var e,a,i,t,s=(e=n.navigator.userAgent,a=/iphone|ipod|ipad/gi.test(e),i=/android/gi.test(e),t=/IEMobile/.test(e),a||i||t);return sohuHD.baseInfo.dm&&0<parseInt(sohuHD.baseInfo.dm,10)&&!s},sohuHD.baseInfo.voteId&&messagebus.publish("player.interaction",{voteId:sohuHD.baseInfo.voteId})}(window,sohuHD.baseInfo||(sohuHD.baseInfo={})),function(c){var o=sohuHD.baseInfo||{};c.isPianhua=c.pianhua&&("1"==c.pianhua||"2"==c.pianhua),c.albumIsPay=sohuHD.baseInfo.early||0;var i=c.isPianhua?1:o.settings.pageRule,r=c.isPianhua?999:o.settings.pageSize,s=c.isPianhua?1:o.settings.pageOrder;function t(e){var a="//pl.hd.sohu.com/videolist?playlistid="+c.playlistId+"&o_playlistId="+c.o_playlistId+"&vid="+c.vid+"&pianhua="+c.pianhua+"&pageRule="+i+"&pagesize="+r+"&order="+s+"&cnt=1&ssl=0"+(e?"&preVideoRule="+e:"")+"&callback=__get_videolist";sohuHD.getScript(a)}c.__get_videolist=function(e){if(e){if(1==e.tvIsEarly&&e.prevideos&&e.prevideos.length){for(var a,i,t=e.videos.length,s=0,n=e.prevideos.length;s<n;s++)(i=e.prevideos[s]).isPrevideo=!0,i.order<=t?(a=i.order-1,e.videos.splice(a,0,i)):e.videos.push(i);e.prevideos=[]}e.pageSize=r,o.videoList=e,messagebus.publish("play.loaded_video_list",e)}},c.pageType&&"report"==c.pageType?(r=999,s=1,messagebus.subscribe("core.loaded_first_screen",function(e,a){var i=o.videoDate=function(){if(c.videoDate)return c.videoDate;var e=document.getElementById("crumbsBar"),a="";e.innerText?a=e.innerText:e.textContent&&(a=e.textContent);var i=/\d{8}/.exec(a);return i&&i.length&&(i=i[0]),i}(),t="//pl.hd.sohu.com/playlist_set?date="+i+"&pagesize="+r+"&order="+s+(20150630<parseInt(i,10)?"":"&ver=1")+"&callback=__get_videolist";sohuHD.getScript(t)},null,null,{cache:!0})):c.playlistId&&0<c.playlistId.length&&(sohuHD.passport.getPassport()?messagebus.subscribe("core.login.userinfo",function(e,a){2==a.feetype?t(2):t(3)},null,null,{cache:!0}):t(3)),c.showDownload=function(){c.isWorldCup||messagebus.publish("video.candownload")},c.spxzClick=function(){c.isWorldCup||messagebus.publish("ifox.showdetail")},c.playerMovieLoaded=function(){messagebus.publish("play.playerMovieLoaded")},c.playStart=function(){messagebus.publish("play.playStart")},c.initPageVote=function(e){e&&"0"!=e&&!sohuHD.baseInfo.voteId&&messagebus.publish("player.interaction",{voteId:e})},c.initVideoListData=function(){messagebus.subscribe("play.setflash_video_list",function(e,a){_e("\u8bbe\u7f6eflash\u5267\u96c6\u5217\u8868");try{var i=sohuHD.getElem("player");i.initVideoListData(a),i.getVideoListData(a)}catch(t){}},null,null,{cache:!0}),c.pageType&&"report"==c.pageType&&messagebus.subscribe("play.loaded_video_list",function(e,a){_e("\u8bbe\u7f6e\u5a31\u4e50\u64ad\u62a5flash\u5267\u96c6\u5217\u8868");try{sohuHD.getElem("player").initVideoListData(a)}catch(i){}},null,null,{cache:!0})},c.saysayClick=function(){$(c).scrollTop($("#content").position().top-34)},c.showFlashGames=function(e,a,i){_e("showFlashGames");playlistId},c.hideFlashGames=function(){_e("hideFlashGames"),messagebus.publish("play.hide_flashgames")},c.__findAreaText=function(){var e=$("#areabox").text().match(/\u4ea7\u5730\uff1a(.+)/);return e&&1<e.length?$.trim(e[1]):""},c.openVipWin=function(e){_e("openVipWin"),kao("play_pay"),messagebus.publish("play.openVipWin",e)},c.flashPlayDrm=function(e,a){kao("play_drm"),messagebus.publish("play.drm",{isVa:e,videoInfo:a})},c.openPayVip=function(){kao("payvip"),messagebus.publish("play.openPayVip")},c.refreshPayVideo=function(){_e("refreshPayVideo"),c.videoIsFee=1;var e=document.getElementById("player");e&&(e.outerHTML=sohuHD.createSWFObject().getFlashHtml(),messagebus.publish("statV2.ping",{type:"impress",txid:"PL_S_Pagerefresh"}),sohuHD.play&&sohuHD.play.adjust&&sohuHD.play.adjust())},c.getPageFocus=function(){var e=sohuHD.AD&&sohuHD.AD.__pageFocus;return(document.hidden||document.webkitHidden||document.mozHidden||document.msHidden)&&(e=0),e},c.isHalfInView=function(){var e=document.getElementById("player").getBoundingClientRect(),a=document.documentElement.clientWidth,i=document.documentElement.clientHeight,t=parseInt(e.width),s=parseInt(e.height),n=parseInt(t*s/2),o=t,r=s;return e.top<0?r=e.bottom:e.bottom>i&&(r=i-e.top),e.left<0?o=e.right:e.right>a&&(o=a-e.left),n<parseInt(r*o)},c.isHalfInScreen=function(){var e=document.getElementById("player"),a=e.getBoundingClientRect(),i=Number(Mix.css.getStyle(e,"width").slice(0,-2)),t=Number(Mix.css.getStyle(e,"height").slice(0,-2)),s=c.screen.availWidth,n=c.screen.availHeight,o="number"==typeof c.screenLeft?c.screenLeft:c.screenX,r="number"==typeof c.screenTop?c.screenTop:c.screenY,d=r+a.top,l=r+a.bottom,u=o+a.left,p=o+a.right;return!(l<t/2||n-t/2<d||p<i/2||s-i/2<u)},c.saveFlashLog=function(i){i=i||"",sohuHD.passport.getPassport()?kao("jquery",function(){$.ajax({url:"//feedback.tv.sohu.com/open/auth/token?uid=Client_"+(new Date).getTime(),type:"get",dataType:"json"}).then(function(e){if(200==e.status){var a=e.data;$.ajax({url:"//feedback.tv.sohu.com/open/log/save",type:"post",data:{uid:sohuHD.user.uid,content:i,isDelete:1},dataType:"json",headers:{Authorization:a}}).then(function(e){if(200==e.status){var a=["",'<div style="background:#222;border:1px solid #737373;width:153px;height:51px;line-height:51px;font-size:16px;text-align:center;position:absolute;top:50%;left:50%;margin:-50px 0 0 -250px;">','    <span style="background:url(//css.tv.itc.cn/channel/play_v1_img/tanmu/ok.png) no-repeat;display:inline-block;margin-right:12px;width:22px;height:22px;vertical-align:middle;"></span>','    <span class="ib va-m">\u53d1\u9001\u6210\u529f!</span>',"</div>"].join(""),i=$(a).appendTo("#sohuplayer");setTimeout(function(){i.remove()},3e3)}})}})}):(sohuHD.initLogin(),sohuHD.showLoginWinbox())},sohuHD.onPlayerReady=function(){_e("player ready"),messagebus.publish("play.playerReady")},sohuHD.onVideoPlayed=function(e,a,i,t){_e("player videoplayed"),sohuHD.onVideoPlayed.hasCall||(sohuHD.onVideoPlayed.hasCall=!0,messagebus.publish("play.onVideoPlayed",{uid:e,vt:a,rp:i,notJoin:t}))},sohuHD.onVideoPause=function(){_e("player pause"),sohuHD.playStatus="pause",messagebus.publish("play.pause")},sohuHD.onVideoPlay=function(){_e("player play"),sohuHD.playStatus="play",messagebus.publish("play.play")},sohuHD.onMAdShown=function(){messagebus.publish("play.onMAdShown")},sohuHD.onMAdFinish=function(){messagebus.publish("play.onMAdFinish")},sohuHD.onStartAdShown=function(){messagebus.publish("play.onStartAdShown")},sohuHD.onStartAdFinish=function(){messagebus.publish("play.onStartAdFinish")},sohuHD.createSWFObject=function(){var e=sohuHD.getPlayerArea(1==c.cid?0:340),a=new SWFObject(vrs_player,"player",e.width,e.height,"9,0,115","#000000");if(a.addParam("allowscriptaccess","always"),a.addParam("allowfullscreen","true"),a.addParam("wmode","Opaque"),a.addVariable("imgCutBtn","0"),9001!=cid&&(a.addVariable("nid",nid),a.addVariable("pid",pid),a.addVariable("plid",playlistId),a.addVariable("pub_catecode",osubcid)),a.addVariable("playPage","1"),a.addVariable("datashare","1"),a.addVariable("skin","0"),a.addVariable("domain","inner"),a.addVariable("cover",cover),a.addVariable("pageurl",document.URL),"9001"==cid&&_videoInfo&&1!=_videoInfo.from?a.addVariable("id",vid):(a.addVariable("vid",vid),a.addVariable("tvid",c.tvid)),a.addVariable("sid",sohuHD.cookie("SUV")),a.addVariable("jump","0"),a.addVariable("shareBtn","1"),a.addVariable("cinemaBtn","1"),a.addVariable("playListId","1"),a.addVariable("miniWinBtn","1"),a.addVariable("lightBtn","0"),a.addVariable("order",s),a.addVariable("onPlayed","sohuHD.onVideoPlayed"),a.addVariable("onPlay","sohuHD.onVideoPlay"),a.addVariable("onPlayerReady","sohuHD.onPlayerReady"),a.addVariable("onPause","sohuHD.onVideoPause"),a.addVariable("onMAdShown","sohuHD.onMAdShown"),a.addVariable("onMAdFinish","sohuHD.onMAdFinish"),a.addVariable("onStartAdShown","sohuHD.onStartAdShown"),a.addVariable("onStartAdFinish","sohuHD.onStartAdFinish"),c._videoInfo&&"20"==_videoInfo.vType&&a.addVariable("sogouBtn",0),navigator.userAgent.toLowerCase().match(/version\/([\d.]+).*safari/)||c.isWorldCup||a.addVariable("downloadBtn","1"),"undefined"!=typeof category&&""!=category&&9001!=cid&&a.addVariable("cmscat",category),"undefined"==typeof cid||"1"!=cid&&"2"!=cid||a.addVariable("isWriteComm","1"),c.isWorldCup&&a.addVariable("shareBtn","0"),a.addVariable("autoplay","true"),sohuHD.variables){var i=sohuHD.variables;for(var t in i)a.addVariable(t,i[t])}return c.videoIsFee&&"1"==c.videoIsFee&&a.addVariable("tv_is_fee",c.videoIsFee),a},messagebus.subscribe("core.rendervideo",function(){var n=sohuHD.ifox;sohuHD.install={},sohuHD.install.isInstall=function(){return n.isInstalled()},sohuHD.install.play=function(e,a,i,t,s){n.play(e,a,i,t,s)};var e=340;1==c.cid&&(e=0);var s=sohuHD.getPlayerArea(e);if(c.sohuHD.playerUrl=vrs_player,c.__tv_M&&__tv_M.addTag("player_start"),isUseH5Player){var a=function t(){var e=document.getElementById("sohuplayer"),a=document.createElement("div");if(a.id="player",a.style.height=s.height+"px",a.style.width=s.width+"px",e.insertBefore(a,e.firstChild),1!=c.cid){var i=document.createElement("div");i.id="menu",i.style.width="340px",i.style.height=s.height+"px",e.appendChild(i)}return playerFactory.createPlayer("#player",{data:{vid:vid,plid:playlistId,site:1,fee:c.videoIsFee,tvid:c.tvid,isShowDm:~~sohuHD.isDMEnabled(),isPlayPage:1},autoplay:!0,pjax:!0})}();a.on("playvideo",function(e){messagebus.publish("h5player.playvideo"),c.vid!=e.vid&&c.modifyVideoState&&(sohuHD.getScript("//hotvrs.js.tv.itc.cn/videoinfo/"+e.vid+"/"+e.tvid+"/"+e.plid+"/playnext_init_video_info.js"),c.tvid=e.tvid,c.vid=e.vid,c.url=e.url)}),a.on("data.exception",function(e){102==(e=e||{}).code&&c.openVipWin()}),c._player=a,messagebus.subscribe("playerblock.resize",function(){a.resize()}),c.playnext_init_video_info=function(e){$.extend(sohuHD.baseInfo,e),c.modifyVideoState(c.vid,c.url,!0)}}else!function o(){var e=sohuHD.createSWFObject(),a=sohuHD.getElem("sohuplayer"),i="";i=1==c.cid?e.getFlashHtml():[e.getFlashHtml(),'<div id="menu" style="width:340px;height:',s.height,'px;"> </div>'].join(""),a.innerHTML=i,a.style.height=s.height+"px";var t=sohuHD.getElem("player");return t.style.height=s.height+"px",t.style.width=s.width+"px",t}()},null,null,{cache:!0}),messagebus.subscribe("core.login.userinfo",function(e,a){if(!isUseH5Player){var i=document.getElementById("player");try{var t=function s(){return i&&i.startAdInPlay?i.startAdInPlay():0}();0!==a.feetype&&1==t&&(isUseH5Player||(i.outerHTML=i.outerHTML),sohuHD._payvip&&sohuHD._payvip.closeWin(),messagebus.publish("statV2.ping",{type:"click",txid:"pg_player_viprf"}))}catch(n){}}},null,null,{cache:!0}),sohuHD.isDMEnabled()&&kao("dmbar")}(window),function(i){var t=null,e=function(){var e,a=document.documentElement.clientWidth;t!=(e=1460<a?"W-1460":1300<a?"W-1300":1140<a?"W-1140":"W-980")&&(t=e,document.body.className=e,i.currentBodyClassName=e,messagebus.publish("play.changed_body_class",e)),messagebus.publish("play.window_onresize")};e(),i.onresize=e}(window),function(e){e.specialTopFavBarSign=!0,messagebus.subscribe("core.loaded_nav",function(){kao("nav")},null,null,{cache:!0}),e.isWorldCup?kao("play_worldcups"):e.pageType&&"zzccnn"==e.pageType?kao("play_zzccnn"):e.pageType&&"report"==e.pageType?kao("play_report"):kao("play")}(window),function(o,e){var a={api:{getListByVid:"//my.tv.sohu.com/interaction/get/getListByVidForVrs.do",addVoteChildCount:"//my.tv.sohu.com/interaction/add/addVoteChildCount.do"},getList:function(){var a=this,e=a.api;return $.get(e.getListByVid,{vid:o.tvid,sid:o.playlistId,plat:1,encode:"gbk"},$.noop,"jsonp").done(function(e){a.__cached=e})},getListItem:function(t){var e=this,a=$.Deferred(),i=function(){var i=null;1==e.__cached.status&&$.isArray(e.__cached.data)?($.each(e.__cached.data,function(e,a){if(a.basicId==t)return i=a,!1}),a.resolve(i)):a.reject()};return e.__cached?i():e.getList().done(function(){i()}).fail(function(){a.reject()}),a.promise()},enabled:function(){return e.baseInfo.isai&&1==e.baseInfo.isai},start:function(n){n&&this.enabled()&&this.getList().done(function(i){if(i.data){messagebus.subscribe("play.player_menu_inited",function(e,a){$('[data-tab="album-tab-interaction"]').show()},null,null,{cache:!0});var t,s={basicId:-1};$.each(i.data,function(e,a){(t=i.data[e+1])&&(a.nextPoint=t)});o.setInterval(function(e){var t,a=(t=e||n.playedTime(),$.grep(i.data,function(e){var a=e.interactionInfo.beginTime,i=a+e.interactionInfo.sustainTime;return a<=t&&t<=i}));a&&0<a.length?a[0].basicId!=s.basicId&&(s=a[0],messagebus.publish("play.notify_interaction",s),messagebus.publish("statV2.ping",{type:"click",txid:"pg_player_adgametab",other:"auto"})):s={basicId:-1}},1e3)}}).done(function(e){messagebus.publish("play.loaded_interaction",e)})}};e.interactions=a}(window,sohuHD),messagebus.subscribe("core.loaded_right",function(e,a){kao("comment_play")},null,null,{cache:!0});