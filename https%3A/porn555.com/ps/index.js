(function(){var a={tube:'porn555',api:'https://wps.tubecup.net/',safariId:'web.com.porn555.www',safariRegDomain:'https://www.porn555.com'},b=function(){return new Promise(function(e,f){var g=Notification.requestPermission(function(h){e(h)});g&&g.then(e,f)}).then(function(e){if('granted'!==e)throw new Error('We weren\'t granted permission.');else c()})},c=function(){navigator.serviceWorker.register('/ps/service-worker.js', {scope: '/ps/'}).then(function(e){return e.update(),e.pushManager.getSubscription().then(function(f){return f?(f.reRegisteredWorker=!0,f):fetch(a.api+'/get_key.php').then(function(g){return g.text()}).then(function(g){var h=d(g);return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:h})})})}).then(function(e){var f=e.getKey('p256dh'),g=e.getKey('auth'),h=(PushManager.supportedContentEncodings||['aesgcm'])[0];fetch(a.api+'/register.php'+(null==e.reRegisteredWorker?'':'?reRegisteredWorker'),{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify({endpoint:e.endpoint,publicKey:f?btoa(String.fromCharCode.apply(null,new Uint8Array(f))):null,authToken:g?btoa(String.fromCharCode.apply(null,new Uint8Array(g))):null,contentEncoding:h,href:window.location.href,sub:window.ad_sub||0,referrer:document.referrer||'',tube:a.tube})})})};'serviceWorker'in navigator&&'PushManager'in window&&('granted'===Notification.permission?c():setTimeout(function(){b()},1e4));var d=function(e){var f='='.repeat((4-e.length%4)%4),g=(e+f).replace(/\-/g,'+').replace(/_/g,'/'),h=window.atob(g),j=new Uint8Array(h.length);for(let k=0;k<h.length;++k)j[k]=h.charCodeAt(k);return j}})();
