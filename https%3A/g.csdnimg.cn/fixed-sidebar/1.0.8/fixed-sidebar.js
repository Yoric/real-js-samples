!function(h,t){if(void 0===h.csdn&&(h.csdn={}),!jQuery)return;h.csdn.fixedSidebar=function(t){var i={targetBox:$(".persion_article"),mainBox:$("main"),sidebar:$("aside"),direction:"right",position:"fixed",top:0,bottom:0,zIndex:99,sidebarRightMargin:8,sidebarLeftMargin:15};t&&$.extend(i,t);var o=i.sidebar.width(),s=i.targetBox.offset().top,r=$(h).scrollLeft(),a=!0,n=0,d=i.sidebar.height();function e(){n=r,r=$(h).scrollLeft();var t,e=i.sidebar.offset().left-$(h).scrollLeft()+(n-r);t=$(h).scrollTop(),i.sidebar.height()>d?s=i.sidebar.height()-d+s:s-=d-i.sidebar.height(),d=i.sidebar.height(),s+i.sidebar.height()<=$(h).height()?s<t?i.sidebar.css({position:i.position,top:parseInt(i.top)+"px","z-index":parseInt(i.zIndex),left:e,width:o,bottom:"auto"}):i.sidebar.removeAttr("style"):i.mainBox.height()>i.sidebar.height()?i.targetBox.height()<=$(h).height()&&s-t+i.targetBox.height()<=$(h).height()?i.sidebar.css({position:i.position,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:e,width:o,top:"auto"}):i.targetBox.height()>$(h).height()&&s<t&&i.targetBox.height()-s-t<=$(h).height()?i.sidebar.css({position:i.position,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:e,width:o,top:"auto"}):i.sidebar.removeAttr("style"):i.sidebar.removeAttr("style"),a=!0}e(),$(h).on("scroll",function(){a&&(setTimeout(e,200),a=!1)}),$(h).on("resize",function(){var t,e=$(h).scrollTop();t="right"===i.direction?i.mainBox.offset().left+i.mainBox.width()+parseInt(i.sidebarLeftMargin):i.mainBox.offset().left-i.sidebar.width()-parseInt(i.sidebarRightMargin),i.mainBox.height()>i.sidebar.height()&&s<e&&s+i.targetBox.height()>=$(h).height()?i.sidebar.css({position:i.position,left:t,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:t,width:o,top:"auto"}):s+i.sidebar.height()<=$(h).height()&&s<e?i.sidebar.css({position:i.position,top:parseInt(i.top)+"px","z-index":parseInt(i.zIndex),left:t,width:o,bottom:"auto"}):i.sidebar.removeAttr("style")})}}(window,document);