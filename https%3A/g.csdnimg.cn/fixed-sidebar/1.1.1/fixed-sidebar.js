!function(n,t,d){if(void 0===n.csdn&&(n.csdn={}),!jQuery)return;n.csdn.fixedSidebar=function(t){var i={targetBox:d(".persion_article"),mainBox:d("main"),sidebar:d("aside"),direction:"right",position:"fixed",top:0,bottom:0,zIndex:99,sidebarRightMargin:8,sidebarLeftMargin:15};t&&d.extend(i,t);var o=i.sidebar.width(),r=i.targetBox.offset().top,s=!0,a=i.sidebar.height();function e(){if("right"===i.direction)var t=i.mainBox.offset().left+i.mainBox.width()-d(n).scrollLeft()+parseInt(i.sidebarLeftMargin);else t=i.mainBox.offset().left-i.sidebar.width()-d(n).scrollLeft()-parseInt(i.sidebarRightMargin);var e;e=d(n).scrollTop(),i.sidebar.height()>a?r=i.sidebar.height()-a+r:r-=a-i.sidebar.height(),a=i.sidebar.height(),r+i.sidebar.height()<=d(n).height()?r<e?i.sidebar.css({position:i.position,top:parseInt(i.top)+"px","z-index":parseInt(i.zIndex),left:t,width:o,bottom:"auto"}):i.sidebar.removeAttr("style"):i.mainBox.height()>i.sidebar.height()?i.targetBox.height()<=d(n).height()&&r-e+i.targetBox.height()<=d(n).height()?i.sidebar.css({position:i.position,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:t,width:o,top:"auto"}):i.targetBox.height()>d(n).height()&&r<e&&i.targetBox.height()-r-e<=d(n).height()?i.sidebar.css({position:i.position,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:t,width:o,top:"auto"}):i.sidebar.removeAttr("style"):i.sidebar.removeAttr("style"),s=!0}e(),d(n).on("scroll",function(){s&&(setTimeout(e,200),s=!1)}),d(n).on("resize",function(){var t,e=d(n).scrollTop();t="right"===i.direction?i.mainBox.offset().left+i.mainBox.width()-d(n).scrollLeft()+parseInt(i.sidebarLeftMargin):i.mainBox.offset().left-i.sidebar.width()-d(n).scrollLeft()-parseInt(i.sidebarRightMargin),i.mainBox.height()>i.sidebar.height()&&r<e&&r+i.targetBox.height()>=d(n).height()?i.sidebar.css({position:i.position,left:t,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:t,width:o,top:"auto"}):r+i.sidebar.height()<=d(n).height()&&r<e?i.sidebar.css({position:i.position,top:parseInt(i.top)+"px","z-index":parseInt(i.zIndex),left:t,width:o,bottom:"auto"}):i.sidebar.removeAttr("style")})}}(window,document,jQuery);