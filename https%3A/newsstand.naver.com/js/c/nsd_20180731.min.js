if(typeof Newsstand=="undefined"){Newsstand={};
}Newsstand.Main={pressListAll:$A(),beforePress:null,afterPress:null,myListHash:$H(),pressListHash:$H(),excludeListAll:$A(),delayListAll:$A(),panelTemplate:null,footerTemplate:null,tooltipTemplate:null,panelList:$A(),itemPerPage:0,itemIndex:0,footerPageIndex:0,lastIndex:0,pressLastIndex:0,previousIndex:-1,nextIndex:-1,currentPressId:null,mClientX:0,mClientY:0,bActiveWindow:false,rollingDirection:null,init:function(){Newsstand.Header.init();
if(!isEmpty){Newsstand.Main.make();
Newsstand.Main.loadTemplate();
Newsstand.Panel.init();
Newsstand.Footer.init();
Newsstand.AutoRolling.init();
Newsstand.AutoRolling.start();
$Fn(this.onMouseMoveDocument,this).attach(document,"mousemove");
if($Agent().navigator().ie){$Fn(this.onOutDocument,this).attach(document,"focusout");
$Fn(this.onInDocument,this).attach(document,"focusin");
}else{$Fn(this.onOutDocument,this).attach(window,"blur");
$Fn(this.onInDocument,this).attach(window,"focus");
}var g=$$(".lst_snb > li > a");
$Fn(this.onInRollingArea,this).attach(g,"focus");
$Fn(this.onOutRollingArea,this).attach(g,"blur");
var f=$$(".lst_snb > li > strong > a");
$Fn(this.onInRollingArea,this).attach(f,"focus");
$Fn(this.onOutRollingArea,this).attach(f,"blur");
var c=$$("a",$$.getSingle(".nav"));
$Fn(this.onInRollingArea,this).attach(c,"focus");
$Fn(this.onOutRollingArea,this).attach(c,"blur");
var b=$$(".lst_news_wp > ul > li > a");
$Fn(this.onInRollingArea,this).attach(b,"focus");
$Fn(this.onOutRollingArea,this).attach(b,"blur");
var a=$$(".lst_news > a");
$Fn(this.onInRollingArea,this).attach(a,"focus");
$Fn(this.onOutRollingArea,this).attach(a,"blur");
$Fn(function(h){if(this.isParentOf($A(["panel_inner"]),h.element)){this.onInRollingArea();
}else{this.onOutRollingArea();
}},this).attach($("container"),"mouseover");
Newsstand.Main.bActiveWindow=true;
}else{var e=$Element($$.getSingle(".notice"));
if(e){e.show();
}var d=$$.getSingle(".btn_stt2");
if(d){$Fn(Newsstand.Footer.onClickGoMyConfig,this).attach(d,"click");
}}Newsstand.Main.rollingDirection="right";
},isParentOf:function(c,b){for(var a=b;
a.tagName!="BODY";
a=a.parentNode){if(c.indexOf(a.className)>-1){return true;
}}return false;
},loadTemplate:function(){Newsstand.Main.panelTemplate=panelTemplate;
Newsstand.Main.footerTemplate=footerTemplate;
Newsstand.Main.tooltipTemplate=tooltipTemplate;
},make:function(){var b=new $A(pressList);
Newsstand.Main.excludeListAll=new $A(exList);
Newsstand.Main.delayListAll=new $A(deList);
var a=new $A(myList);
if($A(a).length()>0){Newsstand.Main.myListHash=new $H();
$A(a).forEach(function(e,d){$H(Newsstand.Main.myListHash).add(e.id,e);
});
}var c=-1;
Newsstand.Main.pressListHash=new $H();
$A(b).forEach(function(e,d){Newsstand.Main.pressListHash.add(e.id,e);
if(Newsstand.Header.paramCode==e.id){c=d;
}});
Newsstand.Main.pressListAll=b;
Newsstand.Main.beforePress=beforePress;
Newsstand.Main.afterPress=afterPress;
Newsstand.Main.lastIndex=b.length()-1;
Newsstand.Main.itemIndex=0;
if(c>0){Newsstand.Main.itemIndex=c;
Newsstand.Main.nextIndex=Newsstand.Main.itemIndex+1;
if(Newsstand.Main.nextIndex>Newsstand.Main.lastIndex){Newsstand.Main.nextIndex=0;
}Newsstand.Main.previousIndex=Newsstand.Main.itemIndex-1;
if(Newsstand.Main.previousIndex<0){Newsstand.Main.previousIndex=Newsstand.Main.lastIndex;
}}else{Newsstand.Main.nextIndex=1;
Newsstand.Main.previousIndex=Newsstand.Main.lastIndex;
}},onOutDocument:function(a){Newsstand.Main.bActiveWindow=false;
Newsstand.AutoRolling.pause();
},onInDocument:function(a){Newsstand.Main.bActiveWindow=true;
Newsstand.AutoRolling.resume();
},onOutRollingArea:function(){if(Newsstand.Main.bActiveWindow){Newsstand.AutoRolling.resume();
}},onInRollingArea:function(){if(Newsstand.Main.bActiveWindow){Newsstand.AutoRolling.pause();
}},onMouseMoveDocument:function(a){Newsstand.Main.mClientX=a.pos().clientX;
Newsstand.Main.mClientY=a.pos().clientY;
},displayDelayTooltip:function(a){if(Newsstand.Main.footerPageIndex<1){$Element("delayTooltip").$value().style.display="";
$Element("delayTooltip").$value().style.left=91*a+"px";
}else{a=a-Newsstand.Main.footerPageIndex*(Newsstand.Main.itemPerPage-1);
$Element("delayTooltip").$value().style.display="";
$Element("delayTooltip").$value().style.left=91*a+"px";
}},displayExcludeTooltip:function(a){if(Newsstand.Main.footerPageIndex<1){$Element("excludeTooltip").$value().style.display="";
$Element("excludeTooltip").$value().style.left=91*a+"px";
}else{a=a-Newsstand.Main.footerPageIndex*(Newsstand.Main.itemPerPage-1);
$Element("excludeTooltip").$value().style.display="";
$Element("excludeTooltip").$value().style.left=91*a+"px";
}},disapperDelayTooltip:function(){$Element("delayTooltip").$value().style.display="none";
},disapperExcludeTooltip:function(){$Element("excludeTooltip").$value().style.display="none";
}};
Newsstand.Header={paramList:null,isEmpty:false,currentTab:"all",init:function(){var a=$$.getSingle(".snb");
if(a){$Element(a).hide();
}this.paramCode=pcode;
this.paramList=categoryCode;
var d=$Element($("lnb"));
d.appendHTML('<a href="#" id="my_tab">MY뉴스</a><strong><a href="#" id="all_tab">전체언론사</a></strong>');
d.className("press_on");
$Element($$.getSingle(".snb")).show();
var b=$Element($$.getSingle(".lst_snb > li > strong"));
if(b&&b.parernt()){b.parent().html(b.html());
}var c=$$.getSingle(".lst_snb > ."+this.paramList+" > a");
if(c){$Element("h2_category").html($Element(c).html());
$Element(c).wrap("<strong>");
}$Element("h2_tab").html("뉴스스탠드 옵션메뉴, 전체언론사 선택됨");
$Fn(this.onClickTitle,this).attach($$.getSingle(".h1"),"click");
$Fn(this.onClickMyTab,this).attach($("my_tab"),"click");
$Fn(this.onClickAllTab,this).attach($("all_tab"),"click");
$Fn(this.onClickCategory,this).attach($$(".lst_snb > li"),"click");
$Fn(this.onClickRefresh,this).attach($$(".opt > .btn_rfsh"),"click");
$Fn(this.onClickTopConfig,this).attach($$.getSingle(".btn_stt"),"click");
},onClickTitle:function(a){clickcr(a.currentElement,"top.title","","",a.$value());
a.stopDefault();
if(!this.isEmpty){document.location.reload();
}else{document.location.href="/";
}},onClickMyTab:function(a){clickcr(a.element,"top.my","","",a.$value());
a.stopDefault();
document.location.href="/?list=my";
},onClickAllTab:function(a){clickcr(a.element,"top.all","","",a.$value());
a.stopDefault();
document.location.href="/?list=ct1";
},onClickRefresh:function(a){if((Newsstand.Main.oTransition&&Newsstand.Main.oTransition.isPlaying())||!Newsstand.Panel.isEndPanelTransition){a.stopDefault();
return;
}clickcr(a.element,"top.refresh","","",a.$value());
a.stopDefault();
if(!Newsstand.Main.currentPressId){return;
}$Ajax("/include/my/press.json",{method:"get",async:false,onload:function(d){var g={};
$A(d.json()).forEach(function(j,i){if(Newsstand.Main.currentPressId==j.id){g=j;
$A.Break();
}});
$A(Newsstand.Main.pressListAll).forEach(function(j,i){if(j.id==Newsstand.Main.currentPressId){$A(Newsstand.Main.pressListAll).set(i,g);
$A.Break();
}});
if(g.paper){g.paperUrl="https://"+todayNewspaperUrl+g.id;
}var c=$Template(Newsstand.Main.panelTemplate);
html=c.process({press:g});
var b=1;
if(Newsstand.Main.lastIndex<=0){b=0;
}var h=$Element($$(".panel")[b]);
Newsstand.Panel.detachPanelMousewheelEvent(h);
h.replace(html);
h=$Element($$(".panel")[b]);
h.attr("id","focusPanelCenter");
var f=h.query(".ifr_arc").$value();
if(f){f.src=g.page;
f.title=g.nm+" 주요뉴스";
}h.removeClass("panel_dmm");
if(h.query(".frm_dmm")){h.remove(h.query(".frm_dmm"));
}var e=h.query(".ifr_ad2");
if(e){e.$value().src=adUrl+g.id;
}Newsstand.Panel.setOmbsTooltip(h);
Newsstand.Panel.setMyPressBtn(h,g.id);
Newsstand.Panel.setFocusEvent(h);
Newsstand.Panel.setMousewheelEvent(h);
},onerror:function(b){JEagleEyeClient.sendError("[ERROR][refresh "+Newsstand.Main.currentPressId+"] "+b.text());
},ontimeout:function(b){JEagleEyeClient.sendError("[TIMEOUT][refresh "+Newsstand.Main.currentPressId+"] "+b.text());
}}).request();
},onClickCategory:function(c){var b=$Element(c.currentElement).className();
var a="oft.main";
switch(b){case"ct2":a="oft.aei";
break;
case"ct3":a="oft.tvcom";
break;
case"ct4":a="oft.it";
break;
case"ct5":a="oft.eng";
break;
case"ct6":a="oft.spoent";
break;
case"ct7":a="oft.magtec";
break;
case"ct8":a="oft.loc";
break;
}clickcr(c.element,a,"","",c.$value());
c.stopDefault();
document.location.href="?list="+b;
},onClickTopConfig:function(a){clickcr(a.element,"top.set","","",a.$value());
a.stopDefault();
document.location.href="config.html";
}},Newsstand.Panel={htInitData:{},clickPrefix:"ofc.",isEndPanelTransition:true,isDefaultAD:false,init:function(){this._oFoggy=new jindo.Foggy().attach({beforeShow:function(){$("confirmPopup").style.display="block";
},hide:function(){$("confirmPopup").style.display="none";
}});
$Fn(this.onClickConfirmDelPress,this).attach($$.getSingle(".btn_confirm",$("confirmPopup")),"click");
$Fn(this.onClickCancelDelPress,this).attach($$.getSingle(".btn_cancel",$("confirmPopup")),"click");
this.create();
this.oTransition=new jindo.Transition({fEffect:jindo.Effect.easeOut});
this.oTransition.fps(12);
this.oTransition.attach("start",this.startTransition);
this.oTransition.attach("end",this.endTransition);
$Fn(this.onClickPrevious,this).attach($$("._btn_prv"),"click");
$Fn(this.onMouseOverPanel,this).attach($$.getSingle(".btn_prv"),"mouseover");
$Fn(this.onMouseOutPanel,this).attach($$.getSingle(".btn_prv"),"mouseout");
$Fn(this.onMouseOverPanel,this).attach($$.getSingle(".btn_prv"),"focus");
$Fn(this.onMouseOutPanel,this).attach($$.getSingle(".btn_prv"),"blur");
$Fn(this.onClickNext,this).attach($$("._btn_nxt"),"click");
$Fn(this.onMouseOverPanel,this).attach($$.getSingle(".btn_nxt"),"mouseover");
$Fn(this.onMouseOutPanel,this).attach($$.getSingle(".btn_nxt"),"mouseout");
$Fn(this.onMouseOverPanel,this).attach($$.getSingle(".btn_nxt"),"focus");
$Fn(this.onMouseOutPanel,this).attach($$.getSingle(".btn_nxt"),"blur");
$Fn(this.onPanelMoveEvent,this).attach(document,"keydown");
$Fn(this.gotoMedia,this).attach($A($$("a.btn_gomedia")),"click");
$Element("rolling_inn").attach({"mouseover@.btn_preview":function(a){$Element(a.element).next().show();
},"mouseout@.btn_preview":function(a){$Element(a.element).next().hide();
},"mouseover@.today_preview":function(a){$Element(a.element).show();
},"mouseout@.today_preview":function(a){$Element(a.element).hide();
},"click@.today_preview .btn_close":function(a){a.stopDefault();
$Element(a.element).parent().hide();
}});
},create:function(){var e;
var g;
var c;
if(Newsstand.Main.itemIndex==0){e=Newsstand.Main.beforePress;
}else{e=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.previousIndex);
}g=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.itemIndex);
if(Newsstand.Main.itemIndex==Newsstand.Main.lastIndex){c=Newsstand.Main.afterPress;
}else{c=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.nextIndex);
}var f=$Element($$(".panel")[0]);
var d=$Element($$(".panel")[1]);
var b=$Element($$(".panel")[2]);
var a=f.query(".ifr_arc").$value();
var j=d.query(".ifr_arc").$value();
var i=b.query(".ifr_arc").$value();
a.src=e.page;
j.src=g.page;
i.src=c.page;
a.title=e.nm+" 주요뉴스";
j.title=g.nm+" 주요뉴스";
i.title=c.nm+" 주요뉴스";
var h=d.query(".ifr_ad2");
if(h){h.$value().src=adUrl+g.id;
}this.setMyPressBtn(f,e.id);
this.setMyPressBtn(d,g.id);
this.setMyPressBtn(b,c.id);
this.setOmbsTooltip(d);
this.setFocusEvent(f);
this.setFocusEvent(d);
this.setFocusEvent(b);
this.setMousewheelEvent(f);
this.setMousewheelEvent(d);
this.setMousewheelEvent(b);
$$.getSingle(".btn_prv").style.display="";
$$.getSingle(".nav_prev").style.display="";
$$.getSingle(".btn_nxt").style.display="";
$$.getSingle(".nav_next").style.display="";
this.setTooltipImage(e,c,true);
if(g&&g.id){Newsstand.Main.currentPressId=g.id;
}this.setTotalPanelNumber();
this.setPanelNumber();
},setTotalPanelNumber:function(){var b="";
var c=(Newsstand.Main.lastIndex+1)+"";
if(Newsstand.Main.lastIndex>8){for(var a=0;
a<c.length;
a++){b+="<em class='nm_"+c.charAt(a)+"'></em>";
}}else{b="<em class='nm_"+c+"'></em>";
}this.totalCount=c;
this.totalHTML=b;
},setPanelNumber:function(){if(Newsstand.Main.lastIndex<0){var c=$Element($$.getSingle(".nav_count"));
if(c){c.empty();
}}else{var g=Newsstand.Main.itemIndex+1;
var d="<strong>";
var f=(g)+"";
if(g>9){for(var b=0;
b<f.length;
b++){d+="<em class='nm_"+f.charAt(b)+"'></em>";
}}else{d+="<em class='nm_"+f+"'></em>";
}d+="</strong>";
var e=this.totalCount+"개 언론사 중 "+f+"번째 언론사";
var a=d+"<span class='bar2'>/</span>"+this.totalHTML+"<span class='blind'>"+e+"</span>";
$Element($$.getSingle(".nav_count")).html(a);
}},setMyPressBtn:function(c,b){var a=$Element(c).query(".btn_sbc");
if(!a){a=$Element(c).query(".btn_unsbc");
}if(a){if(this.isMyPress(b)){a.className("btn_unsbc");
a.html("구독해지");
}else{a.className("btn_sbc");
a.html("구독하기");
}this.setMyPressTooltip(a);
$Fn(this.onClickMyPress,this).attach(a.$value(),"click");
}},setMyPressTooltip:function(a){var b=a.parent();
if(!b){return;
}$Fn(this.onMouseOverMyPress,this).attach(a.$value(),"mouseover");
$Fn(this.onMouseOutMyPress,this).attach(a.$value(),"mouseout");
$Fn(this.onMouseOverMyPress,this).attach(a.$value(),"focus");
$Fn(this.onMouseOutMyPress,this).attach(a.$value(),"blur");
},setTooltipImage:function(d,c,h){var f=$Template(Newsstand.Main.tooltipTemplate);
var g={left:d};
var b=f.process(g);
f=$Template(Newsstand.Main.tooltipTemplate);
var e={right:c};
var a=f.process(e);
if(h){$Element($$.getSingle(".nav")).appendHTML(b);
$Element($$.getSingle(".nav")).appendHTML(a);
}else{$Element($("configToolTip")).replace(b);
$Element($("configToolTip2")).replace(a);
}$Fn(this.onMouseOverPanel,this).attach($("configToolTip"),"mouseover");
$Fn(this.onMouseOutPanel,this).attach($("configToolTip"),"mouseout");
$Fn(this.onMouseOverPanel,this).attach($("configToolTip2"),"mouseover");
$Fn(this.onMouseOutPanel,this).attach($("configToolTip2"),"mouseout");
},setOmbsTooltip:function(b){var a=b.query(".btn_ombs");
if(a){$Fn(this.onMouseOverOmbs,this).attach(a.$value(),"mouseover");
$Fn(this.onMouseOutOmbs,this).attach(a.$value(),"mouseout");
$Fn(this.onMouseOverOmbs,this).attach(a.$value(),"focus");
$Fn(this.onMouseOutOmbs,this).attach(a.$value(),"blur");
}},setFocusEvent:function(c){var a=$Element(c).queryAll("a");
$Fn(Newsstand.Main.onInRollingArea,this).attach(a,"focus");
$Fn(Newsstand.Main.onOutRollingArea,this).attach(a,"blur");
if($Agent().navigator().ie){var b=c.query(".ifr_arc");
if(b){$Fn(Newsstand.Main.onInRollingArea,this).attach(b,"focus");
$Fn(Newsstand.Main.onOutRollingArea,this).attach(b,"blur");
}}},setMousewheelEvent:function(d){$Fn(this.onPanelMoveEvent,this).attach(d,"mousewheel");
if($Agent().navigator().ie){var c=this;
var b=d.query(".ifr_arc");
var a=d.query(".ifr_ad2");
if(b){b.attach("load",function(){if(b.attr("src").indexOf("/include/page/")>=0){try{$Element(b.$value().contentWindow.document).attach("mousewheel",c.onPanelMoveEvent);
}catch(f){}}});
}if(a){a.attach("load",function(){if(a.attr("src").indexOf("veta.naver.com")>=0){try{$Element(a.$value().contentWindow.document).attach("mousewheel",c.onPanelMoveEvent);
}catch(f){}}});
}}},detachPanelMousewheelEvent:function(a){this.detachMousewheelEvent(a.query(".ifr_arc"));
this.detachMousewheelEvent(a.query(".ifr_ad2"));
},detachMousewheelEvent:function(a){if($Agent().navigator().ie){var c=null;
try{c=a.$value().contentWindow.document;
}catch(b){return;
}$Element(c).detach("mousewheel",this.onPanelMoveEvent);
}},isMyPress:function(a){return $H(Newsstand.Main.myListHash).hasKey(a);
},onClickLogo:function(c,b,a){clickcr(c,this.clickPrefix+"logo",a,(Newsstand.Main.itemIndex+1),b);
},onClickPost:function(d,a){var b=$Event(d);
clickcr(b.element,this.clickPrefix+a,"","",d);
b.stopDefault();
var e=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.itemIndex);
var f="네이버 뉴스스탠드 - "+e.nm+" 주요뉴스";
var c="https://"+host+"/?list="+Newsstand.Header.paramList+"&pcode="+e.id;
if(a=="band"){window.open("https://www.band.us/plugin/share?body="+encodeURIComponent(f)+"%0A"+encodeURIComponent(c),"share_band","width=410, height=400, resizable=no");
return;
}this.htInitData.evkey="news";
this.htInitData.title=f;
this.htInitData.tags=["네이버 뉴스스탠드"];
this.htInitData.source=c;
nhn.socialplugin.onClickPost(this.htInitData,b.element);
},onPanelMoveEvent:function(b){if((Newsstand.Main.oTransition&&Newsstand.Main.oTransition.isPlaying())||!Newsstand.Panel.isEndPanelTransition||Newsstand.Main.lastIndex<=0){b.stop();
return;
}var a=(b.type=="keydown")?b.key().keyCode:b.mouse().delta;
switch(a){case 1:case 37:if(!Newsstand.Panel._oFoggy.isShown()){b.stopDefault();
Newsstand.Panel.movePrevious();
}break;
case -1:case 39:if(!Newsstand.Panel._oFoggy.isShown()){b.stopDefault();
Newsstand.Panel.moveNext(false);
}break;
default:break;
}},gotoMedia:function(b){var a;
if(b.element.tagName!="A"){a=$Element(b.element).text();
}else{a=$Element(b.element.children[0]).text();
}clickcr(b.element,this.clickPrefix+"more",a,"",b.$value());
},openSns:function(b){var a=$Event(b);
$Element(a.element).next().toggle();
clickcr(a.element,this.clickPrefix+"sns","","",a.$value());
},onClickTodayNewspaper:function(d,a,c){var b=$Event(d);
if(a=="today"){clickcr(b.element,this.clickPrefix+a,c,"",d);
}else{clickcr($Element(b.element).parent().$value(),this.clickPrefix+a,c,"",d);
}},onClickOmbs:function(b){var a=$Event(b);
clickcr(a.element,this.clickPrefix+"opinion","","",b);
},onClickCancelDelPress:function(a){a.stopDefault();
clickcr(a.element,"ous.cancel","","",a.$value());
this._oFoggy.hide();
},onClickConfirmDelPress:function(f){f.stopDefault();
clickcr(f.element,"ous.done","","",f.$value());
var e=this;
var d=this._elConfirm;
var a=d.$value().id.substr(4);
var h={};
$A(Newsstand.Main.pressListAll).forEach(function(j,i){if(j.id==a){h=j;
$A.Break();
}});
var c="cookie";
if(isLogin){c="login";
}var b="https://"+userInfoUrl;
if(c=="login"){b+="/api/newscast/mynews/deletePress.jsonp";
}else{b+="/api/newsstand/mynews/deletePress.jsonp";
}var g=$Ajax(b,{type:"jsonp",timeout:5,onload:function(j){var i=j.json();
if(i.result=="success"){Newsstand.Main.pressLastIndex--;
d.className("btn_sbc");
d.html("MY언론사로 구독하기");
$H(Newsstand.Main.myListHash).remove(h.id);
Newsstand.Panel.setMyPressTooltip(d);
e._oFoggy.hide();
}else{JEagleEyeClient.sendError("[ERROR]["+b+"] "+h.id+" "+j.text());
}},onerror:function(i){JEagleEyeClient.sendError("[ERROR]["+b+"] "+h.id+" "+i.text());
},ontimeout:function(i){JEagleEyeClient.sendError("[TIMEOUT]["+b+"] "+h.id+" "+i.text());
}});
d.fireEvent("mouseout");
g.request({pressId:h.id,optOut:true});
},onClickMyPress:function(f){f.stopDefault();
var e=$Element(f.currentElement);
var d=e.className();
var a=e.$value().id.substr(4);
var h=$H(Newsstand.Main.pressListHash).$(a);
if(d=="btn_unsbc"){clickcr(f.element,this.clickPrefix+"unsub","","",f.$value());
this._elConfirm=e;
$$.getSingle(".msg",$("confirmPopup")).innerHTML=h.nm+"를 구독해지 하시겠습니까?<br>MY뉴스 리스트에서 바로 사라집니다.";
this._oFoggy.show($("confirmPopup"));
Newsstand.Util.moveFocus($("confirmPopup"));
Newsstand.Util.preventLayerOutFocusByTabEvent($("confirmPopup"));
}else{if(d=="btn_sbc"){clickcr(f.element,this.clickPrefix+"sub","","",f.$value());
var c="cookie";
if(isLogin){c="login";
}var b="https://"+userInfoUrl;
if(c=="login"){b+="/api/newscast/mynews/addPress.jsonp";
}else{b+="/api/newsstand/mynews/addPress.jsonp";
}var g=$Ajax(b,{type:"jsonp",timeout:5,onload:function(j){var i=j.json();
if(i.result=="success"){Newsstand.Main.pressLastIndex++;
e.className("btn_unsbc");
e.html("MY언론사 구독해지");
$H(Newsstand.Main.myListHash).add(h.id,h);
Newsstand.Panel.setMyPressTooltip(e);
e.fireEvent("mouseover");
}else{JEagleEyeClient.sendError("[ERROR]["+b+"] "+h.id+" "+j.text());
}},onerror:function(i){JEagleEyeClient.sendError("[ERROR]["+b+"] "+h.id+" "+i.text());
},ontimeout:function(i){JEagleEyeClient.sendError("[TIMEOUT]["+b+"] "+h.id+" "+i.text());
}});
e.fireEvent("mouseout");
g.request({pressId:h.id,optOut:true});
}}},onMouseOverMyPress:function(b){var a=$Element(b.currentElement).parent();
var e=a.parent().parent();
if(e&&e.hasClass("panel_dmm")){return;
}var d="tt_"+$Element(b.currentElement).className();
var c=a.query("."+d);
if(c){c.show();
}},onMouseOutMyPress:function(b){var a=$Element(b.currentElement).parent();
var d="tt_"+$Element(b.currentElement).className();
var c=a.query("."+d);
if(c){c.hide();
}},onMouseOverOmbs:function(b){var a=$Element(b.currentElement).parent();
var c=a.parent().parent();
if(c&&c.hasClass("panel_dmm")){return;
}if(a&&a.query(".tt_btn_ombs")){a.query(".tt_btn_ombs").show();
}},onMouseOutOmbs:function(b){var a=$Element(b.currentElement).parent();
if(a&&a.query(".tt_btn_ombs")){a.query(".tt_btn_ombs").hide();
}},onMouseOverPanel:function(b){if(($Element(b.currentElement).className()).indexOf("prv")>-1||b.currentElement.id=="configToolTip"){var a=$Element($$(".panel")[0]);
if(a.hasClass("panel_dmm")){a.removeClass("panel_dmm");
}$Element($("configToolTip")).show();
$Element($$.getSingle(".btn_prv")).addClass("hover");
}else{var a=$Element($$(".panel")[2]);
if(a.hasClass("panel_dmm")){a.removeClass("panel_dmm");
}$Element($("configToolTip2")).show();
$Element($$.getSingle(".btn_nxt")).addClass("hover");
}},onMouseOutPanel:function(b){if((Newsstand.Main.oTransition&&Newsstand.Main.oTransition.isPlaying())||!Newsstand.Panel.isEndPanelTransition){b.stop();
return;
}if(($Element(b.currentElement).className()).indexOf("prv")>-1||b.currentElement.id=="configToolTip"){var a=$Element($$(".panel")[0]);
if(a&&!a.hasClass("panel_dmm")){a.addClass("panel_dmm");
}$Element($("configToolTip")).hide();
$Element($$.getSingle(".btn_prv")).removeClass("hover");
}else{var a=$Element($$(".panel")[2]);
if(a&&!a.hasClass("panel_dmm")){a.addClass("panel_dmm");
}$Element($("configToolTip2")).hide();
$Element($$.getSingle(".btn_nxt")).removeClass("hover");
}},startTransition:function(){Newsstand.Panel.isEndPanelTransition=false;
var j=0;
var a=0;
var g=0;
var e=0;
var i;
var o=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.previousIndex);
var h=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.nextIndex);
if(Newsstand.Main.itemIndex==Newsstand.Main.lastIndex){h=Newsstand.Main.afterPress;
}else{if(Newsstand.Main.itemIndex==0){o=Newsstand.Main.beforePress;
}}var d=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.itemIndex);
if(Newsstand.Main.rollingDirection=="next"){j=2;
a=1;
g=3;
e=3;
i=h;
}else{j=1;
a=0;
g=2;
e=0;
i=o;
}var n=$Element($$(".panel")[e]);
var l=n.query(".ifr_arc").$value();
Newsstand.Panel.setMyPressBtn(n,i.id);
Newsstand.Panel.setFocusEvent(n);
Newsstand.Panel.setMousewheelEvent(n);
l.src=i.page;
l.title=i.nm+" 주요뉴스";
var b=$Element($$(".panel")[j]);
b.removeClass("panel_dmm");
if(b.query(".frm_dmm")){b.remove(b.query(".frm_dmm"));
}var m=$Element($$(".panel")[a]);
var p=$Element($$(".panel")[g]);
m.attr("id","");
p.attr("id","");
b.attr("id","focusPanelCenter");
var f=m.query(".ifr_ad2");
if(f){Newsstand.Panel.detachMousewheelEvent(f);
f.$value().src="";
}var k=p.query(".ifr_ad2");
if(k){Newsstand.Panel.detachMousewheelEvent(k);
k.$value().src="";
}var c=b.query(".ifr_ad2");
if(c){if(Newsstand.Panel.isDefaultAD){c.$value().src=adUrlForDefault+d.id;
}else{c.$value().src=adUrl+d.id;
}}Newsstand.Panel.setTooltipImage(o,h);
Newsstand.Panel.setPanelNumber();
Newsstand.Footer.moveItem();
},endTransition:function(){var h=$Element($("rolling_inn"));
var f=null;
var b=parseInt(h.css("marginLeft"));
if(isNaN(b)){b=0;
}if(Newsstand.Main.rollingDirection=="next"){Newsstand.Panel.detachPanelMousewheelEvent(h.first());
h.remove(h.first());
b=0;
var i=$Element($$.getSingle(".btn_nxt"));
var e=i.offset().left;
var a=e+i.width();
var d=i.offset().top;
var g=d+i.height();
if((e<=Newsstand.Main.mClientX&&Newsstand.Main.mClientX<=a)&&(d<=Newsstand.Main.mClientY&&Newsstand.Main.mClientY<=g)){i.fireEvent("mouseover");
}var j=$Element($$(".panel")[0]);
j.addClass("panel_dmm");
if(!j.query(".frm_dmm")){j.prependHTML("<span class='frm_dmm'></span>");
}f=$Element($$(".panel")[1]);
}else{Newsstand.Panel.detachPanelMousewheelEvent(h.last());
h.remove(h.last());
var i=$Element($$.getSingle(".btn_prv"));
var e=i.offset().left;
var a=e+i.width();
var d=i.offset().top;
var g=d+i.height();
if((e<=Newsstand.Main.mClientX&&Newsstand.Main.mClientX<=a)&&(d<=Newsstand.Main.mClientY&&Newsstand.Main.mClientY<=g)){i.fireEvent("mouseover");
}var k=$Element($$(".panel")[2]);
k.addClass("panel_dmm");
if(!k.query(".frm_dmm")){k.prependHTML("<span class='frm_dmm'></span>");
}f=$Element($$(".panel")[1]);
}if(Newsstand.Main.lastIndex==0){var c=$Element($("rolling_inn"));
c.remove($Element($$(".panel")[2]));
c.remove($Element($$(".panel")[0]));
if($Agent().navigator().ie&&$Agent().navigator().nativeVersion==9){$$.getSingle(".panel").focus();
}$Element($$.getSingle(".btn_nxt")).hide();
$Element($$.getSingle(".nav_next")).hide();
$Element($$.getSingle(".btn_prv")).hide();
$Element($$.getSingle(".nav_prev")).hide();
b="100";
f=$Element($$.getSingle(".panel"));
}h.css("marginLeft",b+"%");
Newsstand.Main.currentPressId=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.itemIndex).id;
Newsstand.Panel.setOmbsTooltip(f);
Newsstand.Panel.isEndPanelTransition=true;
lcs_do({sti:"newsstand_viewer_"+Newsstand.Main.currentPressId});
},moveNext:function(g){Newsstand.Main.rollingDirection="next";
Newsstand.Main.previousIndex=Newsstand.Main.itemIndex;
Newsstand.Main.itemIndex=Newsstand.Main.nextIndex;
Newsstand.Main.nextIndex=Newsstand.Main.itemIndex+1;
if(Newsstand.Main.nextIndex>Newsstand.Main.lastIndex){Newsstand.Main.nextIndex=0;
}var d=null;
if(Newsstand.Main.itemIndex==0){location.href="?list="+afterCategoryCode+"&pcode="+Newsstand.Main.afterPress.id;
return;
}else{if(Newsstand.Main.itemIndex==Newsstand.Main.lastIndex){d=Newsstand.Main.afterPress;
}else{d=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.nextIndex);
}}var h=$Template(Newsstand.Main.panelTemplate);
var i=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.previousIndex);
if(i.paper){i.paperUrl="https://"+todayNewspaperUrl+i.id;
}if(d.paper){d.paperUrl="https://"+todayNewspaperUrl+d.id;
}var c=h.process({press:i});
var a=h.process({press:d});
var f=$Element($("rolling_inn"));
var b=parseInt(f.css("marginLeft"));
if(isNaN(b)){b=0;
}var e=(b-100);
if(Newsstand.Main.lastIndex==1){f.appendHTML(c);
}else{f.appendHTML(a);
}if(g){Newsstand.Panel.isDefaultAD=true;
}else{Newsstand.Panel.isDefaultAD=false;
}this.oTransition.start(500,$("rolling_inn"),{"@marginLeft":e+"%"});
},movePrevious:function(){Newsstand.Main.rollingDirection="previous";
Newsstand.Main.nextIndex=Newsstand.Main.itemIndex;
Newsstand.Main.itemIndex=Newsstand.Main.previousIndex;
Newsstand.Main.previousIndex=Newsstand.Main.itemIndex-1;
if(Newsstand.Main.previousIndex<0){Newsstand.Main.previousIndex=Newsstand.Main.lastIndex;
}var b=null;
if(Newsstand.Main.itemIndex==Newsstand.Main.lastIndex){location.href="?list="+beforeCategoryCode+"&pcode="+Newsstand.Main.beforePress.id+"&rndLocation=last";
return;
}else{if(Newsstand.Main.itemIndex==0){b=Newsstand.Main.beforePress;
}else{b=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.previousIndex);
}}var c=$Template(Newsstand.Main.panelTemplate);
var a=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.nextIndex);
if(b.paper){b.paperUrl="https://"+todayNewspaperUrl+b.id;
}if(a.paper){a.paperUrl="https://"+todayNewspaperUrl+a.id;
}var g=c.process({press:b});
var f=c.process({press:a});
var e=$Element($("rolling_inn"));
var d=parseInt(e.css("marginLeft"));
if(isNaN(d)){d=0;
}var h=d;
if(Newsstand.Main.lastIndex==1){e.prependHTML(f);
}else{e.prependHTML(g);
}e.css("marginLeft",(d-100)+"%");
this.oTransition.start(500,$("rolling_inn"),{"@marginLeft":h+"%"});
},onClickNext:function(c){if((Newsstand.Main.oTransition&&Newsstand.Main.oTransition.isPlaying())||!Newsstand.Panel.isEndPanelTransition){c.stop();
return;
}var b=$Element(c.currentElement);
var a="next";
if(b.hasClass("nav_next")){a="mnext";
}clickcr(c.currentElement,this.clickPrefix+a,"","",c.$value());
c.stopDefault();
this.moveNext(false);
},onClickPrevious:function(c){if((Newsstand.Main.oTransition&&Newsstand.Main.oTransition.isPlaying())||!Newsstand.Panel.isEndPanelTransition){c.stop();
return;
}var b=$Element(c.currentElement);
var a="prev";
if(b.hasClass("nav_prev")){a="mprev";
}clickcr(c.currentElement,this.clickPrefix+a,"","",c.$value());
c.stopDefault();
this.movePrevious();
},changePanel:function(i){var m=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.previousIndex);
var h=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.nextIndex);
if(Newsstand.Main.itemIndex==Newsstand.Main.lastIndex){h=Newsstand.Main.afterPress;
}else{if(Newsstand.Main.itemIndex==0){m=Newsstand.Main.beforePress;
}}var k=$Template(Newsstand.Main.panelTemplate);
var c=$A(Newsstand.Main.pressListAll).get(Newsstand.Main.itemIndex);
if(m.paper){m.paperUrl="https://"+todayNewspaperUrl+m.id;
}if(c.paper){c.paperUrl="https://"+todayNewspaperUrl+c.id;
}if(h.paper){h.paperUrl="https://"+todayNewspaperUrl+h.id;
}var g=k.process({press:m});
var l=k.process({press:c});
var b=k.process({press:h});
var f=$Element($$(".panel")[0]);
var e=$Element($$(".panel")[1]);
var d=$Element($$(".panel")[2]);
Newsstand.Panel.detachPanelMousewheelEvent(f);
Newsstand.Panel.detachPanelMousewheelEvent(e);
Newsstand.Panel.detachPanelMousewheelEvent(d);
f.replace(g);
e.replace(l);
d.replace(b);
f=$Element($$(".panel")[0]);
e=$Element($$(".panel")[1]);
d=$Element($$(".panel")[2]);
Newsstand.Panel.setMyPressBtn(f,m.id);
Newsstand.Panel.setMyPressBtn(e,c.id);
Newsstand.Panel.setMyPressBtn(d,h.id);
Newsstand.Main.currentPressId=c.id;
Newsstand.Panel.setOmbsTooltip(e);
Newsstand.Panel.setFocusEvent(e);
Newsstand.Panel.setMousewheelEvent(f);
Newsstand.Panel.setMousewheelEvent(e);
Newsstand.Panel.setMousewheelEvent(d);
var a=f.query(".ifr_arc").$value();
var o=e.query(".ifr_arc").$value();
var n=d.query(".ifr_arc").$value();
o.src=c.page;
a.src=m.page;
n.src=h.page;
a.title=m.nm+" 주요뉴스";
o.title=c.nm+" 주요뉴스";
n.title=h.nm+" 주요뉴스";
var j=e.query(".ifr_ad2");
if(j){j.$value().src=adUrl+c.id;
}e.removeClass("panel_dmm");
e.attr("id","focusPanelCenter");
Newsstand.Panel.setTooltipImage(m,h);
Newsstand.Panel.setPanelNumber();
Newsstand.Main.itemIndex=i;
if(isNaN(Newsstand.Main.itemIndex)){Newsstand.Main.itemIndex=0;
}Newsstand.Footer.check();
lcs_do({sti:"newsstand_viewer_"+Newsstand.Main.currentPressId});
}};
Newsstand.Footer={clickPrefix:"ofb.",oRolling:null,oRollingTransition:null,init:function(){this.oRolling=new jindo.Rolling(jindo.$("rolling"));
this.oRolling.getTransition().fps(20);
this.oRolling.option("nDuration","100");
this.oRollingTransition=new jindo.Transition({fEffect:jindo.Effect.bounce});
this.oRollingTransition.fps(200);
var c=$A(Newsstand.Main.delayListAll).length();
var b=$A(Newsstand.Main.excludeListAll).length();
if(Newsstand.Main.lastIndex>=0||c>0||b>0){this.create();
this.check();
}var a=$Element($$.getSingle(".notice"));
if(a){a.show();
}$Fn(this.onClickPreviousList,this).attach($$.getSingle(".btn_prv3"),"click");
$Fn(this.onClickNextList,this).attach($$.getSingle(".btn_nxt3"),"click");
$Fn(this.onResizeBody,this).attach(window,"resize");
},create:function(){var c=1003;
var d=parseInt($Document(document).clientSize().width);
if(isNaN(d)||d<c){d=c;
}Newsstand.Main.itemPerPage=Math.floor(d/91-0.5);
Newsstand.Main.pressLastIndex=$A(Newsstand.Main.pressListAll).length();
var e=$A(Newsstand.Main.pressListAll).$value();
Newsstand.Main.panelList=$A(e);
if(Newsstand.Main.excludeListAll){$A(Newsstand.Main.excludeListAll).forEach(function(g,f){$A(Newsstand.Main.panelList).push(g);
});
}if(Newsstand.Main.delayListAll){$A(Newsstand.Main.delayListAll).forEach(function(g,f){$A(Newsstand.Main.panelList).push(g);
});
}$A(Newsstand.Main.panelList).push({id:-1});
var a=Newsstand.Main.panelList.$value();
this.chageFooterWidth();
this.setTodayNewspaper(a);
var b=$Template(Newsstand.Main.footerTemplate);
el=$Element($$.getSingle(".lst_news_wp > ul"));
el.empty();
el.html(b.process({pressList:a,itemPerPage:Newsstand.Main.itemPerPage}));
if(a.length>Newsstand.Main.itemPerPage){$Element($$.getSingle(".btn_nxt3")).removeClass("dmm");
$Element($$.getSingle(".btn_prv3")).removeClass("dmm");
}else{$Element($$.getSingle(".btn_nxt3")).addClass("dmm");
$Element($$.getSingle(".btn_prv3")).addClass("dmm");
}this.generateEmptyList();
this.attachEvent();
this.footerRollingByMoveItem();
},chageFooterWidth:function(){var a=Newsstand.Main.itemPerPage*91;
$Element($$.getSingle(".lst_news_wp")).css("width",a+"px");
},generateEmptyList:function(){var e=$$("._empty");
var d=$A(Newsstand.Main.pressListAll).length()+$A(Newsstand.Main.excludeListAll).length()+$A(Newsstand.Main.delayListAll).length()+1;
for(var b=0;
b<e.length;
b++){$Element(e[b]).leave();
}var a=(d-1)%(Newsstand.Main.itemPerPage-1);
if(a==0){return;
}for(var c=0;
c<Newsstand.Main.itemPerPage-1-a;
c++){$Element("rollingUl").appendHTML("<li class='_empty'></li>");
}},check:function(){if(Newsstand.Main.pressLastIndex<=0){return;
}if(Newsstand.Main.itemIndex<0){Newsstand.Main.itemIndex=Newsstand.Main.pressLastIndex-1;
}var a=$Element($$.getSingle(".lst_news_wp > ul > .selected"));
if(a){a.removeClass("selected");
}a=$Element($$(".lst_news_wp > ul > li")[Newsstand.Main.itemIndex]);
if(a){a.addClass("selected");
}},moveItem:function(){if(Newsstand.Main.rollingDirection=="next"){if(Newsstand.Main.itemIndex>Newsstand.Main.pressLastIndex-1){Newsstand.Main.itemIndex=0;
}}else{if(Newsstand.Main.itemIndex<0){Newsstand.Main.itemIndex=Newsstand.Main.pressLastIndex-1;
}}this.footerRollingByMoveItem();
this.check();
},footerRollingByMoveItem:function(){var c=Newsstand.Main.itemPerPage-1;
var a=parseInt((Newsstand.Main.itemIndex-1)/c);
var b=a*c;
Newsstand.Main.footerPageIndex=a;
this.oRolling.moveTo(b);
},attachEvent:function(){$Fn(this.onClickDirectMove,this).attach($$(".lst_news_wp > ul > li > a"),"click");
var a=$$.getSingle(".btn_my");
if(a){$Fn(this.onClickGoMyConfig,this).attach(a,"click");
}var b=$$.getSingle(".btn_add");
if(b){$Fn(this.onClickGoMyConfig,this).attach(b,"click");
}},setTodayNewspaper:function(a){$A(a).forEach(function(c,b){if(c.paper&&c.paper!=""){c.paperUrl="https://"+todayNewspaperUrl+c.id;
}else{c.paper="";
}});
},onClickPreviousList:function(a){clickcr(a.element,this.clickPrefix+"prev","","",a.$value());
a.stopDefault();
this.footerRolling(-(Newsstand.Main.itemPerPage-1));
},onClickNextList:function(a){clickcr(a.element,this.clickPrefix+"next","","",a.$value());
a.stopDefault();
this.footerRolling(Newsstand.Main.itemPerPage-1);
},footerRolling:function(c){Newsstand.AutoRolling.pause();
var a=this.oRolling.moveBy(c);
var b=0;
if(c>0){b=-4;
if(a==true){Newsstand.Main.footerPageIndex++;
}}else{b=4;
if(a==true){Newsstand.Main.footerPageIndex--;
}}if(a==false&&!this.oRollingTransition.isPlaying()){this.oRollingTransition.start(500,jindo.$("rolling"),{"@left":[b,0]});
}Newsstand.Footer.check();
Newsstand.AutoRolling.resume();
},onResizeBody:function(d){var b=1003;
var c=parseInt($Document(document).clientSize().width);
if(isNaN(c)||c<b){c=b;
}var a=Math.floor(c/91-0.5);
if(a==Newsstand.Main.itemPerPage){return;
}Newsstand.AutoRolling.pause();
Newsstand.Main.itemPerPage=a;
this.chageFooterWidth();
this.generateEmptyList();
this.footerRollingByMoveItem();
this.check();
Newsstand.AutoRolling.resume();
},onClickGoMyConfig:function(c){var b=c.currentElement;
var a=this.clickPrefix+"set";
if($Element(b).hasClass("btn_stt2")){a="mnc.set";
}clickcr(b,a,"","",c.$value());
c.stopDefault();
document.location.href="config.html";
},onClickDirectMove:function(f){f.currentElement.focus();
if((Newsstand.Main.oTransition&&Newsstand.Main.oTransition.isPlaying())||!Newsstand.Panel.isEndPanelTransition){f.stopDefault();
return;
}var c=$Element(f.currentElement).className();
if(c=="btn_my"||c=="btn_add"){f.stopDefault();
return;
}else{if(c=="today"){return;
}}var e=parseInt(f.currentElement.id.substr(2));
if(isNaN(e)){e=0;
}var d=e;
var g=$Element(f.currentElement).query("IMG");
var b="";
if(g){b=g.attr("alt");
}var h=d+1;
clickcr(f.currentElement,this.clickPrefix+"logo",b,h,f.$value());
f.stopDefault();
if(Newsstand.Main.lastIndex==0){return;
}var a=$Element(f.currentElement).parent();
if(a&&a.hasClass("disabled")){return;
}if(d==Newsstand.Main.itemIndex){return;
}Newsstand.Main.previousIndex=d-1;
if(Newsstand.Main.previousIndex<0){Newsstand.Main.previousIndex=Newsstand.Main.lastIndex;
}Newsstand.Main.itemIndex=d;
Newsstand.Main.nextIndex=Newsstand.Main.itemIndex+1;
if(Newsstand.Main.nextIndex>Newsstand.Main.lastIndex){Newsstand.Main.nextIndex=0;
}Newsstand.AutoRolling.pause();
Newsstand.Panel.changePanel(e);
Newsstand.AutoRolling.resume();
},onClickTodayNewspaper:function(d,a,c){var b=$Event(d);
clickcr(b.element,this.clickPrefix+a,c,"",d);
}};
Newsstand.Gnb={init:function(){getGNB();
},attachClickEvent:function(){$Fn(function(b){var e=b.element;
var a=b._event;
var d=false;
for(;
e;
e=e.parentNode){if(!e.className||e.className==""){continue;
}layerClassName=e.className;
if(layerClassName=="gnb_wrap"){d=true;
}}if(d){return;
}var c=$Element("gnb");
if(c.query(".gnb_lyr_opened")){gnbAllLayerClose();
}}).attach(document,"click");
}};
