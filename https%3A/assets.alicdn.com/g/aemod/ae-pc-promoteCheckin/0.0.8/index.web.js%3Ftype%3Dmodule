// {"framework" : "Rax"}
define("aemod/ae-pc-promoteCheckin/index.web",["rat-frame","rat-view","rat-picture","rat-overlay","rat-text"],function(require,exports,module){module.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var module=t[n]={i:n,l:!1,exports:{}};return e[n].call(module.exports,module,module.exports,o),module.l=!0,module.exports}return o.m=e,o.c=t,o.d=function(exports,e,t){o.o(exports,e)||Object.defineProperty(exports,e,{enumerable:!0,get:t})},o.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(module){var e=module&&module.__esModule?function(){return module.default}:function(){return module};return o.d(e,"a",e),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var o,n=0;n<t.length;n++)(o=t[n]).enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=e(1),a=s(e(2)),i=s(e(3)),l=s(e(4)),u=s(e(5)),c=s(e(6));function s(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.getLogin=function(){var e="n";(document.cookie.split(/;\s/g)||[]).forEach(function(t){if(0===t.indexOf("xman_us_t=")){t.match(/(.*&?sign=)(.*?)(&.*|$)/),e=RegExp.$2}}),"y"===e&&t.setState({isLogin:!0})},t.goTargetUrl=function(e,o,n){var r=t.state,a=r.mds,i=(r.gdc,{url:e,nid:o||0,widgetId:a.widgetId,moduleName:a.moduleName,target:n||null});t.pageUtils.goTargetUrl&&t.pageUtils.goTargetUrl(i)},t.isShowTime=function(){var e=t.state.mds.moduleData,o=void 0===e?{}:e,n=o.previewStartTime,r=void 0===n?15407316e5:n,a=o.bigSaleEndTime,i=void 0===a?1541595599e3:a,l=(new Date).getTime();return l>=r&&l<=i},t.getImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.state,r=n.gdc,a=n.mds,i=r.translation,l=void 0===i?"{}":i;l="object"===(void 0===l?"undefined":o(l))?l:JSON.parse(l);var u=a.moduleData,c=void 0===u?{}:u,s=c.signInTotalCount,f=void 0===s?5:s,p=c.pcPopIframeUrl,d=void 0===p?"":p,m=c.pcRulesUrl,g=void 0===m?"":m,h=e.success,y="";if(h&&c&&"{}"!==JSON.stringify(c)&&e.data){var v=e.data,b=v.hasCurrentShopSigninToday,S=void 0===b?"":b,x=v.countHasSigninShopToday,w=void 0===x?"":x;!S&&w<f&&(y=l["module.pc.promoteCheckin.notSignImage"]||"//ae01.alicdn.com/kf/HTB1F6yXXsfrK1RkSnb4760HRFXaD.png"),S&&w<f&&(y=l["module.pc.promoteCheckin.currentSignImage"]||"//ae01.alicdn.com/kf/HTB1ebX3XzDuK1Rjy1zj762raFXap.png"),S&&w===f&&(y=l["module.pc.promoteCheckin.hasFinishSignImage"]||"//ae01.alicdn.com/kf/HTB13SR4XxrvK1RjSsze761ObFXaT.png"),S||w!==f||(y=l["module.pc.promoteCheckin.hasFinishSignImage"]||"//ae01.alicdn.com/kf/HTB13SR4XxrvK1RjSsze761ObFXaT.png")}!h&&c&&"{}"!==JSON.stringify(c)&&(y=l["module.pc.promoteCheckin.notSignImage"]||"//ae01.alicdn.com/kf/HTB1F6yXXsfrK1RkSnb4760HRFXaD.png"),t.setState({imgUrl:y,pcRulesUrl:g,pcPopIframeUrl:d,showDataStatus:!0,showNoDataStatus:!1})},t.checkIn=function(){return t.state.isLogin?void t.setState({visible:!0}):void(window.location.href="//login.aliexpress.com/?returnurl="+location.href)},t.closeCheckIn=function(){t.setState({visible:!1},function(){t.getData()})},t.getData=function(){var e=t.state.mds.moduleData,o=(void 0===e?{}:e).dataApi,n=void 0===o?{}:o,r=n.ajax,a=void 0===r?{}:r,i=a.apiName,l=void 0===i?"":i;a.params;if(!n||!n.ajax)return!1;var u;u=""+l,t.isShowTime()&&t.fetch(u,{dataType:"jsonp"}).then(function(e){return e.json()}).then(function(e){e&&t.setState({res:e},function(){var e=t.state.res;t.getImage(e)})}).catch(function(e){console.log("fetch error: ",e)})},t.styleUnderLine=function(e){e.target.style.textDecoration="underline",e.target.style.color="#fff"},t.styleUnderLineNo=function(e){e.target.style.textDecoration="none",e.target.style.color="#fff"},t.pageUtils=e.pageUtils,t.fetch=e.pageUtils.fetch,t.state={showDataStatus:!1,showNoDataStatus:!0,mds:t.props.mds||{},gdc:t.props.gdc||{},isLogin:!1,visible:!1,imgUrl:"",pcPopIframeUrl:"",pcRulesUrl:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r.Component),n(s,[{key:"componentWillMount",value:function(){this.getLogin()}},{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,n=this.state,s=n.showDataStatus,f=n.showNoDataStatus,p=n.mds,d=n.gdc,m=n.imgUrl,g=n.pcPopIframeUrl,h=n.pcRulesUrl,y=d.preView,v=d.translation,b=void 0===v?"{}":v;return b="object"===(void 0===b?"undefined":o(b))?b:JSON.parse(b),s?(0,r.createElement)(a.default,{style:c.default.wrapper},(0,r.createElement)(a.default,{onClick:this.checkIn},(0,r.createElement)(i.default,{style:c.default.checkpic,source:{uri:m}})),(0,r.createElement)(a.default,{style:c.default.textWrap,onClick:function(){e.goTargetUrl(h,0,"_blank")},onMouseOver:this.styleUnderLine,onMouseOut:this.styleUnderLineNo},(0,r.createElement)(i.default,{source:{uri:"//ae01.alicdn.com/kf/HTB1yPoiXznuK1RkSmFP763uzFXaG.png"},style:c.default.rulesImage}),(0,r.createElement)(a.default,{style:c.default.word},(0,r.createElement)(u.default,null,b["module.pc.promoteCheckin.gameRules"]||"RULES FOR 11.11 GAMELAND"))),(0,r.createElement)(l.default,{visible:this.state.visible,align:"cc cc",hasMask:!0,disableScroll:!0,onRequestClose:this.onClose},(0,r.createElement)(a.default,{style:{width:"100%",height:"100%",padding:0,position:"relative",background:"transparent"}},(0,r.createElement)("iframe",{style:{width:"100%",height:"100%",border:"none",position:"relative"},src:g}))),this.state.visible?(0,r.createElement)(a.default,{style:c.default.close,onClick:this.closeCheckIn},(0,r.createElement)(i.default,{source:{uri:"//ae01.alicdn.com/kf/HTB1c9AeXvvsK1RjSspd763ZepXaq.png"}})):null):!f||"true"!==y&&!0!==y?null:(0,r.createElement)(a.default,{style:c.default.defaultPic},(0,r.createElement)(i.default,{style:t({},c.default.defaultImage,{width:p.defaultImageWidth||"100%",height:p.defaultImageHeight||"auto"}),source:{uri:p.defaultImage},lazyload:!1}))}}]),s}();exports.default=f,module.exports=exports.default},function(module,exports){module.exports=require("rat-frame")},function(module,exports){module.exports=require("rat-view")},function(module,exports){module.exports=require("rat-picture")},function(module,exports){module.exports=require("rat-overlay")},function(module,exports){module.exports=require("rat-text")},function(module,exports,e){module.exports={wrapper:{width:"1200px",marginTop:"0rem",marginRight:"auto",marginBottom:"0rem",marginLeft:"auto",position:"relative"},title:{fontSize:"14px",color:"rgb(255,0,0)"},pic:{width:1200},defaultImage:{width:1200},checkpic:{width:"1200px",height:"120px",display:"block",cursor:"pointer"},close:{right:"70px",top:"20px",position:"fixed",cursor:"pointer",width:"48px",height:"48px",zIndex:103},defaultPic:{width:"1200px",marginTop:"0rem",marginRight:"auto",marginBottom:"0rem",marginLeft:"auto"},textWrap:{display:"inline-block",marginTop:"12px",marginBottom:"12px"},rulesImage:{float:"left",width:"12px",height:"12px",marginRight:"5px",marginTop:"2px",display:"block",cursor:"pointer"},word:{float:"left",cursor:"pointer",color:"rgb(255,255,255)",fontSize:"13px",fontFamily:"Open Sans",fontWeight:"700"}}}])});