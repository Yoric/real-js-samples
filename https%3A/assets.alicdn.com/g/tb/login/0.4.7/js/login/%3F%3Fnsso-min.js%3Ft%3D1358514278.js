KISSY.add("login/placeholder",function(a){var b=function(c){return this instanceof b?(c=c||{},this.label=c.label?a.one(c.label):null,this.wrap=this.label?this.label.parent():null,this.input=(c.input?a.one(c.input):null)||(this.wrap?this.wrap.one("input"):null),void this._init()):new b(c)};return a.augment(b,{_init:function(){this.input&&this.label&&(this._bind(),a.later(function(){this.input.fire("valuechange")},50,!1,this))},_bind:function(){this.label.on("click",function(a){this.input[0].focus()},this),this.input.on("blur",function(a){this.input.val()?this._hide():this._show(),this._focusing=!1},this).on("focus",function(a){this.input.val()?this._hide():this._focus(),this._focusing=!0},this).on("valuechange",function(a){this.input.val()?this._hide():this._focusing?this._focus():this._show()},this)},_show:function(){this.wrap.removeClass("ph-focus").removeClass("ph-hide")},_hide:function(){this.wrap.removeClass("ph-focus").addClass("ph-hide")},_focus:function(){this.wrap.removeClass("ph-hide").addClass("ph-focus")}}),b},{requires:["node"]}),KISSY.add("login/validator",function(a){var b=a.all,c=(a.one,function(b){return this instanceof c?(b=b||{},this.message=b.message,this.type=a.isString(b.type)?b.type:"",this.checkcode=b.checkcode,this.password=b.password,this.elUserName=b.elUserName,this.elMobile=b.elMobile,this.elMobilePwd=b.elMobilePwd,void this._init()):new c(b)}),d={on:function(a){b(a).addClass("highlight")},off:function(a){b(a).removeClass("highlight")}};return a.augment(c,{_init:function(){!this.message||!this.type},check:function(){var a="";switch(this.type){case"static":a=this._checkStaticForm();break;case"dynamic":a=this._checkDynamicForm()}return a?(this.message&&this.message.show(a),!1):!0},_checkStaticForm:function(){var b="",c=this.elUserName?a.trim(this.elUserName.val()):"",e=this.checkcode?a.trim(this.checkcode.val()):"",f=this.password?this.password.val():"";return this.elUserName&&!c?(b="\u8d26\u6237\u540d",this.elUserName&&d.on(this.elUserName)):this.elUserName&&d.off(this.elUserName),f?this.password&&d.off(this.password.input):(b?b+="\u548c\u5bc6\u7801":(b="\u5bc6\u7801",this.password&&this.password.focus()),this.password&&d.on(this.password.input)),this.checkcode&&this.checkcode.on&&!e&&(b?d.off(this.checkcode.input):(b="\u9a8c\u8bc1\u7801",this.checkcode.focus(),d.on(this.checkcode.input))),b?"\u8bf7\u8f93\u5165"+b:""},_checkDynamicForm:function(){var b="";return this.elMobile&&!a.trim(this.elMobile.val())?(b="\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",this.elMobile[0].focus(),d.on(this.elMobile),b):this.elMobile&&!/^\d+$/g.test(a.trim(this.elMobile.val()))?(b="\u624b\u673a\u53f7\u7801\u53ea\u80fd\u4e3a\u6570\u5b57",this.elMobile[0].focus(),d.on(this.elMobile),b):(this.elMobile&&d.off(this.elMobile),this.elMobilePwd&&!a.trim(this.elMobilePwd.val())?(b="\u8bf7\u8f93\u5165\u52a8\u6001\u5bc6\u7801",d.on(this.elMobilePwd)):this.elMobilePwd&&d.off(this.elMobilePwd),b)}}),c}),KISSY.add("login/xlogin",function(a,b,c,d,e,f){var g=function(a){return this instanceof g?void 0:new g(a)};return a.augment(g,{_init:function(){this.form&&(this.validator=d(a.merge(this.cfg,{message:this.message})),this.submitbutton=e({el:a.one(".J_Submit",this.form)}),this._bind())},_ci:function(){if("STATIC"===this.type&&this.password)try{this.form[0].elements.tid.value=this.password.ci1(),a.UA.ie&&(this.form[0].elements.poy.value=this.password.ci2())}catch(b){}},_bind:function(){var b=this;this.form.on("submit",function(d){d.halt(),window._submit_t_&&window._lgst_&&(window._submit_t_.t1="STATIC"===b.type?"static":"dynamic",window._submit_t_.t2=a.now()),b.submitbutton&&b.submitbutton.ing(b.submitbutton.t()||"\u6b63\u5728\u767b\u5f55..."),c.ready(function(){b.validator.check()?b._login():b.submitbutton&&b.submitbutton.reset()})})},_updateCacheEdit:function(){this.cacheedit=this.cacheedit||f(this.cfg),this.cacheedit.update()},_login:function(){var b=this.password.val();if("STATIC"===this.type&&this.password.safeon&&this.password.input.val(b),"STATIC"===this.type&&this.elPasswordRSA)if("1"===this.form[0].elements.loginASR.value){this.elPasswordRSA.attr("maxlength",2048);try{this.elPasswordRSA.val(this.password.encrypt(b)),this.form[0].elements.loginASRSuc.value="1",this.password.input.val("")}catch(c){}}else this.form[0].elements.loginASRSuc.value="0";"STATIC"===this.type&&(this._ci(),this._updateCacheEdit(),a.isFunction(window.PwdIntensity)&&(this.form[0].elements.pstrong.value=window.PwdIntensity(b))),this._submit()},_submit:function(){var a=this.form[0];try{var b=a.elements.newlogin,c=a.elements.callback;b&&(b.value="0"),c&&(c.value="")}catch(d){}a.submit()}}),g},{requires:["event","login/um","login/validator","login/submitbutton","login/static/cacheedit"]}),KISSY.add("login/um",function(a){return{ready:function(b){if(a.isFunction(b)){var c,d=a.one("#um_to"),e=window.um,f=1500,g=200,h=0;return d?void(e&&e.getStatus?c=a.later(function(){h+=g,(e.getStatus()||h>=f)&&(d.val(window.parseInt(d.val(),10)+h),c.cancel(),b())},g,!0):b()):void b()}}}}),KISSY.add("login/static/username/index",function(a,b,c,d,e,f,g){var h=function(a){return this instanceof h?(a=a||{},this.input=a.elUserName,this.checkURL=a.checkURL,this.usePhoneTips=!!a.usePhoneTips,this.bCBU=a.bCBU,this.url=a.checkUserNameURL,this.message=a.message,this.unit=f(a),this.verify=!!a.verify,this.checkcode=a.checkcode,this.CACHE={},this.img=a.elCheckCodeImg,void this._init()):new h(a)};return a.augment(h,{_init:function(){if(this.input){if(this.verify)return void this._check();var c=d({bCBU:this.bCBU}).get();c&&!this.input.val()&&this.input.val(c),e({input:this.input}),this.usePhoneTips&&(this.phonetips=g({wrap:this.input.parent()}).on("click",function(a){this.phonetips.hide()},this));var f=this;this.input.on("blur",function(){f._check(),f.usePhoneTips&&!f.phonetips.onover&&f.phonetips.hide()}).on("keyup focus",function(){f.usePhoneTips&&(/^\d+$/.test(f.input.val())||f.input.val().length>=2?f.phonetips.hide():f.phonetips.show())});try{b.ipad&&window.self!==window.top&&(this.input.parent().append('<div id="J_UnPad" style="position:absolute;left:0;top:0;width:100%;height:100%;"></div>'),a.one("#J_UnPad").on("click",function(b){f.input[0].focus(),a.one(b.currentTarget).remove()}))}catch(h){}}},_checkCode:function(b){b&&this.checkcode&&(this.checkcode.isShow()?this.checkcode.refresh():this.checkcode.show()),b&&window.__nc&&(window.__nc.is_show?window.__nc.reload():(window.__nc.show(),a.one("#J_NcoShow")&&a.one("#J_NcoShow").val("true")))},_check:function(){var b=a.trim(this.input.val()),c=window.encodeURIComponent(b);if(this.hasChecked(c)&&window.__nc&&!window.__nc.is_show)return void this._checkCode(this.CACHE[c].needcode);if(!this._checking){this._checking=!0;var d=this;a.io({type:"post",url:(window.loginConfig.unitHost||"")+this.url,cache:!1,dataType:"json",data:{username:b,ua:window[UA_Opt.LogVal]},success:function(a){d.CACHE[c]=a,window.__nc&&!window.__nc.is_show?d._checkCode(a.needcode):(a.url&&d.img.attr("data-src",a.url),d.checkcode.wrap.hasClass("hidden")&&d._checkCode(a.needcode)),d.unit.init({loginName:b,unit:a.unt&&2===a.unt.split("#").length?a.unt.split("#")[1]:""}),d._checking=!1},error:function(){d._checking=!1}})}},hasChecked:function(b){return this.CACHE.hasOwnProperty(b)&&!a.isUndefined(this.CACHE[b].needcode)}}),h},{requires:["ua","ajax","login/tracknick","login/inputclear","login/unit","login/static/username/phonetips"]}),KISSY.add("login/inputclear",function(a){var b=function(c){return this instanceof b?(this.input=a.one(c.input),this.uid=a.now(),this.el=null,this.force=!!c.force,void this._init()):new b(c)};return a.augment(b,{_init:function(){!this.input||!this.force&&this.nativeSupport()||(this.wrap=this.input.parent(),this.input.on("valuechange",function(){this.input.val().length?this.show():this.hide()},this),this.input.fire("valuechange"))},_create:function(){var b=a.DOM.create("<span>",{id:"J_NickX"+this.uid,"class":"nickx",href:"javascript:void(0)"});this.wrap.append(b),this.el=a.one("#J_NickX"+this.uid),a.one(this.el).on("click",function(a){a.halt(),this.input.val(""),this.input[0].focus(),this.hide()},this)},nativeSupport:function(){return a.UA.ie&&a.UA.ie>=10},show:function(){return this.el||this._create(),this.el[0].style.display="block",this},hide:function(){return this.el&&(this.el[0].style.display="none"),this}}),b},{requires:["ua"]}),KISSY.add("login/unit",function(a){var b={daily:{https:"https://login.daily.taobao.net",http:"http://login.daily.taobao.net"},production:{https:"https://login.taobao.com",http:"http://login.taobao.com"}},c=function(a){return this instanceof c?(this.cfg=a||{},this.bDaily=a.bDaily,this.bHttps=a.bHttps,void this._init()):new c(a)};return a.augment(c,{_init:function(){!this.input},init:function(a){a=a||{},this.loginName=a.loginName||"",this.unit=a.unit||"",window.loginConfig.unitHost="",window.loginConfig.unit="",this.loginName&&(this.unit?(window.loginConfig.unit=this.unit,window.loginConfig.unitHost=this._getUnitHost(this.unit)):window.loginConfig.unitHost=this._getUnitCookie(this.loginName),window.loginConfig.unitHost&&(this.cfg.elStaticForm&&this.cfg.elStaticForm.attr("action",window.loginConfig.unitHost+this.cfg.staticFormAction),this.cfg.elDynamicForm&&this.cfg.elDynamicForm.attr("action",window.loginConfig.unitHost+this.cfg.dynamicFormAction)))},_getUnitCookie:function(b){var c=a.Cookie.get("unt");if(!c)return"";if(a.one("#J_UnitClose"))return"";var d=2===c.split("&").length?c.split("&"):null,e=d&&d[0],f=d&&d[1];return e===b&&f?this._getUnitHost(f):""},_getUnitHost:function(a){var c;return c=this.bDaily?this.bHttps?b.daily.https:b.daily.http:this.bHttps?b.production.https:b.production.http,a&&"center"!==a?c.replace(/\/\/login\./,"//"+a+".login."):c}}),c},{requires:["io","dom","event","node","cookie"]}),KISSY.add("login/static/username/phonetips",function(a){var b=function(c){return this instanceof b?(c=c||{},this.wrap=c.wrap?a.one(c.wrap):null,this.el=null,this.onover=!1,void this._init()):new b(c)};return a.augment(b,a.EventTarget,{_init:function(){!this.wrap},_create:function(){this.wrap.append('<div class="tips phone-tips" id="J_PhoneTips"><i></i>\u624b\u673a\u53f7\u7801\u4e5f\u53ef\u4f5c\u4e3a\u8d26\u6237\u540d\u54e6<a href="http://service.taobao.com/support/knowledge-1119899.htm?dkey=catview" target="_blank">?</a></div>'),this.el=a.one("#J_PhoneTips"),this.el.on("mouseover",function(){this.onover=!0},this).on("mouseout",function(){this.onover=!1},this).on("click",function(){this.fire("click")},this)},show:function(){this.el||this._create(),this.el.show().addClass("show")},hide:function(){this.el&&this.el.hide().removeClass("show")}}),b},{requires:["event"]}),KISSY.add("login/static/password",function(a,b,c,d,e,f,g,h){var i=function(b){return this instanceof i?(this.cfg=b=b||{},this._safeon=!!b.safeon,this.safeon=!1,this.input=b.elPassword,this.inputContainer=a.one("#J_StandardPwd"),this.form=b.elStaticForm,this.editChk=b.elEditChk,this.editContainer=a.one("#J_PasswordEdit"),this.editContainer=a.one("#J_PasswordEdit"),this.editTmpContainer=a.one("#J_PasswordEditTmp"),this.pbk=a.all("#J_PBK").val(),this.exponent="10001",this.elUserName=this.cfg.elUserName,void this._init()):new i(b)};return a.augment(i,{_init:function(){var b=this;if(this.safeeditTmp=e({container:this.editTmpContainer,width:0,height:0}),this.input&&this.editChk){try{d.ipad&&window.self!==window.top&&(this.input.parent().parent().append('<div id="J_PwdPad" style="position:absolute;left:0;top:0;width:100%;height:100%;"></div>'),a.one("#J_PwdPad").on("click",function(c){b.input[0].focus(),a.one(c.currentTarget).remove()}))}catch(c){}if(this.editContainer.hide(),this.safeedit=e({mode:"password",container:this.editContainer,width:this.cfg.bMini?250:228,height:this.cfg.bMini?26:27}),!this.safeedit.envsupport)return this.editChk.parent().hide(),void this.editChk.prop("disabled",!0);this.safeedit.on("enter_keydown",function(){b.form.fire("submit")}),this.cacheedit=g(this.cfg),a.later(function(){this.safeedit&&this.safeedit.support&&this._safeon&&!this.cacheedit.check()?this.showEdit():this.input.val().length>20&&this.input.val("")},50,!1,this),this.editChk.on("click",function(){b._editChkClicked=!0;var a=b.editChk.prop("checked");a?b.showEdit():b.hideEdit()}),this.elUserName&&!this.safeedit.tabsupport&&this.elUserName&&this.elUserName.on("keydown",function(c){9===c.keyCode&&!b._editChkClicked&&b.safeon&&(b.hideEdit(),a.later(function(){b.focus()},50))})}},val:function(){return this.safeon?this.safeedit.val():this.input.val()},focus:function(){this.safeon||this.input[0].focus()},encrypt:function(a){return a&&this.pbk&&this.exponent?(this.rsa||(this.rsa=new h,this.rsa.setPublic(this.pbk,this.exponent)),a=this.rsa.encrypt(a)):a},showEdit:function(){return this.safeedit.support?(this.inputContainer[0].style.display="none",this.editContainer[0].style.display="block",this.safeon=!0,this.editChk.prop("checked",!0),this.form[0].elements.loginType.value=4,this.input.val("").attr("maxlength",1e3),void(this.cfg.elStaticForm&&this.cfg.elStaticForm.attr("autocomplete","off"))):(f.show(this.cfg.bMini),void this.editChk.prop("checked",!1))},hideEdit:function(){this.inputContainer[0].style.display="block",this.editContainer[0].style.display="none",this.safeon=!1,this.editChk.prop("checked",!1),this.form[0].elements.loginType.value=3,this.input.val("").attr("maxlength",20),this.cfg.elStaticForm&&this.cfg.elStaticForm.attr("autocomplete","on")},ci1:function(){return this.safeon&&this.safeedit?this.safeedit.ci1():this.safeeditTmp?this.safeeditTmp.ci1():""},ci2:function(){return this.safeon&&this.safeedit?this.safeedit.ci2():this.safeeditTmp?this.safeeditTmp.ci2():""},refreshEdit:function(){this.editChk&&this.editChk.prop("checked")&&(this.editContainer[0].style.visibility="hidden",a.later(function(){this.editContainer[0].style.visibility="visible"},50,!1,this))}}),i},{requires:["node","dom","ua","login/safeedit/index","login/safeedit/pluginpop","login/static/cacheedit","gallery/rsa/1.0/index"]}),KISSY.add("login/safeedit/index",function(a,b,c,d,e){var f=function(){var a=null;if(window.ActiveXObject)try{a=new window.ActiveXObject("Aliedit.EditCtrl")}catch(b){return!1}else a=navigator.plugins["Alipay security control"]||navigator.plugins["Aliedit Plug-In"]||navigator.plugins.Aliedit;return!!a},g=function(b){return this instanceof g?(this.mode=a.isString(b.mode)?b.mode.toUpperCase():"",this.container=a.one(b.container),this.classid=b.classid||"clsid:488A4255-3236-44B3-8F27-FA1AECAA8844",this.codebase=b.codebase||"https://img.alipay.com/download/2121/aliedit.cab",this.width=a.isNumber(b.width)?b.width:0,this.height=a.isNumber(b.height)?b.height:0,this.uid=a.now(),void this._init()):new g(b)};return a.augment(g,a.EventTarget,{_init:function(){("PASSWORD"!==this.mode||this.container)&&(this.container="PASSWORD"===this.mode||this.container?this.container:a.one("body"),this.support&&this.create(),"PASSWORD"===this.mode&&e({edit:this.ctrl,tabindex:2}))},ready:function(b){this.timer=a.later(function(){this.clock=this.clock?this.clock+=20:0;try{this.clock<=1e3&&this.ctrl&&!a.isUndefined(this.ctrl.TextData)?(b.call(this),this.timer.cancel()):this.clock>1e3&&this.timer.cancel()}catch(c){}},20,!0,this)},support:f(),tabsupport:!a.UA.chrome&&!a.UA.safari&&!a.UA.opera,envsupport:function(){var b=a.UA,c=b.os;if("macintosh"===c){if(b.firefox||b.safari||b.chrome)return!0}else if("windows"===c&&(b.firefox||b.safari||b.chrome||b.ie||b.opera))return!0;return!1}(),create:function(){if(this.support){var b=this,c=a.UA.ie?"":'<embed type="application/aliedit" id="J_SafeeditNotIE{uid}" width="{width}" height="{height}">',d='<object id="J_Safeedit{uid}" tabindex="2" classid="{classid}" codebase="{codebase}" type="application/aliedit" width="{width}" height="{height}"><param name="cm5ts" value="0613110323" /><param name="cm5pk" value="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDDS92pDVyWNT7dzG9zH0opH44z9FayCZTX5iqGUxUjPi667IkyaqrsmDPqKsJp47lJ29lzs+Qv8zjPPdmnxjFteMrfpc4ui24gL1iZnchwX87Ox/+Xrm8HFmKlhmUO9n/QgTT+Nz1RGMEN1+HijvsoAhS0TS8XjSfzRkrwvK2pJQIDAQAB" /><param name="CryptoMode" value="4" /><param name="PasswordMode" value="{mode}">'+c+"</object>";d=a.substitute(d,{uid:this.uid,mode:"PASSWORD"===this.mode?1:0,width:"PASSWORD"===this.mode?this.width:0,height:"PASSWORD"===this.mode?this.height:0,classid:this.classid,codebase:this.codebase}),this.container.append(d),this.ctrl=a.all("#J_SafeeditNotIE"+this.uid)[0]||a.all("#J_Safeedit"+this.uid)[0],this.ctrl&&(this.ctrl.onkeydown=function(a){a||(a=window.event),13===a.keyCode&&b.fire("enter_keydown")})}},val:function(){return this.ctrl?this.ctrl.TextData:""},ci1:function(){try{return this.ctrl?this.ctrl.ci1():""}catch(a){return""}},ci2:function(){return this.ctrl?this.ctrl.ci2():""},ver:function(){return this.ctrl?this.ctrl.alieditVersion():""}}),g},{requires:["node","dom","event","login/safeedit/safeedittab"]}),KISSY.add("login/safeedit/pluginpop",function(a,b,c,d,e){var f=e.Popup,g=a.one("#J_PluginPopup");if(g){var h,i,j=g.one(".J_Close"),k=a.one("#J_DlEdit"),l={mac:"http://download.alipay.com/sec/edit/wkaliedit.dmg",notmac:"http://download.alipay.com/sec/edit/aliedit.exe"};return j.on("click",function(){i.hide()}),k&&k.attr("href","macintosh"===a.UA.os?l.mac:l.notmac),i={show:function(a){g&&(h||(g.show().appendTo("body"),g.css({display:"block"}),h=new f({srcNode:g,width:a?290:341,mask:!0,align:{points:["cc","cc"]}})),g.css({display:"block"}),h.show())},hide:function(){h&&(h.hide(),g.css({display:"none"}))}}}},{requires:["node","dom","ua","overlay"]}),KISSY.add("login/safeedit/safeedittab",function(a){var b=function(c){return this instanceof b?(c=c||{},this.edit=c.edit&&a.one(c.edit),this.tabindex=Number(c.tabindex)||0,void this._init()):new b(c)};return a.augment(b,{_init:function(){if(!this.edit||a.UA.ie)return this;this.edit.attr("tabindex",this.tabindex),this.edit.parent("object").removeAttr("tabindex");var b=this;this.edit[0].addEventListener("keypress",function(a){if(9===a.keyCode){var c;c=a.shiftKey?b.prevSource(b.edit,b.filter):b.nextSource(b.edit,b.filter),c&&c[0].focus()}},!1)},nextSource:function(a,b){var c=a.first();c||(c=a.next());for(var d=a;!c&&(d=d.parent());)c=d.next();return c?this.filter(c)?c:this.nextSource(c,b):null},prevSource:function(b,c){var d=a.one(b[0].lastChild);d||(d=b.prev());for(var e=b;!d&&(e=e.parent());)d=e.prev();return d?this.filter(d)?d:this.prevSource(d,c):null},filter:function(a){return 1===a[0].nodeType&&a[0].offsetHeight&&a[0].offsetWidth&&a.attr("tabindex")>=0}}),b}),KISSY.add("login/checkcode/index",function(a,b,c,d,e){var f=function(b){return this instanceof f?(b=b||{},this.form=b.elStaticForm,this.input=b.elCheckCode,this.img=b.elCheckCodeImg,this.imgHandler=b.elCheckCodeImgHandler,this.wrap=a.one("#l_f_code"),this.elNeedCheckCode=this.form?a.one(this.form[0].elements.need_check_code):null,this.src=this.img?this.img.attr("data-src"):"",this.bMini=b.bMini,this._refreshed=!1,void this._init()):new f(b)};return a.augment(f,{_init:function(){if(this.img&&this.imgHandler&&this.wrap){var b=this;this.imgHandler.on("click",function(a){a.halt(),b.refresh(),b.focus()}),this.img.on("click",function(){b.refresh(),b.focus()}),e({input:this.input,url:"http://voicecheckcode.taobao.com/vcc/checkcode?sessionID=0",handle:"#J_audioHandle"}),this.isShow()&&this.refresh();try{d.ipad&&window.self!==window.top&&(this.input.parent().append('<div id="J_CheckCodePad" style="position:absolute;left:0;top:0;width:100%;height:100%;"></div>'),a.one("#J_CheckCodePad").on("click",function(c){b.input[0].focus(),a.one(c.currentTarget).remove()}))}catch(c){}}},refresh:function(){return this.src=this.img?this.img.attr("data-src"):"",this.img.attr("src",this.src+(this.src.indexOf("?")>0?"&":"?")+"_r_="+a.now()),this._refreshed=!0,this},show:function(){return(this.img.attr("src").indexOf("blank")>=0||!this._refreshed&&this.bMini&&this.isShow())&&this.refresh(),this.wrap.removeClass("hidden"),this.input.val(""),this.elNeedCheckCode&&this.elNeedCheckCode.val("true"),this.on=!0,this},hide:function(){return this.wrap.addClass("hidden"),this.input.val(""),this.elNeedCheckCode&&this.elNeedCheckCode.val(""),this.on=!1,this},val:function(){return this.input.val()},isShow:function(){return this.on=!this.wrap.hasClass("hidden"),this.on},focus:function(){return this.input[0].focus(),this}}),f},{requires:["node","event","ua","login/checkcode/audiocheckcode"]}),KISSY.add("login/checkcode/audiocheckcode",function(a){var b=a.DOM,c=function(b){return this instanceof c?(b=b||{},this.url=b.url||"",this.input=b.input&&a.one(b.input),this.handle=b.handle&&a.one(b.handle),this.player=null,void this._init()):new c(b)};return a.augment(c,{_init:function(){if(!this.url||!this.input||!this.handle)return this;var b=this;this.handle.on("click",function(c){c.halt(),b.play(),a.later(function(){b.input[0].focus()},10)})},playHTML:function(){var b,c=-1!==navigator.userAgent.indexOf("Windows");try{b="Audio"in window&&(new window.Audio).canPlayType("audio/x-wav;")?function(){return"<audio autoplay hidden></audio>"}:a.UA.ie?function(){return"<bgsound></bgsound>"}:function(){return"<embed "+(c?'type="application/x-mplayer2"':'type="audio/x-wav"')+' autostart="true" hidden="true" />'}}catch(d){b=a.UA.ie?function(){return"<bgsound></bgsound>"}:function(){return"<embed "+(c?'type="application/x-mplayer2"':'type="audio/x-wav"')+' autostart="true" hidden="true" />'}}return this.playHTML=b,b()},play:function(){this.player&&this.player.parentNode.removeChild(this.player),this.player=b.create(this.playHTML(),{src:this.url+"&t="+(new Date).getTime()}),b.append(this.player,document.body||document.documentElement)}}),c}),KISSY.add("login/static/cacheedit",function(a,b){var c=function(a){return this instanceof c?(this.cfg=a||{},this.elUserName=a.elUserName,this.elEditChk=a.elEditChk,void this._init()):new c(a)};return a.augment(c,{_init:function(){!this.elUserName||!this.elEditChk},_get:function(){try{return a.Cookie.get("_lg_nse_")}catch(b){return this._set(),!0}},check:function(){return!!this._get()},_set:function(){var b=new Date;b.setFullYear(b.getFullYear()+1),a.Cookie.set("_lg_nse_",a.now(),b)},_unset:function(){a.Cookie.set("_lg_nse_","")},update:function(){this.elUserName&&a.trim(this.elUserName.val())&&this.elEditChk&&(this.elEditChk.prop("checked")?this._unset():a.trim(this.elUserName.val())&&this._set())}}),c},{requires:["cookie"]}),KISSY.add("login/static/login",function(a,b,c,d){var e=function(a){return this instanceof e?(this.cfg=a=a||{},this.bCBU=this.cfg.bCBU,this.havanaEnable=a.havanaEnable,this.loginUrl=a.loginUrl,this.form=a.form,this.message=a.message,this.password=a.password,this.elPasswordRSA=a.elPasswordRSA,this.checkcode=a.checkcode,this.type="STATIC",void this._init()):new e(a)};return a.augment(e,d,{_init:function(){if(this.form){var d={type:"static",message:this.message,password:this.password};window.__nc||(d.checkcode=this.checkcode),this.validator=b(a.merge(this.cfg,d)),this.submitbutton=c({el:a.one(".J_Submit",this.form)}),this._bind()}}}),e},{requires:["login/validator","login/submitbutton","login/xlogin"]}),KISSY.add("login/static/guidehook",function(a){return function(b){var c=a.one("#J_SC_Guide");c&&a.isFunction(b)&&c.on("click",function(a){a.halt(),b({type:"click"})})}},{requires:["node","event"]}),KISSY.add("login/static/index",function(a,b,c,d,e,f,g){return function(b){if(a.isObject(b)){var h,i=e(b),j=d(a.merge(b,{safeon:!b.verify})),k={form:b.elStaticForm,password:j};return window.__nc?h=c(a.merge(b)):(h=c(a.merge(b,{checkcode:i})),k.checkcode=i),f(a.merge(b,k)),g(function(){j&&j.hideEdit&&j.hideEdit()}),{refreshEdit:function(){j.refreshEdit()},password:j}}}},{requires:["ua","login/static/username/index","login/static/password","login/checkcode/index","login/static/login","login/static/guidehook"]}),KISSY.add("login/dynamic/index",function(a,b){return function(c){a.isObject(c)&&b(a.merge(c,{form:c.elDynamicForm}))}},{requires:["login/dynamic/login"]}),KISSY.add("login/dynamic/login",function(a,b,c,d){var e=function(a){return this instanceof e?(this.cfg=a=a||{},this.bCBU=this.cfg.bCBU,this.form=a.elDynamicForm,this.message=a.message,this.havanaEnable=a.havanaEnable,this.loginUrl=a.loginUrl,this.type="DYNAMIC",void this._init()):new e(a)};return a.augment(e,d,{_init:function(){this.form&&(this.validator=b(a.merge(this.cfg,{type:"dynamic",message:this.message})),this.submitbutton=c({el:a.one(".J_Submit",this.form)}),this._bind())}}),e},{requires:["login/validator","login/submitbutton","login/xlogin"]}),KISSY.add("login/nsso",function(a,b,c,d){return a.each(a.all(".ph-label"),function(a){b({label:a})}),{Static:c,Dynamic:d}},{requires:["login/placeholder","login/static/index","login/dynamic/index"]});