/**
 * Mail.ru RBAdman-HTML5
 * Release date: 2018-10-31
 * Version: 2.1.40
 */
AdmanHTML=function(){"use strict";function a(a){D.rb(16138744),z.slotId=a.slot,z.wrapper=a.wrapper,z.videoEl=a.videoEl,z.audioEl=a.audioEl,z.clickEl=a.clickEl,z.quality=parseInt(a.videoQuality||360,10),z.browser=a.browser,z.config=a.config||{},G=a.midrollPointsP||null,F=!G&&a.midrollPoints?a.midrollPoints:null,z.config.vpaidJsInterface||(z.config.vpaidJsInterface=B),z.config.vpaidHtmlInterface=C;var b=A+"//ad.mail.ru/vp/"+z.slotId;if(a.params&&a.params.constructor&&a.params.constructor===Object){var c=[];"flash"in a.params||(a.params.flash=AdmanHTML.Utils.checkFlash()?1:0);for(var d in a.params)a.params.hasOwnProperty(d)&&c.push(d+"="+a.params[d]);c.length&&(b+="?"+c.join("&"))}if(!z.slotId&&!a.json||z.browser.adBlock){D.logError("Adman init failed");var e=z.callbacks.onError;e&&e(),w=v=u=null}else{var f={};z.slotId?f.url=b:f.data=a.json,t=new AdmanHTML.AdSlot(z,f,function(){z.cb("onReady",[{settings:t.settings}]);var b=1e6,c=[],d=[],e=a.params&&a.params.duration?parseInt(a.params.duration,10):b;0===e&&(e=b),F&&F.sort(AdmanHTML.Utils.numSorter),G&&G.sort(AdmanHTML.Utils.numSorter);var f=t.getSection("midroll")||[],g=t.getServices("midroll",function(a){return!a.started()&&a.isAfter()})||[];f=f.concat(g),f.forEach(function(a){var b=a.getAd();b.point||b.pointP||(b.pointP=50)}),f.sort(function(a,b){var c=a.getAd(),d=b.getAd();if(c.pointP&&d.pointP)return c.pointP-d.pointP;var f=c.point||c.pointP/100*e,g=d.point||d.pointP/100*e;return f-g}).forEach(function(a){if(!a.isEmpty||!a.isEmpty()){var b=a.getAd();F&&F.length?(b.point=F.shift(),b.pointP=null,d.push(b.point),a.addImmutableProperty("point",b.point)):G&&G.length?(b.pointP=G.shift(),b.point=null,c.push(b.pointP),a.addImmutableProperty("pointP",b.pointP)):F||G||(b.point?d.push(b.point):b.pointP&&c.push(b.pointP))}}),I=c.sort(AdmanHTML.Utils.numSorter),H=d.sort(AdmanHTML.Utils.numSorter)})}}function b(a){var b;w&&(w.log("sectionShown"),w.disposed||(w.dispose(),w.disposed=!0,s(w,u)),a&&w.log("closedByUser")),u&&!N[u]&&(N[u]="midroll"===u?!1:!0,b=a?z.callbacks.onClosed:z.callbacks.onCompleted),M[u]&&v&&(M[u]=M[u].concat(v.splice(0,v.length))),w=v=u=null,f(),b&&b()}function c(){var a=t.getSettings(u).maxBannersShow||0,d=L[u]||0,e=!a||a>d;if(w&&!w.disposed&&(w.complete&&w.log("playbackCompleted"),w.dispose(),w.disposed=!0,s(w,u)),v&&v.length&&e)w=v.shift(),L[u]=d+(w.isEmpty()?0:1),w.reset(),w.started=!0,w.start();else{var f=t.getNextAfterService(u);"midroll"!==u&&f&&e?f.start(function(){v=t.getSection(u),c()}):t.getSettings(u).loop&&M[u]&&M[u].length?(v=M[u],M[u]=[],c()):b()}}function d(a){v||(u=a||"preroll",t.resetServices(u),N[u]=!1,v=t.getSection(u),"midroll"===a&&(v=h(v)),c(),u&&(M[u]=M[u]||[]),w&&(w.log("sectionStarted"),z.debugMode&&console.log(u,w.getAd(),w.getSettings(),v)),e(u))}function e(a){x=t.getDebug(a),x&&x.start()}function f(){x&&x.dispose(),x=null}function g(a,b){function c(a,b){for(var c=0;c<a.length&&!(a[c]>b);c++);return a.slice(0,c)}function d(a){var b=a.getAd();return b.point&&-1===H.indexOf(b.point)||b.pointP&&-1===I.indexOf(b.pointP)?!1:b.point&&b.point<=g||b.pointP&&b.pointP<=h}if(!isNaN(a)&&!isNaN(b)&&0!==b){var e=parseInt(a),f=Math.floor(100*a/b);y=b,J=I?c(I,f):[],K=H?c(H,e):[];var g=e+5,h=f+5/b*100,i=t.getServices("midroll",function(a){return a.isAfter()&&!a.started()&&d(a)?!0:!1});if(i.forEach(function(a){t.removeService(a),a.start()}),J.length||K.length){var j=!1,k=t.getSection("midroll");k&&k.forEach(function(a){var b=a.getAd();(b.pointP&&~J.indexOf(b.pointP)||b.point&&~K.indexOf(b.point))&&(j=!0)}),j&&z.cb("adMidrollPoint",[a])}}}function h(a){function b(a,b){var c=a.getAd(),d=b.getAd(),e=c.point||c.pointP*y/100,f=d.point||d.pointP*y/100;return e-f}var c=[];return a&&a.forEach(function(a){var b=a.getAd();(b.pointP&&~J.indexOf(b.pointP)||b.point&&~K.indexOf(b.point))&&c.push(a)}),I=I&&I.slice(J.length),H=H&&H.slice(K.length),c.sort(b),c}function i(){z.cb("onSkipped"),w&&(w.log("closedByUser"),w.skip(c))}function j(){w&&(w.log("playbackPaused"),w.pause())}function k(){w&&(w.log("playbackResumed"),w.resume())}function l(a){a=0>a?0:a>1?1:a,w&&w.setVolume(a)}function m(){w&&w.log("fullscreenOn")}function n(){w&&w.log("fullscreenOff")}function o(){b()}function p(a,b){z.callbacks[a]=b}function q(a){var b=[],c=t.getSection(a||"preroll");return c&&c.forEach(function(a){a.isEmpty()||b.push(a.getExtendedAdForApp())}),b}function r(a){return t.getAfterServices(a||"preroll")}function s(a,b){a.isEmpty()||a.isStat()||M[b]&&M[b].push(a)}var t,u,v,w,x,y,z={version:"2.1.40",debugMode:!0,callbacks:{},cb:function(a,d){switch(a){case"onCompleted":w&&(w.complete=!0),c();break;case"onError":w&&(w.error=!0),c();break;case"onClosed":b(!0);break;default:var e=z.callbacks[a];e&&e.apply(this,d)}}},A="http:"===window.location.protocol?"http:":"https:",B=A+"//ad.mail.ru/static/admanhtml/2.1.40/vpaid-js-interface.swf",C=A+"//r.mradx.net/img/AC/ABA700.html",D=new AdmanHTML.Stats(z),E=new AdmanHTML.Viewability,F=[],G=[],H=[],I=[],J=[],K=[],L={},M={};z.stats=D,z.viewability=E,z.protocol=A,D.rb(16138736);var N={};return{init:a,start:d,stop:o,pause:j,resume:k,setVolume:l,fullscreenOn:m,fullscreenOff:n,setFullscreen:function(a){a?m():n()},skip:i,destroy:o,getSlot:function(){return z.slotId},setSlot:function(a){z.slotId=a},getVersion:function(){return z.version},getBannersForSection:q,getServicesForSection:r,hasSection:function(a){return a=a||"preroll",!(!q(a).length&&!r(a).length)},setDebug:function(a){z.debugMode=a},setPosition:g,onReady:p.bind(this,"onReady"),onError:p.bind(this,"onError"),onStarted:p.bind(this,"onStarted"),onPaused:p.bind(this,"onPaused"),onPlayed:p.bind(this,"onPlayed"),onCompleted:p.bind(this,"onCompleted"),onClosed:p.bind(this,"onClosed"),onSkipped:p.bind(this,"onSkipped"),onClicked:p.bind(this,"onClicked"),onTimeRemained:p.bind(this,"onTimeRemained"),onDurationChanged:p.bind(this,"onDurationChanged"),adMidrollPoint:p.bind(this,"adMidrollPoint"),_onVPAIDStarted:p.bind(this,"onVPAIDStarted")}},AdmanHTML.Ad=function(a,b){"use strict";function c(a){a&&a.forEach(function(a){d(a.url,a.type,a)})}function d(a,c,d){var e;if(a=decodeURIComponent(a),"playheadReachedValue"===c)void 0!==d.thresholdValue||void 0!==d.value?(e=parseInt(d.thresholdValue||d.value,10),b.stats.push({name:"thresholdValue",value:e,type:"thresholdValue."+e,url:a})):(void 0!==d.thresholdPValue||void 0!==d.pvalue)&&(e=parseInt(d.thresholdPValue||d.pvalue,10),b.stats.push({name:"thresholdPValue",value:e,type:"thresholdPValue."+e,url:a}));else if("playheadViewabilityValue"===c){var f,g=parseInt(d.viewablePercent,10),h=void 0!==d.ovv||void 0!==d.mrc?!!d.ovv||!!d.mrc:!0;g=isNaN(g)?50:g,void 0!==d.value?(e=parseInt(d.value,10),f="ovvValue"):void 0!==d.pvalue?(e=parseInt(d.pvalue,10),f="ovvPValue"):void 0!==d.duration&&(e=parseInt(d.duration,10),f="mrcValue"),b.stats.push({name:f,value:e,url:a,percent:g,viewable:h})}else b.stats.push({name:c,type:c,url:a})}function e(a){b.click=a,b.ad&&(b.ad.urlToNavigateOnClick=a)}function f(a,c){b.extensions[a]=c}function g(a,c,d){!d&&a in b.immutables||(b.immutables[a]=c)}function h(a){b.settings=b.settings||{},AdmanHTML.Utils.deepExtend(b.settings,a)}function i(c){function d(a){var b=a.type||"";return~b.indexOf("video")&&"video/mp4"!==b||~b.indexOf("audio")&&"audio/mp3"!==b&&"audio/mpeg"!==b?!1:!0}function e(){a.stats.rb(16138780),a.stats.logError("UNKNOWN_ADV_TYPE")}if(b.ad=c,b.click&&(b.ad.urlToNavigateOnClick=b.click),AdmanHTML.Utils.mixin(b.ad,b.extensions),AdmanHTML.Utils.mixin(b.ad,b.immutables),b.ad.mediafiles&&b.ad.mediafiles.length){var f;b.ad.mediafiles.forEach(function(b){d(b)&&(!f||Math.abs(parseInt(b.height)-a.quality)<Math.abs(parseInt(f.height)-a.quality))&&(f=b)}),f&&AdmanHTML.Utils.mixin(b.ad,f)}delete b.ad.statistics,delete b.ad.mediafiles;var g,h;switch(b.ad.type){case"swf":case"application/x-shockwave-flash":if(h=b.ad.apiFramework||b.ad.api,a.browser.mobile||h&&"VPAID"!==h)return e(),!1;g=h?new AdmanHTML.VpaidSwfAdRenderer(a,this):new AdmanHTML.SwfAdRenderer(a,this);break;case"javascript":case"application/javascript":if(h=b.ad.apiFramework||b.ad.api,h&&"VPAID"!==h)return e(),!1;g=new AdmanHTML.VpaidJsAdRenderer(a,this);break;case"video":case"video/mp4":g=new AdmanHTML.VideoAdRenderer(a,this);break;case"audio":case"audio/mp3":case"audio/mpeg":g=new AdmanHTML.AudioAdRenderer(a,this);break;case"image":case"image/bmp":case"image/gif":case"image/jpeg":case"image/png":g=new AdmanHTML.ImgAdRenderer(a,this);break;case"text":g=new AdmanHTML.TextAdRenderer(a,this);break;case"empty":g=new AdmanHTML.EmptyAdRenderer(a,this);break;case"statistics":g=new AdmanHTML.StatisticsAdRenderer(a,this);break;case"debugData":g=new AdmanHTML.DebugAdRenderer(a,this);break;case"video/x-flv":default:return e(),!1}return b.renderer=g,!0}function j(){return new AdmanHTML.Ad(a,JSON.parse(JSON.stringify(b)))}function k(){this.started&&(b.ad&&i.call(this,b.ad),this.disposed=!1,this.completed=!1,this.error=!1,this.started=!1),b.statsBackup?b.stats=b.statsBackup.slice():b.statsBackup=b.stats.slice()}function l(a,b,c){AdmanHTML.Utils.loadImg(a.url);var d=b.indexOf(a);~d&&c&&b.splice(d,1)}function m(a,b){var c=b.indexOf(a);~c&&b.splice(c,1)}function n(a,c){function d(a){a=25*Math.floor(a/25);var b=t["thresholdPValue."+a];b&&(f=f.concat(b))}var e=a+("undefined"==typeof c?"":"."+c),f=t[e]?t[e].slice(0):[];f.push(e);var g=b.stats.slice(0);"thresholdPValue"===a&&d(c);var h="thresholdPValue"===a||"thresholdValue"===a||"closedByUser"===a;b.stats.forEach(function(b){"thresholdPValue"===a&&"thresholdPValue"===b.name&&b.value<c?l(b,g,h):"thresholdValue"===a&&"thresholdValue"===b.name&&b.value<c&&l(b,g,h),~f.indexOf(b.type)&&l(b,g,h)}),b.stats=g}function o(a){function c(a,b){var c=Math.ceil(a.percent/10);b[c].duration>1e3*a.value?a.viewable?l(a,e,!0):m(a,e):f++}function d(a){a.viewable||l(a,e,!0)}var e=b.stats.slice(0),f=0,g=a&&a.length?c:d;return b.stats.forEach(function(b){"mrcValue"===b.name&&g(b,a)}),b.stats=e,f}function p(c,d){var e,f,g=b.stats.slice(0);b.stats.forEach(function(b){("ovvValue"===b.name&&b.value<=c||"ovvPValue"===b.name&&b.value<=d)&&(e=e||a.viewability.getViewabilityState(),f=e.percent>b.percent&&e.focus,"UNDETERMINED"!==e.state&&(f&&b.viewable||!f&&!b.viewable)&&AdmanHTML.Utils.loadImg(b.url),m(b,g))}),b.stats=g}function q(a,c){b.renderer&&b.renderer[a]&&b.renderer[a](c)}function r(){var a={};return a="audio"===b.ad.type||"audio/mp3"===b.ad.type||"audio/mpeg"===b.ad.type?{allowSeek:!1,allowSkip:!1,allowTrackChange:!1,allowVolumeChange:!1}:b.settings?{allowClose:b.settings.hasOwnProperty("allowClose")?b.settings.allowClose:!0,allowCloseDelay:b.settings.hasOwnProperty("allowCloseDelay")?b.settings.allowCloseDelay:0}:{allowClose:!0,allowCloseDelay:0},AdmanHTML.Utils.mixin(a,b.ad),a}function s(){var a=r();return a.statistics=b.stats.slice(0),a}b=b||{stats:[],extensions:{},immutables:{}};var t={closedByUser:["close","skipAd"],click:["addClick"],"thresholdPValue.25":["firstQuartile"],"thresholdPValue.50":["secondQuartile","midpoint"],"thresholdPValue.75":["thirdQuartile"],"thresholdPValue.100":["fourthQuartile"],playbackStarted:["start"],playbackCompleted:["complete"],volumeOff:["mute"],volumeOn:["unmute"],playbackPaused:["pause"],playbackResumed:["resume"],fullscreenOn:["fullscreen"],error:["Error"]};return{addStatCollection:c,addStat:d,addClick:e,addExtension:f,addImmutableProperty:g,addSettings:h,getSettings:function(){return b.settings},addAd:i,getAd:function(){return b.ad},getAdForApp:r,getExtendedAdForApp:s,isEmpty:function(){return"empty"===b.ad.type},isStat:function(){return"statistics"===b.ad.type},clone:j,reset:k,log:n,logMRC:o,logOVV:p,start:q.bind(this,"start"),dispose:q.bind(this,"dispose"),pause:q.bind(this,"pause"),resume:q.bind(this,"resume"),setVolume:q.bind(this,"setVolume"),skip:q.bind(this,"skip"),complete:!1,error:!1}},AdmanHTML.AdSlot=function(a,b,c){"use strict";function d(b,c,d,f,i,j){function k(k){var l={};--s,k?(t++,k="string"==typeof k?k.trim():k,"object"==typeof k||"{"===k.charAt(0)?(l=g(k,b,c,d||0,f,i,j),u++):"<"===k.charAt(0)?(l=h(k,b,c,d||0,f,i,j),u++):(a.stats.rb(16138772),a.stats.logError("UNKNOWN_DATA_FORMAT"))):(a.stats.logError("SLOT_LOADING_ERROR"),console.log(b.url)),b.id&&(l.banners||l.services?l.banners&&x.markNonEmptyService(b.id):x.markEmptyService(b.id)),e(j)}if(d&&d>4)return void e(j);var l=x.getService(b.id);l&&l.log("serviceRequested"),++s,b.url?AdmanHTML.Utils.xhr(b.url,k):b.data&&setTimeout(k,0,b.data)}function e(b){if(!s){if(t&&u){var d=x.getNextOnEmptyService();if(d)return void d.start(e.bind(null,b));n();var g=b||c;return g.called||(g.called=!0,g()),void(a.debugMode&&console.log(p))}f()}}function f(){var b=a.callbacks.onError;b&&b()}function g(b,c,e,f,g,h,n){function o(a){return a?a.filter(function(a){return a.type&&("sectionShown"===a.type||"sectionStarted"===a.type||"sectionEmpty"===a.type)}):[]}function q(b,g,h,l){var m=e?e.clone():new AdmanHTML.Ad(a);if(m.addStatCollection(b.statistics),m.addStatCollection(b.serviceStatistics),"additionalData"===b.type){var o;b.id=b.id||AdmanHTML.Utils.createIntUID(),t.services++;var q=!p[h]||0===p[h].length;if(g>0&&q&&(w[h]=!0),b.extensions)for(var r in b.extensions)b.extensions.hasOwnProperty(r)&&i(m,b.extensions[r],r);var s=["point","pointP","hasVolume","hasPause","allowClose","allowCloseDelay","allowSeek","allowSkip","allowTrackChange","allowVolumeChange"];if(s.forEach(function(a){a in b&&m.addImmutableProperty(a,b[a])}),"true"===b.doAfter||b.doAfter===!0||b.doOnEmptyResponseFromId){var u="true"===b.doAfter||b.doAfter===!0?v.POST:null,x=function(a,c){d(b,a||m,b.allowRepeat?0:++f,h,u,function(){c&&c()})};o=new AdmanHTML.ServiceAd(a,null,x),k(h,c.id,o,b,m)}else o=new AdmanHTML.ServiceAd(a),k(h,c.id,o,b),0===g&&q?d(b,m,++f,h,v.PRE,n):d(b,m,++f,h,null,n)}else j(h,l,m,b),t.banners++;return m}var r,s=b,t={banners:0,services:0};if("string"==typeof b)try{s=JSON.parse(b)}catch(u){return a.stats.rb(16138753),void a.stats.logError("ERROR_CONVERTING_STRING_TO_JSON")}for(var x in s.sections)if(s.sections.hasOwnProperty(x)){var y=s.sections[x],z=0;if(s.settings&&(r=s.settings[x])&&(r.controlsStyle=s.settings.controlsStyle||0,m(x,r)),y.forEach(function(b){if("debugData"===b.type){var c=new AdmanHTML.Ad(a);return c.addClick(b.url),void l(x,c,b)}var d=g===x?h:"",e=q(b,z,x,d);r&&(e.addStatCollection(o(r.statistics)),e.addSettings(r)),z++}),0===y.length){var A=new AdmanHTML.Ad(a);r&&A.addStatCollection(o(r.statistics)),j(x,"",A,{type:"empty"})}}return s.type&&q(s,0,g,h),t}function h(b,c,e,f,g,h,k){function l(a,b,c){n(a.getElementsByTagName(b),c)}function m(a,b,c,d){l(a,b,function(a){d(p(a),c?o(a,c):null,a)})}function n(a,b){Array.prototype.forEach.call(a,b.bind(this))}function o(a,b){var c=a.attributes.getNamedItem(b);return c?c.value:null}function p(a){return a&&a.childNodes&&a.childNodes[0]&&a.childNodes[0].wholeText?a.childNodes[0].wholeText.trim():null}var q,r={banners:0,services:0};try{q=AdmanHTML.Utils.parseXml(b)}catch(s){return a.stats.rb(16138763),void a.stats.logError("ERROR_CONVERTING_STRING_TO_XML")}return l(q,"Ad",function(b){function q(c){var d=e?e.clone():new AdmanHTML.Ad(a);m(b,"Impression","id",function(a){try{d.addStat(a,"playbackStarted")}catch(b){}}),m(b,"Extension","type",function(a,b){i(d,a,b)}),m(b,"Error",null,function(a){d.addStat(a,"error")}),m(c,"Tracking","event",d.addStat);var f=c.getElementsByTagName("VideoClicks")[0];return f&&n(f.childNodes,function(a){"ClickThrough"===a.tagName?d.addClick(p(a)):"ClickTracking"===a.tagName&&d.addStat(p(a),"click")}),d}function s(a){var b={width:o(a,"width"),height:o(a,"height"),id:o(a,"id"),assetWidth:o(a,"assetWidth"),assetHeight:o(a,"assetHeight"),expandedWidth:o(a,"expandedWidth"),expandedHeight:o(a,"expandedHeight"),apiFramework:o(a,"apiFramework"),adSlotID:o(a,"adSlotID"),statistics:[]};return m(a,"StaticResource",null,function(a){b.staticResource=a}),m(a,"HTMLResource",null,function(a){b.htmlResource=a}),m(a,"IFrameResource",null,function(a){b.iframeResource=a}),m(a,"CompanionClickTracking",null,function(a){b.statistics.push({type:"click",url:a})}),m(a,"Tracking","event",function(a,c){b.statistics.push({type:c,url:a})}),m(a,"CompanionClickThrough",null,function(a){b.urlToNavigateOnClick=a}),b}var t=o(b,"id");l(b,"InLine",function(a){var b=[];l(a,"CompanionAds",function(c){var d=o(c,"required")||"none";l(a,"Companion",function(a){var c=s(a);c.required=d,b.push(c)})}),l(a,"Linear",function(a){var c,d=q(a),e=a.parentNode;e&&(c=o(e,"adId")||o(e,"adID")||o(e,"AdId")||o(e,"AdID")||o(e,"id")),c=c||t;var f={bannerID:c,mediafiles:[],duration:AdmanHTML.Utils.convertDuration(p(a.getElementsByTagName("Duration")[0]))};l(a,"MediaFile",function(a){f.mediafiles.push({apiFramework:o(a,"apiFramework"),type:o(a,"type"),width:o(a,"width"),height:o(a,"height"),src:p(a)})}),l(a,"AdParameters",function(a){f.params=p(a)}),b.length&&(f.companionAds=b),j(g||"preroll",h,d,f),r.banners++}),l(a,"NonLinear",function(a){var b=q(a),c={width:o(a,"width"),height:o(a,"height"),duration:AdmanHTML.Utils.convertDuration(o(a,"minSuggestedDuration")),mediafiles:[]};m(a,"NonLinearClickThrough",null,function(a){b.addStat(a,"click")}),m(a,"StaticResource","creativeType",function(a,b){c.mediafiles.push({type:b,src:a})}),j(g||"overlay",h,b,c),r.banners++})}),l(b,"VASTAdTagURI",function(a){r.services++,d({url:p(a),id:c.id},q(b),++f,g,h,k)})}),r}function i(a,b,c){"controls"===c?a.addExtension("showControls",Boolean(parseInt(b,10))):"skipTime2"===c?(b=isNaN(b)?AdmanHTML.Utils.convertDuration("00:"+b):parseInt(b,10),a.addExtension("allowCloseDelay",b)):"linkTxt"===c&&(a.addExtension("linkText",b),a.addExtension("adText",b))}function j(a,b,c,d){c.addAd(d)&&(c.sectionType=a,b===v.PRE&&w[a]&&(b=""),a=(b||"")+a,p[a]=p[a]||[],p[a].push(c))}function k(a,b,c,d,e){c.addAd(d),c.addInheritedAd(e),c.addStatCollection(d.statistics),c.addStatCollection(d.serviceStatistics),c.sectionType=a,x.addService(c,b)}function l(a,b,c){b.addAd(c)&&(b.section=a,r[a]=b)}function m(a,b){q[a]=q[a]||{},AdmanHTML.Utils.mixin(q[a],b),delete q[a].statistics,delete q[a].view,delete q[a].advertisment}function n(){var a="preroll midroll pauseroll overlay postroll claimroll".split(" ");a.forEach(function(a){var b=w[a]?p[a]:p[v.PRE+a],c=w[a]?p[v.PRE+a]:p[a],d=p[v.POST+a];p[a]=[].concat(b||[],c||[],d||[]),o(v.PRE+a),o(v.POST+a)})}function o(a){p[a]=[]}var p={},q={},r={},s=0,t=0,u=0,v={PRE:"pre-",POST:"post-"},w={},x=new AdmanHTML.ServiceStorage;return d({url:b.url,data:b.data}),{getSection:function(a){return p[a]},getAfterServices:x.getAfterServices,getNextAfterService:x.getNextAfterService,resetServices:x.resetAll,getServices:x.getServices,removeService:x.removeService,getSettings:function(a){return q[a]||{}},getDebug:function(a){return r[a]}}},AdmanHTML.ServiceAd=function(a,b,c){"use strict";function d(a){return b.ad=a,!0}function e(a){b.inheritedAd=a}function f(a,c){b.inheritedAd.addImmutableProperty(a,c,!0)}function g(a){var b=a?a.filter(function(a){return"serviceRequested"===a.type||"serviceAnswerEmpty"===a.type}):[];b&&b.forEach(function(a){h(a.url,a.type,a)})}function h(a,c){a=decodeURIComponent(a),b.stats.push({name:c,type:c,url:a})}function i(a){m=!0,c&&c(b.inheritedAd,a)}function j(){m=!1}function k(){return b.ad&&b.ad.doAfter?b.ad.doAfter===!0||"true"===b.ad.doAfter:!1}function l(a){function c(a){AdmanHTML.Utils.loadImg(a.url);var b=d.indexOf(a);~b&&d.splice(b,1)}var d=b.stats.slice(0);b.stats.forEach(function(b){b.type===a&&c(b)}),b.stats=d}b=b||{stats:[]};var m=!1;return{addStatCollection:g,addStat:h,addAd:d,addInheritedAd:e,addImmutableProperty:f,getAd:function(){return b.ad},start:i,reset:j,started:function(){return m},log:l,isAfter:k}},AdmanHTML.ServiceStorage=function(){"use strict";function a(a,b){var c=a.getAd();m.push(c.id),l[c.id]={service:a},b&&l[b]&&(l[b].children=l[b].children||[],l[b].children.push(c.id)),("true"===c.doAfter||c.doAfter===!0||c.doOnEmptyResponseFromId)&&k.push(a)}function b(a){return l[a]?l[a].service:null}function c(a){var b="string"==typeof a||"number"==typeof a?a:a.getAd().id;delete l[b];var c,d;for(c=0,d=k.length;d>c;c++)if(a=k[c],a.getAd().id===b){k.splice(c,1);break}}function d(a,b){if(!a)return[];var c,d,e=[];for(c in l)l.hasOwnProperty(c)&&(d=l[c].service,d.sectionType!==a||b&&!b(d)||e.push(d));return e}function e(a){var b,c,d,e;for(b=m.length-1;b>=0;b--)if(c=m[b],l[c])if(d=l[c].service,c===a)d.log("serviceAnswerEmpty"),m.splice(b,1),n.push(a),delete l[c];else{if(e=l[c].children,!e)continue;-1!==e.indexOf(a)&&e.splice(e.indexOf(a),1),0===e.length&&(a=c,b++)}}function f(a){var b=l[a];b&&(b.children=null)}function g(){var a,b,c,d;for(a=0,b=k.length;b>a;a++)if(c=k[a],d=c.getAd().doOnEmptyResponseFromId,d&&-1!==n.indexOf(d)&&!c.isAfter())return k.splice(a,1),c;return null}function h(a){if(!a)return[];var b,c,d,e=[];for(b=0,c=k.length;c>b;b++)d=k[b],d.sectionType===a&&d.isAfter()&&!d.started()&&e.push(d);return e}function i(a){if(!a)return null;var b,c,d,e;for(b=0,c=k.length;c>b;b++)if(d=k[b],d.sectionType===a&&d.isAfter()&&!d.started()){if(e=d.getAd().doOnEmptyResponseFromId,e&&-1===n.indexOf(e))continue;return d.getAd().allowRepeat||k.splice(b,1),d}return null}function j(a){var b,c,d;for(b=0,c=k.length;c>b;b++)d=k[b],a&&d.sectionType!==a||d.reset()}var k=[],l={},m=[],n=[];return{addService:a,getService:b,getServices:d,removeService:c,resetAll:j,markEmptyService:e,markNonEmptyService:f,getAfterServices:h,getNextAfterService:i,getNextOnEmptyService:g}},"function"==typeof define&&define.amd&&define(function(){"use strict";return AdmanHTML}),AdmanHTML.VpaidLoader=function(){"use strict";function a(a,b){this.id=Math.round(1e6*Math.random()),this.video=a,this._props={},this.autoMuted=!1,this.win=b||window}return a.prototype.load=function(a,b){var c=document.createElement("iframe");return this.adframe=c,this.src=a,c.width="100%",c.height="100%",c.scrolling="no",c.marginWidth="0",c.marginHeight="0",c.frameBorder="0",c.src=b,c.id="ad-frame-"+this.id,c.setAttribute("allow","autoplay"),c.onload=function(){this.send({type:"vpaid",method:"load",src:this.src})}.bind(this),this.processMessage=this.processMessage.bind(this),this.videoEventHandler=this.videoEventHandler.bind(this),this.videoEvents=["volumechange","timeupdate"],this.video.addEventListener("volumechange",this.videoEventHandler),this.video.addEventListener("timeupdate",this.videoEventHandler),this.win.addEventListener("message",this.processMessage),c},a.prototype.processMessage=function(a){if(a.source===this.adframe.contentWindow)try{var b=JSON.parse(a.data);switch(b.type){case"video":this.videoMessageHandler(b);break;case"vpaid":this.vpaidMessageHandler(b)}}catch(c){}},a.prototype.videoMessageHandler=function(a){switch(a.src&&a.src.replace(/https?:/,"")!==this.video.src.replace(/https?:/,"")&&(this.video.src=a.src),a.method){case"load":this.video.load();break;case"play":var b=this.video.play();b.then&&b.then(null,function(){this.autoMuted=!0,this.video.muted=!0,this.video.volume=0,this.videoEventHandler({type:"volumechange"}),this.callSet("adVolume",0),this.video.play()}.bind(this));break;case"pause":this.video.pause();break;case"muted":this.mutedByVPAID=a.value,this.video.muted=a.value;break;case"volume":a.value&&this.video.muted&&!this.mutedByVPAID&&(this.video.muted=!1),this.video.volume=a.value;break;case"addEventListener":this.videoEvents=this.videoEvents||[],this.videoEvents.push(a.eventType),this.video.addEventListener(a.eventType,this.videoEventHandler)}},a.prototype.videoEventHandler=function(a){this.send({type:"video",method:"emit",eventType:a.type,currentTime:this.video.currentTime,duration:this.video.duration,volume:this.video.volume,muted:this.video.muted})},a.prototype.vpaidMessageHandler=function(a){AdmanHTML.Utils.mixin(this._props,a.props),"function"==typeof this.onVpaidCallback&&this.onVpaidCallback(a.eventType,a.props)},a.prototype.call=function(a,b){var c={type:"vpaid",method:a};return b&&(c.params=b),this.send(c),a in this._props?this._props[a]:void 0},a.prototype.callGet=function(a){return this._props[a]},a.prototype.callSet=function(a,b){return a="set"+a.charAt(0).toUpperCase()+a.slice(1),this.call(a,[b])},a.prototype.send=function(a){this.adframe&&(a.id=this.id,this.adframe.contentWindow.postMessage(JSON.stringify(a),"*"))},a.prototype.onVpaidEvent=function(a){this.onVpaidCallback=a},a.prototype.destroy=function(){if(this.adframe&&this.adframe.parentNode&&this.adframe.parentNode.removeChild(this.adframe),this.videoEvents&&this.videoEvents.length)for(var a=0,b=this.videoEvents.length;b>a;a++)this.video.removeEventListener(this.videoEvents[a],this.videoEventHandler);this.video.pause(),this.video.src="",this.autoMuted&&(this.video.muted=!1),this.adframe=null,this.win.removeEventListener("message",this.processMessage),this.win=null},a}(),AdmanHTML.Stats=function(a){"use strict";function b(b){d(a.protocol+"//r.mail.ru/d"+b+".gif?rnd="+Math.random())}function c(b){d(a.protocol+"//ad.mail.ru/admanhtml/?app=admanhtml&ver="+a.version+"&error="+encodeURI(b)+"&slot="+a.slotId),a.debugMode&&console&&console.warn&&console.warn("Error: "+b)}function d(a){AdmanHTML.Utils.loadImg(a)}return{rb:b,logError:c,simple:d}},AdmanHTML.StyleUtils=function(){"use strict";function a(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function b(b,c,d){var e,f=g[c];if(!f)for(e=0;e<h.length;e++)if(f=""===h[e]?c:a(h[e]+"-"+c),void 0!==b[f]){g[c]=f;break}b[f]=d}function c(a){return parseInt(a)+"px"}function d(a,b){function c(a,b){a=parseInt(a,16),b=b||1;var c=a>>16&255,d=a>>8&255,e=255&a;return"rgba("+c+","+d+","+e+","+b+")"}if(Array.isArray(a)){var d=a.map(function(a){return c(a,b)});return"linear-gradient("+d.join(", ")+")"}return c(a,b)}function e(a,b,c){var d=a.style,e=c||Object.keys(b);e.forEach(function(a){b.hasOwnProperty(a)&&f(d,a,b[a],b)})}function f(a,e,f,g){var h,i,j;switch(e){case"fontFace":h="fontFamily",i=f;break;case"hasBackground":f||(h="background",i="none",delete g.backgroundColor);break;case"backgroundColor":h="background",i=d(f,g.backgroundAlpha);break;case"cornerRounding":case"borderCornerRounding":h="borderRadius",i=c(Math.floor(f/2));break;case"headerColor":case"bodyColor":case"hyperlinkColor":case"textColor":h="color",i=d(f);break;case"headerSize":case"bodySize":case"hyperlinkSize":case"textSize":h="fontSize",i=c(f);break;case"headerUnderline":case"bodyUnderline":case"hyperlinkUnderline":case"textUnderline":h="text-decoration",i=f?"underline":"none",j="";break;case"headerUnderlineOnRollOver":h="text-decoration",i=f?"":"none",j=f?"":"important";break;case"headerBold":case"bodyBold":case"hyperlinkBold":case"textBold":h="fontWeight",i=f?"bold":"normal";break;case"headerIndent":case"bodyIndent":case"hyperlinkIndent":h="marginTop",i=c(f);break;case"bodyPaddingRight":h="marginRight",i=c(f);break;case"width":case"height":h=e,i=c(f);break;case"contentPadding":case"contentIndent":case"controlsSafeArea":h="padding",i=c(f);break;case"maxImageWidth":case"maxImageHeight":h="maxImageWidth"===e?"maxWidth":"maxHeight",i=c(f);break;case"borderSize":h="borderWidth",i=c(f);break;case"borderColor":h="borderColor",i=d(f,g.borderAlpha);break;case"paddingLeft":case"paddingTop":h="paddingLeft"===e?"left":"top",i=c(f);break;case"controlsPaddingTop":case"controlsPaddingRight":h="controlsPaddingRight"===e?"right":"top",i=c(f)}h&&i&&(void 0!==j?a.setProperty(h,i,j):b(a,h,i))}var g={},h=["","webkit","Moz","O","ms"];return{applyStyle:e,getLength:c}}(),AdmanHTML.Utils=function(){"use strict";function a(){return E?E:E=function(){try{if(window===window.top)return F;for(var a=window;a!==a.parent;){if(a.document.domain!==a.parent.document.domain)return H;a=a.parent}return G}catch(b){}return H}()}function b(){return K.major?J:I}function c(a){a(b())}function d(a,b){b&&a.addEventListener("load",b,!1);var c=document.getElementsByTagName("head");if(c&&c.length){var d=c[0];d&&d.appendChild(a)}}function e(a,b,c){var e=document.getElementById(b);if(e&&e.parentNode){if(!c)return;e.parentNode.removeChild(e)}e=document.createElement("style"),e.type="text/css",e.id=b,e.innerHTML=a,d(e)}function f(a){var b=document.querySelector("link[href*='"+a+"']");b||(b=document.createElement("link"),b.type="text/css",b.rel="stylesheet",b.href=a,d(b))}function g(a){var b=document.querySelector("script[src*='"+a+"']");b||(b=document.createElement("script"),b.setAttribute("type","text/javascript"),b.setAttribute("charset","utf8"),b.setAttribute("src",a),d(b))}function h(a,b){var c=new Image;c.onload=function(){b&&b(c)},c.src=a}function i(a,b,c,d,e){d=d||"GET";var f=new XMLHttpRequest;return f.open(d,a,!0),f.withCredentials=!e,f.setRequestHeader("Content-Type","text/plain"),f.send(c||null),b&&(f.onreadystatechange=function(){4===f.readyState&&200===f.status&&b(f.response)},f.onerror=function(){e?b():i(a,b,c,d,!0)}),f}function j(a,b,c,d,e){void 0===e&&(e=!0);var f=a*d>b*c;e&&(f=!f);var g=f?d/b:c/a,h=Math.floor(a*g),i=Math.floor(b*g);return{x:Math.floor((c-h)/2),y:Math.floor((d-i)/2),width:Math.floor(h),height:Math.floor(i)}}function k(a){var b=typeof a;return"object"===b&&!!a&&!Array.isArray(a)}function l(a){var b;for(b in a)return!1;return!0}function m(a,b){if(!a)return null;if(b){var c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function n(a,b){if(b){var c,d;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],k(d)?(a[c]=a[c]||{},a[c]=n(a[c],d)):a[c]=d)}return a}function o(a,b,c){return a=a||0,b=b||0,c=c||1,Math.min(c,Math.max(b,a))}function p(a,b){return a-b}function q(){return Math.floor(Math.random()*Math.pow(2,48)).toString()}function r(a){a=a.split("+").join(" ");for(var b,c={},d=/[?&]?([^=]+)=([^&]*)/g;b=d.exec(a);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c}function s(a,b){var c;document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0)):(c=document.createEventObject(),c.eventType=b),c.eventName=b,document.createEvent?a.dispatchEvent(c):a.fireEvent("on"+c.eventType,c)}function t(a){return a?a.substring(a.indexOf("//")+2,a.indexOf("/?")):""}function u(a){var b=a.button,c=a.which;return c||void 0===b?c:1&b?1:2&b?3:4&b?2:0}function v(a){return 1===u(a)}function w(a,b){return b=b||document.body,a===b?!1:b.contains(a)}function x(a){return a&&1===a.nodeType}function y(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function z(a){a.preventDefault()}function A(a){var b;if(window.DOMParser)b=(new DOMParser).parseFromString(a,"text/xml");else{if(!window.ActiveXObject)return;b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}return b.documentElement}function B(a){if(a){var b=a.split(":");if(3===b.length){var c=parseInt(b[0],10),d=parseInt(b[1],10),e=b[2].split("."),f=parseInt(e[0],10),g=0;if(2===e.length&&(g=parseInt(e[1],10)),!(isNaN(c)||isNaN(d)||isNaN(f)||isNaN(g)))return 3600*c+60*d+f+g/1e3}}return NaN}function C(a,b){var c,d=a;for(c in b)b.hasOwnProperty(c)&&(d=d.replace("{{"+c+"}}",b[c]));return d}function D(a,b){if(b=b||0,window.Worker&&window.Blob){var c,d=new Blob(['var timeout; onmessage = function(e) {clearTimeout(timeout); if (e.data === "start") {timeout = setTimeout(function() { postMessage({}); }, '+b+");}}"]);try{c=new Worker(window.URL.createObjectURL(d)),c.onmessage=function(){c.terminate(),a()},c.postMessage("start")}catch(e){return setTimeout(a,b)}return c}return setTimeout(a,b)}var E,F=1,G=2,H=3,I=0,J=1,K=function(){var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f={major:0,minor:0,release:0},g=null;if(typeof navigator.plugins!==a&&typeof navigator.plugins[c]===b)g=navigator.plugins[c].description,g&&typeof navigator.mimeTypes!==a&&navigator.mimeTypes[e]&&navigator.mimeTypes[e].enabledPlugin&&(g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f.major=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f.minor=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f.release=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof window.ActiveXObject!==a)try{var h=new window.ActiveXObject(d);h&&(g=h.GetVariable("$version"),
g&&(g=g.split(" ")[1].split(","),f.major=parseInt(g[0],10),f.minor=parseInt(g[1],10),f.release=parseInt(g[2],10)))}catch(i){}return f}();return{addCss:e,loadCss:f,loadJs:g,loadImg:h,xhr:i,scaleBySide:j,isEmptyObject:l,mixin:m,deepExtend:n,validateMinMax:o,numSorter:p,createIntUID:q,getQueryParams:r,triggerEvent:s,getDomain:t,isLeftButtonPressed:v,isElementInDocument:w,isElement:x,getElementViewport:y,preventDefault:z,parseXml:A,convertDuration:B,renderTemplate:C,setTimeout:D,checkFlash:b,checkFlashAsync:c,FLASH_READY:J,FLASH_MISSING:I,getServingType:a,servingTypes:{ON_PAGE:F,S_FRAME:G,XD_FRAME:H}}}(),AdmanHTML.Viewability=function(){"use strict";function a(a,b,c){return a.forEach(function(a){a.duration=b.focus&&b.percent>=a.threshold?a.duration+c:0}),a}function b(a){a.forEach(function(a){a.duration=0})}function c(a){var b=new window.IntersectionObserver(function(b){b&&b.length&&"undefined"!=typeof b[0].intersectionRatio&&a(b[0].intersectionRatio)},{threshold:z});return b}function d(){return w?!document[w]:u===v.XD_FRAME?!0:window.top.document.hasFocus?window.top.document.hasFocus():!0}function e(){var b=f();if("UNDETERMINED"!==b.state){if(a(A,b,s),o){var c=o.logMRC(A);c||n()}return b}}function f(){var a,b,c=d();return t?(a=y,b="DETERMINED"):u!==v.XD_FRAME?(a=g(p).percent,b="DETERMINED"):(a=0,b="UNDETERMINED"),{percent:a,focus:c,state:b}}function g(a,b){var c=a.getBoundingClientRect(),d=h(c),e=AdmanHTML.Utils.getElementViewport(a)||window;for(b=b||window.top;e!==b;){var f=e.frameElement.getBoundingClientRect();c=i(c,f),c.left=Math.max(f.left,c.left),c.right=Math.min(f.right,c.right),c.top=Math.max(f.top,c.top),c.bottom=Math.min(f.bottom,c.bottom),c.right<c.left&&(c.right=c.left),c.bottom<c.top&&(c.bottom=c.top),e=e.parent}c=j(c,b);var g=h(c);return c.percent=g/d*100,c}function h(a){return(a.right-a.left)*(a.bottom-a.top)}function i(a,b){return{left:a.left+b.left,right:a.right+b.left,top:a.top+b.top,bottom:a.bottom+b.top}}function j(a,b){var c={},d=k(b);return c.left=Math.max(0,a.left),c.right=Math.min(d.width,a.right),c.top=Math.max(0,a.top),c.bottom=Math.min(d.height,a.bottom),c}function k(a){var b={width:1/0,height:1/0};return!isNaN(a.document.body.clientWidth)&&a.document.body.clientWidth>0&&(b.width=a.document.body.clientWidth),!isNaN(a.document.body.clientHeight)&&a.document.body.clientHeight>0&&(b.height=a.document.body.clientHeight),a.document.documentElement&&a.document.documentElement.clientWidth&&!isNaN(a.document.documentElement.clientWidth)&&(b.width=a.document.documentElement.clientWidth),a.document.documentElement&&a.document.documentElement.clientHeight&&!isNaN(a.document.documentElement.clientHeight)&&(b.height=a.document.documentElement.clientHeight),a.innerWidth&&!isNaN(a.innerWidth)&&(b.width=Math.min(b.width,a.innerWidth)),a.innerHeight&&!isNaN(a.innerHeight)&&(b.height=Math.min(b.height,a.innerHeight)),b}function l(a,b){if(o=b,p=a,t)r=r||c(function(a){y=100*a}),r.observe(a);else if(u===v.XD_FRAME)return x=!1,void o.log("viewabilityUnmeasurable");q=setInterval(e,s),x=!0,o.log("viewabilityMeasurable")}function m(){x&&o&&o.logMRC([]),o=null,x=!1,p=null,clearInterval(q),b(A),r&&r.disconnect()}function n(){clearInterval(q)}var o,p,q,r,s=250,t=!!window.IntersectionObserver,u=AdmanHTML.Utils.getServingType(),v=AdmanHTML.Utils.servingTypes,w=function(){for(var a=["h","webkitH","mozH","msH","oH"],b=0;b<a.length;b++)if("undefined"!=typeof document[a[b]+"idden"])return a[b]+"idden";return""}(),x=!1,y=0,z=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],A=[];return z.forEach(function(a){A.push({threshold:Math.round(100*a),duration:0})}),{start:l,pause:n,stop:m,getViewabilityState:f}},AdmanHTML.AdRenderer=function(a,b){"use strict";function c(){t.wrapperEl=t.wrapperEl||a.wrapper,t.mainEl=t.mainEl||document.createElement("div"),t.clickEl=t.clickEl||t.mainEl,AdmanHTML.Utils.isElement(t.mainEl)&&!t.mainEl.parentNode&&(t.wrapperEl.childNodes.length?t.wrapperEl.insertBefore(t.mainEl,t.wrapperEl.childNodes[0]):t.wrapperEl.appendChild(t.mainEl),s=!0),t.clickEl.addEventListener("click",t.onClick),window.addEventListener("resize",n)}function d(a){a()}function e(){a.viewability.stop(),window.removeEventListener("resize",n),t.clickEl&&t.clickEl.removeEventListener("click",t.onClick),clearTimeout(p),AdmanHTML.Utils.isElement(t.mainEl)&&s&&t.mainEl.parentNode&&t.mainEl.parentNode.removeChild(t.mainEl)}function f(){if(!u&&(u=!0,clearTimeout(p),q)){var a=Date.now()-q;r=1e3*v.duration-a}}function g(){u&&(u=!1,h())}function h(){q=Date.now();var b=r||1e3*v.duration;p=setTimeout(function(){e(),a.cb("onCompleted")},b)}function i(){v.urlToNavigateOnClick&&(window.open(v.urlToNavigateOnClick,"_blank"),b.log("click"),a.cb("onClicked"))}function j(c){a.cb("onStarted",[b.sectionType,AdmanHTML.Utils.mixin(b.getAdForApp()||{},c||{})]),b.log("playbackStarted")}function k(c,d){var e=parseInt(c/d*100);a.cb("onTimeRemained",[{remained:d-c,percent:e,duration:d,currentTime:c}]),c=parseInt(c),b.log("thresholdPValue",e),b.log("thresholdValue",c),b.logOVV(c,e)}function l(a,b){"string"!=typeof a&&a?t.mainEl.appendChild(a):t.mainEl.innerHTML=a,AdmanHTML.Utils.mixin(t.mainEl.style,b)}function m(a){t.wrapperEl=a}function n(){t.onResize(t.mainEl.offsetWidth,t.mainEl.offsetHeight)}function o(){}var p,q,r,s,t={},u=!1,v=b.getAd();return t={start:c,pause:f,resume:g,skip:d,dispose:e,onClick:i,onStart:j,registerTimer:h,setView:l,setWrapper:m,onTimeRemained:k,onResize:o}},AdmanHTML.AudioAdRenderer=function(a,b){"use strict";function c(){g.mainEl=a.audioEl||document.createElement("audio"),h.forEach(function(a){g.mainEl.addEventListener(a,e)}),a.audioEl||g.setView(null,{position:"absolute",width:"1px",height:"1px",top:"-10000px",left:"-10000px"}),f=b.getAd().duration,g.mainEl.src=b.getAd().src,g.mainEl.load(),g.mainEl.play(),a.audioEl||g.start()}function d(){g.dispose(),h.forEach(function(a){g.mainEl.removeEventListener(a,e)})}function e(b){var c,d;switch(b.type){case"loadedmetadata":g.onStart();break;case"play":a.cb("onPlayed");break;case"pause":a.cb("onPaused");break;case"timeupdate":c=g.mainEl.duration,d=g.mainEl.currentTime,!isNaN(c)&&f&&Math.abs(f-c)>1&&(c=f,d=Math.min(d,c)),g.onTimeRemained(d,c);break;case"ended":a.cb("onCompleted");break;case"error":a.cb("onError")}}var f,g=new AdmanHTML.AdRenderer(a,b),h=["loadedmetadata","error","pause","play","timeupdate","ended"];return{start:c,skip:g.skip,dispose:d,pause:function(){g.mainEl.pause()},resume:function(){g.mainEl.play()},setVolume:function(a){var c=g.mainEl.volume;g.mainEl.volume=a,(0===c&&a>0||c>0&&0===a)&&b.log(a?"volumeOn":"volumeOff")}}},AdmanHTML.CloseBtnRenderer=function(a,b){"use strict";function c(){f.start();var a=b.getSettings(),c=a.controlsStyle||0,d=g[c],k=h[c];k.bg=k.bg||k.width;var l={};for(var m in j)j.hasOwnProperty(m)&&(l[m]=void 0!==a[m]?a[m]:j[m]);if(l.controlsPaddingTop=l.controlsPaddingTop-l.controlsSafeArea,l.controlsPaddingRight=l.controlsPaddingRight-l.controlsSafeArea,f.setView(AdmanHTML.Utils.renderTemplate(i,{img:d,width:k.width,height:k.height,bg:k.bg}),{position:"absolute",cursor:"pointer"}),AdmanHTML.StyleUtils.applyStyle(f.mainEl,l),k.bg!==k.width){var n=k.bg-k.width,o=function(a){"rb-adman_close"===a.target.className&&(a.target.style.backgroundPosition="-"+n+"px 0")},p=function(a){"rb-adman_close"===a.target.className&&(a.target.style.backgroundPosition="0 0")};f.mainEl.addEventListener("mouseover",o),f.mainEl.addEventListener("mouseout",p),e=function(){f.mainEl.removeEventListener("mouseover",o),f.mainEl.removeEventListener("mouseout",p)}}}function d(){e&&e(),f.dispose()}var e,f=new AdmanHTML.AdRenderer(a,b),g=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAASCAMAAAAE/YwaAAABTVBMVEUAAAD4+PiLi4sAAAD////////q6uokJCT4+PiDg4MVFRUAAAD////9/f2AgICwsLC8vLyWlpaTk5MAAADq6urGxsYmJiZra2v29vZ2dnba2trQ0NCmpqbb29unp6c0NDTs7OzPz8+xsbH+/v7///9jY2P///+fn5+ysrLe3t5LS0uzs7PBwcEuLi66urpYWFi3t7cAAAD39/fW1tb8/PzGxsba2tpKSkpUVFR/f39sbGyRkZF2dnaqqqqioqLKyspERET6+vr////l5eX////w8PD////////a2tr////Y2Nj///+Pj4////+Dg4N6enq3t7dkZGSGhoaMjIz///+amppeXl7///9MTExxcXE9PT3///////9CQkL////////////n5+fKysrq6uq9vb2jo6Pk5OScnJyoqKjk5OS9vb2IiIhAQEBeXl7///8RDLJoAAAAbnRSTlNegIEhrIlmZmWAZkky/GeCgYFnBoCAdGbzq4GAgGZmZvHfzaefnJiXkpGKcG5uZmZDQ/fq466sqqeZmJeSd2xnZvnw7Onj2dHMyMfAvLe2tLCwpJGQjH92b25ubFpYUUhA4NrQzsrHvqqolnl5b4/gN4MAAAGhSURBVCjPZdFXbxpBEMDxORYSks1VDrgOpphqwKF34t7j3lt6n+//mOFtkX/Srlaj/8NKAzG2CoJVFns5AVZuhwXtMmP5JgqaeQa8I0UF0i/O01lJkE1zgNyrBTmANWnBGgAs+351PK761cq4UvX9ZYAN0yzYdsEsntqnRdPcoOh8WukgdipeCy11Oj0HaJnFDOLXgp1G68gxWxRFarXJd5R/f0G5OKnVIgBbjjNcQvlHE+WDguNsUSQFweTPJsqIbSMIAglg23U1e30+yQxd192m6MowDCVkIe4pBrkC2I3H4xcf3yN+7sfJLkV3iqLchGi0c6OQO4B9TdPO5tFSXyP7FEWTyeTlJn5APP5HzyjAoapenKTnk0xfVdVDiu7r9esdlM/2UB5e1+v3AGHPG9DHj+gcjDwvTNHj7PYY8eft309oXc5mjwBZfZRB/DboraN1outZip5SqZVEYoWu+Z16oh3oer7bzeujXrc30PUcRc+vFzzTDkILaAe88fBW8NDgvKS+EaglDizReCdoJBgrlyKCUplBjHEQcBZ7OfkPWYpTXkAiSDwAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANBAMAAACAxflPAAAAGFBMVEX///8AAAD///////////////////////8GrCwdAAAACHRSTlPMAKZNgI0NmlQIVC0AAABMSURBVAjXYxAUVmBQFhRgEFNgYGBQE2AQYgACJgEGA6YAhiAGAwYFVhEWcQaQpKOhAwMIMAsDCRgfLC8KlDdgKmAoYjCA6oebBzMfAF6oBtnQTZWMAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAA0CAMAAABRjo0fAAAARVBMVEUAAAAAAAAAAAD///+3t7e3t7cAAAAtLS3FxcUAAAAtLS3z8/Px8fHIyMjCwsJKSkpKSkoAAAAAAAD29vbi4uLi4uL////qCBnnAAAAFnRSTlMAgE2Zx3c4jHxiVJLy0s2VWR8K9eSJJoi7pQAAAS1JREFUWMPs0DkSwzAIQNFoV+R90/2PGg0DTQI2RQoX/hUN84ReT09Pf22JViwu/E58G7F3ZFdWZERqZXaQEamVgdCRY95Hjiwx/2YvW37eZi6L/EEld46pywVOYg9KQ1+Z+iHxJ4EDDEuB9L0DzlaFNpBYKDuxLEFDFRtEqJOhToJ6GepFyJ0kQfWku0DHXLLDcpkPDbRPaazYmKZdBc1tCg4KbZw10NQmXyHfxkkFFQsSOrZooGRAQsckFZQtSgGGrIFGg5KHYdRABISAoAIiwHsEVRBJ6KggktDRQCSRo4FIIkcDkUSOBiKJnDtCn1EadIMtMVAheQ+uDEuNImhwFarUqCYGV8VHPYsGvnFCi+YW3RqQdGsS062RT69uC906YvTqWo6CUTAKqAkAIPxHpRLLbKUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAAiCAMAAADRYI/HAAAAOVBMVEUAAAD///+7u7uxsbF9fX2Pj4/W1taJiYn39/eTk5PNzc2tra2CgoLx8fHIyMioqKiioqJ3d3fh4eHCLdXsAAAAAXRSTlMAQObYZgAAAPhJREFUSMfszksOgzAMRdFiYoKdL+x/sTWRDJXyppU66BtF6HLk13+/vbTCpac4AtzxFNYTmH32IoQceVrMIXzcQbpNU7pvOcxoNK2Z4reYcS5gJ/kpZigq1BRHyArYkCOx4aLFB9lwst0IEy6Iv4Jo3ZexvSpGUveiJ4woEe2jsIciJLFIuR5FhBNEKq2mDGOlipAuOcpVSMzSITJ+tpgGhpDCMZhiRohcEOKKGxPiCrMbAHHFDYAs44j3wM7BE8VAI4Bm4ItioClAMyBsyg2hsncoD1jKo5jyxEZBsueAJ3sqZsDBWJ5QXjxSXlBTXmVQo/KiZjUKAAVsE9yzWNzOAAAAAElFTkSuQmCC"],h=[{width:18,height:18,bg:36},{width:13,height:13},{width:26,height:26,bg:52},{width:17,height:17,bg:34}],i='<div class="rb-adman_close" style="background:url({{img}});background-size:{{bg}}px 100%;width:{{width}}px;height:{{height}}px""></div>',j={controlsPaddingTop:3,controlsPaddingRight:0,controlsSafeArea:0};return f.onClick=function(b){b.stopPropagation(),"rb-adman_close"===b.target.className&&a.cb("onClosed")},{start:c,dispose:d,setWrapper:f.setWrapper}},AdmanHTML.DebugAdRenderer=function(a,b){"use strict";function c(){d.mainEl=document.createElement("span"),d.start(),d.setView("&#9874; "+b.section,{position:"absolute",cursor:"pointer",top:"5px",left:"5px",background:"rgba(204,204,204,0.8)",padding:"5px",color:"#333","border-radius":"6px",font:"12px/19px Tahoma",display:"inline-block","z-index":100})}var d=new AdmanHTML.AdRenderer(a,b),e=b.getAd();return d.onClick=function(){window.open(e.urlToNavigateOnClick,"_blank")},{start:c,dispose:d.dispose}},AdmanHTML.EmptyAdRenderer=function(a,b){"use strict";function c(){b.log("sectionEmpty"),setTimeout(function(){a.cb("onCompleted")})}return{start:c}},AdmanHTML.ImgAdRenderer=function(a,b){"use strict";function c(){e.start(),e.registerTimer(),AdmanHTML.Utils.addCss(h,g);var a=b.getAd();e.setView(AdmanHTML.Utils.renderTemplate(i,a),{position:"absolute",display:"inline-block",width:"100%","max-width":a.width+"px",left:"50%",bottom:0,transform:"translate(-50%,0)","box-sizing":"border-box",overflow:"hidden","text-align":"center"});var c=b.getSettings(),d=e.mainEl.querySelector(".rb-adman_age_wrapper");if(c&&c.advertisment&&c.advertisment.image){var j=c.advertisment.image;AdmanHTML.StyleUtils.applyStyle(e.mainEl,j,"fontFace contentIndent hasBackground backgroundColor backgroundAlpha cornerRounding".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_image_wrapper"),j,"borderSize borderColor borderAlpha borderCornerRounding".split(" "));var k=c.advertisment.image.ageRestrictions;a.ageRestrictions&&k&&(AdmanHTML.StyleUtils.applyStyle(d,k),AdmanHTML.StyleUtils.applyStyle(d.querySelector(".rb-adman_age_content"),k,["textUnderline"]))}a.ageRestrictions||d.parentNode.removeChild(d),f.setWrapper(e.mainEl),f.start(),e.onStart()}function d(){e.dispose(),f.dispose()}var e=new AdmanHTML.AdRenderer(a,b),f=new AdmanHTML.CloseBtnRenderer(a,b),g="rb-adman-img-style",h=".rb-adman_image_overlay {display:inline-block; overflow:hidden;vertical-align:middle;cursor:pointer;color:#fff}.rb-adman_image_overlay .rb-adman_image_wrapper {display:block;border:0px solid transparent;overflow:hidden;}.rb-adman_image_overlay .rb-adman_image_wrapper img {vertical-align:top;}.rb-adman_image_overlay .rb-adman_age_wrapper {display:block;position:absolute;top:0px;left:3px;border:0px solid transparent;margin-right:1px;text-decoration:none!important}",i='<div class="rb-adman_image_overlay"><div class="rb-adman_image_wrapper"><img src="{{src}}" width="100%" height="auto"></div><span class="rb-adman_age_wrapper"><span class="rb-adman_age_content">{{ageRestrictions}}</span></span></div>';return{start:c,pause:e.pause,resume:e.resume,skip:e.skip,dispose:d}},AdmanHTML.StatisticsAdRenderer=function(a,b){"use strict";function c(){b.log("playbackStarted"),AdmanHTML.Utils.setTimeout(function(){a.cb("onCompleted")})}return{start:c}},AdmanHTML.SwfAdRenderer=function(a,b){"use strict";function c(){e.start(),AdmanHTML.Utils.checkFlashAsync(function(c){c===AdmanHTML.Utils.FLASH_READY?(e.registerTimer(),e.setView(d(b.getAd().src,{width:"100%",height:"100%"},{}),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"black"}),e.onStart()):a.cb("onError")})}function d(a,b,c){var d,e,f=b||{},g=c||{};f.type="application/x-shockwave-flash",window.ActiveXObject?(f.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",g.movie=a):f.data=a,e="<object";for(d in f)f.hasOwnProperty(d)&&(e+=" "+d+'="'+f[d]+'"');e+=">";for(d in g)g.hasOwnProperty(d)&&(e+='<param name="'+d+'" value="'+g[d]+'" />');return e+="</object>"}var e=new AdmanHTML.AdRenderer(a,b);return{start:c,skip:e.skip,dispose:e.dispose,createSwfObject:d,"super":e}},AdmanHTML.TextAdRenderer=function(a,b){"use strict";function c(){e.start(),e.registerTimer(),AdmanHTML.Utils.addCss(h,g);var a=AdmanHTML.Utils.mixin({header:"",body:"",hyperlinkText:""},b.getAd());e.setView(AdmanHTML.Utils.renderTemplate(i,a),{position:"absolute",margin:"0 auto",left:0,right:0,bottom:0,"box-sizing":"border-box",overflow:"hidden"});var c=b.getSettings();if(c&&c.advertisment&&c.advertisment.text){var d=c.advertisment.text;AdmanHTML.StyleUtils.applyStyle(e.mainEl,d,"fontFace width height contentPadding hasBackground backgroundColor backgroundAlpha cornerRounding".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_header"),d,"headerColor headerSize headerUnderline headerBold headerIndent".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_header_text"),d,["headerUnderlineOnRollOver"]),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_body"),d,"bodyColor bodySize bodyUnderline bodyLeading bodyIndent bodyPaddingRight".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_link"),d,"hyperlinkColor hyperlinkSize hyperlinkUnderline hyperlinkIndent".split(" "));var j=c.advertisment.text.ageRestrictions,k=e.mainEl.querySelector(".rb-adman_age_wrapper");a.ageRestrictions?j&&(AdmanHTML.StyleUtils.applyStyle(k,j),AdmanHTML.StyleUtils.applyStyle(k.querySelector(".rb-adman_age_content"),j,["textUnderline"])):k.parentNode.removeChild(k);var l=e.mainEl.querySelector(".rb-adman_image_wrapper span");if(d.noImage)l.parentNode.removeChild(l);else if(d.contentPadding&&(l.style.marginRight=AdmanHTML.StyleUtils.getLength(d.contentPadding)),d.maxImageHeight||d.maxImageWidth){var m=a.width/a.height;l.style.width=AdmanHTML.StyleUtils.getLength(Math.round(d.maxImageWidth||d.maxImageHeight*m)),l.style.height=AdmanHTML.StyleUtils.getLength(Math.round(d.maxImageHeight||d.maxImageWidth/m))}}f.setWrapper(e.mainEl),f.start(),e.onStart()}function d(){e.dispose(),f.dispose()}var e=new AdmanHTML.AdRenderer(a,b),f=new AdmanHTML.CloseBtnRenderer(a,b),g="rb-adman-text-style",h=".rb-adman_text_overlay {display:block; overflow:hidden;height:100%;cursor:pointer;color:#fff}.rb-adman_text_overlay .rb-adman_image_wrapper {display:block;float:left;position:relative;height:100%;vertical-align:middle}.rb-adman_text_overlay .rb-adman_image_wrapper span {display:inline-block;vertical-align:middle;background-size:contain;background-position:center}.rb-adman_text_overlay .rb-adman_text_wrapper {display:block;overflow:hidden;height:100%;vertical-align:top;line-height:1.2}.rb-adman_text_overlay .rb-adman_header {display:block;white-space:nowrap;margin-right:20px;overflow:hidden;text-overflow:ellipsis}.rb-adman_text_overlay .rb-adman_age_wrapper {display:inline-block; vertical-align:middle;border:0px solid transparent;margin-right:1px;text-decoration:none!important}.rb-adman_text_overlay .rb-adman_header_text {color:inherit;text-decoration:none;letter-spacing:normal;line-height:1.5;vertical-align:middle}.rb-adman_text_overlay .rb-adman_header_text:hover {color:inherit;text-decoration:underline}.rb-adman_text_overlay .rb-adman_body {padding:2px 0}.rb-adman_text_overlay .rb-adman_body, .rb-adman_link {display:block;text-decoration:none;padding-top:2px}",i='<div class="rb-adman_text_overlay"><div class="rb-adman_image_wrapper"><div style="display:table;height:100%;"><div style="display:table-cell;height:100%;vertical-align:middle"><span style="background-image: url({{src}});width:{{width}}px;height:{{height}}px"></span></div></div></div><div class="rb-adman_text_wrapper"><span class="rb-adman_header"><span class="rb-adman_age_wrapper"><span class="rb-adman_age_content">{{ageRestrictions}}</span></span><span class="rb-adman_header_text">{{header}}</span></span><span class="rb-adman_body">{{body}}</span><span class="rb-adman_link">{{hyperlinkText}}</span></div></div>';return{start:c,pause:e.pause,resume:e.resume,skip:e.skip,dispose:d}},AdmanHTML.VideoAdRenderer=function(a,b){"use strict";function c(){i.mainEl=a.videoEl,i.clickEl=a.clickEl||i.mainEl,j.forEach(function(a){i.mainEl.addEventListener(a,e)}),i.mainEl.parentNode?l={src:i.mainEl.src,time:i.mainEl.currentTime,muted:i.mainEl.muted}:i.setView(null,{position:"absolute",width:"100%",height:"100%",top:0}),i.mainEl.controls=a.browser.mobile,i.mainEl.src=b.getAd().src,i.mainEl.load(),g(0),h=i.mainEl.play(),h&&h.then&&h.then(f,function(){i.mainEl.muted=!0,h=i.mainEl.play(),h.then(f,function(){})}),i.start()}function d(){i.dispose(),j.forEach(function(a){i.mainEl.removeEventListener(a,e)}),l.src?(i.mainEl.src=l.src,i.mainEl.load(),i.mainEl.play(),g(l.time)):i.mainEl.src=""}function e(b){switch(b.type){case"loadedmetadata":break;case"playing":h||f();break;case"play":a.cb("onPlayed");break;case"pause":a.cb("onPaused");break;case"timeupdate":i.onTimeRemained(i.mainEl.currentTime,i.mainEl.duration);break;case"ended":a.cb("onCompleted");break;case"error":a.cb("onError")}}function f(){if(!k){k=!0;var c=AdmanHTML.Utils.isElement(i.mainEl)?i.mainEl:i.wrapperEl;a.viewability.start(c,b),i.onStart({muted:i.mainEl.muted})}}function g(a){if(i.mainEl)try{i.mainEl.currentTime=a}catch(b){}}var h,i=new AdmanHTML.AdRenderer(a,b),j=["loadedmetadata","error","pause","play","playing","timeupdate","ended"],k=!1,l={};return{start:c,skip:i.skip,dispose:d,pause:function(){i.mainEl.pause()},resume:function(){i.mainEl.play()},setVolume:function(a){var c=i.mainEl.muted?0:i.mainEl.volume;i.mainEl.muted&&(i.mainEl.muted=!1),i.mainEl.volume=a,(0===c&&a>0||c>0&&0===a)&&b.log(a?"volumeOn":"volumeOff")}}},AdmanHTML.VpaidJsAdRenderer=function(a,b){"use strict";function c(){var a;if(!i)return u.duration;try{a=i.callGet("adDuration"),"undefined"==typeof a&&(a=u.duration)}catch(b){a=u.duration}return a}function d(){if(t.start(),AdmanHTML.Utils.isElement(a.videoEl)){var c=AdmanHTML.Utils.getElementViewport;c(a.videoEl)===c(t.wrapperEl)&&(a.videoEl.parentNode?(k=a.videoEl.parentNode,l=a.videoEl.nextSibling):j=!0,t.wrapperEl.insertBefore(a.videoEl,t.wrapperEl.childNodes[0]),AdmanHTML.Utils.mixin(a.videoEl.style,{position:"absolute",width:"100%",height:"100%",top:0}))}var d=b.getSettings();d&&(d.loadTimeout&&(v=d.loadTimeout),d.startTimeout&&(w=d.startTimeout)),a.cb("onStarted",[b.sectionType,b.getAdForApp()||{}]),f(v,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:LoadInterface"),t.setView(i.load(u.src,a.config.vpaidHtmlInterface),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"transparent"})}function e(){j&&a.videoEl.parentNode?a.videoEl.parentNode.removeChild(a.videoEl):k&&k.insertBefore(a.videoEl,l),g(),i.destroy(),t.dispose()}function f(a,b){g(),r=b,n=setTimeout(h,a)}function g(){clearTimeout(n)}function h(){q=!0,g(),b.log("error"),r&&a.stats.logError(r+":"+u.bannerID),a.cb("onError")}var i,j,k,l,m,n,o,p,q,r,s,t=new AdmanHTML.AdRenderer(a,b),u=b.getAd(),v=500,w=1e3;t.onResize=function(a,b){i&&i.call("resizeAd",[a,b,"normal"])},t.onClick=function(){};var x=function(d,e){if(!q){var h,j;switch(d){case"loaded":f(v,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:LoadJs");break;case"vpaidloaded":g();break;case"inited":var k=i.call("handshakeVersion",["2.0"]);k?(f(w,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:InitAd"),i.call("initAd",[t.mainEl.offsetWidth,t.mainEl.offsetHeight,"normal",u.bitrate,{AdParameters:u.params}])):a.cb("onError");break;case"AdStarted":g(),p=i.callGet("adVolume"),"undefined"==typeof o||i.autoMuted||i.callSet("adVolume",o),b.log("playbackStarted"),a.viewability.start(t.mainEl,b),a.cb("onVPAIDStarted");break;case"AdLoaded":f(w,"EXTERNAL_JS_ADVERTISMENT_TIMEOUT:StartAd"),i.call("startAd");break;case"AdRemainingTimeChange":h=c(),j=i.callGet("adRemainingTime"),h>0&&j>=0?t.onTimeRemained(h-j,h):a.cb("onDurationChanged",[{remained:j,duration:h}]);break;case"AdVolumeChange":var l=i.callGet("adVolume");(0===p&&l>0||p>0&&0===l)&&b.log(l?"volumeOn":"volumeOff"),p=l;break;case"AdVideoComplete":h=c(),t.onTimeRemained(h,h);break;case"AdStopped":case"AdSkipped":s||(s=!0,setTimeout(function(){m?m():a.cb("onCompleted")}));break;case"AdClickThru":e.url&&e.playerHandles&&window.open(e.url,"_blank"),b.log("click"),a.cb("onClicked");break;case"AdError":a.stats.logError("EXTERNAL_JS_ADVERTISMENT_ERROR:"+(e&&e.message||"")),a.cb("onError");break;case"AdPaused":a.cb("onPaused");break;case"AdPlaying":a.cb("onPlayed");break;case"AdUserClose":b.log("closedByUser")}}},y=a.wrapper.ownerDocument,z=y.defaultView||y.parentWindow;return i=new AdmanHTML.VpaidLoader(a.videoEl,z),i.onVpaidEvent(x),{start:d,dispose:e,pause:function(){i&&i.call("pauseAd")},resume:function(){i&&i.call("resumeAd")},setVolume:function(a){i&&i.callSet("adVolume",a),o=a},skip:function(a){m=a;try{i&&i.call("skipAd")}catch(b){}}}},AdmanHTML.VpaidSwfAdRenderer=function(a,b){"use strict";function c(){var a;if(!i)return q.duration;try{a=i.callGet("adDuration")||q.duration}catch(b){a=q.duration}return a}function d(){p.start();var c=b.getSettings();c&&(c.loadTimeout&&(s=c.loadTimeout),c.startTimeout&&(t=c.startTimeout)),AdmanHTML.Utils.checkFlashAsync(function(c){if(c===AdmanHTML.Utils.FLASH_READY){a.cb("onStarted",[b.sectionType,b.getAdForApp()||{}]),f(s);var d="vpaidSwfUrl="+encodeURIComponent(q.src)+"&proxyMethodName="+r;p.setView(o.createSwfObject(a.config.vpaidJsInterface,{width:"100%",height:"100%"},{flashvars:d,allowScriptAccess:"always",wmode:"opaque"}),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"black"})}else a.cb("onError")})}function e(){g(),p.dispose(),window[r]=null}function f(a){g(),k=setTimeout(h,a)}function g(){clearTimeout(k)}function h(){n=!0,g(),b.log("error"),a.cb("onError")}var i,j,k,l,m,n,o=new AdmanHTML.SwfAdRenderer(a,b),p=o["super"],q=b.getAd(),r="vpaidProxyMethod"+Date.now(),s=500,t=1e3;return p.onResize=function(a,b){i&&i.call("resizeAd",[a,b,"normal"])},p.onClick=function(){},window[r]=function(d,e){if(!n){var h;switch(d){case"loaded":f(s);break;case"vpaidloaded":g();break;case"inited":i=p.mainEl.getElementsByTagName("object")[0];var k=i.call("handshakeVersion",["2.0"]);k?(f(t),i.call("initAd",[p.mainEl.offsetWidth,p.mainEl.offsetHeight,"normal",q.bitrate,q.params,""])):a.cb("onError");break;case"AdStarted":g(),m=i.callGet("adVolume"),"undefined"!=typeof l&&i.callSet("adVolume",l),b.log("playbackStarted"),a.viewability.start(p.mainEl,b),a.cb("onVPAIDStarted");break;case"AdLoaded":f(t),i.call("startAd");break;case"AdRemainingTimeChange":h=c(),p.onTimeRemained(h-i.callGet("adRemainingTime"),h);break;case"AdVolumeChange":var o=i.callGet("adVolume");(0===m&&o>0||m>0&&0===o)&&b.log(o?"volumeOn":"volumeOff"),m=o;break;case"AdVideoComplete":h=c(),p.onTimeRemained(h,h);break;case"AdStopped":case"AdSkipped":setTimeout(function(){j?j():a.cb("onCompleted")});break;case"AdClickThru":b.log("click"),a.cb("onClicked");break;case"AdError":a.stats.logError("EXTERNAL_SWF_ADVERTISMENT_ERROR:"+(e&&e.message||"")),a.cb("onError");break;case"AdPaused":a.cb("onPaused");break;case"AdPlaying":a.cb("onPlayed");break;case"AdUserClose":b.log("closedByUser")}}},{start:d,dispose:e,pause:function(){i&&i.call("pauseAd")},resume:function(){i&&i.call("resumeAd")},setVolume:function(a){i&&i.callSet("adVolume",a),l=a},skip:function(a){j=a;try{i&&i.call("skipAd")}catch(b){}}}};
window.admanAsyncInit&&setTimeout(admanAsyncInit);