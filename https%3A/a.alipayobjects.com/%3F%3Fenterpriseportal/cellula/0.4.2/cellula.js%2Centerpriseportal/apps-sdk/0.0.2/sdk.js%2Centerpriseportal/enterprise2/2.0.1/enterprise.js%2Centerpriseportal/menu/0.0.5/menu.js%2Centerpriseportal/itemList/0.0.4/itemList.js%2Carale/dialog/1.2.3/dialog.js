define("enterpriseportal/cellula/0.4.2/cellula",["./cellula-namespace","./cellula-class","./cellula-util","./cellula-events","./cellula-cell","./cellula-element","./cellula-collection"],function(a,b,c){var d=a("./cellula-namespace");a("./cellula-class"),a("./cellula-util"),a("./cellula-events"),a("./cellula-cell"),a("./cellula-element"),a("./cellula-collection"),c.exports=d}),define("enterpriseportal/cellula/0.4.2/cellula-namespace",[],function(a,b,c){var d={};d._cellula=d,d.version="0.4.0",d._util={},d.Class=void 0,d.Events=void 0,d.Cell=void 0,d.Element=void 0,d.Collection=void 0,c.exports=d}),define("enterpriseportal/cellula/0.4.2/cellula-class",["enterpriseportal/cellula/0.4.2/cellula-namespace"],function(a,b,c){var d=a("enterpriseportal/cellula/0.4.2/cellula-namespace"),e={},f=0,g=d.Class=function(){"use strict";f++;var a,b="Class_"+f,c=[],d=0,g="",h=arguments,i={},j=Object.prototype.toString,k=/\bObject\b/,l=/\bArray\b/,m=function(){if(!this.constructor.__initializing__){this.__cid__="cellula_"+this._class()+"_instance_"+ ++d;var a,b,e,f=c.length;for(a=0;f>a;a++){b=new c[a];for(e in b)this[e]=e in this?this[e]:b[e]}var g=h[2]||h[1];if("NEW"===g){var m,n,o;for(n in this){if(k.test(j.call(this[n]))){m={};for(o in this[n])m[o]=this[n][o];this[n]=m}l.test(j.call(this[n]))&&(this[n]=this[n].slice())}}if(i[this.__cid__]=this,this.init)return this.init.apply(this,arguments)}},n=m.prototype,o=/xyz/.test(function(){})?/\b_super\b/:/.*/;h[0]||(h[0]=b),m.prototype=k.test(j.call(h[0]))?h[0]:h[1]&&k.test(j.call(h[1]))?h[1]:{},m.prototype.constructor=n.constructor,"string"==typeof h[0]&&(b=h[0]);var p=function(){return b};if(m.prototype._class=p,m.prototype.__getAncestor__=function(){return g},m.prototype.__setAncestor__=function(a){g=a},g=b,e[b])throw new Error("Duplicated Class!");return e[b]=m,m.inherits=function(a){if("function"!=typeof a||!a.prototype._class||a.prototype._class.toString()!==p.toString())throw new Error("parent class type error!");a.__initializing__=!0;var b=a.prototype,d=new a,e=this.prototype;e.__setAncestor__(d.__getAncestor__&&d.__getAncestor__()||g);for(var f in e)d[f]="constructor"!==f&&"_class"!==f&&"function"==typeof e[f]&&"function"==typeof b[f]&&o.test(e[f])?function(a,c){return function(){var d=this._super;this._super=b[a];var e=c.apply(this,arguments);return d?this._super=d:delete this._super,e}}(f,e[f]):e[f];this.prototype=d,this.prototype.constructor=this,delete a.__initializing__;var h,i=a.getExtended(),j=i.length;for(h=0;j>h;h++)c.push(i[h]);return this},m.extend=function(a){return"function"==typeof a&&c.push(a),this},m.getExtended=function(){return c},m.shareInstance=function(){return a||(a=new m)},m.info=function(){return{name:b,count:d,instances:i,ancestor:m.prototype.__getAncestor__(),parent:""}},m};g.classFromString=function(a){return"string"==typeof a&&e[a]?e[a]:void 0},g.getInfo=function(a){return"string"==typeof a&&e[a]?e[a].info():void 0},c.exports=g}),define("enterpriseportal/cellula/0.4.2/cellula-util",["enterpriseportal/cellula/0.4.2/cellula-namespace"],function(require,exports,module){function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var cellula=require("enterpriseportal/cellula/0.4.2/cellula-namespace"),util=cellula._util,ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,slice=util.slice=ArrayProto.slice,toString=util.toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,breaker=util.breaker="breaker is used to break a loop",isArray=util.isArray=function(a){return nativeIsArray?nativeIsArray(a):"[object Array]"===toString.call(a)},isObject=util.isObject=function(a){return null==a?!1:"[object Object]"===toString.call(a)},isString=util.isString=function(a){return"[object String]"===toString.call(a)},isFunction=util.isFunction=function(a){return"[object Function]"===toString.call(a)},isArguments=util.isArguments=function(a){return"[object Arguments]"===toString.call(a)},isNodeList=util.isNodeList=function(a){return"[object NodeList]"===toString.call(a)},isClass=util.isClass=function(a){return isFunction(a)&&a.toString()===classCtor().toString()},has=util.has=function(a,b){return hasOwnProperty.call(a,b)},isEmpty=util.isEmpty=function(a,b){if(!a)return!0;if(isArray(a)||isString(a))return 0===a.length;for(var c in a)if(!b||has(a,c))return!1;return!0},iterator=util.iterator=function(a){return a},each=util.each=function(a,b,c,d){if(a){var e;if(null!=d){for(e in a)if((isObject(a)&&has(a,e)||isArray(a)&&e in a)&&b.call(c,a[e],e,a)===d)return e}else if(nativeForEach&&nativeForEach===a.forEach)a.forEach(b,c);else for(e in a)(isObject(a)&&has(a,e)||isArray(a)&&e in a)&&b.call(c,a[e],e,a)}},map=util.map=function(a,b,c){var d=[];return null==a?d:nativeMap&&nativeMap===a.map?a.map(b,c):(each(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},keys=util.keys=function(a){if(nativeKeys)return nativeKeys(a);if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)has(a,c)&&(b[b.length]=c);return b},values=util.values=function(a){return map(a,iterator)},emptyFunc=util.emptyFunc=function(){},bind=util.bind=function(a,b){var c,d;if(nativeBind&&nativeBind===a.bind)return nativeBind.call(a,b);if(!isFunction(a))throw new TypeError;return d=slice.call(arguments,2),c=function(){if(!(this instanceof c))return a.apply(b,slice.call(arguments));emptyFunc.prototype=a.prototype;var d=new emptyFunc,e=a.apply(d,slice.call(arguments));return Object(e)===e?e:d}},toArray=util.toArray=function(a){return a?isArray(a)||isArguments(a)?slice.call(a):values(a):[]},toArrayByLen=util.toArrayByLen=function(a){var b=[];if(a.length)for(var c=0;c<a.length;b[c]=a[c++]);return b},mix=util.mix=function(){for(var a=arguments[0]||{},b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(isObject(d)||isArray(d))for(var e in d)a[e]=d[e]}return a},deepMix=util.deepMix=function(){for(var a=arguments[0]||{},b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(isObject(d)||isArray(d))for(var e in d)a[e]=isObject(a[e])&&isObject(d[e])?deepMix({},a[e],d[e]):d[e]}return a},copy=util.copy=function(a){return isObject(a)||isArray(a)?isArray(a)?a.slice():mix({},a):a},aspect=util.aspect=function(a){if(!util.isObject(a))throw new Error("invalid parameter!");var b={before:function(b,c,d){if(!util.isString(b)||!util.isFunction(c))throw new Error("invalid parameter!");var e=a[b],f=d?util.slice.call(arguments,3):[];a[b]=function(){return c.apply(d||a,f),e.apply(a,arguments)}},after:function(b,c,d){if(!util.isString(b)||!util.isFunction(c))throw new Error("invalid parameter!");var e=a[b],f=d?util.slice.call(arguments,3):[];a[b]=function(){var b=e.apply(a,arguments);return c.apply(d||a,f),b}},wrap:function(b,c){if(!util.isString(b)||!util.isFunction(c))throw new Error("invalid parameter!");var d=a[b];a[b]=function(){var b=a._origin;a._origin=d;var e=c.apply(a,arguments);return a._origin=b,e}}};return b},nativeConsole=window?window.console||{}:{};each(["log","info","warn","error"],function(a){try{util[a]=nativeConsole[a]&&nativeConsole[a].apply?function(){nativeConsole[a].apply(nativeConsole,toArrayByLen(arguments))}:emptyFunc}catch(b){}});var makeTpl=util.makeTpl=function(a,b){var c=a;for(n in b){var d=new RegExp("(\\$\\-\\{"+n+"\\})","g");c=c.replace(d,b[n])}var e=new RegExp("(\\$\\-\\{[/#a-zA-Z0-9]+\\})","g");return c=c.replace(e,"")},parseTpl=util.parseTpl=function(a,b){function c(c){var e=new RegExp("(\\$\\-\\{#"+c+"\\})","g"),f=new RegExp("(\\$\\-\\{/"+c+"\\})","g"),g=new RegExp("(\\$\\-\\{#"+c+"\\})(.*)(\\$\\-\\{/"+c+"\\})","g");if(b[c]!==!1&&b[c])if(isArray(b[c])){var h=g.exec(a);if(h){for(var i=h[2],j="",k=b[c],l=0;l<k.length;l++)j+=this.parseTpl.call(this,i,k[l]);d=d.replace(g,j)}}else d=d.replace(e,"").replace(f,"");else d=d.replace(g,"");return d}if(!isString(a)||!isObject(b))return a;var d=a,e=new RegExp("\\$\\-\\{#(.*)\\}");for(var f in b)c.call(this,f);for(;e.test(d);){var g=e.exec(d)[1];g=g.substring(0,g.indexOf("}")),c.call(this,g)}return makeTpl(d,b)};util.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;util.JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})},util.JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")};var trim=util.trim=function(a){return isString(a)?a.replace(/^\s+/g,"").replace(/\s+$/g,""):a},hasClass=util.hasClass=function(a,b){return a&&1==a.nodeType?(b=" "+b+" ",(" "+a.className+" ").replace(/[\n\t\r]/g," ").indexOf(b)>-1):!1},addClass=util.addClass=function(a,b){if(a&&1==a.nodeType){if(!trim(a.className))return a.className=b;hasClass(a,b)||(a.className=trim(a.className)+" "+b)}},removeClass=util.removeClass=function(a,b){hasClass(a,b)&&(a.className=trim((" "+a.className+" ").replace(/[\n\t\r]/g," ").replace(" "+b+" "," ")))},getElementsByClassName=util.getElementsByClassName=function(a,b,c){if(b=b||document,b.getElementsByClassName)return b.getElementsByClassName(a);c=c||"*";for(var d=[],e=b.getElementsByTagName(c),f=e.length,g=new RegExp("(^|\\s)"+a+"(\\s|$)");--f>=0;)g.test(e[f].className)&&d.push(e[f]);return d};module.exports=util}),define("enterpriseportal/cellula/0.4.2/cellula-events",["enterpriseportal/cellula/0.4.2/cellula-namespace"],function(a,b,c){function d(a){return a&&k.test(a.__cid__)}function e(){function a(a,b){return{func:a,context:b,next:null}}function b(a){return{head:a,tail:a,push:function(a){return this.head?(this.tail.next=a)&&(this.tail=a):(this.head=a)&&(this.tail=a),this}}}this.__cid__=i+"Events"+j+ ++h;var c={},e={},f={},k={};this._check=d,this._apis={},this._getMapping=function(){return g.copy(c)},this.getFollowers=function(){return g.copy(e)},this._getApiList=function(){return g.copy(f)},this.follow=function(a,b){return d(a)?b?(a.register(b,this),void 0):a.register(this):"Not Support!"},this.unfollow=function(a,b){return d(a)?b?(a.cancel(b,this),void 0):a.cancel(this):"Not Support!"},this.register=function(a,b,f){return d(a)?e[a.__cid__]=a:d(b)?(g.isString(a)&&(a=[a]),g.isArray(a)&&g.each(a,function(a){var d=c[a]=c[a]||[];if(d.push(b),f&&0==f.multiple){var e,g=d.length;for(e=0;g-1>e;e++)if(d[e]===b){d.pop();break}}}),void 0):"Not Support!"},this.cancel=function(a,b){if(d(a))return delete e[a.__cid__];if(!a)return c={};if(!b&&(g.isString(a)&&(a=[a]),g.isArray(a)))return g.each(a,function(a){delete c[a]});if(g.isString(a)&&(a=[a]),g.isArray(a)){var f,h,i,j;g.each(a,function(a){for(j=c[a],i=[],h=0,f=j.length;f>h;h++)j[h]!==b&&i.push(j[h]);c[a]=i})}},this.emit=function(a){var b,d,f,h,i,j=g.slice.call(arguments,1,arguments.length);if(a||(a=g.keys(c)),g.isString(a)&&(a=[a]),g.isArray(a))for(;h=a.shift();){if(i={target:this,name:h},d=g.copy(e),f=c[h])for(;b=f.shift();)b.receiver.apply(b,[i].concat(j)),delete d[b.__cid__];g.each(d,function(a){a.receiver.apply(a,[i].concat(j))})}},this.receiver=function(){},this.registerApi=function(c,d,e){return d?e&&!g.isString(e)?g.warn("invalid parameter!"):(g.isArray(c)||(c=[c]),g.each(c,function(c){if(!g.isString(c))return g.warn("invalid parameter!");var h=e?[c,e]:[c],i=d._apis[c],j=d.__cid__;g.isString(i)&&(i=d[c]),g.isFunction(i)?g.each(h,function(c){k[j]=k[j]||{},k[j][c]=c;var e=a(i,d);f[c]?f[c].push(e):f[c]=b(e)}):g.warn("the "+c+" method does not exist in context's api list!")},this),void 0):g.warn("invalid parameter!")},this.applyApi=function(a){if(!a||!g.isString(a))return g.warn("invalid parameter!");var b,c=[],d=":",e=a.split(d),h=e[0],i=e[1],j=f[h],k=g.slice.call(arguments,1);if(j)for(b=j.head;b;)i?(b.context.__cid__.indexOf(i)>-1&&c.push(b.func.apply(b.context,k)),b=b.next):c.push(b.func.apply(b.context,k))&&(b=b.next);return c},this.removeApi=function(a,b){function c(a,b){g.each(a,function(a){if(f[a]){var c,d;for(c=d=f[a].head;c;)c.context==b?c==d?f[a].head=d=c.next:d.next=c.next:d=c,c=c.next}})}return a?(g.isArray(a)||(a=[a]),"all"===a[0]?f={}:d(a[0])?c(k[a[0].__cid__],a[0]):(b?c(a,b):g.each(a,function(a){delete f[a]}),void 0)):g.warn("invalid parameter!")}}var f=a("enterpriseportal/cellula/0.4.2/cellula-namespace"),g=f._util,h=0,i="cellula_",j="_instance_",k=new RegExp("^"+i+".*"+j+"\\d+$");f.Events=e,c.exports=e}),define("enterpriseportal/cellula/0.4.2/cellula-cell",["enterpriseportal/cellula/0.4.2/cellula-namespace"],function(a,b,c){var d=a("enterpriseportal/cellula/0.4.2/cellula-namespace"),e=d._util,f=d.Cell=new d.Class("Cell",{key:void 0,rootNode:void 0,collection:void 0,_rootClass:"Cell",_bindAll:function(){for(var a=0;a<arguments.length;a++)this[arguments[a]]=e.bind(this[arguments[a]],this);return this},_setup:function(a){if(e.isObject(a))for(var b in a)b in this&&a.hasOwnProperty(b)&&(!e.isFunction(a[b])||"init"!=b)&&(this[b]=e.isObject(this[b])&&e.isObject(a[b])?e.deepMix({},this[b],a[b]):a[b]?a[b]:this[b]);this.rootNode=null,this.rootNode=this.getRoot()},init:function(a){this._setup(a)},getCollection:function(){return this.collection},setCollection:function(){},setElement:function(){},getNode:function(a,b,c){a=a||"",b=b||document,c=c||"div";var d=document.getElementById(a);if(d)return d;if(a){var f=e.getElementsByClassName(a,b,c);return 1===f.length?f[0]:void 0}},getRoot:function(){return e.isEmpty(this.rootNode)?this.getNode(this.key):this.rootNode},show:function(a,b){return this.rootNode||(this.rootNode=this.getRoot()),b=b||this.rootNode,a?e.removeClass(b,this.hideClass):(e.addClass(b,this.hideClass),void 0)},error:function(){},render:function(){this.registerEvents()},registerEvents:function(){}}).extend(d.Events);c.exports=f}),define("enterpriseportal/cellula/0.4.2/cellula-element",["enterpriseportal/cellula/0.4.2/cellula-namespace"],function(a,b,c){function d(a,b){return b?f.isString(b)?a[b]:f.isArray(b)?f.map(b,function(b){return a[b]}):void 0:f.mix({},a)}var e=a("enterpriseportal/cellula/0.4.2/cellula-namespace"),f=e._util,g=e.Element=new e.Class("Element",{key:"",_data:{},_previous:{},storage:{toStorage:function(a){function b(a,b){c.setItem(b,"object"!=typeof a?a:JSON.stringify(a))}var c,d=this.__self__;if(c=window.localStorage){if(window.JSON||(window.JSON=f.JSON),!a)return f.each(d._data,b);if(d.has(a))return b(d.get(a),a);if(f.isArray(a))return f.each(a,function(a){this.has(a)&&b(this.get(a),a)},d)}},get:function(a){var b,c={},e=this.__self__;return(b=window.localStorage)?(f.each(e._data,function(a,d){d in b&&(c[d]=b[d])}),d(c,a)):void 0}},_setup:function(a){if(this.storage.__self__=this,f.isObject(a))for(var b in a)b in this&&f.has(a,b)&&(!f.isFunction(a[b])||"init"!=b)&&(this[b]=f.isObject(this[b])&&f.isObject(a[b])?f.deepMix({},this[b],a[b]):a[b]?a[b]:this[b])},init:function(a){this._setup(a),this.key||(this.key=this.__cid__)},set:function(a,b,c){if(!a)throw new Error("data structure error!");var d,e=-1;return f.isObject(a)&&(d=a,c=b),f.isString(a)&&(d={},d[a]=b),d=f.deepMix({},this._data,d),e=this.validate(d,this),void 0!==e?e:(this._previous=f.mix({},this._data),this._data=d,this)},has:function(a){return this._data.hasOwnProperty(a)},reset:function(a){if(!a)return(this._previous=f.mix({},this._data))&&(this._data={});if(f.isObject(a)){var b=f.mix({},a),c=this.validate(b,this);return void 0!==c?(this.trigger("error"),!1):(this._previous=f.mix({},this._data),this._data=b,!0)}return!1},removeAttribute:function(){},save:function(){},destroy:function(){return this.applyInterface("Collection.remove",this.key)},validate:function(){},getPrevious:function(a){return d(this._previous,a)},get:function(a){return d(this._data,a)}});c.exports=g}),define("enterpriseportal/cellula/0.4.2/cellula-collection",["enterpriseportal/cellula/0.4.2/cellula-namespace"],function(a,b,c){var d=a("enterpriseportal/cellula/0.4.2/cellula-namespace"),e=d._util,f=d.Collection=new d.Class("Collection",{type:d.Element,_index:[],_elements:{},_initCfg:function(a){if(e.isObject(a))for(var b in this)a.hasOwnProperty(b)&&(this[b]=e.isObject(this[b])&&e.isObject(a[b])?e.deepMix({},this[b],a[b]):a[b]?a[b]:this[b])},_elConfig:function(a){if(e.isObject(a)){var b=new this.type(a);b.registerInterface("remove",this),this._elements[b.key]=b,this._index.push(b.key)}},init:function(a,b){this._initCfg(a),e.isArray(b)?e.each(b,function(a){this._elConfig(a)},this):this._elConfig(b)},clear:function(){this._index=[],this._elements={}},reverse:function(){return this._index.reverse(),this},size:function(){return this._index.length},add:function(a,b){if(b=parseInt(b),isNaN(b))return this.push(a);if(a instanceof this.type){if(this._elements[a.key]=a,0>=b)return this._index.unshift(a.key);if(b>=this._index.length)return this._index.push(a.key);var c=this._index.concat([]),d=c.splice(b);c.push(a.key),this._index=c.concat(d)}return this._index.length},remove:function(a){return a&&(e.isString(a)&&(delete this._elements[a],e.each(this._index,function(b,c){b==a&&this._index.splice(c,1)},this)),a instanceof this.type&&(delete this._elements[a.key],e.each(this._index,function(b,c){b==a.key&&this._index.splice(c,1)},this))),this},shift:function(){},push:function(a){return a instanceof this.type?(this._elements[a.key]=a,this._index.push(a.key)):void 0},pop:function(){var a=this._index.pop(),b=this._elements[a];return delete this._elements[a],b},get:function(a){if(!a)return e.values(e.mix({},this._elements));if(e.isString(a))return this._elements[a]?this._elements[a]:this._elements[this._index[a]];if(e.isArray(a)){var b=[];return e.each(a,function(a){e.isString(a)&&b.push(this._elements[a]?this._elements[a]:this._elements[this._index[a]])},this),b}},save:function(a){var b,c,d,f,g=this._elements;if("Cell"===this.type.prototype.__getAncestor__()){if(e.isString(a))return g[a]&&g[a].collection?g[a].collection.save():!1;if(e.isArray(a))for(c=0,d=a.length;d>c;c++)if(b=g[a[c]]&&g[a[c]].collection?g[a[c]].collection.save():!1,!b)return b;if(!a)for(f in g)if(b=g[f]&&g[f].collection?g[f].collection.save():!1,!b)return b;return!0}if("Element"===this.type.prototype.__getAncestor__()){if(e.isString(a))return g[a]?g[a].save():!1;if(e.isArray(a))for(c=0,d=a.length;d>c;c++)if(b=g[a[c]]?g[a[c]].save():!1,!b)return b;if(!a)for(f in g)if(b=g[f]?g[f].save():!1,!b)return b;return!0}return!1}},"NEW");c.exports=f});
define("enterpriseportal/apps-sdk/0.0.2/sdk",["./sdk-namespace","./sdk-wrapper","$","./sdk-util","enterpriseportal/cellula/0.4.2/cellula","./sdk-request"],function(a,b,c){var d=(a("./sdk-namespace"),a("./sdk-wrapper"));a("./sdk-util"),a("./sdk-request"),c.exports=d}),define("enterpriseportal/apps-sdk/0.0.2/sdk-namespace",[],function(a,b,c){var d=function(a,b){var c={};c.version="0.0.1",c.global=a,c.$=b,c.util=null,c.request=null,a.SDK=c._sdk=c};c.exports=d}),define("enterpriseportal/apps-sdk/0.0.2/sdk-wrapper",["enterpriseportal/apps-sdk/0.0.2/sdk-namespace","$"],function(a,b,c){try{window.SDK||a("enterpriseportal/apps-sdk/0.0.2/sdk-namespace")(window,a("$"))}catch(d){}c.exports=window.SDK}),define("enterpriseportal/apps-sdk/0.0.2/sdk-util",["enterpriseportal/cellula/0.4.2/cellula","enterpriseportal/apps-sdk/0.0.2/sdk-wrapper","enterpriseportal/apps-sdk/0.0.2/sdk-namespace","$"],function(a,b,c){var d=a("enterpriseportal/cellula/0.4.2/cellula")._util,e=a("enterpriseportal/apps-sdk/0.0.2/sdk-wrapper"),f=e.global;d.JSON=f.JSON||d.JSON,d.encode=function(a){if(d.isObject(a)){var b=[];return d.each(a,function(a,c){b.push(encodeURIComponent(c)+"="+encodeURIComponent(a))}),b.join("&")}},d.decode=function(a){var b={};if(!d.isString(a)||d.isEmpty(a))return b;var c,e,f,g=a.split("&"),h=g.length;for(c=0;h>c;c++)e=pairs[c].split("=",2),f=decodeURIComponent(e[0]),b[f]=2===e.length?decodeURIComponent(e[1]):null;return b},d.appendToUrl=function(a,b){return a+(~a.indexOf("?")?"&":"?")+(d.isString(b)?b:d.encode(b))},e.util=d,c.exports=d}),define("enterpriseportal/apps-sdk/0.0.2/sdk-request",["enterpriseportal/apps-sdk/0.0.2/sdk-wrapper","enterpriseportal/apps-sdk/0.0.2/sdk-namespace","$"],function(a){var b=a("enterpriseportal/apps-sdk/0.0.2/sdk-wrapper"),c=b.request={},d=b.$,e=b.global,f=b.util;return c.ajax=function(a){if(!d)return!1;try{return d.ajax(a),!0}catch(b){return!1}},c.jsonp=function(a){if(!d)return!1;if(!a||"object"!=typeof a)return!1;a.dataType="jsonp",a.jsonp="jsonpCallback",a.converters={"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,jsonp:jQuery.parseJSON,"text xml":jQuery.parseXML};try{return d.ajax(a),!0}catch(b){return!1}},c.cors=function(a){function b(a,b){if(!e.XMLHttpRequest)return null;try{var c=new XMLHttpRequest;return e.XDomainRequest?null:(c.open(b,a),"POST"===b.toUpperCase()&&"withCredentials"in c&&c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.withCredentials=!0,c.onprogress=c.ontimeout=f.emptyFunc,c)}catch(d){return null}}function c(a){var c=f.encode(a.params),d=a.url,e=a.method,g=a.callback,h=a.context;a.cache||(d+="?t="+(new Date).getTime()),"POST"!==e.toUpperCase()&&(d=f.appendToUrl(d,c),c="");var i=b(d,e);if(!i)return!1;i.onload=function(){try{g.call(h,f.JSON.parse(i.responseText))}catch(a){return a}};var j=a.error||g;return i.onerror=function(a){i.responseText?j.call(h,f.JSON.parse(i.responseText)):j.call(h,{status:i.status,error:i.statusText,req:i,e:a}),i.abort()},i.send(c),!0}return c(a)},c.send=function(a){var b=[c.cors,c.jsonp];a.success=a.callback,a.data=a.params;for(var d;d=b.shift();)if(1==d(a))return!0;return!1},c});
define("enterpriseportal/enterprise2/2.0.1/enterprise",["./topMenuItem","enterpriseportal/menu/0.0.5/menu","enterpriseportal/cellula/0.4.2/cellula","./subMenuItem","enterpriseportal/menu/0.0.5/menu","$","enterpriseportal/cellula/0.4.2/cellula","./msgTip","enterpriseportal/cellula/0.4.2/cellula","enterpriseportal/apps-sdk/0.0.2/sdk","enterpriseportal/itemList/0.0.4/itemList","./accountInfo","enterpriseportal/cellula/0.4.2/cellula","enterpriseportal/apps-sdk/0.0.2/sdk","./appDropList","enterpriseportal/cellula/0.4.2/cellula","enterpriseportal/apps-sdk/0.0.2/sdk"],function(a,b,c){var d={};d.TopMenuItem=a("./topMenuItem"),d.SubMenuItem=a("./subMenuItem"),d.MsgTip=a("./msgTip"),d.AccountInfo=a("./accountInfo"),d.AppDropListPkg=a("./appDropList"),c.exports=d}),define("enterpriseportal/enterprise2/2.0.1/topMenuItem",["enterpriseportal/menu/0.0.5/menu","enterpriseportal/cellula/0.4.2/cellula"],function(a,b,c){var d=a("enterpriseportal/menu/0.0.5/menu"),e=a("enterpriseportal/cellula/0.4.2/cellula"),f=d.MenuItem,g='<li class="item$-{#current} current$-{/current}"><a class="link" href="$-{url}">$-{name}</a></li>',h=new e.Class("TopMenuItem",{template:g}).inherits(f);c.exports=h}),define("enterpriseportal/enterprise2/2.0.1/subMenuItem",["enterpriseportal/menu/0.0.5/menu","$","enterpriseportal/cellula/0.4.2/cellula"],function(a,b,c){var d=a("enterpriseportal/menu/0.0.5/menu"),e=a("$"),f=a("enterpriseportal/cellula/0.4.2/cellula"),g=f._util,h=d.MenuItem,i='<li class="mi-nav-item mi-nav-title">$-{name}</li>',j='<li class="mi-nav-item$-{#current} mi-nav-item-current$-{/current}"><a href="$-{url}"><span class="label">$-{name}</span></a></li>',k=new f.Class("SubMenuItem",{template:j,init:function(a){this._super(a),this.node="STATIC_TITLE"==a.data.type?e(g.parseTpl(i,a.data)):e(g.parseTpl(this.template,a.data))}}).inherits(h);c.exports=k}),define("enterpriseportal/enterprise2/2.0.1/msgTip",["$","enterpriseportal/cellula/0.4.2/cellula","enterpriseportal/apps-sdk/0.0.2/sdk","enterpriseportal/itemList/0.0.4/itemList"],function(a,b,c){var d={},e=a("$"),f=a("enterpriseportal/cellula/0.4.2/cellula"),g=f._util,h=(a("enterpriseportal/apps-sdk/0.0.2/sdk"),a("enterpriseportal/itemList/0.0.4/itemList"));d.MsgTipItem=new f.Class("MsgTipItem",{closeClass:".close",template:'<li$-{#isHighMsg} class="warn"$-{/isHighMsg}>$-{#canDeleted}<a class="close" href="javascript:;">关闭</a>$-{/canDeleted}$-{#isHandle}<a target="_blank" href="$-{url}">$-{content}</a>$-{/isHandle}$-{#notHandle}$-{content}$-{/notHandle}</li>',isHighLevel:!1,create:function(a){return g.isObject(a)?(this.key=a.id,this.isHighLevel=a.isHighMsg,this.userId=a.userId,a.notHandle=!a.isHandle,this.emit("Item:CREATE"),e(f._util.parseTpl(this.template,a))[0]):void 0},remove:function(a){e(a.target).off(),e(this.rootNode).off(),this.emit("Item:REMOVE")},registerEvents:function(){this._super();var a=e(this.rootNode);a.hover(function(){var b=a.attr("class");b?a.addClass(b+"-hover"):a.addClass("hover")},function(){a.removeClass((a.hasClass("warn")?"warn-":"")+"hover")}),a.find(this.closeClass).click(this.remove)}}).inherits(h.Item),d.MsgTip=new f.Class("MsgTip",{source:"",baseURI:"",fowardUrl:"",role:"",itemType:d.MsgTipItem,approveMsgCount:e("#J_approveMsgCount"),highlightNode:e("#J_highlight"),errNode:e("#J_msgLoadError"),titleNode:e("#J_msgTipTitle"),blinkTime:1800,blinkFlag:null,max:5,init:function(a){this._bindAll("load"),this._super(a),this.fowardUrl=this.baseURI+"/portal/forward.htm"},load:function(){this.errNode.addClass("fn-hide"),SDK.request.send({url:this.source,method:"POST",params:{action:"loadNavMsg"},callback:this.render,error:this.error,context:this}),this.titleNode.removeClass("fn-hide")},error:function(){this.titleNode.addClass("fn-hide"),this.errNode.removeClass("fn-hide")},render:function(){this.collection.clear(),this.emit("LOADED")},renderItems:function(a){var b,c=this.collection.size();b=c>a?a:c;for(var d=0;b>d;d++)this.appendToList(this.collection.get(d+""))},renderCount:function(a){var b=size=this.collection.size();"operator"==this.role||"account"==this.role||"master"==this.role||"authmanager"==this.role||"institutionmulti"==this.role||"institutionoperator"==this.role?(b=parseInt(size+a,10),this.approveMsgCount.html(a)):this.approveMsgCount.parent().addClass("fn-hide"),this.highlightNode.html(b>99?"...":b),b>0?this.highlightNode.show():this.highlightNode.hide()},removeItem:function(a){this._super(a),this.renderCount(),this.blink(),SDK.request.send({url:this.source,method:"POST",params:{action:"cancelMsg",msgId:a.key,userId:a.userId},callback:this.appendNewItem,context:this})},appendNewItem:function(){var a=this.max-1;this.collection.size()>a&&this.appendToList(this.collection.get(a+""))},hasPriorMsg:function(){var a;return g.each(this.collection.get(),function(b){a=a||b.isHighLevel}),a},blink:function(){window.clearInterval(this.blinkFlag);var a=this;this.hasPriorMsg()&&(this.blinkFlag=window.setInterval(function(){a.highlightNode.animate({marginTop:"2px"},600,function(){a.highlightNode.animate({marginTop:"0px"},600)})},this.blinkTime))},registerEvents:function(){this._super();var a=e(this.rootNode);a.hover(function(){a.addClass("hover")},function(){a.removeClass("hover")}),e("#J_reloadMsg").click(this.load)}}).inherits(h.ItemList),c.exports=d}),define("enterpriseportal/enterprise2/2.0.1/accountInfo",["$","enterpriseportal/cellula/0.4.2/cellula","enterpriseportal/apps-sdk/0.0.2/sdk"],function(a,b,c){var d=a("$"),e=a("enterpriseportal/cellula/0.4.2/cellula");a("enterpriseportal/apps-sdk/0.0.2/sdk");var f=[{code:"&amp;",value:"&"},{code:"&quot;",value:'"'},{code:"&#39;",value:"'"},{code:"&nbsp;",value:" "},{code:"&lt;",value:"<"},{code:"&gt;",value:">"},{code:"&middot;",value:"·"}],g=function(a){if(!a||!a.length)return a;for(var b=0;b<f.length;b++){var c=f[b];a=a.replace(new RegExp(c.code,"g"),c.value)}return a},h=new e.Class("AccountInfo",{loginInfoNodes:d(".__login_info","#J_accounts"),loginNode:d("#J_login"),registerNode:d("#J_register"),viewBalanceNode:d("#J_viewBalance"),amountNode:d("#J_amount"),emailNode:d("#J_accountEmail"),nickNameNode:d("#J_nickName"),firmNameNode:d("#J_firmName"),entName:d("#J_entName"),lastLoginTime:d("#J_lastLoginTime"),personalAccountUrl:d("#J_personalAccountUrl"),otherInfo:d("#J_otherInfo"),simpleNode:d("#J_simpleContent"),blockedNode:d("#J_blockedContent"),jumpOutNode:d("#J_jumpOutUrl"),errNode:d("#J_entLoadError"),navType:"default",firmName:"",email:"",nickName:"",source:"",isRendered:!1,role:"",init:function(a){this._super(a),this._bindAll("getBalance","reload"),this.registerEvents()},start:function(){this.load({action:"loadEntInfo"})},load:function(a,b){"loadEntInfo"==a.action&&(this.firmNameNode.text("正在加载 ..."),this.errNode.addClass("fn-hide")),SDK.request.send({url:this.source,method:"POST",params:a,callback:b||this.render,error:this.error,context:this})},reload:function(){this.load({action:"loadEntInfo"})},render:function(a){var b=a.navResult||null;if(b&&b.result){switch(this.loginInfoNodes.removeClass("fnn-hide"),this.navType){case"simple":"operator"==this.role||"admin"==this.role?this.simpleNode.children().eq(0).html('你好，<span title="'+b.fullAliAsName+'">'+b.aliAsName+'（<em title="'+b.firmFullName+'">'+b.firmName+"</em>）</span>"):this.simpleNode.children().eq(0).html('你好，<span title="'+b.firmFullName+'">'+b.firmName+'（支付宝账户：<em title="'+b.fullRealName+'">'+b.realName+"</em>）</span>"),this.simpleNode.removeClass("fn-hide");break;case"blocked":this.jumpOutNode.html("你好，"+b.firmName+"<span>（支付宝账户："+b.aliAsName+"）</span>"),this.jumpOutNode.attr("title",g(b.firmFullName)),jQuery("span",this.jumpOutNode).attr("title",g(b.fullAliAsName)),this.blockedNode.removeClass("fn-hide");break;case"default":var c=b.firmFullName||"",d=b.firmName||"",e=b.firmFullName||"",f=b.realName||"",h=b.fullRealName,i=b.fullAliAsName||"",j=b.aliAsName||"",k=b.fullAliAsName||"",l=b.lastLoginTime||"";window.entNav_accountInfo=this.accountInfo={name:g(b.firmName)||"",name_full:g(b.firmFullName)||"",realName:g(b.realName)||"",realName_full:g(b.fullRealName)||"",aliasName:g(b.aliAsName)||"",aliasName_full:g(b.fullAliAsName)||"",isAuthenticated:b.isAuthenticated||!1,lastTime:g(b.lastLoginTime)||""},"operator"==this.role||"institutionoperator"==this.role?(this.firmNameNode.text(g(j)||g(d)),this.firmNameNode.parent().attr("href","javascript:;").css({cursor:"text",textDecoration:"none"}),""!=k&&this.firmNameNode.parent().attr("title",g(k)),""!=i?this.nickNameNode.text(g(i)):this.nickNameNode.parent().addClass("fn-hide"),""!=k&&this.nickNameNode.parent().attr("title",g(k)),this.nickNameNode.parent().attr("href","javascript:;").css({cursor:"text",textDecoration:"none"}),""!=f?this.emailNode.text(g(f)):this.emailNode.parent().addClass("fn-hide"),""!=h&&this.emailNode.parent().attr("title",g(h)),this.emailNode.parent().attr("href","javascript:;").css({cursor:"text",textDecoration:"none"}),""!=c?this.entName.text(g(c)):this.entName.parent().addClass("fn-hide"),""!=e&&this.entName.attr("title",g(e)),this.lastLoginTime.text(g(l)),this.otherInfo.addClass("fn-hide")):"admin"==this.role?(this.firmNameNode.text(g(j)),this.firmNameNode.parent().attr("title",g(k)),this.firmNameNode.parent().attr("href","javascript:;").css({cursor:"text",textDecoration:"none"}),""!=i?this.nickNameNode.text(g(i)):this.nickNameNode.parent().addClass("fn-hide"),""!=k&&this.nickNameNode.parent().attr("title",g(k)),this.nickNameNode.parent().attr("href","javascript:;").css({cursor:"text",textDecoration:"none"}),""!=f?this.emailNode.text(g(f)):this.emailNode.parent().addClass("fn-hide"),""!=h&&this.emailNode.parent().attr("title",g(h)),this.emailNode.parent().attr("href","javascript:;").css({cursor:"text",textDecoration:"none"}),""!=c?this.entName.text(g(c)):this.entName.parent().addClass("fn-hide"),""!=e&&this.entName.attr("title",g(e)),this.lastLoginTime.text(g(l)),this.otherInfo.addClass("fn-hide")):"master"==this.role?(this.firmNameNode.text(g(d)),""!=e&&this.firmNameNode.parent().attr("title",g(e)),""!=i?this.nickNameNode.text(g("["+i+"]")):this.nickNameNode.parent().addClass("fn-hide"),""!=k&&this.nickNameNode.parent().attr("title",g(k)),""!=f?this.emailNode.text(g(f)):this.emailNode.parent().addClass("fn-hide"),""!=h&&this.emailNode.parent().attr("title",g(h)),""!=c?this.entName.text(g(c)):this.entName.parent().addClass("fn-hide"),""!=e&&this.entName.attr("title",g(e)),this.lastLoginTime.text(g(l)),this.personalAccountUrl.addClass("fn-hide")):"account"==this.role||"institution"==this.role||"institutionmulti"==this.role?(this.firmNameNode.text(g(d)),this.firmNameNode.parent().attr("title",g(e)),""!=i?this.nickNameNode.text(g("["+i+"]")):this.nickNameNode.parent().addClass("fn-hide"),""!=k&&this.nickNameNode.parent().attr("title",g(k)),""!=f?this.emailNode.text(g(f)):this.emailNode.parent().addClass("fn-hide"),""!=h&&this.emailNode.parent().attr("title",g(h)),""!=c?this.entName.text(g(c)):this.entName.parent().addClass("fn-hide"),""!=e&&this.entName.attr("title",g(e)),this.lastLoginTime.text(g(l)),this.personalAccountUrl.addClass("fn-hide"),("institution"==this.role||"institutionmulti"==this.role)&&this.otherInfo.addClass("fn-hide")):"authmanager"==this.role&&(this.firmNameNode.text(this.accountInfo.aliasName),this.firmNameNode.parent().attr({href:"javascript:void(0)",title:this.accountInfo.aliasName_full}).css({cursor:"text",textDecoration:"none"}),""!==this.accountInfo.aliasName?(this.nickNameNode.text(this.accountInfo.aliasName),this.nickNameNode.parent().attr({href:"javascript:void(0)",title:this.accountInfo.aliasName_full}).css({cursor:"text",textDecoration:"none"})):this.nickNameNode.parent().addClass("fn-hide"),""!==this.accountInfo.realName?(this.emailNode.text(this.accountInfo.realName),this.emailNode.parent().attr({href:"javascript:void(0)",title:this.accountInfo.realName_full}).css({cursor:"text",textDecoration:"none"})):this.emailNode.parent().addClass("fn-hide"),""!==this.accountInfo.name?this.entName.text(this.accountInfo.name).attr("title",this.accountInfo.name_full):this.entName.parent().addClass("fn-hide"),this.lastLoginTime.text(this.accountInfo.lastTime),this.otherInfo.addClass("fn-hide"))}this.isRendered=!0}else this.error();this.emit("LOADED")},error:function(){this.loginInfoNodes.addClass("fnn-hide"),this.loginNode.removeClass("fnn-hide"),this.registerNode.removeClass("fnn-hide"),jQuery(".nickname-info",this.rootNode).addClass("fn-hide"),jQuery(".ent-name",this.rootNode).addClass("fn-hide"),jQuery(".related-account",this.rootNode).addClass("fn-hide"),jQuery(".last-login-time",this.rootNode).addClass("fn-hide"),jQuery(".other",this.rootNode).addClass("fn-hide"),this.errNode.removeClass("fn-hide")},getBalance:function(){this.load({action:"countBalance"},this.showBalance)},showBalance:function(a){a.navResult.result&&(this.amountNode.html(a.navResult.displayBlanace),d(this.rootNode).addClass("show"))},registerEvents:function(){var a=d(this.rootNode),b=this;a.hover(function(){b.isRendered||b.load({action:"loadEntInfo"}),a.addClass("hover")},function(){a.removeClass("hover"),a.removeClass("show")}),this.viewBalanceNode.click(this.getBalance),d("#J_reloadEnt").click(this.reload)}}).inherits(e.Cell);c.exports=h}),define("enterpriseportal/enterprise2/2.0.1/appDropList",["enterpriseportal/cellula/0.4.2/cellula","enterpriseportal/apps-sdk/0.0.2/sdk"],function(a,b,c){var d=a("enterpriseportal/cellula/0.4.2/cellula"),e=(a("enterpriseportal/apps-sdk/0.0.2/sdk"),jQuery),f=d._util,g=d.Class,h=d.Cell,i=d.Collection;d.Element;var j={};j.AppDropItem=new g("AppDropItem",{currentClass:"current",init:function(a){this.key||(this.key=this.__cid__),this.rootNode=this.rootNode||this.create(a)},template:'<li><a href="$-{url}" title="$-{name}"><span class="ellipsis">$-{name}</span></a></li>',create:function(a){var b=e(f.makeTpl(this.template,a));return this.highlight(a.code)&&b.addClass(this.currentClass),b[0]},highlight:function(a){if(!a)return!1;if(""==e("#J_globalMenuPath").val())return!1;var b,c,d;return b=e("#J_globalMenuPath").val().split("/"),3==b.length&&(c=b.shift()),d=b.shift(),a==d?!0:!1}}).inherits(h),j.AppDropList=new g("AppDropList",{role:"",source:"",baseURI:"",dropDown:void 0,timer:null,loadingBox:void 0,itemType:j.AppDropItem,collection:void 0,iframe:null,init:function(a){var b={};f.isString(a)&&(b.key=a),f.isObject(a)&&(b=a),f.isEmpty(b)||(this._super(b),this.dropDown=e(".app-drop-down",this.rootNode),this.loadingBox=e("._loading",this.rootNode),("operator"==this.role||"institutionoperator"==this.role||"master"==this.role||"account"==this.role)&&(this.collection=new i({type:this.itemType}),this._bindAll("showDropList","hideDropList"),this.registerEvent()))},load:function(a,b){e("ul",this.rootNode).html(""),SDK.request.send({url:this.source,method:"POST",params:{action:"loadProd"},callback:b||this.render,error:this.error,context:this})},reload:function(){this.load({action:"loadProd"})},error:function(){this.clearLoading(),e(this.rootNode).addClass("fn-hide")},loading:function(){var a=this;this.clearLoading(),this.timer=setInterval(function(){a.loadingBox.html(a.loadingBox.html()+"."),a.loadingBox.html().length>3&&a.loadingBox.html("")},200)},_createIframe:function(){return this.iframe=e('<iframe scrolling="no" frameborder="0" src="javascript:\'\'" style="border:none;position:absolute;"></iframe>')},clearLoading:function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.loadingBox.html("")},render:function(a){var b=a.navResult,c=a.navResult.navProdList;b&&b.result&&b.isAuthenticated?(this.clearLoading(),c&&c.length>0?(this.collection.clear(),this._createItem(c),this.renderItems(),this._show()):e(this.rootNode).addClass("fn-hide")):this.error()},renderItems:function(){var a;f.each(this.collection.get(),function(b){a=b.rootNode,a&&1===a.nodeType&&e("ul",this.rootNode).append(a)},this)},_createItem:function(a){var b;f.each(a,function(a){b=new this.itemType(a),this.addItem(b)},this)},addItem:function(a){return a||(a=new this.itemType(a)),a.__cid__||(a=new this.itemType(a)),this.follow(a),this.collection.push(a),a},showDropList:function(){this.dropDown.is(":hidden")&&(this.loading(),this.load())},hideDropList:function(){e(this.rootNode).removeClass("hover"),this.iframe&&this.iframe.hide()},_show:function(){e(this.rootNode).addClass("hover").removeClass("fn-hide");var a=parseInt(Math.round(this.rootNode.offsetHeight)-2),b=0;this.iframe||this._createIframe().appendTo(this.rootNode),this.iframe.css({zIndex:parseInt(this.dropDown.css("zIndex"))-1,top:a,left:b,width:this.dropDown[0].offsetWidth,height:this.dropDown[0].offsetHeight}).show()},registerEvent:function(){var a=this;e(a.rootNode).length&&(a.load(null,function(b){a.render(b),a.hideDropList()}),e(this.rootNode).hover(function(){a._show()},function(){a.hideDropList()}))}}).inherits(h),c.exports=j});
define("enterpriseportal/menu/0.0.5/menu",["$","enterpriseportal/cellula/0.4.2/cellula"],function(a,b,c){var d={},e=a("$"),f=a("enterpriseportal/cellula/0.4.2/cellula"),g=f._util;d.Menu=new f.Class("Menu",{itemModel:null,items:{},hideClass:"fn-hide",init:function(a){this._setup(a)},show:function(a){var b=e(this.rootNode);a||void 0===a?b.removeClass(this.hideClass):b.addClass(this.hideClass)},makeItems:function(a){if(g.isArray(a)){this.items={};var b,c,d=a.length;for(c=0;d>c;c++)b=a[c].id,b&&(this.items[b]=new this.itemModel({key:b,data:a[c]}))}return this.items},render:function(a){var b=e(this.rootNode);if(!g.isEmpty(this.makeItems(a))){b.html("");var c,d,f=a.length;for(d=0;f>d;d++)c=a[d].id,c&&b.append(this.items[c].node)}this.show(),this.emit("LOADED")},registerEvents:function(){}},"NEW").inherits(f.Cell),d.MenuItem=new f.Class("MenuItem",{template:"",node:null,init:function(a){this._super(a),this.node=e(g.parseTpl(this.template,a.data))}}).inherits(f.Element),c.exports=d});
define("enterpriseportal/itemList/0.0.4/itemList",["enterpriseportal/cellula/0.4.2/cellula"],function(a,b,c){var d={},e=a("enterpriseportal/cellula/0.4.2/cellula"),f=e._util,g=e.Class,h=e.Collection;d.Item=new g("Item",{conf:{},editNode:void 0,delNode:void 0,init:function(a,b){this._super(a),this.rootNode=this.rootNode||this.create(b),this.editNode=f.getElementsByClassName(this.conf.edit,this.rootNode)[0],this.delNode=f.getElementsByClassName(this.conf.del,this.rootNode)[0],this.key||(this.key=this.__cid__),this._bindAll("edit","remove"),this.registerEvents()},registerEvents:function(){this.editNode&&(this.editNode.onclick=this.edit),this.delNode&&(this.delNode.onclick=this.remove)},create:function(){},edit:function(){},remove:function(){}}).inherits(e.Cell),d.ItemList=new g("ItemList",{listNode:void 0,itemType:void 0,addNode:void 0,conf:{item:"item",add:"item-add",edit:"item-edit",del:"item-del",attribute:"data-itemlist",listNode:"listNode"},collection:void 0,init:function(a){var b={};f.isString(a)&&(b.key=a),f.isObject(a)&&(b=a),f.isEmpty(b)||(this._super(b),this._parseDomConf(this.rootNode),this.listNode=document.getElementById(this.conf.listNode),this.collection=new h({type:this.itemType}),this._createItems(this.conf),this.addNode=document.getElementById(this.conf.add)||f.getElementsByClassName(this.conf.add,this.rootNode)[0],this._bindAll("add"),this.registerEvents())},registerEvents:function(){this.addNode&&(this.addNode.onclick=this.add)},_parseDomConf:function(a){if(a&&1===a.nodeType){var b=f.trim(a.getAttribute(this.conf.attribute));if(b&&(b=b.split(" ")))for(var c;c=b.shift();)/:/.test(c)&&(c=c.split(":"),this.conf[c[0]]&&(this.conf[c[0]]=c[1]))}},_createItems:function(a){if(f.isObject(a)){var b,c=f.getElementsByClassName(a.item,this.rootNode);f.each(f.toArrayByLen(c),function(a){b=new this.itemType({rootNode:a,conf:this.conf}),this.addItem(b)},this)}},add:function(a){this.appendToList(a.__cid__?a:this.addItem(a))},appendToList:function(a){var b=a.rootNode;b&&1===b.nodeType&&this.listNode.appendChild(b)},addItem:function(a){return a||(a=new this.itemType({conf:this.conf})),a.__cid__||(a=new this.itemType({conf:this.conf},a)),this.listNode||1!==a.rootNode.nodeType||(this.listNode=a.rootNode.parentNode),this.follow(a),this.collection.push(a),a},render:function(){},removeItem:function(a){this.collection.remove(a),this.listNode.removeChild(a.rootNode)},receiver:function(a){if(a){var b=a.target,c=a.name.split(":")[1];switch(c){case"REMOVE":this.removeItem(b)}}},delItem:function(){}}).inherits(e.Cell),c.exports=d});
define("arale/dialog/1.2.3/dialog",["$","arale/overlay/1.1.3/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/overlay/1.1.3/mask","arale/templatable/0.9.1/templatable","gallery/handlebars/1.0.2/handlebars","./dialog.handlebars"],function(a,b,c){function d(a){null==a.attr("tabindex")&&a.attr("tabindex","-1")}function e(a){var b=a[0].contentWindow.document;return b.body.scrollHeight&&b.documentElement.scrollHeight?Math.min(b.body.scrollHeight,b.documentElement.scrollHeight):b.documentElement.scrollHeight?b.documentElement.scrollHeight:b.body.scrollHeight?b.body.scrollHeight:void 0}var f=a("$"),g=a("arale/overlay/1.1.3/overlay"),h=a("arale/overlay/1.1.3/mask"),i=a("arale/events/1.1.0/events"),j=a("arale/templatable/0.9.1/templatable"),k=g.extend({Implements:j,attrs:{template:a("./dialog.handlebars"),trigger:{value:null,getter:function(a){return f(a)}},classPrefix:"ui-dialog",content:{value:null,setter:function(a){return/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(a)&&(this._type="iframe"),a}},hasMask:!0,closeTpl:"×",width:500,height:null,initialHeight:300,effect:"none",zIndex:999,autoFit:!0,align:{value:{selfXY:["50%","50%"],baseXY:["50%","50%"]},getter:function(a){return this.element.height()>f(window).height()?{selfXY:["50%","0"],baseXY:["50%","0"]}:a}}},parseElement:function(){this.set("model",{classPrefix:this.get("classPrefix")}),k.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.contentElement.css({background:"#fff",height:"100%",zoom:1}),this.$("[data-role=close]").hide()},events:{"click [data-role=close]":function(a){a.preventDefault(),this.hide()}},show:function(){return"iframe"===this._type&&(!this.get("height")&&this.contentElement.css("height",this.get("initialHeight")),this._showIframe()),k.superclass.show.call(this),this},hide:function(){return"iframe"===this._type&&this.iframe&&(this.iframe.attr({src:"javascript:'';"}),this.iframe.remove(),this.iframe=null),k.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.element.remove(),this._hideMask(),clearInterval(this._interval),k.superclass.destroy.call(this)},setup:function(){k.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),d(this.element),d(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},_onRenderContent:function(a){if("iframe"!==this._type){var b;try{b=f(a)}catch(c){b=[]}b[0]?this.contentElement.empty().append(b):this.contentElement.empty().html(a),this._setPosition()}},_onRenderCloseTpl:function(a){""===a?this.$("[data-role=close]").html(a).hide():this.$("[data-role=close]").html(a).show()},_onRenderVisible:function(a){a?"fade"===this.get("effect")?this.element.fadeIn(300):this.element.show():this.element.hide()},_setupTrigger:function(){this.delegateEvents(this.get("trigger"),"click",function(a){a.preventDefault(),this.activeTrigger=f(a.currentTarget),this.show()})},_setupMask:function(){var a=this;h._dialogs=h._dialogs||[],this.after("show",function(){if(this.get("hasMask")){h.set("zIndex",a.get("zIndex")).show(),h.element.insertBefore(a.element);for(var b=!1,c=0;c<h._dialogs.length;c++)h._dialogs[c]===a&&(b=!0);b||h._dialogs.push(a)}}),this.after("hide",this._hideMask)},_hideMask:function(){if(this.get("hasMask"))if(h._dialogs&&h._dialogs.pop(),h._dialogs&&h._dialogs.length>0){var a=h._dialogs[h._dialogs.length-1];h.set("zIndex",a.get("zIndex")),h.element.insertBefore(a.element)}else h.hide()},_setupFocus:function(){this.after("show",function(){this.element.focus()}),this.after("hide",function(){this.activeTrigger&&this.activeTrigger.focus()})},_setupKeyEvents:function(){this.delegateEvents(f(document),"keyup",function(a){27===a.keyCode&&this.get("visible")&&this.hide()})},_showIframe:function(){var a=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){a.get("visible")&&(a.get("autoFit")&&(clearInterval(a._interval),a._interval=setInterval(function(){a._syncHeight()},300)),a._syncHeight(),a._setPosition(),a.trigger("complete:show"))})},_fixUrl:function(){var a=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return a.shift(),a[1]=(a[1]&&"?"!==a[1]?a[1]+"&":"?")+"t="+(new Date).getTime(),a.join("")},_createIframe:function(){var a=this;this.iframe=f("<iframe>",{src:"javascript:'';",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),i.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){a.hide()})},_syncHeight:function(){var a;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{this._errCount=0,a=e(this.iframe)+"px"}catch(b){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(a=this.get("initialHeight"),clearInterval(this._interval),delete this._interval)}this.contentElement.css("height",a),this.element[0].className=this.element[0].className}}});c.exports=k,c.exports.outerBoxClass="arale-dialog-1_2_3"}),define("arale/dialog/1.2.3/dialog.handlebars",["gallery/handlebars/1.0.2/runtime"],function(a,b,c){var d=a("gallery/handlebars/1.0.2/runtime"),e=d.template;c.exports=e(function(a,b,c,d,e){this.compilerInfo=[3,">= 1.0.0-rc.4"],c=c||{};for(var f in a.helpers)c[f]=c[f]||a.helpers[f];e=e||{};var g,h="",i="function",j=this.escapeExpression;return h+='<div class="',(g=c.classPrefix)?g=g.call(b,{hash:{},data:e}):(g=b.classPrefix,g=typeof g===i?g.apply(b):g),h+=j(g)+'">\n    <a class="',(g=c.classPrefix)?g=g.call(b,{hash:{},data:e}):(g=b.classPrefix,g=typeof g===i?g.apply(b):g),h+=j(g)+'-close" title="关闭本框" href="javascript:;" data-role="close"></a>\n    <div class="',(g=c.classPrefix)?g=g.call(b,{hash:{},data:e}):(g=b.classPrefix,g=typeof g===i?g.apply(b):g),h+=j(g)+'-content" data-role="content"></div>\n</div>\n'})});
