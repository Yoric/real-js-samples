if (self.CavalryLogger) { CavalryLogger.start_js(["QntfC"]); }

__d("FBDraggableBar.react",["cx","invariant","DOMDimensions","React","ReactDOM","Rect","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$6=function(a){a&&a.init(this)}.bind(this),this.onGrab=function(a,c){this.$1=a;this.$2=c;a=b("DOMDimensions").getElementDimensions(this.$2);c=a.width;a=a.height;this.setState({elementWidth:c,elementHeight:a});this.onDrag()}.bind(this),this.onDrag=function(){var a=new(b("Rect"))(this.$2);a=(a.l+a.r)/2;a=this.$7(a);this.setState({toIndex:a})}.bind(this),this.onDrop=function(){var a=this.$1;a!==void 0&&a!==null||h(0,3153);var b=this.state.toIndex;b!==void 0&&b!==null||h(0,3154);this.$8();this.props.onReorder&&this.props.onReorder(a,b);this.$4()}.bind(this),this.onCancelDrag=function(){this.$8()}.bind(this),this.state={toIndex:null,elementWidth:null,elementHeight:null}}a.prototype.$4=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this);!a&&h(0,3155);a=a.childNodes;var c=[];for(var d=0;d<a.length;d++){var e=a[d];e instanceof Element||h(0,3156);c.push(new(b("Rect"))(e))}this.$3=c};a.prototype.$5=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this);a instanceof Element||h(0,3157);var c=a.childNodes,d=0;for(var e=0;e<c.length;e++){var f=c[e];f instanceof Element||h(0,3156);f=new(b("Rect"))(f);d+=f.r-f.l}a.clientWidth>=d||h(0,3158)};a.prototype.componentDidMount=function(){this.$5(),this.$4()};a.prototype.render=function(){var a=b("React").Children.map(this.props.children,function(a,c){c={ref:this.$6,index:c};return b("React").cloneElement(a,c)}.bind(this)),c=this.state.toIndex;if(c!==null&&c!==void 0){var d=b("React").createElement("div",{className:"_63ax",key:"placeholder",style:{width:this.state.elementWidth,height:this.state.elementHeight}});c=c<=this.$1?c:c+1;a.splice(c,0,d)}return b("React").createElement("span",{className:b("joinClasses")(this.props.className,"_42l3")},a)};a.prototype.$7=function(a){for(var b=0;b<this.$3.length;b++){var c=this.$3[b];if(c.l<=a&&a<c.r)return b}return this.$3.length};a.prototype.$8=function(){delete this.$1,delete this.$2,this.setState({elementWidth:null,elementHeight:null,toIndex:null})};e.exports=a}),null);
__d("FBDraggableItem.react",["cx","invariant","Draggable","Event","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Keys","React","ReactDOM","Rect","getScrollPosition","getViewportDimensions","nullthrows"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=10,k=250;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={dragging:!1},this.$6=function(a){if(!a)return;a=b("ReactDOM").findDOMNode(a);a instanceof Element||h(0,2430);var c=b("ReactDOM").findDOMNode(this);c instanceof Element||h(0,2431);this.$3=a;this.$4=c}.bind(this),this.init=function(a){this.$1=a}.bind(this),this.$9=function(){if(this.state.dragging)return;var a=this.props,c=a.onGrab;a=a.index;c&&(a||a===0?c(a):c());this.$5=b("Event").listen(document,"keydown",function(a){a.keyCode===b("Keys").ESC&&(this.$12(),a.preventDefault())}.bind(this));this.setState({dragging:!0});this.$1.onGrab(b("nullthrows")(this.props.index),this.$4)}.bind(this),this.$10=function(){var a=this.$4.parentNode;if(!(a instanceof Element))return;a=new(b("Rect"))(a);var c=b("getViewportDimensions")(),d=b("getScrollPosition")(window),e=Math.max(c.width,j);e=new(b("Rect"))(d.y,Math.min(e,a.r+k),c.height+d.y,Math.max(0,a.l-k));this.$2&&this.$2.setBoundingBox(e);this.$1.onDrag()}.bind(this),this.$11=function(){this.$13(),this.$1.onDrop()}.bind(this),c}a.prototype.$7=function(){"use strict";var a=b("React").Children.map(this.props.children,function(a){return a});a.length>0&&a.length<=2||h(0,2432);return a};a.prototype.componentDidMount=function(){"use strict";this.$7(),this.$8(!0)};a.prototype.componentWillUnmount=function(){"use strict";this.$8(!1)};a.prototype.render=function(){"use strict";var a=this.$7(),c=a.length!=2?null:b("React").createElement(b("FBOverlayElement.react"),{className:"_13uq",horizontal:"right",vertical:"top"},b("React").createElement("div",null,a[1]));return b("React").createElement(b("FBOverlayContainer.react"),{className:"_2rh6"+(this.state.dragging?" _2rjy":"")},b("React").createElement(b("FBOverlayBase.react"),null,a[0]),b("React").createElement(b("FBOverlayElement.react"),{horizontal:"left",ref:this.$6,vertical:"fit"},b("React").createElement("div",{className:"_2rjz"})),c)};a.prototype.$8=function(a){"use strict";var c=this.$2;a&&!c?this.$2=new(b("Draggable"))(this.$4).setNamespace("FBDraggableItem").setUseAbsolute(!0).setGrabHandler(this.$9).setDragHandler(this.$10).setDropHandler(this.$11).addHandle(this.$3):!a&&c&&(c.active&&this.$12(),c.destroy(),this.$2=null)};a.prototype.$12=function(){"use strict";this.$2&&this.$2.killDrag(),this.$13(),this.$1.onCancelDrag()};a.prototype.$13=function(){"use strict";this.$2&&this.$2.resetPosition(),this.setState({dragging:!1}),this.$5&&this.$5.remove(),delete this.$5};e.exports=a}),null);
__d("videoPageContextualColorFetchUpdatedThemeColorQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"pageID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"pageID",type:"ID!"}],c={kind:"ScalarField",alias:null,name:"video_page_theme_color",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"videoPageContextualColorFetchUpdatedThemeColorQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:b,concreteType:"Page",plural:!1,selections:[c]}]},operation:{kind:"Operation",name:"videoPageContextualColorFetchUpdatedThemeColorQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:b,concreteType:"Page",plural:!1,selections:[c,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"videoPageContextualColorFetchUpdatedThemeColorQuery",id:"1960926613938874",text:null,metadata:{}}}}();e.exports=a}),null);
__d("PagesCoverVideoTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesCoverVideoLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesCoverVideoLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesCoverVideoLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setIsFinished=function(a){this.$1.is_finished=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setProgress=function(a){this.$1.progress=a;return this};a.prototype.setStage=function(a){this.$1.stage=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTimeUs=function(a){this.$1.time_us=a;return this};a.prototype.setType=function(a){this.$1.type=a;return this};a.prototype.setVideoContainerType=function(a){this.$1.video_container_type=a;return this};a.prototype.setVideoID=function(a){this.$1.video_id=a;return this};a.prototype.setVideoStatus=function(a){this.$1.video_status=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={is_finished:!0,page_id:!0,progress:!0,stage:!0,time:!0,time_us:!0,type:!0,video_container_type:!0,video_id:!0,video_status:!0,weight:!0};e.exports=a}),null);
__d("EventTourBadgeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NO_TOUR:"no_tour",TOUR_BADGE_HIDDEN:"tour_badge_hidden",TOUR_BADGE_SHOWN:"tour_badge_shown"})}),null);
__d("PagesCoverAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOADING:"loading",NEW_COVER_DATA:"new_cover_data",COVER_REMOVING:"cover_removing",PHOTO_UPLOADING:"photo_uploading",PHOTO_PREVIEWING:"photo_previewing",PHOTO_SAVING:"photo_saving",PHOTO_SAVED:"photo_saved",PHOTO_CANCEL:"photo_cancel",PHOTO_REMOVED:"photo_removed",VIDEO_START_UPLOAD:"video_start_upload",VIDEO_UPLOADING:"video_uploading",VIDEO_ENCODING:"video_encoding",VIDEO_REPOSITIONED:"video_repositioned",VIDEO_PREVIEWING:"video_previewing",VIDEO_CHOOSING_THUMBNAIL:"video_choosing_thumbnail",VIDEO_PUBLISHING:"video_publishing",VIDEO_PUBLISHED:"video_published",VIDEO_CANCELLING:"video_cancelling",VIDEO_INVALID_UPLOAD:"video_invalid_upload",SLIDESHOW_EDIT:"slideshow_edit",SLIDESHOW_PHOTO_PREVIEWING:"slideshow_photo_previewing",SLIDESHOW_VIDEO_START_UPLOAD:"slideshow_video_start_upload",SLIDESHOW_VIDEO_UPLOADING:"slideshow_video_uploading",SLIDESHOW_VIDEO_ENCODING:"slideshow_video_encoding",SLIDESHOW_VIDEO_ENCODE_FINISHED:"slideshow_video_encode_finished",SLIDESHOW_VIDEO_SETTING_CONFIRMED:"slideshow_video_setting_confirmed",SLIDESHOW_VIDEO_UPLOADING_FAILED:"slideshow_video_uploading_failed",SLIDESHOW_VIDEO_POSTING_FAILED:"slideshow_video_encoding_failed",SLIDESHOW_CHANGE_CAROUSEL_INDEX:"slideshow_change_carousel_index",SLIDESHOW_PHOTO_UPLOADING:"slideshow_photo_uploading",SLIDESHOW_ITEM_REPOSITIONED:"slideshow_item_repositioned",SLIDESHOW_VIDEO_REPOSITIONED:"slideshow_video_repositioned",SLIDESHOW_PHOTO_REMOVED:"slideshow_photo_removed",SLIDESHOW_EDITING_CANCELLED:"slideshow_editing_cancelled",SLIDESHOW_SAVING:"slideshow_saving",SLIDESHOW_CHANGE_ORDER:"slideshow_change_order",SLIDESHOW_NUX_TOUR_ELEMENT_LOADED:"slideshow_nux_tour_element_loaded",SLIDESHOW_NUX_TOUR_FINISHED:"slideshow_nux_tour_finished",SLIDESHOW_TOGGLE_CONTENT_SWITCHER:"slideshow_toggle_content_switcher",SLIDESHOW_PREFILLED_PHOTO_LOADED:"slideshow_prefilled_photo_loaded",SLIDESHOW_CLICK_CANCEL_BUTTON:"slideshow_click_cancel_button",SLIDESHOW_EDITABLE_ITEM_LOADED:"slideshow_editable_item_loaded",LIVE_VIDEO_ENABLE:"live_video_enable",LIVE_VIDEO_DISABLE:"live_video_disable",ON_TOUR_BADGE_UPDATED:"on_tour_badge_updated"})}),null);
__d("PagesCoverDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationReactDispatcher"))({strict:!0})}),null);
__d("XPagesCoverCancelEditAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_delete_media/",{})}),null);
__d("PagesCoverCoreStore",["AsyncRequest","EventTourBadgeEnum","FluxReduceStore","PagesCoverAction","PagesCoverDispatcher","PagesCoverType","XPagesCoverCancelEditAsyncController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{canViewerEditProfile:!1,currentCoverType:b("PagesCoverType").COVER_PHOTO,hasCoverSet:!1,isEditMode:!1,newUploadPhotoIDs:[],newUploadVideoIDs:[],pageID:"",previousCoverType:b("PagesCoverType").COVER_PHOTO,shouldShowEditMenuForAdmins:!0,shouldShowLoadingOverlay:!1,eventTourBadgeInfo:{tourID:null,title:null,subtitle:null,eventTourBadgeStatus:b("EventTourBadgeEnum").NO_TOUR,shouldShowNux:!1},shouldHideCoverPhotoEditOption:!1,disableCoverVideoUploadOption:!1}};a.prototype.getEventTourBadgeInfo=function(){return this.getState().eventTourBadgeInfo};a.prototype.deleteNewUploadMedia=function(a,c){new(b("AsyncRequest"))().setMethod("POST").setURI(b("XPagesCoverCancelEditAsyncController").getURIBuilder().getURI()).setData({page_id:a,photo_id_vector:c}).send()};a.prototype.reduce=function(a,c){__p&&__p();var d=null;switch(c.type){case b("PagesCoverAction").NEW_COVER_DATA:var e=c.data,f=e.coreData;e=e.pageID;f&&(d=babelHelpers["extends"]({},f,{isEditMode:!1,newUploadPhotoIDs:[],newUploadVideoIDs:[],pageID:e,previousCoverType:f.currentCoverType}));break;case b("PagesCoverAction").PHOTO_SAVED:case b("PagesCoverAction").PHOTO_REMOVED:d=babelHelpers["extends"]({},a,{shouldShowEditMenuForAdmins:!0});break;case b("PagesCoverAction").PHOTO_UPLOADING:d=babelHelpers["extends"]({},a,{shouldShowEditMenuForAdmins:!1,shouldShowLoadingOverlay:a.currentCoverType!==b("PagesCoverType").COVER_PHOTO});break;case b("PagesCoverAction").PHOTO_PREVIEWING:d=babelHelpers["extends"]({},a,{previousCoverType:a.currentCoverType,currentCoverType:b("PagesCoverType").COVER_PHOTO,shouldShowEditMenuForAdmins:!1,shouldShowLoadingOverlay:!1});if(c.data.isNewUpload){e=Array.from(a.newUploadPhotoIDs);e.push(c.data.coverPhotoData.id);d.newUploadPhotoIDs=e}break;case b("PagesCoverAction").PHOTO_SAVING:d=babelHelpers["extends"]({},a,{shouldShowEditMenuForAdmins:!1,currentCoverType:b("PagesCoverType").LOADING});break;case b("PagesCoverAction").VIDEO_INVALID_UPLOAD:d=babelHelpers["extends"]({},a,{shouldShowEditMenuForAdmins:!a.isEditMode});break;case b("PagesCoverAction").VIDEO_START_UPLOAD:d=babelHelpers["extends"]({},a,{currentCoverType:b("PagesCoverType").COVER_VIDEO,isEditMode:!0,previousCoverType:a.currentCoverType,shouldShowEditMenuForAdmins:!1});break;case b("PagesCoverAction").VIDEO_UPLOADING:case b("PagesCoverAction").VIDEO_ENCODING:d=babelHelpers["extends"]({},a,{shouldShowEditMenuForAdmins:!1});break;case b("PagesCoverAction").VIDEO_CHOOSING_THUMBNAIL:d=babelHelpers["extends"]({},a);break;case b("PagesCoverAction").VIDEO_PUBLISHING:d=babelHelpers["extends"]({},a,{isEditMode:!1,shouldShowEditMenuForAdmins:!1,currentCoverType:b("PagesCoverType").LOADING});break;case b("PagesCoverAction").VIDEO_PREVIEWING:d=babelHelpers["extends"]({},a,{isEditMode:!0,shouldShowEditMenuForAdmins:!1});f=c.data;e=f.isNewUpload;f=f.videoID;if(e){e=Array.from(a.newUploadVideoIDs);e.push(f);d.newUploadVideoIDs=e}else d.previousCoverType=a.currentCoverType,d.currentCoverType=b("PagesCoverType").COVER_VIDEO;break;case b("PagesCoverAction").PHOTO_CANCEL:case b("PagesCoverAction").VIDEO_CANCELLING:d=babelHelpers["extends"]({},a,{currentCoverType:a.previousCoverType,isEditMode:!1,shouldShowEditMenuForAdmins:!1,shouldShowLoadingOverlay:!0});this.deleteNewUploadMedia(a.pageID,a.newUploadPhotoIDs);break;case b("PagesCoverAction").VIDEO_PUBLISHED:d=babelHelpers["extends"]({},a,{shouldShowEditMenuForAdmins:!0});break;case b("PagesCoverAction").SLIDESHOW_EDIT:d=babelHelpers["extends"]({},a,{isEditMode:!0,previousCoverType:a.currentCoverType,shouldShowEditMenuForAdmins:!1,currentCoverType:b("PagesCoverType").COVER_SLIDESHOW});break;case b("PagesCoverAction").SLIDESHOW_SAVING:d=babelHelpers["extends"]({},a,{isEditMode:!1});break;case b("PagesCoverAction").SLIDESHOW_PHOTO_PREVIEWING:if(c.data.isNewUpload){f=Array.from(a.newUploadPhotoIDs);f.push(c.data.itemData.carouselMediaData.photoData.coverPhotoData.id);d=babelHelpers["extends"]({},a,{newUploadPhotoIDs:f})}break;case b("PagesCoverAction").SLIDESHOW_VIDEO_ENCODE_FINISHED:if(c.data){e=c.data.videoData;f=Array.from(a.newUploadVideoIDs);f.push(e.videoID);d=babelHelpers["extends"]({},a,{newUploadVideoIDs:f})}break;case b("PagesCoverAction").SLIDESHOW_EDITING_CANCELLED:d=babelHelpers["extends"]({},a,{currentCoverType:a.previousCoverType,isEditMode:!1,newUploadPhotoIDs:[],newUploadVideoIDs:[],shouldShowEditMenuForAdmins:!0});this.deleteNewUploadMedia(a.pageID,a.newUploadPhotoIDs);break;case b("PagesCoverAction").COVER_REMOVING:d=babelHelpers["extends"]({},a,{shouldShowEditMenuForAdmins:!1,shouldShowLoadingOverlay:!0});break;case b("PagesCoverAction").ON_TOUR_BADGE_UPDATED:d=babelHelpers["extends"]({},a,{eventTourBadgeInfo:c.data,shouldShowLoadingOverlay:!1});break;case b("PagesCoverAction").LOADING:d=babelHelpers["extends"]({},a,{shouldShowLoadingOverlay:!0});break}return d||a};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("PagesCoverDispatcher"))}),null);
__d("PageOnTourOverlay.react",["cx","EventActionContext","EventsActionsLogger","EventTourBadgeEnum","FBJSON","FluxContainer","Link.react","PagesCoverCoreStore","React","XEventsTourPermalinkController","XUIText.react","joinClasses","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$3=function(){this.$2(b("EventsActionsLogger").Type.CLICK)}.bind(this),c}a.getStores=function(){return[b("PagesCoverCoreStore")]};a.calculateState=function(){return b("PagesCoverCoreStore").getEventTourBadgeInfo()};a.prototype.componentDidMount=function(){this.$1()&&this.$2(b("EventsActionsLogger").Type.VIEW)};a.prototype.$2=function(a){b("EventsActionsLogger").log(null,{acontext:this.$4(),target:b("EventsActionsLogger").Target.TOUR,type:a,mechanism:b("EventsActionsLogger").Mechanism.PAGE_COVER_AREA,surface:b("EventsActionsLogger").Surface.PAGE,target_id:b("nullthrows")(this.state.tourID)})};a.prototype.$1=function(){var a=this.state,c=a.tourID,d=a.title;a=a.eventTourBadgeStatus;return a===b("EventTourBadgeEnum").TOUR_BADGE_SHOWN&&c!==null&&d!==null};a.prototype.$4=function(){return b("EventActionContext").addActionHistoryEntry(b("EventActionContext").getNewActionContext(),{surface:b("EventsActionsLogger").Surface.PAGE,mechanism:b("EventsActionsLogger").Mechanism.PAGE_COVER_AREA,extra_data:b("FBJSON").stringify({tourID:this.state.tourID})})};a.prototype.render=function(){if(!this.$1())return null;var a=this.state,c=a.title,d=a.subtitle;a=a.tourID;var e="_ncd";this.props.className&&(e=b("joinClasses")(e,this.props.className));a=b("XEventsTourPermalinkController").getURIBuilder().setFBID("tour_id",a).setString("acontext",b("EventActionContext").toString(this.$4())).getURI();return b("React").createElement("div",{className:e},b("React").createElement(b("Link.react"),{href:a,onClick:this.$3},b("React").createElement(b("XUIText.react"),{className:"_4yv7",color:"white",size:"header1"},c)),b("React").createElement("br",null),b("React").createElement(b("XUIText.react"),{className:"_nce _4yv7",size:"header3"},d))};e.exports=b("FluxContainer").create(a)}),null);
__d("PagesCoverLoadingScreen.react",["cx","CenteredContainer.react","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!0,vertical:!0},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"})),d=a.height;a=a.width;return d&&a?b("React").createElement("div",{style:{height:d,width:a}},c):b("React").createElement("div",{className:"_2rc-"},c)};e.exports=a}),null);
__d("XPagesCoverOverlayEditAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_overlay_edit/",{})}),null);
__d("XPagesCoverOverlayRemoveAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_overlay_remove/",{})}),null);
__d("PagesCoverOverlay.react",["ix","cx","fbt","AsyncRequest","Image.react","LayerFadeOnHide","PageCallToActionRef","PageCTAAction.react","PagesEventObserver","PagesEventType","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React","ShimButton.react","SimpleNUXMessage","SimpleNUXMessageTypes","XPagesCoverOverlayEditAsyncController","XPagesCoverOverlayRemoveAsyncController","XUIAmbientNUX.react","XUIText.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=100;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.$7=function(a){a=a.target;a instanceof HTMLTextAreaElement&&a.value.length<=k&&this.setState({newDescription:a.value})}.bind(this),this.$11=function(){this.setState({isEditing:!0,shouldShowNUX:!1});return}.bind(this),this.$9=function(){this.setState({isEditing:!1,newDescription:this.state.currentDescription||""})}.bind(this),this.$10=function(){var a=null,c=null;!this.state.newDescription?(a=b("XPagesCoverOverlayRemoveAsyncController").getURIBuilder().getURI(),c=!0):(a=b("XPagesCoverOverlayEditAsyncController").getURIBuilder().getURI(),c=this.state.newDescription);new(b("AsyncRequest"))().setURI(a).setData({page_id:this.props.pageID,description:c}).setHandler(function(a){a.payload.description!==null&&this.setState({isEditing:!1,newDescription:a.payload.description||"",currentDescription:a.payload.description})}.bind(this)).send()}.bind(this),this.$13=function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").PAGES_COVER_DESCRIPTION_CREATION_NUX),this.setState({shouldShowNUX:!1})}.bind(this),this.state={isEditing:!1,newDescription:this.props.description||"",currentDescription:this.props.description,shouldShowNUX:!1}}a.prototype.componentDidMount=function(){this.$1()&&this.setState({shouldShowNUX:!0})};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(this.props.description===a.description)return;this.setState({newDescription:a.description||"",currentDescription:a.description})};a.prototype.render=function(){var a=this.props.description;a=!!a||this.$2();return!a&&!this.props.isEditable?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_4i3o"}),b("React").createElement("div",{className:"_4i3n"},this.$3(),this.$4(),this.$5(),this.$6()))};a.prototype.$3=function(){if(this.state.isEditing||!this.state.currentDescription)return null;b("PagesLogger").log(this.props.pageID,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGE_COVER_DESCRIPTION,b("PageCallToActionRef").PAGES_COVER_AREA_SURFACE);b("PagesEventObserver").notify(b("PagesEventType").COVER_AREA_DESCRIPTION_IMPRESSION,this.props.pageID);var a=this.$2();return b("React").createElement("div",{className:"_4i46"+(a?" _4i47":"")+(a?"":" _4i4d")},b("React").createElement(b("XUIText.react"),null,this.state.currentDescription))};a.prototype.$4=function(){if(this.$2()){b("PagesLogger").log(this.props.pageID,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGE_COVER_CTA_BUTTON,b("PageCallToActionRef").PAGES_COVER_AREA_SURFACE);b("PagesEventObserver").notify(b("PagesEventType").COVER_AREA_CTA_IMPRESSION,this.props.pageID);return b("React").createElement(b("PageCTAAction.react"),babelHelpers["extends"]({},this.props.primaryButton,{className:"_1kp2 _4i44 _291t",surface:b("PageCallToActionRef").PAGES_COVER_AREA_SURFACE}))}return null};a.prototype.$5=function(){if(!this.props.isEditable||!this.state.isEditing)return null;var a=this.$2();return b("React").createElement("div",null,b("React").createElement("textarea",{ref:function(a){a&&a.focus()},className:"_4i4e"+(a?" _4i47":"")+(a?"":" _4i4d"),maxLines:"3",value:this.state.newDescription,onChange:this.$7,onKeyDown:this.$8}))};a.prototype.$6=function(){if(!this.props.isEditable||this.props.isPreviewMode||this.props.isLoading)return null;return this.state.isEditing?b("React").createElement("div",null,b("React").createElement("div",{className:"_4i4f"},b("React").createElement("div",{className:"_4i4g"},b("React").createElement(b("XUIText.react"),null,i._("{current_char_num}\/{max_char_num}",[i._param("current_char_num",this.state.newDescription.length),i._param("max_char_num",k)])))),b("React").createElement("div",{className:"_4i4p"},b("React").createElement(b("ShimButton.react"),{className:"_4i4r",onClick:this.$9},b("React").createElement(b("Image.react"),{src:g("127524")})),b("React").createElement(b("ShimButton.react"),{className:"_4i4r",onClick:this.$10},b("React").createElement(b("Image.react"),{src:g("114570")})))):b("React").createElement(b("ShimButton.react"),{className:"_4i4p",onClick:this.$11},b("React").createElement("div",{className:"_4i4r"},b("React").createElement(b("Image.react"),{src:g("115342")})),b("React").createElement("div",{className:"_4i4s",ref:"coverEditButton"},b("React").createElement(b("XUIText.react"),null,i._("Edit"))),this.$12())};a.prototype.$8=function(a){a.keyCode==13&&a.preventDefault()};a.prototype.$2=function(){return!!this.props.primaryButton&&this.props.primaryButton.__typename==="PageCTAAction"};a.prototype.$12=function(){var a=b("React").createElement("div",{className:"_308b"},i._("Make it easy for people to see what's important and take action on your Page. You can edit or remove this new description anytime, and it won't affect other descriptions on your Page."));return b("React").createElement(b("XUIAmbientNUX.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},contextRef:function(){return this.refs.coverEditButton}.bind(this),onCloseButtonClick:this.$13,position:"above",alignment:"right",shown:this.state.shouldShowNUX},a)};a.prototype.$1=function(){return this.props.isEditable?!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").PAGES_COVER_DESCRIPTION_CREATION_NUX):!1};e.exports=a}),null);
__d("PagesCoverPhotoLink.react",["cx","Link.react","React","XPhotoPermalinkController"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return a.coverPhotoData.uri===null||a.isLoading||a.isPreviewMode?b("React").Children.only(a.children):b("React").createElement(b("Link.react"),{className:"_5q-4",href:b("XPhotoPermalinkController").getURIBuilder().setInt("photo_id",a.coverPhotoData.id).setString("vanity",a.pageID).getURI(),rel:"theater"},a.children)};e.exports=a}),null);
__d("XPagesCoverPhotoSaveAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_photo_save/",{focus_x:{type:"Float",required:!0},focus_y:{type:"Float",required:!0},page_id:{type:"FBID",required:!0},photo_id:{type:"FBID",required:!0}})}),null);
__d("XPagesCoverReloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_reload/",{page_id:{type:"FBID",required:!0}})}),null);
__d("videoPageContextualColorFetchUpdatedThemeColor",["PagesHeaderDispatcher","PagesHeaderPayloadType","RelayFBEnvironment","RelayModern","promiseDone","videoPageContextualColorFetchUpdatedThemeColorQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("RelayModern").graphql;var g=b("RelayModern").fetchQuery,h=function(){return b("videoPageContextualColorFetchUpdatedThemeColorQuery.graphql")};function a(a){a={pageID:a};b("promiseDone")(g(b("RelayFBEnvironment"),h,a,{force:!0}),function(a){a=(a=a.page)==null?void 0:a.video_page_theme_color;a&&b("PagesHeaderDispatcher").dispatch({type:b("PagesHeaderPayloadType").UPDATE_VIDEO_PAGE_THEME_COLOR,videoPageThemeColor:"#"+a.substring(2)})})}e.exports=a}),null);
__d("PagesCoverPhoto.react",["cx","ActorURI","AsyncRequest","PagesCoverAction","PagesCoverDispatcher","PagesCoverOverlay.react","PagesCoverPhotoLink.react","ProfileHeaderCoverPhoto.react","React","XPagesCoverPhotoSaveAsyncController","XPagesCoverReloadController","gkx","videoPageContextualColorFetchUpdatedThemeColor"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){this.$1=a}.bind(this),this.$5=function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").PHOTO_CANCEL}),new(b("AsyncRequest"))().setURI(b("XPagesCoverReloadController").getURIBuilder().setFBID("page_id",this.props.pageID).getURI()).send()}.bind(this),this.$6=function(){if(!this.$1)return;var a=this.$1.getDimensions().getRect().center;b("PagesCoverDispatcher").dispatch({data:{coverPhotoData:babelHelpers["extends"]({},this.props.coverPhotoData,{focus:{height:a.y,width:a.x}})},type:b("PagesCoverAction").PHOTO_SAVING});new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XPagesCoverPhotoSaveAsyncController").getURIBuilder().setFloat("focus_x",a.x).setFloat("focus_y",a.y).setFBID("page_id",this.props.pageID).setFBID("photo_id",this.props.coverPhotoData.id).getURI(),this.props.pageID)).setHandler(function(){b("gkx")("678704")&&b("videoPageContextualColorFetchUpdatedThemeColor")(this.props.pageID)}.bind(this)).send()}.bind(this),c}a.prototype.$3=function(){return this.props.coverPhotoData.uri!==null};a.prototype.$4=function(){return b("React").createElement("div",{className:"_5_yy _44oa"})};a.prototype.render=function(){return!this.$3()&&!this.props.isEditable?null:b("React").createElement("div",{className:"_2g7o"},b("React").createElement(b("PagesCoverPhotoLink.react"),this.props,b("React").createElement("div",null,b("React").createElement(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:this.props.coverPhotoData,emptyCover:this.$4(),height:this.props.renderedHeight,isLoading:this.props.isLoading,previewCancelHandler:this.$5,previewMode:this.props.isPreviewMode,previewSaveHandler:this.$6,ref:this.$2,width:this.props.renderedWidth}))),this.props.isOverlayEnabled?b("React").createElement(b("PagesCoverOverlay.react"),{description:this.props.pageDescription,isEditable:this.props.isEditable,isLoading:this.props.isLoading,isPreviewMode:this.props.isPreviewMode,pageID:this.props.pageID,primaryButton:this.props.pagePrimaryButton}):null)};e.exports=a}),null);
__d("PagesCoverSlideshowActionCreator",["fbt","PagesCoverAction","PagesCoverDispatcher","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React","SimpleXUIDialog","XUIDialogButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=-1,i={enterEditMode:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_EDIT}),b("PagesLogger").log(a,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").PAGE_COVER_SLIDESHOW,null,[],{event_name:"click_edit"})},changeCurrentIndex:function(a,c){if(h===c)return;b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_CHANGE_CAROUSEL_INDEX,data:{currentIndex:c}});b("PagesLogger").log(a,b("PagesLoggerEventEnum").SCROLL,b("PagesLoggerEventTargetEnum").PAGE_COVER_SLIDESHOW);h=c},reorderSlideshowItems:function(a,c,d){a!==c&&b("PagesLogger").log(d,b("PagesLoggerEventEnum").DRAG,b("PagesLoggerEventTargetEnum").PAGE_COVER_SLIDESHOW,null,[],{event_name:"reorder_slideshow_items"}),b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_CHANGE_ORDER,data:{fromIndex:a,toIndex:c}})},onPhotoUploading:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_PHOTO_UPLOADING,data:{uploadingIndex:a}})},onVideoRepositioned:function(a,c,d){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_REPOSITIONED,data:{itemRepositionedIndex:a,offsetType:c,offsetValue:d}})},onItemRepositioned:function(a,c,d){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_ITEM_REPOSITIONED,data:{itemRepositionedIndex:d}})},onPhotoRemoved:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_PHOTO_REMOVED,data:{removedIndex:a}})},confirmCancel:function(a){if(!a)return;b("SimpleXUIDialog").showEx(g._("If you go back, your changes won't be saved."),g._("Leave Slideshow?"),b("React").createElement("div",null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:g._("Leave Slideshow"),onClick:i.onEditingCancelled,use:"default"}),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:g._("Cancel"),use:"confirm"})))},onEditingCancelled:function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_EDITING_CANCELLED})},onSlideshowSaving:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_SAVING}),b("PagesLogger").log(a,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").PAGE_COVER_SLIDESHOW,null,[],{event_name:"click_save"})},onVideoItemSettingConfirmed:function(a,c,d,e,f){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_SETTING_CONFIRMED,data:{videoData:a,preferredThumbnailID:c,preferredThumbnailURL:d,previousKey:e,shouldFocusOnItem:f}})},onNUXTourElementLoaded:function(a,c,d,e){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_NUX_TOUR_ELEMENT_LOADED,data:{context:a,step:c,description:d,position:e}})},onNUXTourFinished:function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_NUX_TOUR_FINISHED})},toggleContentOptimizer:function(a,c){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_TOGGLE_CONTENT_SWITCHER,data:c}),b("PagesLogger").log(a,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").PAGE_COVER_SLIDESHOW,null,[],{event_name:"click_content_optimizer"})},loadPrefilledItems:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_PREFILLED_PHOTO_LOADED,data:{prefilledItems:a}})},loadEditableItems:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_EDITABLE_ITEM_LOADED,data:{editableItems:a}})}};e.exports=i}),null);
__d("PagesCoverSlideshowButtonGroup.react",["cx","fbt","PagesCoverSlideshowActionCreator","React","SimpleXUIDialog","XUIButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.props.items.length===0?b("SimpleXUIDialog").show(h._("To save your slideshow, first add photos. To delete your cover photo, return to your Page and select Remove in the cover area."),h._("Slideshow Not Saved")):(this.props.onSave(),b("PagesCoverSlideshowActionCreator").onSlideshowSaving(this.props.pageID))}.bind(this),c}a.prototype.render=function(){if(!this.props.isEditMode)return null;var a=!this.props.hasPendingChanges||!this.props.shouldAllowUploadingVideo;return b("React").createElement("span",{className:"_34p_"},b("React").createElement(b("XUIButton.react"),{disabled:a,label:h._("Cancel"),onClick:b("PagesCoverSlideshowActionCreator").confirmCancel,use:"default"}),b("React").createElement(b("XUIButton.react"),{disabled:a,label:h._("Save"),onClick:this.$1,use:"confirm"}))};e.exports=a}),null);
__d("PagesCoverSlideshowItemType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"photo",VIDEO:"video"})}),null);
__d("PagesCoverSlideshowNumberType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MAX_NUM_ITEMS_IN_SLIDESHOW:5})}),null);
__d("PagesCoverSlideshowItemLoadingScreen.react",["cx","CenteredContainer.react","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return!a.shown?null:b("React").createElement(b("CenteredContainer.react"),{className:"_4g6t",fullHeight:!0,horizontal:!0,vertical:!0},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}))}e.exports=a}),null);
__d("PagesCoverSlideshowPhotoCarouselItem.react",["cx","Link.react","PagesCoverSlideshowActionCreator","PagesCoverSlideshowItemLoadingScreen.react","ProfileHeaderCoverPhoto.react","React","XPhotoPermalinkController","XUICarouselItem.react","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.componentDidMount=function(){this.props.shouldFocusOnItem===!0&&b("PagesCoverSlideshowActionCreator").changeCurrentIndex(this.props.pageID,this.props.index)};a.prototype.render=function(){var a=this.props,c=a.carouselData,d=a.isEditMode,e=a.pageID;a=a.shouldShowLoadingIndicator;var f=b("React").createElement(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:c.coverPhotoData,height:c.renderedHeight,hideDefaultButtons:!0,isLoading:c.isLoading,onMove:b("PagesCoverSlideshowActionCreator").onItemRepositioned,previewCancelHandler:b("emptyFunction"),previewMode:d,previewSaveHandler:b("emptyFunction"),ref:function(a){return this.props.onCarouselPhotoItemRefLoaded(c.coverPhotoData.id,a)}.bind(this),width:c.renderedWidth});d||(f=b("React").createElement(b("Link.react"),{className:"_5q-4",href:b("XPhotoPermalinkController").getURIBuilder().setInt("photo_id",c.coverPhotoData.id).setString("vanity",e).setString("set_token","p."+c.coverPhotoData.id).getURI(),rel:"theater"},f));return b("React").createElement(b("XUICarouselItem.react"),{className:"_626d"},f,b("React").createElement(b("PagesCoverSlideshowItemLoadingScreen.react"),{shown:!!a}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("XPagesCoverVideoDataController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_video_data/",{video_id:{type:"FBID",required:!0},supports_html5_video:{type:"Bool",defaultValue:!0},include_thumbnails:{type:"Bool",defaultValue:!1}})}),null);
__d("CoverVideoUtil",["Promise","AsyncRequest","CoverVideoOffsetType","VideoData","XPagesCoverVideoDataController","isHTML5VideoImplementationUnavailable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={fetchCoverVideoData:function(a,c){c===void 0&&(c=!1);return new(b("Promise"))(function(d,e){var f=b("XPagesCoverVideoDataController").getURIBuilder().setFBID("video_id",a).setBool("supports_html5_video",!b("isHTML5VideoImplementationUnavailable")(!0)).setBool("include_thumbnails",c).getURI();new(b("AsyncRequest"))(f).setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){a=a.payload;var c=a.offset_type,f=a.offset_value,g=a.playable_duration_in_sec,h=a.video_data,i=a.thumbnails,j=a.preferredThumbnailData,k=a.hasVisibleStatus;a=a.isStatusOK;c===b("CoverVideoOffsetType").VERTICAL||c===b("CoverVideoOffsetType").HORIZONTAL?d({offsetType:c,offsetValue:f,playableDurationInSec:g,videoData:new(b("VideoData"))(h),thumbnails:i,preferredThumbnailData:j,hasVisibleStatus:k,isStatusOK:a}):e(new Error("Cover video data are unavailable."))}).setErrorHandler(e).send()})}};e.exports=a}),null);
__d("PagesCoverVideoConstant",["fbt","React"],(function(a,b,c,d,e,f,g){"use strict";a={PREVIEW_TIP_FOR_CREATION:b("React").createElement("div",null,b("React").createElement("div",null,g._("Your video was added but won't be public until you publish it.")),b("React").createElement("div",null,g._("You can drag the video that is currently being displayed to reposition it."))),PREVIEW_TIP_FOR_EDITING:b("React").createElement("div",null,b("React").createElement("div",null,g._("Your video won't be public until you publish it.")),b("React").createElement("div",null,g._("You can drag the video that is currently being displayed to reposition it."))),TRY_UPLOAD_AGAIN_TITLE:g._("Try uploading again"),TRY_UPLOAD_AGAIN_BODY:g._("The video couldn't be uploaded. Please try again."),CANCEL_DIALOG_TITLE:g._("Cancel video upload?"),CANCEL_DIALOG_BODY:g._("If you cancel, this video will be deleted and your Page will revert to the previous cover photo or video."),CANCEL_DIALOG_CANCEL_UPLOAD_BUTTON_LABEL:g._("Cancel Upload"),CANCEL_DIALOG_NOT_NOW_BUTTON_LABEL:g._("Not Now"),EDUCATIONAL_ERROR_DIALOG_TITLE:g._("Video not uploaded")};e.exports=a}),null);
__d("PagesCoverVideoDurationType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MIN_PLAYABLE_DURATION_IN_SEC:20,MAX_PLAYABLE_DURATION_IN_SEC:90})}),null);
__d("XPagesCoverVideoPublishController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_video_publish/",{})}),null);
__d("XPagesCoverVideoRollbackAndDeleteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_video_rollback_and_delete/",{page_id:{type:"FBID",required:!0},video_id:{type:"FBID",required:!0}})}),null);
__d("PagesCoverVideoActionCreator",["ix","cx","fbt","AsyncRequest","CanvasVideoThumbnail","CoverVideoUtil","ErrorDialog","Image.react","PagesCoverAction","PagesCoverDispatcher","PagesCoverVideoConstant","PagesCoverVideoDurationType","React","ReactDOM","SimpleXUIDialog","XPagesCoverReloadController","XPagesCoverVideoPublishController","XPagesCoverVideoRollbackAndDeleteController","XUIDialogButton.react","fbglyph","gkx","promiseDone","videoPageContextualColorFetchUpdatedThemeColor"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=Object.freeze({INVALID_DURATION:"invalid_duration",INVALID_DIMENSION:"invalid_dimension"}),k={validateCoverVideoMetadata:function(a,c,d,e,f){__p&&__p();if(!c){d();k.showGeneralErrorDialog();return!1}c=b("ReactDOM").findDOMNode(c);if(!c||!(c instanceof HTMLVideoElement)){d();k.showGeneralErrorDialog();return!1}var g=c.videoWidth,h=c.videoHeight;if(g===0&&h===0)return!0;g=k.validateCoverVideoWithErrorDialog(a,c.duration,c.videoWidth,c.videoHeight,e,f);g||d();return g},onVideoRepositioned:function(a,c){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_REPOSITIONED,data:{offsetType:a,offsetValue:c}})},showCoverVideoUploadUI:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_START_UPLOAD,data:{thumbnails:a}})},uploadStarted:function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_UPLOADING,data:{progress:0}})},uploadProgressed:function(a,c){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_UPLOADING,data:{progress:Math.round(a)}})},encodeStarted:function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_ENCODING,data:{progress:0}})},encodeProgressed:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_ENCODING,data:{progress:Math.round(a)}})},encodeFinished:function(a,c,d,e){__p&&__p();b("promiseDone")(b("CoverVideoUtil").fetchCoverVideoData(c).then(function(f){__p&&__p();var g=f.playableDurationInSec;f=f.videoData;if(!g||!f){k.rollbackAndDeleteVideoWithGeneralErrorDialog(a,c);return}var h=f.getOriginalWidth();f=f.getOriginalHeight();g=k.validateCoverVideoWithErrorDialog(a,g,h,f,d,e);if(!g){k.rollbackAndDeleteVideo(a,c);return}b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_PREVIEWING,data:{videoID:c,pageID:a,isFromRepositon:!1,isNewUpload:!0}})}))},validateCoverVideoWithErrorDialog:function(a,c,d,e,f,g){__p&&__p();var h=new Set(),i=1;(d<f-i||e<g-i)&&h.add(j.INVALID_DIMENSION);d=b("PagesCoverVideoDurationType").MIN_PLAYABLE_DURATION_IN_SEC;e=b("PagesCoverVideoDurationType").MAX_PLAYABLE_DURATION_IN_SEC;(c<d-i||c>e+i)&&h.add(j.INVALID_DURATION);if(h.size>0){k.showValidationErrorDialog(a,h,d,e,f,g);return!1}return!0},chooseThumbnail:function(a,c,d,e,f,g){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_CHOOSING_THUMBNAIL,data:{futureVideoID:a,pageID:c,offsetType:d,offsetValue:e,containerHeight:f,containerWidth:g}})},editCoverVideo:function(a,c){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_PREVIEWING,data:{videoID:c,pageID:a,isFromReposition:!0}})},showGeneralErrorDialog:function(){b("SimpleXUIDialog").show(b("React").createElement("div",null,i._("The video couldn't be uploaded. Please try again.")),b("PagesCoverVideoConstant").EDUCATIONAL_ERROR_DIALOG_TITLE)},showValidationErrorDialog:function(a,c,d,e,f,h){a=i._("Please edit the video and try again.");var k=c.has(j.INVALID_DURATION)?b("React").createElement(b("Image.react"),{src:g("117758")}):b("React").createElement(b("Image.react"),{src:g("119371")});d=i._("Cover videos should be {minimal duration of cover video required}-{duration of current video} seconds.",[i._param("minimal duration of cover video required",d),i._param("duration of current video",e)]);e=c.has(j.INVALID_DIMENSION)?b("React").createElement(b("Image.react"),{src:g("117758")}):b("React").createElement(b("Image.react"),{src:g("119371")});f=i._("Cover videos should be at least {minimal requirement of width} x {minimal requirement of height} pixels. The recommended size is 820 x 462 pixels.",[i._param("minimal requirement of width",f),i._param("minimal requirement of height",h)]);h=b("React").createElement("div",null,b("React").createElement("div",null,a),b("React").createElement("div",{className:"_31ms"},b("React").createElement("div",{className:"_wsz"},k),b("React").createElement("div",{className:"_wsz"+(c.has(j.INVALID_DURATION)?" _wt3":"")},d)),b("React").createElement("div",{className:"_31ms"},b("React").createElement("div",{className:"_wsz"},e),b("React").createElement("div",{className:"_wsz"+(c.has(j.INVALID_DIMENSION)?" _wt3":"")},f)));b("SimpleXUIDialog").show(h,b("PagesCoverVideoConstant").EDUCATIONAL_ERROR_DIALOG_TITLE,b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_INVALID_UPLOAD}))},confirmPublishingVideo:function(a,c,d,e,f,g){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_PUBLISHING});var h=b("XPagesCoverVideoPublishController").getURIBuilder().getURI();g={page_id:a,video_id:c,preferred_thumbnail_id:g,offset_type:d,offset_value:e,should_cover_video_loop:f};new(b("AsyncRequest"))().setURI(h).setMethod("POST").setData(g).setHandler(function(){b("gkx")("678704")&&b("videoPageContextualColorFetchUpdatedThemeColor")(a)}).setErrorHandler(function(){k.rollbackAndDeleteVideoWithGeneralErrorDialog(a,c)}).send()},cancelNewUploadingWithConfirmationDialog:function(a,c){b("SimpleXUIDialog").showEx(b("PagesCoverVideoConstant").CANCEL_DIALOG_BODY,b("PagesCoverVideoConstant").CANCEL_DIALOG_TITLE,b("React").createElement("div",null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:b("PagesCoverVideoConstant").CANCEL_DIALOG_CANCEL_UPLOAD_BUTTON_LABEL,onClick:function(){return k.rollbackAndDeleteVideo(a,c)}}),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:b("PagesCoverVideoConstant").CANCEL_DIALOG_NOT_NOW_BUTTON_LABEL,use:"confirm"})))},rollbackAndDeleteVideoWithGeneralErrorDialog:function(a,c){b("SimpleXUIDialog").show(b("PagesCoverVideoConstant").TRY_UPLOAD_AGAIN_BODY,b("PagesCoverVideoConstant").TRY_UPLOAD_AGAIN_TITLE,function(){k.rollbackAndDeleteVideo(a,c)})},reloadCoverWithErrorDialog:function(a,c){var d=c.error_description;c=c.error_summary;c=c?c:b("PagesCoverVideoConstant").TRY_UPLOAD_AGAIN_TITLE;d=d?d:b("PagesCoverVideoConstant").TRY_UPLOAD_AGAIN_BODY;b("ErrorDialog").show(c,d,function(){k.reloadCover(a)})},reloadCover:function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_CANCELLING});a=b("XPagesCoverReloadController").getURIBuilder().setFBID("page_id",a).getURI();new(b("AsyncRequest"))(a).send()},rollbackAndDeleteVideo:function(a,c){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").VIDEO_CANCELLING});a=b("XPagesCoverVideoRollbackAndDeleteController").getURIBuilder().setFBID("page_id",a).setFBID("video_id",c).getURI();new(b("AsyncRequest"))(a).send()}};e.exports=k}),null);
__d("PagesCoverVideoLoadingSpinner.react",["cx","CenteredContainer.react","React","XUISpinner.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").createElement(b("CenteredContainer.react"),{className:b("joinClasses")("_6h2m",a.className),horizontal:!0,vertical:!0},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}))};e.exports=a}),null);
__d("PagesCoverVideoPreviewActionBar.react",["cx","React","XUIButton.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").createElement("div",{className:"_2roy"},a.leftElement?b("React").createElement("div",{className:"_1iaz"},a.leftElement):null,b("React").createElement("div",{className:"_1ia-"},b("React").createElement("span",{className:"_1ia_"},b("React").createElement(b("XUIButton.react"),{className:"_3-90",label:a.cancelButtonLabel,onClick:a.onCancelClick}),b("React").createElement(b("XUIButton.react"),{label:a.confirmButtonLabel,onClick:a.onConfirmClick,use:"confirm"}))))};e.exports=a}),null);
__d("PagesCoverVideoRepositionIndicator.react",["ix","cx","fbt","Image.react","React","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";a=function(a){return!a.shown?null:b("React").createElement("div",{className:"_1ge3"},b("React").createElement("div",{className:"_1geb"},b("React").createElement(b("Image.react"),{className:"_4l6j",src:g("114322")}),b("React").createElement("span",{className:"_4l6j"},i._("Drag to Reposition"))))};e.exports=a}),null);
__d("PagesCoverVideoPreview.react",["ix","cx","fbt","invariant","CoverVideoOffsetType","CoverVideoStatus","CoverVideoUtil","Image.react","PagesCoverSlideshowActionCreator","PagesCoverVideoActionCreator","PagesCoverVideoConstant","PagesCoverVideoLoadingSpinner.react","PagesCoverVideoPreviewActionBar.react","PagesCoverVideoRepositionIndicator.react","React","fbglyph","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=-1;c=babelHelpers.inherits(a,b("React").PureComponent);k=c&&c.prototype;function a(a){__p&&__p();k.constructor.call(this,a),this.state={minOffsetValue:0,videoData:null,videoNewSize:0},this.$10=function(a){this.props.offsetType===b("CoverVideoOffsetType").HORIZONTAL?this.$4=a.screenX:this.props.offsetType===b("CoverVideoOffsetType").VERTICAL?this.$4=a.screenY:j(0,3395),this.$2=!0}.bind(this),this.$11=function(a){__p&&__p();if(!this.$2)return;this.$4!==l||j(0,3396);var c=0;this.props.offsetType===b("CoverVideoOffsetType").HORIZONTAL?c=a.screenX-this.$4:this.props.offsetType===b("CoverVideoOffsetType").VERTICAL?c=a.screenY-this.$4:j(0,3395);a=this.$1+c;if(a>0||a<this.state.minOffsetValue)return;this.$5=!0;this.props.index===null||this.props.index===void 0?b("PagesCoverVideoActionCreator").onVideoRepositioned(this.props.offsetType,a):b("PagesCoverSlideshowActionCreator").onVideoRepositioned(this.props.index,this.props.offsetType,a)}.bind(this),this.$12=function(a){this.$2=!1,this.$4=l,this.$1=this.props.offsetValue}.bind(this),this.$13=function(a){this.$2=!1,this.$4=-1,this.$1=this.props.offsetValue}.bind(this),this.$14=function(){var a=this.props,c=a.videoID,d=a.pageID;a=a.isFromReposition;a&&d?b("PagesCoverVideoActionCreator").reloadCover(d):c&&d&&b("PagesCoverVideoActionCreator").cancelNewUploadingWithConfirmationDialog(d,c)}.bind(this),this.$15=function(){var a=this.props,c=a.videoID;a=a.pageID;if(c&&a){var d=this.props,e=d.containerWidth;d=d.containerHeight;e&&d||j(0,3397);b("PagesCoverVideoActionCreator").chooseThumbnail(c,a,this.props.offsetType,this.props.offsetValue,d,e)}}.bind(this),this.$17=function(a){if(!a)return;this.$6=a}.bind(this),this.$1=0,this.$2=!1,this.$4=l,this.$5=!1}a.prototype.componentDidMount=function(){__p&&__p();this.$3=!0,b("promiseDone")(b("CoverVideoUtil").fetchCoverVideoData(this.props.videoID).then(function(a){__p&&__p();if(!this.$3)return;var c=a.offsetValue;a=a.videoData;a||j(0,3398);var d=this.$7(a),e=d.minOffsetValue,f=d.offsetType;d=d.videoNewSize;this.setState({minOffsetValue:e,videoData:a,videoNewSize:d});e=this.props.index;e===null||e===void 0?b("PagesCoverVideoActionCreator").onVideoRepositioned(f,c||0):b("PagesCoverSlideshowActionCreator").onVideoRepositioned(e,f,c||0)}.bind(this)))};a.prototype.componentDidUpdate=function(){var a=this.props,b=a.isForSlideshow;a=a.shouldFocusOnItem;if(!b)return;a?this.$8():this.$9()};a.prototype.componentWillUnmount=function(){this.$3=!1};a.prototype.$8=function(){var a=this.$6;if(!a)return;a.play()};a.prototype.$9=function(){var a=this.$6;if(!a)return;a.pause()};a.prototype.getOffsetData=function(){return{offsetType:this.props.offsetType,offsetValue:this.props.offsetValue}};a.prototype.$7=function(a){var c=this.props,d=c.containerWidth;c=c.containerHeight;d&&c||j(0,3397);var e=d/c,f=a.getAspectRatio(),g=null,h=null;f>e?(g=b("CoverVideoOffsetType").HORIZONTAL,h=c,f=d-Math.floor(a.getOriginalWidth()*(c/a.getOriginalHeight()))):(g=b("CoverVideoOffsetType").VERTICAL,h=d,f=c-Math.floor(a.getOriginalHeight()*(d/a.getOriginalWidth())));return{minOffsetValue:f,offsetType:g,videoNewSize:h}};a.prototype.$16=function(){if(this.props.status!==b("CoverVideoStatus").PREVIEWING||this.props.isForSlideshow)return null;var a=i._("Cancel"),c=i._("Next"),d=this.props.isParentLocationPage?i._("Your video will appear as the cover on this Page and in any other locations associated with this Page."):null;d=this.props.isFromReposition?b("React").createElement("div",null,b("React").createElement("span",{className:"_2roz"},b("React").createElement(b("Image.react"),{src:g("115129")})),b("React").createElement("span",{className:"_2ro-"},b("PagesCoverVideoConstant").PREVIEW_TIP_FOR_EDITING,d)):b("React").createElement("div",null,b("React").createElement("span",{className:"_2roz"},b("React").createElement(b("Image.react"),{src:g("115129")})),b("React").createElement("span",{className:"_2ro-"},b("PagesCoverVideoConstant").PREVIEW_TIP_FOR_CREATION,d));return b("React").createElement(b("PagesCoverVideoPreviewActionBar.react"),{cancelButtonLabel:a,confirmButtonLabel:c,leftElement:d,onCancelClick:this.$14,onConfirmClick:this.$15})};a.prototype.render=function(){__p&&__p();var a;if(!this.state.videoData)return b("React").createElement(b("PagesCoverVideoLoadingSpinner.react"),{className:"_yd2"});var c=this.props,d=c.containerWidth;c=c.containerHeight;d&&c||j(0,3397);this.props.status===b("CoverVideoStatus").PREVIEWING||this.props.status===b("CoverVideoStatus").PUBLISHING||j(0,3399);var e=this.state.videoData.getRawData();a=(a=e.hd_src)!=null?a:e.sd_src;if(!a)return null;e=this.props.offsetType===b("CoverVideoOffsetType").HORIZONTAL?this.state.videoNewSize:null;var f=this.props.offsetType===b("CoverVideoOffsetType").VERTICAL?this.state.videoNewSize:null,g=this.props.offsetType===b("CoverVideoOffsetType").VERTICAL?this.props.offsetValue:0,h=this.props.offsetType===b("CoverVideoOffsetType").HORIZONTAL?this.props.offsetValue:0;return b("React").createElement("div",{style:{cursor:"move",height:c,overflow:"hidden",position:"relative",width:d}},b("React").createElement("video",{autoPlay:!0,height:e,loop:!0,onMouseDown:this.$10,onMouseLeave:this.$13,onMouseMove:this.$11,onMouseUp:this.$12,ref:this.$17,src:a,style:{position:"absolute",top:g,left:h},width:f}),b("React").createElement(b("PagesCoverVideoRepositionIndicator.react"),{shown:!this.$5}),this.$16())};e.exports=a}),null);
__d("PagesCoverVideoProgressOverlay.react",["cx","fbt","invariant","CoverVideoStatus","Image.react","ProgressBar.react","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();if(a.status!==b("CoverVideoStatus").UPLOADING&&a.status!==b("CoverVideoStatus").ENCODING)return null;a.progress===0||a.progress||i(0,4230);var c=null,d=null;if(a.thumbnails&&a.thumbnails.length>0){var e=a.thumbnails[0];d=b("React").createElement("div",{className:"_3ywa"},b("React").createElement(b("Image.react"),{src:e.getURL()}))}a.status===b("CoverVideoStatus").UPLOADING?c=h._("VIDEO UPLOADING {percentage (0-100) of uploading progress}\u0025",[h._param("percentage (0-100) of uploading progress",a.progress)]):a.status===b("CoverVideoStatus").ENCODING&&(c=h._("VIDEO ENCODING {percentage (0-100) of encoding progress}\u0025",[h._param("percentage (0-100) of encoding progress",a.progress)]));return b("React").createElement("div",{className:"_2grf"},d,b("React").createElement("div",{className:"_2grg"},b("React").createElement(b("ProgressBar.react"),{isRounded:!0,size:"small",value:a.progress}),b("React").createElement("div",{className:"_2grh"},c)))};e.exports=a}),null);
__d("CoverSlideshowUtil",["PagesCoverSlideshowItemType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getMediaId:function(a){if((a==null?void 0:a.itemType)===b("PagesCoverSlideshowItemType").VIDEO){var c;return a==null?void 0:(c=a.carouselMediaData.videoData)==null?void 0:c.videoID}else if((a==null?void 0:a.itemType)===b("PagesCoverSlideshowItemType").PHOTO){return a==null?void 0:(c=a.carouselMediaData.photoData)==null?void 0:c.coverPhotoData.id}else return null},randomFixedInteger:function(a){a=Math.floor(Math.pow(10,a-1)+Math.random()*(Math.pow(10,a)-Math.pow(10,a-1)-1));return String(a)},getThumbnailIndexByID:function(a,b){if(!a)return 0;for(var c=0;c<a.length;c++)if(a[c].id===String(b))return c;return 0},getMediaIds:function(a){var b=new Set();a.map(function(a){a=g.getMediaId(a);a!==null&&a!==void 0&&b.add(a)});return b}};e.exports=g}),null);
__d("PagesCoverSlideshowThumbnailPickerCarousel.react",["ix","cx","fbt","CoverSlideshowUtil","CoverVideoOffsetType","CssBackgroundImage.react","Image.react","React","XUICarousel.react","XUICarouselArrow.react","XUICarouselItem.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=328,l=125;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.$2=0,this.$1=0,a.offsetType===b("CoverVideoOffsetType").VERTICAL?this.$1=Math.floor(this.props.offsetValue*k/a.containerWidth):this.$2=Math.floor(a.offsetValue*l/a.containerHeight)}a.prototype.$3=function(){return this.props.thumbnails.length===0?null:this.props.thumbnails.map(function(a,c){c=this.props.currentThumbnailIndex===c;var d=this.$2+"px "+this.$1+"px";return b("React").createElement(b("XUICarouselItem.react"),{key:a.id},b("React").createElement("div",{className:"_6ml8"+(c?" _6ml9":"")},b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:d,className:"_6mla",imageURI:a.url})))}.bind(this))};a.prototype.render=function(){var a=this.props,c=a.onLeftArrowClicked,d=a.onRightArrowClicked,e=a.thumbnails;a=a.initThumbnailID;c=b("React").createElement(b("XUICarouselArrow.react"),{onClick:c},b("React").createElement(b("Image.react"),{alt:i._("Prev"),src:g("499011")}));d=b("React").createElement(b("XUICarouselArrow.react"),{onClick:d},b("React").createElement(b("Image.react"),{alt:i._("Next"),src:g("495717")}));e=b("CoverSlideshowUtil").getThumbnailIndexByID(e,a);a=this.$3();return a!=null?b("React").createElement(b("XUICarousel.react"),{animator:this.props.animator,arrows:[c,d],initialAutoplay:!1,initialIndex:e,onItemClick:this.props.onItemClick,ref:function(a){return this.props.onCarouselRefLoad(a)}.bind(this),resizeViewport:"disabled",viewportHeight:141,viewportWidth:820,wrapAround:!1},a):null};e.exports=a}),null);
__d("PagesCoverThumbnailPickerActionBar.react",["cx","fbt","FBToggleSwitch.react","PagesCoverVideoPreviewActionBar.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){if(a.isForSlideshow)return null;var c=h._("Back"),d=h._("Publish"),e=b("React").createElement("div",{className:"_d-g"},b("React").createElement("span",{className:"_d-h"},b("React").createElement(b("FBToggleSwitch.react"),{checked:a.shouldCoverVideoLoop,onToggle:a._onToggle})),b("React").createElement("span",{className:"_d-i"},h._("Automatically replay video in a loop")));return b("React").createElement(b("PagesCoverVideoPreviewActionBar.react"),{cancelButtonLabel:c,confirmButtonLabel:d,leftElement:e,onCancelClick:a._onCancelClick,onConfirmClick:a._onPublishClick})};e.exports=a}),null);
__d("PagesCoverThumbnailPickerCarousel.react",["ix","cx","fbt","CoverVideoOffsetType","Image.react","React","XUICarousel.react","XUICarouselArrow.react","XUICarouselItem.react","asset","emptyFunction"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){if(a.thumbnails.length===0)return null;var c=null,d=null,e=0,f=0;a.offsetType===b("CoverVideoOffsetType").VERTICAL?(d=a.containerWidth,e=a.offsetValue):(c=a.containerHeight,f=a.offsetValue);var h=a.thumbnails.map(function(g){return b("React").createElement(b("XUICarouselItem.react"),{key:g.id},b("React").createElement("div",{style:{height:a.containerHeight,position:"relative",textAlign:"center",width:a.containerWidth}},b("React").createElement(b("Image.react"),{height:c,src:g.url,style:{left:f,position:"absolute",top:e},width:d})))}),j=b("React").createElement(b("XUICarouselArrow.react"),{className:"_3-9a",onClick:a._onLeftArrowClicked},b("React").createElement(b("Image.react"),{alt:i._("Prev"),src:g("480582")})),k=b("React").createElement(b("XUICarouselArrow.react"),{className:"_3-90",onClick:a._onRightArrowClicked},b("React").createElement(b("Image.react"),{alt:i._("Next"),src:g("480590")}));return b("React").createElement(b("XUICarousel.react"),{animator:a.animator,arrows:[j,k],initialAutoplay:!1,initialIndex:0,onItemClick:b("emptyFunction"),ref:a.onCarouselRefLoad,resizeViewport:"fixed",style:{height:a.containerHeight,width:a.containerWidth,position:"absolute"},wrapAround:!0},h)};e.exports=a}),null);
__d("PagesCoverThumbnailPickerThumbnailIndicator.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return a.thumbnails.length===0||a.isForSlideshow?null:b("React").createElement("div",{className:"_4hmf"},h._({"*":"{the index of the current thumbnail}\/{the total number of thumbnails} thumbnails","_1":"{the index of the current thumbnail}\/{the total number of thumbnails} thumbnail"},[h._param("the index of the current thumbnail",a.currentThumbnailIndex+1),h._param("the total number of thumbnails",a.thumbnails.length),h._plural(a.thumbnails.length)]))};e.exports=a}),null);
__d("PagesCoverVideoThumbnailPicker.react",["cx","fbt","CoverSlideshowUtil","CoverVideoUtil","PagesCoverSlideshowThumbnailPickerCarousel.react","PagesCoverThumbnailPickerActionBar.react","PagesCoverThumbnailPickerCarousel.react","PagesCoverThumbnailPickerThumbnailIndicator.react","PagesCoverVideoActionCreator","PagesCoverVideoLoadingSpinner.react","React","SimpleXUIDialog","XUICarouselAnimator","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=2;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={thumbnails:[],currentThumbnailIndex:0,firstItemIndex:0,animator:new(b("XUICarouselAnimator"))({type:"horizontal"}),shouldCoverVideoLoop:this.props.shouldCoverVideoLoop,isStatusOK:!1},this.$2=function(){var a=this.state.thumbnails.length;if(a===0)return;this.setState(function(b,c){b=(b.firstItemIndex-1+a)%a;return c.isForSlideshow?{firstItemIndex:b}:{currentThumbnailIndex:b,firstItemIndex:b}});this.$1&&this.$1.prev()}.bind(this),this.$3=function(){var a=this.state.thumbnails.length;if(a===0)return;this.setState(function(b,c){b=(b.firstItemIndex+1+a)%a;return c.isForSlideshow?{firstItemIndex:b}:{currentThumbnailIndex:b,firstItemIndex:b}});this.$1&&this.$1.next()}.bind(this),this.$4=function(a){if(!this.$1)return;a-this.state.firstItemIndex>=j&&(this.$1.setIndex(a),this.setState({firstItemIndex:a}));this.setState({currentThumbnailIndex:a})}.bind(this),this.$5=function(){var a=this.props,c=a.videoID;a=a.pageID;b("PagesCoverVideoActionCreator").editCoverVideo(a,c)}.bind(this),this.$6=function(){if(this.state.isStatusOK){this.$7();return}b("SimpleXUIDialog").showConfirm(h._("This video has not been published yet. If you choose it as your cover video, it will be published for people to watch."),h._("Publish cover video?"),this.$8,{confirmBtnTxt:h._("Publish")})}.bind(this),this.$8=function(a){a&&this.$7()}.bind(this),this.$9=function(){var a=this.state.shouldCoverVideoLoop;this.setState({shouldCoverVideoLoop:!a})}.bind(this),this.$10=function(a){if(!a)return;this.$1=a}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){b("promiseDone")(b("CoverVideoUtil").fetchCoverVideoData(this.props.videoID,!0).then(function(a){var c=a.thumbnails;a=a.isStatusOK;var d=b("CoverSlideshowUtil").getThumbnailIndexByID(c,this.props.initThumbnailID);this.setState({currentThumbnailIndex:d,firstItemIndex:d,thumbnails:c,isStatusOK:a})}.bind(this)))};a.prototype.$7=function(){var a=this.props,c=a.videoID,d=a.pageID,e=a.offsetType;a=a.offsetValue;var f=this.state,g=f.thumbnails,h=f.currentThumbnailIndex;f=f.shouldCoverVideoLoop;g=g[h].id;b("PagesCoverVideoActionCreator").confirmPublishingVideo(d,c,e,a,f,g)};a.prototype.getCurrentThumbnailData=function(){return this.state.thumbnails[this.state.currentThumbnailIndex]};a.prototype.$11=function(){return this.props.isForSlideshow?b("React").createElement(b("PagesCoverSlideshowThumbnailPickerCarousel.react"),{animator:this.state.animator,containerHeight:this.props.containerHeight,containerWidth:this.props.containerWidth,currentThumbnailIndex:this.state.currentThumbnailIndex,initThumbnailID:this.props.initThumbnailID,offsetType:this.props.offsetType,offsetValue:this.props.offsetValue,onCarouselRefLoad:this.$10,onItemClick:this.$4,onLeftArrowClicked:this.$2,onRightArrowClicked:this.$3,thumbnails:this.state.thumbnails}):b("React").createElement(b("PagesCoverThumbnailPickerCarousel.react"),{_onLeftArrowClicked:this.$2,_onRightArrowClicked:this.$3,animator:this.state.animator,containerHeight:this.props.containerHeight,containerWidth:this.props.containerWidth,offsetType:this.props.offsetType,offsetValue:this.props.offsetValue,onCarouselRefLoad:this.$10,thumbnails:this.state.thumbnails})};a.prototype.render=function(){return this.state.thumbnails.length===0?b("React").createElement(b("PagesCoverVideoLoadingSpinner.react"),{className:(this.props.isForSlideshow?"":"_yd2")+(this.props.isForSlideshow?" _6h6a":"")}):b("React").createElement("div",{className:(this.props.isForSlideshow?"":"_5_lp")+(this.props.isForSlideshow?" _6h6t":"")},b("React").createElement(b("PagesCoverThumbnailPickerThumbnailIndicator.react"),{currentThumbnailIndex:this.state.currentThumbnailIndex,isForSlideshow:this.props.isForSlideshow,thumbnails:this.state.thumbnails}),this.$11(),b("React").createElement(b("PagesCoverThumbnailPickerActionBar.react"),{_onCancelClick:this.$5,_onPublishClick:this.$6,_onToggle:this.$9,isForSlideshow:this.props.isForSlideshow,shouldCoverVideoLoop:this.state.shouldCoverVideoLoop}))};e.exports=a}),null);
__d("PagesCoverVideoCreator.react",["cx","CoverVideoStatus","PagesCoverVideoPreview.react","PagesCoverVideoProgressOverlay.react","PagesCoverVideoThumbnailPicker.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=null;switch(this.props.status){case b("CoverVideoStatus").UPLOADING:case b("CoverVideoStatus").ENCODING:a=b("React").createElement(b("PagesCoverVideoProgressOverlay.react"),this.props);break;case b("CoverVideoStatus").PREVIEWING:a=b("React").createElement(b("PagesCoverVideoPreview.react"),this.props);break;case b("CoverVideoStatus").CHOOSING_THUMBNAIL:a=b("React").createElement(b("PagesCoverVideoThumbnailPicker.react"),babelHelpers["extends"]({},this.props,{isForSlideshow:this.props.isForSlideshow}));break;default:return null}var c=this.props,d=c.containerWidth;c=c.containerHeight;return d!==null&&c!==null?b("React").createElement("div",{style:{height:c,position:"relative",width:d}},a):b("React").createElement("div",{className:"_5-qd"},a)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("PagesCoverVideoPlayer.react",["Bootloader","CoverVideoOffsetType","CoverVideoUtil","OnVisible.react","PagesEventObserver","PagesEventType","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React","ReactDOM","SubscriptionsHandler","URI","VideoComponentEmbeddedControls.react","VideoComponentPlayButton.react","VideoComponentWithLoopingPlayback.react","VideoPlayer.react","VideoPlayerLoggerSource","VideoPlayerReason","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=-100;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this,a),this.state={videoData:null},this.$8=function(){var a=this.props,b=a.isForSlideshow;a=a.shouldFocusOnItem;if(!b){this.$4();return}a&&this.$4()}.bind(this),this.$5=function(){var a=this.$3;if(!a)return;a.vpc.isState("playing")&&a.vpc.pause(b("VideoPlayerReason").PAGE_VISIBILITY)}.bind(this),this.$9=function(){var a=this.props,c=a.videoLinkData,d=a.playerOrigin;if(!c)return;if(this.$3&&this.$3.vpc&&!this.$3.vpc.isState("playing"))return;var e=c.channelCaller;b("Bootloader").loadModules(["TahoeController"],function(a){a.openFromVideoLink(new(b("URI"))(c.href),{channelID:c.channelID,caller:e,origin:d})},"PagesCoverVideoPlayer.react")}.bind(this),this.$10=function(a){var c=b("ReactDOM").findDOMNode(a);if(!(c&&c instanceof Element))return;this.$3=a;c=a==null?void 0:a.vpc;c&&c.setAllowCrossPageTransition(!0)}.bind(this),this.$2=new(b("SubscriptionsHandler"))()}a.prototype.componentDidMount=function(){this.$1=!0,this.props.videoID&&b("promiseDone")(b("CoverVideoUtil").fetchCoverVideoData(this.props.videoID).then(function(a){this.$1&&this.setState({videoData:a.videoData})}.bind(this)))};a.prototype.shouldComponentUpdate=function(a,b){b=b.videoData;return!!b&&b.getVideoID()===a.videoID};a.prototype.UNSAFE_componentWillReceiveProps=function(a){b("promiseDone")(b("CoverVideoUtil").fetchCoverVideoData(this.props.videoID).then(function(a){this.$1&&this.setState({videoData:a.videoData})}.bind(this)));a=this.props;var c=a.isForSlideshow;a=a.shouldFocusOnItem;var d=this.$3;c&&d&&(a?this.$4():this.$5())};a.prototype.componentWillUnmount=function(){this.$1=!1,this.$2.release()};a.prototype.$6=function(){b("PagesEventObserver").notify(b("PagesEventType").COVER_VIDEO_CLICK,this.props.pageID,{video_id:this.props.videoID}),b("PagesLogger").log(this.props.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").PAGES_COVER_VIDEO,"page_header",["Pages","Pages: Engagement","pages web + m-site","pages surface"],{video_id:this.props.videoID})};a.prototype.$7=function(){b("PagesEventObserver").notify(b("PagesEventType").COVER_VIDEO_IMPRESSION,this.props.pageID,{video_id:this.props.videoID}),b("PagesLogger").log(this.props.pageID,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGES_COVER_VIDEO,"page_header",["Pages","Pages: Engagement","pages web + m-site","pages surface"],{video_id:this.props.videoID})};a.prototype.$4=function(){var a=this.$3;if(!a)return;!a.vpc.isState("playing")&&!a.vpc.isState("finished")&&a.vpc.play(b("VideoPlayerReason").PAGE_VISIBILITY)};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.offsetType;a=a.offsetValue;var d=this.state.videoData;if(c===null||a===null||!d)return null;var e=this.props,f=e.isForSlideshow,g=e.shouldHideSoundControl;e=e.shouldCoverVideoLoop;g=g?null:b("React").createElement(b("VideoComponentEmbeddedControls.react"),{hidePlaybackControl:!1,hidePlaybackScrubber:!0,hideRemainingTime:!0,showFullscreenButton:!1,showSettingsButton:!1});e=e?b("React").createElement(b("VideoComponentWithLoopingPlayback.react"),{infiniteLooping:!0}):null;f=f?null:b("React").createElement(b("VideoComponentPlayButton.react"),{alsoVisibleWhen:"finished"});this.$7();c=c===b("CoverVideoOffsetType").VERTICAL?"vertical":"horizontal";return b("React").createElement(b("OnVisible.react"),{buffer:h,onHidden:this.$5,onVisible:this.$8},b("React").createElement(b("VideoPlayer.react"),{allowCrossPageTransition:!0,autoplay:!0,forceHD:!0,height:this.props.containerHeight,offsetType:c,offsetValue:a,onVideoClick:this.$9,playerOrigin:this.props.playerOrigin,ref:this.$10,startMuted:!0,subOrigin:b("VideoPlayerLoggerSource").PAGES_COVER,videoData:d,width:this.props.containerWidth},g,e,f))};e.exports=a}),null);
__d("PagesCoverVideo.react",["PagesCoverVideoCreator.react","PagesCoverVideoPlayer.react","React"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.isEditMode,d=a.videoData;a=a.shouldFocusOnItem;return c?b("React").createElement(b("PagesCoverVideoCreator.react"),babelHelpers["extends"]({},d,{shouldFocusOnItem:a})):b("React").createElement(b("PagesCoverVideoPlayer.react"),babelHelpers["extends"]({},d,{shouldFocusOnItem:a}))}e.exports=a}),null);
__d("PagesCoverSlideshowVideoCarouselItem.react",["cx","PagesCoverSlideshowActionCreator","PagesCoverSlideshowItemLoadingScreen.react","PagesCoverVideo.react","React","XUICarouselItem.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.componentDidMount=function(){this.props.shouldFocusOnItem===!0&&b("PagesCoverSlideshowActionCreator").changeCurrentIndex(this.props.pageID,this.props.index)};a.prototype.render=function(){var a=this.props,c=a.pageID,d=a.isEditMode,e=a.shouldShowLoadingIndicator,f=a.index;a=a.shouldFocusOnItem;var g=this.props.videoData;g=babelHelpers["extends"]({},g,{index:f,isFromParentPage:!1,isParentLocationPage:!1,isViewerAdmin:!0,pageID:c,shouldShowChooseFromCoverVideoMenu:!1});f=b("React").createElement(b("PagesCoverVideo.react"),{isEditMode:d,shouldFocusOnItem:a,videoData:g});return b("React").createElement(b("XUICarouselItem.react"),{className:"_626d"},f,b("React").createElement(b("PagesCoverSlideshowItemLoadingScreen.react"),{shown:!!e}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("XPagesCoverSlideshowSaveAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_slideshow/save/",{})}),null);
__d("PagesCoverSlideshowCarousel.react",["ix","cx","invariant","AsyncRequest","Image.react","PagesCoverSlideshowActionCreator","PagesCoverSlideshowButtonGroup.react","PagesCoverSlideshowItemType","PagesCoverSlideshowNumberType","PagesCoverSlideshowPhotoCarouselItem.react","PagesCoverSlideshowVideoCarouselItem.react","ProfileHeaderCoverPhoto.react","React","XPagesCoverSlideshowSaveAsyncController","XUICarousel.react","XUICarouselArrow.react","XUICarouselItem.react","XUICarouselLinks.react","asset","emptyFunction","gkx","videoPageContextualColorFetchUpdatedThemeColor"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k={focus:{height:0,width:0},id:"0",original:{height:0,width:0},uri:null},l=820,m=312;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.state={showCarouselDotsIndicator:!1},this.$4=function(a){this.$1=a,this.$1&&(this.$2=this.$1.subscribe(["animation_start"],function(a,c){a==="animation_start"&&b("PagesCoverSlideshowActionCreator").changeCurrentIndex(this.props.pageID,c)}.bind(this)),this.setState({showCarouselDotsIndicator:this.props.items.length>1}))}.bind(this),this.$6=function(a,b){if(!b)return;this.$3.set(a,b)}.bind(this),this.$7=function(){__p&&__p();var a=[],c=[],d=[],e=[],f=[],g=[],h=[],j=[],k=[],l=Math.min(b("PagesCoverSlideshowNumberType").MAX_NUM_ITEMS_IN_SLIDESHOW,this.props.items.length);for(var m=0;m<l;m++){var n=this.props.items[m];c.push(n.itemType);if(n.itemType===b("PagesCoverSlideshowItemType").VIDEO){var o=n.carouselMediaData.videoData;if(!o)continue;var p=o.videoID,q=o.shouldCoverVideoLoop,r=o.offsetType;o=o.offsetValue;j.push(p);g.push(r);h.push(o);q?f.push(1):f.push(0);p=n.thumbnailData.thumbnailID;p||i(0,5037);k.push(p)}else if(n.itemType===b("PagesCoverSlideshowItemType").PHOTO){o=(r=n.carouselMediaData.photoData)==null?void 0:r.coverPhotoData.id;if(!o)continue;q=this.$3.get(o);!q&&i(0,5038);p=q.getDimensions().getRect().center;a.push(o);d.push(p.x);e.push(p.y)}else i(0,5039)}n=b("XPagesCoverSlideshowSaveAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(n).setData({page_id:this.props.pageID,media_type_vector:c,photo_id_vector:a,focus_x_vector:d,focus_y_vector:e,should_loop_vector:f,video_id_vector:j,offset_value_vector:h,offset_type_vector:g,thumbnail_id_vector:k,is_content_optimizer_on:this.props.isContentOptimizerOn}).setHandler(function(){b("gkx")("678704")&&b("videoPageContextualColorFetchUpdatedThemeColor")(this.props.pageID)}.bind(this)).send()}.bind(this),this.$3=new Map()}a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$1&&a.currentIndex!==this.props.currentIndex&&this.$1.setIndex(a.currentIndex),this.setState({showCarouselDotsIndicator:a.items.length>1})};a.prototype.componentWillUnmount=function(){this.$1&&this.$2&&this.$1.unsubscribe(this.$2)};a.prototype.$5=function(){return!this.$1||!this.state.showCarouselDotsIndicator?null:b("React").createElement(b("XUICarouselLinks.react"),{carousel:this.$1,className:"_2yih"})};a.prototype.$8=function(a,c){var d=a.carouselMediaData.photoData;return!d?null:b("React").createElement(b("PagesCoverSlideshowPhotoCarouselItem.react"),{carouselData:d,index:c,isEditMode:this.props.isEditMode,key:d.coverPhotoData.id,onCarouselPhotoItemRefLoaded:this.$6,pageID:this.props.pageID,shouldFocusOnItem:a.shouldFocusOnItem,shouldShowLoadingIndicator:a.shouldShowLoadingIndicator})};a.prototype.$9=function(a,c){var d=a.carouselMediaData.videoData;return!d?null:b("React").createElement(b("PagesCoverSlideshowVideoCarouselItem.react"),{index:c,isEditMode:this.props.isEditMode,key:d.videoID,pageID:this.props.pageID,shouldFocusOnItem:a.shouldFocusOnItem||this.props.currentIndex===c,shouldShowLoadingIndicator:a.shouldShowLoadingIndicator,videoData:d})};a.prototype.render=function(){var a=b("React").createElement(b("XUICarouselArrow.react"),{className:"_3-9a"},b("React").createElement(b("Image.react"),{src:g("480582")})),c=b("React").createElement(b("XUICarouselArrow.react"),{className:"_3-90"},b("React").createElement(b("Image.react"),{src:g("480590")})),d=this.props.items.slice(0,b("PagesCoverSlideshowNumberType").MAX_NUM_ITEMS_IN_SLIDESHOW).map(function(a,c){return a.itemType===b("PagesCoverSlideshowItemType").VIDEO?this.$9(a,c):this.$8(a,c)}.bind(this)).filter(function(a){return!!a});d.length===0&&d.push(b("React").createElement(b("XUICarouselItem.react"),{className:"_626d",key:"empty_cover_photo_placeholder"},b("React").createElement(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:k,emptyCover:b("React").createElement("div",{className:"_5_yy _44oa"}),height:m,hideDefaultButtons:!0,isLoading:!1,previewCancelHandler:b("emptyFunction"),previewMode:!1,previewSaveHandler:b("emptyFunction"),width:l})));return b("React").createElement("div",null,b("React").createElement(b("XUICarousel.react"),{arrows:this.state.showCarouselDotsIndicator?[a,c]:null,initialAutoplay:!1,initialIndex:this.props.currentIndex,ref:this.$4,resizeViewport:"fixed",viewportHeight:m,wrapAround:!0},d),this.$5(),b("React").createElement(b("PagesCoverSlideshowButtonGroup.react"),babelHelpers["extends"]({},this.props,{onSave:this.$7})))};e.exports=a}),null);
__d("PagesCoverSlideshowVideoThumbnailPicker.react",["cx","CoverSlideshowUtil","PagesCoverSlideshowThumbnailPickerCarousel.react","React","XUICarousel.react","XUICarouselAnimator"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=2;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={currentThumbnailIndex:b("CoverSlideshowUtil").getThumbnailIndexByID(this.props.thumbnails,this.props.initThumbnailID),firstItemIndex:b("CoverSlideshowUtil").getThumbnailIndexByID(this.props.thumbnails,this.props.initThumbnailID),animator:new(b("XUICarouselAnimator"))({type:"horizontal"})},this.$2=function(){var a=this.props.thumbnails.length;if(a===0)return;this.setState(function(b,c){c=(b.firstItemIndex-1+a)%a;return{firstItemIndex:c}});this.$1&&this.$1.prev()}.bind(this),this.$3=function(){var a=this.props.thumbnails.length;if(a===0)return;this.setState(function(b,c){c=(b.firstItemIndex+1+a)%a;return{firstItemIndex:c}});this.$1&&this.$1.next()}.bind(this),this.$4=function(a){if(!this.$1)return;a-this.state.firstItemIndex>=i&&(this.$1.setIndex(a),this.setState({firstItemIndex:a}));this.setState({currentThumbnailIndex:a})}.bind(this),this.$5=function(a){if(!a)return;this.$1=a}.bind(this),c}a.prototype.getCurrentThumbnailData=function(){return this.props.thumbnails[this.state.currentThumbnailIndex]};a.prototype.render=function(){return b("React").createElement("div",{className:"_6ml7"},b("React").createElement(b("PagesCoverSlideshowThumbnailPickerCarousel.react"),{animator:this.state.animator,containerHeight:this.props.containerHeight,containerWidth:this.props.containerWidth,currentThumbnailIndex:this.state.currentThumbnailIndex,initThumbnailID:this.props.initThumbnailID,offsetType:this.props.offsetType,offsetValue:this.props.offsetValue,onCarouselRefLoad:this.$5,onItemClick:this.$4,onLeftArrowClicked:this.$2,onRightArrowClicked:this.$3,thumbnails:this.props.thumbnails}))};e.exports=a}),null);
__d("PagesCoverSlideshowVideoSettingDialog.react",["ix","cx","fbt","BUISwitch.react","FDSText.react","Image.react","LayerFadeOnHide","Layout.react","LayoutColumn.react","PagesCoverSlideshowVideoThumbnailPicker.react","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogConfirmButton.react","XUIDialogFooter.react","XUIDialogTitle.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=26,l=b("Layout.react").FillColumn;c=babelHelpers.inherits(a,b("React").PureComponent);j=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={shouldCoverVideoLoop:this.props.videoData.shouldCoverVideoLoop},this.$2=function(a){if(!a)return;this.$1=a}.bind(this),this.$3=function(){this.setState(function(a){return{shouldCoverVideoLoop:!a.shouldCoverVideoLoop}})}.bind(this),this.$4=function(){this.props.isNewUpload?this.$5():this.props.onCancel()}.bind(this),this.$6=function(){this.props.isNewUpload?this.$5():this.props.onToggle()}.bind(this),this.$5=function(){if(!this.$1)return;var a=this.$1.getCurrentThumbnailData(),b=this.props.videoData;b=babelHelpers["extends"]({},b,{shouldCoverVideoLoop:this.state.shouldCoverVideoLoop});this.props.onConfirm(b,a.id,a.url)}.bind(this),b}a.prototype.$7=function(){var a=this.props.isNewUpload?b("React").createElement("div",{className:"_6n9w"},b("React").createElement(b("Image.react"),{className:"_6n9x",src:g("506114")}),b("React").createElement(b("FDSText.react"),{size:"body3",weight:"bold"},i._("Your video was uploaded successfully."))):null;return b("React").createElement(b("XUIDialogBody.react"),null,a,b("React").createElement("div",{className:"_6h72 _5n6n"},b("React").createElement(b("FDSText.react"),{size:"header3",weight:"bold"},i._("Video Thumbnail"))),b("React").createElement("div",{className:"_6h73"},b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body2"},i._("Choose a thumbnail to represent this video in your cover area."))),b("React").createElement("div",null,b("React").createElement(b("PagesCoverSlideshowVideoThumbnailPicker.react"),babelHelpers["extends"]({},this.props.videoData,{initThumbnailID:this.props.preferredThumbnailID,pageID:this.props.pageID,ref:this.$2,thumbnails:this.props.thumbnails}))))};a.prototype.$8=function(){return b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement(b("Layout.react"),null,b("React").createElement(l,null,b("React").createElement("div",{className:"_6h72"},b("React").createElement(b("FDSText.react"),{size:"header3",weight:"bold"},i._("Video Looping"))),b("React").createElement("div",{className:"_6h73"},b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body2"},i._("When looping is turned on your video will repeatedly play. When looping is off your video will play through once and stop.")))),b("React").createElement(b("LayoutColumn.react"),{className:"_6h74"},b("React").createElement("span",{className:"_2pi8"},b("React").createElement(b("BUISwitch.react"),{onToggle:this.$3,showLabel:!0,value:this.state.shouldCoverVideoLoop})))))};a.prototype.render=function(){var a=this.props,c=a.dialogShown;a=a.thumbnails;var d=this.props.videoData.containerWidth;return!c||a.length===0?null:b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},onToggle:this.$6,shown:this.props.dialogShown,titleID:"pages-cover-video-setting-dialog",width:d+k},b("React").createElement(b("XUIDialogTitle.react"),null,b("React").createElement(b("FDSText.react"),{size:"header3",weight:"bold"},i._("Video Settings"))),this.$7(),this.$8(),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIButton.react"),{label:this.props.shouldShowBackButton?i._("Back"):i._("Cancel"),onClick:this.$4}),b("React").createElement(b("XUIDialogConfirmButton.react"),{action:"confirm",onClick:this.$5,use:"confirm"})))};e.exports=a}),null);
__d("PagesCoverVideoHoverableVideoComponent.react",["cx","React","VideoComponentPlayButton.react","VideoDataContainer.react","VideoPlayer.react","VideoPlayerLoggerSource","VideoPlayerOrigins"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.props.onMouseEnter&&this.props.onMouseEnter(this.props.videoID)}.bind(this),this.$2=function(){this.props.onMouseLeave&&this.props.onMouseLeave(this.props.videoID)}.bind(this),this.$3=function(){this.props.onVideoClick&&this.props.onVideoClick(this.props.videoID)}.bind(this),this.$5=function(a){a.stopPropagation(),a.key==="Enter"&&this.$3()}.bind(this),this.$6=function(){return b("VideoDataContainer.react").renderSpinner(this.props.width,this.props.height)}.bind(this),this.$7=function(a){if(!a)return;this.props.onRefLoaded(this.props.videoID,a)}.bind(this),c}a.prototype.$4=function(a){this.props.onRefLoaded&&this.props.onRefLoaded(this.props.videoID,a)};a.prototype.render=function(){return b("React").createElement("span",{className:"_bt-"+(this.props.isSelected?" _bu0":""),key:this.props.videoID,onKeyPress:this.$5,onMouseEnter:this.$1,onMouseLeave:this.$2,role:"link",tabIndex:0},b("React").createElement(b("VideoDataContainer.react"),{renderLoading:this.$6,videoID:this.props.videoID},b("React").createElement(b("VideoPlayer.react"),{disableClickPlayPause:!0,height:this.props.height,onVideoClick:this.$3,playerOrigin:b("VideoPlayerOrigins").PAGE_TIMELINE,ref:this.$7,subOrigin:b("VideoPlayerLoggerSource").PAGES_COVER_HOVER,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,width:this.props.width},b("React").createElement(b("VideoComponentPlayButton.react"),null))))};e.exports=a}),null);
__d("PagesCoverVideoSelectionComponent.react",["cx","PagesCoverVideoHoverableVideoComponent.react","React","VideoPlayer.react","VideoPlayerReason"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=176,j=Math.round(i*9/16);c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.state={selectedVideoID:null},this.$2=function(a){if(a===this.state.selectedVideoID)return;var c=this.state.selectedVideoID;if(c){c=this.$1.get(c);c&&c.pause(b("VideoPlayerReason").USER)}this.setState({selectedVideoID:a});this.props&&this.props.onVideoSelected(a)}.bind(this),this.$3=function(a){a=this.$1.get(a);a&&a.play(b("VideoPlayerReason").HOVER)}.bind(this),this.$4=function(a){a=this.$1.get(a);a&&a.pause(b("VideoPlayerReason").HOVER)}.bind(this),this.$5=function(a,b){b&&b.vpc&&this.$1.set(a,b.vpc)}.bind(this),this.$1=new Map()}a.prototype.render=function(){var a=this.props.videoIDs;if(!a||a.length===0)return null;a=a.map(function(a){return b("React").createElement(b("PagesCoverVideoHoverableVideoComponent.react"),{height:j,isSelected:a===this.state.selectedVideoID,key:a,onMouseEnter:this.$3,onMouseLeave:this.$4,onRefLoaded:this.$5,onVideoClick:this.$2,videoID:a,width:i})}.bind(this));return b("React").createElement("div",{className:"_4yfa"},a)};e.exports=a}),null);
__d("XPagesCoverVideoFetchController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_video_fetch/",{page_id:{type:"FBID",required:!0},count:{type:"Int",required:!0},cursor:{type:"String"}})}),null);
__d("PagesCoverVideoBrowserDialog.react",["cx","fbt","AsyncRequest","LayerFadeOnHide","LoadingDialog.react","PagesCoverVideoSelectionComponent.react","React","ScrollableArea.react","XPagesCoverVideoFetchController","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogConfirmButton.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","XUISpinner.react","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=3;d=176;f=8;g=Math.round(d*9/16);var j=(d+2*f)*c+3*f,k=9,l=g*3;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={videoIDs:[],selectedVideoID:null,cursor:"",hasMore:!0,hasEligibleVideos:!0,isLoading:!1},this.$2=function(){if(!this.state.hasMore||!this.state.hasEligibleVideos||this.state.isLoading)return;var a=b("XPagesCoverVideoFetchController").getURIBuilder().setFBID("page_id",this.props.pageID).setInt("count",k).setString("cursor",this.state.cursor).getURI();this.$1=new(b("AsyncRequest"))(a).setHandler(this.$3);this.$1.send();this.setState({isLoading:!0})}.bind(this),this.$3=function(a){var b=a.payload;if(!b)return;this.setState(function(a,c){return{videoIDs:a.videoIDs.concat(b.videoIDs),cursor:b.cursor,hasMore:b.hasMore,hasEligibleVideos:b.hasEligibleVideos,isLoading:!1}})}.bind(this),this.$4=function(a){this.setState({selectedVideoID:a})}.bind(this),this.$5=function(){var a=this.props.onConfirm;a&&a(b("nullthrows")(this.state.selectedVideoID))}.bind(this),c}a.prototype.componentDidMount=function(){this.$2()};a.prototype.componentWillUnmount=function(){this.$1&&(this.$1.abort(),delete this.$1)};a.prototype.render=function(){__p&&__p();if(!this.props.dialogShown)return null;if(this.state.videoIDs.length===0&&this.state.hasMore&&this.state.hasEligibleVideos)return b("React").createElement(b("LoadingDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},onToggle:this.props.onToggle});if(!this.state.hasEligibleVideos)return b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},onToggle:this.props.onToggle,shown:this.props.dialogShown,titleID:"pages-cover-video-browser-dialog",width:j},b("React").createElement(b("XUIDialogTitle.react"),null,h._("Choose from my videos")),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",null,h._("None of the videos in your library qualify as cover videos. Videos must be between 20 and 90 seconds and at least 820 x 312 pixels. The recommended size is 820 x 462 pixels. Please upload a different video and try again."))),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogOkayButton.react"),{action:"cancel",use:"confirm"})));var a=this.state.hasMore?b("React").createElement("div",{className:"_4yfc"},b("React").createElement(b("XUISpinner.react"),{size:"large"})):null,c=this.state.videoIDs,d=this.props.existingMediaIDs;d&&(c=c.filter(function(a){return!d.has(a)}));var e=this.props.isForSlideshow?b("React").createElement(b("XUIButton.react"),{disabled:!this.state.selectedVideoID,label:h._("Next"),onClick:this.$5}):b("React").createElement(b("XUIDialogConfirmButton.react"),{action:"confirm",disabled:!this.state.selectedVideoID,onClick:this.$5,use:"confirm"});return b("React").createElement(b("XUIDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},onToggle:this.props.onToggle,shown:this.props.dialogShown,titleID:"pages-cover-video-browser-dialog",width:j},b("React").createElement(b("XUIDialogTitle.react"),null,h._("Choose from my videos")),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement(b("ScrollableArea.react"),{fade:!1,height:l,onEndReached:this.$2,width:j},b("React").createElement(b("PagesCoverVideoSelectionComponent.react"),{onVideoSelected:this.$4,videoIDs:c}),a)),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogCancelButton.react"),{onClick:this.props.onToggle}),e))};e.exports=a}),null);
__d("PagesVideoUploader.react",["cx","invariant","Arbiter","AsyncRequest","ChannelConstants","EventListener","FileInput.react","PagesCoverVideoTypedLogger","React","SubscriptionsHandler","VideoUploadConfig","VideoUploader","VideoUploadFile","VideoUploadProgressBar","generateVideoThumbnails","promiseDone","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=a.URL||a.webkitURL||{};d=babelHelpers.inherits(c,b("React").PureComponent);i=d&&d.prototype;function c(a){__p&&__p();i.constructor.call(this,a),this.state={selectedFileURL:null},this.reset=function(){this.$1.reset(),this.$3=0,this.$4.release(),this.$4=new(b("SubscriptionsHandler"))(),this.$5=!1,this.props.videoUploaderRef&&this.props.videoUploaderRef(null),clearInterval(this.$6),clearTimeout(this.$7)}.bind(this),this.$8=function(a){__p&&__p();var c=a.target,d=b("VideoUploadFile").getExtensionFromFileInput(c);if(!b("VideoUploadConfig").videoExtensions[d]||d==="gif"||!(c instanceof HTMLInputElement)){this.props.onChange&&this.props.onChange(a,!1);return}d=c.files[0];d||h(0,1113);this.reset();var e=this.$1,f=this.$2;this.$4.addSubscriptions(e.subscribe("upload-started",this.$9),e.subscribe("upload-progressed",this.$10),e.subscribe("upload-finished",this.$11),e.subscribe("post-finished",this.$12),e.subscribe("upload-failed",this.$13),e.subscribe("post-failed",this.$14),b("EventListener").listen(f,"loadedmetadata",this.$15),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("video_encode"),this.$16));e=j.createObjectURL(d);this.setState({selectedFileURL:e});this.$1.upload(b("VideoUploadFile").fromFileInput(c));this.props.onChange&&this.props.onChange(a,!0)}.bind(this),this.$9=function(){this.props.onUploadStarted&&this.props.onUploadStarted()}.bind(this),this.$15=function(a){var c=a.target;if(!(c instanceof HTMLVideoElement))return;b("promiseDone")(b("generateVideoThumbnails")(b("nullthrows")(c),this.props.thumbnailWidth,this.props.thumbnailHeight,1,"cover"),function(a){var b=this.props.onVideoMetadataLoaded;b&&b(c,this.reset,a.thumbnails)}.bind(this))}.bind(this),this.$10=function(a,c){a=b("VideoUploadProgressBar").computeProgress(c.start_offset,c.sent_bytes,c.file_size,0,0);var d=this.props.onUploadProgressed;d&&d(Math.round(a),c)}.bind(this),this.$11=function(a,b){__p&&__p();a=this.props.onUploadFinished;a&&a(b);a=this.$1;if(!a)return;if(this.props.autoEncode){b=this.props.getCustomPostData;if(b){b=b();a.post(b)}else a.post({})}else{b=this.props.onManualPost;b||h(0,3288);b(a)}}.bind(this),this.$12=function(a,b){this.props.onPostFinished&&this.props.onPostFinished(b),this.$17(b.video_id,b),this.$1.reset()}.bind(this),this.$13=function(a,b){this.props.onUploadFailed&&this.props.onUploadFailed(b),this.reset()}.bind(this),this.$14=function(a,b){this.props.onPostFailed&&this.props.onPostFailed(b),this.reset()}.bind(this),this.$16=function(a,b){__p&&__p();a=this.$18(b);if(!a)return;var c=b.obj.videoID.toString();if(b.obj.stage==="update_video"||b.obj.stage==="finish")a.setIsFinished(!0).log(),this.props.onEncodeFinished&&this.props.onEncodeFinished(c),this.reset();else{a.setIsFinished(!1).log();this.$3=Math.max(this.$3,b.obj.progress);if(!this.$5){a=this.props.onEncodeStarted;a&&a(this.$3);this.$5=!0}else this.props.onEncodeProgressed&&this.props.onEncodeProgressed(this.$3);this.$17(c,b)}}.bind(this),this.$1=new(b("VideoUploader"))(a.videoUploaderInitParams),this.$3=0,this.$4=new(b("SubscriptionsHandler"))(),this.$5=!1}c.prototype.$18=function(a){__p&&__p();var c,d,e,f,g=new(b("PagesCoverVideoTypedLogger"))().setTimeUs(Date.now()*1e3);f=(f=this.props)!=null?(f=f.videoUploaderInitParams)!=null?f.actor_id:f:f;e=(e=a)!=null?(e=e.obj)!=null?e.progress:e:e;d=(d=a)!=null?(d=d.obj)!=null?d.stage:d:d;c=(c=a)!=null?(c=c.obj)!=null?c.type:c:c;a=(a=a)!=null?(a=a.obj)!=null?a.videoID:a:a;f&&g.setPageID(f);e&&g.setProgress(e);d&&g.setStage(f);c&&g.setType(c);if(a)g.setVideoID(a);else{g.setIsFinished(!1).log();return null}return g};c.prototype.$17=function(a,c){__p&&__p();clearInterval(this.$6),clearTimeout(this.$7),this.$7=setTimeout(function(){__p&&__p();this.$6=setInterval(function(){__p&&__p();new(b("AsyncRequest"))().setURI("/ajax/video/encode/feedback/ping/").setData({video_id:a}).setHandler(function(b){__p&&__p();var d=this.$18(c);if(!d)return;b=b.getPayload();var e=b.is_ready,f=b.video_status_type,g=b.video_container_type;e!==void 0&&d.setIsFinished(e);f&&d.setVideoStatus(f);g&&d.setVideoContainerType(g);d.log();b.is_ready&&(this.props.onEncodeFinished&&this.props.onEncodeFinished(a),this.reset())}.bind(this)).send()}.bind(this),2e3)}.bind(this),2e3)};c.prototype.render=function(){var a=["video/*","video/mp4"],c=this.props.extraAccept;Array.isArray(c)?a.concat(c):c&&c!==""&&a.push(c);return b("React").createElement("div",null,b("React").createElement(b("FileInput.react"),{accept:a,className:"_6hs0",name:"simple_video_uploader",onChange:this.$8,ref:function(a){this.props.fileInputRef&&this.props.fileInputRef(a)}.bind(this)},b("React").createElement("a",{className:this.props.labelClassName,href:"#"},this.props.label)),b("React").createElement("video",{className:"hidden_elem",ref:function(a){this.$2=a,this.props.videoPlayerRef&&this.props.videoPlayerRef(a)}.bind(this),src:this.state.selectedFileURL}))};c.defaultProps={autoEncode:!0,thumbnailHeight:312,thumbnailWidth:820};e.exports=c}),null);
__d("XPagesCoverVideoUploaderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_video_upload/",{page_id:{type:"FBID",required:!0}})}),null);
__d("PagesCoverSlideshowItemEditMenu.react",["cx","fbt","ActorURI","AsyncRequest","ContextualDialogArrow","CoverSlideshowUtil","CoverVideoOffsetType","CoverVideoStatus","CoverVideoUtil","FileInput.react","FileInputUploader","PagesCoverAction","PagesCoverDispatcher","PagesCoverSlideshowActionCreator","PagesCoverSlideshowItemType","PagesCoverSlideshowVideoSettingDialog.react","PagesCoverVideoActionCreator","PagesCoverVideoBrowserDialog.react","PagesProfileTestID","PagesVideoUploader.react","ReactXUIMenu","PhotoBrowserDialogEndpointType","PhotoBrowserDialogPhotoGeneratorType","PopoverMenu.react","React","XPagesCoverVideoUploaderController","XPhotoBrowserDialogController","ReactDOM","XPagesCoverPhotoUploadAsyncController","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ReactXUIMenu").Item;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c,d,e,f,g;for(var h=arguments.length,j=new Array(h),k=0;k<h;k++)j[k]=arguments[k];return g=(a=i.constructor).call.apply(a,[this].concat(j)),this.state={isChooseFromExistingVideo:!1,videoData:(c=this.props.item)==null?void 0:c.carouselMediaData.videoData,videoID:(d=this.props.item)==null?void 0:(e=d.carouselMediaData.videoData)==null?void 0:e.videoID,preferredThumbnailID:(f=this.props.item)==null?void 0:f.thumbnailData.thumbnailID,showCoverVideoBrowserDialog:!1,showCoverVideoSettingDialog:!1,thumbnails:[],videoUploaderInitParams:null},this.$6=function(a){this.$1=a}.bind(this),this.$7=function(){var a=b("ActorURI").create(b("XPagesCoverPhotoUploadAsyncController").getURIBuilder().setFBID("page_id",this.props.pageID).setString("ref","pages_cover_slideshow_ref").setInt("index",this.props.index).setString("previous_key",this.props.mediaID).getURI(),this.props.pageID),c=b("ReactDOM").findDOMNode(this.$1);new(b("FileInputUploader"))(c).setURI(a).setAllowCrossOrigin(!0).send();b("PagesCoverSlideshowActionCreator").onPhotoUploading(this.props.index)}.bind(this),this.$8=function(){b("PagesCoverSlideshowActionCreator").onPhotoRemoved(this.props.index)}.bind(this),this.$11=function(){this.setState({showCoverVideoBrowserDialog:!0})}.bind(this),this.$12=function(){this.setState({showCoverVideoBrowserDialog:!1,showCoverVideoSettingDialog:!1,isChooseFromExistingVideo:!1}),this.$5()}.bind(this),this.$13=function(a){__p&&__p();this.setState({videoID:a}),b("promiseDone")(b("CoverVideoUtil").fetchCoverVideoData(a,!0).then(function(c){if(a!==this.state.videoID)return;var d=this.props,e=d.containerHeight;d=d.containerWidth;var f=c.thumbnails,g=c.offsetType,h=c.offsetValue;c=c.preferredThumbnailData;c=c==null?void 0:c.id;e={videoID:a,containerHeight:e,containerWidth:d,isForSlideshow:!0,offsetType:g,offsetValue:h,shouldCoverVideoLoop:!0,status:b("CoverVideoStatus").PREVIEWING};this.setState({thumbnails:f,videoData:e,preferredThumbnailID:c,isChooseFromExistingVideo:!0,showCoverVideoBrowserDialog:!1,showCoverVideoSettingDialog:!0})}.bind(this)))}.bind(this),this.$15=function(){this.setState({showCoverVideoSettingDialog:!0})}.bind(this),this.$16=function(){this.setState({showCoverVideoSettingDialog:!1}),this.$5()}.bind(this),this.$17=function(){this.setState(function(a){return a.isChooseFromExistingVideo?{showCoverVideoSettingDialog:!1,showCoverVideoBrowserDialog:!0}:{showCoverVideoSettingDialog:!1}})}.bind(this),this.$18=function(a,c,d){b("PagesCoverSlideshowActionCreator").onVideoItemSettingConfirmed(a,c,d,this.props.mediaID,this.state.isChooseFromExistingVideo),this.setState({videoID:a.videoID,preferredThumbnailID:c,showCoverVideoSettingDialog:!1})}.bind(this),this.$19=function(a){this.$1=a}.bind(this),this.$20=function(a,b){if(b)return;this.$7()}.bind(this),this.$21=function(a,c,d){a=b("PagesCoverVideoActionCreator").validateCoverVideoMetadata(this.props.pageID,a,c,this.props.containerWidth,this.props.containerHeight);if(a){c=d[0].getURL();a=b("CoverSlideshowUtil").randomFixedInteger(15);this.setState({videoID:a});b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_START_UPLOAD,data:{url:c,videoUploadTempID:a,uploadingIndex:this.props.index}})}}.bind(this),this.$22=function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_ENCODING,data:{progress:a,uploadingIndex:this.props.index,previousKey:this.state.videoID}})}.bind(this),this.$23=function(a){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_ENCODING,data:{progress:a,uploadingIndex:this.props.index,previousKey:this.state.videoID}})}.bind(this),this.$24=function(a,c){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_UPLOADING,data:{progress:a,uploadingIndex:this.props.index,previousKey:this.state.videoID}})}.bind(this),this.$25=function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_UPLOADING,data:{progress:0,uploadingIndex:this.props.index,previousKey:this.state.videoID}})}.bind(this),this.$26=function(a){var c=this.props,d=c.containerHeight;c=c.containerWidth;a={videoID:a,containerHeight:d,containerWidth:c,isForSlideshow:!0,offsetType:b("CoverVideoOffsetType").VERTICAL,offsetValue:0,shouldCoverVideoLoop:!0,status:b("CoverVideoStatus").ENCODING,progress:100};b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_ENCODE_FINISHED,data:{previousKey:this.state.videoID,videoData:a}})}.bind(this),g}a.prototype.componentDidMount=function(){this.$4();this.$5();if(this.props.index!==0)return;var a=b("ReactDOM").findDOMNode(this);if(!(a instanceof Element)||!this.props.hasItem)return;b("PagesCoverSlideshowActionCreator").onNUXTourElementLoaded(a,2,h._("To choose your slideshow manually, add a new photo or choose an existing one. Slideshow images must be at least 820 pixels wide and 312 pixels tall."),"below")};a.prototype.componentDidUpdate=function(){this.$2&&this.props.isEditBarDragging&&this.$2.hidePopover()};a.prototype.componentWillUnmount=function(){this.$3&&(this.$3.abort(),delete this.$3)};a.prototype.$5=function(){__p&&__p();var a=this.props.item;if((a==null?void 0:a.itemType)!==b("PagesCoverSlideshowItemType").VIDEO)return;var c=b("CoverSlideshowUtil").getMediaId(a);this.setState({videoID:c});if(!c)return;b("promiseDone")(b("CoverVideoUtil").fetchCoverVideoData(c,!0).then(function(b){var d;if(c!==this.state.videoID)return;d=(d=this.props.item)==null?void 0:d.carouselMediaData.videoData;b=b.thumbnails;this.setState({videoData:d,thumbnails:b});(a==null?void 0:a.isNewUpload)&&this.setState({showCoverVideoSettingDialog:!0})}.bind(this)))};a.prototype.$9=function(){var a=this.props,c=a.pageID,d=a.mediaID;a=a.existingMediaIDs;c=b("XPhotoBrowserDialogController").getURIBuilder().setEnum("endpoint",b("PhotoBrowserDialogEndpointType").PAGES_COVER_SLIDESHOW_JS).setEnum("generator",b("PhotoBrowserDialogPhotoGeneratorType").PAGE).setInt("id",c).setString("data",String(d)).setFBIDSet("existing_media_ids",Array.from(a)).getURI();return b("React").createElement(j,{href:c,rel:"dialog"},h._("Choose from photos"))};a.prototype.$4=function(){var a=b("ActorURI").create(b("XPagesCoverVideoUploaderController").getURIBuilder().setFBID("page_id",this.props.pageID).getURI(),this.props.pageID);this.$3=new(b("AsyncRequest"))(a).setHandler(function(a){this.setState({videoUploaderInitParams:a.payload.video_uploader_params})}.bind(this));this.$3.send()};a.prototype.$10=function(){return!this.props.isCoverSlideshowVideoEnabled?null:b("React").createElement(j,{onclick:this.$11},h._("Choose from videos"))};a.prototype.$14=function(){var a,c=this.props.isCoverSlideshowVideoEnabled;a=(a=this.props.item)==null?void 0:a.itemType;return!c||a!==b("PagesCoverSlideshowItemType").VIDEO||this.state.thumbnails.length===0?null:b("React").createElement(j,{onclick:this.$15},h._("Video Settings"))};a.prototype.$27=function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_UPLOADING_FAILED,data:{}})};a.prototype.$28=function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").SLIDESHOW_VIDEO_POSTING_FAILED,data:{}})};a.prototype.$29=function(){var a=this.state.videoUploaderInitParams;if(!a)return null;var c=h._("Upload photo\/video");return b("React").createElement(j,{renderas:"label"},b("React").createElement(b("PagesVideoUploader.react"),{"data-testid":b("PagesProfileTestID").COVER_PHOTO_UPLOAD_MENU_ITEM,extraAccept:"image/*",fileInputRef:this.$19,label:c,labelClassName:"_2ojv",onChange:this.$20,onEncodeFinished:this.$26,onEncodeProgressed:this.$22,onEncodeStarted:this.$23,onPostFailed:this.$28,onUploadFailed:this.$27,onUploadProgressed:this.$24,onUploadStarted:this.$25,onVideoMetadataLoaded:this.$21,videoUploaderInitParams:a}))};a.prototype.$30=function(){return!this.props.isCoverSlideshowVideoEnabled?b("React").createElement(j,{renderas:"label"},b("React").createElement(b("FileInput.react"),{accept:"image/*",display:"inline-block",name:"pages_cover_slideshow_photo_uploader",onChange:this.$7,ref:this.$6},b("React").createElement("a",{className:"_2ojv",href:"#"},h._("Upload Photo")))):this.$29()};a.prototype.$31=function(){return!this.props.hasItem?null:b("React").createElement(j,{onClick:this.$8},h._("Remove"))};a.prototype.$32=function(){return b("React").createElement(b("ReactXUIMenu"),null,this.$9(),this.$10(),this.$14(),this.$30(),this.$31())};a.prototype.$33=function(){var a,c=this.state,d=c.videoData,e=c.preferredThumbnailID;c=c.isChooseFromExistingVideo;return!d?null:b("React").createElement(b("PagesCoverSlideshowVideoSettingDialog.react"),{dialogShown:this.state.showCoverVideoSettingDialog&&this.props.isCoverSlideshowVideoEnabled,isNewUpload:(a=this.props.item)==null?void 0:a.isNewUpload,onCancel:this.$17,onConfirm:this.$18,onToggle:this.$16,pageID:this.props.pageID,preferredThumbnailID:e,shouldShowBackButton:c,shouldShowNewUploadIndicator:(a=this.props.item)==null?void 0:a.isNewUpload,thumbnails:this.state.thumbnails,videoData:d})};a.prototype.render=function(){return b("React").createElement(b("PopoverMenu.react"),{disabled:!this.props.shouldAllowUploadingVideo,layerBehaviors:[b("ContextualDialogArrow")],menu:this.$32(),position:"below",ref:function(a){return this.$2=a}.bind(this)},this.props.icon,b("React").createElement(b("PagesCoverVideoBrowserDialog.react"),{dialogShown:this.state.showCoverVideoBrowserDialog&&this.props.isCoverSlideshowVideoEnabled,existingMediaIDs:this.props.existingMediaIDs,isForSlideshow:!0,onConfirm:this.$13,onToggle:this.$12,pageID:this.props.pageID}),this.$33())};e.exports=a}),null);
__d("PagesCoverSlideshowPlaceholder.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement("div",{className:"_2aou",key:"placeholder"},b("React").createElement("div",{className:"_2ap1",style:{height:a.thumbnailHeight,width:a.thumbnailWidth}}))}e.exports=a}),null);
__d("PagesCoverSlideshowPlaceholderWithPicker.react",["ix","cx","CenteredContainer.react","Image.react","Link.react","PagesCoverSlideshowItemEditMenu.react","React","XUISpinner.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.$1=function(){if(this.props.shouldShowLoadingScreenOnPickerPlaceholder)return null;var a=this.props.shouldAllowUploadingVideo?g("520746"):g("483131");a=b("React").createElement(b("CenteredContainer.react"),{className:"_30i-"+(this.props.shouldAllowUploadingVideo?"":" _6hs1"),style:{height:this.props.thumbnailHeight,width:this.props.thumbnailWidth},vertical:!0},b("React").createElement(b("Image.react"),{src:a}));return b("React").createElement(b("PagesCoverSlideshowItemEditMenu.react"),babelHelpers["extends"]({},this.props,{existingMediaIDs:this.props.existingMediaIDs,hasItem:!1,icon:a,index:this.props.index,isCoverSlideshowVideoEnabled:this.props.isCoverSlideshowVideoEnabled,isEditBarDragging:this.props.isEditBarDragging,pageID:this.props.pageID,shouldAllowUploadingVideo:this.props.shouldAllowUploadingVideo}))};a.prototype.$2=function(){return!this.props.shouldShowLoadingScreenOnPickerPlaceholder?null:b("React").createElement(b("CenteredContainer.react"),{className:"_30i-",style:{height:this.props.thumbnailHeight,width:this.props.thumbnailWidth},vertical:!0},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large"}))};a.prototype.render=function(){return b("React").createElement("div",{className:"_2aou",key:"picker"},b("React").createElement(b("Link.react"),null,this.$1(),this.$2()))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("PagesCoverSlideshowThumbnailItem.react",["cx","BackgroundImage.react","Link.react","PagesCoverSlideshowActionCreator","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("PagesCoverSlideshowActionCreator").changeCurrentIndex(this.props.pageID,this.props.index)}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{className:"_2aou",key:this.props.thumbnailURI},b("React").createElement(b("Link.react"),{onClick:this.$1},b("React").createElement(b("BackgroundImage.react"),{alt:"pages_cover_photo_thumbnail",backgroundSize:"cover",className:this.props.isCurrent?"_4bou":"",height:this.props.thumbnailHeight,src:this.props.thumbnailURI,width:this.props.thumbnailWidth})))};e.exports=a}),null);
__d("PagesCoverSlideshowEditBar.react",["ix","cx","fbt","invariant","CoverSlideshowUtil","FBDraggableBar.react","FBDraggableItem.react","FBToggleSwitch.react","Focus","Image.react","PagesCoverSlideshowActionCreator","PagesCoverSlideshowItemEditMenu.react","PagesCoverSlideshowNumberType","PagesCoverSlideshowPlaceholder.react","PagesCoverSlideshowPlaceholderWithPicker.react","PagesCoverSlideshowThumbnailItem.react","React","Tooltip.react","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;c=babelHelpers.inherits(a,b("React").PureComponent);k=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={isEditBarDragged:!1},this.$3=function(a){a||a===0||j(0,3804),b("PagesCoverSlideshowActionCreator").changeCurrentIndex(this.props.pageID,a),this.setState({isEditBarDragged:!0})}.bind(this),this.$4=function(a){b("PagesCoverSlideshowActionCreator").toggleContentOptimizer(this.props.pageID,a)}.bind(this),this.$5=function(a,c){b("PagesCoverSlideshowActionCreator").reorderSlideshowItems(a,c,this.props.pageID),this.setState({isEditBarDragged:!1})}.bind(this),c}a.prototype.$1=function(a){if(!a)return;b("PagesCoverSlideshowActionCreator").onNUXTourElementLoaded(a,1,i._("You can rearrange the order of your slideshow by dragging the photos to the position where you want them."),"below");b("Focus").set(a)};a.prototype.$2=function(a){if(!a)return;b("PagesCoverSlideshowActionCreator").onNUXTourElementLoaded(a,4,i._("To help get you started, we've chosen photos based on what performs well. If you let Facebook choose your slideshow, the photos may update based on your Page activity."),"left")};a.prototype.$6=function(){var a=this.props.shouldAllowUploadingVideo?g("477824"):g("495298");return b("React").createElement("div",{className:(this.props.shouldAllowUploadingVideo?"_6h3_":"")+(this.props.shouldAllowUploadingVideo?"":" _6h2n")},b("React").createElement(b("Image.react"),{src:a}))};a.prototype.$7=function(a,c,d){var e=b("CoverSlideshowUtil").getMediaId(a);if(!e)return null;var f=a.thumbnailData,g=this.$6();return b("React").createElement(b("FBDraggableItem.react"),{index:c,key:e,onGrab:this.$3},b("React").createElement(b("PagesCoverSlideshowThumbnailItem.react"),babelHelpers["extends"]({index:c,isCurrent:c===this.props.currentIndex,pageID:this.props.pageID},f)),b("React").createElement("div",{className:"_37bb"},b("React").createElement(b("PagesCoverSlideshowItemEditMenu.react"),babelHelpers["extends"]({},f,{containerHeight:this.props.containerHeight,containerWidth:this.props.containerWidth,existingMediaIDs:d,hasItem:!0,icon:g,index:c,isCoverSlideshowVideoEnabled:this.props.isCoverSlideshowVideoEnabled,isEditBarDragging:this.state.isEditBarDragged,item:a,mediaID:e,pageID:this.props.pageID,shouldAllowUploadingVideo:this.props.shouldAllowUploadingVideo}))))};a.prototype.render=function(){__p&&__p();if(!this.props.isEditMode)return null;var a=b("CoverSlideshowUtil").getMediaIds(this.props.items),c=this.props.items.slice(0,b("PagesCoverSlideshowNumberType").MAX_NUM_ITEMS_IN_SLIDESHOW).map(function(c,b){return this.$7(c,b,a)}.bind(this)).filter(function(a){return!!a}),d=[],e=b("PagesCoverSlideshowNumberType").MAX_NUM_ITEMS_IN_SLIDESHOW-c.length;e>0&&d.push(b("React").createElement(b("PagesCoverSlideshowPlaceholderWithPicker.react"),{containerHeight:this.props.containerHeight,containerWidth:this.props.containerWidth,existingMediaIDs:a,index:c.length,isCoverSlideshowVideoEnabled:this.props.isCoverSlideshowVideoEnabled,isEditBarDragging:this.state.isEditBarDragged,key:"pages_cover_slideshow_picker",pageID:this.props.pageID,shouldAllowUploadingVideo:this.props.shouldAllowUploadingVideo,shouldShowLoadingScreenOnPickerPlaceholder:this.props.shouldShowLoadingScreenOnPickerPlaceholder,thumbnailHeight:this.props.thumbnailHeight,thumbnailWidth:this.props.thumbnailWidth}));var f=c.length+d.length;while(d.length<e)d.push(b("React").createElement(b("PagesCoverSlideshowPlaceholder.react"),{key:"pages_cover_slideshow_placeholder"+f,thumbnailHeight:this.props.thumbnailHeight,thumbnailWidth:this.props.thumbnailWidth})),f++;f=null;this.props.shouldShowEditSlideshowTooltip&&(f=b("React").createElement(b("Tooltip.react"),{className:"_69v-",tooltip:i._("Your cover is from the parent Page. You can also create your own.")},b("React").createElement("div",{className:"_69w3"},b("React").createElement(b("Image.react"),{source:g("360715")}))));return b("React").createElement("div",{ref:this.$1},b("React").createElement("div",{className:"_3rgb"},i._("Choose photos that you'd like to feature in your cover slideshow"),f,b("React").createElement("span",{className:"_3rgc",ref:this.$2},b("React").createElement("span",{className:"_3-8s"},i._("Let Facebook Choose Photos")),b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,checked:this.props.isContentOptimizerOn,onToggle:this.$4,tooltip:i._("Facebook can select photos for you based on what performs well. These photos may update based on your Page activity. To create your own slideshow, add or edit photos.")}))),b("React").createElement("div",{className:"_3rgd"},b("React").createElement(b("FBDraggableBar.react"),{onReorder:this.$5},c),d))};e.exports=a}),null);
__d("PagesCoverSlideshowNUXTour.react",["AdsBlueTipTour.react","BasicFBNux","LayerFadeOnShow","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.$1=function(){b("BasicFBNux").onDismiss(5385)};a.prototype.$2=function(a){if(!a)return;b("BasicFBNux").onView(5385)};a.prototype.render=function(){if(this.props.steps.length===0||!this.props.shown)return null;var a=this.props.steps.map(function(a){return{content:a.description,context:a.context,position:a.position}});return b("React").createElement(b("AdsBlueTipTour.react"),{behaviors:{LayerFadeOnShow:b("LayerFadeOnShow")},highlightContext:!1,onComplete:this.$1,onXOut:this.$1,ref:this.$2,steps:a})};function a(){g.apply(this,arguments)}a.propTypes={shown:c.bool.isRequired,steps:c.array.isRequired};e.exports=a}),null);
__d("PagesCoverSlideshow.react",["cx","PagesCoverSlideshowActionCreator","PagesCoverSlideshowCarousel.react","PagesCoverSlideshowEditBar.react","PagesCoverSlideshowItemLoadingScreen.react","PagesCoverSlideshowNUXTour.react","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.props.hasPendingChanges?b("PagesCoverSlideshowActionCreator").confirmCancel(this.props.shouldAllowUploadingVideo):b("PagesCoverSlideshowActionCreator").onEditingCancelled()}.bind(this),c}a.prototype.componentDidMount=function(){this.props.isEditMode||b("PagesLogger").log(this.props.pageID,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").PAGE_COVER_SLIDESHOW)};a.prototype.render=function(){return!this.props.isCoverSlideshowEnabled?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_626c"},b("React").createElement(b("PagesCoverSlideshowEditBar.react"),this.props),b("React").createElement(b("PagesCoverSlideshowCarousel.react"),this.props),b("React").createElement(b("PagesCoverSlideshowNUXTour.react"),{shown:this.props.shouldShowNUXTour&&this.props.isEditMode,steps:this.props.nuxTourSteps}),b("React").createElement(b("PagesCoverSlideshowItemLoadingScreen.react"),{shown:this.props.showLoadingScreen})),b("React").createElement("div",{className:this.props.isEditMode?"_i5t":"",onClick:this.$1,role:"link",tabIndex:0}))};e.exports=a}),null);
__d("DebugOverlayBitrate",["BinarySearch"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={computeBitrate:function(a,b,c){__p&&__p();var d=[],e=0;b=b;a=a;d[0]=d[1]="N/A";if(!b)return{bitrate:d,currentPlayingSegment:e};for(var f=0;f<=1;f++){if(!b[f])continue;c>b[f].length&&(c=0);e=this._getCurrentSegment(f,a,b,c);var g=this._getSegmentSize(f,e,b),h=this._getSegmentLength(f,e,b);d[f]=g&&h?this._getBitrateString(h?g*8/h:0):"N/A"}return{bitrate:d,currentPlayingSegment:e}},_getBitrateString:function(a){var b=1024;return(a/b).toFixed(1)+"Kbps"},_isPlayheadInsideSegment:function(a,b,c){return a>=b&&a<=c},_getCurrentSegment:function(a,c,d,e){__p&&__p();e=e;if(!(d[a]&&d[a][e]))return-1;var f=d[a][e].startTime,g=d[a][e].endTime;this._isPlayheadInsideSegment(c,f,g)||(e<d[a].length-1?(f=d[a][e+1].startTime,g=d[a][e+1].endTime,this._isPlayheadInsideSegment(c,f,g)?++e:e=-1):e=-1);if(e===-1){f=b("BinarySearch").findBoundInArray(d[a].map(function(a){return a.startTime}),c,function(a,b){return a-b},b("BinarySearch").LEAST_STRICT_UPPER_BOUND);e=--f}return e},_getSegmentSize:function(a,b,c){if(c[a]&&c[a][b]&&c[a][b].url){c=c[a][b].url;a=c.startByte;b=c.endByte;return a===null||b===null||!b?0:b-a}return 0},_getSegmentLength:function(a,b,c){if(c[a]&&c[a][b]){c=c[a][b];a=c.startTime;b=c.endTime;return a===null||b===null||!b?0:b-a}return 0}};e.exports=a}),null);
__d("VDOPropertyUpdater",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();function a(a,b,c){"use strict";this.parent=b,this.property=a,this.initValue=c}a.prototype.safeValue=function(a){"use strict";return a===void 0?this.initValue:a};a.prototype.get=function(a){"use strict";return this.parent.getProp(a||this.property)};a.prototype.replace=function(a){"use strict";this.parent.replace(this.property,this.safeValue(a))};a.prototype.update=function(a,b){"use strict";this.parent.update(this.property,a,this.safeValue(b))};return a}()}),null);
__d("VDOIdentityHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b,d){"use strict";c.constructor.call(this,a,b),this.recordEvent=function(a,b){this.history[a]=this.safeValue(b)}.bind(this),this.recordProperty=this.recordEvent,this.history=[],this.initValue=d}d.prototype.previous=function(a,b){"use strict";this.replace(this.history[b])};d.prototype.next=function(a){"use strict";this.replace(this.history[a])};d.prototype.last=function(){"use strict";return this.safeValue(this.history[this.history.length-1])};return d}()}),null);
__d("VDOSegmentArraysHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b){"use strict";c.constructor.call(this,a,b),this.indexDiffs=[]}d.prototype.recordEvent=function(a,b){"use strict";this.indexDiffs[a]=this.computeSegmentDiffToLog(b)};d.prototype.computeSegmentDiffToLog=function(a){"use strict";__p&&__p();var b=a;this.segmentIndexEndTimes&&(b=a.map(function(a,b){__p&&__p();b=this.segmentIndexEndTimes[b];if(b==null)return a;var c=a.length;while(--c>=0)if(a[c].endTime<=b){c++;break}return a.slice(c)}.bind(this)));this.segmentIndexEndTimes=this.extractEndTimes(a);return b};d.prototype.extractEndTimes=function(a){"use strict";a=a.map(function(a){return a[a.length-1]});return a.filter(function(a){return a}).map(function(a){a=a.endTime;return a})};d.prototype.previous=function(a,b){"use strict";__p&&__p();b=this.indexDiffs[a];if(b){a=this.get();for(var c=0;c<b.length;c++){var d=b[c].length;if(!d)continue;var e=a[c];b[c]=e.splice(e.length-d,d)}this.updateLivehead(a)}};d.prototype.next=function(a){"use strict";__p&&__p();a=this.indexDiffs[a];if(a){var b=this.get();for(var c=0;c<a.length;c++){var d=b[c];d.push.apply(d,a[c])}this.updateLivehead(b)}};d.prototype.updateLivehead=function(a){"use strict";a=this.extractEndTimes(a);a.length&&this.parent.replace("liveheadPosition",Math.min.apply(Math,a))};return d}()}),null);
__d("VDOSegmentStatesHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b){"use strict";c.constructor.call(this,a,b),this.segmentStates=[],this.segmentIDs=[]}d.prototype.recordEvent=function(a,b){"use strict";var c=b[0];b=b[1];this.segmentIDs[a]=c;this.segmentStates[a]=b};d.prototype.previous=function(a,b){"use strict";a=this.segmentIDs[a];if(a){b=b<0?-1:this.segmentIDs.lastIndexOf(a,b);this.update(a,b===-1?0:this.segmentStates[b])}};d.prototype.next=function(a){"use strict";var b=this.segmentIDs[a];b&&this.update(b,this.segmentStates[a])};return d}()}),null);
__d("VDOSparseHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b,d){"use strict";c.constructor.call(this,a,b,d),this.recordEvent=function(a,b){this.isUpdate(b)&&(this.history[a]=b,this.mostRecent=b)}.bind(this),this.recordProperty=this.recordEvent,this.getAllUntil=function(a){var b=[];for(var c in this.history)Number(c)<=a&&b.push(this.history[c]);return b}.bind(this),this.history={},this.initValue=d,this.mostRecent=void 0}d.prototype.isUpdate=function(a){"use strict";return this.mostRecent!==a};d.prototype.previous=function(a,b){"use strict";a=-1;for(var c in this.history){if(Number(c)>b)break;a=Number(c)}a>=0&&this.replace(this.history[a])};d.prototype.next=function(a){"use strict";a in this.history&&this.replace(this.history[a])};return d}()}),null);
__d("VDOSourceBufferHealthHistory",["VDOSparseHistory"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function a(b){if(b==null||typeof b!=="object")return b;if(Array.isArray(b))return b.map(a);var c={};for(var d in b)c[d]=a(b[d]);return c};e.exports=(c=a=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOSparseHistory"));c=a&&a.prototype;function d(a,b,d){"use strict";__p&&__p();c.constructor.call(this,a,b,d),this.recordEvent=function(a,b){b=b();var c=this.isUpdate(b);window.updates=!!c+(window.updates||0);if(c){var d=g(b);this.history[a]=function(){return d};this.mostRecent=d}}.bind(this),this.recordProperty=this.recordEvent}d.prototype.isUpdate=function(a){"use strict";__p&&__p();var b=this.mostRecent;if(a&&!b)return!0;if(a.length!==this.mostRecent.length)return!0;for(var c=0;c<a.length;c++){var d=a[c],e=b[c];if(!!d!==!!e)return!0;var f=d.length;if(f!==e.length)return!0;if(!f)continue;d=d[f-1].endTime;e=e[f-1].endTime;if(d!==e)return!0}return!1};return d}(),a.deepClone=g,c)}),null);
__d("VideoDebugHistory",["VDOIdentityHistory","VDOSegmentArraysHistory","VDOSegmentStatesHistory","VDOSourceBufferHealthHistory","VDOSparseHistory"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){if(typeof a==="function"){a=a();return function(){return a}}if(a==null||typeof a!=="object")return a;return Array.isArray(a)?a.slice():Object.assign({},a)};e.exports=function(){__p&&__p();function a(a){"use strict";this.frozenProps={},this.$1=a,this.history=[],this.offset=Infinity,this.reconstructors={lastError:new(b("VDOIdentityHistory"))("lastError",this),stallTime:new(b("VDOSparseHistory"))("stallTime",this,0),playerState:new(b("VDOIdentityHistory"))("playerState",this,"loading"),playbackPosition:new(b("VDOIdentityHistory"))("playbackPosition",this,0),lastMpdFetchDuration:new(b("VDOSparseHistory"))("lastMpdFetchDuration",this),mpdUpdatePollCount:new(b("VDOSparseHistory"))("mpdUpdatePollCount",this),segmentStates:new(b("VDOSegmentStatesHistory"))("segmentStates",this),segmentArrays:new(b("VDOSegmentArraysHistory"))("segmentArrays",this),getSourceBufferHealth:new(b("VDOSourceBufferHealthHistory"))("getSourceBufferHealth",this),lastLogEvent:new(b("VDOSparseHistory"))("lastLogEvent",this)}}a.prototype.freezeProps=function(){"use strict";this.offset=this.history.length;var a=this.$1();for(var b in a)a[b]=g(a[b]);this.frozenProps=a;return this.offset};a.prototype.record=function(a,b,c){"use strict";var d=this.history.length;this.history.push(c);for(var e in this.reconstructors){c=this.reconstructors[e];var f=a[e],g=b[e];f!==void 0&&"recordEvent"in c?c.recordEvent(d,f,b):g!==void 0&&"recordProperty"in c&&c.recordProperty(d,g,b)}};a.prototype.getProps=function(){"use strict";return Object.assign(this.frozenProps,{atHistoryEntry:this.offset,historyLength:this.history.length})};a.prototype.prev=function(){"use strict";__p&&__p();var a=Math.min(this.offset,this.history.length),b=a-1;if(b<0)return-Infinity;for(var c in this.reconstructors){var d=this.reconstructors[c];d.previous(a,b)}this.frozenProps.historyEventType=this.history[b];return this.offset=b};a.prototype.next=function(){"use strict";__p&&__p();var a=Math.min(this.offset,this.history.length);a=a+1;if(a>this.history.length)return Infinity;for(var b in this.reconstructors){var c=this.reconstructors[b];c.next(a)}this.frozenProps.historyEventType=this.history[a];return this.offset=a};a.prototype["goto"]=function(a){"use strict";var b=this.reconstructors.playbackPosition.last(),c=a>b,d=0;while(this.frozenProps.playbackPosition>a&&isFinite(d))d=this.prev();while(this.frozenProps.playbackPosition<a&&isFinite(d))d=this.next();this.frozenProps.playbackPosition=Math.max(0,Math.min(a,b));return c?Infinity:d};a.prototype.getProp=function(a){"use strict";return this.frozenProps[a]};a.prototype.replace=function(a,b){"use strict";this.frozenProps[a]=b};a.prototype.update=function(a,b,c){"use strict";this.frozenProps[a][b]=c};return a}()}),null);
__d("VideoDebugDashManifestView.react",["cx","Promise","regeneratorRuntime","React","TooltipLink.react","URI","UserAgent","XHRRequest"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={streamInterruptAt:"rgba(227,26,28,0.7)",commercialBreakAt:"rgba(127,188,65,0.7)",endedAt:"rgba(0,0,0,0.7)",timelineGapAt:"rgba(255,50,50,0.7)",timelineOverlapAt:"rgba(255,255,255,0.7)"},j=10,k=10,l=2/15,m=1+2*l,n=.25;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.eventInView=function(a){return a.time<this.tMax&&a.time>=this.tMin}.bind(this),this.rangeInView=function(a){return a.startTime<this.tMax&&a.endTime>=this.tMin-n}.bind(this),this.renderTimeline=function(a,c){var d=["v","a"][c];a=a.map(this.renderSegment.bind(this,d));d=m*c;return b("React").createElement("g",{key:"track-"+c,transform:"translate(0,"+d+")"},a)}.bind(this),this.renderBufferHealth=function(a,c){var d=c*m-l;return b("React").createElement("g",{key:"buffer"+c,transform:"translate(0,"+d+")"},a.filter(this.rangeInView).map(this.renderBufferRange))}.bind(this),this.renderMomentEvent=function(a,c){var d=a.type;a=a.time;c={key:c+"-"+d+"-"+a,stroke:i[d]};return b("React").createElement("line",babelHelpers["extends"]({x1:a,x2:a,y1:this.yMin,y2:this.yMax},c))}.bind(this),this.getVisibleSegments=function(a){return a.filter(this.rangeInView)}.bind(this),this.$1=0}a.prototype.$2=function(a){a=new(b("URI"))(a.url);a=this.props.segmentInitSourceMap.get(a.getPath());if(!a)return"";a=a.getFailoverUri();a=this.$3(a);return a};a.prototype.$3=function(a){var c=new(b("URI"))(a),d=a.getStartByte();a=a.getEndByte();(d||a)&&(c.addQueryData("bytestart",d),c.addQueryData("byteend",a));return c.toString()};a.prototype.$4=function(a){return new(b("Promise"))(function(c,d){new(b("XHRRequest"))(a).setMethod("GET").setResponseType("blob").setResponseHandler(function(a,b,d){d&&c(a)}).setErrorHandler(d).send()})};a.prototype.$5=function(a){a=new(b("URI"))(a.url).getPath();a=a.substring(a.lastIndexOf("/")+1);return a};a.prototype.$6=function(a){var b={a:"audio/mp4",v:"video/mp4"};return b[a[0]]};a.prototype.$7=function(a,c,d){var e,f,g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:e=b("UserAgent").isPlatform("Mac OS X")?d.metaKey:d.ctrlKey;n.next=3;return b("regeneratorRuntime").awrap(this.$8(a,c,e));case 3:f=n.sent,g=document.createElement("a"),h=window.URL.createObjectURL(f),g.href=h,i=this.$5(a),j=i.lastIndexOf("."),k=i.substring(0,j),l=i.substring(j),g.download=k+"-"+c+l,m=this.$6(c),g.type=m,g.click(),window.URL.revokeObjectURL(h);case 16:case"end":return n.stop()}},null,this)};a.prototype.$8=function(a,c,d){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=[this.$3(a.url)];d&&c.unshift(this.$2(a));return e.abrupt("return",b("Promise").all(c.map(function(a){return this.$4(a)}.bind(this))).then(function(a){return new Blob(a)}));case 3:case"end":return e.stop()}},null,this)};a.prototype.renderSegment=function(a,c,d){var e=c.startTime,f=c.debugInfo;f=f&&f.delta>0?f.endTime:c.endTime;f=f-e;var g=this.props.getSegmentClass(this.props.segmentStates,c,a),h=""+a+d;return b("React").createElement(b("TooltipLink.react"),{key:h,tooltip:"Segment "+d+" - "+a,onClick:this.$7.bind(this,c,h)},b("React").createElement("rect",{className:g,x:e,width:f,height:"1"}))};a.prototype.renderBufferRange=function(a,c){var d=a.gap,e=a.startTime;a=a.endTime;d=d?"_4yqh _4sco":"_4yqi _4scq";return b("React").createElement("line",{key:"buffer-"+c,className:d,x1:e,x2:a})};a.prototype.renderDurationEvent=function(a,c){var d=a.type,e=a.track,f=a.startTime;a=a.endTime;e=m*e;var g=e+1,h=f-n,j=f+n,k=a+n,l=a-n;h={d:"M"+h+" "+e+"L"+j+" "+g+"H"+k+"L"+l+" "+e,key:c+"-"+d+"-"+f+"-"+a,fill:i[d],stroke:i[d]};return b("React").createElement("path",h)};a.prototype.renderSegmentStats=function(a,c,d){if(!c)return null;a||(a=[],a[0]=a[1]="N/A");return b("React").createElement(b("TooltipLink.react"),{key:"length-"+d,display:"inline",href:"#",className:"_2io3 _4scr",tooltip:"Current bitrate / Length of the largest buffered segment shown in this track"},a[d]+" / "+c.toFixed(2)+"s")};a.prototype.getLongestSegmentLength=function(a){return a.reduce(function(a,b){var c=b.startTime;b=b.endTime;return Math.max(a,b-c)},0)};a.prototype.computeViewBox=function(a,b){var c=this.props.segmentArrays.length;this.tMin=a-j;this.tMax=a+k;this.yMin=-2*l;this.yMax=c+2*l*b;return this.tMin+" "+this.yMin+" "+(j+k)+" "+this.yMax};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.segmentArrays;a=a.playbackPosition;if(!c)return null;var d=this.props.getSourceBufferHealth(),e=this.computeViewBox(a,d.length);c=c.map(this.getVisibleSegments);var f=c.map(this.getLongestSegmentLength);a=b("React").createElement("line",{x1:a,x2:a,y1:this.yMin,y2:this.yMax,stroke:"#000"});var g=this.props.timelineEvents.filter(this.eventInView),h=this.props.timelineRanges.filter(this.rangeInView);for(var i=0,m;m=c[i];i++)for(var m=m,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}p=p;p=p.debugInfo;if(p){var q=p.delta,r,s,t;q>0?(r="timelineGapAt",s=p.endTime,t=p.endTime+q):(r="timelineOverlapAt",s=p.endTime+q,t=p.endTime);h.push({type:r,track:i,startTime:s,endTime:t})}}return this.props.isVisible?b("React").createElement("div",{className:"_2iob _4scs"},b("React").createElement(b("TooltipLink.react"),{display:"inline",href:"#",className:"_2iof _4scu",tooltip:"The vertical line marks the current playhead position. To the left of it, a "+j+"s window of past segments. Afterwards, the next upcoming "+k+"s of known segments."},"Video:",b("React").createElement("br",null),"Audio:"),b("React").createElement("div",{className:"_2iog _4scv"},f.map(function(a,b){return this.renderSegmentStats(this.props.bitrate,a,b)}.bind(this))),b("React").createElement("svg",{className:"_2ioh _4scw",viewBox:e,strokeWidth:l},c.map(this.renderTimeline),g.map(this.renderMomentEvent),h.map(this.renderDurationEvent),a,d.map(this.renderBufferHealth))):""};e.exports=a}),null);
__d("VideoDebugItem.react",["cx","React","TooltipLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props.children,c=null;this.props.column==="right"&&(c="_s5q");var d=this.props.label;this.props.tooltip&&(d=b("React").createElement(b("TooltipLink.react"),this.props,d));return b("React").createElement("div",{className:c},b("React").createElement("b",null,d),": ",a)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugDashMpdLag.react",["React","TooltipLink.react","VideoDebugItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.UNSAFE_componentWillReceiveProps=function(a){a=a.mpdUpdatePollCount!==this.props.mpdUpdatePollCount;this.setState({mpdPoll:a})};a.prototype.shouldComponentUpdate=function(a,b){return b.mpdPoll};a.prototype.$1=function(a){return(a/1e3).toFixed(3)+"s"};a.prototype.render=function(){var a=this.props,c=a.lastMpdFetchDuration;a=a.lastMpdChangesTime;if(!c)return null;var d=this.$1(Date.now()-a);d="We saw no new segments in this number of MPD polls.\n"+(c?"Last poll with news was "+d+" ago.":"It has been "+d+" without news, since we started polling.");var e=null,f=this.props.prevMpdChangesTime;f&&(e=this.$1(a-f),e=": "+e);return b("React").createElement("div",null,b("React").createElement(b("VideoDebugItem.react"),{label:"MPD load time",column:"right",tooltip:"Load time of the most recent dash manifest"},c.toFixed(3),"s"),b("React").createElement(b("VideoDebugItem.react"),{label:"MPD polls",href:this.props.liveManifestUrl||null,tooltip:"Number of recent dash manifest polls without news,\nand the time last poll for new segments took."},b("React").createElement(b("TooltipLink.react"),{tooltip:d},this.props.mpdUpdatePollCount),e))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugDashRepresentation.react",["React","TooltipLink.react","VideoDebugItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.idToolLink=function(a){return"https://our.intern.facebook.com/intern/id2/"+a+"/"};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.streamId,d=a.audioStreamId;a=a.audioFormat;if(!c)return null;var e=c;c=c.replace(/vd?$/,"");/^\d+$/.test(c)&&(e=b("React").createElement(b("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing video representation id",href:this.idToolLink(c)},e));c="";if(d){var f=d.replace(/ad?$/,"");/^\d+$/.test(f)?c=b("React").createElement(b("VideoDebugItem.react"),{label:"Audio Representation"},b("React").createElement(b("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing audio representation id",href:this.idToolLink(f)},d)," ","(",a,")"):c=b("React").createElement(b("VideoDebugItem.react"),{label:"Audio Representation"},d)}return b("React").createElement("div",null,b("React").createElement(b("VideoDebugItem.react"),{label:"Video Representation"},e),c)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("exposeVideoDebug",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,b){__p&&__p();var c=a.getDebug,d=a.videoID,e=a.loggedError;a=a.lastError;c=c();var f=c.VideoPlayerController,g=c.VideoDebugParent,h=c.VideoDebugOverlay,i=c.VideoBufferGaps,j=c.ComboBufferGaps;c=c.AudioBufferGaps;var k=g.getProps();k=k.segmentArrays;k=k||[];var l=k[0];k=k[1];var m=f.getVideoAPI(),n=m.getDOMElement(),o=m.getDebug();o=o.VideoPlayerHTML5DashPlayer;var p={},q={};if(o){p=o.getDebug();var r=p;r=r.DashPlayer;r&&(q=r.getDebug(),!q.identifiersIntact)}var s={vid:"videoID",vel:"VideoElement",man:"manifest",mpd:"getManifest",abr:"AbrManager",bwe:"BandwidthEstimator",src:"VideoSource",vss:"VideoSourceStream",vsi:"VideoSegmentIndex",vbm:"VideoBufferManager",vsb:"VideoSourceBuffer",vbg:"VideoBufferGaps",cbg:"ComboBufferGaps",ass:"AudioSourceStream",asi:"AudioSegmentIndex",abm:"AudioBufferManager",asb:"AudioSourceBuffer",abg:"AudioBufferGaps",vtq:"VideoTaskQueue",vts:"VideoTaskScheduler",tss:"TextSourceStream",dsp:"DashPlayer",h5d:"VideoPlayerHTML5DashPlayer",h5a:"VideoPlayerHTML5Api",vpc:"VideoPlayerController",vdp:"VideoDebugParent",vdo:"VideoDebugOverlay",lpe:"LoggedPlayerError",err:"PlayerError"},t=babelHelpers["extends"]({videoID:d,VideoElement:n,VideoBufferGaps:i,ComboBufferGaps:j,AudioBufferGaps:c,VideoSegmentIndex:l,AudioSegmentIndex:k},p,q,{VideoPlayerHTML5DashPlayer:o,VideoPlayerHTML5Api:m,VideoPlayerController:f,VideoDebugParent:g,VideoDebugOverlay:h,LoggedPlayerError:e,PlayerError:a,ns:function(a){a===void 0&&(a=window);console.group("videoDebug [videoID "+d+"]");for(var b in s){var c=s[b],e=t[c];e!==void 0&&(a[b]=e,window.console.log(b+" = "+c))}console.groupEnd();return t}});window.videoDebug=t;b&&t.ns()};e.exports=a}),null);
__d("VideoDebugExposeVideoDebug.react",["cx","React","TooltipLink.react","exposeVideoDebug"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a.preventDefault(),b("exposeVideoDebug")(this.props,!!a.shiftKey)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("TooltipLink.react"),{display:"inline",className:"_5jy",style:{right:"15px"},onClick:this.$1,tooltip:"Expose a videoDebug object for this video to js devtools.\n(Shift-click to break out independent globals immediately.)"},"js")};e.exports=a}),null);
__d("VideoDebugFlag.react",["cx","React","TooltipLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.tooltip,d=a.active;a=a.available;var e="_45za";d=this.renderDot(d,a);a=this.props.label;c&&(a=b("React").createElement(b("TooltipLink.react"),{display:"inline",href:"#",tooltip:c},a));return b("React").createElement("li",{className:e},b("React").createElement("b",null,a),": ",d)};a.prototype.renderDot=function(a,c){"use strict";a={color:a?"green":c?"red":"gray"};return b("React").createElement("span",{className:"_45zb",style:a},"\u25cf")};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugLogMessages.react",["cx","React","VideoDebugItem.react","VideoPlayerLoggerEvent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=" \ud83d\ude1e";c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.renderOption=function(a,c){var d=a.event;(d===b("VideoPlayerLoggerEvent").PAUSED||d===b("VideoPlayerLoggerEvent").FINISHED_PLAYING)&&(d=d.toUpperCase());a=a.logData;var e=a.time_ms;a=a.recent_stalls_count;var f=this.props.initializationTimestamp;e=((e-f)/1e3).toFixed(3);f=a?i:null;return b("React").createElement("option",{key:c,value:c},e,"s: ",d,f)}.bind(this),this.$2=function(a){var b=this.$3();b=b[Number(a.target.value)];console.group("log = %s event",b.event);console.groupEnd()}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){return this.$1!==a.lastLogEvent};a.prototype.$3=function(){var a=this.props,b=a.getLogEventsUntil;a=a.atHistoryEntry;a=a==null?Infinity:a;return b(a)};a.prototype.render=function(){var a=this.$3(),c=a.length-1;this.$1=a[c];var d;a.length&&(d=b("React").createElement("select",{value:c,className:"_4a8p",onChange:this.$2},a.map(this.renderOption)));return b("React").createElement(b("VideoDebugItem.react"),{label:"Log"},d)};e.exports=a}),null);
__d("VideoDebugScubaEventsLink.react",["CurrentUser","React","TooltipLink.react","URI","VideoDebugItem.react","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.getScubaUrl=function(a,c,d){function e(a){a=new Date(a);return b("formatDate")(a,"Y-m-d H:i:s",{skipPatternLocalization:!0})}e={cols:["time_ms","time_ms_begin","event_name","userid","video_id","time_ms_done","stall_time"],derivedCols:[],num_samples:"100",dimensions:["event_name"],startcol:"time_ms_begin",endcol:"time_ms_done",colorcol:"event_name",bordercol:"event_name",ordercol:"time_ms_begin",labelcol:"__number",unit:"Auto",aggregate:"",start:e(d-5e3),end:"now",modifiers:[],aggregateList:[],constraints:{userid:{eq:['["'+a+'"]']},video_id:{eq:['["'+c+'"]']}},c_constraints:{},b_constraints:{}};return new(b("URI"))("https://our.intern.facebook.com/intern/scuba/query/").setQueryData({dataset:"video_player_log",view:"TimelineBreakdown",drillstate:JSON.stringify(e)}).toString()};a.prototype.shouldComponentUpdate=function(a){var b=this.props.atHistoryEntry!==null;return b?a.atHistoryEntry!==this.props.atHistoryEntry||a.historyLength!==this.props.historyLength:!!a.atHistoryEntry};a.prototype.render=function(){__p&&__p();var a=this.props.videoID,c=[];if(this.props.isLiveStream){var d=b("React").createElement(b("TooltipLink.react"),{display:"inline",href:new(b("URI"))("https://our.intern.facebook.com/intern/facecast/debug/").setQueryData({video_broadcast_id:a}).toString(),tooltip:"Debug in Facecast"},"FC");c.push(b("React").createElement("span",{key:"live"}," [",d,"]"))}if(this.props.isSpherical){d=b("React").createElement(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(b("URI"))("https://our.intern.facebook.com/intern/360dive/").setQueryData({video_id:a}).toString(),tooltip:"Debug in 360dive"},"360dive");c.push(b("React").createElement("span",{key:"spherical"}," [",d,"]"))}d=b("React").createElement(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(b("URI"))("https://our.intern.facebook.com/intern/ads/video_ads/state_based_debugger/").setQueryData({query_id:b("CurrentUser").getID()+":"+a}).toString(),tooltip:"Debug in StateBasedDebug"},"SBL");c.push(b("React").createElement("span",{key:"sbl"}," [",d,"]"));d=b("React").createElement(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(b("URI"))("https://our.intern.facebook.com/intern/video_metrics/vsl/session_explorer/").setQueryData({session_key:b("CurrentUser").getID()+":"+a}).toString(),tooltip:"Debug in VSL Explorer"},"VSL");c.push(b("React").createElement("span",{key:"vsl"}," [",d,"]"));d=this.props.initializationTimestamp;d={href:this.getScubaUrl(b("CurrentUser").getID(),a,d),tooltip:"Show scuba video_player_log events timeline for this video",target:"_blank",label:"Video"};var e=null,f=this.props,g=f.atHistoryEntry;f=f.historyLength;g!=null&&(e=b("React").createElement("span",null,b("React").createElement("b",null," frozen at")," ",g,"/",f));return b("React").createElement(b("VideoDebugItem.react"),d,a,c,e)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugOverlay.react",["cx","CurrentUser","React","TooltipLink.react","VideoDebugDashManifestView.react","VideoDebugDashMpdLag.react","VideoDebugDashRepresentation.react","VideoDebugExposeVideoDebug.react","VideoDebugFlag.react","VideoDebugItem.react","VideoDebugLogMessages.react","VideoDebugScubaEventsLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(a){"use strict";return Number(a||0).toFixed(1)+"ms"};a.prototype.$2=function(a,b){b===void 0&&(b=3);return Number(a||0).toFixed(b)+"s"};a.prototype.$3=function(a,b){"use strict";return Math.floor(a)+" / "+Math.floor(b)};a.prototype.render=function(){"use strict";__p&&__p();var a=null;if(this.props.streamType==="dash")a=b("React").createElement(b("VideoDebugDashRepresentation.react"),{streamId:this.props.streamId,audioStreamId:this.props.audioStreamId,audioFormat:this.props.dashAudioFormat});else{var c=this.props,d=c.tagSD;c=c.tagHD;c?a=d+" (SD) / "+c+" (HD)":a=d+" (SD)";a=b("React").createElement(b("VideoDebugItem.react"),{label:"Encoding"},a)}c=!!this.props.segmentArrays;d="The current time of the video.";c&&(d+=" (The black bar in the graph.)");c=null;var e=this.props,f=e.liveheadPosition;e=e.playbackPosition;if(f&&this.props.isLiveStream){f=this.$2(f-e);c=b("React").createElement(b("VideoDebugItem.react"),{label:"Livehead \u0394",column:"right",tooltip:"How much ahead of the playhead the current livehead is. In the graph below, that amounts to the time between the playhead (the black bar) and the end of the final segment."},f)}else c=b("React").createElement(b("VideoDebugItem.react"),{label:"Duration",column:"right"},this.$2(this.props.playbackDuration));f=null;this.props.isLiveStream&&this.props.streamType=="dash"&&(f=b("React").createElement(b("VideoDebugDashMpdLag.react"),{liveManifestUrl:this.props.liveManifestUrl,lastMpdFetchDuration:this.props.lastMpdFetchDuration,mpdUpdatePollCount:this.props.mpdUpdatePollCount,prevMpdChangesTime:this.props.prevMpdChangesTime,lastMpdChangesTime:this.props.lastMpdChangesTime}));var g=this.props.lastError;if(g){var h=g,i=h.error;h=h.message;g=b("React").createElement(b("VideoDebugItem.react"),{label:"Error"},i,": ",h)}i=this.props;h=i.atHistoryEntry;i=i.historyEventType;h=h!=null?"isFrozen":null;var j=null;i?j=b("React").createElement(b("VideoDebugItem.react"),{label:"History event"},i):j=b("React").createElement(b("VideoDebugItem.react"),{label:"Autoplay reason"},b("React").createElement(b("TooltipLink.react"),{display:"inline",href:"#",tooltip:this.props.autoplayReasonReadable},this.props.autoplayReason));i=null;this.props.isLiveStream&&this.props.fblsHost&&(i=b("React").createElement(b("VideoDebugItem.react"),{label:"FBLS Host",column:"left"},this.props.fblsHost));var k=null;this.props.isLiveStream&&this.props.fblsTier&&(k=b("React").createElement(b("VideoDebugItem.react"),{label:"FBLS Tier",column:"left"},this.props.fblsTier));var l=null;this.props.isLiveStream&&this.props.inputStreamId&&(l=b("React").createElement(b("VideoDebugItem.react"),{label:"Input Stream Id"},this.props.inputStreamId));var m=null,n=null,o=null;this.props.isLiveStream&&(m=b("React").createElement(b("VideoDebugFlag.react"),{label:"IsShadow",active:this.props.isShadow,tooltip:"Indicates if the LIVE video is server side generated replica."}),this.props.isShadow&&(o=b("React").createElement(b("VideoDebugItem.react"),{label:"Shadow Experiment Name"},this.props.shadowExperimentName)),n=b("React").createElement(b("VideoDebugFlag.react"),{label:"IsActiveActive",active:this.props.isActiveActiveStream,tooltip:"Indicates if the stream has active-active failover behavior."}));var p=null;this.props.viewabilityPercentage&&(p=b("React").createElement(b("VideoDebugItem.react"),{label:"Viewability Percentage"},this.props.viewabilityPercentage));var q=b("React").createElement(b("VideoDebugItem.react"),{label:"Projection"},this.props.projection);this.props.isSpherical&&(q=b("React").createElement("div",null,b("React").createElement(b("VideoDebugItem.react"),{label:"Yaw / Pitch",tooltip:"The yaw / pitch orientation of the video"},this.$3(this.props.yaw,this.props.pitch)),q));return b("React").createElement("div",{className:h},b("React").createElement(b("TooltipLink.react"),{target:"_blank",display:"inline",className:"_5jy",href:"https://our.intern.facebook.com/intern/dex/video-debug-overlay/",tooltip:"See the DEX about how to read this overlay"},"?"),b("React").createElement(b("VideoDebugExposeVideoDebug.react"),{videoID:this.props.videoID,getDebug:this.props.getDebug,VideoDebugOverlay:this,loggedError:this.props.loggedError,lastError:this.props.lastError}),b("React").createElement(b("VideoDebugScubaEventsLink.react"),{videoID:this.props.videoID,initializationTimestamp:this.props.initializationTimestamp,atHistoryEntry:this.props.atHistoryEntry,historyLength:this.props.historyLength,isLiveStream:this.props.isLiveStream,isSpherical:this.props.isSpherical}),j,b("React").createElement(b("VideoDebugLogMessages.react"),{lastLogEvent:this.props.lastLogEvent,atHistoryEntry:this.props.atHistoryEntry,getLogEventsUntil:this.props.getLogEventsUntil,initializationTimestamp:this.props.initializationTimestamp}),g,b("React").createElement(b("VideoDebugItem.react"),{label:"State",column:"right"},this.props.playerState),b("React").createElement(b("VideoDebugItem.react"),{label:"Player"},this.props.playerVersion),b("React").createElement(b("VideoDebugItem.react"),{label:"Stalls",column:"right",tooltip:"total stall/in-play stall: total stall time/in-play stall time"},this.props.stallCount+"/"+this.props.inPlayStallCount+": "+(this.$2(this.props.stallTime/1e3,1)+"/")+(""+this.$2(this.props.inPlayStallTime/1e3,1))),b("React").createElement(b("VideoDebugItem.react"),{label:"Init time"},this.$2(this.props.initializationTime/1e3)),b("React").createElement(b("VideoDebugItem.react"),{label:"Interrupts",column:"right"},this.props.interruptCount,": ",this.$2(this.props.interruptTime/1e3)),b("React").createElement(b("VideoDebugItem.react"),{label:"Stream Type"},this.props.streamType),b("React").createElement(b("VideoDebugItem.react"),{label:"Frames/Dropped",column:"right"},this.props.totalFrames+"/"+this.props.droppedFrames),b("React").createElement(b("VideoDebugItem.react"),{label:"Round-trip time"},this.props.lastRTT?this.$1(this.props.lastRTT):"n/a"),b("React").createElement(b("VideoDebugItem.react"),{label:"Rep. Size",column:"right",tooltip:"Resolution of the representation, as reported by the browser, followed by the MOS value"},this.props.videoWidth,"x",this.props.videoHeight,this.props.mosValue?" ("+this.props.mosValue.toFixed(2)+")":""),q,b("React").createElement(b("VideoDebugItem.react"),{label:"CVC v3 count",column:"right",tooltip:"Concurrent Viewer Count v3. ",target:"_blank",href:"https://our.intern.facebook.com/intern/video/cvc?sources[0]=v3-poll&sources[1]=sbl&id="+this.props.videoID},this.props.cvcV3Count),a,b("React").createElement("ul",null,b("React").createElement(b("VideoDebugFlag.react"),{label:"HD",active:this.props.isHD,available:this.props.hasHD,tooltip:"High Definition. Indicates if the video has an HD stream and if it is playing."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"Live",active:this.props.isLiveStream,tooltip:"Indicates if this is a Live stream."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"CVC Poller",active:this.props.isPolling,available:this.props.isLiveStream,tooltip:"Concurrent Viewer Count Poller. Indicates if a poll request was sent recently. This should blink at a ~3 sec inteval."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"RL",active:this.props.isRateLimited,available:this.props.hasRateLimit,tooltip:"Rate Limit. Indicates if the server is rate limiting the video stream."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"ST",active:this.props.hasSubtitles,tooltip:"Subtitles. Indicates if the video has subtitles."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"SA",active:this.props.hasSpatialAudio,tooltip:"Spatial Audio. Indicates if the video has spatial audio."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"Akamai",active:this.props.isAkamai,tooltip:"Akamai. Indicates if the video is being served from Akamai."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"DRM",active:this.props.isDrm,tooltip:"DRM. Indicates if this video is protected by DRM"}),m,n),c,p,b("React").createElement(b("VideoDebugItem.react"),{label:"Playhead",tooltip:d},this.$2(e)),b("React").createElement(b("VideoDebugDashManifestView.react"),{getSourceBufferHealth:this.props.getSourceBufferHealth,playbackPosition:e,segmentInitSourceMap:this.props.segmentInitSourceMap,segmentStates:this.props.segmentStates,segmentArrays:this.props.segmentArrays,timelineEvents:this.props.timelineEvents,timelineRanges:this.props.timelineRanges,getSegmentClass:this.props.getSegmentClass,bitrate:this.props.bitrate,isVisible:b("CurrentUser").isEmployee()}),f,i,k,l,o)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugOverlay",["cx","CSS","DebugOverlayBitrate","FBJSON","KeyboardShortcuts","MosUtils","React","ReactDOM","SubscriptionsHandler","URI","UserAgent","VideoDebugHistory","VideoDebugOverlay.react","VideoPlayerReason","VideoPlayerShakaGlobalConfig","cancelAnimationFrame","clearTimeout","exposeVideoDebug","getActiveElement","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MosUtils").getMosValue,i=0,j=1,k=2,l=["SegmentUnknown","SegmentFetching","SegmentFetched","SegmentFailed","SegmentAppended"],m=["_2io2","_19ur","_19us","_19ut","_37la"];function n(a,c,d){"use strict";__p&&__p();this.$12=function(a){a!=="DebugOverlay"&&this.setHidden(!0)}.bind(this),this.inFocusAndAltKey=function(a,c){var d=b("UserAgent").isPlatform("Mac OS X");d=a.altKey&&(d||a.shiftKey);if(!d||c!=="onkeydown"||a.ctrlKey||a.metaKey)return!1;d=this.$4;c=b("getActiveElement")();return c.contains(d)||d.contains(c)}.bind(this),this.toggleMute=function(a){a=this.$16;a.isMuted()?a.unmute():a.mute()}.bind(this),this.togglePause=function(a){a=this.$16;a.isState("playing")?a.pause(b("VideoPlayerReason").USER):a.play(b("VideoPlayerReason").USER)}.bind(this),this.onExpose=function(a){b("exposeVideoDebug")(this.getProps(),!!a.shiftKey)}.bind(this),this.onFreeze=function(a){if(this.$11)return this.resume();else return this.freeze()}.bind(this),this.onHistoryRew=function(a){return a.shiftKey?this["goto"](-Infinity):this.prev()}.bind(this),this.onHistoryFwd=function(a){if(a.shiftKey){this["goto"](Infinity);return this.resume()}return this.next()}.bind(this),this.onLivePoll=function(){this.$21&&b("clearTimeout")(this.$21),this.$21=b("setTimeout")(function(){this.$21=null}.bind(this),1e3)}.bind(this),this.onV3ViewCountChange=function(a){a=a.getAttribute("data-store");a=a?b("FBJSON").parse(a).viewerCount:0;this.$7.cvcV3Count=a}.bind(this),this.onDashPlayerDebug=function(a){__p&&__p();var b=a.type;a=a.event;var c=null;switch(b){case"MPDFetchDuration":var d=a;this.$7.lastMpdFetchDuration=d;c={lastMpdFetchDuration:d};break;case"InitialSegmentIndexes":c=this.onSegmentIndexes(a,!0);this.$3=this.$16.getVideoTracks()||[];break;case"SegmentIndexesUpdated":c=this.onSegmentIndexes(a,!1);break;case"SegmentInitSources":this.onSegmentInitSources(a);break;case"SegmentFetching":case"SegmentFetched":case"SegmentFailed":case"SegmentAppended":c=this.onSegmentEvent(b,a);break;case"streamInterruptAt":case"commercialBreakAt":case"endedAt":this.addTimelineMark(b,a);break;case"streamResumedAt":this.removeTimelineMark("streamInterruptAt",a);break;default:return}c&&this.record(b,c)}.bind(this),this.onVpcLogEvent=function(a){this.$7.lastLogEvent=a,this.$7.getLogEventsUntil=this.$6.reconstructors.lastLogEvent.getAllUntil,this.record(a.event,{lastLogEvent:a})}.bind(this),this.getSourceBufferHealth=function(){this.$13[j]=this.$16.getVideoNode();return this.$13.map(this.$23)}.bind(this),this.$23=function(a,b){__p&&__p();var c=[];if(!a)return c;var d;try{a=a.buffered,d=a.length}catch(a){return c}for(var e=0;e<d;e++)c.push({gap:!1,startTime:a.start(e),endTime:a.end(e)});for(var a=1;a<d;a++){e={gap:!0,startTime:c[a-1].endTime,endTime:c[a].startTime};c.push(e);this.$14[b][e.startTime]=e}return c}.bind(this),this.toggleHidden=function(){return this.setHidden(!this.getHidden())}.bind(this),this.getHidden=function(){return this.$24}.bind(this),this.setHidden=function(a){this.$24=a,this.$24?this.stopAnimating():(this.$16&&this.$16.showDebugOverlayView("DebugOverlay"),this.startAnimating()),b("CSS").conditionClass(this.$4,"hidden_elem",this.$24)}.bind(this),this.getDebug=function(){return{VideoPlayerController:this.$16,VideoDebugOverlay:this.vdo,VideoDebugParent:this,VideoBufferGaps:this.$14[i],ComboBufferGaps:this.$14[j],AudioBufferGaps:this.$14[k]}}.bind(this),this.getProps=function(){__p&&__p();var a=this.$16;if(!a)return null;var c=a.getVideoResolution(),d=c.height;c=c.width;var e=a.getDebugInfo(),f=e.currentVideo;e=e.player;var g=e.dimensions,h=b("DebugOverlayBitrate").computeBitrate(a.getCurrentTimePosition(),this.$7.segmentArrays,this.$2);h=h.bitrate;return Object.assign({},this.$7,{videoID:a.getVideoID(),playbackPosition:a.getCurrentTimePosition(),playbackDuration:a.getPlaybackDuration(),isSpherical:a.isSpherical(),streamType:f.streamType,projection:f.projection,isLiveStream:f.isLiveStream,isHD:f.isHD,hasHD:f.hasHD,tagSD:f.tagSD,tagHD:f.tagHD,hasSubtitles:f.hasSubtitles,isRateLimited:f.isRateLimited,hasRateLimit:f.hasRateLimit,liveManifestUrl:f.liveManifestUrl,isAkamai:f.liveManifestUrl&&f.liveManifestUrl.includes("akamaihd"),streamId:f.streamId,audioStreamId:f.audioStreamId,videoHeight:d,videoWidth:c,isDrm:f.isDrm,mosValue:f&&g?this.getActiveMosValue(f.streamId,g.width,g.height):null,hasSpatialAudio:a.getOption("SphericalVideoSpatialAudioController","hasSpatialAudio"),dashAudioFormat:f.dashAudioFormat,initializationTime:e.initializationTime,initializationTimestamp:e.initializationTimestamp,playerVersion:e.version,stallCount:e.stallCount,stallTime:e.stallTime,inPlayStallCount:e.inPlayStallCount,inPlayStallTime:e.inPlayStallTime,interruptCount:e.interruptCount,interruptTime:e.interruptTime,loggedError:e.loggedError,lastError:e.lastError,droppedFrames:e.droppedFrames,totalFrames:e.totalFrames,viewabilityPercentage:e.viewabilityPercentage,getDebug:this.getDebug,playerState:this.$20(),isPolling:!!this.$21,getSegmentClass:n.getSegmentClass,bitrate:h})}.bind(this),this.$26=function(a){this.vdo=a}.bind(this),this.$4=a,this.$5=c,this.$6=new(b("VideoDebugHistory"))(this.getProps),this.$7=this.$8(),this.$9(),this.$10=null,this.$11=!1,this.setHidden(d.hidden),this.$1=d.timeBetweenRender,this.$2=0}n.prototype.$9=function(){"use strict";this.$13=[null,null,null],this.$14=[{},{},{}]};n.prototype.$8=function(){"use strict";var a=this.$5,b=a.autoplayReason,c=a.autoplayReasonReadable,d=a.fblsHost,e=a.fblsTier,f=a.isShadow,g=a.isActiveActiveStream,h=a.shadowExperimentName;a=a.inputStreamId;return{autoplayReason:b,autoplayReasonReadable:c,lastMpdFetchDuration:null,prevMpdChangesTime:null,lastMpdChangesTime:Date.now(),mpdUpdatePollCount:0,segmentStates:{},segmentInitSourceMap:null,timelineEvents:[],timelineRanges:[],getSourceBufferHealth:this.getSourceBufferHealth,getLogEventsUntil:function(){return[]},yaw:0,pitch:0,lastRTT:null,fblsHost:d,fblsTier:e,isShadow:f,isActiveActiveStream:g,shadowExperimentName:h,inputStreamId:a,cvcV3Count:"-"}};n.prototype.disable=function(){"use strict";this.setHidden(!0),this.$15.release(),this.$16.unregisterOption("DebugOverlay","hidden")};n.prototype.enable=function(a){__p&&__p();var c;this.$16=a;this.$3=[];this.$15=new(b("SubscriptionsHandler"))();(c=this.$15).addSubscriptions.apply(c,[a.addListener("showDebugOverlay",this.$12),a.addListener("VideoWithLiveBroadcast/poll",this.onLivePoll),a.addListener("VideoWithLiveBroadcast/v3ViewCountChange",this.onV3ViewCountChange),a.addListener("debug/dashPlayerEvent",this.onDashPlayerDebug),a.addListener("debug/vpcLogEvent",this.onVpcLogEvent),a.addListener("streamInterrupted",function(){this.$17("interrupted")}.bind(this)),a.addListener("streamResumed",function(){this.$17(null)}.bind(this)),a.addListener("buffering",function(){this.$17("buffering")}.bind(this)),a.addListener("buffered",function(){this.$17(null)}.bind(this)),a.addListener("abortedLoading",function(){this.$17("aborted")}.bind(this)),a.addListener("restoringAfterAbort",function(){this.$17("restoring"),this.$7=this.$8(),this.$9()}.bind(this)),a.addListener("restoredAfterAbort",function(){this.$17(null)}.bind(this)),a.addListener("bufferingChanged",function(){var b=a.getDebugInfo();b=b.player;b={stallTime:b.stallTime};var c={playbackPosition:a.getCurrentTimePosition()};this.$6.record(b,c,"bufferingChanged")}.bind(this)),a.addListener("viewportChange",function(a,b){this.$7.yaw=a,this.$7.pitch=b}.bind(this))].concat(this.registerKeys({d:this.toggleHidden,e:this.onExpose,f:this.onFreeze,m:this.toggleMute,p:this.togglePause,LEFT:this.onHistoryRew,RIGHT:this.onHistoryFwd})));a.registerOption("DebugOverlay","hidden",this.getHidden,this.setHidden);this.$18(a.getVideoID())&&this.setHidden(!1)};n.prototype.registerKeys=function(a){"use strict";var c=[],d={baseFilters:[this.inFocusAndAltKey],allowDefault:!0};for(var e in a)c.push(b("KeyboardShortcuts").register(e,a[e],d));return c};n.prototype.$18=function(a){"use strict";var c=b("URI").getRequestURI().getQueryData();c=c.vid;switch(c){case void 0:return!1;case null:return!0;default:return c.split(/\D+/g).indexOf(a)!==-1}};n.prototype.$17=function(a){"use strict";this.$19=a};n.prototype.$20=function(){"use strict";var a=this.$16.getState();this.$19&&(a+=" ("+this.$19+")");return a};n.prototype.addTimelineMark=function(a,b){"use strict";a={type:a,time:b};this.removeTimelineMark(a);var c=this.$7.timelineEvents;c.push(a);return b};n.prototype.removeTimelineMark=function(a,b){"use strict";__p&&__p();var c=this.$7.timelineEvents;for(var d=0;d<c.length;d++){var e=c[d];if(e.type===a&&e.time===b){c.splice(d,1);return!0}}return!1};n.prototype.record=function(a,b,c){"use strict";var d=this.$16;c=c||{};b=b||{};this.$6.record(b,Object.assign(c,this.$7,{playerState:this.$20(),playbackPosition:d.getCurrentTimePosition(),getSourceBufferHealth:this.getSourceBufferHealth}),a)};n.getSegmentId=function(a,b){"use strict";return b+(a.unscaledStartTime||a.startTime)};n.getSegmentClass=function(a,b,c){"use strict";b=n.getSegmentId(b,c);return m[a[b]||0]};n.prototype.onSegmentEvent=function(a,b){"use strict";__p&&__p();var c=b.type,d=b.sourceBuffer;b=b.segment;b=this.$22(b);var e=b;e=e.url;b=n.getSegmentId(b,c);var f=l.indexOf(a);this.$7.segmentStates[b]=f;a==="SegmentFetched"&&e.getResourceTimingEntry()&&(this.$7.lastRTT=e.getResourceTimingEntry().timeToFirstByte);switch(c){case"v":this.$13[i]=d;break;case"a":this.$13[k]=d;break}return{segmentStates:[b,f]}};n.prototype.onSegmentIndexes=function(a,c){"use strict";__p&&__p();if(b("VideoPlayerShakaGlobalConfig").getBool("ignore_segment_index_updates_when_debug_overlay_hidden",!1)&&this.$16.isLiveVideo()&&this.$24)return null;c=c||a.some(function(a){return a.lastPollHadChanges&&a.lastPollHadChanges()});a=a.map(function(a){a=a.getSegments?a.getSegments():this.$25(a);return a.map(function(a){return this.$22(a)}.bind(this))}.bind(this));if(c){c=this.$7.lastMpdChangesTime;this.$7.prevMpdChangesTime=c;this.$7.lastMpdChangesTime=Date.now();this.$7.mpdUpdatePollCount=0}else this.$7.mpdUpdatePollCount+=1;this.$7.segmentArrays=a;c=a.map(function(a){return a[a.length-1]}).filter(function(a){return a}).map(function(a){a=a.endTime;return a});c.length&&(this.$7.liveheadPosition=Math.min.apply(Math,c));c=this.$7.mpdUpdatePollCount;return{segmentArrays:a,mpdUpdatePollCount:c}};n.prototype.$25=function(a){"use strict";var b=[],c=a.getSegment(0);while(c)b.push(c),c=a.getSegmentAfter(c);return b};n.prototype.onSegmentInitSources=function(a){"use strict";this.$7.segmentInitSourceMap=new Map(a.map(function(a){var c=a.getFailoverUri();c=new(b("URI"))(c.toString());return[c.getPath(),a]}))};n.prototype.isHidden=function(){"use strict";return this.$24};n.prototype.startAnimating=function(){"use strict";if(this.$10)return;var a=function(){this.renderOverlay(),this.$1?this.$10=b("setTimeout")(a,this.$1):this.$10=b("requestAnimationFrame")(a)}.bind(this);a()};n.prototype.stopAnimating=function(){"use strict";var a=this.$10;this.$10&&(this.$1?b("clearTimeout")(this.$10):b("cancelAnimationFrame")(this.$10),this.$10=null);return a};n.prototype.prev=function(){"use strict";this.freeze(),this.$6.prev()};n.prototype.next=function(){"use strict";this.freeze();var a=this.$6.next();isFinite(a)||this.resume()};n.prototype["goto"]=function(a){"use strict";this.freeze(),this.$6["goto"](a)};n.prototype.freeze=function(){"use strict";this.$11||(this.$6.freezeProps(),this.$11=!0)};n.prototype.resume=function(){"use strict";this.$11=!1};n.prototype.getPropsToRender=function(){"use strict";return this.$11?this.$6.getProps():this.getProps()};n.prototype.getActiveMosValue=function(a,b,c){"use strict";var d=this.$3.find(function(b){return b.streamInfoID===a});return d&&d.playbackResolutionMos?h(d.playbackResolutionMos,b,c):null};n.prototype.renderOverlay=function(){"use strict";var a=!this.$24&&this.getPropsToRender();a&&b("ReactDOM").render(b("React").createElement(b("VideoDebugOverlay.react"),babelHelpers["extends"]({ref:this.$26},a)),this.$4)};n.prototype.$22=function(a){"use strict";if(a.getTimeRange){var b=a.getTimeRange();return{startTime:b.startTime,endTime:b.endTime,url:a.getURI(),debugInfo:null}}return a};e.exports=n}),null);
__d("PagesLiveCoverVideo.react",["React","VideoComponentContextMenu.react","VideoComponentCover.react","VideoComponentDebugOverlay.react","VideoComponentEmbeddedControls.react","VideoComponentErrorOverlay.react","VideoComponentLiveEndScreen.react","VideoComponentLiveInterruptedScreen.react","VideoComponentLiveVideoIndicator.react","VideoComponentPlayButton.react","VideoComponentStreamingReactionTray.react","VideoComponentVolumeStorage.react","VideoComponentWithFallbackMode.react","VideoComponentWithLiveBroadcast.react","VideoDataContainer.react","VideoPlayer.react","VideoPlayerLoggerSource","VideoPlayerOrigins"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("VideoDataContainer.react"),{videoID:this.props.videoID},b("React").createElement(b("VideoPlayer.react"),{autoplay:!0,height:this.props.renderedHeight,playerOrigin:b("VideoPlayerOrigins").INTERN,subOrigin:b("VideoPlayerLoggerSource").NOT_SPECIFIED_PLEASE_FIX,startMuted:!0,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER},b("React").createElement(b("VideoComponentEmbeddedControls.react"),{showSettingsButton:!0}),b("React").createElement(b("VideoComponentWithLiveBroadcast.react"),null),b("React").createElement(b("VideoComponentPlayButton.react"),null),b("React").createElement(b("VideoComponentCover.react"),null),b("React").createElement(b("VideoComponentLiveVideoIndicator.react"),null),b("React").createElement(b("VideoComponentDebugOverlay.react"),null),b("React").createElement(b("VideoComponentContextMenu.react"),null),b("React").createElement(b("VideoComponentLiveInterruptedScreen.react"),null),b("React").createElement(b("VideoComponentLiveEndScreen.react"),null),b("React").createElement(b("VideoComponentStreamingReactionTray.react"),null),b("React").createElement(b("VideoComponentVolumeStorage.react"),null),b("React").createElement(b("VideoComponentWithFallbackMode.react"),null),b("React").createElement(b("VideoComponentErrorOverlay.react"),null)))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ShowsWebdriverTestDataIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_ITEMS_NOTICE_BOX:"action_items_notice_box",CREATE_SHOW_ADD_DESCRIPTION:"create_show_add_description",CREATE_SHOW_ADD_NAME_FIELD:"create_show_add_name_field",CREATE_SHOW_BUTTON:"create_show-button",SHOW_PAGE_FEATURED_VIDEO_CONTAINER:"SHOW_PAGE_FEATURED_VIDEO_CONTAINER"})}),null);
__d("PagesCoverTrailerState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WATCH_TRAILER:"watch_trailer",RESUME_EPISODE:"resume_episode",LATEST_EPISODE:"latest_episode",LIVE_VIDEO:"live_video",GAMESHOW_VIDEO:"gameshow_video"})}),null);
__d("VideoComponentShowmarkOverlay.react",["ix","cx","fbt","AbstractButton.react","AsyncRequest","Image.react","Layout.react","PopoverMenu.react","React","ReactXUIMenu","ShowCreationFlowStep","ShowsCreationLoggerUtils","VideoShowsLogoUploadDialog.react","XPagesCoverReloadController","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("Layout.react").Column,l=b("Layout.react").FillColumn,m=b("ReactXUIMenu").Item;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.$1=function(){b("ShowsCreationLoggerUtils").log(b("ShowCreationFlowStep").SHOWMARK_CHANGE_CLICK,this.props.pageID,this.props.showCreationFlowSource),this.setState({showEditShowMarkDialog:!0})}.bind(this),this.$2=function(){this.setState({showEditShowMarkDialog:!1})}.bind(this),this.$3=function(){new(b("AsyncRequest"))().setURI(b("XPagesCoverReloadController").getURIBuilder().setFBID("page_id",this.props.pageID).getURI()).send(),this.$2(),this.props.onShowMarkUploadSuccess&&this.props.onShowMarkUploadSuccess()}.bind(this),this.state={showEditShowMarkDialog:!1}}a.prototype.$4=function(){return b("React").createElement(b("Image.react"),{className:"_1o-v",src:this.props.showmarkURL})};a.prototype.$5=function(){if(!this.props.isAdmin)return null;var a=b("React").createElement(b("ReactXUIMenu"),null,b("React").createElement(m,{onClick:this.$1},i._("Change showmark"))),c=b("React").createElement(b("Image.react"),{src:g("115342")}),d=i._("Edit Showmark");return b("React").createElement("div",null,this.state.showEditShowMarkDialog?b("React").createElement(b("VideoShowsLogoUploadDialog.react"),{existingLogoUrl:this.props.showmarkUploadPreviewURL,pageID:this.props.pageID,pageName:this.props.pageName,pageProfilePic:this.props.pageProfilePic,hideDialog:this.$2,onSuccess:this.$3,showCreationFlowSource:this.props.showCreationFlowSource}):null,b("React").createElement("div",{className:"_2210"},b("React").createElement(b("PopoverMenu.react"),{menu:a,position:"below"},b("React").createElement(b("AbstractButton.react"),{className:"_2212",image:c,label:d,labelIsHidden:!0,ref:"button",type:"button"}))))};a.prototype.render=function(){var a=this.props.isShowPageNewCover;return b("React").createElement(b("Layout.react"),{className:(a?"":"_2213")+(a?" _11ro":"")},b("React").createElement(k,null,this.$4()),b("React").createElement(l,null,this.$5()))};e.exports=a}),null);
__d("VideoComponentShowsViewers.react",["cx","fbt","FacepileRounded.react","React","VideoComponent","VideoPlayerStates","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=30;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.state={vpc:null}}a.prototype.enable=function(a){this.setState({vpc:a})};a.prototype.disable=function(){};a.prototype.$1=function(){if(!this.props.data||!this.props.data.showsFollowerData)return null;var a=this.props.data.showsFollowerData.friendsList;if(a==null||a.length===0)return null;a=a.map(function(a){return{image_src:"https://graph.facebook.com/"+a.userId+"/picture?height="+j*2+"&width="+j*2,name:a.userName}});return b("React").createElement(b("FacepileRounded.react"),{direction:"descending",className:(this.props.data.isShowPageNewCover?"":"_1kox")+(this.props.data.isShowPageNewCover?" _66j-":""),imageSize:j,profiles:a,hoverBehavior:"name",borderColor:this.props.data.isShowPageNewCover?"#000000":"#ffffff"})};a.prototype.render=function(){if(!this.props.data||!this.props.data.showsFollowerData)return null;var a=this.props.data.showsFollowerData,c=a.friendCount;a=a.followerCount;var d=this.state.vpc&&this.state.vpc.getState()===b("VideoPlayerStates").PLAYING,e=this.$1();a=c===0?b("React").createElement("span",{className:"_1koz"},h._({"*":"{fan_count} followers","_1":"1 follower"},[h._plural(a,"fan_count",b("intlSummarizeNumber")(a))])):b("React").createElement("span",{className:(this.props.data.isShowPageNewCover?"":"_1koz")+(this.props.data.isShowPageNewCover?" _66j_":"")},h._({"*":{"*":"{fan_count} followers including {friend_count} friends","_1":"{fan_count} followers including 1 friend"},"_1":{"*":"1 follower including {friend_count} friends","_1":"1 follower including 1 friend"}},[h._plural(a,"fan_count",b("intlSummarizeNumber")(a)),h._plural(c,"friend_count",b("intlSummarizeNumber")(c))]));return b("React").createElement("div",{className:(this.props.data.isShowPageNewCover?"":"_1ko-")+(this.props.data.isShowPageNewCover?" _4yj4":"")+(this.props.hideOnPlay?" _s0r":"")+(this.props.hideOnPlay&&d?" _s0s":"")},e,a)};e.exports=b("VideoComponent").createContainer(a,{observedVpcEvents:["stateChange"]})}),null);
__d("VideoShowsMetadataBlock.react",["cx","fbt","invariant","ActorURI","Bootloader","LineClamp.react","Link.react","PagesCoverTrailerState","React","ShimButton.react","UFIConfig","UFIReactionsBlingTokens.react","UFIReactionsProfileBrowserUtils","VideoComponentShowmarkOverlay.react","VideoComponentShowsViewers.react","XUFIReactionsSocialSentenceTooltipController","XUFIReactionTooltipController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){__p&&__p();a.preventDefault();var c=this.props.data.showsFeedbackData;c||i(0,2252);var d=c.actorId;c=c.videoId;d||i(0,2253);c||i(0,2254);var e=b("UFIReactionsProfileBrowserUtils").getDialogURI({actorID:d,feedbackTargetID:c}).toString();b("Bootloader").loadModules(["AsyncDialog"],function(b){b.bootstrap(e,a.currentTarget,"dialog")},"VideoShowsMetadataBlock.react")}.bind(this),c}a.prototype.$1=function(){var a=this.props.data.viewerCoverTrailerState;switch(a){case b("PagesCoverTrailerState").RESUME_EPISODE:return h._("CONTINUE WATCHING");case b("PagesCoverTrailerState").LATEST_EPISODE:return h._("LATEST EPISODE");case b("PagesCoverTrailerState").WATCH_TRAILER:return h._("SHOW TRAILER")}return null};a.prototype.$3=function(){__p&&__p();var a=this.props.data,c=a.viewerCoverTrailerState,d=a.showsFeedbackData;a=a.showsVideoData;if(c===b("PagesCoverTrailerState").WATCH_TRAILER)return b("React").createElement(b("VideoComponentShowsViewers.react"),{data:this.props.data,hideOnPlay:!1});else{if(!d)return null;c={};if(d&&d.reactionCountMap){var e=d.reactionCountMap;for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]={"default":e[f]})}e=d.commentCount;var g=d.commentsCountReduced,i=d.reactionsCountReduced,j=this.$4({actorforpost:d.actorId,entidentifier:d.videoId});j=a&&e&&g&&e>0?b("React").createElement("span",{className:"_1m-9"},b("React").createElement(b("ShimButton.react"),babelHelpers["extends"]({},j,{className:"_o12",inline:!0,onClick:this.$2}),i)," ","\xb7"," ",b("React").createElement(b("Link.react"),{href:a.uri},b("React").createElement("span",{className:"_o12"},h._({"*":"{number} comments","_1":"1 comment"},[h._plural(e,"number",g)])))):null;return b("React").createElement("div",{className:"_1m-8"},b("React").createElement("span",null,b("React").createElement(b("UFIReactionsBlingTokens.react"),{className:"_4ar- _ipn _1m-f",feedback:{actorforpost:d.actorId,entidentifier:d.videoId,reactioncountmap:c},max:3,size:"16"})),j)}};a.prototype.$4=function(a){var c=a.actorforpost;a=a.entidentifier;var d=b("UFIConfig").reactionsHasTooltipBreakdown?b("XUFIReactionsSocialSentenceTooltipController"):b("XUFIReactionTooltipController");return{"data-hover":"tooltip","data-tooltip-uri":b("ActorURI").create(d.getURIBuilder().setString("ft_ent_identifier",a).getURI(),c)}};a.prototype.$5=function(){var a=this.props.data,c=a.viewerCoverTrailerState,d=a.showsVideoData;a=a.showsData;return d&&(c===b("PagesCoverTrailerState").LATEST_EPISODE||c===b("PagesCoverTrailerState").RESUME_EPISODE)?d.description:a.showDescription};a.prototype.$6=function(){var a=this.props.data.viewerCoverTrailerState;return(a===b("PagesCoverTrailerState").LATEST_EPISODE||a===b("PagesCoverTrailerState").RESUME_EPISODE)&&this.props.data.showsVideoData?b("React").createElement("span",{className:"_2yyi"},this.props.data.showsVideoData.title):null};a.prototype.$7=function(){var a=this.props.data.showsData,c=a.showmarkURL,d=a.showmarkUploadPreviewURL,e=a.title;a=a.profilePic;return!c||!d?null:b("React").createElement(b("VideoComponentShowmarkOverlay.react"),{showmarkURL:c.toString(),showmarkUploadPreviewURL:d.toString(),pageID:this.props.pageID,pageName:e,pageProfilePic:a,isAdmin:this.props.data.isAdmin,isShowPageNewCover:this.props.data.isShowPageNewCover,onShowMarkUploadSuccess:this.props.onShowMarkUploadSuccess,showCreationFlowSource:this.props.showCreationFlowSource})};a.prototype.render=function(){return b("React").createElement("div",{className:"_66ev"},this.$7(),b("React").createElement("div",null,b("React").createElement("span",{className:"_2xn9"},this.$1()),this.$6(),b("React").createElement(b("LineClamp.react"),{fitHeightToShorterText:!0,lineHeight:18,lines:4,className:"_39rp"},this.$5()),this.$3()))};a.defaultProps={renderedHeight:461.25,renderedWidth:820};e.exports=a}),null);
__d("VideoComponentShowsTrailerOverlay.react",["ix","cx","fbt","ComposerEntryPointRef","ComposerXVideoUploadDialogController","ContextualDialogArrow","DateConsts","FileInput.react","Image.react","LeftRight.react","LineClamp.react","OptimisticVideoProgressBar.react","PagesCoverTrailerState","PopoverMenu.react","ProgressBar.react","React","ReactXUIMenu","ShowCreationFlowStep","ShowsCreationLoggerUtils","VideoComponent","VideoComponentShowmarkOverlay.react","VideoHomePlayButtonThumbnailOverlay.react","VideoPlayerStates","XUIOverlayButton.react","XUIText.react","fbglyph","formatDurationSeconds","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("DateConsts").MS_PER_SEC,l=b("ReactXUIMenu").Item;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.$4=function(){b("ShowsCreationLoggerUtils").log(b("ShowCreationFlowStep").SHOW_TRAILER_UPLOAD_NEW_CLICKED,this.props.pageID,this.props.showCreationFlowSource)}.bind(this),this.$5=function(){b("ShowsCreationLoggerUtils").log(b("ShowCreationFlowStep").SHOW_TRAILER_UPLOAD_NEW_FILE_SELECTED,this.props.pageID,this.props.showCreationFlowSource);var a=this.refs.fileInput;if(!a)return;a=a.getFileInput();b("ComposerXVideoUploadDialogController").showDialog({targetID:this.props.pageID,fileInput:a,composerEntryPointRef:b("ComposerEntryPointRef").PAGE_TRAILER});this.props.onOpenUploadDialog&&this.props.onOpenUploadDialog()}.bind(this),this.state={vpc:null}}a.prototype.enable=function(a){this.setState({vpc:a})};a.prototype.disable=function(){};a.prototype.$1=function(){var a=this.props.data.showsData,c=a.showmarkURL,d=a.showmarkUploadPreviewURL,e=a.title;a=a.profilePic;return!c||!d?null:b("React").createElement(b("VideoComponentShowmarkOverlay.react"),{showmarkURL:c.toString(),showmarkUploadPreviewURL:d.toString(),pageID:this.props.pageID,pageName:e,pageProfilePic:a,isAdmin:this.props.isAdmin,isShowPageNewCover:!1,onShowMarkUploadSuccess:this.props.onShowMarkUploadSuccess,showCreationFlowSource:this.props.showCreationFlowSource})};a.prototype.$2=function(){var a=this.props.data.viewerCoverTrailerState;switch(a){case b("PagesCoverTrailerState").RESUME_EPISODE:return i._("Continue watching");case b("PagesCoverTrailerState").LATEST_EPISODE:return i._("Latest episode");case b("PagesCoverTrailerState").WATCH_TRAILER:return i._("Trailer")}return null};a.prototype.$3=function(){var a=this.props.data,c=a.showsVideoData;a=a.viewerCoverTrailerState;a=a===b("PagesCoverTrailerState").WATCH_TRAILER;c=c?c.title:null;return b("React").createElement("div",{className:"_39rm"},this.$1(),a?null:[b("React").createElement("div",{className:"_39ro",key:"title"},b("React").createElement(b("LineClamp.react"),{lines:2},c)),b("React").createElement("div",{className:"_39rn",key:"header"},this.$2())])};a.prototype.$6=function(){if(!this.props.isAdmin)return null;var a=b("React").createElement(b("ReactXUIMenu"),null,b("React").createElement(l,{renderas:"label"},b("React").createElement(b("FileInput.react"),{accept:"video/mp4, video/quicktime, video/*",ref:"fileInput",onClick:this.$4,onChange:this.$5},b("React").createElement("a",{style:{color:"inherit",textDecoration:"none"}},i._("Upload new video")))));return b("React").createElement("div",{className:"_20kk"},b("React").createElement(b("PopoverMenu.react"),{layerBehaviors:[b("ContextualDialogArrow")],menu:a,position:"below"},b("React").createElement(b("XUIOverlayButton.react"),{className:"_20kl",image:b("React").createElement(b("Image.react"),{src:g("125727")}),label:i._("Change Trailer"),href:"#"})))};a.prototype.$7=function(a){var c=b("React").createElement(b("Image.react"),{className:"_39rl",src:g("125848")});return b("React").createElement("div",{className:"_39rs"},c,b("React").createElement("span",{className:"_39rt"},b("formatDurationSeconds")(a/k)))};a.prototype.$8=function(){var a=this.props.data,c=a.isShowPageNewCover;a=a.showsVideoData;return c&&a?b("React").createElement(b("XUIText.react"),{className:"_3_sk"},b("formatDurationSeconds")(a.duration/k)):null};a.prototype.$9=function(){var a=this.props.data,c=a.showsVideoData;a=a.viewerCoverTrailerState;var d=c?c.duration:100;c=c?c.startTimestamp:40;return a===b("PagesCoverTrailerState").RESUME_EPISODE&&d&&c?b("React").createElement("div",{className:"_tn4"},b("React").createElement(b("ProgressBar.react"),{className:"_df_",max:d,min:0,value:c})):null};a.prototype.$10=function(){var a=this.props.data.viewerCoverTrailerState;return a===b("PagesCoverTrailerState").WATCH_TRAILER?b("React").createElement(b("VideoHomePlayButtonThumbnailOverlay.react"),{size:"72",className:"_3_sl"}):null};a.prototype.render=function(){var a=this.state.vpc&&this.state.vpc.getState()===b("VideoPlayerStates").PLAYING,c=this.props.isTrailer&&(!this.state.vpc||this.state.vpc.getState()===b("VideoPlayerStates").READY),d=this.props.data.isShowPageNewCover;return d?b("React").createElement("div",null,b("React").createElement("div",{className:b("joinClasses")("_39s3"+(!this.props.isTrailer&&a?" _s0s":"")+(c?" _31ye":""),this.props.className)},this.props.uploadedVideoData?b("React").createElement("div",{className:"_20km"},b("React").createElement(b("OptimisticVideoProgressBar.react"),{videoID:this.props.uploadedVideoData.videoID,videoAssetID:this.props.uploadedVideoData.videoAssetID,width:this.props.width,onReadyEvent:"pageTrailerVideoEncode/complete"})):null,b("React").createElement("div",{className:this.props.uploadedVideoData!=null?"hidden_elem":""},this.$6()),this.$9()),this.$8(),this.$10()):b("React").createElement("div",{className:b("joinClasses")("_39s3"+(!this.props.isTrailer&&a?" _s0s":"")+(c?" _31ye":""),this.props.className)},b("React").createElement("div",{className:"_39s4"}),b("React").createElement("div",{className:"_1fth"}),this.props.uploadedVideoData?b("React").createElement("div",{className:"_20km"},b("React").createElement(b("OptimisticVideoProgressBar.react"),{videoID:this.props.uploadedVideoData.videoID,videoAssetID:this.props.uploadedVideoData.videoAssetID,width:this.props.width,onReadyEvent:"pageTrailerVideoEncode/complete"})):null,b("React").createElement("div",{className:this.props.uploadedVideoData!=null?"hidden_elem":""},b("React").createElement(b("LeftRight.react"),{className:"_20kn _1fti"},b("React").createElement("div",{className:"_39s5"},this.$3()),this.$6())),this.$9())};e.exports=b("VideoComponent").createContainer(a,{observedVpcEvents:["stateChange"]})}),null);
__d("VideoComponentShowsVideoLink.react",["cx","fbt","React","VideoComponent","VideoLink.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.enable=function(a){};a.prototype.disable=function(){};a.prototype.render=function(){var a=h._("Play Episode");return b("React").createElement(b("VideoLink.react"),babelHelpers["extends"]({onClick:this.props.onClick,useTahoe:!0,referrer:this.props.referrer},this.props.data),b("React").createElement("div",{className:"_1hvs"},b("React").createElement("i",{className:"_3htz _1jto"+(this.props.hideButton?"":" _bsl")},b("React").createElement("input",{"aria-label":a,type:"button",className:"_yak"}))))};function a(){i.apply(this,arguments)}e.exports=b("VideoComponent").createContainer(a)}),null);
__d("VideoShowsAdminAddTrailer.react",["ix","cx","fbt","AbstractButton.react","ComposerEntryPointRef","ComposerXVideoUploadDialogController","FileInput.react","Image.react","OptimisticVideoProgressBar.react","React","Text.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=this.refs.fileInput;if(!a)return;a=a.getFileInput();b("ComposerXVideoUploadDialogController").showDialog({targetID:this.props.pageID,fileInput:a,composerEntryPointRef:b("ComposerEntryPointRef").PAGE_TRAILER});this.props.onOpenDialog&&this.props.onOpenDialog()}.bind(this),c}a.prototype.render=function(){return!this.props.isAdmin?null:b("React").createElement("div",{style:{width:this.props.width,height:this.props.height},className:"_1ew_ _5-9f"},b("React").createElement("div",{className:"_5-9g"},b("React").createElement("div",{className:"_4xv5"},b("React").createElement(b("Image.react"),{className:"_4xv6",src:g("122642")})),b("React").createElement(b("Text.react"),{className:"_5-9h",style:{fontSize:16,fontWeight:"600",color:"white"}},i._("Introduce your show with a trailer")),b("React").createElement(b("Text.react"),{className:"_40em"},i._("Your trailer is a 16:9 video that is used to promote your show across Facebook. It should be less than 2 minutes 30 seconds long.")),b("React").createElement(b("Text.react"),{className:"_40em _3-8w"},i._("Your trailer and most recent episodes will play in this space.")),this.props.uploadedVideoData?null:b("React").createElement(b("FileInput.react"),{accept:"video/mp4, video/quicktime, video/*",ref:"fileInput",onChange:this.$1},b("React").createElement(b("AbstractButton.react"),{className:"_5-9j",label:i._("Add Trailer"),href:"#"})),this.props.uploadedVideoData?b("React").createElement(b("OptimisticVideoProgressBar.react"),{videoID:this.props.uploadedVideoData.videoID,videoAssetID:this.props.uploadedVideoData.videoAssetID,width:this.props.width,onReadyEvent:"pageTrailerVideoEncode/complete"}):null))};e.exports=a}),null);
__d("VideoShowsTrailer.react",["cx","Arbiter","AsyncRequest","ComposerEntryPointRef","DateConsts","OnVisible.react","PagesCoverTrailerState","PagesEventObserver","PagesEventType","React","ShowCreationFlowStep","ShowsCreationLoggerUtils","VideoComponentCover.react","VideoComponentEmbeddedControls.react","VideoComponentShowsTrailerOverlay.react","VideoComponentShowsVideoLink.react","VideoComponentShowsViewers.react","VideoComponentWithLoopingPlayback.react","VideoDataContainer.react","VideoPlayer.react","VideoPlayerLoggerSource","VideoPlayerOrigins","VideoPlayerReason","VideoShowsAdminAddTrailer.react","XPagesCoverReloadController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("DateConsts").MS_PER_SEC,j=-100;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.$1=null,this.$2=null,this.$3=null,this.$4=!1,this.$6=function(){var a=this.refs.player;a&&a.vpc.isState("playing")&&(this.$4=!0,a.vpc.pause(b("VideoPlayerReason").PAGE_VISIBILITY))}.bind(this),this.$7=function(){if(!this.$4)return;this.$4=!1;var a=this.refs.player;a.vpc.play(b("VideoPlayerReason").PAGE_VISIBILITY)}.bind(this),this.$8=function(){this.$5("COVER_TRAILER_CLICK")}.bind(this),this.$9=function(){return b("VideoDataContainer.react").renderSpinner(this.props.renderedWidth,this.props.renderedHeight)}.bind(this),this.state={uploadedVideoData:null}}a.prototype.componentDidMount=function(){this.$5("COVER_TRAILER_IMPRESSION"),this.$1=b("Arbiter").subscribe("videoUpload/complete",function(a,c){a=b("ComposerEntryPointRef").PAGE_TRAILER+"_"+this.props.pageID;c.originalComposerID==a&&(b("ShowsCreationLoggerUtils").log(b("ShowCreationFlowStep").SHOW_TRAILER_UPLOADED,this.props.pageID,this.props.showCreationFlowSource,new Map([["video_id",c.videoID]])),this.setState({uploadedVideoData:c}))}.bind(this)),this.$2=b("Arbiter").subscribe("pageTrailerVideoEncode/complete",function(a,c){b("ShowsCreationLoggerUtils").log(b("ShowCreationFlowStep").SHOW_TRAILER_ENCODE_SUCCESS,this.props.pageID,this.props.showCreationFlowSource,new Map([["video_id",c.videoID]])),new(b("AsyncRequest"))().setURI(b("XPagesCoverReloadController").getURIBuilder().setFBID("page_id",this.props.pageID).getURI()).setHandler(function(a){this.setState({uploadedVideoData:null})}.bind(this)).send()}.bind(this)),this.$3=b("Arbiter").subscribe("videoUpload/cancel",function(a,c){a=b("ComposerEntryPointRef").PAGE_TRAILER+"_"+this.props.pageID;c.composerID==a&&b("ShowsCreationLoggerUtils").log(b("ShowCreationFlowStep").SHOW_TRAILER_UPLOAD_CANCELLED,this.props.pageID,this.props.showCreationFlowSource)}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1),this.$2&&b("Arbiter").unsubscribe(this.$2),this.$3&&b("Arbiter").unsubscribe(this.$3)};a.prototype.$5=function(a){var c,d,e=this.props.data;if(!e)return;d=(d=e)!=null?(d=d.showsVideoData)!=null?d.videoID:d:d;c=(c=e)!=null?(c=c.showsVideoData)!=null?c.startTimestamp:c:c;b("PagesEventObserver").notify(b("PagesEventType")[a],this.props.pageID,{videoID:d,startTimestamp:c,viewerCoverTrailerState:e.viewerCoverTrailerState})};a.prototype.$10=function(){var a;return((a=this.props)!=null?(a=a.data)!=null?a.viewerCoverTrailerState:a:a)===b("PagesCoverTrailerState").WATCH_TRAILER};a.prototype.$11=function(){return this.$10()?b("React").createElement(b("VideoComponentEmbeddedControls.react"),{hidePlaybackControl:!0,hideRemainingTime:!0,showFullscreenButton:!1,showSettingsButton:!1}):null};a.prototype.render=function(){var a=this.props.data;if(!a)return null;var c=a.showsVideoData,d=a.videoLinkData,e=a.isAdmin,f=a.isAutoplayGated;if(!c||!d)return b("React").createElement(b("VideoShowsAdminAddTrailer.react"),{isAdmin:e,uploadedVideoData:this.state.uploadedVideoData,width:this.props.renderedWidth,height:this.props.renderedHeight,pageID:this.props.pageID,onOpenDialog:this.props.onOpenUploadDialog});d=c.startTimestamp?c.startTimestamp/i:0;var g=this.props.referrer===b("VideoPlayerOrigins").VIDEO_HOME?b("VideoPlayerOrigins").VIDEO_HOME:b("VideoPlayerOrigins").PAGE_TIMELINE,h=this.props.referrer===b("VideoPlayerOrigins").VIDEO_HOME?b("VideoPlayerLoggerSource").PAGES_TIMELINE_PAGES_COVER:b("VideoPlayerLoggerSource").PAGES_COVER;return b("React").createElement(b("OnVisible.react"),{className:"_28pj",buffer:j,onHidden:this.$6,onVisible:this.$7},b("React").createElement(b("VideoDataContainer.react"),{key:c.videoID,videoID:c.videoID,renderLoading:this.$9},b("React").createElement(b("VideoPlayer.react"),{allowCrossPageTransition:!0,autoplay:this.$10()&&!f,forceHD:!0,height:this.props.renderedHeight,offsetType:"vertical",playerOrigin:g,subOrigin:h,ref:"player",startMuted:!0,startTimestamp:d,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,width:this.props.renderedWidth},b("React").createElement(b("VideoComponentCover.react"),{hiddenAfterFinish:!0,showWhileBuffering:!0}),!a.isImmersiveShowPage&&b("React").createElement(b("VideoComponentShowsTrailerOverlay.react"),{data:a,isAdmin:e,isTrailer:this.$10(),pageID:this.props.pageID,uploadedVideoData:this.state.uploadedVideoData,width:this.props.renderedWidth,onOpenUploadDialog:this.props.onOpenUploadDialog,onShowMarkUploadSuccess:this.props.onShowMarkUploadSuccess}),!a.isShowPageNewCover&&!a.isImmersiveShowPage&&b("React").createElement(b("VideoComponentShowsViewers.react"),{data:a,hideOnPlay:!this.$10()}),b("React").createElement(b("VideoComponentWithLoopingPlayback.react"),{forceLooping:!0}),b("React").createElement(b("VideoComponentShowsVideoLink.react"),{data:a.videoLinkData,hideButton:this.$10(),onClick:this.$8,referrer:this.props.referrer}),a.isShowPageNewCover?null:this.$11())))};a.defaultProps={renderedHeight:461.25,renderedWidth:820};e.exports=a}),null);
__d("PagesCoverComponent.react",["cx","PageOnTourOverlay.react","PagesCoverLoadingScreen.react","PagesCoverPhoto.react","PagesCoverSlideshow.react","PagesCoverType","PagesCoverVideo.react","PagesLiveCoverVideo.react","React","ShowCreationFlowSource","ShowsWebdriverTestDataIDs","VideoShowsMetadataBlock.react","VideoShowsTrailer.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=null,d=null;switch(a.currentCoverType){case b("PagesCoverType").LOADING:c=b("React").createElement(b("PagesCoverLoadingScreen.react"),null);break;case b("PagesCoverType").COVER_LIVE_VIDEO:var e=a.coverData.cover_live_video,f=e.videoID;e=e.renderedHeight;f&&(c=b("React").createElement(b("PagesLiveCoverVideo.react"),{renderedHeight:e,videoID:f}),d="_3wu6");break;case b("PagesCoverType").COVER_TRAILER:a.coverData.cover_trailer.isShowPageNewCover&&!a.coverData.cover_trailer.isImmersiveShowPage?c=b("React").createElement("div",{className:"_2k2l"},b("React").createElement("div",{className:"_66et"},b("React").createElement(b("VideoShowsMetadataBlock.react"),{data:a.coverData.cover_trailer,pageID:a.pageID,showCreationFlowSource:b("ShowCreationFlowSource").SHOW_PERMALINK})),b("React").createElement("div",{className:"_66-8","data-testid":b("ShowsWebdriverTestDataIDs").SHOW_PAGE_FEATURED_VIDEO_CONTAINER},b("React").createElement("div",{className:"_66eu"}),b("React").createElement(b("VideoShowsTrailer.react"),{data:a.coverData.cover_trailer,pageID:a.pageID,referrer:a.referrer,renderedHeight:336,renderedWidth:598,showCreationFlowSource:b("ShowCreationFlowSource").SHOW_PERMALINK}))):c=b("React").createElement("span",{"data-testid":b("ShowsWebdriverTestDataIDs").SHOW_PAGE_FEATURED_VIDEO_CONTAINER},b("React").createElement(b("VideoShowsTrailer.react"),{data:a.coverData.cover_trailer,pageID:a.pageID,showCreationFlowSource:b("ShowCreationFlowSource").SHOW_PERMALINK}));d="_3wu6";break;case b("PagesCoverType").COVER_VIDEO:c=b("React").createElement(b("PagesCoverVideo.react"),{isEditMode:a.isEditMode,videoData:a.coverData.cover_video});d="_3wu6";break;case b("PagesCoverType").COVER_SLIDESHOW:c=b("React").createElement(b("PagesCoverSlideshow.react"),babelHelpers["extends"]({isEditMode:a.isEditMode,pageID:a.pageID},a.coverData.cover_slideshow));d="_668x";break;case b("PagesCoverType").COVER_PHOTO:default:c=b("React").createElement(b("PagesCoverPhoto.react"),a.coverData.cover_photo)}return b("React").createElement("div",null,c,b("React").createElement(b("PageOnTourOverlay.react"),{className:d}))}e.exports=a}),null);
__d("XPagesCoverRemoveAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_remove/",{})}),null);
__d("PagesCoverRemoveCoverConfirmationDialog.react",["fbt","AsyncRequest","PagesCoverAction","PagesCoverDispatcher","PagesProfileTestID","React","XPagesCoverRemoveAsyncController","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogConfirmButton.react","XUIDialogFooter.react","XUIDialogTitle.react","gkx","videoPageContextualColorFetchUpdatedThemeColor"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=445;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=b("XPagesCoverRemoveAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(a).setData({page_id:this.props.pageID}).setHandler(function(){b("gkx")("678704")&&b("videoPageContextualColorFetchUpdatedThemeColor")(this.props.pageID)}.bind(this)).send();this.props.onToggle(!1);b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").COVER_REMOVING})}.bind(this),c}a.prototype.render=function(){return!this.props.shown?null:b("React").createElement(b("XUIDialog.react"),{onToggle:this.props.onToggle,shown:!0,width:i},b("React").createElement(b("XUIDialogTitle.react"),null,g._("Remove cover?")),b("React").createElement(b("XUIDialogBody.react"),null,g._("Are you sure that you want to remove this cover?")),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogConfirmButton.react"),{"data-testid":b("PagesProfileTestID").COVER_PHOTO_REMOVE_CONFIRM_BUTTON,onClick:this.$1,use:"confirm"})))};a.propTypes={coreData:c.object.isRequired,onToggle:c.func.isRequired,pageID:c.string.isRequired,shown:c.bool.isRequired};e.exports=a}),null);
__d("PagesLiveCoverVideoActionCreator",["PagesCoverAction","PagesCoverDispatcher"],(function(a,b,c,d,e,f){"use strict";a={onLiveCoverVideoEnabled:function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").LIVE_VIDEO_ENABLE})},onLiveCoverVideoDisable:function(){b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").LIVE_VIDEO_DISABLE})}};e.exports=a}),null);
__d("XEventTourBadgeOnPagesCoverController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/events/tour/badge/",{page_id:{type:"FBID",required:!0},tour_ids:{type:"FBIDSet"},enable:{type:"Bool",defaultValue:!1},entry_point:{type:"Enum",defaultValue:"page_cover",enumType:1}})}),null);
__d("XPagesCoverLiveVideoToggleAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_live_video_toggle/",{})}),null);
__d("PagesCoverEditMenu.react",["ix","cx","fbt","invariant","ActorURI","AsyncRequest","ContextualDialogArrow","EventTourBadgeEnum","FileInput.react","FileInputUploader","Image.react","PagesCoverAction","PagesCoverCameraButton.react","PagesCoverDispatcher","PagesCoverSlideshowActionCreator","PagesCoverType","PagesCoverVideoActionCreator","PagesCoverVideoBrowserDialog.react","PagesLiveCoverVideoActionCreator","PagesProfileTestID","PhotoBrowserDialogEndpointType","PhotoBrowserDialogPhotoGeneratorType","PopoverMenu.react","React","ReactDOM","ReactXUIMenu","PagesVideoUploader.react","SimpleXUIDialog","XEventTourBadgeOnPagesCoverController","XPagesCoverPhotoUploadAsyncController","XPhotoBrowserDialogController","XPagesCoverLiveVideoToggleAsyncController","XPagesCoverVideoUploaderController","PagesCoverRemoveCoverConfirmationDialog.react","asset","fbglyph"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("ReactXUIMenu").Item;c=babelHelpers.inherits(a,b("React").PureComponent);k=c&&c.prototype;function a(a){__p&&__p();k.constructor.call(this,a),this.state={showRemoveCoverConfirmationDialog:!1,showCoverVideoBrowserDialog:!1,videoUploaderInitParams:null,shouldExpandMenu:!1},this.$8=function(){this.setState({showCoverVideoBrowserDialog:!0})}.bind(this),this.$9=function(){this.setState({showCoverVideoBrowserDialog:!1})}.bind(this),this.$10=function(a){this.setState({showRemoveCoverConfirmationDialog:a})}.bind(this),this.$11=function(a){b("PagesCoverVideoActionCreator").editCoverVideo(this.props.pageID,a),this.setState({showCoverVideoBrowserDialog:!1})}.bind(this),this.$12=function(a){this.$2=a}.bind(this),this.$13=function(a,c,d){var e=this.props.coverData.cover_video,f=e.containerWidth;e=e.containerHeight;a=b("PagesCoverVideoActionCreator").validateCoverVideoMetadata(this.props.pageID,a,c,f,e);a&&b("PagesCoverVideoActionCreator").showCoverVideoUploadUI(d)}.bind(this),this.$14=function(a){var c=this.props.coverData.cover_video,d=c.containerWidth;c=c.containerHeight;b("PagesCoverVideoActionCreator").encodeFinished(this.props.pageID,a,d,c)}.bind(this),this.$17=function(a){b("PagesCoverVideoActionCreator").reloadCoverWithErrorDialog(this.props.pageID,a)}.bind(this),this.$18=function(){__p&&__p();var a=this.props.coverData.cover_live_video;!a&&j(0,1474);var c=a.isEnabled?i._("Don't Show Your Live Video as Your Cover Photo"):i._("Show Your Live Video as Your Cover Photo"),d=a.isEnabled?i._("The next time you go live, your broadcast will no longer appear at the top of your Page."):i._("The next time you go live, your broadcast will appear at the top of your Page. It will automatically be replaced by your most recent live video.");b("SimpleXUIDialog").showConfirm(d,c,function(c){if(!c)return;c=b("XPagesCoverLiveVideoToggleAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({page_id:this.props.pageID,is_enabled:!a.isEnabled}).setHandler(function(a){a=a.payload;a?b("PagesLiveCoverVideoActionCreator").onLiveCoverVideoEnabled():b("PagesLiveCoverVideoActionCreator").onLiveCoverVideoDisable()}).send()}.bind(this))}.bind(this),this.$20=function(){b("PagesCoverSlideshowActionCreator").enterEditMode(this.props.pageID)}.bind(this),this.$27=function(){this.setState({showRemoveCoverConfirmationDialog:!0})}.bind(this),this.$24=function(){var a=this.props.coreData.currentCoverType;if(a===b("PagesCoverType").COVER_PHOTO)b("PagesCoverDispatcher").dispatch({data:{isPreviewMode:!0},type:b("PagesCoverAction").PHOTO_PREVIEWING});else if(a===b("PagesCoverType").COVER_VIDEO){a=this.props.coverData.cover_video.videoID;b("PagesCoverVideoActionCreator").editCoverVideo(this.props.pageID,a)}}.bind(this),this.$16=function(a,c){if(c)return;a=b("ActorURI").create(b("XPagesCoverPhotoUploadAsyncController").getURIBuilder().setFBID("page_id",this.props.pageID).getURI(),this.props.pageID);new(b("FileInputUploader"))(b("ReactDOM").findDOMNode(this.$2)).setURI(a).setAllowCrossOrigin(!0).send();b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").PHOTO_UPLOADING})}.bind(this),this.$26=function(){var a=this.props.coreData.eventTourBadgeInfo.eventTourBadgeStatus;if(a===b("EventTourBadgeEnum").NO_TOUR)return;a=b("XEventTourBadgeOnPagesCoverController").getURIBuilder().setFBID("page_id",this.props.pageID).setBool("enable",a===b("EventTourBadgeEnum").TOUR_BADGE_HIDDEN).getURI();new(b("AsyncRequest"))(a).setHandler(function(a){a.payload&&b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").ON_TOUR_BADGE_UPDATED,data:a.payload})}).send();b("PagesCoverDispatcher").dispatch({type:b("PagesCoverAction").LOADING})}.bind(this),this.$29=function(){this.setState({shouldExpandMenu:!0})}.bind(this),this.$30=function(){this.setState({shouldExpandMenu:!1})}.bind(this),this.$1=null,this.$2=null}a.prototype.componentDidMount=function(){this.props.coreData.canViewerEditProfile&&this.$3()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.coreData.hasCoverSet!==this.props.coreData.hasCoverSet&&(this.$1=null),a.coreData.canViewerEditProfile!==this.props.coreData.canViewerEditProfile&&this.$3()};a.prototype.$3=function(){var a=b("ActorURI").create(b("XPagesCoverVideoUploaderController").getURIBuilder().setFBID("page_id",this.props.pageID).getURI(),this.props.pageID);new(b("AsyncRequest"))(a).setHandler(function(a){this.setState({videoUploaderInitParams:a.payload.video_uploader_params})}.bind(this)).send()};a.prototype.$4=function(){return!!this.props.coreData.hasCoverSet};a.prototype.$5=function(){return!this.$4()?i._("Add a Cover"):i._("Change Cover")};a.prototype.$6=function(){if(!this.props.coverData.cover_photo.pageHasPhotos||this.props.coreData.shouldHideCoverPhotoEditOption)return null;var a=b("XPhotoBrowserDialogController").getURIBuilder().setEnum("endpoint",b("PhotoBrowserDialogEndpointType").PAGES_COVER_JS).setEnum("generator",b("PhotoBrowserDialogPhotoGeneratorType").PAGE).setString("data","pages_cover_photo").setInt("id",this.props.pageID).getURI();return b("React").createElement(l,{href:a,rel:"dialog"},i._("Choose from photos"))};a.prototype.$7=function(){var a;a=!!((a=this.props)!=null?(a=a.coverData)!=null?(a=a.cover_video)!=null?a.shouldShowChooseFromCoverVideoMenu:a:a:a);return!a?null:b("React").createElement(l,{onclick:this.$8},i._("Choose from videos"))};a.prototype.$15=function(){if(this.props.coreData.disableCoverVideoUploadOption)return b("React").createElement(l,{renderas:"label"},b("React").createElement(b("FileInput.react"),{accept:"image/*","data-testid":b("PagesProfileTestID").COVER_PHOTO_UPLOAD_MENU_ITEM,display:"inline-block",name:"cover_pic",onChange:this.$16,ref:this.$12},b("React").createElement("a",{className:"_3ihw",href:"#"},i._("Upload Photo"))));var a=this.state.videoUploaderInitParams;if(!a)return null;var c=this.props.coreData.shouldHideCoverPhotoEditOption?i._("Upload Video"):i._("Upload photo\/video");return b("React").createElement(l,{renderas:"label"},b("React").createElement(b("PagesVideoUploader.react"),{"data-testid":b("PagesProfileTestID").COVER_PHOTO_UPLOAD_MENU_ITEM,extraAccept:this.props.coreData.shouldHideCoverPhotoEditOption?"":"image/*",fileInputRef:this.$12,label:c,labelClassName:"_3ihw",onChange:this.$16,onEncodeFinished:this.$14,onEncodeProgressed:b("PagesCoverVideoActionCreator").encodeProgressed,onEncodeStarted:b("PagesCoverVideoActionCreator").encodeStarted,onPostFailed:this.$17,onUploadFailed:this.$17,onUploadProgressed:b("PagesCoverVideoActionCreator").uploadProgressed,onUploadStarted:b("PagesCoverVideoActionCreator").uploadStarted,onVideoMetadataLoaded:this.$13,videoUploaderInitParams:a}))};a.prototype.$19=function(){var a=this.props.coverData.cover_live_video;if(!a.canEnable)return null;a=a.isEnabled?i._("Don't Show Live Video"):i._("Show Live Video");return b("React").createElement(l,{onClick:this.$18},a)};a.prototype.$21=function(){var a;a=(a=this.props)==null?void 0:a.coverData.cover_slideshow;if(!a||!a.isCoverSlideshowEnabled)return null;a=a.shouldShowMenuNux?b("React").createElement(b("Image.react"),{src:g("617256"),style:{verticalAlign:"middle"}}):null;var c=this.props.coreData.currentCoverType===b("PagesCoverType").COVER_SLIDESHOW?i._("Edit cover area"):i._("Create cover area");return b("React").createElement(l,{onclick:this.$20},c,a)};a.prototype.$22=function(){var a;a=(a=this.props)!=null?(a=a.coverData)!=null?a.cover_slideshow:a:a;if(!a||!a.isCoverSlideshowEnabled)return null;a=a.shouldShowMenuNux?b("React").createElement(b("Image.react"),{src:g("115777"),style:{verticalAlign:"middle"}}):null;var c=this.props.coreData.currentCoverType===b("PagesCoverType").COVER_SLIDESHOW?i._("Edit slideshow"):i._("Create slideshow");return b("React").createElement(l,{onclick:this.$20},c,a)};a.prototype.$23=function(){var a;a=(a=this.props.coverData)!=null?(a=a.cover_video)!=null?a.isFromParentPage:a:a;return!this.$4()||this.props.coreData.currentCoverType===b("PagesCoverType").COVER_VIDEO&&a||this.props.coreData.currentCoverType===b("PagesCoverType").COVER_SLIDESHOW?null:b("React").createElement(l,{onclick:this.$24},i._("Reposition"))};a.prototype.$25=function(){switch(this.props.coreData.eventTourBadgeInfo.eventTourBadgeStatus){case b("EventTourBadgeEnum").TOUR_BADGE_HIDDEN:return b("React").createElement(l,{onclick:this.$26},i._("Show tour info"));case b("EventTourBadgeEnum").TOUR_BADGE_SHOWN:return b("React").createElement(l,{onclick:this.$26},i._("Hide tour info"));default:return null}};a.prototype.$28=function(){var a;a=(a=this.props.coverData)!=null?(a=a.cover_video)!=null?a.isFromParentPage:a:a;return!this.$4()||this.props.coreData.currentCoverType===b("PagesCoverType").COVER_VIDEO&&a?null:b("React").createElement(l,{"data-testid":b("PagesProfileTestID").COVER_PHOTO_REMOVE_MENU_ITEM,onclick:this.$27},i._("Remove"))};a.prototype.render=function(){if(!this.props.coreData.canViewerEditProfile||!this.state.videoUploaderInitParams)return null;var a=b("React").createElement(b("ReactXUIMenu"),null,this.props.coreData.shouldHideCoverPhotoEditOption?this.$21():null,this.$6(),this.$7(),this.$15(),this.$19(),this.props.coreData.shouldHideCoverPhotoEditOption?null:this.$22(),this.$23(),this.$25(),this.$28());return b("React").createElement(b("PopoverMenu.react"),{className:"_3ihv"+(this.props.coreData.shouldShowEditMenuForAdmins?"":" hidden_elem"),layerBehaviors:[b("ContextualDialogArrow")],menu:a,onBlur:this.$30,onFocus:this.$29,position:"below"},b("React").createElement(b("PagesCoverCameraButton.react"),{expanded:!this.$4()||this.state.shouldExpandMenu,label:this.$5(),shouldShowCoverSlideshowMenuOptionNux:this.props.coverData.cover_slideshow.isCoverSlideshowEnabled&&this.props.coverData.cover_slideshow.shouldShowMenuNux&&this.props.coreData.currentCoverType!==b("PagesCoverType").COVER_SLIDESHOW,shouldshowOnTourBadgeMenuOptionNux:this.props.coreData.eventTourBadgeInfo.shouldShowNux}),b("React").createElement(b("PagesCoverRemoveCoverConfirmationDialog.react"),{coreData:this.props.coreData,onToggle:this.$10,pageID:this.props.pageID,shown:this.state.showRemoveCoverConfirmationDialog}),b("React").createElement(b("PagesCoverVideoBrowserDialog.react"),{dialogShown:this.state.showCoverVideoBrowserDialog,isForSlideshow:!1,onConfirm:this.$11,onToggle:this.$9,pageID:this.props.pageID}))};e.exports=a}),null);
__d("PagesLiveCoverVideoStore",["FluxReduceStore","PagesCoverAction","PagesCoverDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c={videoID:null,canEnable:!1,isEnabled:!1,renderedWidth:812};g=babelHelpers.inherits(i,b("immutable").Record(c));g&&g.prototype;function i(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new i()};a.prototype.reduce=function(a,c){switch(c.type){case b("PagesCoverAction").NEW_COVER_DATA:c=c.data.coverData.cover_live_video;a=new i(c);return a;case b("PagesCoverAction").LIVE_VIDEO_ENABLE:a=a.set("isEnabled",!0);return a;case b("PagesCoverAction").LIVE_VIDEO_DISABLE:a=a.set("isEnabled",!1);return a;default:return a}};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("PagesCoverDispatcher"))}),null);
__d("PagesCoverPhotoStore",["FluxReduceStore","PagesCoverAction","PagesCoverDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{coverPhotoData:{focus:{height:0,width:0},id:"0",original:{height:0,width:0},uri:null},isEditable:!1,isLoading:!0,isPreviewMode:!1,isOverlayEnabled:!1,pageDescription:null,pageHasPhotos:!1,pageID:"0",pagePrimaryButton:null,renderedHeight:0,renderedWidth:0}};a.prototype.reduce=function(a,c){__p&&__p();var d,e=null;switch(c.type){case b("PagesCoverAction").NEW_COVER_DATA:d=(d=c.data)!=null?(d=d.coverData)!=null?d.cover_photo:d:d;d!==null&&(e=babelHelpers["extends"]({},d,{isLoading:!1,isPreviewMode:!1}));break;case b("PagesCoverAction").PHOTO_SAVED:case b("PagesCoverAction").PHOTO_REMOVED:e=babelHelpers["extends"]({},a,c.data,{isLoading:!1,isPreviewMode:!1});break;case b("PagesCoverAction").PHOTO_UPLOADING:case b("PagesCoverAction").COVER_REMOVING:e=babelHelpers["extends"]({},a,{isPreviewMode:!1});break;case b("PagesCoverAction").PHOTO_PREVIEWING:e=babelHelpers["extends"]({},a,c.data,{isLoading:!1,isPreviewMode:!0});break;case b("PagesCoverAction").PHOTO_SAVING:e=babelHelpers["extends"]({},a,c.data,{isLoading:!0,isPreviewMode:!1});break}return e||a};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("PagesCoverDispatcher"))}),null);
__d("PagesCoverSlideshowOptimizerStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ON:"on",OFF:"off"})}),null);
__d("XPagesCoverSlideshowEditableItemsAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/profile/cover_slideshow/editable_items/",{page_id:{type:"FBID",required:!0},optimizer_status:{type:"String"}})}),null);
__d("PagesCoverSlideshowStore",["AsyncRequest","CoverSlideshowUtil","CoverVideoOffsetType","CoverVideoStatus","FluxReduceStore","PagesCoverAction","PagesCoverDispatcher","PagesCoverSlideshowActionCreator","PagesCoverSlideshowItemType","PagesCoverSlideshowOptimizerStatus","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","XPagesCoverSlideshowEditableItemsAsyncController","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;c={pageID:0,isCoverSlideshowEnabled:!1,isCoverSlideshowVideoEnabled:!1,items:[],currentIndex:0,thumbnailHeight:0,thumbnailWidth:0,containerHeight:0,containerWidth:0,showLoadingScreen:!1,hasPendingChanges:!1,nuxTourSteps:[],shouldShowNUXTour:!1,isContentOptimizerOn:!1,shouldShowLoadingScreenOnPickerPlaceholder:!1,shouldShowMenuNux:!1,shouldShowEditSlideshowTooltip:!1,shouldAllowUploadingVideo:!0};g=babelHelpers.inherits(i,b("immutable").Record(c));g&&g.prototype;function i(){g.apply(this,arguments)}d=babelHelpers.inherits(a,b("FluxReduceStore"));h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$PagesCoverSlideshowStore6=new Set(),b}a.prototype.getInitialState=function(){return new i()};a.prototype.getCurrentState=function(){return{pageID:this.getState().get("pageID"),isCoverSlideshowEnabled:this.getState().get("isCoverSlideshowEnabled"),isCoverSlideshowVideoEnabled:this.getState().get("isCoverSlideshowVideoEnabled"),items:this.getState().get("items"),currentIndex:this.getState().get("currentIndex"),thumbnailHeight:this.getState().get("thumbnailHeight"),thumbnailWidth:this.getState().get("thumbnailWidth"),containerHeight:this.getState().get("containerHeight"),containerWidth:this.getState().get("containerWidth"),showLoadingScreen:this.getState().get("showLoadingScreen"),hasPendingChanges:this.getState().get("hasPendingChanges"),nuxTourSteps:this.getState().get("nuxTourSteps"),shouldShowNUXTour:this.getState().get("shouldShowNUXTour"),isContentOptimizerOn:this.getState().get("isContentOptimizerOn"),shouldShowLoadingScreenOnPickerPlaceholder:this.getState().get("shouldShowLoadingScreenOnPickerPlaceholder"),shouldShowMenuNux:this.getState().get("shouldShowMenuNux"),shouldShowEditSlideshowTooltip:this.getState().get("shouldShowEditSlideshowTooltip"),shouldAllowUploadingVideo:this.getState().get("shouldAllowUploadingVideo")}};a.prototype.$PagesCoverSlideshowStore7=function(){if(this.$PagesCoverSlideshowStore3===void 0||this.$PagesCoverSlideshowStore3===null){var a=b("XPagesCoverSlideshowEditableItemsAsyncController").getURIBuilder().setFBID("page_id",this.getState().get("pageID")).setString("optimizer_status",b("PagesCoverSlideshowOptimizerStatus").ON).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){b("PagesCoverSlideshowActionCreator").loadPrefilledItems(a.payload)}).send();return null}else return this.$PagesCoverSlideshowStore3};a.prototype.$PagesCoverSlideshowStore8=function(a,c){var d={thumbnailID:null,thumbnailURI:null,thumbnailHeight:this.getState().get("thumbnailHeight"),thumbnailWidth:this.getState().get("thumbnailWidth")},e=a.thumbnails,f=a.offsetType,g=a.offsetValue;a=a.preferredThumbnailData;if(e&&e.length>0){var h;d={thumbnailID:(h=a==null?void 0:a.id)!=null?h:e[0].id,thumbnailURI:(h=a==null?void 0:a.url)!=null?h:e[0].url,thumbnailHeight:this.getState().get("thumbnailHeight"),thumbnailWidth:this.getState().get("thumbnailWidth")}}return{itemType:b("PagesCoverSlideshowItemType").VIDEO,carouselMediaData:{photoData:null,videoData:{videoID:c,containerHeight:this.getState().get("containerHeight"),containerWidth:this.getState().get("containerWidth"),isForSlideshow:!0,offsetType:f,offsetValue:g,shouldCoverVideoLoop:!0,status:b("CoverVideoStatus").PREVIEWING}},thumbnailData:d}};a.prototype.$PagesCoverSlideshowStore9=function(a,c){for(var d=0;d<c.length;d++)if(b("CoverSlideshowUtil").getMediaId(c[d])===a)return c[d];return null};a.prototype.$PagesCoverSlideshowStore10=function(a,c,d){__p&&__p();if(!c)return a;var e=!1,f=a.map(function(a,f){if(b("CoverSlideshowUtil").getMediaId(a)===d){e=!0;return c}else return a});e||(f=Array.from(a),f.push(c));return f};a.prototype.$PagesCoverSlideshowStore11=function(a,b,c){var d=null;c<a.length?d=a.map(function(a,d){return c===d?b:a}):(d=Array.from(a),d.push(b),d);return d};a.prototype.$PagesCoverSlideshowStore12=function(a,b,c){var d=Array.from(a);if(b===c)return a;a=d.splice(b,1);d.splice(c,0,a[0]);return d};a.prototype.$PagesCoverSlideshowStore13=function(a,b){if(a<0)return 0;return a>=b?Math.max(b-1,0):a};a.prototype.$PagesCoverSlideshowStore14=function(){var a=b("XPagesCoverSlideshowEditableItemsAsyncController").getURIBuilder().setFBID("page_id",this.getState().get("pageID")).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){b("PagesCoverSlideshowActionCreator").loadEditableItems(a.payload)}).send();return null};a.prototype.$PagesCoverSlideshowStore15=function(a){return Array.from(a).map(function(a){a.shouldFocusOnItem=!1;return a})};a.prototype.reduce=function(a,c){__p&&__p();var d,e=null,f=null,g=a.get("items"),h=a.get("currentIndex");switch(c.type){case b("PagesCoverAction").NEW_COVER_DATA:d=(d=c.data)!=null?(d=d.coverData)!=null?d.cover_slideshow:d:d;d&&(a=a.set("items",d.items),a=a.set("isCoverSlideshowEnabled",d.isCoverSlideshowEnabled),a=a.set("isCoverSlideshowVideoEnabled",d.isCoverSlideshowVideoEnabled),a=a.set("thumbnailHeight",d.thumbnailHeight),a=a.set("thumbnailWidth",d.thumbnailWidth),a=a.set("containerHeight",d.containerHeight),a=a.set("containerWidth",d.containerWidth),this.$PagesCoverSlideshowStore1=Array.from(d.items),this.$PagesCoverSlideshowStore6.clear(),a=a.set("showLoadingScreen",!1),a=a.set("hasPendingChanges",!1),a=a.set("shouldShowNUXTour",d.shouldShowNUXTour),a=a.set("isContentOptimizerOn",d.isContentOptimizerOn),a=a.set("shouldShowMenuNux",d.shouldShowMenuNux),a=a.set("shouldShowEditSlideshowTooltip",d.shouldShowEditSlideshowTooltip),a=a.set("currentIndex",this.$PagesCoverSlideshowStore13(a.currentIndex,d.items.length)));a=a.set("shouldAllowUploadingVideo",!0);d=c.data.pageID;d&&(a=a.set("pageID",d));break;case b("PagesCoverAction").SLIDESHOW_EDIT:this.$PagesCoverSlideshowStore14();break;case b("PagesCoverAction").SLIDESHOW_PHOTO_PREVIEWING:if(c.data){d=c.data;var i=d.itemData;d=d.previousKey;e=this.$PagesCoverSlideshowStore10(g,i,d);a=a.set("items",e);a=a.set("hasPendingChanges",!0);a=a.set("isContentOptimizerOn",!1)}a=a.set("shouldShowLoadingScreenOnPickerPlaceholder",!1);break;case b("PagesCoverAction").SLIDESHOW_PHOTO_UPLOADING:i=c.data.uploadingIndex;i<g.length?(f=babelHelpers["extends"]({},g[i],{shouldShowLoadingIndicator:!0}),e=this.$PagesCoverSlideshowStore11(g,f,i),a=a.set("items",e),a=a.set("currentIndex",i)):a=a.set("shouldShowLoadingScreenOnPickerPlaceholder",!0);a=a.set("hasPendingChanges",!0);break;case b("PagesCoverAction").SLIDESHOW_VIDEO_START_UPLOAD:if(c.data){d=c.data;i=d.url;var j=d.uploadingIndex;d=d.videoUploadTempID;d={itemType:b("PagesCoverSlideshowItemType").VIDEO,carouselMediaData:{photoData:null,videoData:{videoID:d,containerHeight:this.getState().get("containerHeight"),containerWidth:this.getState().get("containerWidth"),isForSlideshow:!0,offsetType:b("CoverVideoOffsetType").VERTICAL,offsetValue:0,shouldCoverVideoLoop:!0,status:b("CoverVideoStatus").UPLOADING,progress:0}},thumbnailData:{thumbnailID:null,thumbnailURI:i,thumbnailHeight:this.getState().get("thumbnailHeight"),thumbnailWidth:this.getState().get("thumbnailWidth")},shouldFocusOnItem:!0};e=this.$PagesCoverSlideshowStore11(g,d,j);a=a.set("items",e)}a=a.set("shouldAllowUploadingVideo",!1);a=a.set("hasPendingChanges",!0);break;case b("PagesCoverAction").SLIDESHOW_VIDEO_UPLOADING:if(c.data){i=c.data;d=i.previousKey;j=i.progress;i=this.$PagesCoverSlideshowStore9(d,g);!!i&&!!i.carouselMediaData.videoData&&(i.carouselMediaData.videoData.progress=j,i.carouselMediaData.videoData.status=b("CoverVideoStatus").UPLOADING,e=this.$PagesCoverSlideshowStore10(g,i,d),a=a.set("items",e))}break;case b("PagesCoverAction").SLIDESHOW_VIDEO_ENCODING:if(c.data){j=c.data;i=j.previousKey;d=j.progress;j=this.$PagesCoverSlideshowStore9(i,g);!!j&&!!j.carouselMediaData.videoData&&(j.carouselMediaData.videoData.progress=d,j.carouselMediaData.videoData.status=b("CoverVideoStatus").ENCODING,e=this.$PagesCoverSlideshowStore10(g,j,i),a=a.set("items",e))}break;case b("PagesCoverAction").SLIDESHOW_VIDEO_ENCODE_FINISHED:if(c.data){d=c.data;j=d.videoData;i=d.previousKey;d=this.$PagesCoverSlideshowStore9(i,g);if(!d)break;d=babelHelpers["extends"]({},d.thumbnailData);j={itemType:b("PagesCoverSlideshowItemType").VIDEO,carouselMediaData:{photoData:null,videoData:j},thumbnailData:d,isNewUpload:!0,shouldFocusOnItem:!0};e=this.$PagesCoverSlideshowStore10(g,j,i);a=a.set("items",e)}break;case b("PagesCoverAction").SLIDESHOW_VIDEO_SETTING_CONFIRMED:if(c.data){d=c.data;j=d.videoData;i=d.preferredThumbnailID;var k=d.preferredThumbnailURL,l=d.previousKey;d=d.shouldFocusOnItem;j.status=b("CoverVideoStatus").PREVIEWING;j={itemType:b("PagesCoverSlideshowItemType").VIDEO,carouselMediaData:{photoData:null,videoData:j},thumbnailData:{thumbnailID:i,thumbnailURI:k,thumbnailHeight:this.getState().get("thumbnailHeight"),thumbnailWidth:this.getState().get("thumbnailWidth")},shouldFocusOnItem:d};e=this.$PagesCoverSlideshowStore10(g,j,l);a=a.set("shouldAllowUploadingVideo",!0);a=a.set("items",e);a=a.set("hasPendingChanges",!0);a=a.set("isContentOptimizerOn",!1)}break;case b("PagesCoverAction").SLIDESHOW_VIDEO_REPOSITIONED:if(c.data){i=c.data;k=i.itemRepositionedIndex;d=i.offsetType;j=i.offsetValue;f=babelHelpers["extends"]({},g[k]);(f.carouselMediaData.videoData.offsetType!==d||f.carouselMediaData.videoData.offsetValue!==j)&&(a=a.set("hasPendingChanges",!0));f.carouselMediaData.videoData.offsetType=d;f.carouselMediaData.videoData.offsetValue=j;e=this.$PagesCoverSlideshowStore11(g,f,k);a=a.set("items",e)}break;case b("PagesCoverAction").SLIDESHOW_VIDEO_UPLOADING_FAILED:case b("PagesCoverAction").SLIDESHOW_VIDEO_POSTING_FAILED:a=a.set("shouldAllowUploadingVideo",!0);break;case b("PagesCoverAction").SLIDESHOW_CHANGE_CAROUSEL_INDEX:a=a.set("currentIndex",this.$PagesCoverSlideshowStore13(c.data.currentIndex,a.get("items").length));e=this.$PagesCoverSlideshowStore15(g);a=a.set("items",e);break;case b("PagesCoverAction").SLIDESHOW_ITEM_REPOSITIONED:l=c.data.itemRepositionedIndex;this.$PagesCoverSlideshowStore6.has(l)||(this.$PagesCoverSlideshowStore6.add(l),b("PagesLogger").log(a.get("pageID"),b("PagesLoggerEventEnum").DRAG,b("PagesLoggerEventTargetEnum").PAGE_COVER_SLIDESHOW,null,[],{event_name:"reposition_slideshow_item"}),a=a.set("hasPendingChanges",!0));break;case b("PagesCoverAction").SLIDESHOW_PHOTO_REMOVED:i=c.data.removedIndex;e=Array.from(g);e.splice(i,1);a=a.set("items",e);a=a.set("hasPendingChanges",!0);a=a.set("isContentOptimizerOn",!1);(h>i||h>=e.length)&&(a=a.set("currentIndex",this.$PagesCoverSlideshowStore13(h-1,e.length)));break;case b("PagesCoverAction").SLIDESHOW_EDITING_CANCELLED:e=Array.from(this.$PagesCoverSlideshowStore1);a=a.set("items",e);a=a.set("hasPendingChanges",!1);a=a.set("shouldAllowUploadingVideo",!0);a=a.set("currentIndex",this.$PagesCoverSlideshowStore13(Math.min(e.length-1,h),e.length));this.$PagesCoverSlideshowStore6.clear();break;case b("PagesCoverAction").SLIDESHOW_SAVING:a=a.set("showLoadingScreen",!0);a=a.set("hasPendingChanges",!1);a=a.set("shouldAllowUploadingVideo",!0);break;case b("PagesCoverAction").SLIDESHOW_CHANGE_ORDER:d=c.data;j=d.fromIndex;f=d.toIndex;e=this.$PagesCoverSlideshowStore12(g,j,f);a=a.set("items",e);a=a.set("hasPendingChanges",!0);a=a.set("currentIndex",this.$PagesCoverSlideshowStore13(f,e.length));a=a.set("isContentOptimizerOn",!1);break;case b("PagesCoverAction").SLIDESHOW_NUX_TOUR_ELEMENT_LOADED:if(a.get("shouldShowNUXTour")){k=c.data;l=k.context;i=k.step;h=k.description;d=k.position;(this.$PagesCoverSlideshowStore4===void 0||this.$PagesCoverSlideshowStore4===null)&&(this.$PagesCoverSlideshowStore4=[]);(this.$PagesCoverSlideshowStore5===void 0||this.$PagesCoverSlideshowStore5===null)&&(this.$PagesCoverSlideshowStore5=new Set());this.$PagesCoverSlideshowStore5.has(i)||(this.$PagesCoverSlideshowStore4.splice(i,0,{context:l,description:h,position:d}),this.$PagesCoverSlideshowStore5.add(i),a=a.set("nuxTourSteps",this.$PagesCoverSlideshowStore4))}break;case b("PagesCoverAction").SLIDESHOW_NUX_TOUR_FINISHED:a=a.set("shouldShowNUXTour",!1);break;case b("PagesCoverAction").SLIDESHOW_TOGGLE_CONTENT_SWITCHER:g=!!c.data;g?(this.$PagesCoverSlideshowStore2=a.get("items"),e=this.$PagesCoverSlideshowStore7(),e!==null&&(a=a.set("items",e))):this.$PagesCoverSlideshowStore2===void 0||this.$PagesCoverSlideshowStore2===null?this.$PagesCoverSlideshowStore2=a.get("items"):a=a.set("items",this.$PagesCoverSlideshowStore2);a=a.set("isContentOptimizerOn",g);a=a.set("hasPendingChanges",!0);break;case b("PagesCoverAction").SLIDESHOW_PREFILLED_PHOTO_LOADED:j=c.data.prefilledItems;this.$PagesCoverSlideshowStore3=j;a=a.set("items",j);break;case b("PagesCoverAction").SLIDESHOW_EDITABLE_ITEM_LOADED:f=c.data.editableItems;a=a.set("items",f);break;default:return a}return a};a.__moduleID=e.id;e.exports=new a(b("PagesCoverDispatcher"))}),null);
__d("PagesCoverTrailerStore",["FluxReduceStore","PagesCoverAction","PagesCoverDispatcher","PagesCoverTrailerState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{showsData:{title:""},viewerCoverTrailerState:b("PagesCoverTrailerState").WATCH_TRAILER,isAdmin:!1,isAutoplayGated:!1,isImmersiveShowPage:!1,isShowPageNewCover:!1}};a.prototype.reduce=function(a,c){var d=null;switch(c.type){case b("PagesCoverAction").NEW_COVER_DATA:c=(c=c.data)!=null?(c=c.coverData)!=null?c.cover_trailer:c:c;c!==null&&(d=babelHelpers["extends"]({},c),this.$PagesCoverTrailerStore1=d);break}return d||a};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("PagesCoverDispatcher"))}),null);
__d("PagesCoverVideoStore",["CoverVideoOffsetType","CoverVideoStatus","FluxReduceStore","PagesCoverAction","PagesCoverDispatcher","PagesCoverVideoDurationType","VideoPlayerOrigins"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{videoID:"",status:b("CoverVideoStatus").PUBLISHED,isViewerAdmin:!1,shouldShowChooseFromCoverVideoMenu:!1,isForSlideshow:!1,isFromParentPage:!1,isParentLocationPage:!1,shouldCoverVideoLoop:!1,minPlayableDurationInSec:b("PagesCoverVideoDurationType").MIN_PLAYABLE_DURATION_IN_SEC,maxPlayableDurationInSec:b("PagesCoverVideoDurationType").MAX_PLAYABLE_DURATION_IN_SEC,containerHeight:312,containerWidth:820,thumbnails:[],offsetType:b("CoverVideoOffsetType").VERTICAL,offsetValue:0}};a.prototype.reduce=function(a,c){__p&&__p();var d,e=null;switch(c.type){case b("PagesCoverAction").NEW_COVER_DATA:this.$PagesCoverVideoStore1=c.data.pageID;d=(d=c.data)!=null?(d=d.coverData)!=null?d.cover_video:d:d;d&&(e=babelHelpers["extends"]({},a,d,{isForSlideshow:!1,playerOrigin:b("VideoPlayerOrigins").PAGE_TIMELINE}));break;case b("PagesCoverAction").VIDEO_REPOSITIONED:d=c.data;var f=d.offsetType;d=d.offsetValue;e=babelHelpers["extends"]({},a,{offsetType:f,offsetValue:d});break;case b("PagesCoverAction").VIDEO_START_UPLOAD:e=babelHelpers["extends"]({},a,{status:b("CoverVideoStatus").UPLOADING,progress:0,thumbnails:c.data.thumbnails});break;case b("PagesCoverAction").VIDEO_UPLOADING:e=babelHelpers["extends"]({},a,{status:b("CoverVideoStatus").UPLOADING,progress:c.data.progress});break;case b("PagesCoverAction").VIDEO_ENCODING:e=babelHelpers["extends"]({},a,{status:b("CoverVideoStatus").ENCODING,progress:c.data.progress});break;case b("PagesCoverAction").VIDEO_PREVIEWING:e=babelHelpers["extends"]({},a,c.data,{status:b("CoverVideoStatus").PREVIEWING});break;case b("PagesCoverAction").VIDEO_CHOOSING_THUMBNAIL:e=babelHelpers["extends"]({},a,c.data,{status:b("CoverVideoStatus").CHOOSING_THUMBNAIL});break;case b("PagesCoverAction").VIDEO_PUBLISHING:e=babelHelpers["extends"]({},a,{status:b("CoverVideoStatus").PUBLISHING});break;case b("PagesCoverAction").VIDEO_PUBLISHED:e=babelHelpers["extends"]({},a,{status:b("CoverVideoStatus").PUBLISHED},c.data);break;case b("PagesCoverAction").VIDEO_CANCELLING:default:e=a}return e||a};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("PagesCoverDispatcher"))}),null);